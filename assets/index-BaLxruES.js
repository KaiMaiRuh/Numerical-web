function iF(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Km(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sF(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var mA={exports:{}},Jm={},hA={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hc=Symbol.for("react.element"),oF=Symbol.for("react.portal"),uF=Symbol.for("react.fragment"),lF=Symbol.for("react.strict_mode"),cF=Symbol.for("react.profiler"),fF=Symbol.for("react.provider"),dF=Symbol.for("react.context"),mF=Symbol.for("react.forward_ref"),hF=Symbol.for("react.suspense"),pF=Symbol.for("react.memo"),vF=Symbol.for("react.lazy"),ub=Symbol.iterator;function gF(t){return t===null||typeof t!="object"?null:(t=ub&&t[ub]||t["@@iterator"],typeof t=="function"?t:null)}var pA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vA=Object.assign,gA={};function Wu(t,e,r){this.props=t,this.context=e,this.refs=gA,this.updater=r||pA}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yA(){}yA.prototype=Wu.prototype;function Hg(t,e,r){this.props=t,this.context=e,this.refs=gA,this.updater=r||pA}var Gg=Hg.prototype=new yA;Gg.constructor=Hg;vA(Gg,Wu.prototype);Gg.isPureReactComponent=!0;var lb=Array.isArray,xA=Object.prototype.hasOwnProperty,Wg={current:null},bA={key:!0,ref:!0,__self:!0,__source:!0};function wA(t,e,r){var n,a={},i=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)xA.call(e,n)&&!bA.hasOwnProperty(n)&&(a[n]=e[n]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var l=Array(u),o=0;o<u;o++)l[o]=arguments[o+2];a.children=l}if(t&&t.defaultProps)for(n in u=t.defaultProps,u)a[n]===void 0&&(a[n]=u[n]);return{$$typeof:Hc,type:t,key:i,ref:s,props:a,_owner:Wg.current}}function yF(t,e){return{$$typeof:Hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hc}function xF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var cb=/\/+/g;function dp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xF(""+t.key):e.toString(36)}function xd(t,e,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Hc:case oF:s=!0}}if(s)return s=t,a=a(s),t=n===""?"."+dp(s,0):n,lb(a)?(r="",t!=null&&(r=t.replace(cb,"$&/")+"/"),xd(a,e,r,"",function(o){return o})):a!=null&&(Qg(a)&&(a=yF(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(cb,"$&/")+"/")+t)),e.push(a)),1;if(s=0,n=n===""?".":n+":",lb(t))for(var u=0;u<t.length;u++){i=t[u];var l=n+dp(i,u);s+=xd(i,e,r,l,a)}else if(l=gF(t),typeof l=="function")for(t=l.call(t),u=0;!(i=t.next()).done;)i=i.value,l=n+dp(i,u++),s+=xd(i,e,r,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Mf(t,e,r){if(t==null)return t;var n=[],a=0;return xd(t,n,"","",function(i){return e.call(r,i,a++)}),n}function bF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},bd={transition:null},wF={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:bd,ReactCurrentOwner:Wg};function NA(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:Mf,forEach:function(t,e,r){Mf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Mf(t,function(){e++}),e},toArray:function(t){return Mf(t,function(e){return e})||[]},only:function(t){if(!Qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=Wu;Et.Fragment=uF;Et.Profiler=cF;Et.PureComponent=Hg;Et.StrictMode=lF;Et.Suspense=hF;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wF;Et.act=NA;Et.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=vA({},t.props),a=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Wg.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)xA.call(e,l)&&!bA.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&u!==void 0?u[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){u=Array(l);for(var o=0;o<l;o++)u[o]=arguments[o+2];n.children=u}return{$$typeof:Hc,type:t.type,key:a,ref:i,props:n,_owner:s}};Et.createContext=function(t){return t={$$typeof:dF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fF,_context:t},t.Consumer=t};Et.createElement=wA;Et.createFactory=function(t){var e=wA.bind(null,t);return e.type=t,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:mF,render:t}};Et.isValidElement=Qg;Et.lazy=function(t){return{$$typeof:vF,_payload:{_status:-1,_result:t},_init:bF}};Et.memo=function(t,e){return{$$typeof:pF,type:t,compare:e===void 0?null:e}};Et.startTransition=function(t){var e=bd.transition;bd.transition={};try{t()}finally{bd.transition=e}};Et.unstable_act=NA;Et.useCallback=function(t,e){return Tn.current.useCallback(t,e)};Et.useContext=function(t){return Tn.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};Et.useEffect=function(t,e){return Tn.current.useEffect(t,e)};Et.useId=function(){return Tn.current.useId()};Et.useImperativeHandle=function(t,e,r){return Tn.current.useImperativeHandle(t,e,r)};Et.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};Et.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};Et.useMemo=function(t,e){return Tn.current.useMemo(t,e)};Et.useReducer=function(t,e,r){return Tn.current.useReducer(t,e,r)};Et.useRef=function(t){return Tn.current.useRef(t)};Et.useState=function(t){return Tn.current.useState(t)};Et.useSyncExternalStore=function(t,e,r){return Tn.current.useSyncExternalStore(t,e,r)};Et.useTransition=function(){return Tn.current.useTransition()};Et.version="18.3.1";hA.exports=Et;var U=hA.exports;const NF=Km(U),_F=iF({__proto__:null,default:NF},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EF=U,SF=Symbol.for("react.element"),AF=Symbol.for("react.fragment"),DF=Object.prototype.hasOwnProperty,CF=EF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TF={key:!0,ref:!0,__self:!0,__source:!0};function _A(t,e,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)DF.call(e,n)&&!TF.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:SF,type:t,key:i,ref:s,props:a,_owner:CF.current}}Jm.Fragment=AF;Jm.jsx=_A;Jm.jsxs=_A;mA.exports=Jm;var y=mA.exports,EA={exports:{}},Yn={},SA={exports:{}},AA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,H){var Z=L.length;L.push(H);e:for(;0<Z;){var ie=Z-1>>>1,k=L[ie];if(0<a(k,H))L[ie]=H,L[Z]=k,Z=ie;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var H=L[0],Z=L.pop();if(Z!==H){L[0]=Z;e:for(var ie=0,k=L.length,Y=k>>>1;ie<Y;){var V=2*(ie+1)-1,xe=L[V],le=V+1,de=L[le];if(0>a(xe,Z))le<k&&0>a(de,xe)?(L[ie]=de,L[le]=Z,ie=le):(L[ie]=xe,L[V]=Z,ie=V);else if(le<k&&0>a(de,Z))L[ie]=de,L[le]=Z,ie=le;else break e}}return H}function a(L,H){var Z=L.sortIndex-H.sortIndex;return Z!==0?Z:L.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],o=[],c=1,d=null,m=3,h=!1,p=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var H=r(o);H!==null;){if(H.callback===null)n(o);else if(H.startTime<=L)n(o),H.sortIndex=H.expirationTime,e(l,H);else break;H=r(o)}}function g(L){if(v=!1,b(L),!p)if(r(l)!==null)p=!0,R(w);else{var H=r(o);H!==null&&G(g,H.startTime-L)}}function w(L,H){p=!1,v&&(v=!1,N(E),E=-1),h=!0;var Z=m;try{for(b(H),d=r(l);d!==null&&(!(d.expirationTime>H)||L&&!M());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,m=d.priorityLevel;var k=ie(d.expirationTime<=H);H=t.unstable_now(),typeof k=="function"?d.callback=k:d===r(l)&&n(l),b(H)}else n(l);d=r(l)}if(d!==null)var Y=!0;else{var V=r(o);V!==null&&G(g,V.startTime-H),Y=!1}return Y}finally{d=null,m=Z,h=!1}}var x=!1,_=null,E=-1,D=5,T=-1;function M(){return!(t.unstable_now()-T<D)}function I(){if(_!==null){var L=t.unstable_now();T=L;var H=!0;try{H=_(!0,L)}finally{H?P():(x=!1,_=null)}}else x=!1}var P;if(typeof A=="function")P=function(){A(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=I,P=function(){$.postMessage(null)}}else P=function(){C(I,0)};function R(L){_=L,x||(x=!0,P())}function G(L,H){E=C(function(){L(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,R(w))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var Z=m;m=H;try{return L()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Z=m;m=L;try{return H()}finally{m=Z}},t.unstable_scheduleCallback=function(L,H,Z){var ie=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ie+Z:ie):Z=ie,L){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=Z+k,L={id:c++,callback:H,priorityLevel:L,startTime:Z,expirationTime:k,sortIndex:-1},Z>ie?(L.sortIndex=Z,e(o,L),r(l)===null&&L===r(o)&&(v?(N(E),E=-1):v=!0,G(g,Z-ie))):(L.sortIndex=k,e(l,L),p||h||(p=!0,R(w))),L},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(L){var H=m;return function(){var Z=m;m=H;try{return L.apply(this,arguments)}finally{m=Z}}}})(AA);SA.exports=AA;var MF=SA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IF=U,Kn=MF;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DA=new Set,cc={};function po(t,e){Su(t,e),Su(t+"Capture",e)}function Su(t,e){for(cc[t]=e,t=0;t<e.length;t++)DA.add(e[t])}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),av=Object.prototype.hasOwnProperty,PF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fb={},db={};function FF(t){return av.call(db,t)?!0:av.call(fb,t)?!1:PF.test(t)?db[t]=!0:(fb[t]=!0,!1)}function RF(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OF(t,e,r,n){if(e===null||typeof e>"u"||RF(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,r,n,a,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sn[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sn[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){sn[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sn[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sn[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){sn[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){sn[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){sn[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){sn[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xg=/[\-:]([a-z])/g;function Kg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xg,Kg);sn[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xg,Kg);sn[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xg,Kg);sn[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){sn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});sn.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){sn[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jg(t,e,r,n){var a=sn.hasOwnProperty(e)?sn[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OF(e,r,a,n)&&(r=null),n||a===null?FF(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ai=IF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,If=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),Yo=Symbol.for("react.fragment"),Yg=Symbol.for("react.strict_mode"),iv=Symbol.for("react.profiler"),CA=Symbol.for("react.provider"),TA=Symbol.for("react.context"),Zg=Symbol.for("react.forward_ref"),sv=Symbol.for("react.suspense"),ov=Symbol.for("react.suspense_list"),e0=Symbol.for("react.memo"),ki=Symbol.for("react.lazy"),MA=Symbol.for("react.offscreen"),mb=Symbol.iterator;function Tl(t){return t===null||typeof t!="object"?null:(t=mb&&t[mb]||t["@@iterator"],typeof t=="function"?t:null)}var pr=Object.assign,mp;function $l(t){if(mp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);mp=e&&e[1]||""}return`
`+mp+t}var hp=!1;function pp(t,e){if(!t||hp)return"";hp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(o){var n=o}Reflect.construct(t,[],e)}else{try{e.call()}catch(o){n=o}t.call(e.prototype)}else{try{throw Error()}catch(o){n=o}t()}}catch(o){if(o&&n&&typeof o.stack=="string"){for(var a=o.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,u=i.length-1;1<=s&&0<=u&&a[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(a[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||a[s]!==i[u]){var l=`
`+a[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=u);break}}}finally{hp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?$l(t):""}function BF(t){switch(t.tag){case 5:return $l(t.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return t=pp(t.type,!1),t;case 11:return t=pp(t.type.render,!1),t;case 1:return t=pp(t.type,!0),t;default:return""}}function uv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yo:return"Fragment";case Jo:return"Portal";case iv:return"Profiler";case Yg:return"StrictMode";case sv:return"Suspense";case ov:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TA:return(t.displayName||"Context")+".Consumer";case CA:return(t._context.displayName||"Context")+".Provider";case Zg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case e0:return e=t.displayName||null,e!==null?e:uv(t.type)||"Memo";case ki:e=t._payload,t=t._init;try{return uv(t(e))}catch{}}return null}function jF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uv(e);case 8:return e===Yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kF(t){var e=IA(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pf(t){t._valueTracker||(t._valueTracker=kF(t))}function PA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=IA(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function $d(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lv(t,e){var r=e.checked;return pr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function hb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FA(t,e){e=e.checked,e!=null&&Jg(t,"checked",e,!1)}function cv(t,e){FA(t,e);var r=fs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fv(t,e.type,r):e.hasOwnProperty("defaultValue")&&fv(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function fv(t,e,r){(e!=="number"||$d(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ll=Array.isArray;function du(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fs(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function dv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return pr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Re(92));if(Ll(r)){if(1<r.length)throw Error(Re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fs(r)}}function RA(t,e){var r=fs(e.value),n=fs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function gb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function OA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?OA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ff,BA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ff=Ff||document.createElement("div"),Ff.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ff.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$F=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(t){$F.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ql[e]=Ql[t]})});function jA(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ql.hasOwnProperty(t)&&Ql[t]?(""+e).trim():e+"px"}function kA(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=jA(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var LF=pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hv(t,e){if(e){if(LF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function pv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vv=null;function t0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gv=null,mu=null,hu=null;function yb(t){if(t=Qc(t)){if(typeof gv!="function")throw Error(Re(280));var e=t.stateNode;e&&(e=rh(e),gv(t.stateNode,t.type,e))}}function $A(t){mu?hu?hu.push(t):hu=[t]:mu=t}function LA(){if(mu){var t=mu,e=hu;if(hu=mu=null,yb(t),e)for(t=0;t<e.length;t++)yb(e[t])}}function zA(t,e){return t(e)}function VA(){}var vp=!1;function UA(t,e,r){if(vp)return t(e,r);vp=!0;try{return zA(t,e,r)}finally{vp=!1,(mu!==null||hu!==null)&&(VA(),LA())}}function dc(t,e){var r=t.stateNode;if(r===null)return null;var n=rh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Re(231,e,typeof r));return r}var yv=!1;if(gi)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){yv=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{yv=!1}function zF(t,e,r,n,a,i,s,u,l){var o=Array.prototype.slice.call(arguments,3);try{e.apply(r,o)}catch(c){this.onError(c)}}var Xl=!1,Ld=null,zd=!1,xv=null,VF={onError:function(t){Xl=!0,Ld=t}};function UF(t,e,r,n,a,i,s,u,l){Xl=!1,Ld=null,zF.apply(VF,arguments)}function qF(t,e,r,n,a,i,s,u,l){if(UF.apply(this,arguments),Xl){if(Xl){var o=Ld;Xl=!1,Ld=null}else throw Error(Re(198));zd||(zd=!0,xv=o)}}function vo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function qA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xb(t){if(vo(t)!==t)throw Error(Re(188))}function HF(t){var e=t.alternate;if(!e){if(e=vo(t),e===null)throw Error(Re(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return xb(a),t;if(i===n)return xb(a),e;i=i.sibling}throw Error(Re(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,u=a.child;u;){if(u===r){s=!0,r=a,n=i;break}if(u===n){s=!0,n=a,r=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===r){s=!0,r=i,n=a;break}if(u===n){s=!0,n=i,r=a;break}u=u.sibling}if(!s)throw Error(Re(189))}}if(r.alternate!==n)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?t:e}function HA(t){return t=HF(t),t!==null?GA(t):null}function GA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GA(t);if(e!==null)return e;t=t.sibling}return null}var WA=Kn.unstable_scheduleCallback,bb=Kn.unstable_cancelCallback,GF=Kn.unstable_shouldYield,WF=Kn.unstable_requestPaint,Er=Kn.unstable_now,QF=Kn.unstable_getCurrentPriorityLevel,r0=Kn.unstable_ImmediatePriority,QA=Kn.unstable_UserBlockingPriority,Vd=Kn.unstable_NormalPriority,XF=Kn.unstable_LowPriority,XA=Kn.unstable_IdlePriority,Ym=null,Ga=null;function KF(t){if(Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(Ym,t,void 0,(t.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:ZF,JF=Math.log,YF=Math.LN2;function ZF(t){return t>>>=0,t===0?32:31-(JF(t)/YF|0)|0}var Rf=64,Of=4194304;function zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ud(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,s=r&268435455;if(s!==0){var u=s&~a;u!==0?n=zl(u):(i&=s,i!==0&&(n=zl(i)))}else s=r&~a,s!==0?n=zl(s):i!==0&&(n=zl(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Da(e),a=1<<r,n|=t[r],e&=~a;return n}function eR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Da(i),u=1<<s,l=a[s];l===-1?(!(u&r)||u&n)&&(a[s]=eR(u,e)):l<=e&&(t.expiredLanes|=u),i&=~u}}function bv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KA(){var t=Rf;return Rf<<=1,!(Rf&4194240)&&(Rf=64),t}function gp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Gc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Da(e),t[e]=r}function rR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Da(r),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function n0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Da(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Jt=0;function JA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YA,a0,ZA,eD,tD,wv=!1,Bf=[],Ki=null,Ji=null,Yi=null,mc=new Map,hc=new Map,Vi=[],nR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wb(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(e.pointerId)}}function Il(t,e,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Qc(e),e!==null&&a0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function aR(t,e,r,n,a){switch(e){case"focusin":return Ki=Il(Ki,t,e,r,n,a),!0;case"dragenter":return Ji=Il(Ji,t,e,r,n,a),!0;case"mouseover":return Yi=Il(Yi,t,e,r,n,a),!0;case"pointerover":var i=a.pointerId;return mc.set(i,Il(mc.get(i)||null,t,e,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,hc.set(i,Il(hc.get(i)||null,t,e,r,n,a)),!0}return!1}function rD(t){var e=Qs(t.target);if(e!==null){var r=vo(e);if(r!==null){if(e=r.tag,e===13){if(e=qA(r),e!==null){t.blockedOn=e,tD(t.priority,function(){ZA(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Nv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);vv=n,r.target.dispatchEvent(n),vv=null}else return e=Qc(r),e!==null&&a0(e),t.blockedOn=r,!1;e.shift()}return!0}function Nb(t,e,r){wd(t)&&r.delete(e)}function iR(){wv=!1,Ki!==null&&wd(Ki)&&(Ki=null),Ji!==null&&wd(Ji)&&(Ji=null),Yi!==null&&wd(Yi)&&(Yi=null),mc.forEach(Nb),hc.forEach(Nb)}function Pl(t,e){t.blockedOn===e&&(t.blockedOn=null,wv||(wv=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,iR)))}function pc(t){function e(a){return Pl(a,t)}if(0<Bf.length){Pl(Bf[0],t);for(var r=1;r<Bf.length;r++){var n=Bf[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ki!==null&&Pl(Ki,t),Ji!==null&&Pl(Ji,t),Yi!==null&&Pl(Yi,t),mc.forEach(e),hc.forEach(e),r=0;r<Vi.length;r++)n=Vi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Vi.length&&(r=Vi[0],r.blockedOn===null);)rD(r),r.blockedOn===null&&Vi.shift()}var pu=Ai.ReactCurrentBatchConfig,qd=!0;function sR(t,e,r,n){var a=Jt,i=pu.transition;pu.transition=null;try{Jt=1,i0(t,e,r,n)}finally{Jt=a,pu.transition=i}}function oR(t,e,r,n){var a=Jt,i=pu.transition;pu.transition=null;try{Jt=4,i0(t,e,r,n)}finally{Jt=a,pu.transition=i}}function i0(t,e,r,n){if(qd){var a=Nv(t,e,r,n);if(a===null)Dp(t,e,n,Hd,r),wb(t,n);else if(aR(a,t,e,r,n))n.stopPropagation();else if(wb(t,n),e&4&&-1<nR.indexOf(t)){for(;a!==null;){var i=Qc(a);if(i!==null&&YA(i),i=Nv(t,e,r,n),i===null&&Dp(t,e,n,Hd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Dp(t,e,n,null,r)}}var Hd=null;function Nv(t,e,r,n){if(Hd=null,t=t0(n),t=Qs(t),t!==null)if(e=vo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=qA(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hd=t,null}function nD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QF()){case r0:return 1;case QA:return 4;case Vd:case XF:return 16;case XA:return 536870912;default:return 16}default:return 16}}var qi=null,s0=null,Nd=null;function aD(){if(Nd)return Nd;var t,e=s0,r=e.length,n,a="value"in qi?qi.value:qi.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===a[i-n];n++);return Nd=a.slice(t,1<n?1-n:void 0)}function _d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jf(){return!0}function _b(){return!1}function Zn(t){function e(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jf:_b,this.isPropagationStopped=_b,this}return pr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jf)},persist:function(){},isPersistent:jf}),e}var Qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o0=Zn(Qu),Wc=pr({},Qu,{view:0,detail:0}),uR=Zn(Wc),yp,xp,Fl,Zm=pr({},Wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fl&&(Fl&&t.type==="mousemove"?(yp=t.screenX-Fl.screenX,xp=t.screenY-Fl.screenY):xp=yp=0,Fl=t),yp)},movementY:function(t){return"movementY"in t?t.movementY:xp}}),Eb=Zn(Zm),lR=pr({},Zm,{dataTransfer:0}),cR=Zn(lR),fR=pr({},Wc,{relatedTarget:0}),bp=Zn(fR),dR=pr({},Qu,{animationName:0,elapsedTime:0,pseudoElement:0}),mR=Zn(dR),hR=pr({},Qu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pR=Zn(hR),vR=pr({},Qu,{data:0}),Sb=Zn(vR),gR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xR[t])?!!e[t]:!1}function u0(){return bR}var wR=pr({},Wc,{key:function(t){if(t.key){var e=gR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u0,charCode:function(t){return t.type==="keypress"?_d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NR=Zn(wR),_R=pr({},Zm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ab=Zn(_R),ER=pr({},Wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u0}),SR=Zn(ER),AR=pr({},Qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),DR=Zn(AR),CR=pr({},Zm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TR=Zn(CR),MR=[9,13,27,32],l0=gi&&"CompositionEvent"in window,Kl=null;gi&&"documentMode"in document&&(Kl=document.documentMode);var IR=gi&&"TextEvent"in window&&!Kl,iD=gi&&(!l0||Kl&&8<Kl&&11>=Kl),Db=" ",Cb=!1;function sD(t,e){switch(t){case"keyup":return MR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zo=!1;function PR(t,e){switch(t){case"compositionend":return oD(e);case"keypress":return e.which!==32?null:(Cb=!0,Db);case"textInput":return t=e.data,t===Db&&Cb?null:t;default:return null}}function FR(t,e){if(Zo)return t==="compositionend"||!l0&&sD(t,e)?(t=aD(),Nd=s0=qi=null,Zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iD&&e.locale!=="ko"?null:e.data;default:return null}}var RR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RR[t.type]:e==="textarea"}function uD(t,e,r,n){$A(n),e=Gd(e,"onChange"),0<e.length&&(r=new o0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Jl=null,vc=null;function OR(t){xD(t,0)}function eh(t){var e=ru(t);if(PA(e))return t}function BR(t,e){if(t==="change")return e}var lD=!1;if(gi){var wp;if(gi){var Np="oninput"in document;if(!Np){var Mb=document.createElement("div");Mb.setAttribute("oninput","return;"),Np=typeof Mb.oninput=="function"}wp=Np}else wp=!1;lD=wp&&(!document.documentMode||9<document.documentMode)}function Ib(){Jl&&(Jl.detachEvent("onpropertychange",cD),vc=Jl=null)}function cD(t){if(t.propertyName==="value"&&eh(vc)){var e=[];uD(e,vc,t,t0(t)),UA(OR,e)}}function jR(t,e,r){t==="focusin"?(Ib(),Jl=e,vc=r,Jl.attachEvent("onpropertychange",cD)):t==="focusout"&&Ib()}function kR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(vc)}function $R(t,e){if(t==="click")return eh(e)}function LR(t,e){if(t==="input"||t==="change")return eh(e)}function zR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ma=typeof Object.is=="function"?Object.is:zR;function gc(t,e){if(Ma(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!av.call(e,a)||!Ma(t[a],e[a]))return!1}return!0}function Pb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fb(t,e){var r=Pb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pb(r)}}function fD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dD(){for(var t=window,e=$d();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=$d(t.document)}return e}function c0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VR(t){var e=dD(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&fD(r.ownerDocument.documentElement,r)){if(n!==null&&c0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=Fb(r,i);var s=Fb(r,n);a&&s&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UR=gi&&"documentMode"in document&&11>=document.documentMode,eu=null,_v=null,Yl=null,Ev=!1;function Rb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ev||eu==null||eu!==$d(n)||(n=eu,"selectionStart"in n&&c0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yl&&gc(Yl,n)||(Yl=n,n=Gd(_v,"onSelect"),0<n.length&&(e=new o0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=eu)))}function kf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var tu={animationend:kf("Animation","AnimationEnd"),animationiteration:kf("Animation","AnimationIteration"),animationstart:kf("Animation","AnimationStart"),transitionend:kf("Transition","TransitionEnd")},_p={},mD={};gi&&(mD=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function th(t){if(_p[t])return _p[t];if(!tu[t])return t;var e=tu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in mD)return _p[t]=e[r];return t}var hD=th("animationend"),pD=th("animationiteration"),vD=th("animationstart"),gD=th("transitionend"),yD=new Map,Ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){yD.set(t,e),po(e,[t])}for(var Ep=0;Ep<Ob.length;Ep++){var Sp=Ob[Ep],qR=Sp.toLowerCase(),HR=Sp[0].toUpperCase()+Sp.slice(1);Es(qR,"on"+HR)}Es(hD,"onAnimationEnd");Es(pD,"onAnimationIteration");Es(vD,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(gD,"onTransitionEnd");Su("onMouseEnter",["mouseout","mouseover"]);Su("onMouseLeave",["mouseout","mouseover"]);Su("onPointerEnter",["pointerout","pointerover"]);Su("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vl));function Bb(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,qF(n,e,void 0,t),t.currentTarget=null}function xD(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var u=n[s],l=u.instance,o=u.currentTarget;if(u=u.listener,l!==i&&a.isPropagationStopped())break e;Bb(a,u,o),i=l}else for(s=0;s<n.length;s++){if(u=n[s],l=u.instance,o=u.currentTarget,u=u.listener,l!==i&&a.isPropagationStopped())break e;Bb(a,u,o),i=l}}}if(zd)throw t=xv,zd=!1,xv=null,t}function sr(t,e){var r=e[Tv];r===void 0&&(r=e[Tv]=new Set);var n=t+"__bubble";r.has(n)||(bD(e,t,2,!1),r.add(n))}function Ap(t,e,r){var n=0;e&&(n|=4),bD(r,t,n,e)}var $f="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[$f]){t[$f]=!0,DA.forEach(function(r){r!=="selectionchange"&&(GR.has(r)||Ap(r,!1,t),Ap(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$f]||(e[$f]=!0,Ap("selectionchange",!1,e))}}function bD(t,e,r,n){switch(nD(e)){case 1:var a=sR;break;case 4:a=oR;break;default:a=i0}r=a.bind(null,e,r,t),a=void 0,!yv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Dp(t,e,r,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var u=n.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;s=s.return}for(;u!==null;){if(s=Qs(u),s===null)return;if(l=s.tag,l===5||l===6){n=i=s;continue e}u=u.parentNode}}n=n.return}UA(function(){var o=i,c=t0(r),d=[];e:{var m=yD.get(t);if(m!==void 0){var h=o0,p=t;switch(t){case"keypress":if(_d(r)===0)break e;case"keydown":case"keyup":h=NR;break;case"focusin":p="focus",h=bp;break;case"focusout":p="blur",h=bp;break;case"beforeblur":case"afterblur":h=bp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=cR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=SR;break;case hD:case pD:case vD:h=mR;break;case gD:h=DR;break;case"scroll":h=uR;break;case"wheel":h=TR;break;case"copy":case"cut":case"paste":h=pR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Ab}var v=(e&4)!==0,C=!v&&t==="scroll",N=v?m!==null?m+"Capture":null:m;v=[];for(var A=o,b;A!==null;){b=A;var g=b.stateNode;if(b.tag===5&&g!==null&&(b=g,N!==null&&(g=dc(A,N),g!=null&&v.push(xc(A,g,b)))),C)break;A=A.return}0<v.length&&(m=new h(m,p,null,r,c),d.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",m&&r!==vv&&(p=r.relatedTarget||r.fromElement)&&(Qs(p)||p[yi]))break e;if((h||m)&&(m=c.window===c?c:(m=c.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=o,p=p?Qs(p):null,p!==null&&(C=vo(p),p!==C||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=o),h!==p)){if(v=Eb,g="onMouseLeave",N="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ab,g="onPointerLeave",N="onPointerEnter",A="pointer"),C=h==null?m:ru(h),b=p==null?m:ru(p),m=new v(g,A+"leave",h,r,c),m.target=C,m.relatedTarget=b,g=null,Qs(c)===o&&(v=new v(N,A+"enter",p,r,c),v.target=b,v.relatedTarget=C,g=v),C=g,h&&p)t:{for(v=h,N=p,A=0,b=v;b;b=Lo(b))A++;for(b=0,g=N;g;g=Lo(g))b++;for(;0<A-b;)v=Lo(v),A--;for(;0<b-A;)N=Lo(N),b--;for(;A--;){if(v===N||N!==null&&v===N.alternate)break t;v=Lo(v),N=Lo(N)}v=null}else v=null;h!==null&&jb(d,m,h,v,!1),p!==null&&C!==null&&jb(d,C,p,v,!0)}}e:{if(m=o?ru(o):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var w=BR;else if(Tb(m))if(lD)w=LR;else{w=kR;var x=jR}else(h=m.nodeName)&&h.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(w=$R);if(w&&(w=w(t,o))){uD(d,w,r,c);break e}x&&x(t,m,o),t==="focusout"&&(x=m._wrapperState)&&x.controlled&&m.type==="number"&&fv(m,"number",m.value)}switch(x=o?ru(o):window,t){case"focusin":(Tb(x)||x.contentEditable==="true")&&(eu=x,_v=o,Yl=null);break;case"focusout":Yl=_v=eu=null;break;case"mousedown":Ev=!0;break;case"contextmenu":case"mouseup":case"dragend":Ev=!1,Rb(d,r,c);break;case"selectionchange":if(UR)break;case"keydown":case"keyup":Rb(d,r,c)}var _;if(l0)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Zo?sD(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(iD&&r.locale!=="ko"&&(Zo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Zo&&(_=aD()):(qi=c,s0="value"in qi?qi.value:qi.textContent,Zo=!0)),x=Gd(o,E),0<x.length&&(E=new Sb(E,t,null,r,c),d.push({event:E,listeners:x}),_?E.data=_:(_=oD(r),_!==null&&(E.data=_)))),(_=IR?PR(t,r):FR(t,r))&&(o=Gd(o,"onBeforeInput"),0<o.length&&(c=new Sb("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:o}),c.data=_))}xD(d,e)})}function xc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Gd(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=dc(t,r),i!=null&&n.unshift(xc(t,i,a)),i=dc(t,e),i!=null&&n.push(xc(t,i,a))),t=t.return}return n}function Lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jb(t,e,r,n,a){for(var i=e._reactName,s=[];r!==null&&r!==n;){var u=r,l=u.alternate,o=u.stateNode;if(l!==null&&l===n)break;u.tag===5&&o!==null&&(u=o,a?(l=dc(r,i),l!=null&&s.unshift(xc(r,l,u))):a||(l=dc(r,i),l!=null&&s.push(xc(r,l,u)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var WR=/\r\n?/g,QR=/\u0000|\uFFFD/g;function kb(t){return(typeof t=="string"?t:""+t).replace(WR,`
`).replace(QR,"")}function Lf(t,e,r){if(e=kb(e),kb(t)!==e&&r)throw Error(Re(425))}function Wd(){}var Sv=null,Av=null;function Dv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cv=typeof setTimeout=="function"?setTimeout:void 0,XR=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,KR=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(t){return $b.resolve(null).then(t).catch(JR)}:Cv;function JR(t){setTimeout(function(){throw t})}function Cp(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),pc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);pc(e)}function Zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),qa="__reactFiber$"+Xu,bc="__reactProps$"+Xu,yi="__reactContainer$"+Xu,Tv="__reactEvents$"+Xu,YR="__reactListeners$"+Xu,ZR="__reactHandles$"+Xu;function Qs(t){var e=t[qa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[yi]||r[qa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Lb(t);t!==null;){if(r=t[qa])return r;t=Lb(t)}return e}t=r,r=t.parentNode}return null}function Qc(t){return t=t[qa]||t[yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ru(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function rh(t){return t[bc]||null}var Mv=[],nu=-1;function Ss(t){return{current:t}}function ur(t){0>nu||(t.current=Mv[nu],Mv[nu]=null,nu--)}function ar(t,e){nu++,Mv[nu]=t.current,t.current=e}var ds={},yn=Ss(ds),jn=Ss(!1),ao=ds;function Au(t,e){var r=t.type.contextTypes;if(!r)return ds;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function kn(t){return t=t.childContextTypes,t!=null}function Qd(){ur(jn),ur(yn)}function zb(t,e,r){if(yn.current!==ds)throw Error(Re(168));ar(yn,e),ar(jn,r)}function wD(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(Re(108,jF(t)||"Unknown",a));return pr({},r,n)}function Xd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,ao=yn.current,ar(yn,t),ar(jn,jn.current),!0}function Vb(t,e,r){var n=t.stateNode;if(!n)throw Error(Re(169));r?(t=wD(t,e,ao),n.__reactInternalMemoizedMergedChildContext=t,ur(jn),ur(yn),ar(yn,t)):ur(jn),ar(jn,r)}var li=null,nh=!1,Tp=!1;function ND(t){li===null?li=[t]:li.push(t)}function eO(t){nh=!0,ND(t)}function As(){if(!Tp&&li!==null){Tp=!0;var t=0,e=Jt;try{var r=li;for(Jt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}li=null,nh=!1}catch(a){throw li!==null&&(li=li.slice(t+1)),WA(r0,As),a}finally{Jt=e,Tp=!1}}return null}var au=[],iu=0,Kd=null,Jd=0,sa=[],oa=0,io=null,ci=1,fi="";function Us(t,e){au[iu++]=Jd,au[iu++]=Kd,Kd=t,Jd=e}function _D(t,e,r){sa[oa++]=ci,sa[oa++]=fi,sa[oa++]=io,io=t;var n=ci;t=fi;var a=32-Da(n)-1;n&=~(1<<a),r+=1;var i=32-Da(e)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,ci=1<<32-Da(e)+a|r<<a|n,fi=i+t}else ci=1<<i|r<<a|n,fi=t}function f0(t){t.return!==null&&(Us(t,1),_D(t,1,0))}function d0(t){for(;t===Kd;)Kd=au[--iu],au[iu]=null,Jd=au[--iu],au[iu]=null;for(;t===io;)io=sa[--oa],sa[oa]=null,fi=sa[--oa],sa[oa]=null,ci=sa[--oa],sa[oa]=null}var Xn=null,Qn=null,fr=!1,Ea=null;function ED(t,e){var r=fa(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ub(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Qn=Zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=io!==null?{id:ci,overflow:fi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=fa(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Xn=t,Qn=null,!0):!1;default:return!1}}function Iv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pv(t){if(fr){var e=Qn;if(e){var r=e;if(!Ub(t,e)){if(Iv(t))throw Error(Re(418));e=Zi(r.nextSibling);var n=Xn;e&&Ub(t,e)?ED(n,r):(t.flags=t.flags&-4097|2,fr=!1,Xn=t)}}else{if(Iv(t))throw Error(Re(418));t.flags=t.flags&-4097|2,fr=!1,Xn=t}}}function qb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function zf(t){if(t!==Xn)return!1;if(!fr)return qb(t),fr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dv(t.type,t.memoizedProps)),e&&(e=Qn)){if(Iv(t))throw SD(),Error(Re(418));for(;e;)ED(t,e),e=Zi(e.nextSibling)}if(qb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qn=Zi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Xn?Zi(t.stateNode.nextSibling):null;return!0}function SD(){for(var t=Qn;t;)t=Zi(t.nextSibling)}function Du(){Qn=Xn=null,fr=!1}function m0(t){Ea===null?Ea=[t]:Ea.push(t)}var tO=Ai.ReactCurrentBatchConfig;function Rl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var n=r.stateNode}if(!n)throw Error(Re(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var u=a.refs;s===null?delete u[i]:u[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,t))}return t}function Vf(t,e){throw t=Object.prototype.toString.call(e),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hb(t){var e=t._init;return e(t._payload)}function AD(t){function e(N,A){if(t){var b=N.deletions;b===null?(N.deletions=[A],N.flags|=16):b.push(A)}}function r(N,A){if(!t)return null;for(;A!==null;)e(N,A),A=A.sibling;return null}function n(N,A){for(N=new Map;A!==null;)A.key!==null?N.set(A.key,A):N.set(A.index,A),A=A.sibling;return N}function a(N,A){return N=ns(N,A),N.index=0,N.sibling=null,N}function i(N,A,b){return N.index=b,t?(b=N.alternate,b!==null?(b=b.index,b<A?(N.flags|=2,A):b):(N.flags|=2,A)):(N.flags|=1048576,A)}function s(N){return t&&N.alternate===null&&(N.flags|=2),N}function u(N,A,b,g){return A===null||A.tag!==6?(A=Bp(b,N.mode,g),A.return=N,A):(A=a(A,b),A.return=N,A)}function l(N,A,b,g){var w=b.type;return w===Yo?c(N,A,b.props.children,g,b.key):A!==null&&(A.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ki&&Hb(w)===A.type)?(g=a(A,b.props),g.ref=Rl(N,A,b),g.return=N,g):(g=Md(b.type,b.key,b.props,null,N.mode,g),g.ref=Rl(N,A,b),g.return=N,g)}function o(N,A,b,g){return A===null||A.tag!==4||A.stateNode.containerInfo!==b.containerInfo||A.stateNode.implementation!==b.implementation?(A=jp(b,N.mode,g),A.return=N,A):(A=a(A,b.children||[]),A.return=N,A)}function c(N,A,b,g,w){return A===null||A.tag!==7?(A=to(b,N.mode,g,w),A.return=N,A):(A=a(A,b),A.return=N,A)}function d(N,A,b){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Bp(""+A,N.mode,b),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case If:return b=Md(A.type,A.key,A.props,null,N.mode,b),b.ref=Rl(N,null,A),b.return=N,b;case Jo:return A=jp(A,N.mode,b),A.return=N,A;case ki:var g=A._init;return d(N,g(A._payload),b)}if(Ll(A)||Tl(A))return A=to(A,N.mode,b,null),A.return=N,A;Vf(N,A)}return null}function m(N,A,b,g){var w=A!==null?A.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:u(N,A,""+b,g);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case If:return b.key===w?l(N,A,b,g):null;case Jo:return b.key===w?o(N,A,b,g):null;case ki:return w=b._init,m(N,A,w(b._payload),g)}if(Ll(b)||Tl(b))return w!==null?null:c(N,A,b,g,null);Vf(N,b)}return null}function h(N,A,b,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return N=N.get(b)||null,u(A,N,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case If:return N=N.get(g.key===null?b:g.key)||null,l(A,N,g,w);case Jo:return N=N.get(g.key===null?b:g.key)||null,o(A,N,g,w);case ki:var x=g._init;return h(N,A,b,x(g._payload),w)}if(Ll(g)||Tl(g))return N=N.get(b)||null,c(A,N,g,w,null);Vf(A,g)}return null}function p(N,A,b,g){for(var w=null,x=null,_=A,E=A=0,D=null;_!==null&&E<b.length;E++){_.index>E?(D=_,_=null):D=_.sibling;var T=m(N,_,b[E],g);if(T===null){_===null&&(_=D);break}t&&_&&T.alternate===null&&e(N,_),A=i(T,A,E),x===null?w=T:x.sibling=T,x=T,_=D}if(E===b.length)return r(N,_),fr&&Us(N,E),w;if(_===null){for(;E<b.length;E++)_=d(N,b[E],g),_!==null&&(A=i(_,A,E),x===null?w=_:x.sibling=_,x=_);return fr&&Us(N,E),w}for(_=n(N,_);E<b.length;E++)D=h(_,N,E,b[E],g),D!==null&&(t&&D.alternate!==null&&_.delete(D.key===null?E:D.key),A=i(D,A,E),x===null?w=D:x.sibling=D,x=D);return t&&_.forEach(function(M){return e(N,M)}),fr&&Us(N,E),w}function v(N,A,b,g){var w=Tl(b);if(typeof w!="function")throw Error(Re(150));if(b=w.call(b),b==null)throw Error(Re(151));for(var x=w=null,_=A,E=A=0,D=null,T=b.next();_!==null&&!T.done;E++,T=b.next()){_.index>E?(D=_,_=null):D=_.sibling;var M=m(N,_,T.value,g);if(M===null){_===null&&(_=D);break}t&&_&&M.alternate===null&&e(N,_),A=i(M,A,E),x===null?w=M:x.sibling=M,x=M,_=D}if(T.done)return r(N,_),fr&&Us(N,E),w;if(_===null){for(;!T.done;E++,T=b.next())T=d(N,T.value,g),T!==null&&(A=i(T,A,E),x===null?w=T:x.sibling=T,x=T);return fr&&Us(N,E),w}for(_=n(N,_);!T.done;E++,T=b.next())T=h(_,N,E,T.value,g),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?E:T.key),A=i(T,A,E),x===null?w=T:x.sibling=T,x=T);return t&&_.forEach(function(I){return e(N,I)}),fr&&Us(N,E),w}function C(N,A,b,g){if(typeof b=="object"&&b!==null&&b.type===Yo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case If:e:{for(var w=b.key,x=A;x!==null;){if(x.key===w){if(w=b.type,w===Yo){if(x.tag===7){r(N,x.sibling),A=a(x,b.props.children),A.return=N,N=A;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ki&&Hb(w)===x.type){r(N,x.sibling),A=a(x,b.props),A.ref=Rl(N,x,b),A.return=N,N=A;break e}r(N,x);break}else e(N,x);x=x.sibling}b.type===Yo?(A=to(b.props.children,N.mode,g,b.key),A.return=N,N=A):(g=Md(b.type,b.key,b.props,null,N.mode,g),g.ref=Rl(N,A,b),g.return=N,N=g)}return s(N);case Jo:e:{for(x=b.key;A!==null;){if(A.key===x)if(A.tag===4&&A.stateNode.containerInfo===b.containerInfo&&A.stateNode.implementation===b.implementation){r(N,A.sibling),A=a(A,b.children||[]),A.return=N,N=A;break e}else{r(N,A);break}else e(N,A);A=A.sibling}A=jp(b,N.mode,g),A.return=N,N=A}return s(N);case ki:return x=b._init,C(N,A,x(b._payload),g)}if(Ll(b))return p(N,A,b,g);if(Tl(b))return v(N,A,b,g);Vf(N,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,A!==null&&A.tag===6?(r(N,A.sibling),A=a(A,b),A.return=N,N=A):(r(N,A),A=Bp(b,N.mode,g),A.return=N,N=A),s(N)):r(N,A)}return C}var Cu=AD(!0),DD=AD(!1),Yd=Ss(null),Zd=null,su=null,h0=null;function p0(){h0=su=Zd=null}function v0(t){var e=Yd.current;ur(Yd),t._currentValue=e}function Fv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function vu(t,e){Zd=t,h0=su=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function ha(t){var e=t._currentValue;if(h0!==t)if(t={context:t,memoizedValue:e,next:null},su===null){if(Zd===null)throw Error(Re(308));su=t,Zd.dependencies={lanes:0,firstContext:t}}else su=su.next=t;return e}var Xs=null;function g0(t){Xs===null?Xs=[t]:Xs.push(t)}function CD(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,g0(e)):(r.next=a.next,a.next=r),e.interleaved=r,xi(t,n)}function xi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var $i=!1;function y0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function es(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ut&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,xi(t,r)}return a=n.interleaved,a===null?(e.next=e,g0(n)):(e.next=a.next,a.next=e),n.interleaved=e,xi(t,r)}function Ed(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,n0(t,r)}}function Gb(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function em(t,e,r,n){var a=t.updateQueue;$i=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var l=u,o=l.next;l.next=null,s===null?i=o:s.next=o,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,u=c.lastBaseUpdate,u!==s&&(u===null?c.firstBaseUpdate=o:u.next=o,c.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;s=0,c=o=l=null,u=i;do{var m=u.lane,h=u.eventTime;if((n&m)===m){c!==null&&(c=c.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=t,v=u;switch(m=e,h=r,v.tag){case 1:if(p=v.payload,typeof p=="function"){d=p.call(h,d,m);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,m=typeof p=="function"?p.call(h,d,m):p,m==null)break e;d=pr({},d,m);break e;case 2:$i=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=a.effects,m===null?a.effects=[u]:m.push(u))}else h={eventTime:h,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},c===null?(o=c=h,l=d):c=c.next=h,s|=m;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;m=u,u=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(c===null&&(l=d),a.baseState=l,a.firstBaseUpdate=o,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do s|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);oo|=s,t.lanes=s,t.memoizedState=d}}function Wb(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Re(191,a));a.call(n)}}}var Xc={},Wa=Ss(Xc),wc=Ss(Xc),Nc=Ss(Xc);function Ks(t){if(t===Xc)throw Error(Re(174));return t}function x0(t,e){switch(ar(Nc,e),ar(wc,t),ar(Wa,Xc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mv(e,t)}ur(Wa),ar(Wa,e)}function Tu(){ur(Wa),ur(wc),ur(Nc)}function MD(t){Ks(Nc.current);var e=Ks(Wa.current),r=mv(e,t.type);e!==r&&(ar(wc,t),ar(Wa,r))}function b0(t){wc.current===t&&(ur(Wa),ur(wc))}var mr=Ss(0);function tm(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mp=[];function w0(){for(var t=0;t<Mp.length;t++)Mp[t]._workInProgressVersionPrimary=null;Mp.length=0}var Sd=Ai.ReactCurrentDispatcher,Ip=Ai.ReactCurrentBatchConfig,so=0,hr=null,Rr=null,Wr=null,rm=!1,Zl=!1,_c=0,rO=0;function cn(){throw Error(Re(321))}function N0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ma(t[r],e[r]))return!1;return!0}function _0(t,e,r,n,a,i){if(so=i,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sd.current=t===null||t.memoizedState===null?sO:oO,t=r(n,a),Zl){i=0;do{if(Zl=!1,_c=0,25<=i)throw Error(Re(301));i+=1,Wr=Rr=null,e.updateQueue=null,Sd.current=uO,t=r(n,a)}while(Zl)}if(Sd.current=nm,e=Rr!==null&&Rr.next!==null,so=0,Wr=Rr=hr=null,rm=!1,e)throw Error(Re(300));return t}function E0(){var t=_c!==0;return _c=0,t}function Va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?hr.memoizedState=Wr=t:Wr=Wr.next=t,Wr}function pa(){if(Rr===null){var t=hr.alternate;t=t!==null?t.memoizedState:null}else t=Rr.next;var e=Wr===null?hr.memoizedState:Wr.next;if(e!==null)Wr=e,Rr=t;else{if(t===null)throw Error(Re(310));Rr=t,t={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},Wr===null?hr.memoizedState=Wr=t:Wr=Wr.next=t}return Wr}function Ec(t,e){return typeof e=="function"?e(t):e}function Pp(t){var e=pa(),r=e.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var n=Rr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var u=s=null,l=null,o=i;do{var c=o.lane;if((so&c)===c)l!==null&&(l=l.next={lane:0,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null}),n=o.hasEagerState?o.eagerState:t(n,o.action);else{var d={lane:c,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null};l===null?(u=l=d,s=n):l=l.next=d,hr.lanes|=c,oo|=c}o=o.next}while(o!==null&&o!==i);l===null?s=n:l.next=u,Ma(n,e.memoizedState)||(Bn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,hr.lanes|=i,oo|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Fp(t){var e=pa(),r=e.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=t(i,s.action),s=s.next;while(s!==a);Ma(i,e.memoizedState)||(Bn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function ID(){}function PD(t,e){var r=hr,n=pa(),a=e(),i=!Ma(n.memoizedState,a);if(i&&(n.memoizedState=a,Bn=!0),n=n.queue,S0(OD.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Wr!==null&&Wr.memoizedState.tag&1){if(r.flags|=2048,Sc(9,RD.bind(null,r,n,a,e),void 0,null),Kr===null)throw Error(Re(349));so&30||FD(r,e,a)}return a}function FD(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function RD(t,e,r,n){e.value=r,e.getSnapshot=n,BD(e)&&jD(t)}function OD(t,e,r){return r(function(){BD(e)&&jD(t)})}function BD(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ma(t,r)}catch{return!0}}function jD(t){var e=xi(t,1);e!==null&&Ca(e,t,1,-1)}function Qb(t){var e=Va();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:t},e.queue=t,t=t.dispatch=iO.bind(null,hr,t),[e.memoizedState,t]}function Sc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function kD(){return pa().memoizedState}function Ad(t,e,r,n){var a=Va();hr.flags|=t,a.memoizedState=Sc(1|e,r,void 0,n===void 0?null:n)}function ah(t,e,r,n){var a=pa();n=n===void 0?null:n;var i=void 0;if(Rr!==null){var s=Rr.memoizedState;if(i=s.destroy,n!==null&&N0(n,s.deps)){a.memoizedState=Sc(e,r,i,n);return}}hr.flags|=t,a.memoizedState=Sc(1|e,r,i,n)}function Xb(t,e){return Ad(8390656,8,t,e)}function S0(t,e){return ah(2048,8,t,e)}function $D(t,e){return ah(4,2,t,e)}function LD(t,e){return ah(4,4,t,e)}function zD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VD(t,e,r){return r=r!=null?r.concat([t]):null,ah(4,4,zD.bind(null,e,t),r)}function A0(){}function UD(t,e){var r=pa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&N0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function qD(t,e){var r=pa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&N0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function HD(t,e,r){return so&21?(Ma(r,e)||(r=KA(),hr.lanes|=r,oo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=r)}function nO(t,e){var r=Jt;Jt=r!==0&&4>r?r:4,t(!0);var n=Ip.transition;Ip.transition={};try{t(!1),e()}finally{Jt=r,Ip.transition=n}}function GD(){return pa().memoizedState}function aO(t,e,r){var n=rs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},WD(t))QD(e,r);else if(r=CD(t,e,r,n),r!==null){var a=En();Ca(r,t,n,a),XD(r,e,n)}}function iO(t,e,r){var n=rs(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(WD(t))QD(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,u=i(s,r);if(a.hasEagerState=!0,a.eagerState=u,Ma(u,s)){var l=e.interleaved;l===null?(a.next=a,g0(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}r=CD(t,e,a,n),r!==null&&(a=En(),Ca(r,t,n,a),XD(r,e,n))}}function WD(t){var e=t.alternate;return t===hr||e!==null&&e===hr}function QD(t,e){Zl=rm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function XD(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,n0(t,r)}}var nm={readContext:ha,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},sO={readContext:ha,useCallback:function(t,e){return Va().memoizedState=[t,e===void 0?null:e],t},useContext:ha,useEffect:Xb,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ad(4194308,4,zD.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ad(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ad(4,2,t,e)},useMemo:function(t,e){var r=Va();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Va();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=aO.bind(null,hr,t),[n.memoizedState,t]},useRef:function(t){var e=Va();return t={current:t},e.memoizedState=t},useState:Qb,useDebugValue:A0,useDeferredValue:function(t){return Va().memoizedState=t},useTransition:function(){var t=Qb(!1),e=t[0];return t=nO.bind(null,t[1]),Va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=hr,a=Va();if(fr){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=e(),Kr===null)throw Error(Re(349));so&30||FD(n,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,Xb(OD.bind(null,n,i,t),[t]),n.flags|=2048,Sc(9,RD.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Va(),e=Kr.identifierPrefix;if(fr){var r=fi,n=ci;r=(n&~(1<<32-Da(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=_c++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=rO++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oO={readContext:ha,useCallback:UD,useContext:ha,useEffect:S0,useImperativeHandle:VD,useInsertionEffect:$D,useLayoutEffect:LD,useMemo:qD,useReducer:Pp,useRef:kD,useState:function(){return Pp(Ec)},useDebugValue:A0,useDeferredValue:function(t){var e=pa();return HD(e,Rr.memoizedState,t)},useTransition:function(){var t=Pp(Ec)[0],e=pa().memoizedState;return[t,e]},useMutableSource:ID,useSyncExternalStore:PD,useId:GD,unstable_isNewReconciler:!1},uO={readContext:ha,useCallback:UD,useContext:ha,useEffect:S0,useImperativeHandle:VD,useInsertionEffect:$D,useLayoutEffect:LD,useMemo:qD,useReducer:Fp,useRef:kD,useState:function(){return Fp(Ec)},useDebugValue:A0,useDeferredValue:function(t){var e=pa();return Rr===null?e.memoizedState=t:HD(e,Rr.memoizedState,t)},useTransition:function(){var t=Fp(Ec)[0],e=pa().memoizedState;return[t,e]},useMutableSource:ID,useSyncExternalStore:PD,useId:GD,unstable_isNewReconciler:!1};function Na(t,e){if(t&&t.defaultProps){e=pr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Rv(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ih={isMounted:function(t){return(t=t._reactInternals)?vo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=En(),a=rs(t),i=hi(n,a);i.payload=e,r!=null&&(i.callback=r),e=es(t,i,a),e!==null&&(Ca(e,t,a,n),Ed(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=En(),a=rs(t),i=hi(n,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=es(t,i,a),e!==null&&(Ca(e,t,a,n),Ed(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=En(),n=rs(t),a=hi(r,n);a.tag=2,e!=null&&(a.callback=e),e=es(t,a,n),e!==null&&(Ca(e,t,n,r),Ed(e,t,n))}};function Kb(t,e,r,n,a,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!gc(r,n)||!gc(a,i):!0}function KD(t,e,r){var n=!1,a=ds,i=e.contextType;return typeof i=="object"&&i!==null?i=ha(i):(a=kn(e)?ao:yn.current,n=e.contextTypes,i=(n=n!=null)?Au(t,a):ds),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ih,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Jb(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ih.enqueueReplaceState(e,e.state,null)}function Ov(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},y0(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=ha(i):(i=kn(e)?ao:yn.current,a.context=Au(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rv(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ih.enqueueReplaceState(a,a.state,null),em(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Mu(t,e){try{var r="",n=e;do r+=BF(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function Rp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Bv(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var lO=typeof WeakMap=="function"?WeakMap:Map;function JD(t,e,r){r=hi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){im||(im=!0,Gv=n),Bv(t,e)},r}function YD(t,e,r){r=hi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){Bv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Bv(t,e),typeof n!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function Yb(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new lO;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=_O.bind(null,t,e,r),e.then(t,t))}function Zb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ew(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=hi(-1,1),e.tag=2,es(r,e,1))),r.lanes|=1),t)}var cO=Ai.ReactCurrentOwner,Bn=!1;function _n(t,e,r,n){e.child=t===null?DD(e,null,r,n):Cu(e,t.child,r,n)}function tw(t,e,r,n,a){r=r.render;var i=e.ref;return vu(e,a),n=_0(t,e,r,n,i,a),r=E0(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,bi(t,e,a)):(fr&&r&&f0(e),e.flags|=1,_n(t,e,n,a),e.child)}function rw(t,e,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!R0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,ZD(t,e,i,n,a)):(t=Md(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:gc,r(s,n)&&t.ref===e.ref)return bi(t,e,a)}return e.flags|=1,t=ns(i,n),t.ref=e.ref,t.return=e,e.child=t}function ZD(t,e,r,n,a){if(t!==null){var i=t.memoizedProps;if(gc(i,n)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,bi(t,e,a)}return jv(t,e,r,n,a)}function eC(t,e,r){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ar(uu,Gn),Gn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ar(uu,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ar(uu,Gn),Gn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ar(uu,Gn),Gn|=n;return _n(t,e,a,r),e.child}function tC(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function jv(t,e,r,n,a){var i=kn(r)?ao:yn.current;return i=Au(e,i),vu(e,a),r=_0(t,e,r,n,i,a),n=E0(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,bi(t,e,a)):(fr&&n&&f0(e),e.flags|=1,_n(t,e,r,a),e.child)}function nw(t,e,r,n,a){if(kn(r)){var i=!0;Xd(e)}else i=!1;if(vu(e,a),e.stateNode===null)Dd(t,e),KD(e,r,n),Ov(e,r,n,a),n=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var l=s.context,o=r.contextType;typeof o=="object"&&o!==null?o=ha(o):(o=kn(r)?ao:yn.current,o=Au(e,o));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==n||l!==o)&&Jb(e,s,n,o),$i=!1;var m=e.memoizedState;s.state=m,em(e,n,s,a),l=e.memoizedState,u!==n||m!==l||jn.current||$i?(typeof c=="function"&&(Rv(e,r,c,n),l=e.memoizedState),(u=$i||Kb(e,r,u,n,m,l,o))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=o,n=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,TD(t,e),u=e.memoizedProps,o=e.type===e.elementType?u:Na(e.type,u),s.props=o,d=e.pendingProps,m=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=ha(l):(l=kn(r)?ao:yn.current,l=Au(e,l));var h=r.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==d||m!==l)&&Jb(e,s,n,l),$i=!1,m=e.memoizedState,s.state=m,em(e,n,s,a);var p=e.memoizedState;u!==d||m!==p||jn.current||$i?(typeof h=="function"&&(Rv(e,r,h,n),p=e.memoizedState),(o=$i||Kb(e,r,o,n,m,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=l,n=o):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return kv(t,e,r,n,i,a)}function kv(t,e,r,n,a,i){tC(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return a&&Vb(e,r,!1),bi(t,e,i);n=e.stateNode,cO.current=e;var u=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Cu(e,t.child,null,i),e.child=Cu(e,null,u,i)):_n(t,e,u,i),e.memoizedState=n.state,a&&Vb(e,r,!0),e.child}function rC(t){var e=t.stateNode;e.pendingContext?zb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zb(t,e.context,!1),x0(t,e.containerInfo)}function aw(t,e,r,n,a){return Du(),m0(a),e.flags|=256,_n(t,e,r,n),e.child}var $v={dehydrated:null,treeContext:null,retryLane:0};function Lv(t){return{baseLanes:t,cachePool:null,transitions:null}}function nC(t,e,r){var n=e.pendingProps,a=mr.current,i=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(a&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ar(mr,a&1),t===null)return Pv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,i?(n=e.mode,i=e.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=uh(s,n,0,null),t=to(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Lv(r),e.memoizedState=$v,t):D0(e,s));if(a=t.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return fO(t,e,s,n,u,a,r);if(i){i=n.fallback,s=e.mode,a=t.child,u=a.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=ns(a,l),n.subtreeFlags=a.subtreeFlags&14680064),u!==null?i=ns(u,i):(i=to(i,s,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,s=t.child.memoizedState,s=s===null?Lv(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~r,e.memoizedState=$v,n}return i=t.child,t=i.sibling,n=ns(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function D0(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uf(t,e,r,n){return n!==null&&m0(n),Cu(e,t.child,null,r),t=D0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fO(t,e,r,n,a,i,s){if(r)return e.flags&256?(e.flags&=-257,n=Rp(Error(Re(422))),Uf(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=uh({mode:"visible",children:n.children},a,0,null),i=to(i,a,s,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Cu(e,t.child,null,s),e.child.memoizedState=Lv(s),e.memoizedState=$v,i);if(!(e.mode&1))return Uf(t,e,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var u=n.dgst;return n=u,i=Error(Re(419)),n=Rp(i,n,void 0),Uf(t,e,s,n)}if(u=(s&t.childLanes)!==0,Bn||u){if(n=Kr,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,xi(t,a),Ca(n,t,a,-1))}return F0(),n=Rp(Error(Re(421))),Uf(t,e,s,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=EO.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Qn=Zi(a.nextSibling),Xn=e,fr=!0,Ea=null,t!==null&&(sa[oa++]=ci,sa[oa++]=fi,sa[oa++]=io,ci=t.id,fi=t.overflow,io=e),e=D0(e,n.children),e.flags|=4096,e)}function iw(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Fv(t.return,e,r)}function Op(t,e,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function aC(t,e,r){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(_n(t,e,n.children,r),n=mr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iw(t,r,e);else if(t.tag===19)iw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ar(mr,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&tm(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Op(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&tm(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Op(e,!0,r,null,i);break;case"together":Op(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Re(153));if(e.child!==null){for(t=e.child,r=ns(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ns(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function dO(t,e,r){switch(e.tag){case 3:rC(e),Du();break;case 5:MD(e);break;case 1:kn(e.type)&&Xd(e);break;case 4:x0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;ar(Yd,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ar(mr,mr.current&1),e.flags|=128,null):r&e.child.childLanes?nC(t,e,r):(ar(mr,mr.current&1),t=bi(t,e,r),t!==null?t.sibling:null);ar(mr,mr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return aC(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ar(mr,mr.current),n)break;return null;case 22:case 23:return e.lanes=0,eC(t,e,r)}return bi(t,e,r)}var iC,zv,sC,oC;iC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};zv=function(){};sC=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Ks(Wa.current);var i=null;switch(r){case"input":a=lv(t,a),n=lv(t,n),i=[];break;case"select":a=pr({},a,{value:void 0}),n=pr({},n,{value:void 0}),i=[];break;case"textarea":a=dv(t,a),n=dv(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Wd)}hv(r,n);var s;r=null;for(o in a)if(!n.hasOwnProperty(o)&&a.hasOwnProperty(o)&&a[o]!=null)if(o==="style"){var u=a[o];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cc.hasOwnProperty(o)?i||(i=[]):(i=i||[]).push(o,null));for(o in n){var l=n[o];if(u=a!=null?a[o]:void 0,n.hasOwnProperty(o)&&l!==u&&(l!=null||u!=null))if(o==="style")if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(i||(i=[]),i.push(o,r)),r=l;else o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(i=i||[]).push(o,l)):o==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(o,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(cc.hasOwnProperty(o)?(l!=null&&o==="onScroll"&&sr("scroll",t),i||u===l||(i=[])):(i=i||[]).push(o,l))}r&&(i=i||[]).push("style",r);var o=i;(e.updateQueue=o)&&(e.flags|=4)}};oC=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ol(t,e){if(!fr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function mO(t,e,r){var n=e.pendingProps;switch(d0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return kn(e.type)&&Qd(),fn(e),null;case 3:return n=e.stateNode,Tu(),ur(jn),ur(yn),w0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(zf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ea!==null&&(Xv(Ea),Ea=null))),zv(t,e),fn(e),null;case 5:b0(e);var a=Ks(Nc.current);if(r=e.type,t!==null&&e.stateNode!=null)sC(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Re(166));return fn(e),null}if(t=Ks(Wa.current),zf(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[qa]=e,n[bc]=i,t=(e.mode&1)!==0,r){case"dialog":sr("cancel",n),sr("close",n);break;case"iframe":case"object":case"embed":sr("load",n);break;case"video":case"audio":for(a=0;a<Vl.length;a++)sr(Vl[a],n);break;case"source":sr("error",n);break;case"img":case"image":case"link":sr("error",n),sr("load",n);break;case"details":sr("toggle",n);break;case"input":hb(n,i),sr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},sr("invalid",n);break;case"textarea":vb(n,i),sr("invalid",n)}hv(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?n.textContent!==u&&(i.suppressHydrationWarning!==!0&&Lf(n.textContent,u,t),a=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Lf(n.textContent,u,t),a=["children",""+u]):cc.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&sr("scroll",n)}switch(r){case"input":Pf(n),pb(n,i,!0);break;case"textarea":Pf(n),gb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Wd)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=OA(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[qa]=e,t[bc]=n,iC(t,e,!1,!1),e.stateNode=t;e:{switch(s=pv(r,n),r){case"dialog":sr("cancel",t),sr("close",t),a=n;break;case"iframe":case"object":case"embed":sr("load",t),a=n;break;case"video":case"audio":for(a=0;a<Vl.length;a++)sr(Vl[a],t);a=n;break;case"source":sr("error",t),a=n;break;case"img":case"image":case"link":sr("error",t),sr("load",t),a=n;break;case"details":sr("toggle",t),a=n;break;case"input":hb(t,n),a=lv(t,n),sr("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=pr({},n,{value:void 0}),sr("invalid",t);break;case"textarea":vb(t,n),a=dv(t,n),sr("invalid",t);break;default:a=n}hv(r,a),u=a;for(i in u)if(u.hasOwnProperty(i)){var l=u[i];i==="style"?kA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BA(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&fc(t,l):typeof l=="number"&&fc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&sr("scroll",t):l!=null&&Jg(t,i,l,s))}switch(r){case"input":Pf(t),pb(t,n,!1);break;case"textarea":Pf(t),gb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?du(t,!!n.multiple,i,!1):n.defaultValue!=null&&du(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Wd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)oC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Re(166));if(r=Ks(Nc.current),Ks(Wa.current),zf(e)){if(n=e.stateNode,r=e.memoizedProps,n[qa]=e,(i=n.nodeValue!==r)&&(t=Xn,t!==null))switch(t.tag){case 3:Lf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lf(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[qa]=e,e.stateNode=n}return fn(e),null;case 13:if(ur(mr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fr&&Qn!==null&&e.mode&1&&!(e.flags&128))SD(),Du(),e.flags|=98560,i=!1;else if(i=zf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Re(317));i[qa]=e}else Du(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),i=!1}else Ea!==null&&(Xv(Ea),Ea=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||mr.current&1?Br===0&&(Br=3):F0())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return Tu(),zv(t,e),t===null&&yc(e.stateNode.containerInfo),fn(e),null;case 10:return v0(e.type._context),fn(e),null;case 17:return kn(e.type)&&Qd(),fn(e),null;case 19:if(ur(mr),i=e.memoizedState,i===null)return fn(e),null;if(n=(e.flags&128)!==0,s=i.rendering,s===null)if(n)Ol(i,!1);else{if(Br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=tm(t),s!==null){for(e.flags|=128,Ol(i,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ar(mr,mr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Er()>Iu&&(e.flags|=128,n=!0,Ol(i,!1),e.lanes=4194304)}else{if(!n)if(t=tm(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ol(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!fr)return fn(e),null}else 2*Er()-i.renderingStartTime>Iu&&r!==1073741824&&(e.flags|=128,n=!0,Ol(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(r=i.last,r!==null?r.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Er(),e.sibling=null,r=mr.current,ar(mr,n?r&1|2:r&1),e):(fn(e),null);case 22:case 23:return P0(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Gn&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function hO(t,e){switch(d0(e),e.tag){case 1:return kn(e.type)&&Qd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tu(),ur(jn),ur(yn),w0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return b0(e),null;case 13:if(ur(mr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));Du()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ur(mr),null;case 4:return Tu(),null;case 10:return v0(e.type._context),null;case 22:case 23:return P0(),null;case 24:return null;default:return null}}var qf=!1,pn=!1,pO=typeof WeakSet=="function"?WeakSet:Set,He=null;function ou(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yr(t,e,n)}else r.current=null}function Vv(t,e,r){try{r()}catch(n){yr(t,e,n)}}var sw=!1;function vO(t,e){if(Sv=qd,t=dD(),c0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,u=-1,l=-1,o=0,c=0,d=t,m=null;t:for(;;){for(var h;d!==r||a!==0&&d.nodeType!==3||(u=s+a),d!==i||n!==0&&d.nodeType!==3||(l=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)m=d,d=h;for(;;){if(d===t)break t;if(m===r&&++o===a&&(u=s),m===i&&++c===n&&(l=s),(h=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=h}r=u===-1||l===-1?null:{start:u,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Av={focusedElem:t,selectionRange:r},qd=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,C=p.memoizedState,N=e.stateNode,A=N.getSnapshotBeforeUpdate(e.elementType===e.type?v:Na(e.type,v),C);N.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(g){yr(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return p=sw,sw=!1,p}function ec(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Vv(e,r,i)}a=a.next}while(a!==n)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Uv(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function uC(t){var e=t.alternate;e!==null&&(t.alternate=null,uC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qa],delete e[bc],delete e[Tv],delete e[YR],delete e[ZR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lC(t){return t.tag===5||t.tag===3||t.tag===4}function ow(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Wd));else if(n!==4&&(t=t.child,t!==null))for(qv(t,e,r),t=t.sibling;t!==null;)qv(t,e,r),t=t.sibling}function Hv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Hv(t,e,r),t=t.sibling;t!==null;)Hv(t,e,r),t=t.sibling}var Yr=null,_a=!1;function Bi(t,e,r){for(r=r.child;r!==null;)cC(t,e,r),r=r.sibling}function cC(t,e,r){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(Ym,r)}catch{}switch(r.tag){case 5:pn||ou(r,e);case 6:var n=Yr,a=_a;Yr=null,Bi(t,e,r),Yr=n,_a=a,Yr!==null&&(_a?(t=Yr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Yr.removeChild(r.stateNode));break;case 18:Yr!==null&&(_a?(t=Yr,r=r.stateNode,t.nodeType===8?Cp(t.parentNode,r):t.nodeType===1&&Cp(t,r),pc(t)):Cp(Yr,r.stateNode));break;case 4:n=Yr,a=_a,Yr=r.stateNode.containerInfo,_a=!0,Bi(t,e,r),Yr=n,_a=a;break;case 0:case 11:case 14:case 15:if(!pn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Vv(r,e,s),a=a.next}while(a!==n)}Bi(t,e,r);break;case 1:if(!pn&&(ou(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){yr(r,e,u)}Bi(t,e,r);break;case 21:Bi(t,e,r);break;case 22:r.mode&1?(pn=(n=pn)||r.memoizedState!==null,Bi(t,e,r),pn=n):Bi(t,e,r);break;default:Bi(t,e,r)}}function uw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new pO),e.forEach(function(n){var a=SO.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ba(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:Yr=u.stateNode,_a=!1;break e;case 3:Yr=u.stateNode.containerInfo,_a=!0;break e;case 4:Yr=u.stateNode.containerInfo,_a=!0;break e}u=u.return}if(Yr===null)throw Error(Re(160));cC(i,s,a),Yr=null,_a=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(o){yr(a,e,o)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fC(e,t),e=e.sibling}function fC(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ba(e,t),za(t),n&4){try{ec(3,t,t.return),sh(3,t)}catch(v){yr(t,t.return,v)}try{ec(5,t,t.return)}catch(v){yr(t,t.return,v)}}break;case 1:ba(e,t),za(t),n&512&&r!==null&&ou(r,r.return);break;case 5:if(ba(e,t),za(t),n&512&&r!==null&&ou(r,r.return),t.flags&32){var a=t.stateNode;try{fc(a,"")}catch(v){yr(t,t.return,v)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,s=r!==null?r.memoizedProps:i,u=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&FA(a,i),pv(u,s);var o=pv(u,i);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?kA(a,d):c==="dangerouslySetInnerHTML"?BA(a,d):c==="children"?fc(a,d):Jg(a,c,d,o)}switch(u){case"input":cv(a,i);break;case"textarea":RA(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?du(a,!!i.multiple,h,!1):m!==!!i.multiple&&(i.defaultValue!=null?du(a,!!i.multiple,i.defaultValue,!0):du(a,!!i.multiple,i.multiple?[]:"",!1))}a[bc]=i}catch(v){yr(t,t.return,v)}}break;case 6:if(ba(e,t),za(t),n&4){if(t.stateNode===null)throw Error(Re(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(v){yr(t,t.return,v)}}break;case 3:if(ba(e,t),za(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pc(e.containerInfo)}catch(v){yr(t,t.return,v)}break;case 4:ba(e,t),za(t);break;case 13:ba(e,t),za(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(M0=Er())),n&4&&uw(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(pn=(o=pn)||c,ba(e,t),pn=o):ba(e,t),za(t),n&8192){if(o=t.memoizedState!==null,(t.stateNode.isHidden=o)&&!c&&t.mode&1)for(He=t,c=t.child;c!==null;){for(d=He=c;He!==null;){switch(m=He,h=m.child,m.tag){case 0:case 11:case 14:case 15:ec(4,m,m.return);break;case 1:ou(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){yr(n,r,v)}}break;case 5:ou(m,m.return);break;case 22:if(m.memoizedState!==null){cw(d);continue}}h!==null?(h.return=m,He=h):cw(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{a=d.stateNode,o?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=jA("display",s))}catch(v){yr(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=o?"":d.memoizedProps}catch(v){yr(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ba(e,t),za(t),n&4&&uw(t);break;case 21:break;default:ba(e,t),za(t)}}function za(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(lC(r)){var n=r;break e}r=r.return}throw Error(Re(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(fc(a,""),n.flags&=-33);var i=ow(t);Hv(t,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,u=ow(t);qv(t,u,s);break;default:throw Error(Re(161))}}catch(l){yr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gO(t,e,r){He=t,dC(t)}function dC(t,e,r){for(var n=(t.mode&1)!==0;He!==null;){var a=He,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||qf;if(!s){var u=a.alternate,l=u!==null&&u.memoizedState!==null||pn;u=qf;var o=pn;if(qf=s,(pn=l)&&!o)for(He=a;He!==null;)s=He,l=s.child,s.tag===22&&s.memoizedState!==null?fw(a):l!==null?(l.return=s,He=l):fw(a);for(;i!==null;)He=i,dC(i),i=i.sibling;He=a,qf=u,pn=o}lw(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,He=i):lw(t)}}function lw(t){for(;He!==null;){var e=He;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||sh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!pn)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Na(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wb(e,i,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Wb(e,s,r)}break;case 5:var u=e.stateNode;if(r===null&&e.flags&4){r=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var o=e.alternate;if(o!==null){var c=o.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&pc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}pn||e.flags&512&&Uv(e)}catch(m){yr(e,e.return,m)}}if(e===t){He=null;break}if(r=e.sibling,r!==null){r.return=e.return,He=r;break}He=e.return}}function cw(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var r=e.sibling;if(r!==null){r.return=e.return,He=r;break}He=e.return}}function fw(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{sh(4,e)}catch(l){yr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(l){yr(e,a,l)}}var i=e.return;try{Uv(e)}catch(l){yr(e,i,l)}break;case 5:var s=e.return;try{Uv(e)}catch(l){yr(e,s,l)}}}catch(l){yr(e,e.return,l)}if(e===t){He=null;break}var u=e.sibling;if(u!==null){u.return=e.return,He=u;break}He=e.return}}var yO=Math.ceil,am=Ai.ReactCurrentDispatcher,C0=Ai.ReactCurrentOwner,da=Ai.ReactCurrentBatchConfig,Ut=0,Kr=null,Dr=null,nn=0,Gn=0,uu=Ss(0),Br=0,Ac=null,oo=0,oh=0,T0=0,tc=null,On=null,M0=0,Iu=1/0,ui=null,im=!1,Gv=null,ts=null,Hf=!1,Hi=null,sm=0,rc=0,Wv=null,Cd=-1,Td=0;function En(){return Ut&6?Er():Cd!==-1?Cd:Cd=Er()}function rs(t){return t.mode&1?Ut&2&&nn!==0?nn&-nn:tO.transition!==null?(Td===0&&(Td=KA()),Td):(t=Jt,t!==0||(t=window.event,t=t===void 0?16:nD(t.type)),t):1}function Ca(t,e,r,n){if(50<rc)throw rc=0,Wv=null,Error(Re(185));Gc(t,r,n),(!(Ut&2)||t!==Kr)&&(t===Kr&&(!(Ut&2)&&(oh|=r),Br===4&&Ui(t,nn)),$n(t,n),r===1&&Ut===0&&!(e.mode&1)&&(Iu=Er()+500,nh&&As()))}function $n(t,e){var r=t.callbackNode;tR(t,e);var n=Ud(t,t===Kr?nn:0);if(n===0)r!==null&&bb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&bb(r),e===1)t.tag===0?eO(dw.bind(null,t)):ND(dw.bind(null,t)),KR(function(){!(Ut&6)&&As()}),r=null;else{switch(JA(n)){case 1:r=r0;break;case 4:r=QA;break;case 16:r=Vd;break;case 536870912:r=XA;break;default:r=Vd}r=bC(r,mC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function mC(t,e){if(Cd=-1,Td=0,Ut&6)throw Error(Re(327));var r=t.callbackNode;if(gu()&&t.callbackNode!==r)return null;var n=Ud(t,t===Kr?nn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=om(t,n);else{e=n;var a=Ut;Ut|=2;var i=pC();(Kr!==t||nn!==e)&&(ui=null,Iu=Er()+500,eo(t,e));do try{wO();break}catch(u){hC(t,u)}while(!0);p0(),am.current=i,Ut=a,Dr!==null?e=0:(Kr=null,nn=0,e=Br)}if(e!==0){if(e===2&&(a=bv(t),a!==0&&(n=a,e=Qv(t,a))),e===1)throw r=Ac,eo(t,0),Ui(t,n),$n(t,Er()),r;if(e===6)Ui(t,n);else{if(a=t.current.alternate,!(n&30)&&!xO(a)&&(e=om(t,n),e===2&&(i=bv(t),i!==0&&(n=i,e=Qv(t,i))),e===1))throw r=Ac,eo(t,0),Ui(t,n),$n(t,Er()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(Re(345));case 2:qs(t,On,ui);break;case 3:if(Ui(t,n),(n&130023424)===n&&(e=M0+500-Er(),10<e)){if(Ud(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){En(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Cv(qs.bind(null,t,On,ui),e);break}qs(t,On,ui);break;case 4:if(Ui(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var s=31-Da(n);i=1<<s,s=e[s],s>a&&(a=s),n&=~i}if(n=a,n=Er()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*yO(n/1960))-n,10<n){t.timeoutHandle=Cv(qs.bind(null,t,On,ui),n);break}qs(t,On,ui);break;case 5:qs(t,On,ui);break;default:throw Error(Re(329))}}}return $n(t,Er()),t.callbackNode===r?mC.bind(null,t):null}function Qv(t,e){var r=tc;return t.current.memoizedState.isDehydrated&&(eo(t,e).flags|=256),t=om(t,e),t!==2&&(e=On,On=r,e!==null&&Xv(e)),t}function Xv(t){On===null?On=t:On.push.apply(On,t)}function xO(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ma(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e){for(e&=~T0,e&=~oh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Da(e),n=1<<r;t[r]=-1,e&=~n}}function dw(t){if(Ut&6)throw Error(Re(327));gu();var e=Ud(t,0);if(!(e&1))return $n(t,Er()),null;var r=om(t,e);if(t.tag!==0&&r===2){var n=bv(t);n!==0&&(e=n,r=Qv(t,n))}if(r===1)throw r=Ac,eo(t,0),Ui(t,e),$n(t,Er()),r;if(r===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qs(t,On,ui),$n(t,Er()),null}function I0(t,e){var r=Ut;Ut|=1;try{return t(e)}finally{Ut=r,Ut===0&&(Iu=Er()+500,nh&&As())}}function uo(t){Hi!==null&&Hi.tag===0&&!(Ut&6)&&gu();var e=Ut;Ut|=1;var r=da.transition,n=Jt;try{if(da.transition=null,Jt=1,t)return t()}finally{Jt=n,da.transition=r,Ut=e,!(Ut&6)&&As()}}function P0(){Gn=uu.current,ur(uu)}function eo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,XR(r)),Dr!==null)for(r=Dr.return;r!==null;){var n=r;switch(d0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Qd();break;case 3:Tu(),ur(jn),ur(yn),w0();break;case 5:b0(n);break;case 4:Tu();break;case 13:ur(mr);break;case 19:ur(mr);break;case 10:v0(n.type._context);break;case 22:case 23:P0()}r=r.return}if(Kr=t,Dr=t=ns(t.current,null),nn=Gn=e,Br=0,Ac=null,T0=oh=oo=0,On=tc=null,Xs!==null){for(e=0;e<Xs.length;e++)if(r=Xs[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}Xs=null}return t}function hC(t,e){do{var r=Dr;try{if(p0(),Sd.current=nm,rm){for(var n=hr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}rm=!1}if(so=0,Wr=Rr=hr=null,Zl=!1,_c=0,C0.current=null,r===null||r.return===null){Br=1,Ac=e,Dr=null;break}e:{var i=t,s=r.return,u=r,l=e;if(e=nn,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var o=l,c=u,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var m=c.alternate;m?(c.updateQueue=m.updateQueue,c.memoizedState=m.memoizedState,c.lanes=m.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Zb(s);if(h!==null){h.flags&=-257,ew(h,s,u,i,e),h.mode&1&&Yb(i,o,e),e=h,l=o;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){Yb(i,o,e),F0();break e}l=Error(Re(426))}}else if(fr&&u.mode&1){var C=Zb(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),ew(C,s,u,i,e),m0(Mu(l,u));break e}}i=l=Mu(l,u),Br!==4&&(Br=2),tc===null?tc=[i]:tc.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=JD(i,l,e);Gb(i,N);break e;case 1:u=l;var A=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof A.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ts===null||!ts.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var g=YD(i,u,e);Gb(i,g);break e}}i=i.return}while(i!==null)}gC(r)}catch(w){e=w,Dr===r&&r!==null&&(Dr=r=r.return);continue}break}while(!0)}function pC(){var t=am.current;return am.current=nm,t===null?nm:t}function F0(){(Br===0||Br===3||Br===2)&&(Br=4),Kr===null||!(oo&268435455)&&!(oh&268435455)||Ui(Kr,nn)}function om(t,e){var r=Ut;Ut|=2;var n=pC();(Kr!==t||nn!==e)&&(ui=null,eo(t,e));do try{bO();break}catch(a){hC(t,a)}while(!0);if(p0(),Ut=r,am.current=n,Dr!==null)throw Error(Re(261));return Kr=null,nn=0,Br}function bO(){for(;Dr!==null;)vC(Dr)}function wO(){for(;Dr!==null&&!GF();)vC(Dr)}function vC(t){var e=xC(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?gC(t):Dr=e,C0.current=null}function gC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=hO(r,e),r!==null){r.flags&=32767,Dr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Br=6,Dr=null;return}}else if(r=mO(r,e,Gn),r!==null){Dr=r;return}if(e=e.sibling,e!==null){Dr=e;return}Dr=e=t}while(e!==null);Br===0&&(Br=5)}function qs(t,e,r){var n=Jt,a=da.transition;try{da.transition=null,Jt=1,NO(t,e,r,n)}finally{da.transition=a,Jt=n}return null}function NO(t,e,r,n){do gu();while(Hi!==null);if(Ut&6)throw Error(Re(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(rR(t,i),t===Kr&&(Dr=Kr=null,nn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hf||(Hf=!0,bC(Vd,function(){return gu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=da.transition,da.transition=null;var s=Jt;Jt=1;var u=Ut;Ut|=4,C0.current=null,vO(t,r),fC(r,t),VR(Av),qd=!!Sv,Av=Sv=null,t.current=r,gO(r),WF(),Ut=u,Jt=s,da.transition=i}else t.current=r;if(Hf&&(Hf=!1,Hi=t,sm=a),i=t.pendingLanes,i===0&&(ts=null),KF(r.stateNode),$n(t,Er()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(im)throw im=!1,t=Gv,Gv=null,t;return sm&1&&t.tag!==0&&gu(),i=t.pendingLanes,i&1?t===Wv?rc++:(rc=0,Wv=t):rc=0,As(),null}function gu(){if(Hi!==null){var t=JA(sm),e=da.transition,r=Jt;try{if(da.transition=null,Jt=16>t?16:t,Hi===null)var n=!1;else{if(t=Hi,Hi=null,sm=0,Ut&6)throw Error(Re(331));var a=Ut;for(Ut|=4,He=t.current;He!==null;){var i=He,s=i.child;if(He.flags&16){var u=i.deletions;if(u!==null){for(var l=0;l<u.length;l++){var o=u[l];for(He=o;He!==null;){var c=He;switch(c.tag){case 0:case 11:case 15:ec(8,c,i)}var d=c.child;if(d!==null)d.return=c,He=d;else for(;He!==null;){c=He;var m=c.sibling,h=c.return;if(uC(c),c===o){He=null;break}if(m!==null){m.return=h,He=m;break}He=h}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var C=v.sibling;v.sibling=null,v=C}while(v!==null)}}He=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,He=s;else e:for(;He!==null;){if(i=He,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ec(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,He=N;break e}He=i.return}}var A=t.current;for(He=A;He!==null;){s=He;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,He=b;else e:for(s=A;He!==null;){if(u=He,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:sh(9,u)}}catch(w){yr(u,u.return,w)}if(u===s){He=null;break e}var g=u.sibling;if(g!==null){g.return=u.return,He=g;break e}He=u.return}}if(Ut=a,As(),Ga&&typeof Ga.onPostCommitFiberRoot=="function")try{Ga.onPostCommitFiberRoot(Ym,t)}catch{}n=!0}return n}finally{Jt=r,da.transition=e}}return!1}function mw(t,e,r){e=Mu(r,e),e=JD(t,e,1),t=es(t,e,1),e=En(),t!==null&&(Gc(t,1,e),$n(t,e))}function yr(t,e,r){if(t.tag===3)mw(t,t,r);else for(;e!==null;){if(e.tag===3){mw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ts===null||!ts.has(n))){t=Mu(r,t),t=YD(e,t,1),e=es(e,t,1),t=En(),e!==null&&(Gc(e,1,t),$n(e,t));break}}e=e.return}}function _O(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=En(),t.pingedLanes|=t.suspendedLanes&r,Kr===t&&(nn&r)===r&&(Br===4||Br===3&&(nn&130023424)===nn&&500>Er()-M0?eo(t,0):T0|=r),$n(t,e)}function yC(t,e){e===0&&(t.mode&1?(e=Of,Of<<=1,!(Of&130023424)&&(Of=4194304)):e=1);var r=En();t=xi(t,e),t!==null&&(Gc(t,e,r),$n(t,r))}function EO(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),yC(t,r)}function SO(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Re(314))}n!==null&&n.delete(e),yC(t,r)}var xC;xC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||jn.current)Bn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Bn=!1,dO(t,e,r);Bn=!!(t.flags&131072)}else Bn=!1,fr&&e.flags&1048576&&_D(e,Jd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Dd(t,e),t=e.pendingProps;var a=Au(e,yn.current);vu(e,r),a=_0(null,e,n,t,a,r);var i=E0();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(n)?(i=!0,Xd(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,y0(e),a.updater=ih,e.stateNode=a,a._reactInternals=e,Ov(e,n,t,r),e=kv(null,e,n,!0,i,r)):(e.tag=0,fr&&i&&f0(e),_n(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Dd(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=DO(n),t=Na(n,t),a){case 0:e=jv(null,e,n,t,r);break e;case 1:e=nw(null,e,n,t,r);break e;case 11:e=tw(null,e,n,t,r);break e;case 14:e=rw(null,e,n,Na(n.type,t),r);break e}throw Error(Re(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),jv(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),nw(t,e,n,a,r);case 3:e:{if(rC(e),t===null)throw Error(Re(387));n=e.pendingProps,i=e.memoizedState,a=i.element,TD(t,e),em(e,n,null,r);var s=e.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=Mu(Error(Re(423)),e),e=aw(t,e,n,r,a);break e}else if(n!==a){a=Mu(Error(Re(424)),e),e=aw(t,e,n,r,a);break e}else for(Qn=Zi(e.stateNode.containerInfo.firstChild),Xn=e,fr=!0,Ea=null,r=DD(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Du(),n===a){e=bi(t,e,r);break e}_n(t,e,n,r)}e=e.child}return e;case 5:return MD(e),t===null&&Pv(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,s=a.children,Dv(n,a)?s=null:i!==null&&Dv(n,i)&&(e.flags|=32),tC(t,e),_n(t,e,s,r),e.child;case 6:return t===null&&Pv(e),null;case 13:return nC(t,e,r);case 4:return x0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cu(e,null,n,r):_n(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),tw(t,e,n,a,r);case 7:return _n(t,e,e.pendingProps,r),e.child;case 8:return _n(t,e,e.pendingProps.children,r),e.child;case 12:return _n(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,s=a.value,ar(Yd,n._currentValue),n._currentValue=s,i!==null)if(Ma(i.value,s)){if(i.children===a.children&&!jn.current){e=bi(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var l=u.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=hi(-1,r&-r),l.tag=2;var o=i.updateQueue;if(o!==null){o=o.shared;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Fv(i.return,r,e),u.lanes|=r;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(Re(341));s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),Fv(s,r,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}_n(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,vu(e,r),a=ha(a),n=n(a),e.flags|=1,_n(t,e,n,r),e.child;case 14:return n=e.type,a=Na(n,e.pendingProps),a=Na(n.type,a),rw(t,e,n,a,r);case 15:return ZD(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),Dd(t,e),e.tag=1,kn(n)?(t=!0,Xd(e)):t=!1,vu(e,r),KD(e,n,a),Ov(e,n,a,r),kv(null,e,n,!0,t,r);case 19:return aC(t,e,r);case 22:return eC(t,e,r)}throw Error(Re(156,e.tag))};function bC(t,e){return WA(t,e)}function AO(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(t,e,r,n){return new AO(t,e,r,n)}function R0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DO(t){if(typeof t=="function")return R0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zg)return 11;if(t===e0)return 14}return 2}function ns(t,e){var r=t.alternate;return r===null?(r=fa(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Md(t,e,r,n,a,i){var s=2;if(n=t,typeof t=="function")R0(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Yo:return to(r.children,a,i,e);case Yg:s=8,a|=8;break;case iv:return t=fa(12,r,e,a|2),t.elementType=iv,t.lanes=i,t;case sv:return t=fa(13,r,e,a),t.elementType=sv,t.lanes=i,t;case ov:return t=fa(19,r,e,a),t.elementType=ov,t.lanes=i,t;case MA:return uh(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case CA:s=10;break e;case TA:s=9;break e;case Zg:s=11;break e;case e0:s=14;break e;case ki:s=16,n=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return e=fa(s,r,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function to(t,e,r,n){return t=fa(7,t,n,e),t.lanes=r,t}function uh(t,e,r,n){return t=fa(22,t,n,e),t.elementType=MA,t.lanes=r,t.stateNode={isHidden:!1},t}function Bp(t,e,r){return t=fa(6,t,null,e),t.lanes=r,t}function jp(t,e,r){return e=fa(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CO(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gp(0),this.expirationTimes=gp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function O0(t,e,r,n,a,i,s,u,l){return t=new CO(t,e,r,u,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=fa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},y0(i),t}function TO(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function wC(t){if(!t)return ds;t=t._reactInternals;e:{if(vo(t)!==t||t.tag!==1)throw Error(Re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(t.tag===1){var r=t.type;if(kn(r))return wD(t,r,e)}return e}function NC(t,e,r,n,a,i,s,u,l){return t=O0(r,n,!0,t,a,i,s,u,l),t.context=wC(null),r=t.current,n=En(),a=rs(r),i=hi(n,a),i.callback=e??null,es(r,i,a),t.current.lanes=a,Gc(t,a,n),$n(t,n),t}function lh(t,e,r,n){var a=e.current,i=En(),s=rs(a);return r=wC(r),e.context===null?e.context=r:e.pendingContext=r,e=hi(i,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=es(a,e,s),t!==null&&(Ca(t,a,s,i),Ed(t,a,s)),s}function um(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function B0(t,e){hw(t,e),(t=t.alternate)&&hw(t,e)}function MO(){return null}var _C=typeof reportError=="function"?reportError:function(t){console.error(t)};function j0(t){this._internalRoot=t}ch.prototype.render=j0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Re(409));lh(t,e,null,null)};ch.prototype.unmount=j0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uo(function(){lh(null,t,null,null)}),e[yi]=null}};function ch(t){this._internalRoot=t}ch.prototype.unstable_scheduleHydration=function(t){if(t){var e=eD();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Vi.length&&e!==0&&e<Vi[r].priority;r++);Vi.splice(r,0,t),r===0&&rD(t)}};function k0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pw(){}function IO(t,e,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var o=um(s);i.call(o)}}var s=NC(e,n,t,0,null,!1,!1,"",pw);return t._reactRootContainer=s,t[yi]=s.current,yc(t.nodeType===8?t.parentNode:t),uo(),s}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var u=n;n=function(){var o=um(l);u.call(o)}}var l=O0(t,0,!1,null,null,!1,!1,"",pw);return t._reactRootContainer=l,t[yi]=l.current,yc(t.nodeType===8?t.parentNode:t),uo(function(){lh(e,l,r,n)}),l}function dh(t,e,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var u=a;a=function(){var l=um(s);u.call(l)}}lh(e,s,t,a)}else s=IO(r,e,t,a,n);return um(s)}YA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=zl(e.pendingLanes);r!==0&&(n0(e,r|1),$n(e,Er()),!(Ut&6)&&(Iu=Er()+500,As()))}break;case 13:uo(function(){var n=xi(t,1);if(n!==null){var a=En();Ca(n,t,1,a)}}),B0(t,1)}};a0=function(t){if(t.tag===13){var e=xi(t,134217728);if(e!==null){var r=En();Ca(e,t,134217728,r)}B0(t,134217728)}};ZA=function(t){if(t.tag===13){var e=rs(t),r=xi(t,e);if(r!==null){var n=En();Ca(r,t,e,n)}B0(t,e)}};eD=function(){return Jt};tD=function(t,e){var r=Jt;try{return Jt=t,e()}finally{Jt=r}};gv=function(t,e,r){switch(e){case"input":if(cv(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=rh(n);if(!a)throw Error(Re(90));PA(n),cv(n,a)}}}break;case"textarea":RA(t,r);break;case"select":e=r.value,e!=null&&du(t,!!r.multiple,e,!1)}};zA=I0;VA=uo;var PO={usingClientEntryPoint:!1,Events:[Qc,ru,rh,$A,LA,I0]},Bl={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FO={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HA(t),t===null?null:t.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||MO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{Ym=Gf.inject(FO),Ga=Gf}catch{}}Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PO;Yn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k0(e))throw Error(Re(200));return TO(t,e,null,r)};Yn.createRoot=function(t,e){if(!k0(t))throw Error(Re(299));var r=!1,n="",a=_C;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=O0(t,1,!1,null,null,r,!1,n,a),t[yi]=e.current,yc(t.nodeType===8?t.parentNode:t),new j0(e)};Yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=HA(e),t=t===null?null:t.stateNode,t};Yn.flushSync=function(t){return uo(t)};Yn.hydrate=function(t,e,r){if(!fh(e))throw Error(Re(200));return dh(null,t,e,!0,r)};Yn.hydrateRoot=function(t,e,r){if(!k0(t))throw Error(Re(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=_C;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=NC(e,null,t,1,r??null,a,!1,i,s),t[yi]=e.current,yc(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new ch(e)};Yn.render=function(t,e,r){if(!fh(e))throw Error(Re(200));return dh(null,t,e,!1,r)};Yn.unmountComponentAtNode=function(t){if(!fh(t))throw Error(Re(40));return t._reactRootContainer?(uo(function(){dh(null,null,t,!1,function(){t._reactRootContainer=null,t[yi]=null})}),!0):!1};Yn.unstable_batchedUpdates=I0;Yn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!fh(r))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return dh(t,e,r,!1,n)};Yn.version="18.3.1-next-f1338f8080-20240426";function EC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EC)}catch(t){console.error(t)}}EC(),EA.exports=Yn;var RO=EA.exports,SC,vw=RO;SC=vw.createRoot,vw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dc.apply(this,arguments)}var Gi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gi||(Gi={}));const gw="popstate";function OO(t){t===void 0&&(t={});function e(n,a){let{pathname:i,search:s,hash:u}=n.location;return Kv("",{pathname:i,search:s,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:lm(a)}return jO(e,r,null,t)}function Mr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BO(){return Math.random().toString(36).substr(2,8)}function yw(t,e){return{usr:t.state,key:t.key,idx:e}}function Kv(t,e,r,n){return r===void 0&&(r=null),Dc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ku(e):e,{state:r,key:e&&e.key||n||BO()})}function lm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ku(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function jO(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,u=Gi.Pop,l=null,o=c();o==null&&(o=0,s.replaceState(Dc({},s.state,{idx:o}),""));function c(){return(s.state||{idx:null}).idx}function d(){u=Gi.Pop;let C=c(),N=C==null?null:C-o;o=C,l&&l({action:u,location:v.location,delta:N})}function m(C,N){u=Gi.Push;let A=Kv(v.location,C,N);o=c()+1;let b=yw(A,o),g=v.createHref(A);try{s.pushState(b,"",g)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(g)}i&&l&&l({action:u,location:v.location,delta:1})}function h(C,N){u=Gi.Replace;let A=Kv(v.location,C,N);o=c();let b=yw(A,o),g=v.createHref(A);s.replaceState(b,"",g),i&&l&&l({action:u,location:v.location,delta:0})}function p(C){let N=a.location.origin!=="null"?a.location.origin:a.location.href,A=typeof C=="string"?C:lm(C);return A=A.replace(/ $/,"%20"),Mr(N,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,N)}let v={get action(){return u},get location(){return t(a,s)},listen(C){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(gw,d),l=C,()=>{a.removeEventListener(gw,d),l=null}},createHref(C){return e(a,C)},createURL:p,encodeLocation(C){let N=p(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:h,go(C){return s.go(C)}};return v}var xw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xw||(xw={}));function kO(t,e,r){return r===void 0&&(r="/"),$O(t,e,r)}function $O(t,e,r,n){let a=typeof e=="string"?Ku(e):e,i=$0(a.pathname||"/",r);if(i==null)return null;let s=DC(t);LO(s);let u=null;for(let l=0;u==null&&l<s.length;++l){let o=YO(i);u=XO(s[l],o)}return u}function DC(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,u)=>{let l={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};l.relativePath.startsWith("/")&&(Mr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let o=as([n,l.relativePath]),c=r.concat(l);i.children&&i.children.length>0&&(Mr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),DC(i.children,e,c,o)),!(i.path==null&&!i.index)&&e.push({path:o,score:WO(o,i.index),routesMeta:c})};return t.forEach((i,s)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,s);else for(let l of CC(i.path))a(i,s,l)}),e}function CC(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=CC(n.join("/")),u=[];return u.push(...s.map(l=>l===""?i:[i,l].join("/"))),a&&u.push(...s),u.map(l=>t.startsWith("/")&&l===""?"/":l)}function LO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:QO(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const zO=/^:[\w-]+$/,VO=3,UO=2,qO=1,HO=10,GO=-2,bw=t=>t==="*";function WO(t,e){let r=t.split("/"),n=r.length;return r.some(bw)&&(n+=GO),e&&(n+=UO),r.filter(a=>!bw(a)).reduce((a,i)=>a+(zO.test(i)?VO:i===""?qO:HO),n)}function QO(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function XO(t,e,r){let{routesMeta:n}=t,a={},i="/",s=[];for(let u=0;u<n.length;++u){let l=n[u],o=u===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=KO({path:l.relativePath,caseSensitive:l.caseSensitive,end:o},c),m=l.route;if(!d)return null;Object.assign(a,d.params),s.push({params:a,pathname:as([i,d.pathname]),pathnameBase:r6(as([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=as([i,d.pathnameBase]))}return s}function KO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=JO(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((o,c,d)=>{let{paramName:m,isOptional:h}=c;if(m==="*"){let v=u[d]||"";s=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=u[d];return h&&!p?o[m]=void 0:o[m]=(p||"").replace(/%2F/g,"/"),o},{}),pathname:i,pathnameBase:s,pattern:t}}function JO(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),AC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,u,l)=>(n.push({paramName:u,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function YO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function ZO(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Ku(t):t;return{pathname:r?r.startsWith("/")?r:e6(r,e):e,search:n6(n),hash:a6(a)}}function e6(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function kp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function t6(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function TC(t,e){let r=t6(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function MC(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Ku(t):(a=Dc({},t),Mr(!a.pathname||!a.pathname.includes("?"),kp("?","pathname","search",a)),Mr(!a.pathname||!a.pathname.includes("#"),kp("#","pathname","hash",a)),Mr(!a.search||!a.search.includes("#"),kp("#","search","hash",a)));let i=t===""||a.pathname==="",s=i?"/":a.pathname,u;if(s==null)u=r;else{let d=e.length-1;if(!n&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),d-=1;a.pathname=m.join("/")}u=d>=0?e[d]:"/"}let l=ZO(a,u),o=s&&s!=="/"&&s.endsWith("/"),c=(i||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(o||c)&&(l.pathname+="/"),l}const as=t=>t.join("/").replace(/\/\/+/g,"/"),r6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),n6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,a6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function i6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const IC=["post","put","patch","delete"];new Set(IC);const s6=["get",...IC];new Set(s6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cc.apply(this,arguments)}const L0=U.createContext(null),o6=U.createContext(null),go=U.createContext(null),mh=U.createContext(null),yo=U.createContext({outlet:null,matches:[],isDataRoute:!1}),PC=U.createContext(null);function u6(t,e){let{relative:r}=e===void 0?{}:e;Kc()||Mr(!1);let{basename:n,navigator:a}=U.useContext(go),{hash:i,pathname:s,search:u}=RC(t,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:as([n,s])),a.createHref({pathname:l,search:u,hash:i})}function Kc(){return U.useContext(mh)!=null}function hh(){return Kc()||Mr(!1),U.useContext(mh).location}function FC(t){U.useContext(go).static||U.useLayoutEffect(t)}function l6(){let{isDataRoute:t}=U.useContext(yo);return t?N6():c6()}function c6(){Kc()||Mr(!1);let t=U.useContext(L0),{basename:e,future:r,navigator:n}=U.useContext(go),{matches:a}=U.useContext(yo),{pathname:i}=hh(),s=JSON.stringify(TC(a,r.v7_relativeSplatPath)),u=U.useRef(!1);return FC(()=>{u.current=!0}),U.useCallback(function(o,c){if(c===void 0&&(c={}),!u.current)return;if(typeof o=="number"){n.go(o);return}let d=MC(o,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:as([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}function RC(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=U.useContext(go),{matches:a}=U.useContext(yo),{pathname:i}=hh(),s=JSON.stringify(TC(a,n.v7_relativeSplatPath));return U.useMemo(()=>MC(t,JSON.parse(s),i,r==="path"),[t,s,i,r])}function f6(t,e){return d6(t,e)}function d6(t,e,r,n){Kc()||Mr(!1);let{navigator:a}=U.useContext(go),{matches:i}=U.useContext(yo),s=i[i.length-1],u=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let o=hh(),c;if(e){var d;let C=typeof e=="string"?Ku(e):e;l==="/"||(d=C.pathname)!=null&&d.startsWith(l)||Mr(!1),c=C}else c=o;let m=c.pathname||"/",h=m;if(l!=="/"){let C=l.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let p=kO(t,{pathname:h}),v=g6(p&&p.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:as([l,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:as([l,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,r,n);return e&&v?U.createElement(mh.Provider,{value:{location:Cc({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Gi.Pop}},v):v}function m6(){let t=w6(),e=i6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),r?U.createElement("pre",{style:a},r):null,null)}const h6=U.createElement(m6,null);class p6 extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?U.createElement(yo.Provider,{value:this.props.routeContext},U.createElement(PC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v6(t){let{routeContext:e,match:r,children:n}=t,a=U.useContext(L0);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),U.createElement(yo.Provider,{value:e},n)}function g6(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,u=(a=r)==null?void 0:a.errors;if(u!=null){let c=s.findIndex(d=>d.route.id&&(u==null?void 0:u[d.route.id])!==void 0);c>=0||Mr(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,o=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(o=c),d.route.id){let{loaderData:m,errors:h}=r,p=d.route.loader&&m[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((c,d,m)=>{let h,p=!1,v=null,C=null;r&&(h=u&&d.route.id?u[d.route.id]:void 0,v=d.route.errorElement||h6,l&&(o<0&&m===0?(_6("route-fallback"),p=!0,C=null):o===m&&(p=!0,C=d.route.hydrateFallbackElement||null)));let N=e.concat(s.slice(0,m+1)),A=()=>{let b;return h?b=v:p?b=C:d.route.Component?b=U.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=c,U.createElement(v6,{match:d,routeContext:{outlet:c,matches:N,isDataRoute:r!=null},children:b})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?U.createElement(p6,{location:r.location,revalidation:r.revalidation,component:v,error:h,children:A(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):A()},null)}var OC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OC||{}),BC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BC||{});function y6(t){let e=U.useContext(L0);return e||Mr(!1),e}function x6(t){let e=U.useContext(o6);return e||Mr(!1),e}function b6(t){let e=U.useContext(yo);return e||Mr(!1),e}function jC(t){let e=b6(),r=e.matches[e.matches.length-1];return r.route.id||Mr(!1),r.route.id}function w6(){var t;let e=U.useContext(PC),r=x6(),n=jC();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function N6(){let{router:t}=y6(OC.UseNavigateStable),e=jC(BC.UseNavigateStable),r=U.useRef(!1);return FC(()=>{r.current=!0}),U.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Cc({fromRouteId:e},i)))},[t,e])}const ww={};function _6(t,e,r){ww[t]||(ww[t]=!0)}function E6(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nt(t){Mr(!1)}function S6(t){let{basename:e="/",children:r=null,location:n,navigationType:a=Gi.Pop,navigator:i,static:s=!1,future:u}=t;Kc()&&Mr(!1);let l=e.replace(/^\/*/,"/"),o=U.useMemo(()=>({basename:l,navigator:i,static:s,future:Cc({v7_relativeSplatPath:!1},u)}),[l,u,i,s]);typeof n=="string"&&(n=Ku(n));let{pathname:c="/",search:d="",hash:m="",state:h=null,key:p="default"}=n,v=U.useMemo(()=>{let C=$0(c,l);return C==null?null:{location:{pathname:C,search:d,hash:m,state:h,key:p},navigationType:a}},[l,c,d,m,h,p,a]);return v==null?null:U.createElement(go.Provider,{value:o},U.createElement(mh.Provider,{children:r,value:v}))}function A6(t){let{children:e,location:r}=t;return f6(Jv(e),r)}new Promise(()=>{});function Jv(t,e){e===void 0&&(e=[]);let r=[];return U.Children.forEach(t,(n,a)=>{if(!U.isValidElement(n))return;let i=[...e,a];if(n.type===U.Fragment){r.push.apply(r,Jv(n.props.children,i));return}n.type!==Nt&&Mr(!1),!n.props.index||!n.props.children||Mr(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Jv(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yv(){return Yv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yv.apply(this,arguments)}function D6(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function C6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T6(t,e){return t.button===0&&(!e||e==="_self")&&!C6(t)}const M6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],I6="6";try{window.__reactRouterVersion=I6}catch{}const P6="startTransition",Nw=_F[P6];function F6(t){let{basename:e,children:r,future:n,window:a}=t,i=U.useRef();i.current==null&&(i.current=OO({window:a,v5Compat:!0}));let s=i.current,[u,l]=U.useState({action:s.action,location:s.location}),{v7_startTransition:o}=n||{},c=U.useCallback(d=>{o&&Nw?Nw(()=>l(d)):l(d)},[l,o]);return U.useLayoutEffect(()=>s.listen(c),[s,c]),U.useEffect(()=>E6(n),[n]),U.createElement(S6,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:s,future:n})}const R6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B6=U.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:u,target:l,to:o,preventScrollReset:c,viewTransition:d}=e,m=D6(e,M6),{basename:h}=U.useContext(go),p,v=!1;if(typeof o=="string"&&O6.test(o)&&(p=o,R6))try{let b=new URL(window.location.href),g=o.startsWith("//")?new URL(b.protocol+o):new URL(o),w=$0(g.pathname,h);g.origin===b.origin&&w!=null?o=w+g.search+g.hash:v=!0}catch{}let C=u6(o,{relative:a}),N=j6(o,{replace:s,state:u,target:l,preventScrollReset:c,relative:a,viewTransition:d});function A(b){n&&n(b),b.defaultPrevented||N(b)}return U.createElement("a",Yv({},m,{href:p||C,onClick:v||i?n:A,ref:r,target:l}))});var _w;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_w||(_w={}));var Ew;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ew||(Ew={}));function j6(t,e){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:u}=e===void 0?{}:e,l=l6(),o=hh(),c=RC(t,{relative:s});return U.useCallback(d=>{if(T6(d,r)){d.preventDefault();let m=n!==void 0?n:lm(o)===lm(c);l(t,{replace:m,state:a,preventScrollReset:i,relative:s,viewTransition:u})}},[o,l,c,n,a,r,t,i,s,u])}function k6(){const t=[{title:"1. Root of Equation",topics:[{id:"bisection",name:"Bisection Method",path:"/bisection"},{id:"falseposition",name:"False Position Method",path:"/falseposition"},{id:"onepoint",name:"One-Point Iteration",path:"/onepoint"},{id:"taylor",name:"Taylor Series",path:"/taylor"},{id:"newtonraphson",name:"Newton–Raphson Method",path:"/newtonraphson"},{id:"secant",name:"Secant Method",path:"/secant"}]},{title:"2. Linear System",topics:[{id:"cramer",name:"Cramer’s Rule",path:"/cramer"},{id:"gaussian",name:"Gaussian Elimination Method",path:"/gaussian"},{id:"gaussjordan",name:"Gauss–Jordan Method",path:"/gaussjordan"},{id:"matrixinversion",name:"Matrix Inversion Method",path:"/matrixinversion"},{id:"ludecomposition",name:"LU Decomposition",path:"/ludecomposition"},{id:"cholesky",name:"Cholesky Decomposition",path:"/cholesky"},{id:"jacobi",name:"Jacobi Iteration Method",path:"/jacobi"},{id:"gaussseidel",name:"Gauss–Seidel Iteration Method",path:"/gaussseidel"},{id:"conjugategradient",name:"Conjugate Gradient Method",path:"/conjugategradient"}]},{title:"3. Interpolation",topics:[{id:"lagrangeinterp",name:"Lagrange Interpolation",path:"/lagrangeinterp"},{id:"linearinterp",name:"Linear Interpolation",path:"/linearinterp"},{id:"quadraticinterp",name:"Quadratic Interpolation",path:"/quadraticinterp"},{id:"polynomialinterp",name:"Polynomial Interpolation",path:"/polynomialinterp"},{id:"linearspline",name:"Linear Spline",path:"/linearspline"},{id:"quadraticspline",name:"Quadratic Spline",path:"/quadraticspline"},{id:"cubicspline",name:"Cubic Spline",path:"/cubicspline"}]},{title:"4. Regression",topics:[{id:"singlelinear",name:"Single Linear Regression",path:"/singlelinear"},{id:"multiplelinear",name:"Multiple Linear Regression",path:"/multiplelinear"},{id:"polynomialreg",name:"Polynomial Regression",path:"/polynomialreg"},{id:"nonlinearreg",name:"Nonlinear Regression",path:"/nonlinearreg"}]},{title:"5. Integration",topics:[{id:"singletrapezoidal",name:"Single Trapezoidal Rule",path:"/singletrapezoidal"},{id:"compositetrapezoidal",name:"Composite Trapezoidal Rule",path:"/compositetrapezoidal"},{id:"simpsonsrule",name:"Simpson’s Rule",path:"/simpsonsrule"},{id:"compositesimpson",name:"Composite Simpson’s Rule",path:"/compositesimpson"}]},{title:"6. Differentiation",topics:[{id:"firstdivided",name:"First Divided-Difference",path:"/firstdivided"},{id:"seconddivided",name:"Second Divided-Difference",path:"/seconddivided"},{id:"forwarddivided",name:"Forward Divided-Difference",path:"/forwarddivided"},{id:"backwarddivided",name:"Backward Divided-Difference",path:"/backwarddivided"},{id:"centraldivided",name:"Central Divided-Difference",path:"/centraldivided"}]}];return y.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center p-6 bg-slate-900",children:[y.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-8 text-center fade-in",children:"Numerical Methods"}),y.jsx("div",{className:"flex justify-center items-center w-full",children:y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:t.map(e=>y.jsxs("div",{className:`bg-slate-800 rounded-xl p-5 shadow-lg border border-cyan-700 w-72\r
                         transform transition-all duration-300 fade-in-delay1\r
                         hover:scale-105 hover:shadow-2xl glow-btn`,children:[y.jsx("h2",{className:"text-lg font-semibold text-cyan-300 mb-3 text-center",children:e.title}),y.jsx("ul",{className:"space-y-2",children:e.topics.map(r=>y.jsx("li",{className:"bg-slate-700 p-2 rounded-md hover:bg-slate-600 transition-colors",children:y.jsx(B6,{to:r.path,className:"block text-center",children:r.name})},r.id))})]},e.title))})})]})}const $6=()=>{};var Sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},L6=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],u=t[r++],l=((a&7)<<18|(i&63)<<12|(s&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},$C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,u=s?t[a+1]:0,l=a+2<t.length,o=l?t[a+2]:0,c=i>>2,d=(i&3)<<4|u>>4;let m=(u&15)<<2|o>>6,h=o&63;l||(h=64,s||(m=64)),n.push(r[c],r[d],r[m],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):L6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],u=a<t.length?r[t.charAt(a)]:0;++a;const o=a<t.length?r[t.charAt(a)]:64;++a;const d=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||u==null||o==null||d==null)throw new z6;const m=i<<2|u>>4;if(n.push(m),o!==64){const h=u<<4&240|o>>2;if(n.push(h),d!==64){const p=o<<6&192|d;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V6=function(t){const e=kC(t);return $C.encodeByteArray(e,!0)},cm=function(t){return V6(t).replace(/\./g,"")},U6=function(t){try{return $C.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=()=>q6().__FIREBASE_DEFAULTS__,G6=()=>{if(typeof process>"u"||typeof Sw>"u")return;const t=Sw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&U6(t[1]);return e&&JSON.parse(e)},z0=()=>{try{return $6()||H6()||G6()||W6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Q6=t=>{var e,r;return(r=(e=z0())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},X6=t=>{const e=Q6(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},LC=()=>{var t;return(t=z0())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J6(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[cm(JSON.stringify(r)),cm(JSON.stringify(s)),""].join(".")}const nc={};function Z6(){const t={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?t.emulator.push(e):t.prod.push(e);return t}function eB(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Aw=!1;function tB(t,e){if(typeof window>"u"||typeof document>"u"||!V0(window.location.host)||nc[t]===e||nc[t]||Aw)return;nc[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=Z6().prod.length>0;function s(){const m=document.getElementById(n);m&&m.remove()}function u(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,h){m.setAttribute("width","24"),m.setAttribute("id",h),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function o(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Aw=!0,s()},m}function c(m,h){m.setAttribute("id",h),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=eB(n),h=r("text"),p=document.getElementById(h)||document.createElement("span"),v=r("learnmore"),C=document.getElementById(v)||document.createElement("a"),N=r("preprendIcon"),A=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const b=m.element;u(b),c(C,v);const g=o();l(A,N),b.append(A,p,C,g),document.body.appendChild(b)}i?(p.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nB(){var e;const t=(e=z0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aB(){return!nB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iB(){try{return typeof indexedDB=="object"}catch{return!1}}function sB(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB="FirebaseError";class Ju extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=oB,Object.setPrototypeOf(this,Ju.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zC.prototype.create)}}class zC{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?uB(i,n):"Error",u=`${this.serviceName}: ${s} (${a}).`;return new Ju(a,u,n)}}function uB(t,e){return t.replace(lB,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const lB=/\{\$([^}]+)}/g;function fm(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(Dw(i)&&Dw(s)){if(!fm(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function Dw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t){return t&&t._delegate?t._delegate:t}class Tc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new K6;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dB(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&s.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&e(i,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:fB(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fB(t){return t===Hs?void 0:t}function dB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new cB(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const hB={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},pB=Ft.INFO,vB={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},gB=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=vB[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class VC{constructor(e){this.name=e,this._logLevel=pB,this._logHandler=gB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const yB=(t,e)=>e.some(r=>t instanceof r);let Cw,Tw;function xB(){return Cw||(Cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bB(){return Tw||(Tw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UC=new WeakMap,Zv=new WeakMap,qC=new WeakMap,$p=new WeakMap,U0=new WeakMap;function wB(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(is(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&UC.set(r,t)}).catch(()=>{}),U0.set(e,t),e}function NB(t){if(Zv.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});Zv.set(t,e)}let eg={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Zv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qC.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return is(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _B(t){eg=t(eg)}function EB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Lp(this),e,...r);return qC.set(n,e.sort?e.sort():[e]),is(n)}:bB().includes(t)?function(...e){return t.apply(Lp(this),e),is(UC.get(this))}:function(...e){return is(t.apply(Lp(this),e))}}function SB(t){return typeof t=="function"?EB(t):(t instanceof IDBTransaction&&NB(t),yB(t,xB())?new Proxy(t,eg):t)}function is(t){if(t instanceof IDBRequest)return wB(t);if($p.has(t))return $p.get(t);const e=SB(t);return e!==t&&($p.set(t,e),U0.set(e,t)),e}const Lp=t=>U0.get(t);function AB(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),u=is(s);return n&&s.addEventListener("upgradeneeded",l=>{n(is(s.result),l.oldVersion,l.newVersion,is(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),u.then(l=>{i&&l.addEventListener("close",()=>i()),a&&l.addEventListener("versionchange",o=>a(o.oldVersion,o.newVersion,o))}).catch(()=>{}),u}const DB=["get","getKey","getAll","getAllKeys","count"],CB=["put","add","delete","clear"],zp=new Map;function Mw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=CB.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||DB.includes(r)))return;const i=async function(s,...u){const l=this.transaction(s,a?"readwrite":"readonly");let o=l.store;return n&&(o=o.index(u.shift())),(await Promise.all([o[r](...u),a&&l.done]))[0]};return zp.set(e,i),i}_B(t=>({...t,get:(e,r,n)=>Mw(e,r)||t.get(e,r,n),has:(e,r)=>!!Mw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(MB(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function MB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tg="@firebase/app",Iw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new VC("@firebase/app"),IB="@firebase/app-compat",PB="@firebase/analytics-compat",FB="@firebase/analytics",RB="@firebase/app-check-compat",OB="@firebase/app-check",BB="@firebase/auth",jB="@firebase/auth-compat",kB="@firebase/database",$B="@firebase/data-connect",LB="@firebase/database-compat",zB="@firebase/functions",VB="@firebase/functions-compat",UB="@firebase/installations",qB="@firebase/installations-compat",HB="@firebase/messaging",GB="@firebase/messaging-compat",WB="@firebase/performance",QB="@firebase/performance-compat",XB="@firebase/remote-config",KB="@firebase/remote-config-compat",JB="@firebase/storage",YB="@firebase/storage-compat",ZB="@firebase/firestore",e5="@firebase/ai",t5="@firebase/firestore-compat",r5="firebase",n5="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="[DEFAULT]",a5={[tg]:"fire-core",[IB]:"fire-core-compat",[FB]:"fire-analytics",[PB]:"fire-analytics-compat",[OB]:"fire-app-check",[RB]:"fire-app-check-compat",[BB]:"fire-auth",[jB]:"fire-auth-compat",[kB]:"fire-rtdb",[$B]:"fire-data-connect",[LB]:"fire-rtdb-compat",[zB]:"fire-fn",[VB]:"fire-fn-compat",[UB]:"fire-iid",[qB]:"fire-iid-compat",[HB]:"fire-fcm",[GB]:"fire-fcm-compat",[WB]:"fire-perf",[QB]:"fire-perf-compat",[XB]:"fire-rc",[KB]:"fire-rc-compat",[JB]:"fire-gcs",[YB]:"fire-gcs-compat",[ZB]:"fire-fst",[t5]:"fire-fst-compat",[e5]:"fire-vertex","fire-js":"fire-js",[r5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=new Map,i5=new Map,ng=new Map;function Pw(t,e){try{t.container.addComponent(e)}catch(r){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function mm(t){const e=t.name;if(ng.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;ng.set(e,t);for(const r of dm.values())Pw(r,t);for(const r of i5.values())Pw(r,t);return!0}function s5(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function o5(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new zC("app","Firebase",u5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=n5;function HC(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:rg,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw ss.create("bad-app-name",{appName:String(a)});if(r||(r=LC()),!r)throw ss.create("no-options");const i=dm.get(a);if(i){if(fm(r,i.options)&&fm(n,i.config))return i;throw ss.create("duplicate-app",{appName:a})}const s=new mB(a);for(const l of ng.values())s.addComponent(l);const u=new l5(r,n,s);return dm.set(a,u),u}function f5(t=rg){const e=dm.get(t);if(!e&&t===rg&&LC())return HC();if(!e)throw ss.create("no-app",{appName:t});return e}function yu(t,e,r){let n=a5[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const s=[`Unable to register library "${n}" with version "${e}":`];a&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(s.join(" "));return}mm(new Tc(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="firebase-heartbeat-database",m5=1,Mc="firebase-heartbeat-store";let Vp=null;function GC(){return Vp||(Vp=AB(d5,m5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mc)}catch(r){console.warn(r)}}}}).catch(t=>{throw ss.create("idb-open",{originalErrorMessage:t.message})})),Vp}async function h5(t){try{const r=(await GC()).transaction(Mc),n=await r.objectStore(Mc).get(WC(t));return await r.done,n}catch(e){if(e instanceof Ju)wi.warn(e.message);else{const r=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(r.message)}}}async function Fw(t,e){try{const n=(await GC()).transaction(Mc,"readwrite");await n.objectStore(Mc).put(e,WC(t)),await n.done}catch(r){if(r instanceof Ju)wi.warn(r.message);else{const n=ss.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});wi.warn(n.message)}}}function WC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=1024,v5=30;class g5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new x5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>v5){const s=b5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){wi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Rw(),{heartbeatsToSend:n,unsentEntries:a}=y5(this._heartbeatsCache.heartbeats),i=cm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return wi.warn(r),""}}}function Rw(){return new Date().toISOString().substring(0,10)}function y5(t,e=p5){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),Ow(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Ow(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class x5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iB()?sB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await h5(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Fw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Fw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Ow(t){return cm(JSON.stringify({version:2,heartbeats:t})).length}function b5(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){mm(new Tc("platform-logger",e=>new TB(e),"PRIVATE")),mm(new Tc("heartbeat",e=>new g5(e),"PRIVATE")),yu(tg,Iw,t),yu(tg,Iw,"esm2020"),yu("fire-js","")}w5("");var N5="firebase",_5="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yu(N5,_5,"app");var Bw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,QC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,E){function D(){}D.prototype=E.prototype,_.F=E.prototype,_.prototype=new D,_.prototype.constructor=_,_.D=function(T,M,I){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return E.prototype[M].apply(T,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,E,D){D||(D=0);const T=Array(16);if(typeof E=="string")for(var M=0;M<16;++M)T[M]=E.charCodeAt(D++)|E.charCodeAt(D++)<<8|E.charCodeAt(D++)<<16|E.charCodeAt(D++)<<24;else for(M=0;M<16;++M)T[M]=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24;E=_.g[0],D=_.g[1],M=_.g[2];let I=_.g[3],P;P=E+(I^D&(M^I))+T[0]+3614090360&4294967295,E=D+(P<<7&4294967295|P>>>25),P=I+(M^E&(D^M))+T[1]+3905402710&4294967295,I=E+(P<<12&4294967295|P>>>20),P=M+(D^I&(E^D))+T[2]+606105819&4294967295,M=I+(P<<17&4294967295|P>>>15),P=D+(E^M&(I^E))+T[3]+3250441966&4294967295,D=M+(P<<22&4294967295|P>>>10),P=E+(I^D&(M^I))+T[4]+4118548399&4294967295,E=D+(P<<7&4294967295|P>>>25),P=I+(M^E&(D^M))+T[5]+1200080426&4294967295,I=E+(P<<12&4294967295|P>>>20),P=M+(D^I&(E^D))+T[6]+2821735955&4294967295,M=I+(P<<17&4294967295|P>>>15),P=D+(E^M&(I^E))+T[7]+4249261313&4294967295,D=M+(P<<22&4294967295|P>>>10),P=E+(I^D&(M^I))+T[8]+1770035416&4294967295,E=D+(P<<7&4294967295|P>>>25),P=I+(M^E&(D^M))+T[9]+2336552879&4294967295,I=E+(P<<12&4294967295|P>>>20),P=M+(D^I&(E^D))+T[10]+4294925233&4294967295,M=I+(P<<17&4294967295|P>>>15),P=D+(E^M&(I^E))+T[11]+2304563134&4294967295,D=M+(P<<22&4294967295|P>>>10),P=E+(I^D&(M^I))+T[12]+1804603682&4294967295,E=D+(P<<7&4294967295|P>>>25),P=I+(M^E&(D^M))+T[13]+4254626195&4294967295,I=E+(P<<12&4294967295|P>>>20),P=M+(D^I&(E^D))+T[14]+2792965006&4294967295,M=I+(P<<17&4294967295|P>>>15),P=D+(E^M&(I^E))+T[15]+1236535329&4294967295,D=M+(P<<22&4294967295|P>>>10),P=E+(M^I&(D^M))+T[1]+4129170786&4294967295,E=D+(P<<5&4294967295|P>>>27),P=I+(D^M&(E^D))+T[6]+3225465664&4294967295,I=E+(P<<9&4294967295|P>>>23),P=M+(E^D&(I^E))+T[11]+643717713&4294967295,M=I+(P<<14&4294967295|P>>>18),P=D+(I^E&(M^I))+T[0]+3921069994&4294967295,D=M+(P<<20&4294967295|P>>>12),P=E+(M^I&(D^M))+T[5]+3593408605&4294967295,E=D+(P<<5&4294967295|P>>>27),P=I+(D^M&(E^D))+T[10]+38016083&4294967295,I=E+(P<<9&4294967295|P>>>23),P=M+(E^D&(I^E))+T[15]+3634488961&4294967295,M=I+(P<<14&4294967295|P>>>18),P=D+(I^E&(M^I))+T[4]+3889429448&4294967295,D=M+(P<<20&4294967295|P>>>12),P=E+(M^I&(D^M))+T[9]+568446438&4294967295,E=D+(P<<5&4294967295|P>>>27),P=I+(D^M&(E^D))+T[14]+3275163606&4294967295,I=E+(P<<9&4294967295|P>>>23),P=M+(E^D&(I^E))+T[3]+4107603335&4294967295,M=I+(P<<14&4294967295|P>>>18),P=D+(I^E&(M^I))+T[8]+1163531501&4294967295,D=M+(P<<20&4294967295|P>>>12),P=E+(M^I&(D^M))+T[13]+2850285829&4294967295,E=D+(P<<5&4294967295|P>>>27),P=I+(D^M&(E^D))+T[2]+4243563512&4294967295,I=E+(P<<9&4294967295|P>>>23),P=M+(E^D&(I^E))+T[7]+1735328473&4294967295,M=I+(P<<14&4294967295|P>>>18),P=D+(I^E&(M^I))+T[12]+2368359562&4294967295,D=M+(P<<20&4294967295|P>>>12),P=E+(D^M^I)+T[5]+4294588738&4294967295,E=D+(P<<4&4294967295|P>>>28),P=I+(E^D^M)+T[8]+2272392833&4294967295,I=E+(P<<11&4294967295|P>>>21),P=M+(I^E^D)+T[11]+1839030562&4294967295,M=I+(P<<16&4294967295|P>>>16),P=D+(M^I^E)+T[14]+4259657740&4294967295,D=M+(P<<23&4294967295|P>>>9),P=E+(D^M^I)+T[1]+2763975236&4294967295,E=D+(P<<4&4294967295|P>>>28),P=I+(E^D^M)+T[4]+1272893353&4294967295,I=E+(P<<11&4294967295|P>>>21),P=M+(I^E^D)+T[7]+4139469664&4294967295,M=I+(P<<16&4294967295|P>>>16),P=D+(M^I^E)+T[10]+3200236656&4294967295,D=M+(P<<23&4294967295|P>>>9),P=E+(D^M^I)+T[13]+681279174&4294967295,E=D+(P<<4&4294967295|P>>>28),P=I+(E^D^M)+T[0]+3936430074&4294967295,I=E+(P<<11&4294967295|P>>>21),P=M+(I^E^D)+T[3]+3572445317&4294967295,M=I+(P<<16&4294967295|P>>>16),P=D+(M^I^E)+T[6]+76029189&4294967295,D=M+(P<<23&4294967295|P>>>9),P=E+(D^M^I)+T[9]+3654602809&4294967295,E=D+(P<<4&4294967295|P>>>28),P=I+(E^D^M)+T[12]+3873151461&4294967295,I=E+(P<<11&4294967295|P>>>21),P=M+(I^E^D)+T[15]+530742520&4294967295,M=I+(P<<16&4294967295|P>>>16),P=D+(M^I^E)+T[2]+3299628645&4294967295,D=M+(P<<23&4294967295|P>>>9),P=E+(M^(D|~I))+T[0]+4096336452&4294967295,E=D+(P<<6&4294967295|P>>>26),P=I+(D^(E|~M))+T[7]+1126891415&4294967295,I=E+(P<<10&4294967295|P>>>22),P=M+(E^(I|~D))+T[14]+2878612391&4294967295,M=I+(P<<15&4294967295|P>>>17),P=D+(I^(M|~E))+T[5]+4237533241&4294967295,D=M+(P<<21&4294967295|P>>>11),P=E+(M^(D|~I))+T[12]+1700485571&4294967295,E=D+(P<<6&4294967295|P>>>26),P=I+(D^(E|~M))+T[3]+2399980690&4294967295,I=E+(P<<10&4294967295|P>>>22),P=M+(E^(I|~D))+T[10]+4293915773&4294967295,M=I+(P<<15&4294967295|P>>>17),P=D+(I^(M|~E))+T[1]+2240044497&4294967295,D=M+(P<<21&4294967295|P>>>11),P=E+(M^(D|~I))+T[8]+1873313359&4294967295,E=D+(P<<6&4294967295|P>>>26),P=I+(D^(E|~M))+T[15]+4264355552&4294967295,I=E+(P<<10&4294967295|P>>>22),P=M+(E^(I|~D))+T[6]+2734768916&4294967295,M=I+(P<<15&4294967295|P>>>17),P=D+(I^(M|~E))+T[13]+1309151649&4294967295,D=M+(P<<21&4294967295|P>>>11),P=E+(M^(D|~I))+T[4]+4149444226&4294967295,E=D+(P<<6&4294967295|P>>>26),P=I+(D^(E|~M))+T[11]+3174756917&4294967295,I=E+(P<<10&4294967295|P>>>22),P=M+(E^(I|~D))+T[2]+718787259&4294967295,M=I+(P<<15&4294967295|P>>>17),P=D+(I^(M|~E))+T[9]+3951481745&4294967295,_.g[0]=_.g[0]+E&4294967295,_.g[1]=_.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,_.g[2]=_.g[2]+M&4294967295,_.g[3]=_.g[3]+I&4294967295}n.prototype.v=function(_,E){E===void 0&&(E=_.length);const D=E-this.blockSize,T=this.C;let M=this.h,I=0;for(;I<E;){if(M==0)for(;I<=D;)a(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<E;)if(T[M++]=_.charCodeAt(I++),M==this.blockSize){a(this,T),M=0;break}}else for(;I<E;)if(T[M++]=_[I++],M==this.blockSize){a(this,T),M=0;break}}this.h=M,this.o+=E},n.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var E=1;E<_.length-8;++E)_[E]=0;E=this.o*8;for(var D=_.length-8;D<_.length;++D)_[D]=E&255,E/=256;for(this.v(_),_=Array(16),E=0,D=0;D<4;++D)for(let T=0;T<32;T+=8)_[E++]=this.g[D]>>>T&255;return _};function i(_,E){var D=u;return Object.prototype.hasOwnProperty.call(D,_)?D[_]:D[_]=E(_)}function s(_,E){this.h=E;const D=[];let T=!0;for(let M=_.length-1;M>=0;M--){const I=_[M]|0;T&&I==E||(D[M]=I,T=!1)}this.g=D}var u={};function l(_){return-128<=_&&_<128?i(_,function(E){return new s([E|0],E<0?-1:0)}):new s([_|0],_<0?-1:0)}function o(_){if(isNaN(_)||!isFinite(_))return d;if(_<0)return C(o(-_));const E=[];let D=1;for(let T=0;_>=D;T++)E[T]=_/D|0,D*=4294967296;return new s(E,0)}function c(_,E){if(_.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(_.charAt(0)=="-")return C(c(_.substring(1),E));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=o(Math.pow(E,8));let T=d;for(let I=0;I<_.length;I+=8){var M=Math.min(8,_.length-I);const P=parseInt(_.substring(I,I+M),E);M<8?(M=o(Math.pow(E,M)),T=T.j(M).add(o(P))):(T=T.j(D),T=T.add(o(P)))}return T}var d=l(0),m=l(1),h=l(16777216);t=s.prototype,t.m=function(){if(v(this))return-C(this).m();let _=0,E=1;for(let D=0;D<this.g.length;D++){const T=this.i(D);_+=(T>=0?T:4294967296+T)*E,E*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(p(this))return"0";if(v(this))return"-"+C(this).toString(_);const E=o(Math.pow(_,6));var D=this;let T="";for(;;){const M=g(D,E).g;D=N(D,M.j(E));let I=((D.g.length>0?D.g[0]:D.h)>>>0).toString(_);if(D=M,p(D))return I+T;for(;I.length<6;)I="0"+I;T=I+T}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function p(_){if(_.h!=0)return!1;for(let E=0;E<_.g.length;E++)if(_.g[E]!=0)return!1;return!0}function v(_){return _.h==-1}t.l=function(_){return _=N(this,_),v(_)?-1:p(_)?0:1};function C(_){const E=_.g.length,D=[];for(let T=0;T<E;T++)D[T]=~_.g[T];return new s(D,~_.h).add(m)}t.abs=function(){return v(this)?C(this):this},t.add=function(_){const E=Math.max(this.g.length,_.g.length),D=[];let T=0;for(let M=0;M<=E;M++){let I=T+(this.i(M)&65535)+(_.i(M)&65535),P=(I>>>16)+(this.i(M)>>>16)+(_.i(M)>>>16);T=P>>>16,I&=65535,P&=65535,D[M]=P<<16|I}return new s(D,D[D.length-1]&-2147483648?-1:0)};function N(_,E){return _.add(C(E))}t.j=function(_){if(p(this)||p(_))return d;if(v(this))return v(_)?C(this).j(C(_)):C(C(this).j(_));if(v(_))return C(this.j(C(_)));if(this.l(h)<0&&_.l(h)<0)return o(this.m()*_.m());const E=this.g.length+_.g.length,D=[];for(var T=0;T<2*E;T++)D[T]=0;for(T=0;T<this.g.length;T++)for(let M=0;M<_.g.length;M++){const I=this.i(T)>>>16,P=this.i(T)&65535,B=_.i(M)>>>16,$=_.i(M)&65535;D[2*T+2*M]+=P*$,A(D,2*T+2*M),D[2*T+2*M+1]+=I*$,A(D,2*T+2*M+1),D[2*T+2*M+1]+=P*B,A(D,2*T+2*M+1),D[2*T+2*M+2]+=I*B,A(D,2*T+2*M+2)}for(_=0;_<E;_++)D[_]=D[2*_+1]<<16|D[2*_];for(_=E;_<2*E;_++)D[_]=0;return new s(D,0)};function A(_,E){for(;(_[E]&65535)!=_[E];)_[E+1]+=_[E]>>>16,_[E]&=65535,E++}function b(_,E){this.g=_,this.h=E}function g(_,E){if(p(E))throw Error("division by zero");if(p(_))return new b(d,d);if(v(_))return E=g(C(_),E),new b(C(E.g),C(E.h));if(v(E))return E=g(_,C(E)),new b(C(E.g),E.h);if(_.g.length>30){if(v(_)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var D=m,T=E;T.l(_)<=0;)D=w(D),T=w(T);var M=x(D,1),I=x(T,1);for(T=x(T,2),D=x(D,2);!p(T);){var P=I.add(T);P.l(_)<=0&&(M=M.add(D),I=P),T=x(T,1),D=x(D,1)}return E=N(_,M.j(E)),new b(M,E)}for(M=d;_.l(E)>=0;){for(D=Math.max(1,Math.floor(_.m()/E.m())),T=Math.ceil(Math.log(D)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),I=o(D),P=I.j(E);v(P)||P.l(_)>0;)D-=T,I=o(D),P=I.j(E);p(I)&&(I=m),M=M.add(I),_=N(_,P)}return new b(M,_)}t.B=function(_){return g(this,_).h},t.and=function(_){const E=Math.max(this.g.length,_.g.length),D=[];for(let T=0;T<E;T++)D[T]=this.i(T)&_.i(T);return new s(D,this.h&_.h)},t.or=function(_){const E=Math.max(this.g.length,_.g.length),D=[];for(let T=0;T<E;T++)D[T]=this.i(T)|_.i(T);return new s(D,this.h|_.h)},t.xor=function(_){const E=Math.max(this.g.length,_.g.length),D=[];for(let T=0;T<E;T++)D[T]=this.i(T)^_.i(T);return new s(D,this.h^_.h)};function w(_){const E=_.g.length+1,D=[];for(let T=0;T<E;T++)D[T]=_.i(T)<<1|_.i(T-1)>>>31;return new s(D,_.h)}function x(_,E){const D=E>>5;E%=32;const T=_.g.length-D,M=[];for(let I=0;I<T;I++)M[I]=E>0?_.i(I+D)>>>E|_.i(I+D+1)<<32-E:_.i(I+D);return new s(M,_.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,QC=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=o,s.fromString=c,os=s}).apply(typeof Bw<"u"?Bw:typeof self<"u"?self:typeof window<"u"?window:{});var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XC,Ul,KC,Id,ag,JC,YC,ZC;(function(){var t,e=Object.defineProperty;function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wf=="object"&&Wf];for(var F=0;F<S.length;++F){var j=S[F];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=r(this);function a(S,F){if(F)e:{var j=n;S=S.split(".");for(var X=0;X<S.length-1;X++){var me=S[X];if(!(me in j))break e;j=j[me]}S=S[S.length-1],X=j[S],F=F(X),F!=X&&F!=null&&e(j,S,{configurable:!0,writable:!0,value:F})}}a("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(S){return S||function(F){var j=[],X;for(X in F)Object.prototype.hasOwnProperty.call(F,X)&&j.push([X,F[X]]);return j}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},s=this||self;function u(S){var F=typeof S;return F=="object"&&S!=null||F=="function"}function l(S,F,j){return S.call.apply(S.bind,arguments)}function o(S,F,j){return o=l,o.apply(null,arguments)}function c(S,F){var j=Array.prototype.slice.call(arguments,1);return function(){var X=j.slice();return X.push.apply(X,arguments),S.apply(this,X)}}function d(S,F){function j(){}j.prototype=F.prototype,S.Z=F.prototype,S.prototype=new j,S.prototype.constructor=S,S.Ob=function(X,me,ye){for(var je=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)je[xt-2]=arguments[xt];return F.prototype[me].apply(X,je)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function h(S){const F=S.length;if(F>0){const j=Array(F);for(let X=0;X<F;X++)j[X]=S[X];return j}return[]}function p(S,F){for(let X=1;X<arguments.length;X++){const me=arguments[X];var j=typeof me;if(j=j!="object"?j:me?Array.isArray(me)?"array":j:"null",j=="array"||j=="object"&&typeof me.length=="number"){j=S.length||0;const ye=me.length||0;S.length=j+ye;for(let je=0;je<ye;je++)S[j+je]=me[je]}else S.push(me)}}class v{constructor(F,j){this.i=F,this.j=j,this.h=0,this.g=null}get(){let F;return this.h>0?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function C(S){s.setTimeout(()=>{throw S},0)}function N(){var S=_;let F=null;return S.g&&(F=S.g,S.g=S.g.next,S.g||(S.h=null),F.next=null),F}class A{constructor(){this.h=this.g=null}add(F,j){const X=b.get();X.set(F,j),this.h?this.h.next=X:this.g=X,this.h=X}}var b=new v(()=>new g,S=>S.reset());class g{constructor(){this.next=this.g=this.h=null}set(F,j){this.h=F,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let w,x=!1,_=new A,E=()=>{const S=Promise.resolve(void 0);w=()=>{S.then(D)}};function D(){for(var S;S=N();){try{S.h.call(S.g)}catch(j){C(j)}var F=b;F.j(S),F.h<100&&(F.h++,S.next=F.g,F.g=S)}x=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(S,F){this.type=S,this.g=this.target=F,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var S=!1,F=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const j=()=>{};s.addEventListener("test",j,F),s.removeEventListener("test",j,F)}catch{}return S}();function P(S){return/^[\s\xa0]*$/.test(S)}function B(S,F){M.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,F)}d(B,M),B.prototype.init=function(S,F){const j=this.type=S.type,X=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=F,F=S.relatedTarget,F||(j=="mouseover"?F=S.fromElement:j=="mouseout"&&(F=S.toElement)),this.relatedTarget=F,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var $="closure_listenable_"+(Math.random()*1e6|0),R=0;function G(S,F,j,X,me){this.listener=S,this.proxy=null,this.src=F,this.type=j,this.capture=!!X,this.ha=me,this.key=++R,this.da=this.fa=!1}function L(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function H(S,F,j){for(const X in S)F.call(j,S[X],X,S)}function Z(S,F){for(const j in S)F.call(void 0,S[j],j,S)}function ie(S){const F={};for(const j in S)F[j]=S[j];return F}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(S,F){let j,X;for(let me=1;me<arguments.length;me++){X=arguments[me];for(j in X)S[j]=X[j];for(let ye=0;ye<k.length;ye++)j=k[ye],Object.prototype.hasOwnProperty.call(X,j)&&(S[j]=X[j])}}function V(S){this.src=S,this.g={},this.h=0}V.prototype.add=function(S,F,j,X,me){const ye=S.toString();S=this.g[ye],S||(S=this.g[ye]=[],this.h++);const je=le(S,F,X,me);return je>-1?(F=S[je],j||(F.fa=!1)):(F=new G(F,this.src,ye,!!X,me),F.fa=j,S.push(F)),F};function xe(S,F){const j=F.type;if(j in S.g){var X=S.g[j],me=Array.prototype.indexOf.call(X,F,void 0),ye;(ye=me>=0)&&Array.prototype.splice.call(X,me,1),ye&&(L(F),S.g[j].length==0&&(delete S.g[j],S.h--))}}function le(S,F,j,X){for(let me=0;me<S.length;++me){const ye=S[me];if(!ye.da&&ye.listener==F&&ye.capture==!!j&&ye.ha==X)return me}return-1}var de="closure_lm_"+(Math.random()*1e6|0),Q={};function K(S,F,j,X,me){if(Array.isArray(F)){for(let ye=0;ye<F.length;ye++)K(S,F[ye],j,X,me);return null}return j=Be(j),S&&S[$]?S.J(F,j,u(X)?!!X.capture:!1,me):te(S,F,j,!1,X,me)}function te(S,F,j,X,me,ye){if(!F)throw Error("Invalid event type");const je=u(me)?!!me.capture:!!me;let xt=$e(S);if(xt||(S[de]=xt=new V(S)),j=xt.add(F,j,X,je,ye),j.proxy)return j;if(X=se(),j.proxy=X,X.src=S,X.listener=j,S.addEventListener)I||(me=je),me===void 0&&(me=!1),S.addEventListener(F.toString(),X,me);else if(S.attachEvent)S.attachEvent(he(F.toString()),X);else if(S.addListener&&S.removeListener)S.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return j}function se(){function S(j){return F.call(S.src,S.listener,j)}const F=Me;return S}function ue(S,F,j,X,me){if(Array.isArray(F))for(var ye=0;ye<F.length;ye++)ue(S,F[ye],j,X,me);else X=u(X)?!!X.capture:!!X,j=Be(j),S&&S[$]?(S=S.i,ye=String(F).toString(),ye in S.g&&(F=S.g[ye],j=le(F,j,X,me),j>-1&&(L(F[j]),Array.prototype.splice.call(F,j,1),F.length==0&&(delete S.g[ye],S.h--)))):S&&(S=$e(S))&&(F=S.g[F.toString()],S=-1,F&&(S=le(F,j,X,me)),(j=S>-1?F[S]:null)&&ve(j))}function ve(S){if(typeof S!="number"&&S&&!S.da){var F=S.src;if(F&&F[$])xe(F.i,S);else{var j=S.type,X=S.proxy;F.removeEventListener?F.removeEventListener(j,X,S.capture):F.detachEvent?F.detachEvent(he(j),X):F.addListener&&F.removeListener&&F.removeListener(X),(j=$e(F))?(xe(j,S),j.h==0&&(j.src=null,F[de]=null)):L(S)}}}function he(S){return S in Q?Q[S]:Q[S]="on"+S}function Me(S,F){if(S.da)S=!0;else{F=new B(F,this);const j=S.listener,X=S.ha||S.src;S.fa&&ve(S),S=j.call(X,F)}return S}function $e(S){return S=S[de],S instanceof V?S:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(S){return typeof S=="function"?S:(S[Ve]||(S[Ve]=function(F){return S.handleEvent(F)}),S[Ve])}function Le(){T.call(this),this.i=new V(this),this.M=this,this.G=null}d(Le,T),Le.prototype[$]=!0,Le.prototype.removeEventListener=function(S,F,j,X){ue(this,S,F,j,X)};function W(S,F){var j,X=S.G;if(X)for(j=[];X;X=X.G)j.push(X);if(S=S.M,X=F.type||F,typeof F=="string")F=new M(F,S);else if(F instanceof M)F.target=F.target||S;else{var me=F;F=new M(X,S),Y(F,me)}me=!0;let ye,je;if(j)for(je=j.length-1;je>=0;je--)ye=F.g=j[je],me=re(ye,X,!0,F)&&me;if(ye=F.g=S,me=re(ye,X,!0,F)&&me,me=re(ye,X,!1,F)&&me,j)for(je=0;je<j.length;je++)ye=F.g=j[je],me=re(ye,X,!1,F)&&me}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var S=this.i;for(const F in S.g){const j=S.g[F];for(let X=0;X<j.length;X++)L(j[X]);delete S.g[F],S.h--}}this.G=null},Le.prototype.J=function(S,F,j,X){return this.i.add(String(S),F,!1,j,X)},Le.prototype.K=function(S,F,j,X){return this.i.add(String(S),F,!0,j,X)};function re(S,F,j,X){if(F=S.i.g[String(F)],!F)return!0;F=F.concat();let me=!0;for(let ye=0;ye<F.length;++ye){const je=F[ye];if(je&&!je.da&&je.capture==j){const xt=je.listener,Fr=je.ha||je.src;je.fa&&xe(S.i,je),me=xt.call(Fr,X)!==!1&&me}}return me&&!X.defaultPrevented}function fe(S,F){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=o(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(F)>2147483647?-1:s.setTimeout(S,F||0)}function z(S){S.g=fe(()=>{S.g=null,S.i&&(S.i=!1,z(S))},S.l);const F=S.h;S.h=null,S.m.apply(null,F)}class J extends T{constructor(F,j){super(),this.m=F,this.l=j,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:z(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(S){T.call(this),this.h=S,this.g={}}d(ne,T);var oe=[];function ce(S){H(S.g,function(F,j){this.g.hasOwnProperty(j)&&ve(F)},S),S.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ce(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=s.JSON.stringify,Ee=s.JSON.parse,Ae=class{stringify(S){return s.JSON.stringify(S,void 0)}parse(S){return s.JSON.parse(S,void 0)}};function Ie(){}function De(){}var pt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yt(){M.call(this,"d")}d(yt,M);function qt(){M.call(this,"c")}d(qt,M);var et={},lr=null;function O(){return lr=lr||new Le}et.Ia="serverreachability";function ae(S){M.call(this,et.Ia,S)}d(ae,M);function pe(S){const F=O();W(F,new ae(F))}et.STAT_EVENT="statevent";function Ce(S,F){M.call(this,et.STAT_EVENT,S),this.stat=F}d(Ce,M);function We(S){const F=O();W(F,new Ce(F,S))}et.Ja="timingevent";function mt(S,F){M.call(this,et.Ja,S),this.size=F}d(mt,M);function Pr(S,F){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){S()},F)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function Jh(S,F,j,X,me,ye){S.info(function(){if(S.g)if(ye){var je="",xt=ye.split("&");for(let tr=0;tr<xt.length;tr++){var Fr=xt[tr].split("=");if(Fr.length>1){const Vr=Fr[0];Fr=Fr[1];const La=Vr.split("_");je=La.length>=2&&La[1]=="type"?je+(Vr+"="+Fr+"&"):je+(Vr+"=redacted&")}}}else je=null;else je=ye;return"XMLHTTP REQ ("+X+") [attempt "+me+"]: "+F+`
`+j+`
`+je})}function Yh(S,F,j,X,me,ye,je){S.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+me+"]: "+F+`
`+j+`
`+ye+" "+je})}function Ti(S,F,j,X){S.info(function(){return"XMLHTTP TEXT ("+F+"): "+ep(S,j)+(X?" "+X:"")})}function Zh(S,F){S.info(function(){return"TIMEOUT: "+F})}ii.prototype.info=function(){};function ep(S,F){if(!S.g)return F;if(!F)return null;try{const ye=JSON.parse(F);if(ye){for(S=0;S<ye.length;S++)if(Array.isArray(ye[S])){var j=ye[S];if(!(j.length<2)){var X=j[1];if(Array.isArray(X)&&!(X.length<1)){var me=X[0];if(me!="noop"&&me!="stop"&&me!="close")for(let je=1;je<X.length;je++)X[je]=""}}}}return ge(ye)}catch{return F}}var Bo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pf;function pl(){}d(pl,Ie),pl.prototype.g=function(){return new XMLHttpRequest},pf=new pl;function js(S){return encodeURIComponent(String(S))}function tp(S){var F=1;S=S.split(":");const j=[];for(;F>0&&S.length;)j.push(S.shift()),F--;return S.length&&j.push(S.join(":")),j}function ka(S,F,j,X){this.j=S,this.i=F,this.l=j,this.S=X||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vf}function vf(){this.i=null,this.g="",this.h=!1}var gf={},vl={};function gl(S,F,j){S.M=1,S.A=Nf($a(F)),S.u=j,S.R=!0,yf(S,null)}function yf(S,F){S.F=Date.now(),jo(S),S.B=$a(S.A);var j=S.B,X=S.S;Array.isArray(X)||(X=[String(X)]),L1(j.i,"t",X),S.C=0,j=S.j.L,S.h=new vf,S.g=ab(S.j,j?F:null,!S.u),S.P>0&&(S.O=new J(o(S.Y,S,S.g),S.P)),F=S.V,j=S.g,X=S.ba;var me="readystatechange";Array.isArray(me)||(me&&(oe[0]=me.toString()),me=oe);for(let ye=0;ye<me.length;ye++){const je=K(j,me[ye],X||F.handleEvent,!1,F.h||F);if(!je)break;F.g[je.key]=je}F=S.J?ie(S.J):{},S.u?(S.v||(S.v="POST"),F["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,F)):(S.v="GET",S.g.ea(S.B,S.v,null,F)),pe(),Jh(S.i,S.v,S.B,S.l,S.S,S.u)}ka.prototype.ba=function(S){S=S.target;const F=this.O;F&&Fi(S)==3?F.j():this.Y(S)},ka.prototype.Y=function(S){try{if(S==this.g)e:{const xt=Fi(this.g),Fr=this.g.ya(),tr=this.g.ca();if(!(xt<3)&&(xt!=3||this.g&&(this.h.h||this.g.la()||W1(this.g)))){this.K||xt!=4||Fr==7||(Fr==8||tr<=0?pe(3):pe(2)),yl(this);var F=this.g.ca();this.X=F;var j=rp(this);if(this.o=F==200,Yh(this.i,this.v,this.B,this.l,this.S,xt,F),this.o){if(this.U&&!this.L){t:{if(this.g){var X,me=this.g;if((X=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(X)){var ye=X;break t}}ye=null}if(S=ye)Ti(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vt(this,S);else{this.o=!1,this.m=3,We(12),qn(this),ks(this);break e}}if(this.R){S=!0;let Vr;for(;!this.K&&this.C<j.length;)if(Vr=np(this,j),Vr==vl){xt==4&&(this.m=4,We(14),S=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Vr==gf){this.m=4,We(15),Ti(this.i,this.l,j,"[Invalid Chunk]"),S=!1;break}else Ti(this.i,this.l,Vr,null),Vt(this,Vr);if(xf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||j.length!=0||this.h.h||(this.m=1,We(16),S=!1),this.o=this.o&&S,!S)Ti(this.i,this.l,j,"[Invalid Chunked Response]"),qn(this),ks(this);else if(j.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),cp(je),je.P=!0,We(11))}}else Ti(this.i,this.l,j,null),Vt(this,j);xt==4&&qn(this),this.o&&!this.K&&(xt==4?eb(this.j,this):(this.o=!1,jo(this)))}else nF(this.g),F==400&&j.indexOf("Unknown SID")>0?(this.m=3,We(12)):(this.m=0,We(13)),qn(this),ks(this)}}}catch{}finally{}};function rp(S){if(!xf(S))return S.g.la();const F=W1(S.g);if(F==="")return"";let j="";const X=F.length,me=Fi(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return qn(S),ks(S),"";S.h.i=new s.TextDecoder}for(let ye=0;ye<X;ye++)S.h.h=!0,j+=S.h.i.decode(F[ye],{stream:!(me&&ye==X-1)});return F.length=0,S.h.g+=j,S.C=0,S.h.g}function xf(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function np(S,F){var j=S.C,X=F.indexOf(`
`,j);return X==-1?vl:(j=Number(F.substring(j,X)),isNaN(j)?gf:(X+=1,X+j>F.length?vl:(F=F.slice(X,X+j),S.C=X+j,F)))}ka.prototype.cancel=function(){this.K=!0,qn(this)};function jo(S){S.T=Date.now()+S.H,bf(S,S.H)}function bf(S,F){if(S.D!=null)throw Error("WatchDog timer not null");S.D=Pr(o(S.aa,S),F)}function yl(S){S.D&&(s.clearTimeout(S.D),S.D=null)}ka.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(Zh(this.i,this.B),this.M!=2&&(pe(),We(17)),qn(this),this.m=2,ks(this)):bf(this,this.T-S)};function ks(S){S.j.I==0||S.K||eb(S.j,S)}function qn(S){yl(S);var F=S.O;F&&typeof F.dispose=="function"&&F.dispose(),S.O=null,ce(S.V),S.g&&(F=S.g,S.g=null,F.abort(),F.dispose())}function Vt(S,F){try{var j=S.j;if(j.I!=0&&(j.g==S||xl(j.h,S))){if(!S.L&&xl(j.h,S)&&j.I==3){try{var X=j.Ba.g.parse(F)}catch{X=null}if(Array.isArray(X)&&X.length==3){var me=X;if(me[0]==0){e:if(!j.v){if(j.g)if(j.g.F+3e3<S.F)Df(j),Sf(j);else break e;lp(j),We(18)}}else j.xa=me[1],0<j.xa-j.K&&me[2]<37500&&j.F&&j.A==0&&!j.C&&(j.C=Pr(o(j.Va,j),6e3));Mi(j.h)<=1&&j.ta&&(j.ta=void 0)}else zs(j,11)}else if((S.L||j.g==S)&&Df(j),!P(F))for(me=j.Ba.g.parse(F),F=0;F<me.length;F++){let tr=me[F];const Vr=tr[0];if(!(Vr<=j.K))if(j.K=Vr,tr=tr[1],j.I==2)if(tr[0]=="c"){j.M=tr[1],j.ba=tr[2];const La=tr[3];La!=null&&(j.ka=La,j.j.info("VER="+j.ka));const Vs=tr[4];Vs!=null&&(j.za=Vs,j.j.info("SVER="+j.za));const Ri=tr[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(X=1.5*Ri,j.O=X,j.j.info("backChannelRequestTimeoutMs_="+X)),X=j;const Oi=S.g;if(Oi){const Tf=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tf){var ye=X.h;ye.g||Tf.indexOf("spdy")==-1&&Tf.indexOf("quic")==-1&&Tf.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(ap(ye,ye.h),ye.h=null))}if(X.G){const fp=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;fp&&(X.wa=fp,ir(X.J,X.G,fp))}}j.I=3,j.l&&j.l.ra(),j.aa&&(j.T=Date.now()-S.F,j.j.info("Handshake RTT: "+j.T+"ms")),X=j;var je=S;if(X.na=nb(X,X.L?X.ba:null,X.W),je.L){F1(X.h,je);var xt=je,Fr=X.O;Fr&&(xt.H=Fr),xt.D&&(yl(xt),jo(xt)),X.g=je}else Y1(X);j.i.length>0&&Af(j)}else tr[0]!="stop"&&tr[0]!="close"||zs(j,7);else j.I==3&&(tr[0]=="stop"||tr[0]=="close"?tr[0]=="stop"?zs(j,7):up(j):tr[0]!="noop"&&j.l&&j.l.qa(tr),j.A=0)}}pe(4)}catch{}}var ln=class{constructor(S,F){this.g=S,this.map=F}};function wf(S){this.l=S||10,s.PerformanceNavigationTiming?(S=s.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $s(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Mi(S){return S.h?1:S.g?S.g.size:0}function xl(S,F){return S.h?S.h==F:S.g?S.g.has(F):!1}function ap(S,F){S.g?S.g.add(F):S.h=F}function F1(S,F){S.h&&S.h==F?S.h=null:S.g&&S.g.has(F)&&S.g.delete(F)}wf.prototype.cancel=function(){if(this.i=R1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function R1(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let F=S.i;for(const j of S.g.values())F=F.concat(j.G);return F}return h(S.i)}var O1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HP(S,F){if(S){S=S.split("&");for(let j=0;j<S.length;j++){const X=S[j].indexOf("=");let me,ye=null;X>=0?(me=S[j].substring(0,X),ye=S[j].substring(X+1)):me=S[j],F(me,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Ii(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let F;S instanceof Ii?(this.l=S.l,bl(this,S.j),this.o=S.o,this.g=S.g,wl(this,S.u),this.h=S.h,ip(this,z1(S.i)),this.m=S.m):S&&(F=String(S).match(O1))?(this.l=!1,bl(this,F[1]||"",!0),this.o=Nl(F[2]||""),this.g=Nl(F[3]||"",!0),wl(this,F[4]),this.h=Nl(F[5]||"",!0),ip(this,F[6]||"",!0),this.m=Nl(F[7]||"")):(this.l=!1,this.i=new El(null,this.l))}Ii.prototype.toString=function(){const S=[];var F=this.j;F&&S.push(_l(F,B1,!0),":");var j=this.g;return(j||F=="file")&&(S.push("//"),(F=this.o)&&S.push(_l(F,B1,!0),"@"),S.push(js(j).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.u,j!=null&&S.push(":",String(j))),(j=this.h)&&(this.g&&j.charAt(0)!="/"&&S.push("/"),S.push(_l(j,j.charAt(0)=="/"?QP:WP,!0))),(j=this.i.toString())&&S.push("?",j),(j=this.m)&&S.push("#",_l(j,KP)),S.join("")},Ii.prototype.resolve=function(S){const F=$a(this);let j=!!S.j;j?bl(F,S.j):j=!!S.o,j?F.o=S.o:j=!!S.g,j?F.g=S.g:j=S.u!=null;var X=S.h;if(j)wl(F,S.u);else if(j=!!S.h){if(X.charAt(0)!="/")if(this.g&&!this.h)X="/"+X;else{var me=F.h.lastIndexOf("/");me!=-1&&(X=F.h.slice(0,me+1)+X)}if(me=X,me==".."||me==".")X="";else if(me.indexOf("./")!=-1||me.indexOf("/.")!=-1){X=me.lastIndexOf("/",0)==0,me=me.split("/");const ye=[];for(let je=0;je<me.length;){const xt=me[je++];xt=="."?X&&je==me.length&&ye.push(""):xt==".."?((ye.length>1||ye.length==1&&ye[0]!="")&&ye.pop(),X&&je==me.length&&ye.push("")):(ye.push(xt),X=!0)}X=ye.join("/")}else X=me}return j?F.h=X:j=S.i.toString()!=="",j?ip(F,z1(S.i)):j=!!S.m,j&&(F.m=S.m),F};function $a(S){return new Ii(S)}function bl(S,F,j){S.j=j?Nl(F,!0):F,S.j&&(S.j=S.j.replace(/:$/,""))}function wl(S,F){if(F){if(F=Number(F),isNaN(F)||F<0)throw Error("Bad port number "+F);S.u=F}else S.u=null}function ip(S,F,j){F instanceof El?(S.i=F,JP(S.i,S.l)):(j||(F=_l(F,XP)),S.i=new El(F,S.l))}function ir(S,F,j){S.i.set(F,j)}function Nf(S){return ir(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function Nl(S,F){return S?F?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function _l(S,F,j){return typeof S=="string"?(S=encodeURI(S).replace(F,GP),j&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function GP(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var B1=/[#\/\?@]/g,WP=/[#\?:]/g,QP=/[#\?]/g,XP=/[#\?@]/g,KP=/#/g;function El(S,F){this.h=this.g=null,this.i=S||null,this.j=!!F}function Ls(S){S.g||(S.g=new Map,S.h=0,S.i&&HP(S.i,function(F,j){S.add(decodeURIComponent(F.replace(/\+/g," ")),j)}))}t=El.prototype,t.add=function(S,F){Ls(this),this.i=null,S=ko(this,S);let j=this.g.get(S);return j||this.g.set(S,j=[]),j.push(F),this.h+=1,this};function j1(S,F){Ls(S),F=ko(S,F),S.g.has(F)&&(S.i=null,S.h-=S.g.get(F).length,S.g.delete(F))}function k1(S,F){return Ls(S),F=ko(S,F),S.g.has(F)}t.forEach=function(S,F){Ls(this),this.g.forEach(function(j,X){j.forEach(function(me){S.call(F,me,X,this)},this)},this)};function $1(S,F){Ls(S);let j=[];if(typeof F=="string")k1(S,F)&&(j=j.concat(S.g.get(ko(S,F))));else for(S=Array.from(S.g.values()),F=0;F<S.length;F++)j=j.concat(S[F]);return j}t.set=function(S,F){return Ls(this),this.i=null,S=ko(this,S),k1(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[F]),this.h+=1,this},t.get=function(S,F){return S?(S=$1(this,S),S.length>0?String(S[0]):F):F};function L1(S,F,j){j1(S,F),j.length>0&&(S.i=null,S.g.set(ko(S,F),h(j)),S.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],F=Array.from(this.g.keys());for(let X=0;X<F.length;X++){var j=F[X];const me=js(j);j=$1(this,j);for(let ye=0;ye<j.length;ye++){let je=me;j[ye]!==""&&(je+="="+js(j[ye])),S.push(je)}}return this.i=S.join("&")};function z1(S){const F=new El;return F.i=S.i,S.g&&(F.g=new Map(S.g),F.h=S.h),F}function ko(S,F){return F=String(F),S.j&&(F=F.toLowerCase()),F}function JP(S,F){F&&!S.j&&(Ls(S),S.i=null,S.g.forEach(function(j,X){const me=X.toLowerCase();X!=me&&(j1(this,X),L1(this,me,j))},S)),S.j=F}function YP(S,F){const j=new ii;if(s.Image){const X=new Image;X.onload=c(Pi,j,"TestLoadImage: loaded",!0,F,X),X.onerror=c(Pi,j,"TestLoadImage: error",!1,F,X),X.onabort=c(Pi,j,"TestLoadImage: abort",!1,F,X),X.ontimeout=c(Pi,j,"TestLoadImage: timeout",!1,F,X),s.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=S}else F(!1)}function ZP(S,F){const j=new ii,X=new AbortController,me=setTimeout(()=>{X.abort(),Pi(j,"TestPingServer: timeout",!1,F)},1e4);fetch(S,{signal:X.signal}).then(ye=>{clearTimeout(me),ye.ok?Pi(j,"TestPingServer: ok",!0,F):Pi(j,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(me),Pi(j,"TestPingServer: error",!1,F)})}function Pi(S,F,j,X,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),X(j)}catch{}}function eF(){this.g=new Ae}function sp(S){this.i=S.Sb||null,this.h=S.ab||!1}d(sp,Ie),sp.prototype.g=function(){return new _f(this.i,this.h)};function _f(S,F){Le.call(this),this.H=S,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(_f,Le),t=_f.prototype,t.open=function(S,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=F,this.readyState=1,Al(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const F={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(F.body=S),(this.H||s).fetch(new Request(this.D,F)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sl(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Al(this)),this.g&&(this.readyState=3,Al(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;V1(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function V1(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var F=S.value?S.value:new Uint8Array(0);(F=this.B.decode(F,{stream:!S.done}))&&(this.response=this.responseText+=F)}S.done?Sl(this):Al(this),this.readyState==3&&V1(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Sl(this))},t.Na=function(S){this.g&&(this.response=S,Sl(this))},t.ga=function(){this.g&&Sl(this)};function Sl(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Al(S)}t.setRequestHeader=function(S,F){this.A.append(S,F)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],F=this.h.entries();for(var j=F.next();!j.done;)j=j.value,S.push(j[0]+": "+j[1]),j=F.next();return S.join(`\r
`)};function Al(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(_f.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function U1(S){let F="";return H(S,function(j,X){F+=X,F+=":",F+=j,F+=`\r
`}),F}function op(S,F,j){e:{for(X in j){var X=!1;break e}X=!0}X||(j=U1(j),typeof S=="string"?j!=null&&js(j):ir(S,F,j))}function gr(S){Le.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(gr,Le);var tF=/^https?$/i,rF=["POST","PUT"];t=gr.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,F,j,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);F=F?F.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pf.g(),this.g.onreadystatechange=m(o(this.Ca,this));try{this.B=!0,this.g.open(F,String(S),!0),this.B=!1}catch(ye){q1(this,ye);return}if(S=j||"",j=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var me in X)j.set(me,X[me]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const ye of X.keys())j.set(ye,X.get(ye));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(j.keys()).find(ye=>ye.toLowerCase()=="content-type"),me=s.FormData&&S instanceof s.FormData,!(Array.prototype.indexOf.call(rF,F,void 0)>=0)||X||me||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,je]of j)this.g.setRequestHeader(ye,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(ye){q1(this,ye)}};function q1(S,F){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=F,S.o=5,H1(S),Ef(S)}function H1(S){S.A||(S.A=!0,W(S,"complete"),W(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,W(this,"complete"),W(this,"abort"),Ef(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ef(this,!0)),gr.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?G1(this):this.Xa())},t.Xa=function(){G1(this)};function G1(S){if(S.h&&typeof i<"u"){if(S.v&&Fi(S)==4)setTimeout(S.Ca.bind(S),0);else if(W(S,"readystatechange"),Fi(S)==4){S.h=!1;try{const ye=S.ca();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var j;if(!(j=F)){var X;if(X=ye===0){let je=String(S.D).match(O1)[1]||null;!je&&s.self&&s.self.location&&(je=s.self.location.protocol.slice(0,-1)),X=!tF.test(je?je.toLowerCase():"")}j=X}if(j)W(S,"complete"),W(S,"success");else{S.o=6;try{var me=Fi(S)>2?S.g.statusText:""}catch{me=""}S.l=me+" ["+S.ca()+"]",H1(S)}}finally{Ef(S)}}}}function Ef(S,F){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const j=S.g;S.g=null,F||W(S,"ready");try{j.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fi(S){return S.g?S.g.readyState:0}t.ca=function(){try{return Fi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var F=this.g.responseText;return S&&F.indexOf(S)==0&&(F=F.substring(S.length)),Ee(F)}};function W1(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function nF(S){const F={};S=(S.g&&Fi(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<S.length;X++){if(P(S[X]))continue;var j=tp(S[X]);const me=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ye=F[me]||[];F[me]=ye,ye.push(j)}Z(F,function(X){return X.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dl(S,F,j){return j&&j.internalChannelParams&&j.internalChannelParams[S]||F}function Q1(S){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dl("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dl("baseRetryDelayMs",5e3,S),this.Za=Dl("retryDelaySeedMs",1e4,S),this.Ta=Dl("forwardChannelMaxRetries",2,S),this.va=Dl("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new wf(S&&S.concurrentRequestLimit),this.Ba=new eF,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Q1.prototype,t.ka=8,t.I=1,t.connect=function(S,F,j,X){We(0),this.W=S,this.H=F||{},j&&X!==void 0&&(this.H.OSID=j,this.H.OAID=X),this.F=this.X,this.J=nb(this,null,this.W),Af(this)};function up(S){if(X1(S),S.I==3){var F=S.V++,j=$a(S.J);if(ir(j,"SID",S.M),ir(j,"RID",F),ir(j,"TYPE","terminate"),Cl(S,j),F=new ka(S,S.j,F),F.M=2,F.A=Nf($a(j)),j=!1,s.navigator&&s.navigator.sendBeacon)try{j=s.navigator.sendBeacon(F.A.toString(),"")}catch{}!j&&s.Image&&(new Image().src=F.A,j=!0),j||(F.g=ab(F.j,null),F.g.ea(F.A)),F.F=Date.now(),jo(F)}rb(S)}function Sf(S){S.g&&(cp(S),S.g.cancel(),S.g=null)}function X1(S){Sf(S),S.v&&(s.clearTimeout(S.v),S.v=null),Df(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&s.clearTimeout(S.m),S.m=null)}function Af(S){if(!$s(S.h)&&!S.m){S.m=!0;var F=S.Ea;w||E(),x||(w(),x=!0),_.add(F,S),S.D=0}}function aF(S,F){return Mi(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=F.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=Pr(o(S.Ea,S,F),tb(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const me=new ka(this,this.j,S);let ye=this.o;if(this.U&&(ye?(ye=ie(ye),Y(ye,this.U)):ye=this.U),this.u!==null||this.R||(me.J=ye,ye=null),this.S)e:{for(var F=0,j=0;j<this.i.length;j++){t:{var X=this.i[j];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(F+=X,F>4096){F=j;break e}if(F===4096||j===this.i.length-1){F=j+1;break e}}F=1e3}else F=1e3;F=J1(this,me,F),j=$a(this.J),ir(j,"RID",S),ir(j,"CVER",22),this.G&&ir(j,"X-HTTP-Session-Id",this.G),Cl(this,j),ye&&(this.R?F="headers="+js(U1(ye))+"&"+F:this.u&&op(j,this.u,ye)),ap(this.h,me),this.Ra&&ir(j,"TYPE","init"),this.S?(ir(j,"$req",F),ir(j,"SID","null"),me.U=!0,gl(me,j,null)):gl(me,j,F),this.I=2}}else this.I==3&&(S?K1(this,S):this.i.length==0||$s(this.h)||K1(this))};function K1(S,F){var j;F?j=F.l:j=S.V++;const X=$a(S.J);ir(X,"SID",S.M),ir(X,"RID",j),ir(X,"AID",S.K),Cl(S,X),S.u&&S.o&&op(X,S.u,S.o),j=new ka(S,S.j,j,S.D+1),S.u===null&&(j.J=S.o),F&&(S.i=F.G.concat(S.i)),F=J1(S,j,1e3),j.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),ap(S.h,j),gl(j,X,F)}function Cl(S,F){S.H&&H(S.H,function(j,X){ir(F,X,j)}),S.l&&H({},function(j,X){ir(F,X,j)})}function J1(S,F,j){j=Math.min(S.i.length,j);const X=S.l?o(S.l.Ka,S.l,S):null;e:{var me=S.i;let xt=-1;for(;;){const Fr=["count="+j];xt==-1?j>0?(xt=me[0].g,Fr.push("ofs="+xt)):xt=0:Fr.push("ofs="+xt);let tr=!0;for(let Vr=0;Vr<j;Vr++){var ye=me[Vr].g;const La=me[Vr].map;if(ye-=xt,ye<0)xt=Math.max(0,me[Vr].g-100),tr=!1;else try{ye="req"+ye+"_"||"";try{var je=La instanceof Map?La:Object.entries(La);for(const[Vs,Ri]of je){let Oi=Ri;u(Ri)&&(Oi=ge(Ri)),Fr.push(ye+Vs+"="+encodeURIComponent(Oi))}}catch(Vs){throw Fr.push(ye+"type="+encodeURIComponent("_badmap")),Vs}}catch{X&&X(La)}}if(tr){je=Fr.join("&");break e}}je=void 0}return S=S.i.splice(0,j),F.G=S,je}function Y1(S){if(!S.g&&!S.v){S.Y=1;var F=S.Da;w||E(),x||(w(),x=!0),_.add(F,S),S.A=0}}function lp(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=Pr(o(S.Da,S),tb(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Z1(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=Pr(o(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,We(10),Sf(this),Z1(this))};function cp(S){S.B!=null&&(s.clearTimeout(S.B),S.B=null)}function Z1(S){S.g=new ka(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var F=$a(S.na);ir(F,"RID","rpc"),ir(F,"SID",S.M),ir(F,"AID",S.K),ir(F,"CI",S.F?"0":"1"),!S.F&&S.ia&&ir(F,"TO",S.ia),ir(F,"TYPE","xmlhttp"),Cl(S,F),S.u&&S.o&&op(F,S.u,S.o),S.O&&(S.g.H=S.O);var j=S.g;S=S.ba,j.M=1,j.A=Nf($a(F)),j.u=null,j.R=!0,yf(j,S)}t.Va=function(){this.C!=null&&(this.C=null,Sf(this),lp(this),We(19))};function Df(S){S.C!=null&&(s.clearTimeout(S.C),S.C=null)}function eb(S,F){var j=null;if(S.g==F){Df(S),cp(S),S.g=null;var X=2}else if(xl(S.h,F))j=F.G,F1(S.h,F),X=1;else return;if(S.I!=0){if(F.o)if(X==1){j=F.u?F.u.length:0,F=Date.now()-F.F;var me=S.D;X=O(),W(X,new mt(X,j)),Af(S)}else Y1(S);else if(me=F.m,me==3||me==0&&F.X>0||!(X==1&&aF(S,F)||X==2&&lp(S)))switch(j&&j.length>0&&(F=S.h,F.i=F.i.concat(j)),me){case 1:zs(S,5);break;case 4:zs(S,10);break;case 3:zs(S,6);break;default:zs(S,2)}}}function tb(S,F){let j=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(j*=2),j*F}function zs(S,F){if(S.j.info("Error code "+F),F==2){var j=o(S.bb,S),X=S.Ua;const me=!X;X=new Ii(X||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||bl(X,"https"),Nf(X),me?YP(X.toString(),j):ZP(X.toString(),j)}else We(2);S.I=0,S.l&&S.l.pa(F),rb(S),X1(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function rb(S){if(S.I=0,S.ja=[],S.l){const F=R1(S.h);(F.length!=0||S.i.length!=0)&&(p(S.ja,F),p(S.ja,S.i),S.h.i.length=0,h(S.i),S.i.length=0),S.l.oa()}}function nb(S,F,j){var X=j instanceof Ii?$a(j):new Ii(j);if(X.g!="")F&&(X.g=F+"."+X.g),wl(X,X.u);else{var me=s.location;X=me.protocol,F=F?F+"."+me.hostname:me.hostname,me=+me.port;const ye=new Ii(null);X&&bl(ye,X),F&&(ye.g=F),me&&wl(ye,me),j&&(ye.h=j),X=ye}return j=S.G,F=S.wa,j&&F&&ir(X,j,F),ir(X,"VER",S.ka),Cl(S,X),X}function ab(S,F,j){if(F&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return F=S.Aa&&!S.ma?new gr(new sp({ab:j})):new gr(S.ma),F.Fa(S.L),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ib(){}t=ib.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Cf(){}Cf.prototype.g=function(S,F){return new Hn(S,F)};function Hn(S,F){Le.call(this),this.g=new Q1(F),this.l=S,this.h=F&&F.messageUrlParams||null,S=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(S?S["X-WebChannel-Content-Type"]=F.messageContentType:S={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.sa&&(S?S["X-WebChannel-Client-Profile"]=F.sa:S={"X-WebChannel-Client-Profile":F.sa}),this.g.U=S,(S=F&&F.Qb)&&!P(S)&&(this.g.u=S),this.A=F&&F.supportsCrossDomainXhr||!1,this.v=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!P(F)&&(this.g.G=F,S=this.h,S!==null&&F in S&&(S=this.h,F in S&&delete S[F])),this.j=new $o(this)}d(Hn,Le),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){up(this.g)},Hn.prototype.o=function(S){var F=this.g;if(typeof S=="string"){var j={};j.__data__=S,S=j}else this.v&&(j={},j.__data__=ge(S),S=j);F.i.push(new ln(F.Ya++,S)),F.I==3&&Af(F)},Hn.prototype.N=function(){this.g.l=null,delete this.j,up(this.g),delete this.g,Hn.Z.N.call(this)};function sb(S){yt.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var F=S.__sm__;if(F){e:{for(const j in F){S=j;break e}S=void 0}(this.i=S)&&(S=this.i,F=F!==null&&S in F?F[S]:void 0),this.data=F}else this.data=S}d(sb,yt);function ob(){qt.call(this),this.status=1}d(ob,qt);function $o(S){this.g=S}d($o,ib),$o.prototype.ra=function(){W(this.g,"a")},$o.prototype.qa=function(S){W(this.g,new sb(S))},$o.prototype.pa=function(S){W(this.g,new ob)},$o.prototype.oa=function(){W(this.g,"b")},Cf.prototype.createWebChannel=Cf.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,ZC=function(){return new Cf},YC=function(){return O()},JC=et,ag={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,Id=Bo,hf.COMPLETE="complete",KC=hf,De.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",Le.prototype.listen=Le.prototype.J,Ul=De,gr.prototype.listenOnce=gr.prototype.K,gr.prototype.getLastError=gr.prototype.Ha,gr.prototype.getLastErrorCode=gr.prototype.ya,gr.prototype.getStatus=gr.prototype.ca,gr.prototype.getResponseJson=gr.prototype.La,gr.prototype.getResponseText=gr.prototype.la,gr.prototype.send=gr.prototype.ea,gr.prototype.setWithCredentials=gr.prototype.Fa,XC=gr}).apply(typeof Wf<"u"?Wf:typeof self<"u"?self:typeof window<"u"?window:{});const jw="@firebase/firestore",kw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new VC("@firebase/firestore");function Wo(){return lo.logLevel}function Ue(t,...e){if(lo.logLevel<=Ft.DEBUG){const r=e.map(q0);lo.debug(`Firestore (${Yu}): ${t}`,...r)}}function Ni(t,...e){if(lo.logLevel<=Ft.ERROR){const r=e.map(q0);lo.error(`Firestore (${Yu}): ${t}`,...r)}}function Fu(t,...e){if(lo.logLevel<=Ft.WARN){const r=e.map(q0);lo.warn(`Firestore (${Yu}): ${t}`,...r)}}function q0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,eT(t,n,r)}function eT(t,e,r){let n=`FIRESTORE (${Yu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Ni(n),new Error(n)}function Wt(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||eT(e,a,n)}function ft(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Ju{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(hn.UNAUTHENTICATED))}shutdown(){}}class S5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class A5{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Wt(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new us;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new us,e.enqueueRetryable(()=>a(this.currentUser))};const s=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},u=l=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new us)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Wt(typeof n.accessToken=="string",31837,{l:n}),new tT(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class D5{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class C5{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new D5(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $w{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T5{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,o5(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Wt(this.o===void 0,3512);const n=i=>{i.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,Ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const a=i=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $w(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Wt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new $w(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=M5(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%62))}return n}}function St(t,e){return t<e?-1:t>e?1:0}function ig(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),i=e.charAt(n);if(a!==i)return Up(a)===Up(i)?St(a,i):Up(a)?1:-1}return St(t.length,e.length)}const I5=55296,P5=57343;function Up(t){const e=t.charCodeAt(0);return e>=I5&&e<=P5}function Ru(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="__name__";class Ua{constructor(e,r,n){r===void 0?r=0:r>e.length&&nt(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&nt(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ua.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ua?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=Ua.compareSegments(e.get(a),r.get(a));if(i!==0)return i}return St(e.length,r.length)}static compareSegments(e,r){const n=Ua.isNumericId(e),a=Ua.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Ua.extractNumericId(e).compare(Ua.extractNumericId(r)):ig(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class nr extends Ua{construct(e,r,n){return new nr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ze(Ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new nr(r)}static emptyPath(){return new nr([])}}const F5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ua{construct(e,r,n){return new en(e,r,n)}static isValidIdentifier(e){return F5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lw}static keyField(){return new en([Lw])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new ze(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;a<e.length;){const u=e[a];if(u==="\\"){if(a+1===e.length)throw new ze(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ze(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,a+=2}else u==="`"?(s=!s,a++):u!=="."||s?(n+=u,a++):(i(),a++)}if(i(),s)throw new ze(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(r)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(nr.fromString(e))}static fromName(e){return new Ye(nr.fromString(e).popFirst(5))}static empty(){return new Ye(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return nr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new nr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t,e,r){if(!r)throw new ze(Ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R5(t,e,r,n){if(e===!0&&n===!0)throw new ze(Ne.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function zw(t){if(!Ye.isDocumentKey(t))throw new ze(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vw(t){if(Ye.isDocumentKey(t))throw new ze(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":nt(12329,{type:typeof t})}function Ic(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ze(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ph(t);throw new ze(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){const r={typeString:t};return e&&(r.value=e),r}function Jc(t,e){if(!nT(t))throw new ze(Ne.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const s=t[n];if(a&&typeof s!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(i!==void 0&&s!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new ze(Ne.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=-62135596800,qw=1e6;class or{static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*qw);return new or(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ze(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ze(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Uw)throw new ze(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qw}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:or._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jc(e,or._jsonSchema))return new or(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Uw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}or._jsonSchemaVersion="firestore/timestamp/1.0",or._jsonSchema={type:Tr("string",or._jsonSchemaVersion),seconds:Tr("number"),nanoseconds:Tr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new or(0,0))}static max(){return new ut(new or(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function O5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=ut.fromTimestamp(n===1e9?new or(r+1,0):new or(r,n));return new ms(a,Ye.empty(),e)}function B5(t){return new ms(t.readTime,t.key,Pc)}class ms{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ms(ut.min(),Ye.empty(),Pc)}static max(){return new ms(ut.max(),Ye.empty(),Pc)}}function j5(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ye.comparator(t.documentKey,e.documentKey),r!==0?r:St(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t){if(t.code!==Ne.FAILED_PRECONDITION||t.message!==k5)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new _e((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof _e?r:_e.resolve(r)}catch(r){return _e.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):_e.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):_e.reject(r)}static resolve(e){return new _e((r,n)=>{r(e)})}static reject(e){return new _e((r,n)=>{n(e)})}static waitFor(e){return new _e((r,n)=>{let a=0,i=0,s=!1;e.forEach(u=>{++a,u.next(()=>{++i,s&&i===a&&r()},l=>n(l))}),s=!0,i===a&&r()})}static or(e){let r=_e.resolve(!1);for(const n of e)r=r.next(a=>a?_e.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,i)=>{n.push(r.call(this,a,i))}),this.waitFor(n)}static mapArray(e,r){return new _e((n,a)=>{const i=e.length,s=new Array(i);let u=0;for(let l=0;l<i;l++){const o=l;r(e[o]).next(c=>{s[o]=c,++u,u===i&&n(s)},c=>a(c))}})}static doWhile(e,r){return new _e((n,a)=>{const i=()=>{e()===!0?r().next(()=>{i()},a):n()};i()})}}function L5(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function el(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=-1;function gh(t){return t==null}function hm(t){return t===0&&1/t==-1/0}function z5(t){return typeof t=="number"&&Number.isInteger(t)&&!hm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="";function V5(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Hw(e)),e=U5(t.get(r),e);return Hw(e)}function U5(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case aT:r+="";break;default:r+=i}}return r}function Hw(t){return t+aT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function xo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function iT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,r){this.comparator=e,this.root=r||Zr.EMPTY}insert(e,r){return new vr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qf(this.root,e,this.comparator,!0)}}class Qf{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??Zr.RED,this.left=a??Zr.EMPTY,this.right=i??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new Zr(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Zr.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nt(27949);return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1;Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(e,r,n,a,i){return this}insert(e,r,n){return new Zr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ww(this.data.getIterator())}getIteratorFrom(e){return new Ww(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new jr(this.comparator);return r.data=e,r}}class Ww{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Aa([])}unionWith(e){let r=new jr(en.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Aa(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ru(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sT("Invalid base64 string: "+i):i}}(e);return new on(r)}static fromUint8Array(e){const r=function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i}(e);return new on(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const q5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(t){if(Wt(!!t,39018),typeof t=="string"){let e=0;const r=q5.exec(t);if(Wt(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Nr(t.seconds),nanos:Nr(t.nanos)}}function Nr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ps(t){return typeof t=="string"?on.fromBase64String(t):on.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="server_timestamp",uT="__type__",lT="__previous_value__",cT="__local_write_time__";function W0(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[uT])==null?void 0:n.stringValue)===oT}function yh(t){const e=t.mapValue.fields[lT];return W0(e)?yh(e):e}function Fc(t){const e=hs(t.mapValue.fields[cT].timestampValue);return new or(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,r,n,a,i,s,u,l,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=o,this.isUsingEmulator=c}}const pm="(default)";class Rc{constructor(e,r){this.projectId=e,this.database=r||pm}static empty(){return new Rc("","")}get isDefaultDatabase(){return this.database===pm}isEqual(e){return e instanceof Rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="__type__",G5="__max__",Xf={mapValue:{}},dT="__vector__",vm="value";function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?W0(t)?4:Q5(t)?9007199254740991:W5(t)?10:11:nt(28295,{value:t})}function Za(t,e){if(t===e)return!0;const r=vs(t);if(r!==vs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fc(t).isEqual(Fc(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=hs(a.timestampValue),u=hs(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return ps(a.bytesValue).isEqual(ps(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return Nr(a.geoPointValue.latitude)===Nr(i.geoPointValue.latitude)&&Nr(a.geoPointValue.longitude)===Nr(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return Nr(a.integerValue)===Nr(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=Nr(a.doubleValue),u=Nr(i.doubleValue);return s===u?hm(s)===hm(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return Ru(t.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:case 11:return function(a,i){const s=a.mapValue.fields||{},u=i.mapValue.fields||{};if(Gw(s)!==Gw(u))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(u[l]===void 0||!Za(s[l],u[l])))return!1;return!0}(t,e);default:return nt(52216,{left:t})}}function Oc(t,e){return(t.values||[]).find(r=>Za(r,e))!==void 0}function Ou(t,e){if(t===e)return 0;const r=vs(t),n=vs(e);if(r!==n)return St(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return St(t.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Nr(i.integerValue||i.doubleValue),l=Nr(s.integerValue||s.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(t,e);case 3:return Qw(t.timestampValue,e.timestampValue);case 4:return Qw(Fc(t),Fc(e));case 5:return ig(t.stringValue,e.stringValue);case 6:return function(i,s){const u=ps(i),l=ps(s);return u.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),l=s.split("/");for(let o=0;o<u.length&&o<l.length;o++){const c=St(u[o],l[o]);if(c!==0)return c}return St(u.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const u=St(Nr(i.latitude),Nr(s.latitude));return u!==0?u:St(Nr(i.longitude),Nr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xw(t.arrayValue,e.arrayValue);case 10:return function(i,s){var m,h,p,v;const u=i.fields||{},l=s.fields||{},o=(m=u[vm])==null?void 0:m.arrayValue,c=(h=l[vm])==null?void 0:h.arrayValue,d=St(((p=o==null?void 0:o.values)==null?void 0:p.length)||0,((v=c==null?void 0:c.values)==null?void 0:v.length)||0);return d!==0?d:Xw(o,c)}(t.mapValue,e.mapValue);case 11:return function(i,s){if(i===Xf.mapValue&&s===Xf.mapValue)return 0;if(i===Xf.mapValue)return 1;if(s===Xf.mapValue)return-1;const u=i.fields||{},l=Object.keys(u),o=s.fields||{},c=Object.keys(o);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const m=ig(l[d],c[d]);if(m!==0)return m;const h=Ou(u[l[d]],o[c[d]]);if(h!==0)return h}return St(l.length,c.length)}(t.mapValue,e.mapValue);default:throw nt(23264,{he:r})}}function Qw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return St(t,e);const r=hs(t),n=hs(e),a=St(r.seconds,n.seconds);return a!==0?a:St(r.nanos,n.nanos)}function Xw(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Ou(r[a],n[a]);if(i)return i}return St(r.length,n.length)}function Bu(t){return sg(t)}function sg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=hs(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ps(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ye.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=sg(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const s of n)i?i=!1:a+=",",a+=`${s}:${sg(r.fields[s])}`;return a+"}"}(t.mapValue):nt(61005,{value:t})}function Pd(t){switch(vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yh(t);return e?16+Pd(e):16;case 5:return 2*t.stringValue.length;case 6:return ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,i)=>a+Pd(i),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return xo(n.fields,(i,s)=>{a+=i.length+Pd(s)}),a}(t.mapValue);default:throw nt(13486,{value:t})}}function Kw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function og(t){return!!t&&"integerValue"in t}function Q0(t){return!!t&&"arrayValue"in t}function Jw(t){return!!t&&"nullValue"in t}function Yw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fd(t){return!!t&&"mapValue"in t}function W5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[fT])==null?void 0:n.stringValue)===dT}function ac(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ac(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ac(t.arrayValue.values[r]);return e}return{...t}}function Q5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===G5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.value=e}static empty(){return new ua({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Fd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(r)}setAll(e){let r=en.emptyPath(),n={},a=[];e.forEach((s,u)=>{if(!r.isImmediateParentOf(u)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=u.popLast()}s?n[u.lastSegment()]=ac(s):a.push(u.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());Fd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];Fd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){xo(r,(a,i)=>e[a]=i);for(const a of n)delete e[a]}clone(){return new ua(ac(this.value))}}function mT(t){const e=[];return xo(t.fields,(r,n)=>{const a=new en([r]);if(Fd(n)){const i=mT(n.mapValue).fields;if(i.length===0)e.push(a);else for(const s of i)e.push(a.child(s))}else e.push(a)}),new Aa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,r,n,a,i,s,u){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new vn(e,0,ut.min(),ut.min(),ut.min(),ua.empty(),0)}static newFoundDocument(e,r,n,a){return new vn(e,1,r,ut.min(),n,a,0)}static newNoDocument(e,r){return new vn(e,2,r,ut.min(),ut.min(),ua.empty(),0)}static newUnknownDocument(e,r){return new vn(e,3,r,ut.min(),ut.min(),ua.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ua.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ua.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,r){this.position=e,this.inclusive=r}}function Zw(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],s=t.position[a];if(i.field.isKeyField()?n=Ye.comparator(Ye.fromName(s.referenceValue),r.key):n=Ou(s,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function eN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Za(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,r="asc"){this.field=e,this.dir=r}}function X5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{}class Cr extends hT{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new J5(e,r,n):r==="array-contains"?new ej(e,n):r==="in"?new tj(e,n):r==="not-in"?new rj(e,n):r==="array-contains-any"?new nj(e,n):new Cr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Y5(e,n):new Z5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Ou(r,this.value)):r!==null&&vs(this.value)===vs(r)&&this.matchesComparison(Ou(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ia extends hT{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Ia(e,r)}matches(e){return pT(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pT(t){return t.op==="and"}function vT(t){return K5(t)&&pT(t)}function K5(t){for(const e of t.filters)if(e instanceof Ia)return!1;return!0}function ug(t){if(t instanceof Cr)return t.field.canonicalString()+t.op.toString()+Bu(t.value);if(vT(t))return t.filters.map(e=>ug(e)).join(",");{const e=t.filters.map(r=>ug(r)).join(",");return`${t.op}(${e})`}}function gT(t,e){return t instanceof Cr?function(n,a){return a instanceof Cr&&n.op===a.op&&n.field.isEqual(a.field)&&Za(n.value,a.value)}(t,e):t instanceof Ia?function(n,a){return a instanceof Ia&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((i,s,u)=>i&&gT(s,a.filters[u]),!0):!1}(t,e):void nt(19439)}function yT(t){return t instanceof Cr?function(r){return`${r.field.canonicalString()} ${r.op} ${Bu(r.value)}`}(t):t instanceof Ia?function(r){return r.op.toString()+" {"+r.getFilters().map(yT).join(" ,")+"}"}(t):"Filter"}class J5 extends Cr{constructor(e,r,n){super(e,r,n),this.key=Ye.fromName(n.referenceValue)}matches(e){const r=Ye.comparator(e.key,this.key);return this.matchesComparison(r)}}class Y5 extends Cr{constructor(e,r){super(e,"in",r),this.keys=xT("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Z5 extends Cr{constructor(e,r){super(e,"not-in",r),this.keys=xT("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function xT(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>Ye.fromName(n.referenceValue))}class ej extends Cr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Q0(r)&&Oc(r.arrayValue,this.value)}}class tj extends Cr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Oc(this.value.arrayValue,r)}}class rj extends Cr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Oc(this.value.arrayValue,r)}}class nj extends Cr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Q0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Oc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,r=null,n=[],a=[],i=null,s=null,u=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=s,this.endAt=u,this.Te=null}}function tN(t,e=null,r=[],n=[],a=null,i=null,s=null){return new aj(t,e,r,n,a,i,s)}function X0(t){const e=ft(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>ug(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),gh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Bu(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Bu(n)).join(",")),e.Te=r}return e.Te}function K0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!X5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!gT(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eN(t.startAt,e.startAt)&&eN(t.endAt,e.endAt)}function lg(t){return Ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,r=null,n=[],a=[],i=null,s="F",u=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=u,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ij(t,e,r,n,a,i,s,u){return new tl(t,e,r,n,a,i,s,u)}function bT(t){return new tl(t)}function rN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wT(t){return t.collectionGroup!==null}function ic(t){const e=ft(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new jr(en.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(o=>{o.isInequality()&&(u=u.add(o.field))})}),u})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Bc(i,n))}),r.has(en.keyField().canonicalString())||e.Ie.push(new Bc(en.keyField(),n))}return e.Ie}function Qa(t){const e=ft(t);return e.Ee||(e.Ee=sj(e,ic(t))),e.Ee}function sj(t,e){if(t.limitType==="F")return tN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new Bc(a.field,i)});const r=t.endAt?new gm(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new gm(t.startAt.position,t.startAt.inclusive):null;return tN(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function cg(t,e){const r=t.filters.concat([e]);return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function fg(t,e,r){return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function xh(t,e){return K0(Qa(t),Qa(e))&&t.limitType===e.limitType}function NT(t){return`${X0(Qa(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>yT(a)).join(", ")}]`),gh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Bu(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Bu(a)).join(",")),`Target(${n})`}(Qa(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ye.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,a){for(const i of ic(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(s,u,l){const o=Zw(s,u,l);return s.inclusive?o<=0:o<0}(n.startAt,ic(n),a)||n.endAt&&!function(s,u,l){const o=Zw(s,u,l);return s.inclusive?o>=0:o>0}(n.endAt,ic(n),a))}(t,e)}function oj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _T(t){return(e,r)=>{let n=!1;for(const a of ic(t)){const i=uj(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function uj(t,e,r){const n=t.field.isKeyField()?Ye.comparator(e.key,r.key):function(i,s,u){const l=s.data.field(i),o=u.data.field(i);return l!==null&&o!==null?Ou(l,o):nt(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return nt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(r,n)=>{for(const[a,i]of n)e(a,i)})}isEmpty(){return iT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new vr(Ye.comparator);function _i(){return lj}const ET=new vr(Ye.comparator);function ql(...t){let e=ET;for(const r of t)e=e.insert(r.key,r);return e}function ST(t){let e=ET;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Js(){return sc()}function AT(){return sc()}function sc(){return new bo(t=>t.toString(),(t,e)=>t.isEqual(e))}const cj=new vr(Ye.comparator),fj=new jr(Ye.comparator);function At(...t){let e=fj;for(const r of t)e=e.add(r);return e}const dj=new jr(St);function mj(){return dj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hm(e)?"-0":e}}function DT(t){return{integerValue:""+t}}function hj(t,e){return z5(e)?DT(e):J0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this._=void 0}}function pj(t,e,r){return t instanceof jc?function(a,i){const s={fields:{[uT]:{stringValue:oT},[cT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&W0(i)&&(i=yh(i)),i&&(s.fields[lT]=i),{mapValue:s}}(r,e):t instanceof kc?TT(t,e):t instanceof $c?MT(t,e):function(a,i){const s=CT(a,i),u=nN(s)+nN(a.Ae);return og(s)&&og(a.Ae)?DT(u):J0(a.serializer,u)}(t,e)}function vj(t,e,r){return t instanceof kc?TT(t,e):t instanceof $c?MT(t,e):r}function CT(t,e){return t instanceof ym?function(n){return og(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class jc extends wh{}class kc extends wh{constructor(e){super(),this.elements=e}}function TT(t,e){const r=IT(e);for(const n of t.elements)r.some(a=>Za(a,n))||r.push(n);return{arrayValue:{values:r}}}class $c extends wh{constructor(e){super(),this.elements=e}}function MT(t,e){let r=IT(e);for(const n of t.elements)r=r.filter(a=>!Za(a,n));return{arrayValue:{values:r}}}class ym extends wh{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function nN(t){return Nr(t.integerValue||t.doubleValue)}function IT(t){return Q0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,r){this.field=e,this.transform=r}}function yj(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof kc&&a instanceof kc||n instanceof $c&&a instanceof $c?Ru(n.elements,a.elements,Za):n instanceof ym&&a instanceof ym?Za(n.Ae,a.Ae):n instanceof jc&&a instanceof jc}(t.transform,e.transform)}class xj{constructor(e,r){this.version=e,this.transformResults=r}}class Xa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Xa}static exists(e){return new Xa(void 0,e)}static updateTime(e){return new Xa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function PT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Y0(t.key,Xa.none()):new Yc(t.key,t.data,Xa.none());{const r=t.data,n=ua.empty();let a=new jr(en.comparator);for(let i of e.fields)if(!a.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),a=a.add(i)}return new wo(t.key,n,new Aa(a.toArray()),Xa.none())}}function bj(t,e,r){t instanceof Yc?function(a,i,s){const u=a.value.clone(),l=iN(a.fieldTransforms,i,s.transformResults);u.setAll(l),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,r):t instanceof wo?function(a,i,s){if(!Rd(a.precondition,i))return void i.convertToUnknownDocument(s.version);const u=iN(a.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(FT(a)),l.setAll(u),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function oc(t,e,r,n){return t instanceof Yc?function(i,s,u,l){if(!Rd(i.precondition,s))return u;const o=i.value.clone(),c=sN(i.fieldTransforms,l,s);return o.setAll(c),s.convertToFoundDocument(s.version,o).setHasLocalMutations(),null}(t,e,r,n):t instanceof wo?function(i,s,u,l){if(!Rd(i.precondition,s))return u;const o=sN(i.fieldTransforms,l,s),c=s.data;return c.setAll(FT(i)),c.setAll(o),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,s,u){return Rd(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(t,e,r)}function wj(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=CT(n.transform,a||null);i!=null&&(r===null&&(r=ua.empty()),r.set(n.field,i))}return r||null}function aN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Ru(n,a,(i,s)=>yj(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yc extends Nh{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class wo extends Nh{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function FT(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function iN(t,e,r){const n=new Map;Wt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const i=t[a],s=i.transform,u=e.data.field(i.field);n.set(i.field,vj(s,u,r[a]))}return n}function sN(t,e,r){const n=new Map;for(const a of t){const i=a.transform,s=r.data.field(a.field);n.set(a.field,pj(i,s,e))}return n}class Y0 extends Nh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nj extends Nh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&bj(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=oc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=oc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=AT();return this.mutations.forEach(a=>{const i=e.get(a.key),s=i.overlayedDocument;let u=this.applyToLocalView(s,i.mutatedFields);u=r.has(a.key)?null:u;const l=PT(s,u);l!==null&&n.set(a.key,l),s.isValidDocument()||s.convertToNoDocument(ut.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),At())}isEqual(e){return this.batchId===e.batchId&&Ru(this.mutations,e.mutations,(r,n)=>aN(r,n))&&Ru(this.baseMutations,e.baseMutations,(r,n)=>aN(r,n))}}class Z0{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Wt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return cj}();const i=e.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,n[s].version);return new Z0(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ar,Pt;function Aj(t){switch(t){case Ne.OK:return nt(64938);case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return nt(15467,{code:t})}}function RT(t){if(t===void 0)return Ni("GRPC error has no .code"),Ne.UNKNOWN;switch(t){case Ar.OK:return Ne.OK;case Ar.CANCELLED:return Ne.CANCELLED;case Ar.UNKNOWN:return Ne.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return Ne.INTERNAL;case Ar.UNAVAILABLE:return Ne.UNAVAILABLE;case Ar.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case Ar.NOT_FOUND:return Ne.NOT_FOUND;case Ar.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case Ar.ABORTED:return Ne.ABORTED;case Ar.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case Ar.DATA_LOSS:return Ne.DATA_LOSS;default:return nt(39323,{code:t})}}(Pt=Ar||(Ar={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new os([4294967295,4294967295],0);function oN(t){const e=Dj().encode(t),r=new QC;return r.update(e),new Uint8Array(r.digest())}function uN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new os([r,n],0),new os([a,i],0)]}class ey{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Hl(`Invalid padding: ${r}`);if(n<0)throw new Hl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=os.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(os.fromNumber(n)));return a.compare(Cj)===1&&(a=new os([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=oN(e),[n,a]=uN(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);if(!this.we(s))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ey(i,a,r);return n.forEach(u=>s.insert(u)),s}insert(e){if(this.ge===0)return;const r=oN(e),[n,a]=uN(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new _h(ut.min(),a,new vr(St),_i(),At())}}class Zc{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Zc(n,r,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class OT{constructor(e,r){this.targetId=e,this.Ce=r}}class BT{constructor(e,r,n=on.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class lN{constructor(){this.ve=0,this.Fe=cN(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=At(),r=At(),n=At();return this.Fe.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:nt(38017,{changeType:i})}}),new Zc(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=cN()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Tj{constructor(e){this.Ge=e,this.ze=new Map,this.je=_i(),this.Je=Kf(),this.He=Kf(),this.Ye=new vr(St)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:nt(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const i=a.target;if(lg(i))if(n===0){const s=new Ye(i.path);this.et(r,s,vn.newNoDocument(s,ut.min()))}else Wt(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const u=this.ut(e),l=u?this.ct(u,e,s):1;if(l!==0){this.it(r);const o=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,o)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let s,u;try{s=ps(n).toUint8Array()}catch(l){if(l instanceof sT)return Fu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new ey(s,a,i)}catch(l){return Fu(l instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.ge===0?null:u}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(i=>{const s=this.Ge.ht(),u=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(r,i,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((i,s)=>{const u=this.ot(s);if(u){if(i.current&&lg(u.target)){const l=new Ye(u.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,vn.newNoDocument(l,e))}i.Be&&(r.set(s,i.ke()),i.qe())}});let n=At();this.He.forEach((i,s)=>{let u=!0;s.forEachWhile(l=>{const o=this.ot(l);return!o||o.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(i))}),this.je.forEach((i,s)=>s.setReadTime(e));const a=new _h(e,r,this.Ye,this.je,n);return this.je=_i(),this.Je=Kf(),this.He=Kf(),this.Ye=new vr(St),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new lN,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new jr(St),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new jr(St),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Ue("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lN),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Kf(){return new vr(Ye.comparator)}function cN(){return new vr(Ye.comparator)}const Mj={asc:"ASCENDING",desc:"DESCENDING"},Ij={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pj={and:"AND",or:"OR"};class Fj{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function dg(t,e){return t.useProto3Json||gh(e)?e:{value:e}}function xm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Rj(t,e){return xm(t,e.toTimestamp())}function Ka(t){return Wt(!!t,49232),ut.fromTimestamp(function(r){const n=hs(r);return new or(n.seconds,n.nanos)}(t))}function ty(t,e){return mg(t,e).canonicalString()}function mg(t,e){const r=function(a){return new nr(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function kT(t){const e=nr.fromString(t);return Wt(UT(e),10190,{key:e.toString()}),e}function hg(t,e){return ty(t.databaseId,e.path)}function qp(t,e){const r=kT(e);if(r.get(1)!==t.databaseId.projectId)throw new ze(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ze(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ye(LT(r))}function $T(t,e){return ty(t.databaseId,e)}function Oj(t){const e=kT(t);return e.length===4?nr.emptyPath():LT(e)}function pg(t){return new nr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LT(t){return Wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fN(t,e,r){return{name:hg(t,e),fields:r.value.mapValue.fields}}function Bj(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(o){return o==="NO_CHANGE"?0:o==="ADD"?1:o==="REMOVE"?2:o==="CURRENT"?3:o==="RESET"?4:nt(39313,{state:o})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(o,c){return o.useProto3Json?(Wt(c===void 0||typeof c=="string",58123),on.fromBase64String(c||"")):(Wt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),on.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(o){const c=o.code===void 0?Ne.UNKNOWN:RT(o.code);return new ze(c,o.message||"")}(s);r=new BT(n,a,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=qp(t,n.document.name),i=Ka(n.document.updateTime),s=n.document.createTime?Ka(n.document.createTime):ut.min(),u=new ua({mapValue:{fields:n.document.fields}}),l=vn.newFoundDocument(a,i,s,u),o=n.targetIds||[],c=n.removedTargetIds||[];r=new Od(o,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=qp(t,n.document),i=n.readTime?Ka(n.readTime):ut.min(),s=vn.newNoDocument(a,i),u=n.removedTargetIds||[];r=new Od([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=qp(t,n.document),i=n.removedTargetIds||[];r=new Od([],i,a,null)}else{if(!("filter"in e))return nt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,s=new Sj(a,i),u=n.targetId;r=new OT(u,s)}}return r}function jj(t,e){let r;if(e instanceof Yc)r={update:fN(t,e.key,e.value)};else if(e instanceof Y0)r={delete:hg(t,e.key)};else if(e instanceof wo)r={update:fN(t,e.key,e.data),updateMask:Gj(e.fieldMask)};else{if(!(e instanceof Nj))return nt(16599,{Vt:e.type});r={verify:hg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const u=s.transform;if(u instanceof jc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof kc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof $c)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ym)return{fieldPath:s.field.canonicalString(),increment:u.Ae};throw nt(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:Rj(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:nt(27497)}(t,e.precondition)),r}function kj(t,e){return t&&t.length>0?(Wt(e!==void 0,14353),t.map(r=>function(a,i){let s=a.updateTime?Ka(a.updateTime):Ka(i);return s.isEqual(ut.min())&&(s=Ka(i)),new xj(s,a.transformResults||[])}(r,e))):[]}function $j(t,e){return{documents:[$T(t,e.path)]}}function Lj(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=$T(t,a);const i=function(o){if(o.length!==0)return VT(Ia.create(o,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const s=function(o){if(o.length!==0)return o.map(c=>function(m){return{field:Xo(m.field),direction:Uj(m.dir)}}(c))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const u=dg(t,e.limit);return u!==null&&(r.structuredQuery.limit=u),e.startAt&&(r.structuredQuery.startAt=function(o){return{before:o.inclusive,values:o.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(o){return{before:!o.inclusive,values:o.position}}(e.endAt)),{ft:r,parent:a}}function zj(t){let e=Oj(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Wt(n===1,65062);const c=r.from[0];c.allDescendants?a=c.collectionId:e=e.child(c.collectionId)}let i=[];r.where&&(i=function(d){const m=zT(d);return m instanceof Ia&&vT(m)?m.getFilters():[m]}(r.where));let s=[];r.orderBy&&(s=function(d){return d.map(m=>function(p){return new Bc(Ko(p.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(m))}(r.orderBy));let u=null;r.limit&&(u=function(d){let m;return m=typeof d=="object"?d.value:d,gh(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(d){const m=!!d.before,h=d.values||[];return new gm(h,m)}(r.startAt));let o=null;return r.endAt&&(o=function(d){const m=!d.before,h=d.values||[];return new gm(h,m)}(r.endAt)),ij(e,a,s,i,u,"F",l,o)}function Vj(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function zT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ko(r.unaryFilter.field);return Cr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Ko(r.unaryFilter.field);return Cr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ko(r.unaryFilter.field);return Cr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ko(r.unaryFilter.field);return Cr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}}(t):t.fieldFilter!==void 0?function(r){return Cr.create(Ko(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ia.create(r.compositeFilter.filters.map(n=>zT(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return nt(1026)}}(r.compositeFilter.op))}(t):nt(30097,{filter:t})}function Uj(t){return Mj[t]}function qj(t){return Ij[t]}function Hj(t){return Pj[t]}function Xo(t){return{fieldPath:t.canonicalString()}}function Ko(t){return en.fromServerFormat(t.fieldPath)}function VT(t){return t instanceof Cr?function(r){if(r.op==="=="){if(Yw(r.value))return{unaryFilter:{field:Xo(r.field),op:"IS_NAN"}};if(Jw(r.value))return{unaryFilter:{field:Xo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Yw(r.value))return{unaryFilter:{field:Xo(r.field),op:"IS_NOT_NAN"}};if(Jw(r.value))return{unaryFilter:{field:Xo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(r.field),op:qj(r.op),value:r.value}}}(t):t instanceof Ia?function(r){const n=r.getFilters().map(a=>VT(a));return n.length===1?n[0]:{compositeFilter:{op:Hj(r.op),filters:n}}}(t):nt(54877,{filter:t})}function Gj(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function UT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,r,n,a,i=ut.min(),s=ut.min(),u=on.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.yt=e}}function Qj(t){const e=zj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.Cn=new Kj}addToCollectionParentIndex(e,r){return this.Cn.add(r),_e.resolve()}getCollectionParents(e,r){return _e.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return _e.resolve()}deleteFieldIndex(e,r){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,r){return _e.resolve()}getDocumentsMatchingTarget(e,r){return _e.resolve(null)}getIndexType(e,r){return _e.resolve(0)}getFieldIndexes(e,r){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,r){return _e.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,r){return _e.resolve(ms.min())}updateCollectionGroup(e,r,n){return _e.resolve()}updateIndexEntries(e,r){return _e.resolve()}}class Kj{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new jr(nr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new jr(nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qT=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(qT,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ju(0)}static cr(){return new ju(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="LruGarbageCollector",Jj=1048576;function hN([t,e],[r,n]){const a=St(t,r);return a===0?St(e,n):a}class Yj{constructor(e){this.Ir=e,this.buffer=new jr(hN),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();hN(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Zj{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ue(mN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){el(r)?Ue(mN,"Ignoring IndexedDB error during garbage collection: ",r):await Zu(r)}await this.Vr(3e5)})}}class e9{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return _e.resolve(vh.ce);const n=new Yj(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(dN)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dN):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,i,s,u,l,o;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),a=this.params.maximumSequenceNumbersToCollect):a=d,s=Date.now(),this.nthSequenceNumber(e,a))).next(d=>(n=d,u=Date.now(),this.removeTargets(e,n,r))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(o=Date.now(),Wo()<=Ft.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${a} in `+(u-s)+`ms
	Removed ${i} targets in `+(l-u)+`ms
	Removed ${d} documents in `+(o-l)+`ms
Total Duration: ${o-c}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:d})))}}function t9(t,e){return new e9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(){this.changes=new bo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?_e.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&oc(n.mutation,a,Aa.empty(),or.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,At()).next(()=>n))}getLocalViewOfDocuments(e,r,n=At()){const a=Js();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(i=>{let s=ql();return i.forEach((u,l)=>{s=s.insert(u,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Js();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,At()))}populateOverlays(e,r,n){const a=[];return n.forEach(i=>{r.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((s,u)=>{r.set(s,u)})})}computeViews(e,r,n,a){let i=_i();const s=sc(),u=function(){return sc()}();return r.forEach((l,o)=>{const c=n.get(o.key);a.has(o.key)&&(c===void 0||c.mutation instanceof wo)?i=i.insert(o.key,o):c!==void 0?(s.set(o.key,c.mutation.getFieldMask()),oc(c.mutation,o,c.mutation.getFieldMask(),or.now())):s.set(o.key,Aa.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((o,c)=>s.set(o,c)),r.forEach((o,c)=>u.set(o,new n9(c,s.get(o)??null))),u))}recalculateAndSaveOverlays(e,r){const n=sc();let a=new vr((s,u)=>s-u),i=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const u of s)u.keys().forEach(l=>{const o=r.get(l);if(o===null)return;let c=n.get(l)||Aa.empty();c=u.applyToLocalView(o,c),n.set(l,c);const d=(a.get(u.batchId)||At()).add(l);a=a.insert(u.batchId,d)})}).next(()=>{const s=[],u=a.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),o=l.key,c=l.value,d=AT();c.forEach(m=>{if(!i.has(m)){const h=PT(r.get(m),n.get(m));h!==null&&d.set(m,h),i=i.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,d))}return _e.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(s){return Ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):wT(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):_e.resolve(Js());let u=Pc,l=i;return s.next(o=>_e.forEach(o,(c,d)=>(u<d.largestBatchId&&(u=d.largestBatchId),i.get(c)?_e.resolve():this.remoteDocumentCache.getEntry(e,c).next(m=>{l=l.insert(c,m)}))).next(()=>this.populateOverlays(e,o,i)).next(()=>this.computeViews(e,l,o,At())).next(c=>({batchId:u,changes:ST(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ye(r)).next(n=>{let a=ql();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let s=ql();return this.indexManager.getCollectionParents(e,i).next(u=>_e.forEach(u,l=>{const o=function(d,m){return new tl(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,a).next(c=>{c.forEach((d,m)=>{s=s.insert(d,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a))).next(s=>{i.forEach((l,o)=>{const c=o.getKey();s.get(c)===null&&(s=s.insert(c,vn.newInvalidDocument(c)))});let u=ql();return s.forEach((l,o)=>{const c=i.get(l);c!==void 0&&oc(c.mutation,o,Aa.empty(),or.now()),bh(r,o)&&(u=u.insert(l,o))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return _e.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Ka(a.createTime)}}(r)),_e.resolve()}getNamedQuery(e,r){return _e.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Qj(a.bundledQuery),readTime:Ka(a.readTime)}}(r)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(){this.overlays=new vr(Ye.comparator),this.qr=new Map}getOverlay(e,r){return _e.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Js();return _e.forEach(r,a=>this.getOverlay(e,a).next(i=>{i!==null&&n.set(a,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,i)=>{this.St(e,r,i)}),_e.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),_e.resolve()}getOverlaysForCollection(e,r,n){const a=Js(),i=r.length+1,s=new Ye(r.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const l=u.getNext().value,o=l.getKey();if(!r.isPrefixOf(o.path))break;o.path.length===i&&l.largestBatchId>n&&a.set(l.getKey(),l)}return _e.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new vr((o,c)=>o-c);const s=this.overlays.getIterator();for(;s.hasNext();){const o=s.getNext().value;if(o.getKey().getCollectionGroup()===r&&o.largestBatchId>n){let c=i.get(o.largestBatchId);c===null&&(c=Js(),i=i.insert(o.largestBatchId,c)),c.set(o.getKey(),o)}}const u=Js(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((o,c)=>u.set(o,c)),!(u.size()>=a)););return _e.resolve(u)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const s=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Ej(r,n));let i=this.qr.get(r);i===void 0&&(i=At(),this.qr.set(r,i)),this.qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.Qr=new jr(Gr.$r),this.Ur=new jr(Gr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Gr(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Gr(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new Ye(new nr([])),n=new Gr(r,e),a=new Gr(r,e+1),i=[];return this.Ur.forEachInRange([n,a],s=>{this.Gr(s),i.push(s.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Ye(new nr([])),n=new Gr(r,e),a=new Gr(r,e+1);let i=At();return this.Ur.forEachInRange([n,a],s=>{i=i.add(s.key)}),i}containsKey(e){const r=new Gr(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Gr{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Ye.comparator(e.key,r.key)||St(e.Yr,r.Yr)}static Kr(e,r){return St(e.Yr,r.Yr)||Ye.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new jr(Gr.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new _j(i,r,n,a);this.mutationQueue.push(s);for(const u of a)this.Zr=this.Zr.add(new Gr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return _e.resolve(s)}lookupMutationBatch(e,r){return _e.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),i=a<0?0:a;return _e.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?G0:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Gr(r,0),a=new Gr(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,a],s=>{const u=this.Xr(s.Yr);i.push(u)}),_e.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new jr(St);return r.forEach(a=>{const i=new Gr(a,0),s=new Gr(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,s],u=>{n=n.add(u.Yr)})}),_e.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;Ye.isDocumentKey(i)||(i=i.child(""));const s=new Gr(new Ye(i),0);let u=new jr(St);return this.Zr.forEachWhile(l=>{const o=l.key.path;return!!n.isPrefixOf(o)&&(o.length===a&&(u=u.add(l.Yr)),!0)},s),_e.resolve(this.ti(u))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Wt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return _e.forEach(r.mutations,a=>{const i=new Gr(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Gr(r,0),a=this.Zr.firstAfterOrEqual(n);return _e.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.ri=e,this.docs=function(){return new vr(Ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return _e.resolve(n?n.document.mutableCopy():vn.newInvalidDocument(r))}getEntries(e,r){let n=_i();return r.forEach(a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():vn.newInvalidDocument(a))}),_e.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=_i();const s=r.path,u=new Ye(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:o,value:{document:c}}=l.getNext();if(!s.isPrefixOf(o.path))break;o.path.length>s.length+1||j5(B5(c),n)<=0||(a.has(c.key)||bh(r,c))&&(i=i.insert(c.key,c.mutableCopy()))}return _e.resolve(i)}getAllFromCollectionGroup(e,r,n,a){nt(9500)}ii(e,r){return _e.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new c9(this)}getSize(e){return _e.resolve(this.size)}}class c9 extends r9{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),_e.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e){this.persistence=e,this.si=new bo(r=>X0(r),K0),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.oi=0,this._i=new ry,this.targetCount=0,this.ai=ju.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),_e.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new ju(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,_e.resolve()}updateTargetData(e,r){return this.Pr(r),_e.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.si.forEach((s,u)=>{u.sequenceNumber<=r&&n.get(u.targetId)===null&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),a++)}),_e.waitFor(i).next(()=>a)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return _e.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),_e.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach(s=>{i.push(a.markPotentiallyOrphaned(e,s))}),_e.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),_e.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return _e.resolve(n)}containsKey(e,r){return _e.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,r){this.ui={},this.overlays={},this.ci=new vh(0),this.li=!1,this.li=!0,this.hi=new o9,this.referenceDelegate=e(this),this.Pi=new f9(this),this.indexManager=new Xj,this.remoteDocumentCache=function(a){return new l9(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Wj(r),this.Ii=new i9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new s9,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new u9(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Ue("MemoryPersistence","Starting transaction:",e);const a=new d9(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(e,r){return _e.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class d9 extends $5{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Ri=new ry,this.Vi=null}static mi(e){return new ny(e)}get fi(){if(this.Vi)return this.Vi;throw nt(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),_e.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),_e.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),_e.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,n=>{const a=Ye.fromPath(n);return this.gi(e,a).next(i=>{i||r.removeEntry(a,ut.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return _e.or([()=>_e.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class bm{constructor(e,r){this.persistence=e,this.pi=new bo(n=>V5(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=t9(this,r)}static mi(e,r){return new bm(e,r)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return _e.forEach(this.pi,(n,a)=>this.br(e,n,a).next(i=>i?_e.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,s=>this.br(e,s,r).next(u=>{u||(n++,i.removeEntry(s,ut.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Pd(e.data.value)),r}br(e,r,n){return _e.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return _e.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=At(),a=At();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new ay(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return aB()?8:L5(rB())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.ys(e,r).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ws(e,r,a,n).next(s=>{i.result=s})}).next(()=>{if(i.result)return;const s=new m9;return this.Ss(e,r,s).next(u=>{if(i.result=u,this.Vs)return this.bs(e,r,s,u.size)})}).next(()=>i.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(Wo()<=Ft.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",Qo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(Wo()<=Ft.DEBUG&&Ue("QueryEngine","Query:",Qo(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Wo()<=Ft.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",Qo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qa(r))):_e.resolve())}ys(e,r){if(rN(r))return _e.resolve(null);let n=Qa(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=fg(r,null,"F"),n=Qa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const s=At(...i);return this.ps.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,n).next(l=>{const o=this.Ds(r,u);return this.Cs(r,o,s,l.readTime)?this.ys(e,fg(r,null,"F")):this.vs(e,o,r,l)}))})))}ws(e,r,n,a){return rN(r)||a.isEqual(ut.min())?_e.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(r,i);return this.Cs(r,s,n,a)?_e.resolve(null):(Wo()<=Ft.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Qo(r)),this.vs(e,s,r,O5(a,Pc)).next(u=>u))})}Ds(e,r){let n=new jr(_T(e));return r.forEach((a,i)=>{bh(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,r,n){return Wo()<=Ft.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Qo(r)),this.ps.getDocumentsMatchingQuery(e,r,ms.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(i=>(r.forEach(s=>{i=i.insert(s.key,s)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="LocalStore",p9=3e8;class v9{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new vr(St),this.xs=new bo(i=>X0(i),K0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function g9(t,e,r,n){return new v9(t,e,r,n)}async function GT(t,e){const r=ft(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(i=>(a=i,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const s=[],u=[];let l=At();for(const o of a){s.push(o.batchId);for(const c of o.mutations)l=l.add(c.key)}for(const o of i){u.push(o.batchId);for(const c of o.mutations)l=l.add(c.key)}return r.localDocuments.getDocuments(n,l).next(o=>({Ls:o,removedBatchIds:s,addedBatchIds:u}))})})}function y9(t,e){const r=ft(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(u,l,o,c){const d=o.batch,m=d.keys();let h=_e.resolve();return m.forEach(p=>{h=h.next(()=>c.getEntry(l,p)).next(v=>{const C=o.docVersions.get(p);Wt(C!==null,48541),v.version.compareTo(C)<0&&(d.applyToRemoteDocument(v,o),v.isValidDocument()&&(v.setReadTime(o.commitVersion),c.addEntry(v)))})}),h.next(()=>u.mutationQueue.removeMutationBatch(l,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let l=At();for(let o=0;o<u.mutationResults.length;++o)u.mutationResults[o].transformResults.length>0&&(l=l.add(u.batch.mutations[o].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function WT(t){const e=ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function x9(t,e){const r=ft(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const u=[];e.targetChanges.forEach((c,d)=>{const m=a.get(d);if(!m)return;u.push(r.Pi.removeMatchingKeys(i,c.removedDocuments,d).next(()=>r.Pi.addMatchingKeys(i,c.addedDocuments,d)));let h=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(on.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,n)),a=a.insert(d,h),function(v,C,N){return v.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=p9?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,h,c)&&u.push(r.Pi.updateTargetData(i,h))});let l=_i(),o=At();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&u.push(r.persistence.referenceDelegate.updateLimboDocument(i,c))}),u.push(b9(i,s,e.documentUpdates).next(c=>{l=c.ks,o=c.qs})),!n.isEqual(ut.min())){const c=r.Pi.getLastRemoteSnapshotVersion(i).next(d=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));u.push(c)}return _e.waitFor(u).next(()=>s.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,o)).next(()=>l)}).then(i=>(r.Ms=a,i))}function b9(t,e,r){let n=At(),a=At();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let s=_i();return r.forEach((u,l)=>{const o=i.get(u);l.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(u)),l.isNoDocument()&&l.version.isEqual(ut.min())?(e.removeEntry(u,l.readTime),s=s.insert(u,l)):!o.isValidDocument()||l.version.compareTo(o.version)>0||l.version.compareTo(o.version)===0&&o.hasPendingWrites?(e.addEntry(l),s=s.insert(u,l)):Ue(iy,"Ignoring outdated watch update for ",u,". Current version:",o.version," Watch version:",l.version)}),{ks:s,qs:a}})}function w9(t,e){const r=ft(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=G0),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function N9(t,e){const r=ft(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(i=>i?(a=i,_e.resolve(a)):r.Pi.allocateTargetId(n).next(s=>(a=new Wi(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function vg(t,e,r){const n=ft(t),a=n.Ms.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,s=>n.persistence.referenceDelegate.removeTarget(s,a))}catch(s){if(!el(s))throw s;Ue(iy,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function pN(t,e,r){const n=ft(t);let a=ut.min(),i=At();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,o,c){const d=ft(l),m=d.xs.get(c);return m!==void 0?_e.resolve(d.Ms.get(m)):d.Pi.getTargetData(o,c)}(n,s,Qa(e)).next(u=>{if(u)return a=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,u.targetId).next(l=>{i=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,e,r?a:ut.min(),r?i:At())).next(u=>(_9(n,oj(e),u),{documents:u,Qs:i})))}function _9(t,e,r){let n=t.Os.get(e)||ut.min();r.forEach((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Os.set(e,n)}class vN{constructor(){this.activeTargetIds=mj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E9{constructor(){this.Mo=new vN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vN,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="ConnectivityMonitor";class yN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ue(gN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ue(gN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf=null;function gg(){return Jf===null?Jf=function(){return 268435456+Math.round(2147483648*Math.random())}():Jf++,"0x"+Jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="RestConnection",A9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===pm?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,i){const s=gg(),u=this.zo(e,r.toUriEncodedString());Ue(Hp,`Sending RPC '${e}' ${s}:`,u,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,i);const{host:o}=new URL(u),c=V0(o);return this.Jo(e,u,l,n,c).then(d=>(Ue(Hp,`Received RPC '${e}' ${s}: `,d),d),d=>{throw Fu(Hp,`RPC '${e}' ${s} failed with error: `,d,"url: ",u,"request:",n),d})}Ho(e,r,n,a,i,s){return this.Go(e,r,n,a,i)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,i)=>e[i]=a),n&&n.headers.forEach((a,i)=>e[i]=a)}zo(e,r){const n=A9[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class T9 extends D9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,i){const s=gg();return new Promise((u,l)=>{const o=new XC;o.setWithCredentials(!0),o.listenOnce(KC.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Id.NO_ERROR:const d=o.getResponseJson();Ue(dn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),u(d);break;case Id.TIMEOUT:Ue(dn,`RPC '${e}' ${s} timed out`),l(new ze(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:const m=o.getStatus();if(Ue(dn,`RPC '${e}' ${s} failed with status:`,m,"response text:",o.getResponseText()),m>0){let h=o.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const v=function(N){const A=N.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(A)>=0?A:Ne.UNKNOWN}(p.status);l(new ze(v,p.message))}else l(new ze(Ne.UNKNOWN,"Server responded with status "+o.getStatus()))}else l(new ze(Ne.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Ue(dn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(a);Ue(dn,`RPC '${e}' ${s} sending request:`,a),o.send(r,"POST",c,n,15)})}T_(e,r,n){const a=gg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ZC(),u=YC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;o!==void 0&&(l.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const c=i.join("");Ue(dn,`Creating RPC '${e}' stream ${a}: ${c}`,l);const d=s.createWebChannel(c,l);this.I_(d);let m=!1,h=!1;const p=new C9({Yo:C=>{h?Ue(dn,`Not sending because RPC '${e}' stream ${a} is closed:`,C):(m||(Ue(dn,`Opening RPC '${e}' stream ${a} transport.`),d.open(),m=!0),Ue(dn,`RPC '${e}' stream ${a} sending:`,C),d.send(C))},Zo:()=>d.close()}),v=(C,N,A)=>{C.listen(N,b=>{try{A(b)}catch(g){setTimeout(()=>{throw g},0)}})};return v(d,Ul.EventType.OPEN,()=>{h||(Ue(dn,`RPC '${e}' stream ${a} transport opened.`),p.o_())}),v(d,Ul.EventType.CLOSE,()=>{h||(h=!0,Ue(dn,`RPC '${e}' stream ${a} transport closed`),p.a_(),this.E_(d))}),v(d,Ul.EventType.ERROR,C=>{h||(h=!0,Fu(dn,`RPC '${e}' stream ${a} transport errored. Name:`,C.name,"Message:",C.message),p.a_(new ze(Ne.UNAVAILABLE,"The operation could not be completed")))}),v(d,Ul.EventType.MESSAGE,C=>{var N;if(!h){const A=C.data[0];Wt(!!A,16349);const b=A,g=(b==null?void 0:b.error)||((N=b[0])==null?void 0:N.error);if(g){Ue(dn,`RPC '${e}' stream ${a} received error:`,g);const w=g.status;let x=function(D){const T=Ar[D];if(T!==void 0)return RT(T)}(w),_=g.message;x===void 0&&(x=Ne.INTERNAL,_="Unknown error status: "+w+" with message "+g.message),h=!0,p.a_(new ze(x,_)),d.close()}else Ue(dn,`RPC '${e}' stream ${a} received:`,A),p.u_(A)}}),v(u,JC.STAT_EVENT,C=>{C.stat===ag.PROXY?Ue(dn,`RPC '${e}' stream ${a} detected buffering proxy`):C.stat===ag.NOPROXY&&Ue(dn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return new Fj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,r,n=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&Ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="PersistentStream";class XT{constructor(e,r,n,a,i,s,u,l){this.Mi=e,this.S_=n,this.b_=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new QT(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===Ne.RESOURCE_EXHAUSTED?(Ni(r.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new ze(Ne.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ue(xN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Ue(xN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M9 extends XT{constructor(e,r,n,a,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=Bj(this.serializer,e),n=function(i){if(!("targetChange"in i))return ut.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ut.min():s.readTime?Ka(s.readTime):ut.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=pg(this.serializer),r.addTarget=function(i,s){let u;const l=s.target;if(u=lg(l)?{documents:$j(i,l)}:{query:Lj(i,l).ft},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=jT(i,s.resumeToken);const o=dg(i,s.expectedCount);o!==null&&(u.expectedCount=o)}else if(s.snapshotVersion.compareTo(ut.min())>0){u.readTime=xm(i,s.snapshotVersion.toTimestamp());const o=dg(i,s.expectedCount);o!==null&&(u.expectedCount=o)}return u}(this.serializer,e);const n=Vj(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=pg(this.serializer),r.removeTarget=e,this.q_(r)}}class I9 extends XT{constructor(e,r,n,a,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=kj(e.writeResults,e.commitTime),n=Ka(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=pg(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>jj(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{}class F9 extends P9{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ze(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,mg(r,n),a,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ze(Ne.UNKNOWN,i.toString())})}Ho(e,r,n,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Ho(e,mg(r,n),a,s,u,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ze(Ne.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class R9{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ni(r),this.aa=!1):Ue("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="RemoteStore";class O9{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{No(this)&&(Ue(co,"Restarting streams for network reachability change."),await async function(l){const o=ft(l);o.Ea.add(4),await ef(o),o.Ra.set("Unknown"),o.Ea.delete(4),await Sh(o)}(this))})}),this.Ra=new R9(n,a)}}async function Sh(t){if(No(t))for(const e of t.da)await e(!0)}async function ef(t){for(const e of t.da)await e(!1)}function KT(t,e){const r=ft(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),ly(r)?uy(r):rl(r).O_()&&oy(r,e))}function sy(t,e){const r=ft(t),n=rl(r);r.Ia.delete(e),n.O_()&&JT(r,e),r.Ia.size===0&&(n.O_()?n.L_():No(r)&&r.Ra.set("Unknown"))}function oy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}rl(t).Y_(e)}function JT(t,e){t.Va.Ue(e),rl(t).Z_(e)}function uy(t){t.Va=new Tj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),rl(t).start(),t.Ra.ua()}function ly(t){return No(t)&&!rl(t).x_()&&t.Ia.size>0}function No(t){return ft(t).Ea.size===0}function YT(t){t.Va=void 0}async function B9(t){t.Ra.set("Online")}async function j9(t){t.Ia.forEach((e,r)=>{oy(t,e)})}async function k9(t,e){YT(t),ly(t)?(t.Ra.ha(e),uy(t)):t.Ra.set("Unknown")}async function $9(t,e,r){if(t.Ra.set("Online"),e instanceof BT&&e.state===2&&e.cause)try{await async function(a,i){const s=i.cause;for(const u of i.targetIds)a.Ia.has(u)&&(await a.remoteSyncer.rejectListen(u,s),a.Ia.delete(u),a.Va.removeTarget(u))}(t,e)}catch(n){Ue(co,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await wm(t,n)}else if(e instanceof Od?t.Va.Ze(e):e instanceof OT?t.Va.st(e):t.Va.tt(e),!r.isEqual(ut.min()))try{const n=await WT(t.localStore);r.compareTo(n)>=0&&await function(i,s){const u=i.Va.Tt(s);return u.targetChanges.forEach((l,o)=>{if(l.resumeToken.approximateByteSize()>0){const c=i.Ia.get(o);c&&i.Ia.set(o,c.withResumeToken(l.resumeToken,s))}}),u.targetMismatches.forEach((l,o)=>{const c=i.Ia.get(l);if(!c)return;i.Ia.set(l,c.withResumeToken(on.EMPTY_BYTE_STRING,c.snapshotVersion)),JT(i,l);const d=new Wi(c.target,l,o,c.sequenceNumber);oy(i,d)}),i.remoteSyncer.applyRemoteEvent(u)}(t,r)}catch(n){Ue(co,"Failed to raise snapshot:",n),await wm(t,n)}}async function wm(t,e,r){if(!el(e))throw e;t.Ea.add(1),await ef(t),t.Ra.set("Offline"),r||(r=()=>WT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ue(co,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Sh(t)})}function ZT(t,e){return e().catch(r=>wm(t,r,e))}async function Ah(t){const e=ft(t),r=gs(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:G0;for(;L9(e);)try{const a=await w9(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,z9(e,a)}catch(a){await wm(e,a)}e3(e)&&t3(e)}function L9(t){return No(t)&&t.Ta.length<10}function z9(t,e){t.Ta.push(e);const r=gs(t);r.O_()&&r.X_&&r.ea(e.mutations)}function e3(t){return No(t)&&!gs(t).x_()&&t.Ta.length>0}function t3(t){gs(t).start()}async function V9(t){gs(t).ra()}async function U9(t){const e=gs(t);for(const r of t.Ta)e.ea(r.mutations)}async function q9(t,e,r){const n=t.Ta.shift(),a=Z0.from(n,e,r);await ZT(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Ah(t)}async function H9(t,e){e&&gs(t).X_&&await async function(n,a){if(function(s){return Aj(s)&&s!==Ne.ABORTED}(a.code)){const i=n.Ta.shift();gs(n).B_(),await ZT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Ah(n)}}(t,e),e3(t)&&t3(t)}async function bN(t,e){const r=ft(t);r.asyncQueue.verifyOperationInProgress(),Ue(co,"RemoteStore received new credentials");const n=No(r);r.Ea.add(3),await ef(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Sh(r)}async function G9(t,e){const r=ft(t);e?(r.Ea.delete(2),await Sh(r)):e||(r.Ea.add(2),await ef(r),r.Ra.set("Unknown"))}function rl(t){return t.ma||(t.ma=function(r,n,a){const i=ft(r);return i.sa(),new M9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:B9.bind(null,t),t_:j9.bind(null,t),r_:k9.bind(null,t),H_:$9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ly(t)?uy(t):t.Ra.set("Unknown")):(await t.ma.stop(),YT(t))})),t.ma}function gs(t){return t.fa||(t.fa=function(r,n,a){const i=ft(r);return i.sa(),new I9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:V9.bind(null,t),r_:H9.bind(null,t),ta:U9.bind(null,t),na:q9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ah(t)):(await t.fa.stop(),t.Ta.length>0&&(Ue(co,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const s=Date.now()+n,u=new cy(e,r,s,a,i);return u.start(n),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),el(t))return new ze(Ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{static emptySet(e){return new xu(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ye.comparator(r.key,n.key):(r,n)=>Ye.comparator(r.key,n.key),this.keyedMap=ql(),this.sortedSet=new vr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof xu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new xu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.ga=new vr(Ye.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):nt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class ku{constructor(e,r,n,a,i,s,u,l,o){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=o}static fromInitialDocuments(e,r,n,a,i){const s=[];return r.forEach(u=>{s.push({type:0,doc:u})}),new ku(e,r,xu.emptySet(r),s,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Q9{constructor(){this.queries=NN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=ft(r),i=a.queries;a.queries=NN(),i.forEach((s,u)=>{for(const l of u.Sa)l.onError(n)})})(this,new ze(Ne.ABORTED,"Firestore shutting down"))}}function NN(){return new bo(t=>NT(t),xh)}async function X9(t,e){const r=ft(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.ba()&&e.Da()&&(n=2):(i=new W9,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(a,!0);break;case 1:i.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(s){const u=fy(s,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(u)}r.queries.set(a,i),i.Sa.push(e),e.va(r.onlineState),i.wa&&e.Fa(i.wa)&&dy(r)}async function K9(t,e){const r=ft(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const s=i.Sa.indexOf(e);s>=0&&(i.Sa.splice(s,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function J9(t,e){const r=ft(t);let n=!1;for(const a of e){const i=a.query,s=r.queries.get(i);if(s){for(const u of s.Sa)u.Fa(a)&&(n=!0);s.wa=a}}n&&dy(r)}function Y9(t,e,r){const n=ft(t),a=n.queries.get(e);if(a)for(const i of a.Sa)i.onError(r);n.queries.delete(e)}function dy(t){t.Ca.forEach(e=>{e.next()})}var yg,_N;(_N=yg||(yg={})).Ma="default",_N.Cache="cache";class Z9{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new ku(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ku.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.key=e}}class n3{constructor(e){this.key=e}}class e8{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=At(),this.mutatedKeys=At(),this.eu=_T(e),this.tu=new xu(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new wN,a=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,s=a,u=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,o=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((c,d)=>{const m=a.get(c),h=bh(this.query,d)?d:null,p=!!m&&this.mutatedKeys.has(m.key),v=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let C=!1;m&&h?m.data.isEqual(h.data)?p!==v&&(n.track({type:3,doc:h}),C=!0):this.su(m,h)||(n.track({type:2,doc:h}),C=!0,(l&&this.eu(h,l)>0||o&&this.eu(h,o)<0)&&(u=!0)):!m&&h?(n.track({type:0,doc:h}),C=!0):m&&!h&&(n.track({type:1,doc:m}),C=!0,(l||o)&&(u=!0)),C&&(h?(s=s.add(h),i=v?i.add(c):i.delete(c)):(s=s.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),i=i.delete(c.key),n.track({type:1,doc:c})}return{tu:s,iu:n,Cs:u,mutatedKeys:i}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((c,d)=>function(h,p){const v=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt(20277,{Rt:C})}};return v(h)-v(p)}(c.type,d.type)||this.eu(c.doc,d.doc)),this.ou(n),a=a??!1;const u=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,o=l!==this.Za;return this.Za=l,s.length!==0||o?{snapshot:new ku(this.query,e.tu,i,s,e.mutatedKeys,l===0,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=At(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new n3(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new r3(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=At();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ku.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const my="SyncEngine";class t8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class r8{constructor(e){this.key=e,this.hu=!1}}class n8{constructor(e,r,n,a,i,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new bo(u=>NT(u),xh),this.Iu=new Map,this.Eu=new Set,this.du=new vr(Ye.comparator),this.Au=new Map,this.Ru=new ry,this.Vu={},this.mu=new Map,this.fu=ju.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a8(t,e,r=!0){const n=l3(t);let a;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await a3(n,e,r,!0),a}async function i8(t,e){const r=l3(t);await a3(r,e,!0,!1)}async function a3(t,e,r,n){const a=await N9(t.localStore,Qa(e)),i=a.targetId,s=t.sharedClientState.addLocalQueryTarget(i,r);let u;return n&&(u=await s8(t,e,i,s==="current",a.resumeToken)),t.isPrimaryClient&&r&&KT(t.remoteStore,a),u}async function s8(t,e,r,n,a){t.pu=(d,m,h)=>async function(v,C,N,A){let b=C.view.ru(N);b.Cs&&(b=await pN(v.localStore,C.query,!1).then(({documents:_})=>C.view.ru(_,b)));const g=A&&A.targetChanges.get(C.targetId),w=A&&A.targetMismatches.get(C.targetId)!=null,x=C.view.applyChanges(b,v.isPrimaryClient,g,w);return SN(v,C.targetId,x.au),x.snapshot}(t,d,m,h);const i=await pN(t.localStore,e,!0),s=new e8(e,i.Qs),u=s.ru(i.documents),l=Zc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),o=s.applyChanges(u,t.isPrimaryClient,l);SN(t,r,o.au);const c=new t8(e,r,s);return t.Tu.set(e,c),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),o.snapshot}async function o8(t,e,r){const n=ft(t),a=n.Tu.get(e),i=n.Iu.get(a.targetId);if(i.length>1)return n.Iu.set(a.targetId,i.filter(s=>!xh(s,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await vg(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&sy(n.remoteStore,a.targetId),xg(n,a.targetId)}).catch(Zu)):(xg(n,a.targetId),await vg(n.localStore,a.targetId,!0))}async function u8(t,e){const r=ft(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),sy(r.remoteStore,n.targetId))}async function l8(t,e,r){const n=v8(t);try{const a=await function(s,u){const l=ft(s),o=or.now(),c=u.reduce((h,p)=>h.add(p.key),At());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=_i(),v=At();return l.Ns.getEntries(h,c).next(C=>{p=C,p.forEach((N,A)=>{A.isValidDocument()||(v=v.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,p)).next(C=>{d=C;const N=[];for(const A of u){const b=wj(A,d.get(A.key).overlayedDocument);b!=null&&N.push(new wo(A.key,b,mT(b.value.mapValue),Xa.exists(!0)))}return l.mutationQueue.addMutationBatch(h,o,N,u)}).next(C=>{m=C;const N=C.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(h,C.batchId,N)})}).then(()=>({batchId:m.batchId,changes:ST(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(s,u,l){let o=s.Vu[s.currentUser.toKey()];o||(o=new vr(St)),o=o.insert(u,l),s.Vu[s.currentUser.toKey()]=o}(n,a.batchId,r),await tf(n,a.changes),await Ah(n.remoteStore)}catch(a){const i=fy(a,"Failed to persist write");r.reject(i)}}async function i3(t,e){const r=ft(t);try{const n=await x9(r.localStore,e);e.targetChanges.forEach((a,i)=>{const s=r.Au.get(i);s&&(Wt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?s.hu=!0:a.modifiedDocuments.size>0?Wt(s.hu,14607):a.removedDocuments.size>0&&(Wt(s.hu,42227),s.hu=!1))}),await tf(r,n,e)}catch(n){await Zu(n)}}function EN(t,e,r){const n=ft(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((i,s)=>{const u=s.view.va(e);u.snapshot&&a.push(u.snapshot)}),function(s,u){const l=ft(s);l.onlineState=u;let o=!1;l.queries.forEach((c,d)=>{for(const m of d.Sa)m.va(u)&&(o=!0)}),o&&dy(l)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function c8(t,e,r){const n=ft(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),i=a&&a.key;if(i){let s=new vr(Ye.comparator);s=s.insert(i,vn.newNoDocument(i,ut.min()));const u=At().add(i),l=new _h(ut.min(),new Map,new vr(St),s,u);await i3(n,l),n.du=n.du.remove(i),n.Au.delete(e),hy(n)}else await vg(n.localStore,e,!1).then(()=>xg(n,e,r)).catch(Zu)}async function f8(t,e){const r=ft(t),n=e.batch.batchId;try{const a=await y9(r.localStore,e);o3(r,n,null),s3(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await tf(r,a)}catch(a){await Zu(a)}}async function d8(t,e,r){const n=ft(t);try{const a=await function(s,u){const l=ft(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",o=>{let c;return l.mutationQueue.lookupMutationBatch(o,u).next(d=>(Wt(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(o,d))).next(()=>l.mutationQueue.performConsistencyCheck(o)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(o,c,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,c)).next(()=>l.localDocuments.getDocuments(o,c))})}(n.localStore,e);o3(n,e,r),s3(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await tf(n,a)}catch(a){await Zu(a)}}function s3(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function o3(t,e,r){const n=ft(t);let a=n.Vu[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function xg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||u3(t,n)})}function u3(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(sy(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),hy(t))}function SN(t,e,r){for(const n of r)n instanceof r3?(t.Ru.addReference(n.key,e),m8(t,n)):n instanceof n3?(Ue(my,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||u3(t,n.key)):nt(19791,{wu:n})}function m8(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Ue(my,"New document in limbo: "+r),t.Eu.add(n),hy(t))}function hy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Ye(nr.fromString(e)),n=t.fu.next();t.Au.set(n,new r8(r)),t.du=t.du.insert(r,n),KT(t.remoteStore,new Wi(Qa(bT(r.path)),n,"TargetPurposeLimboResolution",vh.ce))}}async function tf(t,e,r){const n=ft(t),a=[],i=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((u,l)=>{s.push(n.pu(l,e,r).then(o=>{var c;if((o||r)&&n.isPrimaryClient){const d=o?!o.fromCache:(c=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(o){a.push(o);const d=ay.As(l.targetId,o);i.push(d)}}))}),await Promise.all(s),n.Pu.H_(a),await async function(l,o){const c=ft(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_e.forEach(o,m=>_e.forEach(m.Es,h=>c.persistence.referenceDelegate.addReference(d,m.targetId,h)).next(()=>_e.forEach(m.ds,h=>c.persistence.referenceDelegate.removeReference(d,m.targetId,h)))))}catch(d){if(!el(d))throw d;Ue(iy,"Failed to update sequence numbers: "+d)}for(const d of o){const m=d.targetId;if(!d.fromCache){const h=c.Ms.get(m),p=h.snapshotVersion,v=h.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(m,v)}}}(n.localStore,i))}async function h8(t,e){const r=ft(t);if(!r.currentUser.isEqual(e)){Ue(my,"User change. New user:",e.toKey());const n=await GT(r.localStore,e);r.currentUser=e,function(i,s){i.mu.forEach(u=>{u.forEach(l=>{l.reject(new ze(Ne.CANCELLED,s))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await tf(r,n.Ls)}}function p8(t,e){const r=ft(t),n=r.Au.get(e);if(n&&n.hu)return At().add(n.key);{let a=At();const i=r.Iu.get(e);if(!i)return a;for(const s of i){const u=r.Tu.get(s);a=a.unionWith(u.view.nu)}return a}}function l3(t){const e=ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c8.bind(null,e),e.Pu.H_=J9.bind(null,e.eventManager),e.Pu.yu=Y9.bind(null,e.eventManager),e}function v8(t){const e=ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d8.bind(null,e),e}class Nm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return g9(this.persistence,new h9,e.initialUser,this.serializer)}Cu(e){return new HT(ny.mi,this.serializer)}Du(e){return new E9}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nm.provider={build:()=>new Nm};class g8 extends Nm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Wt(this.persistence.referenceDelegate instanceof bm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Zj(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new HT(n=>bm.mi(n,r),this.serializer)}}class bg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>EN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=h8.bind(null,this.syncEngine),await G9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q9}()}createDatastore(e){const r=Eh(e.databaseInfo.databaseId),n=function(i){return new T9(i)}(e.databaseInfo);return function(i,s,u,l){return new F9(i,s,u,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,i,s,u){return new O9(n,a,i,s,u)}(this.localStore,this.datastore,e.asyncQueue,r=>EN(this.syncEngine,r,0),function(){return yN.v()?new yN:new S9}())}createSyncEngine(e,r){return function(a,i,s,u,l,o,c){const d=new n8(a,i,s,u,l,o);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const i=ft(a);Ue(co,"RemoteStore shutting down."),i.Ea.add(5),await ef(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}bg.provider={build:()=>new bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class x8{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=hn.UNAUTHENTICATED,this.clientId=H0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async s=>{Ue(ys,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(Ue(ys,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=fy(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Wp(t,e){t.asyncQueue.verifyOperationInProgress(),Ue(ys,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await GT(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function AN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await b8(t);Ue(ys,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>bN(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>bN(e.remoteStore,a)),t._onlineComponents=e}async function b8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue(ys,"Using user provided OfflineComponentProvider");try{await Wp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Ne.FAILED_PRECONDITION||a.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Fu("Error using user provided cache. Falling back to memory cache: "+r),await Wp(t,new Nm)}}else Ue(ys,"Using default OfflineComponentProvider"),await Wp(t,new g8(void 0));return t._offlineComponents}async function c3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue(ys,"Using user provided OnlineComponentProvider"),await AN(t,t._uninitializedComponentsProvider._online)):(Ue(ys,"Using default OnlineComponentProvider"),await AN(t,new bg))),t._onlineComponents}function w8(t){return c3(t).then(e=>e.syncEngine)}async function N8(t){const e=await c3(t),r=e.eventManager;return r.onListen=a8.bind(null,e.syncEngine),r.onUnlisten=o8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=i8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=u8.bind(null,e.syncEngine),r}function _8(t,e,r={}){const n=new us;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,u,l,o){const c=new y8({next:m=>{c.Nu(),s.enqueueAndForget(()=>K9(i,d)),m.fromCache&&l.source==="server"?o.reject(new ze(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(m)},error:m=>o.reject(m)}),d=new Z9(u,c,{includeMetadataChanges:!0,qa:!0});return X9(i,d)}(await N8(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="firestore.googleapis.com",CN=!0;class TN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d3,this.ssl=CN}else this.host=e.host,this.ssl=e.ssl??CN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Jj)throw new ze(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f3(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ze(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ze(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ze(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new E5;switch(n.type){case"firstParty":return new C5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ze(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=DN.get(r);n&&(Ue("ComponentProvider","Removing Datastore"),DN.delete(r),n.terminate())}(this),Promise.resolve()}}function E8(t,e,r,n={}){var o;t=Ic(t,Dh);const a=V0(e),i=t._getSettings(),s={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${r}`;a&&(J6(`https://${u}`),tB("Firestore",!0)),i.host!==d3&&i.host!==u&&Fu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:u,ssl:a,emulatorOptions:n};if(!fm(l,s)&&(t._setSettings(l),n.mockUserToken)){let c,d;if(typeof n.mockUserToken=="string")c=n.mockUserToken,d=hn.MOCK_USER;else{c=Y6(n.mockUserToken,(o=t._app)==null?void 0:o.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new ze(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new hn(m)}t._authCredentials=new S5(new tT(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class Qr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qr(this.firestore,e,this._key)}toJSON(){return{type:Qr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Jc(r,Qr._jsonSchema))return new Qr(e,n||null,new Ye(nr.fromString(r.referencePath)))}}Qr._jsonSchemaVersion="firestore/documentReference/1.0",Qr._jsonSchema={type:Tr("string",Qr._jsonSchemaVersion),referencePath:Tr("string")};class ls extends _o{constructor(e,r,n){super(e,r,bT(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new Ye(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function qe(t,e,...r){if(t=Pu(t),rT("collection","path",e),t instanceof Dh){const n=nr.fromString(e,...r);return Vw(n),new ls(t,null,n)}{if(!(t instanceof Qr||t instanceof ls))throw new ze(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(nr.fromString(e,...r));return Vw(n),new ls(t.firestore,null,n)}}function Mt(t,e,...r){if(t=Pu(t),arguments.length===1&&(e=H0.newId()),rT("doc","path",e),t instanceof Dh){const n=nr.fromString(e,...r);return zw(n),new Qr(t,null,new Ye(n))}{if(!(t instanceof Qr||t instanceof ls))throw new ze(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(nr.fromString(e,...r));return zw(n),new Qr(t.firestore,t instanceof ls?t.converter:null,new Ye(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="AsyncQueue";class IN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new QT(this,"async_queue_retry"),this._c=()=>{const n=Gp();n&&Ue(MN,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Gp();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Gp();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new us;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;Ue(MN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Ni("INTERNAL UNHANDLED ERROR: ",PN(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=cy.createAndSchedule(this,e,r,n,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&nt(47125,{Pc:PN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function PN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ch extends Dh{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new IN,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IN(e),this._firestoreClient=void 0,await e}}}function S8(t,e){const r=typeof t=="object"?t:f5(),n=typeof t=="string"?t:pm,a=s5(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const i=X6("firestore");i&&E8(a,...i)}return a}function m3(t){if(t._terminated)throw new ze(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A8(t),t._firestoreClient}function A8(t){var n,a,i;const e=t._freezeSettings(),r=function(u,l,o,c){return new H5(u,l,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,f3(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new x8(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(u){const l=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(on.fromBase64String(e))}catch(r){throw new ze(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new la(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:la._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jc(e,la._jsonSchema))return la.fromBase64String(e.bytes)}}la._jsonSchemaVersion="firestore/bytes/1.0",la._jsonSchema={type:Tr("string",la._jsonSchemaVersion),bytes:Tr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ze(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ze(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ze(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ja._jsonSchemaVersion}}static fromJSON(e){if(Jc(e,Ja._jsonSchema))return new Ja(e.latitude,e.longitude)}}Ja._jsonSchemaVersion="firestore/geoPoint/1.0",Ja._jsonSchema={type:Tr("string",Ja._jsonSchemaVersion),latitude:Tr("number"),longitude:Tr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ya._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jc(e,Ya._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Ya(e.vectorValues);throw new ze(Ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ya._jsonSchemaVersion="firestore/vectorValue/1.0",Ya._jsonSchema={type:Tr("string",Ya._jsonSchemaVersion),vectorValues:Tr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8=/^__.*__$/;class C8{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new wo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Yc(e,this.data,r,this.fieldTransforms)}}function h3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt(40011,{Ac:t})}}class gy{constructor(e,r,n,a,i,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _m(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(h3(this.Ac)&&D8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T8{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Eh(e)}Cc(e,r,n,a=!1){return new gy({Ac:e,methodName:r,Dc:n,path:en.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function p3(t){const e=t._freezeSettings(),r=Eh(t._databaseId);return new T8(t._databaseId,!!e.ignoreUndefinedProperties,r)}function M8(t,e,r,n,a,i={}){const s=t.Cc(i.merge||i.mergeFields?2:0,e,r,a);y3("Data must be an object, but it was:",s,n);const u=v3(n,s);let l,o;if(i.merge)l=new Aa(s.fieldMask),o=s.fieldTransforms;else if(i.mergeFields){const c=[];for(const d of i.mergeFields){const m=P8(e,d,r);if(!s.contains(m))throw new ze(Ne.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);R8(c,m)||c.push(m)}l=new Aa(c),o=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,o=s.fieldTransforms;return new C8(new ua(u),l,o)}class yy extends vy{_toFieldTransform(e){return new gj(e.path,new jc)}isEqual(e){return e instanceof yy}}function I8(t,e,r,n=!1){return xy(r,t.Cc(n?4:3,e))}function xy(t,e){if(g3(t=Pu(t)))return y3("Unsupported field value:",e,t),v3(t,e);if(t instanceof vy)return function(n,a){if(!h3(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const i=[];let s=0;for(const u of n){let l=xy(u,a.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,a){if((n=Pu(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return hj(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=or.fromDate(n);return{timestampValue:xm(a.serializer,i)}}if(n instanceof or){const i=new or(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xm(a.serializer,i)}}if(n instanceof Ja)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof la)return{bytesValue:jT(a.serializer,n._byteString)};if(n instanceof Qr){const i=a.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw a.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ty(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ya)return function(s,u){return{mapValue:{fields:{[fT]:{stringValue:dT},[vm]:{arrayValue:{values:s.toArray().map(o=>{if(typeof o!="number")throw u.Sc("VectorValues must only contain numeric values.");return J0(u.serializer,o)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${ph(n)}`)}(t,e)}function v3(t,e){const r={};return iT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(t,(n,a)=>{const i=xy(a,e.mc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function g3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof or||t instanceof Ja||t instanceof la||t instanceof Qr||t instanceof vy||t instanceof Ya)}function y3(t,e,r){if(!g3(r)||!nT(r)){const n=ph(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function P8(t,e,r){if((e=Pu(e))instanceof py)return e._internalPath;if(typeof e=="string")return x3(t,e);throw _m("Field path arguments must be of type string or ",t,!1,void 0,r)}const F8=new RegExp("[~\\*/\\[\\]]");function x3(t,e,r){if(e.search(F8)>=0)throw _m(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new py(...e.split("."))._internalPath}catch{throw _m(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function _m(t,e,r,n,a){const i=n&&!n.isEmpty(),s=a!==void 0;let u=`Function ${e}() called with invalid data`;r&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${n}`),s&&(l+=` in document ${a}`),l+=")"),new ze(Ne.INVALID_ARGUMENT,u+t+l)}function R8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(by("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class O8 extends b3{data(){return super.data()}}function by(t,e){return typeof e=="string"?x3(t,e):e instanceof py?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ze(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wy{}class w3 extends wy{}function Rt(t,e,...r){let n=[];e instanceof wy&&n.push(e),n=n.concat(r),function(i){const s=i.filter(l=>l instanceof _y).length,u=i.filter(l=>l instanceof Ny).length;if(s>1||s>0&&u>0)throw new ze(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Ny extends w3{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Ny(e,r,n)}_apply(e){const r=this._parse(e);return N3(e._query,r),new _o(e.firestore,e.converter,cg(e._query,r))}_parse(e){const r=p3(e.firestore);return function(i,s,u,l,o,c,d){let m;if(o.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ze(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){RN(d,c);const p=[];for(const v of d)p.push(FN(l,i,v));m={arrayValue:{values:p}}}else m=FN(l,i,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||RN(d,c),m=I8(u,s,d,c==="in"||c==="not-in");return Cr.create(o,c,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}class _y extends wy{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new _y(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ia.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,i){let s=a;const u=i.getFlattenedFilters();for(const l of u)N3(s,l),s=cg(s,l)}(e._query,r),new _o(e.firestore,e.converter,cg(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ey extends w3{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Ey(e,r)}_apply(e){const r=function(a,i,s){if(a.startAt!==null)throw new ze(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ze(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bc(i,s)}(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,function(a,i){const s=a.explicitOrderBy.concat([i]);return new tl(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Ot(t,e="asc"){const r=e,n=by("orderBy",t);return Ey._create(n,r)}function FN(t,e,r){if(typeof(r=Pu(r))=="string"){if(r==="")throw new ze(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wT(e)&&r.indexOf("/")!==-1)throw new ze(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(nr.fromString(r));if(!Ye.isDocumentKey(n))throw new ze(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Kw(t,new Ye(n))}if(r instanceof Qr)return Kw(t,r._key);throw new ze(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(r)}.`)}function RN(t,e){if(!Array.isArray(t)||t.length===0)throw new ze(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N3(t,e){const r=function(a,i){for(const s of a)for(const u of s.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ze(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class j8{convertValue(e,r="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw nt(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return xo(e,(a,i)=>{n[a]=this.convertValue(i,r)}),n}convertVectorValue(e){var n,a,i;const r=(i=(a=(n=e.fields)==null?void 0:n[vm].arrayValue)==null?void 0:a.values)==null?void 0:i.map(s=>Nr(s.doubleValue));return new Ya(r)}convertGeoPoint(e){return new Ja(Nr(e.latitude),Nr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=yh(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const r=hs(e);return new or(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=nr.fromString(e);Wt(UT(n),9688,{name:e});const a=new Rc(n.get(1),n.get(3)),i=new Ye(n.popFirst(5));return a.isEqual(r)||Ni(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Yf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bu extends b3{constructor(e,r,n,a,i,s){super(e,r,n,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(by("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=bu._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}bu._jsonSchemaVersion="firestore/documentSnapshot/1.0",bu._jsonSchema={type:Tr("string",bu._jsonSchemaVersion),bundleSource:Tr("string","DocumentSnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class Bd extends bu{data(e={}){return super.data(e)}}class wu{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Yf(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Bd(this._firestore,this._userDataWriter,n.key,n,new Yf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ze(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map(u=>{const l=new Bd(a._firestore,a._userDataWriter,u.doc.key,u.doc,new Yf(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const l=new Bd(a._firestore,a._userDataWriter,u.doc.key,u.doc,new Yf(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);let o=-1,c=-1;return u.type!==0&&(o=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),c=s.indexOf(u.doc.key)),{type:$8(u.type),doc:l,oldIndex:o,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=H0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:t})}}wu._jsonSchemaVersion="firestore/querySnapshot/1.0",wu._jsonSchema={type:Tr("string",wu._jsonSchemaVersion),bundleSource:Tr("string","QuerySnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class L8 extends j8{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,r)}}function Bt(t){t=Ic(t,_o);const e=Ic(t.firestore,Ch),r=m3(e),n=new L8(e);return B8(t._query),_8(r,t._query).then(a=>new wu(e,n,t,a))}function jt(t){return _3(Ic(t.firestore,Ch),[new Y0(t._key,Xa.none())])}function kt(t,e){const r=Ic(t.firestore,Ch),n=Mt(t),a=k8(t.converter,e);return _3(r,[M8(p3(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Xa.exists(!1))]).then(()=>n)}function _3(t,e){return function(n,a){const i=new us;return n.asyncQueue.enqueueAndForget(async()=>l8(await w8(n),a,i)),i.promise}(m3(t),e)}function $t(){return new yy("serverTimestamp")}(function(e,r=!0){(function(a){Yu=a})(c5),mm(new Tc("firestore",(n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),u=new Ch(new A5(n.getProvider("auth-internal")),new T5(s,n.getProvider("app-check-internal")),function(o,c){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new ze(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(o.options.projectId,c)}(s,a),s);return i={useFetchStreams:r,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),yu(jw,kw,e),yu(jw,kw,"esm2020")})();const z8={apiKey:"AIzaSyBUabFVbZsdvJxSNLz9E6uooOHmHAYztMQ",authDomain:"numerical-web-fe12a.firebaseapp.com",projectId:"numerical-web-fe12a",storageBucket:"numerical-web-fe12a.appspot.com",messagingSenderId:"450601861029",appId:"1:450601861029:web:8ad42bf62f220abb7a324c"},V8=HC(z8),Te=S8(V8),Sy="problems_bisection";async function U8(){const t=Rt(qe(Te,Sy),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function q8(t){return kt(qe(Te,Sy),{...t,method:"bisection",createdAt:$t()})}async function H8(t){return jt(Mt(Te,Sy,t))}const G8=Object.freeze(Object.defineProperty({__proto__:null,deleteBisectionProblem:H8,getBisectionProblems:U8,saveBisectionProblem:q8},Symbol.toStringTag,{value:"Module"}));function Lt(t){const[e,r]=U.useState([]),[n,a]=U.useState(new Set),i=U.useCallback(async()=>{if(!t||typeof t.get!="function"){const c=(t==null?void 0:t.getBisectionProblems)||(t==null?void 0:t.getFalsePositionProblems)||(t==null?void 0:t.getProblems)||(t==null?void 0:t.get);if(!c)return;const d=await c();r(d);return}const o=await t.get();r(o)},[t]),s=U.useCallback(async o=>{if(!t)throw new Error("service required");const c=t.saveBisectionProblem||t.saveFalsePositionProblem||t.save||t.add;if(!c)throw new Error("save method not found on service");await c(o),await i()},[t,i]),u=U.useCallback(async o=>{if(!t)throw new Error("service required");const c=t.deleteBisectionProblem||t.deleteFalsePositionProblem||t.delete||t.remove;if(!c)throw new Error("delete method not found on service");await c(o),await i()},[t,i]),l=U.useCallback((o,c=480)=>{a(d=>new Set(d).add(o)),setTimeout(async()=>{try{await u(o)}finally{a(d=>{const m=new Set(d);return m.delete(o),m})}},c)},[u]);return{problems:e,removingIds:n,refresh:i,saveProblem:s,deleteProblem:l}}function Oe(t,e=6){return t===null||Number.isNaN(t)?"-":isFinite(t)?Number(t).toPrecision(e).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(t)}function xs(t){if(!t||!t.trim())return null;let e=t.replace(/\^/g,"**");e=e.replace(/\bln\s*\(/gi,"log("),e=e.replace(/\bpi\b/gi,"PI"),e=e.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+e+"); }")}catch{return null}}function W8(t,e,r,n=1e-6,a=50){try{let i=t(e),s=t(r);if(!isFinite(i)||!isFinite(s))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*s>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const u=[];let l=null;for(let o=0;o<=a;o++){const c=(e+r)/2,d=t(c);if(!isFinite(d))return{error:"f(x1) คำนวณไม่ได้",iterations:u,converged:!1};let m=null;if(l!==null){const h=Math.abs(c)>1e-12?Math.abs(c):1;m=Math.abs(c-l)/h}if(u.push({iter:o,xl:e,xr:r,x1:c,fx1:d,error:m}),Math.abs(d)===0||m!==null&&m<=n)return{root:c,iterations:u,converged:!0};i*d<0?(r=c,s=d):(e=c,i=d),l=c}return{root:(e+r)/2,iterations:u,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function ro(t,e,r=-5,n=5,a=[],i={}){if(!t)return;const{width:s=800,height:u=320,bg:l="#061022",curveColor:o="#8ab4ff",axesColor:c="rgba(255,255,255,0.08)",pointColor:d="#f97316",lastPointColor:m="#fb923c"}=i,h=t.getContext("2d"),p=t.width=s,v=t.height=u;h.clearRect(0,0,p,v),h.fillStyle=l,h.fillRect(0,0,p,v);const C=e||(B=>B),N=(n-r)*.2||1,A=r-N,b=n+N,g=500;let w=[],x=[],_=1/0,E=-1/0;for(let B=0;B<g;B++){const $=A+(b-A)*B/(g-1);let R;try{R=C($)}catch{R=NaN}w.push($),x.push(R),isFinite(R)&&(R<_&&(_=R),R>E&&(E=R))}_===1/0&&(_=-1,E=1);const D=(E-_)*.2||1;_-=D,E+=D;const T=B=>(B-A)/(b-A)*p,M=B=>v-(B-_)/(E-_)*v;if(h.strokeStyle=c,_<0&&E>0){const B=M(0);h.beginPath(),h.moveTo(0,B),h.lineTo(p,B),h.stroke()}if(A<0&&b>0){const B=T(0);h.beginPath(),h.moveTo(B,0),h.lineTo(B,v),h.stroke()}h.beginPath(),h.lineWidth=2,h.strokeStyle=o;let I=!1;for(let B=0;B<g;B++){const $=w[B],R=x[B];if(!isFinite(R)){I=!1;continue}const G=T($),L=M(R);I?h.lineTo(G,L):(h.moveTo(G,L),I=!0)}h.stroke(),a.forEach(B=>{const $=T(B.x1),R=M(B.fx1);h.beginPath(),h.arc($,R,3,0,2*Math.PI),h.fillStyle=d,h.fill()});const P=(B,$,R)=>{const G=T(B);h.beginPath(),h.moveTo(G,0),h.lineTo(G,v),h.strokeStyle=$,h.stroke(),h.fillStyle=$,h.font="12px sans-serif",h.fillText(R+"="+Oe(B),G+6,18)};if(P(r,"#22c55e","XL"),P(n,"#ef4444","XR"),a.length){const B=a[a.length-1],$=T(B.x1),R=M(B.fx1);h.beginPath(),h.arc($,R,6,0,2*Math.PI),h.fillStyle=m,h.fill()}}function E3({func:t,xl:e=-5,xr:r=5,iterations:n=[],width:a=800,height:i=320,className:s=""}){const u=U.useRef(null);return U.useEffect(()=>{const l=u.current;ro(l,t,e,r,n,{width:a,height:i})},[t,e,r,n,a,i]),y.jsx("canvas",{ref:u,width:a,height:i,className:s})}function zt({problems:t=[],onLoad:e=()=>{},onDelete:r=()=>{},removingIds:n=new Set}){return!t||t.length===0?null:y.jsxs("div",{className:"mt-2",children:[y.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"โจทย์ที่บันทึกไว้:"}),y.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:t.map(a=>y.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${n.has(a.id)?"fade-out":""}`,children:[y.jsx("span",{className:"truncate",children:a.expr}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>e(a),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),y.jsx("button",{onClick:()=>r(a),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},a.id))})]})}function S3({iterations:t=[]}){return!t||t.length===0?null:y.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:y.jsxs("table",{className:"w-full text-sm border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[y.jsx("th",{className:"p-2 text-right",children:"iter"}),y.jsx("th",{className:"p-2 text-right",children:"xl"}),y.jsx("th",{className:"p-2 text-right",children:"xr"}),y.jsx("th",{className:"p-2 text-right",children:"x1"}),y.jsx("th",{className:"p-2 text-right",children:"f(x1)"}),y.jsx("th",{className:"p-2 text-right",children:"error"})]})}),y.jsx("tbody",{children:t.map(e=>y.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[y.jsx("td",{className:"p-2 text-right",children:e.iter}),y.jsx("td",{className:"p-2 text-right",children:Oe(e.xl)}),y.jsx("td",{className:"p-2 text-right",children:Oe(e.xr)}),y.jsx("td",{className:"p-2 text-right",children:Oe(e.x1)}),y.jsx("td",{className:"p-2 text-right",children:Oe(e.fx1)}),y.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":Oe(e.error)})]},e.iter))})]})})}function It({title:t,subtitle:e}){return y.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[y.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:t}),e&&y.jsx("div",{className:"text-sm text-gray-400",children:e})]})}function Q8(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,u]=U.useState(""),[l,o]=U.useState(""),[c,d]=U.useState([]),[m,h]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[p,v]=U.useState("-"),[C,N]=U.useState("-"),{problems:A,removingIds:b,refresh:g,saveProblem:w,deleteProblem:x}=Lt(G8);U.useEffect(()=>{g().catch(console.error)},[g]);const _=I=>{e(I.expr??""),n(I.xl??""),i(I.xr??""),u(I.tol??""),o(I.maxIter??"")},E=I=>{if(confirm(`ลบโจทย์นี้ไหม?
${I.expr}`))try{x(I.id)}catch(P){console.error("ลบโจทย์ผิดพลาด:",P),alert("ลบไม่สำเร็จ")}},D=async()=>{if(!t||!r||!a||!s||!l){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await w({expr:t,xl:r,xr:a,tol:s,maxIter:l}),alert("บันทึกแล้ว!")}catch(I){console.error("บันทึกโจทย์ผิดพลาด:",I),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},T=()=>{const I=xs(t);if(!I){h("สถานะ: สมการไม่ถูกต้อง");return}const P=parseFloat(r),B=parseFloat(a),$=parseFloat(s),R=parseInt(l,10);if(isNaN(P)||isNaN(B)){h("สถานะ: XL/XR ไม่ถูกต้อง");return}if(P>=B){h("สถานะ: ต้องมี XL < XR");return}if(!isFinite($)||$<=0){h("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(R)||R<=0){h("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const G=W8(I,P,B,$,R);if(G.error){h("สถานะ: "+G.error);return}d(G.iterations),h("สถานะ: เสร็จสิ้น "+(G.converged?"(converged)":"(ไม่ converged)")),N(Math.max(0,G.iterations.length-1)),v(Oe(G.root))},M=()=>{e(""),n(""),i(""),u(""),o(""),d([]),h("สถานะ: รีเซ็ตแล้ว"),N("-"),v("-")};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Bisection Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),y.jsx("input",{type:"text",value:t,onChange:I=>e(I.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),y.jsx("input",{type:"number",value:r,onChange:I=>n(I.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),y.jsx("input",{type:"number",value:a,onChange:I=>i(I.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),y.jsx("input",{type:"text",value:s,onChange:I=>u(I.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:l,onChange:I=>o(I.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-4",children:[y.jsx("button",{onClick:T,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:M,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:D,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsxs("div",{className:"text-sm mb-2",children:[y.jsx("div",{children:m}),y.jsxs("div",{children:["Iterations: ",C]}),y.jsxs("div",{children:["Root: ",p]})]}),y.jsx(zt,{problems:A,onLoad:_,onDelete:E,removingIds:b})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),y.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:y.jsx(E3,{func:xs(t)||(I=>I),xl:parseFloat(r)||-5,xr:parseFloat(a)||5,iterations:c,className:"w-full h-72 rounded"})}),y.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = x1 ทุก iteration (วงใหญ่ = x1 สุดท้าย)"})]})]}),y.jsx(S3,{iterations:c}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ay="problems_falseposition";async function A3(){const t=Rt(qe(Te,Ay),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function D3(t){return kt(qe(Te,Ay),{...t,method:"falseposition",createdAt:$t()})}async function C3(t){return jt(Mt(Te,Ay,t))}const X8={getFalsePositionProblems:A3,saveFalsePositionProblem:D3,deleteFalsePositionProblem:C3},K8=Object.freeze(Object.defineProperty({__proto__:null,default:X8,deleteFalsePositionProblem:C3,getFalsePositionProblems:A3,saveFalsePositionProblem:D3},Symbol.toStringTag,{value:"Module"}));function J8(t,e,r,n=1e-6,a=50){try{let i=t(e),s=t(r);if(!isFinite(i)||!isFinite(s))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*s>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const u=[];let l=null,o=null;for(let c=0;c<=a;c++){l=(e*s-r*i)/(s-i);const d=t(l);if(!isFinite(d))return{error:"f(x1) คำนวณไม่ได้",iterations:u,converged:!1};const m=o===null?null:Math.abs((l-o)/(Math.abs(l)>1e-12?Math.abs(l):1));if(u.push({iter:c,xl:e,xr:r,x1:l,fx1:d,error:m}),Math.abs(d)===0||m!==null&&m<=n)return{root:l,iterations:u,converged:!0};i*d<0?(r=l,s=d):(e=l,i=d),o=l}return{root:l,iterations:u,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function Y8(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,u]=U.useState(""),[l,o]=U.useState(""),[c,d]=U.useState([]),[m,h]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[p,v]=U.useState("-"),[C,N]=U.useState("-"),{problems:A,removingIds:b,refresh:g,saveProblem:w,deleteProblem:x}=Lt(K8);U.useEffect(()=>{g().catch(console.error)},[g]);const _=async()=>{if(!t||!r||!a||!s||!l){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await w({expr:t,xl:r,xr:a,tol:s,maxIter:l}),alert("บันทึกแล้ว!")}catch(I){console.error("บันทึกโจทย์ผิดพลาด:",I),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},E=I=>{e(I.expr??""),n(I.xl??""),i(I.xr??""),u(I.tol??""),o(I.maxIter??"")},D=I=>{if(confirm(`ลบโจทย์นี้ไหม?
${I.expr}`))try{x(I.id)}catch(P){console.error("ลบโจทย์ผิดพลาด:",P),alert("ลบไม่สำเร็จ")}},T=()=>{const I=xs(t);if(!I){h("สถานะ: สมการไม่ถูกต้อง");return}const P=parseFloat(r),B=parseFloat(a),$=parseFloat(s),R=parseInt(l,10);if(isNaN(P)||isNaN(B)){h("สถานะ: XL/XR ไม่ถูกต้อง");return}if(P>=B){h("สถานะ: ต้องมี XL < XR");return}if(!isFinite($)||$<=0){h("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(R)||R<=0){h("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const G=J8(I,P,B,$,R);if(G.error){h("สถานะ: "+G.error);return}d(G.iterations),h("สถานะ: เสร็จสิ้น "+(G.converged?"(converged)":"(ไม่ converged)")),N(Math.max(0,G.iterations.length-1)),v(Oe(G.root))},M=()=>{e(""),n(""),i(""),u(""),o(""),d([]),h("สถานะ: รีเซ็ตแล้ว"),N("-"),v("-")};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"False Position Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),y.jsx("input",{type:"text",value:t,onChange:I=>e(I.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),y.jsx("input",{type:"number",value:r,onChange:I=>n(I.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),y.jsx("input",{type:"number",value:a,onChange:I=>i(I.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-4",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),y.jsx("input",{type:"text",value:s,onChange:I=>u(I.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:l,onChange:I=>o(I.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-4",children:[y.jsx("button",{onClick:T,className:"btn-primary glow-btn flex-1 py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:M,className:"btn-danger flex-1 border border-[#30363d] py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์นี้"}),y.jsxs("div",{className:"text-sm mb-2",children:[y.jsx("div",{children:m}),y.jsxs("div",{children:["Iterations: ",C]}),y.jsxs("div",{children:["Root: ",p]})]}),y.jsx(zt,{problems:A,onLoad:E,onDelete:D,removingIds:b})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),y.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:y.jsx(E3,{func:xs(t)||(I=>I),xl:parseFloat(r)||-5,xr:parseFloat(a)||5,iterations:c,className:"w-full h-72 rounded"})}),y.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = X1 ทุก iteration (วงใหญ่ = X1 สุดท้าย)"})]})]}),y.jsx(S3,{iterations:c}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function Z8(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,u]=U.useState(""),[l,o]=U.useState([]),[c,d]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,h]=U.useState("-"),[p,v]=U.useState("-"),[C,N]=U.useState(null),[A,b]=U.useState("");function g(D,T){const M=Math.cbrt(Number.EPSILON)*(Math.abs(T)+1),I=D(T+M),P=D(T-M);return(I-P)/(2*M)}function w(D,T){try{const M=g(D,T);return!isFinite(M)||M===0?.5:1/Math.max(1,Math.abs(M))}catch{return .5}}function x(D,T,M,I,P){let B=[],$=T;B.push({iter:0,x:$,error:null});for(let R=1;R<=I;R++){const G=$-P*D($),L=Math.abs((G-$)/G);if(B.push({iter:R,x:G,error:L}),!isFinite(G))return{error:"ค่า x ไม่เป็นจำนวนจำกัด (อาจ Diverge)"};if(L<=M)return{root:G,iterations:B,converged:!0,lambda:P};$=G}return{root:B[B.length-1].x,iterations:B,converged:!1,lambda:P}}U.useEffect(()=>{const D=xs(t),T=parseFloat(r);if(!D||!isFinite(T)){N(null),b("");return}const M=w(D,T);N(M);const I=t.replace(/\s+/g," ").trim();b(`f2(x) = x - (${M.toPrecision(6)}) * [ ${I||"f(x)"} ]`)},[t,r]);const _=()=>{const D=xs(t);if(!D){d("สถานะ: f(x) ไม่ถูกต้อง");return}const T=parseFloat(r),M=parseFloat(a),I=parseInt(s,10);if(!isFinite(T)){d("สถานะ: ค่าเริ่มต้น x0 ไม่ถูกต้อง");return}if(!isFinite(M)||M<=0){d("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(I)||I<=0){d("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const P=w(D,T),B=x(D,T,M,I,P);if(B.error){d("สถานะ: "+B.error),o([]),v("-"),h("-");return}o(B.iterations),d("สถานะ: เสร็จสิ้น "+(B.converged?"(converged)":"(ไม่ converged)")),v(B.iterations.length),h(Oe(B.root)),N(B.lambda);const $=t.replace(/\s+/g," ").trim();b(`f2(x) = x - (${B.lambda.toPrecision(6)}) * [ ${$||"f(x)"} ]`)},E=()=>{e(""),n(""),i(""),u(""),o([]),d("สถานะ: รีเซ็ตแล้ว"),v("-"),h("-"),N(null),b("")};return y.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[y.jsx(It,{title:"One-Point Iteration",subtitle:"แปลง f(x) → f2(x) อัตโนมัติ"}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x)"}),y.jsx("input",{type:"text",value:t,onChange:D=>e(D.target.value),placeholder:"เช่น x^3 + x - 1,  sin(x) - x/2,  ln(x) - 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x0"}),y.jsx("input",{type:"number",value:r,onChange:D=>n(D.target.value),placeholder:"เช่น 0.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),y.jsx("input",{type:"text",value:a,onChange:D=>i(D.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:s,onChange:D=>u(D.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"rounded-md bg-slate-900 border border-slate-700 p-3 text-sm text-gray-300 mb-4",children:[y.jsx("div",{className:"font-semibold text-cyan-300 mb-1",children:"f2(x) ที่ใช้ในการคำนวณ"}),y.jsx("div",{className:"break-words",children:A||"— (กรอก f(x) และ x0 เพื่อดู f2(x))"}),C!==null&&y.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["λ (อัตโนมัติ) = ",Oe(C)]})]}),y.jsxs("div",{className:"flex gap-3 mb-4",children:[y.jsx("button",{onClick:_,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),y.jsx("button",{onClick:E,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),y.jsxs("div",{className:"text-sm mb-3",children:[y.jsx("div",{children:c}),y.jsxs("div",{children:["Iterations: ",p]}),y.jsxs("div",{children:["Root: ",m]})]}),l.length>0&&y.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:y.jsxs("table",{className:"w-full text-sm border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[y.jsx("th",{className:"p-2 text-right",children:"iter"}),y.jsx("th",{className:"p-2 text-right",children:"x"}),y.jsx("th",{className:"p-2 text-right",children:"error"})]})}),y.jsx("tbody",{children:l.map(D=>y.jsxs("tr",{className:"border-b border-slate-700",children:[y.jsx("td",{className:"p-2 text-right",children:D.iter}),y.jsx("td",{className:"p-2 text-right",children:Oe(D.x)}),y.jsx("td",{className:"p-2 text-right",children:D.error===null?"-":Oe(D.error)})]},D.iter))})]})}),y.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:[y.jsx("div",{children:"หมายเหตุ: ใช้หน่วยเรเดียนสำหรับ sin/cos/tan; เขียนคูณให้ชัด เช่น 2*x (ไม่ใช่ 2x)"}),y.jsx("div",{children:"ตัวอย่าง f(x): x^3 + x - 1,  e^(-x) - x,  ln(x) - 1,  sin(x) - x/2"})]})]})]})}const Dy="problems_taylor";async function T3(){const t=Rt(qe(Te,Dy),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function M3(t){return kt(qe(Te,Dy),{...t,method:"taylor",createdAt:$t()})}async function Cy(t){return jt(Mt(Te,Dy,t))}const ek=T3,tk=M3,rk=Cy,nk=Cy,ak=Object.freeze(Object.defineProperty({__proto__:null,del:nk,deleteTaylorProblem:Cy,getProblems:ek,getTaylorProblems:T3,remove:rk,save:tk,saveTaylorProblem:M3},Symbol.toStringTag,{value:"Module"}));function _r(){return _r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_r.apply(null,arguments)}var I3={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function Sn(t,e){if(Em(t,e))return t[e];throw typeof t[e]=="function"&&Ty(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function $u(t,e,r){if(Em(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Em(t,e){return!sk(t)&&!Array.isArray(t)?!1:Ge(ok,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ik(t,e){if(!Ty(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function Ty(t,e){return t==null||typeof t[e]!="function"||Ge(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Ge(uk,e)?!0:!(e in Object.prototype||e in Function.prototype)}function sk(t){return typeof t=="object"&&t&&t.constructor===Object}var ok={length:!0,name:!0},uk={toString:!0,valueOf:!0,toLocaleString:!0};class Th{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Sn(this.wrappedObject,e)}set(e,r){return $u(this.wrappedObject,e,r),this}has(e){return Em(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return F3(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){Em(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class P3{constructor(e,r,n){this.a=e,this.b=r,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,r){return this.bKeys.has(e)?this.b.set(e,r):this.a.set(e,r),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return F3(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function F3(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function Lc(){return new Map}function Nu(t){if(!t)return Lc();if(B3(t))return t;if(Ih(t))return new Th(t);throw new Error("createMap can create maps from objects or Maps")}function lk(t){if(t instanceof Th)return t.wrappedObject;var e={};for(var r of t.keys()){var n=t.get(r);$u(e,r,n)}return e}function Ke(t){return typeof t=="number"}function lt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function uc(t){return typeof t=="bigint"}function pi(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function rf(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Wn(t){return t&&t.constructor.prototype.isUnit===!0||!1}function xr(t){return typeof t=="string"}var Qt=Array.isArray;function Ze(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Jn(t){return Array.isArray(t)||Ze(t)}function Sm(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ys(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function My(t){return t&&t.constructor.prototype.isRange===!0||!1}function Mh(t){return t&&t.constructor.prototype.isIndex===!0||!1}function ck(t){return typeof t=="boolean"}function fk(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function R3(t){return t&&t.constructor.prototype.isHelp===!0||!1}function O3(t){return typeof t=="function"}function dk(t){return t instanceof Date}function mk(t){return t instanceof RegExp}function Ih(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!pi(t)&&!rf(t))}function B3(t){return t?t instanceof Map||t instanceof Th||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function hk(t){return t===null}function pk(t){return t===void 0}function fo(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ia(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function vk(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function gk(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function yk(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function _t(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function wg(t){return _t(t)||wr(t)&&t.args.length===1&&_t(t.args[0])&&"-+~".includes(t.op)}function nf(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function bs(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function nl(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gt(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ph(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function wr(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ei(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function xk(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function bk(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xr(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function j3(t){return t&&t.constructor.prototype.isChain===!0||!1}function Kt(t){var e=typeof t;return e==="object"?t===null?"null":lt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function at(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return at(r)});if(t instanceof Date)return new Date(t.valueOf());if(lt(t))return t;if(Ih(t))return wk(t,at);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function wk(t,e){var r={};for(var n in t)Ge(t,n)&&(r[n]=e(t[n]));return r}function k3(t,e){for(var r in e)Ge(e,r)&&(t[r]=e[r]);return t}function Si(t,e){var r,n,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,a=t.length;n<a;n++)if(!Si(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Si(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function Nk(t,e,r){var n=!0,a;Object.defineProperty(t,e,{get:function(){return n&&(a=r(),n=!1),a},set:function(s){a=s,n=!1},configurable:!0,enumerable:!0})}function Ge(t,e){return t&&Object.hasOwnProperty.call(t,e)}function _k(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=t[a];i!==void 0&&(r[a]=i)}return r}var Ek=["Matrix","Array"],Sk=["number","BigNumber","bigint","Fraction"],we=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(I3)};_r(we,I3,{MATRIX_OPTIONS:Ek,NUMBER_OPTIONS:Sk});function ON(){return!0}function ra(){return!1}function zo(){}const BN="Argument is not a typed-function.";function $3(){function t(z){return typeof z=="object"&&z!==null&&z.constructor===Object}const e=[{name:"number",test:function(z){return typeof z=="number"}},{name:"string",test:function(z){return typeof z=="string"}},{name:"boolean",test:function(z){return typeof z=="boolean"}},{name:"Function",test:function(z){return typeof z=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(z){return z instanceof Date}},{name:"RegExp",test:function(z){return z instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(z){return z===null}},{name:"undefined",test:function(z){return z===void 0}}],r={name:"any",test:ON,isAny:!0};let n,a,i=0,s={createCount:0};function u(z){const J=n.get(z);if(J)return J;let ne='Unknown type "'+z+'"';const oe=z.toLowerCase();let ce;for(ce of a)if(ce.toLowerCase()===oe){ne+='. Did you mean "'+ce+'" ?';break}throw new TypeError(ne)}function l(z){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ne=J?u(J).index:a.length,oe=[];for(let ge=0;ge<z.length;++ge){if(!z[ge]||typeof z[ge].name!="string"||typeof z[ge].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Ee=z[ge].name;if(n.has(Ee))throw new TypeError('Duplicate type name "'+Ee+'"');oe.push(Ee),n.set(Ee,{name:Ee,test:z[ge].test,isAny:z[ge].isAny,index:ne+ge,conversionsTo:[]})}const ce=a.slice(ne);a=a.slice(0,ne).concat(oe).concat(ce);for(let ge=ne+oe.length;ge<a.length;++ge)n.get(a[ge]).index=ge}function o(){n=new Map,a=[],i=0,l([r],!1)}o(),l(e);function c(){let z;for(z of a)n.get(z).conversionsTo=[];i=0}function d(z){const J=a.filter(ne=>{const oe=n.get(ne);return!oe.isAny&&oe.test(z)});return J.length?J:["any"]}function m(z){return z&&typeof z=="function"&&"_typedFunctionData"in z}function h(z,J,ne){if(!m(z))throw new TypeError(BN);const oe=ne&&ne.exact,ce=Array.isArray(J)?J.join(","):J,ge=g(ce),Ee=C(ge);if(!oe||Ee in z.signatures){const pt=z._typedFunctionData.signatureMap.get(Ee);if(pt)return pt}const Ae=ge.length;let Ie;if(oe){Ie=[];let pt;for(pt in z.signatures)Ie.push(z._typedFunctionData.signatureMap.get(pt))}else Ie=z._typedFunctionData.signatures;for(let pt=0;pt<Ae;++pt){const yt=ge[pt],qt=[];let et;for(et of Ie){const lr=E(et.params,pt);if(!(!lr||yt.restParam&&!lr.restParam)){if(!lr.hasAny){const O=b(lr);if(yt.types.some(ae=>!O.has(ae.name)))continue}qt.push(et)}}if(Ie=qt,Ie.length===0)break}let De;for(De of Ie)if(De.params.length<=Ae)return De;throw new TypeError("Signature not found (signature: "+(z.name||"unnamed")+"("+C(ge,", ")+"))")}function p(z,J,ne){return h(z,J,ne).implementation}function v(z,J){const ne=u(J);if(ne.test(z))return z;const oe=ne.conversionsTo;if(oe.length===0)throw new Error("There are no conversions to "+J+" defined.");for(let ce=0;ce<oe.length;ce++)if(u(oe[ce].from).test(z))return oe[ce].convert(z);throw new Error("Cannot convert "+z+" to "+J)}function C(z){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return z.map(ne=>ne.name).join(J)}function N(z){const J=z.indexOf("...")===0,oe=(J?z.length>3?z.slice(3):"any":z).split("|").map(Ae=>u(Ae.trim()));let ce=!1,ge=J?"...":"";return{types:oe.map(function(Ae){return ce=Ae.isAny||ce,ge+=Ae.name+"|",{name:Ae.name,typeIndex:Ae.index,test:Ae.test,isAny:Ae.isAny,conversion:null,conversionIndex:-1}}),name:ge.slice(0,-1),hasAny:ce,hasConversion:!1,restParam:J}}function A(z){const J=z.types.map(Ee=>Ee.name),ne=G(J);let oe=z.hasAny,ce=z.name;const ge=ne.map(function(Ee){const Ae=u(Ee.from);return oe=Ae.isAny||oe,ce+="|"+Ee.from,{name:Ee.from,typeIndex:Ae.index,test:Ae.test,isAny:Ae.isAny,conversion:Ee,conversionIndex:Ee.index}});return{types:z.types.concat(ge),name:ce,hasAny:oe,hasConversion:ge.length>0,restParam:z.restParam}}function b(z){return z.typeSet||(z.typeSet=new Set,z.types.forEach(J=>z.typeSet.add(J.name))),z.typeSet}function g(z){const J=[];if(typeof z!="string")throw new TypeError("Signatures must be strings");const ne=z.trim();if(ne==="")return J;const oe=ne.split(",");for(let ce=0;ce<oe.length;++ce){const ge=N(oe[ce].trim());if(ge.restParam&&ce!==oe.length-1)throw new SyntaxError('Unexpected rest parameter "'+oe[ce]+'": only allowed for the last parameter');if(ge.types.length===0)return null;J.push(ge)}return J}function w(z){const J=K(z);return J?J.restParam:!1}function x(z){if(!z||z.types.length===0)return ON;if(z.types.length===1)return u(z.types[0].name).test;if(z.types.length===2){const J=u(z.types[0].name).test,ne=u(z.types[1].name).test;return function(ce){return J(ce)||ne(ce)}}else{const J=z.types.map(function(ne){return u(ne.name).test});return function(oe){for(let ce=0;ce<J.length;ce++)if(J[ce](oe))return!0;return!1}}}function _(z){let J,ne,oe;if(w(z)){J=Q(z).map(x);const ce=J.length,ge=x(K(z)),Ee=function(Ae){for(let Ie=ce;Ie<Ae.length;Ie++)if(!ge(Ae[Ie]))return!1;return!0};return function(Ie){for(let De=0;De<J.length;De++)if(!J[De](Ie[De]))return!1;return Ee(Ie)&&Ie.length>=ce+1}}else return z.length===0?function(ge){return ge.length===0}:z.length===1?(ne=x(z[0]),function(ge){return ne(ge[0])&&ge.length===1}):z.length===2?(ne=x(z[0]),oe=x(z[1]),function(ge){return ne(ge[0])&&oe(ge[1])&&ge.length===2}):(J=z.map(x),function(ge){for(let Ee=0;Ee<J.length;Ee++)if(!J[Ee](ge[Ee]))return!1;return ge.length===J.length})}function E(z,J){return J<z.length?z[J]:w(z)?K(z):null}function D(z,J){const ne=E(z,J);return ne?b(ne):new Set}function T(z){return z.conversion===null||z.conversion===void 0}function M(z,J){const ne=new Set;return z.forEach(oe=>{const ce=D(oe.params,J);let ge;for(ge of ce)ne.add(ge)}),ne.has("any")?["any"]:Array.from(ne)}function I(z,J,ne){let oe,ce;const ge=z||"unnamed";let Ee=ne,Ae;for(Ae=0;Ae<J.length;Ae++){const yt=[];if(Ee.forEach(qt=>{const et=E(qt.params,Ae),lr=x(et);(Ae<qt.params.length||w(qt.params))&&lr(J[Ae])&&yt.push(qt)}),yt.length===0){if(ce=M(Ee,Ae),ce.length>0){const qt=d(J[Ae]);return oe=new TypeError("Unexpected type of argument in function "+ge+" (expected: "+ce.join(" or ")+", actual: "+qt.join(" | ")+", index: "+Ae+")"),oe.data={category:"wrongType",fn:ge,index:Ae,actual:qt,expected:ce},oe}}else Ee=yt}const Ie=Ee.map(function(yt){return w(yt.params)?1/0:yt.params.length});if(J.length<Math.min.apply(null,Ie))return ce=M(Ee,Ae),oe=new TypeError("Too few arguments in function "+ge+" (expected: "+ce.join(" or ")+", index: "+J.length+")"),oe.data={category:"tooFewArgs",fn:ge,index:J.length,expected:ce},oe;const De=Math.max.apply(null,Ie);if(J.length>De)return oe=new TypeError("Too many arguments in function "+ge+" (expected: "+De+", actual: "+J.length+")"),oe.data={category:"tooManyArgs",fn:ge,index:J.length,expectedLength:De},oe;const pt=[];for(let yt=0;yt<J.length;++yt)pt.push(d(J[yt]).join("|"));return oe=new TypeError('Arguments of type "'+pt.join(", ")+'" do not match any of the defined signatures of function '+ge+"."),oe.data={category:"mismatch",actual:pt},oe}function P(z){let J=a.length+1;for(let ne=0;ne<z.types.length;ne++)T(z.types[ne])&&(J=Math.min(J,z.types[ne].typeIndex));return J}function B(z){let J=i+1;for(let ne=0;ne<z.types.length;ne++)T(z.types[ne])||(J=Math.min(J,z.types[ne].conversionIndex));return J}function $(z,J){if(z.hasAny){if(!J.hasAny)return 1}else if(J.hasAny)return-1;if(z.restParam){if(!J.restParam)return 1}else if(J.restParam)return-1;if(z.hasConversion){if(!J.hasConversion)return 1}else if(J.hasConversion)return-1;const ne=P(z)-P(J);if(ne<0)return-1;if(ne>0)return 1;const oe=B(z)-B(J);return oe<0?-1:oe>0?1:0}function R(z,J){const ne=z.params,oe=J.params,ce=K(ne),ge=K(oe),Ee=w(ne),Ae=w(oe);if(Ee&&ce.hasAny){if(!Ae||!ge.hasAny)return 1}else if(Ae&&ge.hasAny)return-1;let Ie=0,De=0,pt;for(pt of ne)pt.hasAny&&++Ie,pt.hasConversion&&++De;let yt=0,qt=0;for(pt of oe)pt.hasAny&&++yt,pt.hasConversion&&++qt;if(Ie!==yt)return Ie-yt;if(Ee&&ce.hasConversion){if(!Ae||!ge.hasConversion)return 1}else if(Ae&&ge.hasConversion)return-1;if(De!==qt)return De-qt;if(Ee){if(!Ae)return 1}else if(Ae)return-1;const et=(ne.length-oe.length)*(Ee?-1:1);if(et!==0)return et;const lr=[];let O=0;for(let pe=0;pe<ne.length;++pe){const Ce=$(ne[pe],oe[pe]);lr.push(Ce),O+=Ce}if(O!==0)return O;let ae;for(ae of lr)if(ae!==0)return ae;return 0}function G(z){if(z.length===0)return[];const J=z.map(u);z.length>1&&J.sort((ce,ge)=>ce.index-ge.index);let ne=J[0].conversionsTo;if(z.length===1)return ne;ne=ne.concat([]);const oe=new Set(z);for(let ce=1;ce<J.length;++ce){let ge;for(ge of J[ce].conversionsTo)oe.has(ge.from)||(ne.push(ge),oe.add(ge.from))}return ne}function L(z,J){let ne=J;if(z.some(ce=>ce.hasConversion)){const ce=w(z),ge=z.map(H);ne=function(){const Ae=[],Ie=ce?arguments.length-1:arguments.length;for(let De=0;De<Ie;De++)Ae[De]=ge[De](arguments[De]);return ce&&(Ae[Ie]=arguments[Ie].map(ge[Ie])),J.apply(this,Ae)}}let oe=ne;if(w(z)){const ce=z.length-1;oe=function(){return ne.apply(this,te(arguments,0,ce).concat([te(arguments,ce)]))}}return oe}function H(z){let J,ne,oe,ce;const ge=[],Ee=[];switch(z.types.forEach(function(Ae){Ae.conversion&&(ge.push(u(Ae.conversion.from).test),Ee.push(Ae.conversion.convert))}),Ee.length){case 0:return function(Ie){return Ie};case 1:return J=ge[0],oe=Ee[0],function(Ie){return J(Ie)?oe(Ie):Ie};case 2:return J=ge[0],ne=ge[1],oe=Ee[0],ce=Ee[1],function(Ie){return J(Ie)?oe(Ie):ne(Ie)?ce(Ie):Ie};default:return function(Ie){for(let De=0;De<Ee.length;De++)if(ge[De](Ie))return Ee[De](Ie);return Ie}}}function Z(z){function J(ne,oe,ce){if(oe<ne.length){const ge=ne[oe];let Ee=[];if(ge.restParam){const Ae=ge.types.filter(T);Ae.length<ge.types.length&&Ee.push({types:Ae,name:"..."+Ae.map(Ie=>Ie.name).join("|"),hasAny:Ae.some(Ie=>Ie.isAny),hasConversion:!1,restParam:!0}),Ee.push(ge)}else Ee=ge.types.map(function(Ae){return{types:[Ae],name:Ae.name,hasAny:Ae.isAny,hasConversion:Ae.conversion,restParam:!1}});return ue(Ee,function(Ae){return J(ne,oe+1,ce.concat([Ae]))})}else return[ce]}return J(z,0,[])}function ie(z,J){const ne=Math.max(z.length,J.length);for(let Ae=0;Ae<ne;Ae++){const Ie=D(z,Ae),De=D(J,Ae);let pt=!1,yt;for(yt of De)if(Ie.has(yt)){pt=!0;break}if(!pt)return!1}const oe=z.length,ce=J.length,ge=w(z),Ee=w(J);return ge?Ee?oe===ce:ce>=oe:Ee?oe>=ce:oe===ce}function k(z){return z.map(J=>Ve(J)?Me(J.referToSelf.callback):$e(J)?he(J.referTo.references,J.referTo.callback):J)}function Y(z,J,ne){const oe=[];let ce;for(ce of z){let ge=ne[ce];if(typeof ge!="number")throw new TypeError('No definition for referenced signature "'+ce+'"');if(ge=J[ge],typeof ge!="function")return!1;oe.push(ge)}return oe}function V(z,J,ne){const oe=k(z),ce=new Array(oe.length).fill(!1);let ge=!0;for(;ge;){ge=!1;let Ee=!0;for(let Ae=0;Ae<oe.length;++Ae){if(ce[Ae])continue;const Ie=oe[Ae];if(Ve(Ie))oe[Ae]=Ie.referToSelf.callback(ne),oe[Ae].referToSelf=Ie.referToSelf,ce[Ae]=!0,Ee=!1;else if($e(Ie)){const De=Y(Ie.referTo.references,oe,J);De?(oe[Ae]=Ie.referTo.callback.apply(this,De),oe[Ae].referTo=Ie.referTo,ce[Ae]=!0,Ee=!1):ge=!0}}if(Ee&&ge)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return oe}function xe(z){const J=/\bthis(\(|\.signatures\b)/;Object.keys(z).forEach(ne=>{const oe=z[ne];if(J.test(oe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function le(z,J){if(s.createCount++,Object.keys(J).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&xe(J);const ne=[],oe=[],ce={},ge=[];let Ee;for(Ee in J){if(!Object.prototype.hasOwnProperty.call(J,Ee))continue;const Vt=g(Ee);if(!Vt)continue;ne.forEach(function(Mi){if(ie(Mi,Vt))throw new TypeError('Conflicting signatures "'+C(Mi)+'" and "'+C(Vt)+'".')}),ne.push(Vt);const ln=oe.length;oe.push(J[Ee]);const wf=Vt.map(A);let $s;for($s of Z(wf)){const Mi=C($s);ge.push({params:$s,name:Mi,fn:ln}),$s.every(xl=>!xl.hasConversion)&&(ce[Mi]=ln)}}ge.sort(R);const Ae=V(oe,ce,qn);let Ie;for(Ie in ce)Object.prototype.hasOwnProperty.call(ce,Ie)&&(ce[Ie]=Ae[ce[Ie]]);const De=[],pt=new Map;for(Ie of ge)pt.has(Ie.name)||(Ie.fn=Ae[Ie.fn],De.push(Ie),pt.set(Ie.name,Ie));const yt=De[0]&&De[0].params.length<=2&&!w(De[0].params),qt=De[1]&&De[1].params.length<=2&&!w(De[1].params),et=De[2]&&De[2].params.length<=2&&!w(De[2].params),lr=De[3]&&De[3].params.length<=2&&!w(De[3].params),O=De[4]&&De[4].params.length<=2&&!w(De[4].params),ae=De[5]&&De[5].params.length<=2&&!w(De[5].params),pe=yt&&qt&&et&&lr&&O&&ae;for(let Vt=0;Vt<De.length;++Vt)De[Vt].test=_(De[Vt].params);const Ce=yt?x(De[0].params[0]):ra,We=qt?x(De[1].params[0]):ra,mt=et?x(De[2].params[0]):ra,Pr=lr?x(De[3].params[0]):ra,ii=O?x(De[4].params[0]):ra,Jh=ae?x(De[5].params[0]):ra,Yh=yt?x(De[0].params[1]):ra,Ti=qt?x(De[1].params[1]):ra,Zh=et?x(De[2].params[1]):ra,ep=lr?x(De[3].params[1]):ra,Bo=O?x(De[4].params[1]):ra,hf=ae?x(De[5].params[1]):ra;for(let Vt=0;Vt<De.length;++Vt)De[Vt].implementation=L(De[Vt].params,De[Vt].fn);const pf=yt?De[0].implementation:zo,pl=qt?De[1].implementation:zo,js=et?De[2].implementation:zo,tp=lr?De[3].implementation:zo,ka=O?De[4].implementation:zo,vf=ae?De[5].implementation:zo,gf=yt?De[0].params.length:-1,vl=qt?De[1].params.length:-1,gl=et?De[2].params.length:-1,yf=lr?De[3].params.length:-1,rp=O?De[4].params.length:-1,xf=ae?De[5].params.length:-1,np=pe?6:0,jo=De.length,bf=De.map(Vt=>Vt.test),yl=De.map(Vt=>Vt.implementation),ks=function(){for(let ln=np;ln<jo;ln++)if(bf[ln](arguments))return yl[ln].apply(this,arguments);return s.onMismatch(z,arguments,De)};function qn(Vt,ln){return arguments.length===gf&&Ce(Vt)&&Yh(ln)?pf.apply(this,arguments):arguments.length===vl&&We(Vt)&&Ti(ln)?pl.apply(this,arguments):arguments.length===gl&&mt(Vt)&&Zh(ln)?js.apply(this,arguments):arguments.length===yf&&Pr(Vt)&&ep(ln)?tp.apply(this,arguments):arguments.length===rp&&ii(Vt)&&Bo(ln)?ka.apply(this,arguments):arguments.length===xf&&Jh(Vt)&&hf(ln)?vf.apply(this,arguments):ks.apply(this,arguments)}try{Object.defineProperty(qn,"name",{value:z})}catch{}return qn.signatures=ce,qn._typedFunctionData={signatures:De,signatureMap:pt},qn}function de(z,J,ne){throw I(z,J,ne)}function Q(z){return te(z,0,z.length-1)}function K(z){return z[z.length-1]}function te(z,J,ne){return Array.prototype.slice.call(z,J,ne)}function se(z,J){for(let ne=0;ne<z.length;ne++)if(J(z[ne]))return z[ne]}function ue(z,J){return Array.prototype.concat.apply([],z.map(J))}function ve(){const z=Q(arguments).map(ne=>C(g(ne))),J=K(arguments);if(typeof J!="function")throw new TypeError("Callback function expected as last argument");return he(z,J)}function he(z,J){return{referTo:{references:z,callback:J}}}function Me(z){if(typeof z!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:z}}}function $e(z){return z&&typeof z.referTo=="object"&&Array.isArray(z.referTo.references)&&typeof z.referTo.callback=="function"}function Ve(z){return z&&typeof z.referToSelf=="object"&&typeof z.referToSelf.callback=="function"}function Be(z,J){if(!z)return J;if(J&&J!==z){const ne=new Error("Function names do not match (expected: "+z+", actual: "+J+")");throw ne.data={actual:J,expected:z},ne}return z}function Le(z){let J;for(const ne in z)Object.prototype.hasOwnProperty.call(z,ne)&&(m(z[ne])||typeof z[ne].signature=="string")&&(J=Be(J,z[ne].name));return J}function W(z,J){let ne;for(ne in J)if(Object.prototype.hasOwnProperty.call(J,ne)){if(ne in z&&J[ne]!==z[ne]){const oe=new Error('Signature "'+ne+'" is defined twice');throw oe.data={signature:ne,sourceFunction:J[ne],destFunction:z[ne]},oe}z[ne]=J[ne]}}const re=s;s=function(z){const J=typeof z=="string",ne=J?1:0;let oe=J?z:"";const ce={};for(let ge=ne;ge<arguments.length;++ge){const Ee=arguments[ge];let Ae={},Ie;if(typeof Ee=="function"?(Ie=Ee.name,typeof Ee.signature=="string"?Ae[Ee.signature]=Ee:m(Ee)&&(Ae=Ee.signatures)):t(Ee)&&(Ae=Ee,J||(Ie=Le(Ee))),Object.keys(Ae).length===0){const De=new TypeError("Argument to 'typed' at index "+ge+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw De.data={index:ge,argument:Ee},De}J||(oe=Be(oe,Ie)),W(ce,Ae)}return le(oe||"",ce)},s.create=$3,s.createCount=re.createCount,s.onMismatch=de,s.throwMismatchError=de,s.createError=I,s.clear=o,s.clearConversions=c,s.addTypes=l,s._findType=u,s.referTo=ve,s.referToSelf=Me,s.convert=v,s.findSignature=h,s.find=p,s.isTypedFunction=m,s.warnAgainstDeprecatedThis=!0,s.addType=function(z,J){let ne="any";J!==!1&&n.has("Object")&&(ne="Object"),s.addTypes([z],ne)};function fe(z){if(!z||typeof z.from!="string"||typeof z.to!="string"||typeof z.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(z.to===z.from)throw new SyntaxError('Illegal to define conversion from "'+z.from+'" to itself.')}return s.addConversion=function(z){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};fe(z);const ne=u(z.to),oe=ne.conversionsTo.find(ce=>ce.from===z.from);if(oe)if(J&&J.override)s.removeConversion({from:oe.from,to:z.to,convert:oe.convert});else throw new Error('There is already a conversion from "'+z.from+'" to "'+ne.name+'"');ne.conversionsTo.push({from:z.from,convert:z.convert,index:i++})},s.addConversions=function(z,J){z.forEach(ne=>s.addConversion(ne,J))},s.removeConversion=function(z){fe(z);const J=u(z.to),ne=se(J.conversionsTo,ce=>ce.from===z.from);if(!ne)throw new Error("Attempt to remove nonexistent conversion from "+z.from+" to "+z.to);if(ne.convert!==z.convert)throw new Error("Conversion to remove does not match existing conversion");const oe=J.conversionsTo.indexOf(ne);J.conversionsTo.splice(oe,1)},s.resolve=function(z,J){if(!m(z))throw new TypeError(BN);const ne=z._typedFunctionData.signatures;for(let oe=0;oe<ne.length;++oe)if(ne[oe].test(J))return ne[oe];return null},s}const Am=$3();function q(t,e,r,n){function a(i){var s=_k(i,e.map(Ck));return Ak(t,e,i),r(s)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),n&&(a.meta=n),a}function Ak(t,e,r){var n=e.filter(i=>!Dk(i)).every(i=>r[i]!==void 0);if(!n){var a=e.filter(i=>r[i]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(i=>'"'.concat(i,'"')).join(", "),"."))}}function Dk(t){return t&&t[0]==="?"}function Ck(t){return t&&t[0]==="?"?t.slice(1):t}function Qe(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Ds(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var Qi=Math.sign||function(t){return t>0?1:t<0?-1:0},Tk=Math.log2||function(e){return Math.log(e)/Math.LN2},Mk=Math.log10||function(e){return Math.log(e)/Math.LN10},Ik=Math.log1p||function(t){return Math.log(t+1)},Pk=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},Fk=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Qp(t,e,r){var n={2:"0b",8:"0o",16:"0x"},a=n[e],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Qe(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Qe(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),i="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(a).concat(t.toString(e)).concat(i)}function no(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:a}=L3(e);switch(r){case"fixed":return z3(t,n);case"exponential":return V3(t,n);case"engineering":return Rk(t,n);case"bin":return Qp(t,2,a);case"oct":return Qp(t,8,a);case"hex":return Qp(t,16,a);case"auto":return Ok(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var i=arguments[2],s=arguments[4];return i!=="."?i+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function L3(t){var e="auto",r,n;if(t!==void 0)if(Ke(t))r=t;else if(lt(t))r=t.toNumber();else if(Ih(t))t.precision!==void 0&&(r=jN(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=jN(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function af(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],a=parseFloat(e[4]||"0"),i=n.indexOf(".");a+=i!==-1?i-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(u){return a-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return s.length===0&&(s.push(0),a++),{sign:r,coefficients:s,exponent:a}}function Rk(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=af(t),n=Fh(r,e),a=n.exponent,i=n.coefficients,s=a%3===0?a:a<0?a-3-a%3:a-a%3;if(Ke(e))for(;e>i.length||a-s+1>i.length;)i.push(0);else for(var u=Math.abs(a-s)-(i.length-1),l=0;l<u;l++)i.push(0);for(var o=Math.abs(a-s),c=1;o>0;)c++,o--;var d=i.slice(c).join(""),m=Ke(e)&&d.length||d.match(/[1-9]/)?"."+d:"",h=i.slice(0,c).join("")+m+"e"+(a>=0?"+":"")+s.toString();return n.sign+h}function z3(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=af(t),n=typeof e=="number"?Fh(r,r.exponent+1+e):r,a=n.coefficients,i=n.exponent+1,s=i+(e||0);return a.length<s&&(a=a.concat(_u(s-a.length))),i<0&&(a=_u(-i+1).concat(a),i=1),i<a.length&&a.splice(i,0,i===0?"0.":"."),n.sign+a.join("")}function V3(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=af(t),n=e?Fh(r,e):r,a=n.coefficients,i=n.exponent;a.length<e&&(a=a.concat(_u(e-a.length)));var s=a.shift();return n.sign+s+(a.length>0?"."+a.join(""):"")+"e"+(i>=0?"+":"")+i}function Ok(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=kN(r==null?void 0:r.lowerExp,-3),a=kN(r==null?void 0:r.upperExp,5),i=af(t),s=e?Fh(i,e):i;if(s.exponent<n||s.exponent>=a)return V3(t,e);var u=s.coefficients,l=s.exponent;u.length<e&&(u=u.concat(_u(e-u.length))),u=u.concat(_u(l-u.length+1+(u.length<e?e-u.length:0))),u=_u(-l).concat(u);var o=l>0?l:0;return o<u.length-1&&u.splice(o+1,0,"."),s.sign+u.join("")}function Fh(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var a=n.splice(e,n.length-e);if(a[0]>=5){var i=e-1;for(n[i]++;n[i]===10;)n.pop(),i===0&&(n.unshift(0),r.exponent++,i++),i--,n[i]++}}return r}function _u(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Bk(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Jr(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}var jk=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},kk=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},$k=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},Lk=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},zk=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},Vk=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function Uk(t,e){var r=!0,n=e>0?!0:e<0?!1:1/e===1/0;return r^n?-t:t}function jN(t,e){if(Ke(t))return t;if(lt(t))return t.toNumber();e()}function kN(t,e){return Ke(t)?t:lt(t)?t.toNumber():e}var U3=function(){return U3=Am.create,Am},qk=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Hk=q("typed",qk,function(e){var{BigNumber:r,Complex:n,DenseMatrix:a,Fraction:i}=e,s=U3();return s.clear(),s.addTypes([{name:"number",test:Ke},{name:"Complex",test:pi},{name:"BigNumber",test:lt},{name:"bigint",test:uc},{name:"Fraction",test:rf},{name:"Unit",test:Wn},{name:"identifier",test:u=>xr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:xr},{name:"Chain",test:j3},{name:"Array",test:Qt},{name:"Matrix",test:Ze},{name:"DenseMatrix",test:Sm},{name:"SparseMatrix",test:Ys},{name:"Range",test:My},{name:"Index",test:Mh},{name:"boolean",test:ck},{name:"ResultSet",test:fk},{name:"Help",test:R3},{name:"function",test:O3},{name:"Date",test:dk},{name:"RegExp",test:mk},{name:"null",test:hk},{name:"undefined",test:pk},{name:"AccessorNode",test:fo},{name:"ArrayNode",test:ia},{name:"AssignmentNode",test:vk},{name:"BlockNode",test:gk},{name:"ConditionalNode",test:yk},{name:"ConstantNode",test:_t},{name:"FunctionNode",test:bs},{name:"FunctionAssignmentNode",test:nf},{name:"IndexNode",test:nl},{name:"Node",test:Gt},{name:"ObjectNode",test:Ph},{name:"OperatorNode",test:wr},{name:"ParenthesisNode",test:Ei},{name:"RangeNode",test:xk},{name:"RelationalNode",test:bk},{name:"SymbolNode",test:Xr},{name:"Map",test:B3},{name:"Object",test:Ih}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Zf(l),Bk(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||ed(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||ed(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return r||Zf(l),new r(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return i||td(l),new i(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||ed(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){i||td(l);var o=new i(l);if(o.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return o}},{from:"string",to:"number",convert:function(l){var o=Number(l);if(isNaN(o))throw new Error('Cannot convert "'+l+'" to a number');return o}},{from:"string",to:"BigNumber",convert:function(l){r||Zf(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){i||td(l);try{return new i(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||ed(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Zf(l),new r(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return i||td(l),new i(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return a||Gk(),new a(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(u,l,o)=>{var c=s.createError(u,l,o);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Jn(l[0])&&o.some(m=>!m.params.includes(","))){var d=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw d.data=c.data,d}throw c},s.onMismatch=(u,l,o)=>{var c=s.createError(u,l,o);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Jn(l[0])&&o.some(m=>!m.params.includes(","))){var d=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw d.data=c.data,d}throw c},s});function Zf(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ed(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Gk(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function td(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var Wk="ResultSet",Qk=[],Xk=q(Wk,Qk,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var lu=9e15,Cs=1e9,Ng="0123456789abcdef",Dm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Cm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",_g={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-lu,maxE:lu,crypto:!1},q3,di,ot=!0,Rh="[DecimalError] ",ws=Rh+"Invalid argument: ",H3=Rh+"Precision limit exceeded",G3=Rh+"crypto unavailable",W3="[object Decimal]",xn=Math.floor,Or=Math.pow,Kk=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Jk=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Yk=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Q3=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ta=1e7,tt=7,Zk=9007199254740991,e7=Dm.length-1,Eg=Cm.length-1,Se={toStringTag:W3};Se.absoluteValue=Se.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Je(t)};Se.ceil=function(){return Je(new this.constructor(this),this.e+1,2)};Se.clampedTo=Se.clamp=function(t,e){var r,n=this,a=n.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(ws+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new a(n)};Se.comparedTo=Se.cmp=function(t){var e,r,n,a,i=this,s=i.d,u=(t=new i.constructor(t)).d,l=i.s,o=t.s;if(!s||!u)return!l||!o?NaN:l!==o?l:s===u?0:!s^l<0?1:-1;if(!s[0]||!u[0])return s[0]?l:u[0]?-o:0;if(l!==o)return l;if(i.e!==t.e)return i.e>t.e^l<0?1:-1;for(n=s.length,a=u.length,e=0,r=n<a?n:a;e<r;++e)if(s[e]!==u[e])return s[e]>u[e]^l<0?1:-1;return n===a?0:n>a^l<0?1:-1};Se.cosine=Se.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+tt,n.rounding=1,r=t7(n,Z3(n,r)),n.precision=t,n.rounding=e,Je(di==2||di==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Se.cubeRoot=Se.cbrt=function(){var t,e,r,n,a,i,s,u,l,o,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(ot=!1,i=c.s*Or(c.s*c,1/3),!i||Math.abs(i)==1/0?(r=tn(c.d),t=c.e,(i=(t-r.length+1)%3)&&(r+=i==1||i==-2?"0":"00"),i=Or(r,1/3),t=xn((t+1)/3)-(t%3==(t<0?-1:2)),i==1/0?r="5e"+t:(r=i.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new d(r),n.s=c.s):n=new d(i.toString()),s=(t=d.precision)+3;;)if(u=n,l=u.times(u).times(u),o=l.plus(c),n=rr(o.plus(c).times(u),o.plus(l),s+2,1),tn(u.d).slice(0,s)===(r=tn(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!a&&r=="4999"){if(!a&&(Je(u,t+1,0),u.times(u).times(u).eq(c))){n=u;break}s+=4,a=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Je(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return ot=!0,Je(n,t,d.rounding,e)};Se.decimalPlaces=Se.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-xn(this.e/tt))*tt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Se.dividedBy=Se.div=function(t){return rr(this,new this.constructor(t))};Se.dividedToIntegerBy=Se.divToInt=function(t){var e=this,r=e.constructor;return Je(rr(e,new r(t),0,1,1),r.precision,r.rounding)};Se.equals=Se.eq=function(t){return this.cmp(t)===0};Se.floor=function(){return Je(new this.constructor(this),this.e+1,3)};Se.greaterThan=Se.gt=function(t){return this.cmp(t)>0};Se.greaterThanOrEqualTo=Se.gte=function(t){var e=this.cmp(t);return e==1||e===0};Se.hyperbolicCosine=Se.cosh=function(){var t,e,r,n,a,i=this,s=i.constructor,u=new s(1);if(!i.isFinite())return new s(i.s?1/0:NaN);if(i.isZero())return u;r=s.precision,n=s.rounding,s.precision=r+Math.max(i.e,i.sd())+4,s.rounding=1,a=i.d.length,a<32?(t=Math.ceil(a/3),e=(1/Bh(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),i=Lu(s,1,i.times(e),new s(1),!0);for(var l,o=t,c=new s(8);o--;)l=i.times(i),i=u.minus(l.times(c.minus(l.times(c))));return Je(i,s.precision=r,s.rounding=n,!0)};Se.hyperbolicSine=Se.sinh=function(){var t,e,r,n,a=this,i=a.constructor;if(!a.isFinite()||a.isZero())return new i(a);if(e=i.precision,r=i.rounding,i.precision=e+Math.max(a.e,a.sd())+4,i.rounding=1,n=a.d.length,n<3)a=Lu(i,2,a,a,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,a=a.times(1/Bh(5,t)),a=Lu(i,2,a,a,!0);for(var s,u=new i(5),l=new i(16),o=new i(20);t--;)s=a.times(a),a=a.times(u.plus(s.times(l.times(s).plus(o))))}return i.precision=e,i.rounding=r,Je(a,e,r,!0)};Se.hyperbolicTangent=Se.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,rr(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Se.inverseCosine=Se.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,a=e.rounding;return r!==-1?r===0?t.isNeg()?Ha(e,n,a):new e(0):new e(NaN):t.isZero()?Ha(e,n+4,a).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=a,t.times(2))};Se.inverseHyperbolicCosine=Se.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ot=!1,r=r.times(r).minus(1).sqrt().plus(r),ot=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Se.inverseHyperbolicSine=Se.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ot=!1,r=r.times(r).plus(1).sqrt().plus(r),ot=!0,n.precision=t,n.rounding=e,r.ln())};Se.inverseHyperbolicTangent=Se.atanh=function(){var t,e,r,n,a=this,i=a.constructor;return a.isFinite()?a.e>=0?new i(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=i.precision,e=i.rounding,n=a.sd(),Math.max(n,t)<2*-a.e-1?Je(new i(a),t,e,!0):(i.precision=r=n-a.e,a=rr(a.plus(1),new i(1).minus(a),r+t,1),i.precision=t+4,i.rounding=1,a=a.ln(),i.precision=t,i.rounding=e,a.times(.5))):new i(NaN)};Se.inverseSine=Se.asin=function(){var t,e,r,n,a=this,i=a.constructor;return a.isZero()?new i(a):(e=a.abs().cmp(1),r=i.precision,n=i.rounding,e!==-1?e===0?(t=Ha(i,r+4,n).times(.5),t.s=a.s,t):new i(NaN):(i.precision=r+6,i.rounding=1,a=a.div(new i(1).minus(a.times(a)).sqrt().plus(1)).atan(),i.precision=r,i.rounding=n,a.times(2)))};Se.inverseTangent=Se.atan=function(){var t,e,r,n,a,i,s,u,l,o=this,c=o.constructor,d=c.precision,m=c.rounding;if(o.isFinite()){if(o.isZero())return new c(o);if(o.abs().eq(1)&&d+4<=Eg)return s=Ha(c,d+4,m).times(.25),s.s=o.s,s}else{if(!o.s)return new c(NaN);if(d+4<=Eg)return s=Ha(c,d+4,m).times(.5),s.s=o.s,s}for(c.precision=u=d+10,c.rounding=1,r=Math.min(28,u/tt+2|0),t=r;t;--t)o=o.div(o.times(o).plus(1).sqrt().plus(1));for(ot=!1,e=Math.ceil(u/tt),n=1,l=o.times(o),s=new c(o),a=o;t!==-1;)if(a=a.times(l),i=s.minus(a.div(n+=2)),a=a.times(l),s=i.plus(a.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===i.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),ot=!0,Je(s,c.precision=d,c.rounding=m,!0)};Se.isFinite=function(){return!!this.d};Se.isInteger=Se.isInt=function(){return!!this.d&&xn(this.e/tt)>this.d.length-2};Se.isNaN=function(){return!this.s};Se.isNegative=Se.isNeg=function(){return this.s<0};Se.isPositive=Se.isPos=function(){return this.s>0};Se.isZero=function(){return!!this.d&&this.d[0]===0};Se.lessThan=Se.lt=function(t){return this.cmp(t)<0};Se.lessThanOrEqualTo=Se.lte=function(t){return this.cmp(t)<1};Se.logarithm=Se.log=function(t){var e,r,n,a,i,s,u,l,o=this,c=o.constructor,d=c.precision,m=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=o.d,o.s<0||!r||!r[0]||o.eq(1))return new c(r&&!r[0]?-1/0:o.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)i=!0;else{for(a=r[0];a%10===0;)a/=10;i=a!==1}if(ot=!1,u=d+h,s=Xi(o,u),n=e?Tm(c,u+10):Xi(t,u),l=rr(s,n,u,1),zc(l.d,a=d,m))do if(u+=10,s=Xi(o,u),n=e?Tm(c,u+10):Xi(t,u),l=rr(s,n,u,1),!i){+tn(l.d).slice(a+1,a+15)+1==1e14&&(l=Je(l,d+1,0));break}while(zc(l.d,a+=10,m));return ot=!0,Je(l,d,m)};Se.minus=Se.sub=function(t){var e,r,n,a,i,s,u,l,o,c,d,m,h=this,p=h.constructor;if(t=new p(t),!h.d||!t.d)return!h.s||!t.s?t=new p(NaN):h.d?t.s=-t.s:t=new p(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(o=h.d,m=t.d,u=p.precision,l=p.rounding,!o[0]||!m[0]){if(m[0])t.s=-t.s;else if(o[0])t=new p(h);else return new p(l===3?-0:0);return ot?Je(t,u,l):t}if(r=xn(t.e/tt),c=xn(h.e/tt),o=o.slice(),i=c-r,i){for(d=i<0,d?(e=o,i=-i,s=m.length):(e=m,r=c,s=o.length),n=Math.max(Math.ceil(u/tt),s)+2,i>n&&(i=n,e.length=1),e.reverse(),n=i;n--;)e.push(0);e.reverse()}else{for(n=o.length,s=m.length,d=n<s,d&&(s=n),n=0;n<s;n++)if(o[n]!=m[n]){d=o[n]<m[n];break}i=0}for(d&&(e=o,o=m,m=e,t.s=-t.s),s=o.length,n=m.length-s;n>0;--n)o[s++]=0;for(n=m.length;n>i;){if(o[--n]<m[n]){for(a=n;a&&o[--a]===0;)o[a]=Ta-1;--o[a],o[n]+=Ta}o[n]-=m[n]}for(;o[--s]===0;)o.pop();for(;o[0]===0;o.shift())--r;return o[0]?(t.d=o,t.e=Oh(o,r),ot?Je(t,u,l):t):new p(l===3?-0:0)};Se.modulo=Se.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Je(new n(r),n.precision,n.rounding):(ot=!1,n.modulo==9?(e=rr(r,t.abs(),0,3,1),e.s*=t.s):e=rr(r,t,0,n.modulo,1),e=e.times(t),ot=!0,r.minus(e))};Se.naturalExponential=Se.exp=function(){return Sg(this)};Se.naturalLogarithm=Se.ln=function(){return Xi(this)};Se.negated=Se.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Je(t)};Se.plus=Se.add=function(t){var e,r,n,a,i,s,u,l,o,c,d=this,m=d.constructor;if(t=new m(t),!d.d||!t.d)return!d.s||!t.s?t=new m(NaN):d.d||(t=new m(t.d||d.s===t.s?d:NaN)),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(o=d.d,c=t.d,u=m.precision,l=m.rounding,!o[0]||!c[0])return c[0]||(t=new m(d)),ot?Je(t,u,l):t;if(i=xn(d.e/tt),n=xn(t.e/tt),o=o.slice(),a=i-n,a){for(a<0?(r=o,a=-a,s=c.length):(r=c,n=i,s=o.length),i=Math.ceil(u/tt),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=o.length,a=c.length,s-a<0&&(a=s,r=c,c=o,o=r),e=0;a;)e=(o[--a]=o[a]+c[a]+e)/Ta|0,o[a]%=Ta;for(e&&(o.unshift(e),++n),s=o.length;o[--s]==0;)o.pop();return t.d=o,t.e=Oh(o,n),ot?Je(t,u,l):t};Se.precision=Se.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ws+t);return r.d?(e=X3(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Se.round=function(){var t=this,e=t.constructor;return Je(new e(t),t.e+1,e.rounding)};Se.sine=Se.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+tt,n.rounding=1,r=n7(n,Z3(n,r)),n.precision=t,n.rounding=e,Je(di>2?r.neg():r,t,e,!0)):new n(NaN)};Se.squareRoot=Se.sqrt=function(){var t,e,r,n,a,i,s=this,u=s.d,l=s.e,o=s.s,c=s.constructor;if(o!==1||!u||!u[0])return new c(!o||o<0&&(!u||u[0])?NaN:u?s:1/0);for(ot=!1,o=Math.sqrt(+s),o==0||o==1/0?(e=tn(u),(e.length+l)%2==0&&(e+="0"),o=Math.sqrt(e),l=xn((l+1)/2)-(l<0||l%2),o==1/0?e="5e"+l:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(o.toString()),r=(l=c.precision)+3;;)if(i=n,n=i.plus(rr(s,i,r+2,1)).times(.5),tn(i.d).slice(0,r)===(e=tn(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!a&&e=="4999"){if(!a&&(Je(i,l+1,0),i.times(i).eq(s))){n=i;break}r+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Je(n,l+1,1),t=!n.times(n).eq(s));break}return ot=!0,Je(n,l,c.rounding,t)};Se.tangent=Se.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=rr(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Je(di==2||di==4?r.neg():r,t,e,!0)):new n(NaN)};Se.times=Se.mul=function(t){var e,r,n,a,i,s,u,l,o,c=this,d=c.constructor,m=c.d,h=(t=new d(t)).d;if(t.s*=c.s,!m||!m[0]||!h||!h[0])return new d(!t.s||m&&!m[0]&&!h||h&&!h[0]&&!m?NaN:!m||!h?t.s/0:t.s*0);for(r=xn(c.e/tt)+xn(t.e/tt),l=m.length,o=h.length,l<o&&(i=m,m=h,h=i,s=l,l=o,o=s),i=[],s=l+o,n=s;n--;)i.push(0);for(n=o;--n>=0;){for(e=0,a=l+n;a>n;)u=i[a]+h[n]*m[a-n-1]+e,i[a--]=u%Ta|0,e=u/Ta|0;i[a]=(i[a]+e)%Ta|0}for(;!i[--s];)i.pop();return e?++r:i.shift(),t.d=i,t.e=Oh(i,r),ot?Je(t,d.precision,d.rounding):t};Se.toBinary=function(t,e){return Iy(this,2,t,e)};Se.toDecimalPlaces=Se.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Vn(t,0,Cs),e===void 0?e=n.rounding:Vn(e,0,8),Je(r,t+r.e+1,e))};Se.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=ei(n,!0):(Vn(t,0,Cs),e===void 0?e=a.rounding:Vn(e,0,8),n=Je(new a(n),t+1,e),r=ei(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Se.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?r=ei(a):(Vn(t,0,Cs),e===void 0?e=i.rounding:Vn(e,0,8),n=Je(new i(a),t+a.e+1,e),r=ei(n,!1,t+n.e+1)),a.isNeg()&&!a.isZero()?"-"+r:r};Se.toFraction=function(t){var e,r,n,a,i,s,u,l,o,c,d,m,h=this,p=h.d,v=h.constructor;if(!p)return new v(h);if(o=r=new v(1),n=l=new v(0),e=new v(n),i=e.e=X3(p)-h.e-1,s=i%tt,e.d[0]=Or(10,s<0?tt+s:s),t==null)t=i>0?e:o;else{if(u=new v(t),!u.isInt()||u.lt(o))throw Error(ws+u);t=u.gt(e)?i>0?e:o:u}for(ot=!1,u=new v(tn(p)),c=v.precision,v.precision=i=p.length*tt*2;d=rr(u,e,0,1,1),a=r.plus(d.times(n)),a.cmp(t)!=1;)r=n,n=a,a=o,o=l.plus(d.times(a)),l=a,a=e,e=u.minus(d.times(a)),u=a;return a=rr(t.minus(r),n,0,1,1),l=l.plus(a.times(o)),r=r.plus(a.times(n)),l.s=o.s=h.s,m=rr(o,n,i,1).minus(h).abs().cmp(rr(l,r,i,1).minus(h).abs())<1?[o,n]:[l,r],v.precision=c,ot=!0,m};Se.toHexadecimal=Se.toHex=function(t,e){return Iy(this,16,t,e)};Se.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:Vn(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ot=!1,r=rr(r,t,0,e,1).times(t),ot=!0,Je(r)):(t.s=r.s,r=t),r};Se.toNumber=function(){return+this};Se.toOctal=function(t,e){return Iy(this,8,t,e)};Se.toPower=Se.pow=function(t){var e,r,n,a,i,s,u=this,l=u.constructor,o=+(t=new l(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new l(Or(+u,o));if(u=new l(u),u.eq(1))return u;if(n=l.precision,i=l.rounding,t.eq(1))return Je(u,n,i);if(e=xn(t.e/tt),e>=t.d.length-1&&(r=o<0?-o:o)<=Zk)return a=K3(l,u,r,n),t.s<0?new l(1).div(a):Je(a,n,i);if(s=u.s,s<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(s=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=s,u}return r=Or(+u,o),e=r==0||!isFinite(r)?xn(o*(Math.log("0."+tn(u.d))/Math.LN10+u.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(ot=!1,l.rounding=u.s=1,r=Math.min(12,(e+"").length),a=Sg(t.times(Xi(u,n+r)),n),a.d&&(a=Je(a,n+5,1),zc(a.d,n,i)&&(e=n+10,a=Je(Sg(t.times(Xi(u,e+r)),e),e+5,1),+tn(a.d).slice(n+1,n+15)+1==1e14&&(a=Je(a,n+1,0)))),a.s=s,ot=!0,l.rounding=i,Je(a,n,i))};Se.toPrecision=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=ei(n,n.e<=a.toExpNeg||n.e>=a.toExpPos):(Vn(t,1,Cs),e===void 0?e=a.rounding:Vn(e,0,8),n=Je(new a(n),t,e),r=ei(n,t<=n.e||n.e<=a.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Se.toSignificantDigits=Se.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Vn(t,1,Cs),e===void 0?e=n.rounding:Vn(e,0,8)),Je(new n(r),t,e)};Se.toString=function(){var t=this,e=t.constructor,r=ei(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Se.truncated=Se.trunc=function(){return Je(new this.constructor(this),this.e+1,1)};Se.valueOf=Se.toJSON=function(){var t=this,e=t.constructor,r=ei(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function tn(t){var e,r,n,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)n=t[e]+"",r=tt-n.length,r&&(i+=Li(r)),i+=n;s=t[e],n=s+"",r=tt-n.length,r&&(i+=Li(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}function Vn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(ws+t)}function zc(t,e,r,n){var a,i,s,u;for(i=t[0];i>=10;i/=10)--e;return--e<0?(e+=tt,a=0):(a=Math.ceil((e+1)/tt),e%=tt),i=Or(10,tt-e),u=t[a]%i|0,n==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),s=r<4&&u==99999||r>3&&u==49999||u==5e4||u==0):s=(r<4&&u+1==i||r>3&&u+1==i/2)&&(t[a+1]/i/100|0)==Or(10,e-2)-1||(u==i/2||u==0)&&(t[a+1]/i/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),s=(n||r<4)&&u==9999||!n&&r>3&&u==4999):s=((n||r<4)&&u+1==i||!n&&r>3&&u+1==i/2)&&(t[a+1]/i/1e3|0)==Or(10,e-3)-1,s}function jd(t,e,r){for(var n,a=[0],i,s=0,u=t.length;s<u;){for(i=a.length;i--;)a[i]*=e;for(a[0]+=Ng.indexOf(t.charAt(s++)),n=0;n<a.length;n++)a[n]>r-1&&(a[n+1]===void 0&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}function t7(t,e){var r,n,a;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),a=(1/Bh(4,r)).toString()):(r=16,a="2.3283064365386962890625e-10"),t.precision+=r,e=Lu(t,1,e.times(a),new t(1));for(var i=r;i--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var rr=function(){function t(n,a,i){var s,u=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+u,n[l]=s%i|0,u=s/i|0;return u&&n.unshift(u),n}function e(n,a,i,s){var u,l;if(i!=s)l=i>s?1:-1;else for(u=l=0;u<i;u++)if(n[u]!=a[u]){l=n[u]>a[u]?1:-1;break}return l}function r(n,a,i,s){for(var u=0;i--;)n[i]-=u,u=n[i]<a[i]?1:0,n[i]=u*s+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s,u,l){var o,c,d,m,h,p,v,C,N,A,b,g,w,x,_,E,D,T,M,I,P=n.constructor,B=n.s==a.s?1:-1,$=n.d,R=a.d;if(!$||!$[0]||!R||!R[0])return new P(!n.s||!a.s||($?R&&$[0]==R[0]:!R)?NaN:$&&$[0]==0||!R?B*0:B/0);for(l?(h=1,c=n.e-a.e):(l=Ta,h=tt,c=xn(n.e/h)-xn(a.e/h)),M=R.length,D=$.length,N=new P(B),A=N.d=[],d=0;R[d]==($[d]||0);d++);if(R[d]>($[d]||0)&&c--,i==null?(x=i=P.precision,s=P.rounding):u?x=i+(n.e-a.e)+1:x=i,x<0)A.push(1),p=!0;else{if(x=x/h+2|0,d=0,M==1){for(m=0,R=R[0],x++;(d<D||m)&&x--;d++)_=m*l+($[d]||0),A[d]=_/R|0,m=_%R|0;p=m||d<D}else{for(m=l/(R[0]+1)|0,m>1&&(R=t(R,m,l),$=t($,m,l),M=R.length,D=$.length),E=M,b=$.slice(0,M),g=b.length;g<M;)b[g++]=0;I=R.slice(),I.unshift(0),T=R[0],R[1]>=l/2&&++T;do m=0,o=e(R,b,M,g),o<0?(w=b[0],M!=g&&(w=w*l+(b[1]||0)),m=w/T|0,m>1?(m>=l&&(m=l-1),v=t(R,m,l),C=v.length,g=b.length,o=e(v,b,C,g),o==1&&(m--,r(v,M<C?I:R,C,l))):(m==0&&(o=m=1),v=R.slice()),C=v.length,C<g&&v.unshift(0),r(b,v,g,l),o==-1&&(g=b.length,o=e(R,b,M,g),o<1&&(m++,r(b,M<g?I:R,g,l))),g=b.length):o===0&&(m++,b=[0]),A[d++]=m,o&&b[0]?b[g++]=$[E]||0:(b=[$[E]],g=1);while((E++<D||b[0]!==void 0)&&x--);p=b[0]!==void 0}A[0]||A.shift()}if(h==1)N.e=c,q3=p;else{for(d=1,m=A[0];m>=10;m/=10)d++;N.e=d+c*h-1,Je(N,u?i+N.e+1:i,s,p)}return N}}();function Je(t,e,r,n){var a,i,s,u,l,o,c,d,m,h=t.constructor;e:if(e!=null){if(d=t.d,!d)return t;for(a=1,u=d[0];u>=10;u/=10)a++;if(i=e-a,i<0)i+=tt,s=e,c=d[m=0],l=c/Or(10,a-s-1)%10|0;else if(m=Math.ceil((i+1)/tt),u=d.length,m>=u)if(n){for(;u++<=m;)d.push(0);c=l=0,a=1,i%=tt,s=i-tt+1}else break e;else{for(c=u=d[m],a=1;u>=10;u/=10)a++;i%=tt,s=i-tt+a,l=s<0?0:c/Or(10,a-s-1)%10|0}if(n=n||e<0||d[m+1]!==void 0||(s<0?c:c%Or(10,a-s-1)),o=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(i>0?s>0?c/Or(10,a-s):0:d[m-1])%10&1||r==(t.s<0?8:7)),e<1||!d[0])return d.length=0,o?(e-=t.e+1,d[0]=Or(10,(tt-e%tt)%tt),t.e=-e||0):d[0]=t.e=0,t;if(i==0?(d.length=m,u=1,m--):(d.length=m+1,u=Or(10,tt-i),d[m]=s>0?(c/Or(10,a-s)%Or(10,s)|0)*u:0),o)for(;;)if(m==0){for(i=1,s=d[0];s>=10;s/=10)i++;for(s=d[0]+=u,u=1;s>=10;s/=10)u++;i!=u&&(t.e++,d[0]==Ta&&(d[0]=1));break}else{if(d[m]+=u,d[m]!=Ta)break;d[m--]=0,u=1}for(i=d.length;d[--i]===0;)d.pop()}return ot&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function ei(t,e,r){if(!t.isFinite())return Y3(t);var n,a=t.e,i=tn(t.d),s=i.length;return e?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Li(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(t.e<0?"e":"e+")+t.e):a<0?(i="0."+Li(-a-1)+i,r&&(n=r-s)>0&&(i+=Li(n))):a>=s?(i+=Li(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Li(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Li(n))),i}function Oh(t,e){var r=t[0];for(e*=tt;r>=10;r/=10)e++;return e}function Tm(t,e,r){if(e>e7)throw ot=!0,r&&(t.precision=r),Error(H3);return Je(new t(Dm),e,1,!0)}function Ha(t,e,r){if(e>Eg)throw Error(H3);return Je(new t(Cm),e,r,!0)}function X3(t){var e=t.length-1,r=e*tt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Li(t){for(var e="";t--;)e+="0";return e}function K3(t,e,r,n){var a,i=new t(1),s=Math.ceil(n/tt+4);for(ot=!1;;){if(r%2&&(i=i.times(e),LN(i.d,s)&&(a=!0)),r=xn(r/2),r===0){r=i.d.length-1,a&&i.d[r]===0&&++i.d[r];break}e=e.times(e),LN(e.d,s)}return ot=!0,i}function $N(t){return t.d[t.d.length-1]&1}function J3(t,e,r){for(var n,a,i=new t(e[0]),s=0;++s<e.length;){if(a=new t(e[s]),!a.s){i=a;break}n=i.cmp(a),(n===r||n===0&&i.s===r)&&(i=a)}return i}function Sg(t,e){var r,n,a,i,s,u,l,o=0,c=0,d=0,m=t.constructor,h=m.rounding,p=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(ot=!1,l=p):l=e,u=new m(.03125);t.e>-2;)t=t.times(u),d+=5;for(n=Math.log(Or(2,d))/Math.LN10*2+5|0,l+=n,r=i=s=new m(1),m.precision=l;;){if(i=Je(i.times(t),l,1),r=r.times(++c),u=s.plus(rr(i,r,l,1)),tn(u.d).slice(0,l)===tn(s.d).slice(0,l)){for(a=d;a--;)s=Je(s.times(s),l,1);if(e==null)if(o<3&&zc(s.d,l-n,h,o))m.precision=l+=10,r=i=u=new m(1),c=0,o++;else return Je(s,m.precision=p,h,ot=!0);else return m.precision=p,s}s=u}}function Xi(t,e){var r,n,a,i,s,u,l,o,c,d,m,h=1,p=10,v=t,C=v.d,N=v.constructor,A=N.rounding,b=N.precision;if(v.s<0||!C||!C[0]||!v.e&&C[0]==1&&C.length==1)return new N(C&&!C[0]?-1/0:v.s!=1?NaN:C?0:v);if(e==null?(ot=!1,c=b):c=e,N.precision=c+=p,r=tn(C),n=r.charAt(0),Math.abs(i=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=tn(v.d),n=r.charAt(0),h++;i=v.e,n>1?(v=new N("0."+r),i++):v=new N(n+"."+r.slice(1))}else return o=Tm(N,c+2,b).times(i+""),v=Xi(new N(n+"."+r.slice(1)),c-p).plus(o),N.precision=b,e==null?Je(v,b,A,ot=!0):v;for(d=v,l=s=v=rr(v.minus(1),v.plus(1),c,1),m=Je(v.times(v),c,1),a=3;;){if(s=Je(s.times(m),c,1),o=l.plus(rr(s,new N(a),c,1)),tn(o.d).slice(0,c)===tn(l.d).slice(0,c))if(l=l.times(2),i!==0&&(l=l.plus(Tm(N,c+2,b).times(i+""))),l=rr(l,new N(h),c,1),e==null)if(zc(l.d,c-p,A,u))N.precision=c+=p,o=s=v=rr(d.minus(1),d.plus(1),c,1),m=Je(v.times(v),c,1),a=u=1;else return Je(l,N.precision=b,A,ot=!0);else return N.precision=b,l;l=o,a+=2}}function Y3(t){return String(t.s*t.s/0)}function kd(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(n,a),e){if(a-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%tt,r<0&&(n+=tt),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=tt;n<a;)t.d.push(+e.slice(n,n+=tt));e=e.slice(n),n=tt-e.length}else n-=a;for(;n--;)e+="0";t.d.push(+e),ot&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function r7(t,e){var r,n,a,i,s,u,l,o,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Q3.test(e))return kd(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Jk.test(e))r=16,e=e.toLowerCase();else if(Kk.test(e))r=2;else if(Yk.test(e))r=8;else throw Error(ws+e);for(i=e.search(/p/i),i>0?(l=+e.slice(i+1),e=e.substring(2,i)):e=e.slice(2),i=e.indexOf("."),s=i>=0,n=t.constructor,s&&(e=e.replace(".",""),u=e.length,i=u-i,a=K3(n,new n(r),i,i*2)),o=jd(e,r,Ta),c=o.length-1,i=c;o[i]===0;--i)o.pop();return i<0?new n(t.s*0):(t.e=Oh(o,c),t.d=o,ot=!1,s&&(t=rr(t,a,u*4)),l&&(t=t.times(Math.abs(l)<54?Or(2,l):Ns.pow(2,l))),ot=!0,t)}function n7(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Lu(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/Bh(5,r)),e=Lu(t,2,e,e);for(var a,i=new t(5),s=new t(16),u=new t(20);r--;)a=e.times(e),e=e.times(i.plus(a.times(s.times(a).minus(u))));return e}function Lu(t,e,r,n,a){var i,s,u,l,o=t.precision,c=Math.ceil(o/tt);for(ot=!1,l=r.times(r),u=new t(n);;){if(s=rr(u.times(l),new t(e++*e++),o,1),u=a?n.plus(s):n.minus(s),n=rr(s.times(l),new t(e++*e++),o,1),s=u.plus(n),s.d[c]!==void 0){for(i=c;s.d[i]===u.d[i]&&i--;);if(i==-1)break}i=u,u=n,n=s,s=i}return ot=!0,s.d.length=c+1,s}function Bh(t,e){for(var r=t;--e;)r*=t;return r}function Z3(t,e){var r,n=e.s<0,a=Ha(t,t.precision,1),i=a.times(.5);if(e=e.abs(),e.lte(i))return di=n?4:1,e;if(r=e.divToInt(a),r.isZero())di=n?3:2;else{if(e=e.minus(r.times(a)),e.lte(i))return di=$N(r)?n?2:3:n?4:1,e;di=$N(r)?n?1:4:n?3:2}return e.minus(a).abs()}function Iy(t,e,r,n){var a,i,s,u,l,o,c,d,m,h=t.constructor,p=r!==void 0;if(p?(Vn(r,1,Cs),n===void 0?n=h.rounding:Vn(n,0,8)):(r=h.precision,n=h.rounding),!t.isFinite())c=Y3(t);else{for(c=ei(t),s=c.indexOf("."),p?(a=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):a=e,s>=0&&(c=c.replace(".",""),m=new h(1),m.e=c.length-s,m.d=jd(ei(m),10,a),m.e=m.d.length),d=jd(c,10,a),i=l=d.length;d[--l]==0;)d.pop();if(!d[0])c=p?"0p+0":"0";else{if(s<0?i--:(t=new h(t),t.d=d,t.e=i,t=rr(t,m,r,n,0,a),d=t.d,i=t.e,o=q3),s=d[r],u=a/2,o=o||d[r+1]!==void 0,o=n<4?(s!==void 0||o)&&(n===0||n===(t.s<0?3:2)):s>u||s===u&&(n===4||o||n===6&&d[r-1]&1||n===(t.s<0?8:7)),d.length=r,o)for(;++d[--r]>a-1;)d[r]=0,r||(++i,d.unshift(1));for(l=d.length;!d[l-1];--l);for(s=0,c="";s<l;s++)c+=Ng.charAt(d[s]);if(p){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)c+="0";for(d=jd(c,a,e),l=d.length;!d[l-1];--l);for(s=1,c="1.";s<l;s++)c+=Ng.charAt(d[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)c="0"+c;c="0."+c}else if(++i>l)for(i-=l;i--;)c+="0";else i<l&&(c=c.slice(0,i)+"."+c.slice(i))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function LN(t,e){if(t.length>e)return t.length=e,!0}function a7(t){return new this(t).abs()}function i7(t){return new this(t).acos()}function s7(t){return new this(t).acosh()}function o7(t,e){return new this(t).plus(e)}function u7(t){return new this(t).asin()}function l7(t){return new this(t).asinh()}function c7(t){return new this(t).atan()}function f7(t){return new this(t).atanh()}function d7(t,e){t=new this(t),e=new this(e);var r,n=this.precision,a=this.rounding,i=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Ha(this,i,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Ha(this,n,a):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Ha(this,i,1).times(.5),r.s=t.s):e.s<0?(this.precision=i,this.rounding=1,r=this.atan(rr(t,e,i,1)),e=Ha(this,i,1),this.precision=n,this.rounding=a,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(rr(t,e,i,1)),r}function m7(t){return new this(t).cbrt()}function h7(t){return Je(t=new this(t),t.e+1,2)}function p7(t,e,r){return new this(t).clamp(e,r)}function v7(t){if(!t||typeof t!="object")throw Error(Rh+"Object expected");var e,r,n,a=t.defaults===!0,i=["precision",1,Cs,"rounding",0,8,"toExpNeg",-lu,0,"toExpPos",0,lu,"maxE",0,lu,"minE",-lu,0,"modulo",0,9];for(e=0;e<i.length;e+=3)if(r=i[e],a&&(this[r]=_g[r]),(n=t[r])!==void 0)if(xn(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(ws+r+": "+n);if(r="crypto",a&&(this[r]=_g[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(G3);else this[r]=!1;else throw Error(ws+r+": "+n);return this}function g7(t){return new this(t).cos()}function y7(t){return new this(t).cosh()}function eM(t){var e,r,n;function a(i){var s,u,l,o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,zN(i)){o.s=i.s,ot?!i.d||i.e>a.maxE?(o.e=NaN,o.d=null):i.e<a.minE?(o.e=0,o.d=[0]):(o.e=i.e,o.d=i.d.slice()):(o.e=i.e,o.d=i.d?i.d.slice():i.d);return}if(l=typeof i,l==="number"){if(i===0){o.s=1/i<0?-1:1,o.e=0,o.d=[0];return}if(i<0?(i=-i,o.s=-1):o.s=1,i===~~i&&i<1e7){for(s=0,u=i;u>=10;u/=10)s++;ot?s>a.maxE?(o.e=NaN,o.d=null):s<a.minE?(o.e=0,o.d=[0]):(o.e=s,o.d=[i]):(o.e=s,o.d=[i]);return}if(i*0!==0){i||(o.s=NaN),o.e=NaN,o.d=null;return}return kd(o,i.toString())}if(l==="string")return(u=i.charCodeAt(0))===45?(i=i.slice(1),o.s=-1):(u===43&&(i=i.slice(1)),o.s=1),Q3.test(i)?kd(o,i):r7(o,i);if(l==="bigint")return i<0?(i=-i,o.s=-1):o.s=1,kd(o,i.toString());throw Error(ws+i)}if(a.prototype=Se,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=v7,a.clone=eM,a.isDecimal=zN,a.abs=a7,a.acos=i7,a.acosh=s7,a.add=o7,a.asin=u7,a.asinh=l7,a.atan=c7,a.atanh=f7,a.atan2=d7,a.cbrt=m7,a.ceil=h7,a.clamp=p7,a.cos=g7,a.cosh=y7,a.div=x7,a.exp=b7,a.floor=w7,a.hypot=N7,a.ln=_7,a.log=E7,a.log10=A7,a.log2=S7,a.max=D7,a.min=C7,a.mod=T7,a.mul=M7,a.pow=I7,a.random=P7,a.round=F7,a.sign=R7,a.sin=O7,a.sinh=B7,a.sqrt=j7,a.sub=k7,a.sum=$7,a.tan=L7,a.tanh=z7,a.trunc=V7,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function x7(t,e){return new this(t).div(e)}function b7(t){return new this(t).exp()}function w7(t){return Je(t=new this(t),t.e+1,3)}function N7(){var t,e,r=new this(0);for(ot=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ot=!0,new this(1/0);r=e}return ot=!0,r.sqrt()}function zN(t){return t instanceof Ns||t&&t.toStringTag===W3||!1}function _7(t){return new this(t).ln()}function E7(t,e){return new this(t).log(e)}function S7(t){return new this(t).log(2)}function A7(t){return new this(t).log(10)}function D7(){return J3(this,arguments,-1)}function C7(){return J3(this,arguments,1)}function T7(t,e){return new this(t).mod(e)}function M7(t,e){return new this(t).mul(e)}function I7(t,e){return new this(t).pow(e)}function P7(t){var e,r,n,a,i=0,s=new this(1),u=[];if(t===void 0?t=this.precision:Vn(t,1,Cs),n=Math.ceil(t/tt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));i<n;)a=e[i],a>=429e7?e[i]=crypto.getRandomValues(new Uint32Array(1))[0]:u[i++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);i<n;)a=e[i]+(e[i+1]<<8)+(e[i+2]<<16)+((e[i+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,i):(u.push(a%1e7),i+=4);i=n/4}else throw Error(G3);else for(;i<n;)u[i++]=Math.random()*1e7|0;for(n=u[--i],t%=tt,n&&t&&(a=Or(10,tt-t),u[i]=(n/a|0)*a);u[i]===0;i--)u.pop();if(i<0)r=0,u=[0];else{for(r=-1;u[0]===0;r-=tt)u.shift();for(n=1,a=u[0];a>=10;a/=10)n++;n<tt&&(r-=tt-n)}return s.e=r,s.d=u,s}function F7(t){return Je(t=new this(t),t.e+1,this.rounding)}function R7(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function O7(t){return new this(t).sin()}function B7(t){return new this(t).sinh()}function j7(t){return new this(t).sqrt()}function k7(t,e){return new this(t).sub(e)}function $7(){var t=0,e=arguments,r=new this(e[t]);for(ot=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ot=!0,Je(r,this.precision,this.rounding)}function L7(t){return new this(t).tan()}function z7(t){return new this(t).tanh()}function V7(t){return Je(t=new this(t),t.e+1,1)}Se[Symbol.for("nodejs.util.inspect.custom")]=Se.toString;Se[Symbol.toStringTag]="Decimal";var Ns=Se.constructor=eM(_g);Dm=new Ns(Dm);Cm=new Ns(Cm);var U7="BigNumber",q7=["?on","config"],H7=q(U7,q7,t=>{var{on:e,config:r}=t,n=Ns.clone({precision:r.precision,modulo:Ns.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(a){return new n(a.value)},e&&e("config",function(a,i){a.precision!==i.precision&&n.config({precision:a.precision})}),n},{isClass:!0});const mn=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},na=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},G7=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},Xp=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Vo=function(){throw SyntaxError("Invalid Param")};function Kp(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const W7={re:0,im:0},Gs=function(t,e){const r=W7;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return be.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return be.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):Vo();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,i=0;n===null&&Vo();for(let s=0;s<n.length;s++){const u=n[s];u===" "||u==="	"||u===`
`||(u==="+"?a++:u==="-"?i++:u==="i"||u==="I"?(a+i===0&&Vo(),n[s+1]!==" "&&!isNaN(n[s+1])?(r.im+=parseFloat((i%2?"-":"")+n[s+1]),s++):r.im+=parseFloat((i%2?"-":"")+"1"),a=i=0):((a+i===0||isNaN(u))&&Vo(),n[s+1]==="i"||n[s+1]==="I"?(r.im+=parseFloat((i%2?"-":"")+u),s++):r.re+=parseFloat((i%2?"-":"")+u),a=i=0))}a+i>0&&Vo();break;case"number":r.im=0,r.re=t;break;default:Vo()}return isNaN(r.re)||isNaN(r.im),r};function be(t,e){if(!(this instanceof be))return new be(t,e);const r=Gs(t,e);this.re=r.re,this.im=r.im}be.prototype={re:0,im:0,sign:function(){const t=Xp(this.re,this.im);return new be(this.re/t,this.im/t)},add:function(t,e){const r=Gs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?be.NAN:be.INFINITY:new be(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=Gs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?be.NAN:be.INFINITY:new be(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=Gs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),i=this.re===0&&this.im===0,s=r.re===0&&r.im===0;return n&&s||a&&i?be.NAN:n||a?be.INFINITY:r.im===0&&this.im===0?new be(this.re*r.re,0):new be(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=Gs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),i=this.re===0&&this.im===0,s=r.re===0&&r.im===0;if(i&&s||n&&a)return be.NAN;if(s||n)return be.INFINITY;if(i||a)return be.ZERO;if(r.im===0)return new be(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const u=r.re/r.im,l=r.re*u+r.im;return new be((this.re*u+this.im)/l,(this.im*u-this.re)/l)}else{const u=r.im/r.re,l=r.im*u+r.re;return new be((this.re+this.im*u)/l,(this.im-this.re*u)/l)}},pow:function(t,e){const r=Gs(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return be.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new be(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new be(Math.pow(this.im,r.re),0);case 1:return new be(0,Math.pow(this.im,r.re));case 2:return new be(-Math.pow(this.im,r.re),0);case 3:return new be(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return be.ZERO;const i=Math.atan2(this.im,this.re),s=Kp(this.re,this.im);let u=Math.exp(r.re*s-r.im*i),l=r.im*s+r.re*i;return new be(u*Math.cos(l),u*Math.sin(l))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new be(Math.sqrt(t),0):new be(0,Math.sqrt(-t));const r=Xp(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),a=Math.abs(e)/(2*n);return t>=0?new be(n,e<0?-a:a):new be(a,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new be(t,0):new be(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new be(Math.expm1(t)*Math.cos(e)+G7(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new be(Math.log(t),0):new be(Kp(t,e),Math.atan2(e,t))},abs:function(){return Xp(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new be(Math.sin(t)*mn(e),Math.cos(t)*na(e))},cos:function(){const t=this.re,e=this.im;return new be(Math.cos(t)*mn(e),-Math.sin(t)*na(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+mn(e);return new be(Math.sin(t)/r,na(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-mn(e);return new be(-Math.sin(t)/r,na(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*mn(2*e)+.5*Math.cos(2*t);return new be(Math.cos(t)*mn(e)/r,Math.sin(t)*na(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*mn(2*e)-.5*Math.cos(2*t);return new be(Math.sin(t)*mn(e)/r,-Math.cos(t)*na(e)/r)},asin:function(){const t=this.re,e=this.im,r=new be(e*e-t*t+1,-2*t*e).sqrt(),n=new be(r.re-e,r.im+t).log();return new be(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new be(e*e-t*t+1,-2*t*e).sqrt(),n=new be(r.re-e,r.im+t).log();return new be(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new be(0,1/0);if(e===-1)return new be(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new be((1-e*e-t*t)/r,-2*t/r).log();return new be(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new be(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new be(t/r,-e/r).atan():new be(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new be(0,1/0);const r=t*t+e*e;return r!==0?new be(t/r,-e/r).acos():new be(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new be(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new be(t/r,-e/r).asin():new be(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new be(na(t)*Math.cos(e),mn(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new be(mn(t)*Math.cos(e),na(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=mn(t)+Math.cos(e);return new be(na(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=mn(t)-Math.cos(e);return new be(na(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-mn(2*t);return new be(-2*na(t)*Math.cos(e)/r,2*mn(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+mn(2*t);return new be(2*mn(t)*Math.cos(e)/r,-2*na(t)*Math.sin(e)/r)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,r=t>1&&e===0,n=1-t,a=1+t,i=n*n+e*e,s=i!==0?new be((a*n-e*e)/i,(e*n+a*e)/i):new be(t!==-1?t/0:0,e!==0?e/0:0),u=s.re;return s.re=Kp(s.re,s.im)/2,s.im=Math.atan2(s.im,u)/2,r&&(s.im=-s.im),s},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new be(0,Math.PI/2);const r=t*t+e*e;return r!==0?new be(t/r,-e/r).atanh():new be(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new be(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const r=t*t+e*e;return r!==0?new be(t/r,-e/r).asinh():new be(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return be.INFINITY;const r=t*t+e*e;return r!==0?new be(t/r,-e/r).acosh():new be(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return be.INFINITY;if(this.isInfinite())return be.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new be(t/r,-e/r)},conjugate:function(){return new be(this.re,-this.im)},neg:function(){return new be(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new be(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new be(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new be(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=Gs(t,e);return Math.abs(r.re-this.re)<=be.EPSILON&&Math.abs(r.im-this.im)<=be.EPSILON},clone:function(){return new be(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<be.EPSILON&&(t=0),Math.abs(e)<be.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};be.ZERO=new be(0,0);be.ONE=new be(1,0);be.I=new be(0,1);be.PI=new be(Math.PI,0);be.E=new be(Math.E,0);be.INFINITY=new be(1/0,1/0);be.NAN=new be(NaN,NaN);be.EPSILON=1e-15;var Q7="Complex",X7=[],K7=q(Q7,X7,()=>(Object.defineProperty(be,"name",{value:"Complex"}),be.prototype.constructor=be,be.prototype.type="Complex",be.prototype.isComplex=!0,be.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},be.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},be.prototype.format=function(t){var e="",r=this.im,n=this.re,a=no(this.re,t),i=no(this.im,t),s=Ke(t)?t:t?t.precision:null;if(s!==null){var u=Math.pow(10,-s);Math.abs(n/r)<u&&(n=0),Math.abs(r/n)<u&&(r=0)}return r===0?e=a:n===0?r===1?e="i":r===-1?e="-i":e=i+"i":r<0?r===-1?e=a+" - i":e=a+" - "+i.substring(1)+"i":r===1?e=a+" + i":e=a+" + "+i+"i",e},be.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return be(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Ke(r)){if(Wn(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Ke(n))return new be({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},be.prototype.valueOf=be.prototype.toString,be.fromJSON=function(t){return new be(t)},be.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},be),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Xe=BigInt(0),bt=BigInt(1),Hr=BigInt(2),lc=BigInt(3),cu=BigInt(5),Rn=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const J7=2e3,ke={s:bt,n:Xe,d:bt};function si(t,e){try{t=BigInt(t)}catch{throw ji()}return t*e}function wa(t){return typeof t=="bigint"?t:Math.floor(t)}function cr(t,e){if(e===Xe)throw Py();const r=Object.create(aa.prototype);r.s=t<Xe?-bt:bt,t=t<Xe?-t:t;const n=Ws(t,e);return r.n=t/n,r.d=e/n,r}const Y7=[Hr*Hr,Hr,Hr*Hr,Hr,Hr*Hr,Hr*lc,Hr,Hr*lc];function Uo(t){const e=Object.create(null);if(t<=bt)return e[t]=bt,e;const r=n=>{e[n]=(e[n]||Xe)+bt};for(;t%Hr===Xe;)r(Hr),t/=Hr;for(;t%lc===Xe;)r(lc),t/=lc;for(;t%cu===Xe;)r(cu),t/=cu;for(let n=0,a=Hr+cu;a*a<=t;){for(;t%a===Xe;)r(a),t/=a;a+=Y7[n],n=n+1&7}return t>bt&&r(t),e}const qr=function(t,e){let r=Xe,n=bt,a=bt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw ji();if(t%1!==0)throw VN();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw ji();if(e%1!==0)throw VN();n=BigInt(e)}a=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw ji();a=r*n}else if(typeof t=="number"){if(isNaN(t))throw ji();if(t<0&&(a=-bt,t=-t),t%1===0)r=BigInt(t);else{let i=1,s=0,u=1,l=1,o=1,c=1e7;for(t>=1&&(i=10**Math.floor(1+Math.log10(t)),t/=i);u<=c&&o<=c;){let d=(s+l)/(u+o);if(t===d){u+o<=c?(r=s+l,n=u+o):o>u?(r=l,n=o):(r=s,n=u);break}else t>d?(s+=l,u+=o):(l+=s,o+=u),u>c?(r=l,n=o):(r=s,n=u)}r=BigInt(r)*BigInt(i),n=BigInt(n)}}else if(typeof t=="string"){let i=0,s=Xe,u=Xe,l=Xe,o=bt,c=bt,d=t.replace(/_/g,"").match(/\d+|./g);if(d===null)throw ji();if(d[i]==="-"?(a=-bt,i++):d[i]==="+"&&i++,d.length===i+1?u=si(d[i++],a):d[i+1]==="."||d[i]==="."?(d[i]!=="."&&(s=si(d[i++],a)),i++,(i+1===d.length||d[i+1]==="("&&d[i+3]===")"||d[i+1]==="'"&&d[i+3]==="'")&&(u=si(d[i],a),o=Rn**BigInt(d[i].length),i++),(d[i]==="("&&d[i+2]===")"||d[i]==="'"&&d[i+2]==="'")&&(l=si(d[i+1],a),c=Rn**BigInt(d[i+1].length)-bt,i+=3)):d[i+1]==="/"||d[i+1]===":"?(u=si(d[i],a),o=si(d[i+2],bt),i+=3):d[i+3]==="/"&&d[i+1]===" "&&(s=si(d[i],a),u=si(d[i+2],a),o=si(d[i+4],bt),i+=5),d.length<=i)n=o*c,a=r=l+n*s+c*u;else throw ji()}else if(typeof t=="bigint")r=t,a=t,n=bt;else throw ji();if(n===Xe)throw Py();ke.s=a<Xe?-bt:bt,ke.n=r<Xe?-r:r,ke.d=n<Xe?-n:n};function Z7(t,e,r){let n=bt;for(;e>Xe;t=t*t%r,e>>=bt)e&bt&&(n=n*t%r);return n}function e$(t,e){for(;e%Hr===Xe;e/=Hr);for(;e%cu===Xe;e/=cu);if(e===bt)return Xe;let r=Rn%e,n=1;for(;r!==bt;n++)if(r=r*Rn%e,n>J7)return Xe;return BigInt(n)}function t$(t,e,r){let n=bt,a=Z7(Rn,r,e);for(let i=0;i<300;i++){if(n===a)return BigInt(i);n=n*Rn%e,a=a*Rn%e}return 0}function Ws(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function aa(t,e){if(qr(t,e),this instanceof aa)t=Ws(ke.d,ke.n),this.s=ke.s,this.n=ke.n/t,this.d=ke.d/t;else return cr(ke.s*ke.n,ke.d)}const Py=function(){return new Error("Division by Zero")},ji=function(){return new Error("Invalid argument")},VN=function(){return new Error("Parameters must be integer")};aa.prototype={s:bt,n:Xe,d:bt,abs:function(){return cr(this.n,this.d)},neg:function(){return cr(-this.s*this.n,this.d)},add:function(t,e){return qr(t,e),cr(this.s*this.n*ke.d+ke.s*this.d*ke.n,this.d*ke.d)},sub:function(t,e){return qr(t,e),cr(this.s*this.n*ke.d-ke.s*this.d*ke.n,this.d*ke.d)},mul:function(t,e){return qr(t,e),cr(this.s*ke.s*this.n*ke.n,this.d*ke.d)},div:function(t,e){return qr(t,e),cr(this.s*ke.s*this.n*ke.d,this.d*ke.n)},clone:function(){return cr(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return cr(this.s*this.n%this.d,bt);if(qr(t,e),Xe===ke.n*this.d)throw Py();return cr(this.s*(ke.d*this.n)%(ke.n*this.d),ke.d*this.d)},gcd:function(t,e){return qr(t,e),cr(Ws(ke.n,this.n)*Ws(ke.d,this.d),ke.d*this.d)},lcm:function(t,e){return qr(t,e),ke.n===Xe&&this.n===Xe?cr(Xe,bt):cr(ke.n*this.n,Ws(ke.n,this.n)*Ws(ke.d,this.d))},inverse:function(){return cr(this.s*this.d,this.n)},pow:function(t,e){if(qr(t,e),ke.d===bt)return ke.s<Xe?cr((this.s*this.d)**ke.n,this.n**ke.n):cr((this.s*this.n)**ke.n,this.d**ke.n);if(this.s<Xe)return null;let r=Uo(this.n),n=Uo(this.d),a=bt,i=bt;for(let s in r)if(s!=="1"){if(s==="0"){a=Xe;break}if(r[s]*=ke.n,r[s]%ke.d===Xe)r[s]/=ke.d;else return null;a*=BigInt(s)**r[s]}for(let s in n)if(s!=="1"){if(n[s]*=ke.n,n[s]%ke.d===Xe)n[s]/=ke.d;else return null;i*=BigInt(s)**n[s]}return ke.s<Xe?cr(i,a):cr(a,i)},log:function(t,e){if(qr(t,e),this.s<=Xe||ke.s<=Xe)return null;const r=Object.create(null),n=Uo(ke.n),a=Uo(ke.d),i=Uo(this.n),s=Uo(this.d);for(const o in a)n[o]=(n[o]||Xe)-a[o];for(const o in s)i[o]=(i[o]||Xe)-s[o];for(const o in n)o!=="1"&&(r[o]=!0);for(const o in i)o!=="1"&&(r[o]=!0);let u=null,l=null;for(const o in r){const c=n[o]||Xe,d=i[o]||Xe;if(c===Xe){if(d!==Xe)return null;continue}let m=d,h=c;const p=Ws(m,h);if(m/=p,h/=p,u===null&&l===null)u=m,l=h;else if(m*l!==u*h)return null}return u!==null&&l!==null?cr(u,l):null},equals:function(t,e){return qr(t,e),this.s*this.n*ke.d===ke.s*ke.n*this.d},lt:function(t,e){return qr(t,e),this.s*this.n*ke.d<ke.s*ke.n*this.d},lte:function(t,e){return qr(t,e),this.s*this.n*ke.d<=ke.s*ke.n*this.d},gt:function(t,e){return qr(t,e),this.s*this.n*ke.d>ke.s*ke.n*this.d},gte:function(t,e){return qr(t,e),this.s*this.n*ke.d>=ke.s*ke.n*this.d},compare:function(t,e){qr(t,e);let r=this.s*this.n*ke.d-ke.s*ke.n*this.d;return(Xe<r)-(r<Xe)},ceil:function(t){return t=Rn**BigInt(t||0),cr(wa(this.s*t*this.n/this.d)+(t*this.n%this.d>Xe&&this.s>=Xe?bt:Xe),t)},floor:function(t){return t=Rn**BigInt(t||0),cr(wa(this.s*t*this.n/this.d)-(t*this.n%this.d>Xe&&this.s<Xe?bt:Xe),t)},round:function(t){return t=Rn**BigInt(t||0),cr(wa(this.s*t*this.n/this.d)+this.s*((this.s>=Xe?bt:Xe)+Hr*(t*this.n%this.d)>this.d?bt:Xe),t)},roundTo:function(t,e){qr(t,e);const r=this.n*ke.d,n=this.d*ke.n,a=r%n;let i=wa(r/n);return a+a>=n&&i++,cr(this.s*i*ke.n,ke.d)},divisible:function(t,e){return qr(t,e),ke.n===Xe?!1:this.n*ke.d%(ke.n*this.d)===Xe},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,r=this.d,n=e$(e,r),a=t$(e,r,n),i=this.s<Xe?"-":"";if(i+=wa(e/r),e%=r,e*=Rn,e&&(i+="."),n){for(let s=a;s--;)i+=wa(e/r),e%=r,e*=Rn;i+="(";for(let s=n;s--;)i+=wa(e/r),e%=r,e*=Rn;i+=")"}else for(let s=t;e&&s--;)i+=wa(e/r),e%=r,e*=Rn;return i},toFraction:function(t=!1){let e=this.n,r=this.d,n=this.s<Xe?"-":"";if(r===bt)n+=e;else{const a=wa(e/r);t&&a>Xe&&(n+=a,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t=!1){let e=this.n,r=this.d,n=this.s<Xe?"-":"";if(r===bt)n+=e;else{const a=wa(e/r);t&&a>Xe&&(n+=a,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d;const r=[];for(;e;){r.push(wa(t/e));const n=t%e;t=e,e=n}return r},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),r=this.abs(),n=r.toContinued();for(let a=1;a<n.length;a++){let i=cr(n[a-1],bt);for(let u=a-2;u>=0;u--)i=i.inverse().add(n[u]);let s=i.sub(r);if(s.n*e<s.d)return i.mul(this.s)}return this}};var r$="Fraction",n$=[],a$=q(r$,n$,()=>(Object.defineProperty(aa,"name",{value:"Fraction"}),aa.prototype.constructor=aa,aa.prototype.type="Fraction",aa.prototype.isFraction=!0,aa.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},aa.fromJSON=function(t){return new aa(t)},aa),{isClass:!0}),i$="Range",s$=[],o$=q(i$,s$,()=>{function t(e,r,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,i=r!=null,s=n!=null;if(a){if(lt(e))e=e.toNumber();else if(typeof e!="number"&&!uc(e))throw new TypeError("Parameter start must be a number or bigint")}if(i){if(lt(r))r=r.toNumber();else if(typeof r!="number"&&!uc(r))throw new TypeError("Parameter end must be a number or bigint")}if(s){if(lt(n))n=n.toNumber();else if(typeof n!="number"&&!uc(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=a?parseFloat(e):0,this.end=i?parseFloat(r):0,this.step=s?parseFloat(n):1,s&&Jr(this.step,0))throw new Error("Step must not be zero")}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var r=e.split(":"),n=r.map(function(i){return parseFloat(i)}),a=n.some(function(i){return isNaN(i)});if(a)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,r=this.start,n=this.step,a=this.end,i=a-r;return Qi(n)===Qi(i)?e=Math.ceil(i/n):i===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var r=this.start,n=this.step,a=this.end,i=0;if(n>0)for(;r<a;)e(r,[i],this),r+=n,i++;else if(n<0)for(;r>a;)e(r,[i],this),r+=n,i++},t.prototype.map=function(e){var r=[];return this.forEach(function(n,a,i){r[a[0]]=e(n,a,i)}),r},t.prototype.toArray=function(){var e=[];return this.forEach(function(r,n){e[n[0]]=r}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var r=no(this.start,e);return this.step!==1&&(r+=":"+no(this.step,e)),r+=":"+no(this.end,e),r},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),u$="Matrix",l$=[],c$=q(u$,l$,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Jp(t,e,r){var n=t.constructor,a=new n(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Qe(r))throw new Error("size must be an integer");if(t.greaterThan(a.pow(r-1).sub(1))||t.lessThan(a.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(a.pow(r))),i="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function f$(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:a}=L3(e);switch(r){case"fixed":return m$(t,n);case"exponential":return UN(t,n);case"engineering":return d$(t,n);case"bin":return Jp(t,2,a);case"oct":return Jp(t,8,a);case"hex":return Jp(t,16,a);case"auto":{var i=qN(e==null?void 0:e.lowerExp,-3),s=qN(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var u,l=t.toSignificantDigits(n),o=l.e;return o>=i&&o<s?u=l.toFixed():u=UN(t,n),u.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],d=arguments[4];return c!=="."?c+d:d})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function d$(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,a=t.mul(Math.pow(10,-n)),i=a.toPrecision(e);if(i.includes("e")){var s=t.constructor;i=new s(i).toFixed()}return i+"e"+(r>=0?"+":"")+n.toString()}function UN(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function m$(t,e){return t.toFixed(e)}function qN(t,e){return Ke(t)?t:lt(t)?t.toNumber():e}function h$(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e}function vt(t,e){var r=p$(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function p$(t,e){if(typeof t=="number")return no(t,e);if(lt(t))return f$(t,e);if(v$(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return tM(t,e);if(xr(t))return fu(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>fu(n)+": "+vt(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function fu(t){for(var e=String(t),r="",n=0;n<e.length;){var a=e.charAt(n);r+=a in HN?HN[a]:a,n++}return'"'+r+'"'}var HN={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ca(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function tM(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,a=0;a<n;a++)a!==0&&(r+=", "),r+=tM(t[a],e);return r+="]",r}else return vt(t,e)}function v$(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function Ag(t,e){if(!xr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Kt(t)+", index: 0)");if(!xr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Kt(e)+", index: 1)");return t===e?0:t>e?1:-1}function ht(t,e,r){if(!(this instanceof ht))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}ht.prototype=new RangeError;ht.prototype.constructor=RangeError;ht.prototype.name="DimensionError";ht.prototype.isDimensionError=!0;function Pa(t,e,r){if(!(this instanceof Pa))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Pa.prototype=new RangeError;Pa.prototype.constructor=RangeError;Pa.prototype.name="IndexError";Pa.prototype.isIndexError=!0;function it(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function rM(t,e,r){var n,a=t.length;if(a!==e[r])throw new ht(a,e[r]);if(r<e.length-1){var i=r+1;for(n=0;n<a;n++){var s=t[n];if(!Array.isArray(s))throw new ht(e.length-1,e.length,"<");rM(t[n],e,i)}}else for(n=0;n<a;n++)if(Array.isArray(t[n]))throw new ht(e.length+1,e.length,">")}function GN(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new ht(t.length,0)}else rM(t,e,0)}function Mm(t,e){var r=t.isMatrix?t._size:it(t),n=e._sourceSize;n.forEach((a,i)=>{if(a!==null&&a!==r[i])throw new ht(a,r[i])})}function Zt(t,e){if(t!==void 0){if(!Ke(t)||!Qe(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Pa(t,e)}}function zu(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&Qt(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(xr(r)&&r.length===0)return!0}return!1}function Vu(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!Ke(a)||!Qe(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+vt(e)+")")}),(Ke(t)||lt(t))&&(t=[t]);var n=r!==void 0?r:0;return Dg(t,e,0,n),t}function Dg(t,e,r,n){var a,i,s=t.length,u=e[r],l=Math.min(s,u);if(t.length=u,r<e.length-1){var o=r+1;for(a=0;a<l;a++)i=t[a],Array.isArray(i)||(i=[i],t[a]=i),Dg(i,e,o,n);for(a=l;a<u;a++)i=[],t[a]=i,Dg(i,e,o,n)}else{for(a=0;a<l;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=l;a<u;a++)t[a]=n}}function Fy(t,e){var r=Tt(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new ht(0,n,"!=");e=Ry(e,n);var a=nM(e);if(n!==a)throw new ht(a,n,"!=");try{return g$(r,e)}catch(i){throw i instanceof ht?new ht(a,n,"!="):i}}function Ry(t,e){var r=nM(t),n=t.slice(),a=-1,i=t.indexOf(a),s=t.indexOf(a,i+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var u=i>=0,l=e%r===0;if(u)if(l)n[i]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function nM(t){return t.reduce((e,r)=>e*r,1)}function g$(t,e){for(var r=t,n,a=e.length-1;a>0;a--){var i=e[a];n=[];for(var s=r.length/i,u=0;u<s;u++)n.push(r.slice(u*i,(u+1)*i));r=n}return r}function Im(t,e){for(var r=it(t);Array.isArray(t)&&t.length===1;)t=t[0],r.shift();for(var n=r.length;r[n-1]===1;)n--;return n<r.length&&(t=aM(t,n,0),r.length=n),t}function aM(t,e,r){var n,a;if(r<e){var i=r+1;for(n=0,a=t.length;n<a;n++)t[n]=aM(t[n],e,i)}else for(;Array.isArray(t);)t=t[0];return t}function iM(t,e,r,n){var a=n||it(t);if(r)for(var i=0;i<r;i++)t=[t],a.unshift(1);for(t=sM(t,e,0);a.length<e;)a.push(1);return t}function sM(t,e,r){var n,a;if(Array.isArray(t)){var i=r+1;for(n=0,a=t.length;n<a;n++)t[n]=sM(t[n],e,i)}else for(var s=r;s<e;s++)t=[t];return t}function Tt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?a(t):n(t),r;function n(i){for(var s=0;s<i.length;s++){var u=i[s];Array.isArray(u)?n(u):r.push(u)}}function a(i){if(Array.isArray(i[0]))for(var s=0;s<i.length;s++)a(i[s]);else for(var u=0;u<i.length;u++)r.push(i[u])}}function cs(t,e){return Array.prototype.map.call(t,e)}function oM(t,e){Array.prototype.forEach.call(t,e)}function WN(t,e){if(it(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function QN(t,e){if(it(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r=>e.test(r))}function XN(t,e){return Array.prototype.join.call(t,e)}function Uu(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e}function Pm(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function jh(t,e){for(var r,n=0,a=0;a<t.length;a++){var i=t[a],s=Array.isArray(i);if(a===0&&s&&(n=i.length),s&&i.length!==n)return;var u=s?jh(i,e):e(i);if(r===void 0)r=u;else if(r!==u)return"mixed"}return r}function uM(t,e,r,n){if(n<r){if(t.length!==e.length)throw new ht(t.length,e.length);for(var a=[],i=0;i<t.length;i++)a[i]=uM(t[i],e[i],r,n+1);return a}else return t.concat(e)}function lM(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return uM(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function Fm(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(m=>m.length),a=Math.max(...n),i=new Array(a).fill(null),s=0;s<e.length;s++)for(var u=e[s],l=n[s],o=0;o<l;o++){var c=a-l+o;u[o]>i[c]&&(i[c]=u[o])}for(var d=0;d<e.length;d++)cM(e[d],i);return i}function cM(t,e){for(var r=e.length,n=t.length,a=0;a<n;a++){var i=r-n+a;if(t[a]<e[i]&&t[a]>1||t[a]>e[i])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[a]," to size ").concat(e[i]))}}function Zs(t,e){var r=it(t);if(Si(r,e))return t;cM(r,e);var n=Fm(r,e),a=n.length,i=[...Array(a-r.length).fill(1),...r],s=x$(t);r.length<a&&(s=Fy(s,i),r=it(s));for(var u=0;u<a;u++)r[u]<n[u]&&(s=y$(s,n[u],u),r=it(s));return s}function y$(t,e,r){return lM(...Array(e).fill(t),r)}function Rm(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=it(t);if(e.length!==r.length)throw new ht(e.length,r.length);for(var n=0;n<e.length;n++)Zt(e[n],r[n]);return e.reduce((a,i)=>a[i],t)}function Cg(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return i(t);var n=[];return a(t,0);function a(s,u){if(Array.isArray(s)){for(var l=s.length,o=Array(l),c=0;c<l;c++)n[u]=c,o[c]=a(s[c],u+1);return o}else return e(s,n.slice(0,u),t)}function i(s){if(Array.isArray(s)){for(var u=s.length,l=Array(u),o=0;o<u;o++)l[o]=i(s[o]);return l}else return e(s)}}function fM(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(r){i(t);return}var n=[];a(t,0);function a(s,u){if(Array.isArray(s))for(var l=s.length,o=0;o<l;o++)n[u]=o,a(s[o],u+1);else e(s,n.slice(0,u),t)}function i(s){if(Array.isArray(s))for(var u=s.length,l=0;l<u;l++)i(s[l]);else e(s)}}function x$(t){return _r([],t)}function mo(t,e,r,n){if(Am.isTypedFunction(t)){var a;if(n)a=1;else{var i=(e.isMatrix?e.size():it(e)).map(()=>0),s=e.isMatrix?e.get(i):Rm(e,i);a=N$(t,s,i,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var l=b$(t,a);u=l!==void 0?l:t}else u=t;return a>=1&&a<=3?{isUnary:a===1,fn:function(){for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];return KN(u,d.slice(0,a),r,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];return KN(u,d,r,t.name)}}}return n===void 0?{isUnary:w$(t),fn:t}:{isUnary:n,fn:t}}function b$(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[a,i]=n;a.split(",").length===e&&r.push(i)}),r.length===1)return r[0]}function w$(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function N$(t,e,r,n){for(var a=[e,r,n],i=3;i>0;i--){var s=a.slice(0,i);if(Am.resolve(t,s)!==null)return i}}function KN(t,e,r,n){try{return t(...e)}catch(a){_$(a,e,r,n)}}function _$(t,e,r,n){var a;if(t instanceof TypeError&&((a=t.data)===null||a===void 0?void 0:a.category)==="wrongType"){var i=[];throw i.push("value: ".concat(Kt(e[0]))),e.length>=2&&i.push("index: ".concat(Kt(e[1]))),e.length>=3&&i.push("array: ".concat(Kt(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(i.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var E$="DenseMatrix",S$=["Matrix","config"],A$=q(E$,S$,t=>{var{Matrix:e,config:r}=t;function n(d,m){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!xr(m))throw new Error("Invalid datatype: "+m);if(Ze(d))d.type==="DenseMatrix"?(this._data=at(d._data),this._size=at(d._size),this._datatype=m||d._datatype):(this._data=d.toArray(),this._size=d.size(),this._datatype=m||d._datatype);else if(d&&Qt(d.data)&&Qt(d.size))this._data=d.data,this._size=d.size,GN(this._data,this._size),this._datatype=m||d.datatype;else if(Qt(d))this._data=c(d),this._size=it(this._data),GN(this._data,this._size),this._datatype=m;else{if(d)throw new TypeError("Unsupported type of data ("+Kt(d)+")");this._data=[],this._size=[0],this._datatype=m}}n.prototype=new e,n.prototype.createDenseMatrix=function(d,m){return new n(d,m)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return jh(this._data,Kt)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(d,m){return new n(d,m)},n.prototype.subset=function(d,m,h){switch(arguments.length){case 1:return a(this,d);case 2:case 3:return s(this,d,m,h);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(d){return Rm(this._data,d)},n.prototype.set=function(d,m,h){if(!Qt(d))throw new TypeError("Array expected");if(d.length<this._size.length)throw new ht(d.length,this._size.length,"<");var p,v,C,N=d.map(function(b){return b+1});o(this,N,h);var A=this._data;for(p=0,v=d.length-1;p<v;p++)C=d[p],Zt(C,A.length),A=A[C];return C=d[d.length-1],Zt(C,A.length),A[C]=m,this};function a(d,m){if(!Mh(m))throw new TypeError("Invalid index");var h=r.legacySubset?m.size().every(w=>w===1):m.isScalar();if(h)return d.get(m.min());var p=m.size();if(p.length!==d._size.length)throw new ht(p.length,d._size.length);for(var v=m.min(),C=m.max(),N=0,A=d._size.length;N<A;N++)Zt(v[N],d._size[N]),Zt(C[N],d._size[N]);var b=new n,g=i(d._data,m);return b._size=g.size,b._datatype=d._datatype,b._data=g.data,r.legacySubset?b.reshape(m.size()):b}function i(d,m){var h=m.size().length-1,p=Array(h);return{data:v(d),size:p.filter(C=>C!==null)};function v(C){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=m.dimension(N);function b(g,w){return Ke(g)?w(g):g.map(w).valueOf()}return Ke(A)?p[N]=null:p[N]=A.size()[0],N<h?b(A,g=>(Zt(g,C.length),v(C[g],N+1))):b(A,g=>(Zt(g,C.length),C[g]))}}function s(d,m,h,p){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var v=m.size(),C=m.isScalar(),N;if(Ze(h)?(N=h.size(),h=h.valueOf()):N=it(h),C){if(N.length!==0)throw new TypeError("Scalar expected");d.set(m.min(),h,p)}else{if(!Si(N,v)){if(N.length===0)h=Zs([h],v);else try{h=Zs(h,v)}catch{}N=it(h)}if(v.length<d._size.length)throw new ht(v.length,d._size.length,"<");if(N.length<v.length){for(var A=0,b=0;v[A]===1&&N[A]===1;)A++;for(;v[A]===1;)b++,A++;h=iM(h,v.length,b,N)}if(!Si(v,N))throw new ht(v,N,">");var g=m.max().map(function(w){return w+1});o(d,g,p),u(d._data,m,h)}return d}function u(d,m,h){var p=m.size().length-1;v(d,h);function v(C,N){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=m.dimension(A),g=(x,_)=>{Zt(x,C.length),v(C[x],N[_[0]],A+1)},w=(x,_)=>{Zt(x,C.length),C[x]=N[_[0]]};A<p?Ke(b)?g(b,[0]):b.forEach(g):Ke(b)?w(b,[0]):b.forEach(w)}}n.prototype.resize=function(d,m,h){if(!Jn(d))throw new TypeError("Array or Matrix expected");var p=d.valueOf().map(C=>Array.isArray(C)&&C.length===1?C[0]:C),v=h?this.clone():this;return l(v,p,m)};function l(d,m,h){if(m.length===0){for(var p=d._data;Qt(p);)p=p[0];return p}return d._size=m.slice(0),d._data=Vu(d._data,d._size,h),d}n.prototype.reshape=function(d,m){var h=m?this.clone():this;h._data=Fy(h._data,d);var p=h._size.reduce((v,C)=>v*C);return h._size=Ry(d,p),h};function o(d,m,h){for(var p=d._size.slice(0),v=!1;p.length<m.length;)p.push(0),v=!0;for(var C=0,N=m.length;C<N;C++)m[C]>p[C]&&(p[C]=m[C],v=!0);v&&l(d,p,h)}n.prototype.clone=function(){var d=new n({data:at(this._data),size:at(this._size),datatype:this._datatype});return d},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,p=h._size.length-1;if(p<0)return h.clone();var v=mo(d,h,"map",m),C=v.fn,N=h.create(void 0,h._datatype);if(N._size=h._size,m||v.isUnary)return N._data=_(h._data),N;if(p===0){for(var A=h.valueOf(),b=Array(A.length),g=0;g<A.length;g++)b[g]=C(A[g],[g],h);return N._data=b,N}var w=[];return N._data=x(h._data),N;function x(E){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=Array(E.length);if(D<p)for(var M=0;M<E.length;M++)w[D]=M,T[M]=x(E[M],D+1);else for(var I=0;I<E.length;I++)w[D]=I,T[I]=C(E[I],w.slice(),h);return T}function _(E){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=Array(E.length);if(D<p)for(var M=0;M<E.length;M++)T[M]=_(E[M],D+1);else for(var I=0;I<E.length;I++)T[I]=C(E[I]);return T}},n.prototype.forEach=function(d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,p=h._size.length-1;if(p<0)return;var v=mo(d,h,"map",m),C=v.fn;if(m||v.isUnary){g(h._data);return}if(p===0){for(var N=0;N<h._data.length;N++)C(h._data[N],[N],h);return}var A=[];b(h._data);function b(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<p)for(var _=0;_<w.length;_++)A[x]=_,b(w[_],x+1);else for(var E=0;E<w.length;E++)A[x]=E,C(w[E],A.slice(),h)}function g(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<p)for(var _=0;_<w.length;_++)g(w[_],x+1);else for(var E=0;E<w.length;E++)C(w[E])}},n.prototype[Symbol.iterator]=function*(){var d=this._size.length-1;if(!(d<0)){if(d===0){for(var m=0;m<this._data.length;m++)yield{value:this._data[m],index:[m]};return}for(var h=Array(d+1).fill(0),p=this._size.reduce((b,g)=>b*g,1),v=0;v<p;v++){for(var C=this._data,N=0;N<d;N++)C=C[h[N]];yield{value:C[h[d]],index:h.slice()};for(var A=d;A>=0&&(h[A]++,!(h[A]<this._size[A]));A--)h[A]=0}}},n.prototype.rows=function(){var d=[],m=this.size();if(m.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var p of h)d.push(new n([p],this._datatype));return d},n.prototype.columns=function(){var d=this,m=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,v=function(A){var b=p.map(g=>[g[A]]);m.push(new n(b,d._datatype))},C=0;C<h[1];C++)v(C);return m},n.prototype.toArray=function(){return at(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(d){return vt(this._data,d)},n.prototype.toString=function(){return vt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(d){if(d){if(lt(d)&&(d=d.toNumber()),!Ke(d)||!Qe(d))throw new TypeError("The parameter k must be an integer number")}else d=0;for(var m=d>0?d:0,h=d<0?-d:0,p=this._size[0],v=this._size[1],C=Math.min(p-h,v-m),N=[],A=0;A<C;A++)N[A]=this._data[A+h][A+m];return new n({data:N,size:[C],datatype:this._datatype})},n.diagonal=function(d,m,h,p){if(!Qt(d))throw new TypeError("Array expected, size parameter");if(d.length!==2)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(E){if(lt(E)&&(E=E.toNumber()),!Ke(E)||!Qe(E)||E<1)throw new Error("Size values must be positive integers");return E}),h){if(lt(h)&&(h=h.toNumber()),!Ke(h)||!Qe(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var v=h>0?h:0,C=h<0?-h:0,N=d[0],A=d[1],b=Math.min(N-C,A-v),g;if(Qt(m)){if(m.length!==b)throw new Error("Invalid value array length");g=function(D){return m[D]}}else if(Ze(m)){var w=m.size();if(w.length!==1||w[0]!==b)throw new Error("Invalid matrix length");g=function(D){return m.get([D])}}else g=function(){return m};p||(p=lt(g(0))?g(0).mul(0):0);var x=[];if(d.length>0){x=Vu(x,d,p);for(var _=0;_<b;_++)x[_+C][_+v]=g(_)}return new n({data:x,size:[N,A]})},n.fromJSON=function(d){return new n(d)},n.prototype.swapRows=function(d,m){if(!Ke(d)||!Qe(d)||!Ke(m)||!Qe(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Zt(d,this._size[0]),Zt(m,this._size[0]),n._swapRows(d,m,this._data),this},n._swapRows=function(d,m,h){var p=h[d];h[d]=h[m],h[m]=p};function c(d){return Ze(d)?c(d.valueOf()):Qt(d)?d.map(c):d}return n},{isClass:!0}),JN="clone",D$=["typed"],C$=q(JN,D$,t=>{var{typed:e}=t;return e(JN,{any:at})});function dM(t){var e=t.length,r=t[0].length,n,a,i=[];for(a=0;a<r;a++){var s=[];for(n=0;n<e;n++)s.push(t[n][a]);i.push(s)}return i}function al(t){for(var e=0;e<t.length;e++)if(Jn(t[e]))return!0;return!1}function _s(t,e){Ze(t)?t.forEach(r=>e(r),!1,!0):fM(t,e,!0)}function ct(t,e,r){if(!r)return Ze(t)?t.map(a=>e(a),!1,!0):Cg(t,e,!0);var n=a=>a===0?a:e(a);return Ze(t)?t.map(a=>n(a),!1,!0):Cg(t,n,!0)}function kh(t,e,r){var n=Array.isArray(t)?it(t):t.size();if(e<0||e>=n.length)throw new Pa(e,n.length);return Ze(t)?t.create(Om(t.valueOf(),e,r),t.datatype()):Om(t,e,r)}function Om(t,e,r){var n,a,i,s;if(e<=0)if(Array.isArray(t[0])){for(s=dM(t),a=[],n=0;n<s.length;n++)a[n]=Om(s[n],e-1,r);return a}else{for(i=t[0],n=1;n<t.length;n++)i=r(i,t[n]);return i}else{for(a=[],n=0;n<t.length;n++)a[n]=Om(t[n],e-1,r);return a}}function YN(t,e,r,n,a,i,s,u,l,o,c){var d=t._values,m=t._index,h=t._ptr,p,v,C,N;if(n)for(v=h[e],C=h[e+1],p=v;p<C;p++)N=m[p],r[N]!==i?(r[N]=i,s.push(N),n[N]=d[p]):(n[N]=u(n[N],d[p]),a[N]=i);else for(v=h[e],C=h[e+1],p=v;p<C;p++)N=m[p],r[N]!==i?(r[N]=i,s.push(N)):a[N]=i}var ZN="isInteger",T$=["typed"],M$=q(ZN,T$,t=>{var{typed:e}=t;return e(ZN,{number:Qe,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),Fa="number",il="number, number";function mM(t){return Math.abs(t)}mM.signature=Fa;function hM(t,e){return t+e}hM.signature=il;function pM(t,e){return t-e}pM.signature=il;function vM(t,e){return t*e}vM.signature=il;function gM(t){return-t}gM.signature=Fa;function yM(t){return t}yM.signature=Fa;function Gl(t){return Pk(t)}Gl.signature=Fa;function xM(t){return t*t*t}xM.signature=Fa;function bM(t){return Math.exp(t)}bM.signature=Fa;function wM(t){return Fk(t)}wM.signature=Fa;function NM(t,e){if(!Qe(t)||!Qe(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}NM.signature=il;function e2(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function Bm(t){return Mk(t)}Bm.signature=Fa;function Tg(t){return Tk(t)}Tg.signature=Fa;function t2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=e<0;if(r&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return r?1/0:0;if(!isFinite(t))return r?0:t;var n=Math.pow(Math.abs(t),1/e);return n=t<0?-n:n,r?1/n:n}function Mg(t){return Qi(t)}Mg.signature=Fa;function _M(t){return t*t}_M.signature=Fa;function EM(t,e){var r,n,a,i=0,s=1,u=1,l=0;if(!Qe(t)||!Qe(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),a=t-n*e,r=i,i=s-n*i,s=r,r=u,u=l-n*u,l=r,t=e,e=a;var o;return t<0?o=[-t,-s,-l]:o=[t,t?s:0,l],o}EM.signature=il;function SM(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}SM.signature=il;function jl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Qe(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(z3(t,e))}var I$="number",sl="number, number";function AM(t,e){if(!Qe(t)||!Qe(e))throw new Error("Integers expected in function bitAnd");return t&e}AM.signature=sl;function DM(t){if(!Qe(t))throw new Error("Integer expected in function bitNot");return~t}DM.signature=I$;function CM(t,e){if(!Qe(t)||!Qe(e))throw new Error("Integers expected in function bitOr");return t|e}CM.signature=sl;function TM(t,e){if(!Qe(t)||!Qe(e))throw new Error("Integers expected in function bitXor");return t^e}TM.signature=sl;function MM(t,e){if(!Qe(t)||!Qe(e))throw new Error("Integers expected in function leftShift");return t<<e}MM.signature=sl;function IM(t,e){if(!Qe(t)||!Qe(e))throw new Error("Integers expected in function rightArithShift");return t>>e}IM.signature=sl;function PM(t,e){if(!Qe(t)||!Qe(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}PM.signature=sl;function mi(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return mi(t,r)*mi(r+1,e)}function FM(t,e){if(!Qe(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!Qe(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,a=e<r?r+1:e+1,i=2,s=e<r?e:r,u=a;u<=t;++u)for(n*=u;i<=s&&n%i===0;)n/=i,++i;return i<=s&&(n/=mi(i,s)),n}FM.signature="number, number";var P$=Math.PI,F$=2*Math.PI,R$=Math.E,O$=1.618033988749895,B$="number",Oy="number, number";function RM(t){return!t}RM.signature=B$;function Ig(t,e){return!!(t||e)}Ig.signature=Oy;function Pg(t,e){return!!t!=!!e}Pg.signature=Oy;function Fg(t,e){return!!(t&&e)}Fg.signature=Oy;function jm(t){var e;if(Qe(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:mi(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*jm(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,a=n*t,i=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*a)+163879/(209018880*i)+5246819/(75246796800*i*t))}--t,e=Eu[0];for(var s=1;s<Eu.length;++s)e+=Eu[s]/(t+s);var u=t+OM+.5;return Math.sqrt(2*Math.PI)*Math.pow(u,t+.5)*Math.exp(-u)*e}jm.signature="number";var OM=4.7421875,Eu=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],BM=.9189385332046728,j$=5,k$=7,r2=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function km(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-km(1-t);t=t-1;for(var e=t+j$+.5,r=r2[0],n=k$-1;n>=1;n--)r+=r2[n]/(t+n);return BM+(t+.5)*Math.log(e)-e+Math.log(r)}km.signature="number";var bn="number";function jM(t){return jk(t)}jM.signature=bn;function kM(t){return Math.atan(1/t)}kM.signature=bn;function $M(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}$M.signature=bn;function LM(t){return Math.asin(1/t)}LM.signature=bn;function zM(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}zM.signature=bn;function VM(t){return Math.acos(1/t)}VM.signature=bn;function UM(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}UM.signature=bn;function qM(t){return kk(t)}qM.signature=bn;function HM(t){return $k(t)}HM.signature=bn;function GM(t){return 1/Math.tan(t)}GM.signature=bn;function WM(t){var e=Math.exp(2*t);return(e+1)/(e-1)}WM.signature=bn;function QM(t){return 1/Math.sin(t)}QM.signature=bn;function XM(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Qi(t)}XM.signature=bn;function KM(t){return 1/Math.cos(t)}KM.signature=bn;function JM(t){return 2/(Math.exp(t)+Math.exp(-t))}JM.signature=bn;function YM(t){return zk(t)}YM.signature=bn;var By="number";function ZM(t){return t<0}ZM.signature=By;function e4(t){return t>0}e4.signature=By;function t4(t){return Number.isNaN(t)}t4.signature=By;function va(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var n2="isNegative",$$=["typed","config"],L$=q(n2,$$,t=>{var{typed:e,config:r}=t;return e(n2,{number:n=>Jr(n,0,r.relTol,r.absTol)?!1:ZM(n),BigNumber:n=>va(n,new n.constructor(0),r.relTol,r.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),a2="isNumeric",z$=["typed"],V$=q(a2,z$,t=>{var{typed:e}=t;return e(a2,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),i2="hasNumericValue",U$=["typed","isNumeric"],q$=q(i2,U$,t=>{var{typed:e,isNumeric:r}=t;return e(i2,{boolean:()=>!0,string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return r(a)}})}),s2="isPositive",H$=["typed","config"],G$=q(s2,H$,t=>{var{typed:e,config:r}=t;return e(s2,{number:n=>Jr(n,0,r.relTol,r.absTol)?!1:e4(n),BigNumber:n=>va(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),o2="isZero",W$=["typed","equalScalar"],Q$=q(o2,W$,t=>{var{typed:e,equalScalar:r}=t;return e(o2,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),u2="isNaN",X$=["typed"],K$=q(u2,X$,t=>{var{typed:e}=t;return e(u2,{number:t4,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),l2="typeOf",J$=["typed"],Y$=q(l2,J$,t=>{var{typed:e}=t;return e(l2,{any:Kt})});function Z$(t,e,r,n){return Jr(t.re,e.re,r,n)&&Jr(t.im,e.im,r,n)}var ol=q("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),a.valueType()])(n.value,a.value)})}}),$m="equalScalar",eL=["typed","config"],tL=q($m,eL,t=>{var{typed:e,config:r}=t,n=ol({typed:e});return e($m,{"boolean, boolean":function(i,s){return i===s},"number, number":function(i,s){return Jr(i,s,r.relTol,r.absTol)},"BigNumber, BigNumber":function(i,s){return i.eq(s)||va(i,s,r.relTol,r.absTol)},"bigint, bigint":function(i,s){return i===s},"Fraction, Fraction":function(i,s){return i.equals(s)},"Complex, Complex":function(i,s){return Z$(i,s,r.relTol,r.absTol)}},n)});q($m,["typed","config"],t=>{var{typed:e,config:r}=t;return e($m,{"number, number":function(a,i){return Jr(a,i,r.relTol,r.absTol)}})});var rL="SparseMatrix",nL=["typed","equalScalar","Matrix"],aL=q(rL,nL,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function a(v,C){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(C&&!xr(C))throw new Error("Invalid datatype: "+C);if(Ze(v))i(this,v,C);else if(v&&Qt(v.index)&&Qt(v.ptr)&&Qt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=C||v.datatype;else if(Qt(v))s(this,v,C);else{if(v)throw new TypeError("Unsupported type of data ("+Kt(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=C}}function i(v,C,N){C.type==="SparseMatrix"?(v._values=C._values?at(C._values):void 0,v._index=at(C._index),v._ptr=at(C._ptr),v._size=at(C._size),v._datatype=N||C._datatype):s(v,C.valueOf(),N||C._datatype)}function s(v,C,N){v._values=[],v._index=[],v._ptr=[],v._datatype=N;var A=C.length,b=0,g=r,w=0;if(xr(N)&&(g=e.find(r,[N,N])||r,w=e.convert(0,N)),A>0){var x=0;do{v._ptr.push(v._index.length);for(var _=0;_<A;_++){var E=C[_];if(Qt(E)){if(x===0&&b<E.length&&(b=E.length),x<E.length){var D=E[x];g(D,w)||(v._values.push(D),v._index.push(_))}}else x===0&&b<1&&(b=1),g(E,w)||(v._values.push(E),v._index.push(_))}x++}while(x<b)}v._ptr.push(v._index.length),v._size=[A,b]}a.prototype=new n,a.prototype.createSparseMatrix=function(v,C){return new a(v,C)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return jh(this._values,Kt)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(v,C){return new a(v,C)},a.prototype.density=function(){var v=this._size[0],C=this._size[1];return v!==0&&C!==0?this._index.length/(v*C):0},a.prototype.subset=function(v,C,N){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,v);case 2:case 3:return l(this,v,C,N);default:throw new SyntaxError("Wrong number of arguments")}};function u(v,C){if(!Mh(C))throw new TypeError("Invalid index");var N=C.isScalar();if(N)return v.get(C.min());var A=C.size();if(A.length!==v._size.length)throw new ht(A.length,v._size.length);var b,g,w,x,_=C.min(),E=C.max();for(b=0,g=v._size.length;b<g;b++)Zt(_[b],v._size[b]),Zt(E[b],v._size[b]);var D=v._values,T=v._index,M=v._ptr,I=C.dimension(0),P=C.dimension(1),B=[],$=[];function R(ie,k){$[ie]=k[0],B[ie]=!0}Number.isInteger(I)?R(I,[0]):I.forEach(R);var G=D?[]:void 0,L=[],H=[];function Z(ie){for(H.push(L.length),w=M[ie],x=M[ie+1];w<x;w++)b=T[w],B[b]===!0&&(L.push($[b]),G&&G.push(D[w]))}return Number.isInteger(P)?Z(P):P.forEach(Z),H.push(L.length),new a({values:G,index:L,ptr:H,size:A,datatype:v._datatype})}function l(v,C,N,A){if(!C||C.isIndex!==!0)throw new TypeError("Invalid index");var b=C.size(),g=C.isScalar(),w;if(Ze(N)?(w=N.size(),N=N.toArray()):w=it(N),g){if(w.length!==0)throw new TypeError("Scalar expected");v.set(C.min(),N,A)}else{if(b.length!==1&&b.length!==2)throw new ht(b.length,v._size.length,"<");if(w.length<b.length){for(var x=0,_=0;b[x]===1&&w[x]===1;)x++;for(;b[x]===1;)_++,x++;N=iM(N,b.length,_,w)}if(!Si(b,w))throw new ht(b,w,">");if(b.length===1){var E=C.dimension(0);M(E,(I,P)=>{Zt(I),v.set([I,0],N[P[0]],A)})}else{var D=C.dimension(0),T=C.dimension(1);M(D,(I,P)=>{Zt(I),M(T,(B,$)=>{Zt(B),v.set([I,B],N[P[0]][$[0]],A)})})}}return v;function M(I,P){Ke(I)?P(I,[0]):I.forEach(P)}}a.prototype.get=function(v){if(!Qt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new ht(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var C=v[0],N=v[1];Zt(C,this._size[0]),Zt(N,this._size[1]);var A=o(C,this._ptr[N],this._ptr[N+1],this._index);return A<this._ptr[N+1]&&this._index[A]===C?this._values[A]:0},a.prototype.set=function(v,C,N){if(!Qt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new ht(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var A=v[0],b=v[1],g=this._size[0],w=this._size[1],x=r,_=0;xr(this._datatype)&&(x=e.find(r,[this._datatype,this._datatype])||r,_=e.convert(0,this._datatype)),(A>g-1||b>w-1)&&(m(this,Math.max(A+1,g),Math.max(b+1,w),N),g=this._size[0],w=this._size[1]),Zt(A,g),Zt(b,w);var E=o(A,this._ptr[b],this._ptr[b+1],this._index);return E<this._ptr[b+1]&&this._index[E]===A?x(C,_)?c(E,b,this._values,this._index,this._ptr):this._values[E]=C:x(C,_)||d(E,A,b,C,this._values,this._index,this._ptr),this};function o(v,C,N,A){if(N-C===0)return N;for(var b=C;b<N;b++)if(A[b]===v)return b;return C}function c(v,C,N,A,b){N.splice(v,1),A.splice(v,1);for(var g=C+1;g<b.length;g++)b[g]--}function d(v,C,N,A,b,g,w){b.splice(v,0,A),g.splice(v,0,C);for(var x=N+1;x<w.length;x++)w[x]++}a.prototype.resize=function(v,C,N){if(!Jn(v))throw new TypeError("Array or Matrix expected");var A=v.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g);if(A.length!==2)throw new Error("Only two dimensions matrix are supported");A.forEach(function(g){if(!Ke(g)||!Qe(g)||g<0)throw new TypeError("Invalid size, must contain positive integers (size: "+vt(A)+")")});var b=N?this.clone():this;return m(b,A[0],A[1],C)};function m(v,C,N,A){var b=A||0,g=r,w=0;xr(v._datatype)&&(g=e.find(r,[v._datatype,v._datatype])||r,w=e.convert(0,v._datatype),b=e.convert(b,v._datatype));var x=!g(b,w),_=v._size[0],E=v._size[1],D,T,M;if(N>E){for(T=E;T<N;T++)if(v._ptr[T]=v._values.length,x)for(D=0;D<_;D++)v._values.push(b),v._index.push(D);v._ptr[N]=v._values.length}else N<E&&(v._ptr.splice(N+1,E-N),v._values.splice(v._ptr[N],v._values.length),v._index.splice(v._ptr[N],v._index.length));if(E=N,C>_){if(x){var I=0;for(T=0;T<E;T++){v._ptr[T]=v._ptr[T]+I,M=v._ptr[T+1]+I;var P=0;for(D=_;D<C;D++,P++)v._values.splice(M+P,0,b),v._index.splice(M+P,0,D),I++}v._ptr[E]=v._values.length}}else if(C<_){var B=0;for(T=0;T<E;T++){v._ptr[T]=v._ptr[T]-B;var $=v._ptr[T],R=v._ptr[T+1]-B;for(M=$;M<R;M++)D=v._index[M],D>C-1&&(v._values.splice(M,1),v._index.splice(M,1),B++)}v._ptr[T]=v._values.length}return v._size[0]=C,v._size[1]=N,v}a.prototype.reshape=function(v,C){if(!Qt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(H){if(!Ke(H)||!Qe(H)||H<=-2||H===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+vt(v)+")")});var N=this._size[0]*this._size[1];v=Ry(v,N);var A=v[0]*v[1];if(N!==A)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=C?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return b;for(var g=[],w=0;w<b._ptr.length;w++)for(var x=0;x<b._ptr[w+1]-b._ptr[w];x++)g.push(w);for(var _=b._values.slice(),E=b._index.slice(),D=0;D<b._index.length;D++){var T=E[D],M=g[D],I=T*b._size[1]+M;g[D]=I%v[1],E[D]=Math.floor(I/v[1])}b._values.length=0,b._index.length=0,b._ptr.length=v[1]+1,b._size=v.slice();for(var P=0;P<b._ptr.length;P++)b._ptr[P]=0;for(var B=0;B<_.length;B++){var $=E[B],R=g[B],G=_[B],L=o($,b._ptr[R],b._ptr[R+1],b._index);d(L,$,R,G,b._values,b._index,b._ptr)}return b},a.prototype.clone=function(){var v=new a({values:this._values?at(this._values):void 0,index:at(this._index),ptr:at(this._ptr),size:at(this._size),datatype:this._datatype});return v},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(v,C){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var N=this,A=this._size[0],b=this._size[1],g=mo(v,N,"map"),w=function(_,E,D){return g.fn(_,[E,D],N)};return h(this,0,A-1,0,b-1,w,C)};function h(v,C,N,A,b,g,w){var x=[],_=[],E=[],D=r,T=0;xr(v._datatype)&&(D=e.find(r,[v._datatype,v._datatype])||r,T=e.convert(0,v._datatype));for(var M=function(Y,V,xe){var le=g(Y,V,xe);D(le,T)||(x.push(le),_.push(V))},I=A;I<=b;I++){E.push(x.length);var P=v._ptr[I],B=v._ptr[I+1];if(w)for(var $=P;$<B;$++){var R=v._index[$];R>=C&&R<=N&&M(v._values[$],R-C,I-A)}else{for(var G={},L=P;L<B;L++){var H=v._index[L];G[H]=v._values[L]}for(var Z=C;Z<=N;Z++){var ie=Z in G?G[Z]:0;M(ie,Z-C,I-A)}}}return E.push(x.length),new a({values:x,index:_,ptr:E,size:[N-C+1,b-A+1]})}a.prototype.forEach=function(v,C){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var N=this,A=this._size[0],b=this._size[1],g=mo(v,N,"forEach"),w=0;w<b;w++){var x=this._ptr[w],_=this._ptr[w+1];if(C)for(var E=x;E<_;E++){var D=this._index[E];g.fn(this._values[E],[D,w],N)}else{for(var T={},M=x;M<_;M++){var I=this._index[M];T[I]=this._values[M]}for(var P=0;P<A;P++){var B=P in T?T[P]:0;g.fn(B,[P,w],N)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],C=0;C<v;C++)for(var N=this._ptr[C],A=this._ptr[C+1],b=N;b<A;b++){var g=this._index[b];yield{value:this._values[b],index:[g,C]}}},a.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(v,C,N,A,b){var g=A[0],w=A[1],x=[],_,E;for(_=0;_<g;_++)for(x[_]=[],E=0;E<w;E++)x[_][E]=0;for(E=0;E<w;E++)for(var D=N[E],T=N[E+1],M=D;M<T;M++)_=C[M],x[_][E]=v?b?at(v[M]):v[M]:1;return x}return a.prototype.format=function(v){for(var C=this._size[0],N=this._size[1],A=this.density(),b="Sparse Matrix ["+vt(C,v)+" x "+vt(N,v)+"] density: "+vt(A,v)+`
`,g=0;g<N;g++)for(var w=this._ptr[g],x=this._ptr[g+1],_=w;_<x;_++){var E=this._index[_];b+=`
    (`+vt(E,v)+", "+vt(g,v)+") ==> "+(this._values?vt(this._values[_],v):"X")}return b},a.prototype.toString=function(){return vt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(v){if(v){if(lt(v)&&(v=v.toNumber()),!Ke(v)||!Qe(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var C=v>0?v:0,N=v<0?-v:0,A=this._size[0],b=this._size[1],g=Math.min(A-N,b-C),w=[],x=[],_=[];_[0]=0;for(var E=C;E<b&&w.length<g;E++)for(var D=this._ptr[E],T=this._ptr[E+1],M=D;M<T;M++){var I=this._index[M];if(I===E-C+N){w.push(this._values[M]),x[w.length-1]=I-N;break}}return _.push(w.length),new a({values:w,index:x,ptr:_,size:[g,1]})},a.fromJSON=function(v){return new a(v)},a.diagonal=function(v,C,N,A,b){if(!Qt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(H){if(lt(H)&&(H=H.toNumber()),!Ke(H)||!Qe(H)||H<1)throw new Error("Size values must be positive integers");return H}),N){if(lt(N)&&(N=N.toNumber()),!Ke(N)||!Qe(N))throw new TypeError("The parameter k must be an integer number")}else N=0;var g=r,w=0;xr(b)&&(g=e.find(r,[b,b])||r,w=e.convert(0,b));var x=N>0?N:0,_=N<0?-N:0,E=v[0],D=v[1],T=Math.min(E-_,D-x),M;if(Qt(C)){if(C.length!==T)throw new Error("Invalid value array length");M=function(Z){return C[Z]}}else if(Ze(C)){var I=C.size();if(I.length!==1||I[0]!==T)throw new Error("Invalid matrix length");M=function(Z){return C.get([Z])}}else M=function(){return C};for(var P=[],B=[],$=[],R=0;R<D;R++){$.push(P.length);var G=R-x;if(G>=0&&G<T){var L=M(G);g(L,w)||(B.push(G+_),P.push(L))}}return $.push(P.length),new a({values:P,index:B,ptr:$,size:[E,D]})},a.prototype.swapRows=function(v,C){if(!Ke(v)||!Qe(v)||!Ke(C)||!Qe(C))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Zt(v,this._size[0]),Zt(C,this._size[0]),a._swapRows(v,C,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(v,C,N,A,b){for(var g=A[v],w=A[v+1],x=g;x<w;x++)b(N[x],C[x])},a._swapRows=function(v,C,N,A,b,g){for(var w=0;w<N;w++){var x=g[w],_=g[w+1],E=o(v,x,_,b),D=o(C,x,_,b);if(E<_&&D<_&&b[E]===v&&b[D]===C){if(A){var T=A[E];A[E]=A[D],A[D]=T}continue}if(E<_&&b[E]===v&&(D>=_||b[D]!==C)){var M=A?A[E]:void 0;b.splice(D,0,C),A&&A.splice(D,0,M),b.splice(D<=E?E+1:E,1),A&&A.splice(D<=E?E+1:E,1);continue}if(D<_&&b[D]===C&&(E>=_||b[E]!==v)){var I=A?A[D]:void 0;b.splice(E,0,v),A&&A.splice(E,0,I),b.splice(E<=D?D+1:D,1),A&&A.splice(E<=D?D+1:D,1)}}},a},{isClass:!0}),iL="number",sL=["typed"];function oL(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],a=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:a}}else return null}function uL(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var a=parseInt(t.fractionalPart[n],t.radix);r+=a/Math.pow(t.radix,n+1)}var i=e+r;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is not a valid number');return i}var lL=q(iL,sL,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var i=oL(a);if(i)return uL(i);var s=0,u=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);u&&(s=Number(u[2]),a=u[1]);var l=Number(a);if(isNaN(l))throw new SyntaxError('String "'+a+'" is not a valid number');if(u){if(l>2**s-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),null:function(a){return 0},"Unit, string | Unit":function(a,i){return a.toNumber(i)},"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),cL="bigint",fL=["typed"],dL=q(cL,fL,t=>{var{typed:e}=t,r=e("bigint",{"":function(){return 0n},bigint:function(a){return a},number:function(a){return BigInt(a.toFixed())},BigNumber:function(a){return BigInt(a.round().toString())},Fraction:function(a){return BigInt(a.valueOf().toFixed())},"string | boolean":function(a){return BigInt(a)},null:function(a){return 0n},"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))});return r.fromJSON=function(n){return BigInt(n.value)},r}),c2="string",mL=["typed"],hL=q(c2,mL,t=>{var{typed:e}=t;return e(c2,{"":function(){return""},number:no,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(r=>n=>ct(n,r)),any:function(n){return String(n)}})}),f2="boolean",pL=["typed"],vL=q(f2,pL,t=>{var{typed:e}=t;return e(f2,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var a=n.toLowerCase();if(a==="true")return!0;if(a==="false")return!1;var i=Number(n);if(n!==""&&!isNaN(i))return!!i;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),gL="bignumber",yL=["typed","BigNumber"],xL=q(gL,yL,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(a){return new r(a+"")},string:function(a){var i=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var s=i[2],u=r(i[1]),l=new r(2).pow(Number(s));if(u.gt(l.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var o=new r(2).pow(Number(s)-1);return u.gte(o)?u.sub(l):u}return new r(a)},BigNumber:function(a){return a},bigint:function(a){return new r(a.toString())},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),Fraction:function(a){return new r(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new r(0)},"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),bL="complex",wL=["typed","Complex"],NL=q(bL,wL,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(a){return new r(a,0)},"number, number":function(a,i){return new r(a,i)},"BigNumber, BigNumber":function(a,i){return new r(a.toNumber(),i.toNumber())},Fraction:function(a){return new r(a.valueOf(),0)},Complex:function(a){return a.clone()},string:function(a){return r(a)},null:function(a){return r(0)},Object:function(a){if("re"in a&&"im"in a)return new r(a.re,a.im);if("r"in a&&"phi"in a||"abs"in a&&"arg"in a)return new r(a);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),_L="fraction",EL=["typed","Fraction"],SL=q(_L,EL,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new r(a)},string:function(a){return new r(a)},"number, number":function(a,i){return new r(a,i)},"bigint, bigint":function(a,i){return new r(a,i)},null:function(a){return new r(0)},BigNumber:function(a){return new r(a.toString())},bigint:function(a){return new r(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),Object:function(a){return new r(a)},"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),d2="matrix",AL=["typed","Matrix","DenseMatrix","SparseMatrix"],DL=q(d2,AL,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:a}=t;return e(d2,{"":function(){return i([])},string:function(u){return i([],u)},"string, string":function(u,l){return i([],u,l)},Array:function(u){return i(u)},Matrix:function(u){return i(u,u.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(s,u,l){if(u==="dense"||u==="default"||u===void 0)return new n(s,l);if(u==="sparse")return new a(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}}),m2="matrixFromFunction",CL=["typed","matrix","isZero"],TL=q(m2,CL,t=>{var{typed:e,matrix:r,isZero:n}=t;return e(m2,{"Array | Matrix, function, string, string":function(s,u,l,o){return a(s,u,l,o)},"Array | Matrix, function, string":function(s,u,l){return a(s,u,l)},"Matrix, function":function(s,u){return a(s,u,"dense")},"Array, function":function(s,u){return a(s,u,"dense").toArray()},"Array | Matrix, string, function":function(s,u,l){return a(s,l,u)},"Array | Matrix, string, string, function":function(s,u,l,o){return a(s,o,u,l)}});function a(i,s,u,l){var o;return l!==void 0?o=r(u,l):o=r(u),o.resize(i),o.forEach(function(c,d){var m=s(d);n(m)||o.set(d,m)}),o}}),h2="matrixFromRows",ML=["typed","matrix","flatten","size"],IL=q(h2,ML,t=>{var{typed:e,matrix:r,flatten:n,size:a}=t;return e(h2,{"...Array":function(l){return i(l)},"...Matrix":function(l){return r(i(l.map(o=>o.toArray())))}});function i(u){if(u.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=s(u[0]),o=[];for(var c of u){var d=s(c);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(d|0));o.push(n(c))}return o}function s(u){var l=a(u);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),p2="matrixFromColumns",PL=["typed","matrix","flatten","size"],FL=q(p2,PL,t=>{var{typed:e,matrix:r,flatten:n,size:a}=t;return e(p2,{"...Array":function(l){return i(l)},"...Matrix":function(l){return r(i(l.map(o=>o.toArray())))}});function i(u){if(u.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(u[0]),o=[],c=0;c<l;c++)o[c]=[];for(var d of u){var m=s(d);if(m!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(m|0));for(var h=n(d),p=0;p<l;p++)o[p].push(h[p])}return o}function s(u){var l=a(u);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),v2="splitUnit",RL=["typed"],OL=q(v2,RL,t=>{var{typed:e}=t;return e(v2,{"Unit, Array":function(n,a){return n.splitUnit(a)}})}),g2="unaryMinus",BL=["typed"],jL=q(g2,BL,t=>{var{typed:e}=t;return e(g2,{number:gM,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var a=n.clone();return a.value=e.find(r,a.valueType())(n.value),a}),"Array | Matrix":e.referToSelf(r=>n=>ct(n,r,!0))})}),y2="unaryPlus",kL=["typed","config","numeric"],$L=q(y2,kL,t=>{var{typed:e,config:r,numeric:n}=t;return e(y2,{number:yM,Complex:function(i){return i},BigNumber:function(i){return i},bigint:function(i){return i},Fraction:function(i){return i},Unit:function(i){return i.clone()},"Array | Matrix":e.referToSelf(a=>i=>ct(i,a,!0)),boolean:function(i){return n(i?1:0,r.number)},string:function(i){return n(i,Ds(i,r))}})}),x2="abs",LL=["typed"],zL=q(x2,LL,t=>{var{typed:e}=t;return e(x2,{number:mM,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":e.referToSelf(r=>n=>ct(n,r,!0))})}),b2="mapSlices",VL=["typed","isInteger"],Rg=q(b2,VL,t=>{var{typed:e,isInteger:r}=t;return e(b2,{"Array | Matrix, number | BigNumber, function":function(a,i,s){if(!r(i))throw new TypeError("Integer number expected for dimension");var u=Array.isArray(a)?it(a):a.size();if(i<0||i>=u.length)throw new Pa(i,u.length);return Ze(a)?a.create(Lm(a.valueOf(),i,s),a.datatype()):Lm(a,i,s)}})},{formerly:"apply"});function Lm(t,e,r){var n,a,i;if(e<=0)if(Array.isArray(t[0])){for(i=UL(t),a=[],n=0;n<i.length;n++)a[n]=Lm(i[n],e-1,r);return a}else return r(t);else{for(a=[],n=0;n<t.length;n++)a[n]=Lm(t[n],e-1,r);return a}}function UL(t){var e=t.length,r=t[0].length,n,a,i=[];for(a=0;a<r;a++){var s=[];for(n=0;n<e;n++)s.push(t[n][a]);i.push(s)}return i}var w2="addScalar",qL=["typed"],HL=q(w2,qL,t=>{var{typed:e}=t;return e(w2,{"number, number":hM,"Complex, Complex":function(n,a){return n.add(a)},"BigNumber, BigNumber":function(n,a){return n.plus(a)},"bigint, bigint":function(n,a){return n+a},"Fraction, Fraction":function(n,a){return n.add(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(r,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),N2="subtractScalar",GL=["typed"],WL=q(N2,GL,t=>{var{typed:e}=t;return e(N2,{"number, number":pM,"Complex, Complex":function(n,a){return n.sub(a)},"BigNumber, BigNumber":function(n,a){return n.minus(a)},"bigint, bigint":function(n,a){return n-a},"Fraction, Fraction":function(n,a){return n.sub(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(r,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),_2="cbrt",QL=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],XL=q(_2,QL,t=>{var{config:e,typed:r,isNegative:n,unaryMinus:a,matrix:i,Complex:s,BigNumber:u,Fraction:l}=t;return r(_2,{number:Gl,Complex:o,"Complex, boolean":o,BigNumber:function(m){return m.cbrt()},Unit:c});function o(d,m){var h=d.arg()/3,p=d.abs(),v=new s(Gl(p),0).mul(new s(0,h).exp());if(m){var C=[v,new s(Gl(p),0).mul(new s(0,h+Math.PI*2/3).exp()),new s(Gl(p),0).mul(new s(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?C:i(C)}else return v}function c(d){if(d.value&&pi(d.value)){var m=d.clone();return m.value=1,m=m.pow(1/3),m.value=o(d.value),m}else{var h=n(d.value);h&&(d.value=a(d.value));var p;lt(d.value)?p=new u(1).div(3):rf(d.value)?p=new l(1,3):p=1/3;var v=d.pow(p);return h&&(v.value=a(v.value)),v}}}),KL="matAlgo11xS0s",JL=["typed","equalScalar"],un=q(KL,JL,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s,u){var l=a._values,o=a._index,c=a._ptr,d=a._size,m=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=d[0],p=d[1],v,C=r,N=0,A=s;typeof m=="string"&&(v=m,C=e.find(r,[v,v]),N=e.convert(0,v),i=e.convert(i,v),A=e.find(s,[v,v]));for(var b=[],g=[],w=[],x=0;x<p;x++){w[x]=g.length;for(var _=c[x],E=c[x+1],D=_;D<E;D++){var T=o[D],M=u?A(i,l[D]):A(l[D],i);C(M,N)||(g.push(T),b.push(M))}}return w[p]=g.length,a.createSparseMatrix({values:b,index:g,ptr:w,size:[h,p],datatype:v})}}),YL="matAlgo12xSfs",ZL=["typed","DenseMatrix"],kr=q(YL,ZL,t=>{var{typed:e,DenseMatrix:r}=t;return function(a,i,s,u){var l=a._values,o=a._index,c=a._ptr,d=a._size,m=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=d[0],p=d[1],v,C=s;typeof m=="string"&&(v=m,i=e.convert(i,v),C=e.find(s,[v,v]));for(var N=[],A=[],b=[],g=0;g<p;g++){for(var w=g+1,x=c[g],_=c[g+1],E=x;E<_;E++){var D=o[E];A[D]=l[E],b[D]=w}for(var T=0;T<h;T++)g===0&&(N[T]=[]),b[T]===w?N[T][g]=u?C(i,A[T]):C(A[T],i):N[T][g]=u?C(i,0):C(0,i)}return new r({data:N,size:[h,p],datatype:v})}}),ez="matAlgo14xDs",tz=["typed"],ga=q(ez,tz,t=>{var{typed:e}=t;return function(a,i,s,u){var l=a._data,o=a._size,c=a._datatype,d,m=s;typeof c=="string"&&(d=c,i=e.convert(i,d),m=e.find(s,[d,d]));var h=o.length>0?r(m,0,o,o[0],l,i,u):[];return a.createDenseMatrix({data:h,size:at(o),datatype:d})};function r(n,a,i,s,u,l,o){var c=[];if(a===i.length-1)for(var d=0;d<s;d++)c[d]=o?n(l,u[d]):n(u[d],l);else for(var m=0;m<s;m++)c[m]=r(n,a+1,i,i[a+1],u[m],l,o);return c}}),Og="ceil",rz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],nz=new Ns(10),az=q(Og,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function a(i){var s=Math.ceil(i),u=n(i);return s===u?s:Jr(i,u,r.relTol,r.absTol)&&!Jr(i,s,r.relTol,r.absTol)?u:s}return e(Og,{number:a,"number, number":function(s,u){if(!Qe(u))throw new RangeError("number of decimals in function ceil must be an integer");if(u<0||u>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**u;return a(s*l)/l}})}),iz=q(Og,rz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u}=t,l=un({typed:e,equalScalar:i}),o=kr({typed:e,DenseMatrix:u}),c=ga({typed:e}),d=az({typed:e,config:r,round:n});function m(h){var p=(N,A)=>va(N,A,r.relTol,r.absTol),v=h.ceil(),C=n(h);return v.eq(C)?v:p(h,C)&&!p(h,v)?C:v}return e("ceil",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,v){return p.ceil(v)},"Complex, BigNumber":function(p,v){return p.ceil(v.toNumber())},BigNumber:m,"BigNumber, BigNumber":function(p,v){var C=nz.pow(v);return m(p.mul(C)).div(C)},bigint:h=>h,"bigint, number":(h,p)=>h,"bigint, BigNumber":(h,p)=>h,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,v){return p.ceil(v)},"Fraction, BigNumber":function(p,v){return p.ceil(v.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(p,v,C){var N=p.toNumeric(C);return C.multiply(h(N,v))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(p,v,C)=>h(p,v.toNumber(),C)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(p,v,C)=>ct(p,N=>h(N,v,C),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(p,v)=>h(p,0,v)),"Array | Matrix":e.referToSelf(h=>p=>ct(p,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(p,v)=>ct(p,C=>h(C,v),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(p,v)=>l(p,v,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(p,v)=>c(p,v,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(p,v)=>c(a(v),p,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(p,v)=>i(p,0)?s(v.size(),v.storage()):v.storage()==="dense"?c(v,p,h,!0):o(v,p,h,!0))})}),E2="cube",sz=["typed"],oz=q(E2,sz,t=>{var{typed:e}=t;return e(E2,{number:xM,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),S2="exp",uz=["typed"],lz=q(S2,uz,t=>{var{typed:e}=t;return e(S2,{number:bM,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),A2="expm1",cz=["typed","Complex"],fz=q(A2,cz,t=>{var{typed:e,Complex:r}=t;return e(A2,{number:wM,Complex:function(a){var i=Math.exp(a.re);return new r(i*Math.cos(a.im)-1,i*Math.sin(a.im))},BigNumber:function(a){return a.exp().minus(1)}})}),Bg="fix",dz=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],mz=q(Bg,["typed","ceil","floor"],t=>{var{typed:e,ceil:r,floor:n}=t;return e(Bg,{number:function(i){return i>0?n(i):r(i)},"number, number":function(i,s){return i>0?n(i,s):r(i,s)}})}),hz=q(Bg,dz,t=>{var{typed:e,Complex:r,matrix:n,ceil:a,floor:i,equalScalar:s,zeros:u,DenseMatrix:l}=t,o=kr({typed:e,DenseMatrix:l}),c=ga({typed:e}),d=mz({typed:e,ceil:a,floor:i});return e("fix",{number:d.signatures.number,"number, number | BigNumber":d.signatures["number,number"],Complex:function(h){return new r(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,p){return new r(h.re>0?i(h.re,p):a(h.re,p),h.im>0?i(h.im,p):a(h.im,p))},"Complex, BigNumber":function(h,p){var v=p.toNumber();return new r(h.re>0?i(h.re,v):a(h.re,v),h.im>0?i(h.im,v):a(h.im,v))},BigNumber:function(h){return h.isNegative()?a(h):i(h)},"BigNumber, number | BigNumber":function(h,p){return h.isNegative()?a(h,p):i(h,p)},bigint:m=>m,"bigint, number":(m,h)=>m,"bigint, BigNumber":(m,h)=>m,Fraction:function(h){return h.s<0n?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,p){return h.s<0n?a(h,p):i(h,p)},"Unit, number, Unit":e.referToSelf(m=>function(h,p,v){var C=h.toNumeric(v);return v.multiply(m(C,p))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(h,p,v)=>m(h,p.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(h,p,v)=>ct(h,C=>m(C,p,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(h,p)=>m(h,0,p)),"Array | Matrix":e.referToSelf(m=>h=>ct(h,m,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(m=>(h,p)=>ct(h,v=>m(v,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(h,p)=>c(n(p),h,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(h,p)=>s(h,0)?u(p.size(),p.storage()):p.storage()==="dense"?c(p,h,m,!0):o(p,h,m,!0))})}),jg="floor",pz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],vz=new Ns(10),gz=q(jg,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function a(i){var s=Math.floor(i),u=n(i);return s===u?s:Jr(i,u,r.relTol,r.absTol)&&!Jr(i,s,r.relTol,r.absTol)?u:s}return e(jg,{number:a,"number, number":function(s,u){if(!Qe(u))throw new RangeError("number of decimals in function floor must be an integer");if(u<0||u>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**u;return a(s*l)/l}})}),r4=q(jg,pz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u}=t,l=un({typed:e,equalScalar:i}),o=kr({typed:e,DenseMatrix:u}),c=ga({typed:e}),d=gz({typed:e,config:r,round:n});function m(h){var p=(N,A)=>va(N,A,r.relTol,r.absTol),v=h.floor(),C=n(h);return v.eq(C)?v:p(h,C)&&!p(h,v)?C:v}return e("floor",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,v){return p.floor(v)},"Complex, BigNumber":function(p,v){return p.floor(v.toNumber())},BigNumber:m,"BigNumber, BigNumber":function(p,v){var C=vz.pow(v);return m(p.mul(C)).div(C)},bigint:h=>h,"bigint, number":(h,p)=>h,"bigint, BigNumber":(h,p)=>h,Fraction:function(p){return p.floor()},"Fraction, number":function(p,v){return p.floor(v)},"Fraction, BigNumber":function(p,v){return p.floor(v.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(p,v,C){var N=p.toNumeric(C);return C.multiply(h(N,v))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(p,v,C)=>h(p,v.toNumber(),C)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(p,v,C)=>ct(p,N=>h(N,v,C),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(p,v)=>h(p,0,v)),"Array | Matrix":e.referToSelf(h=>p=>ct(p,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(p,v)=>ct(p,C=>h(C,v),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(p,v)=>l(p,v,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(p,v)=>c(p,v,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(p,v)=>c(a(v),p,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(p,v)=>i(p,0)?s(v.size(),v.storage()):v.storage()==="dense"?c(v,p,h,!0):o(v,p,h,!0))})}),yz="matAlgo02xDS0",xz=["typed","equalScalar"],Ra=q(yz,xz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s,u){var l=a._data,o=a._size,c=a._datatype||a.getDataType(),d=i._values,m=i._index,h=i._ptr,p=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(o.length!==p.length)throw new ht(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!d)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var C=o[0],N=o[1],A,b=r,g=0,w=s;typeof c=="string"&&c===v&&c!=="mixed"&&(A=c,b=e.find(r,[A,A]),g=e.convert(0,A),w=e.find(s,[A,A]));for(var x=[],_=[],E=[],D=0;D<N;D++){E[D]=_.length;for(var T=h[D],M=h[D+1],I=T;I<M;I++){var P=m[I],B=u?w(d[I],l[P][D]):w(l[P][D],d[I]);b(B,g)||(_.push(P),x.push(B))}}return E[N]=_.length,i.createSparseMatrix({values:x,index:_,ptr:E,size:[C,N],datatype:c===a._datatype&&v===i._datatype?A:void 0})}}),bz="matAlgo03xDSf",wz=["typed"],wn=q(bz,wz,t=>{var{typed:e}=t;return function(n,a,i,s){var u=n._data,l=n._size,o=n._datatype||n.getDataType(),c=a._values,d=a._index,m=a._ptr,h=a._size,p=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==h.length)throw new ht(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],C=l[1],N,A=0,b=i;typeof o=="string"&&o===p&&o!=="mixed"&&(N=o,A=e.convert(0,N),b=e.find(i,[N,N]));for(var g=[],w=0;w<v;w++)g[w]=[];for(var x=[],_=[],E=0;E<C;E++){for(var D=E+1,T=m[E],M=m[E+1],I=T;I<M;I++){var P=d[I];x[P]=s?b(c[I],u[P][E]):b(u[P][E],c[I]),_[P]=D}for(var B=0;B<v;B++)_[B]===D?g[B][E]=x[B]:g[B][E]=s?b(A,u[B][E]):b(u[B][E],A)}return n.createDenseMatrix({data:g,size:[v,C],datatype:o===n._datatype&&p===a._datatype?N:void 0})}}),Nz="matAlgo05xSfSf",_z=["typed","equalScalar"],$h=q(Nz,_z,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,d=a._datatype||a._data===void 0?a._datatype:a.getDataType(),m=i._values,h=i._index,p=i._ptr,v=i._size,C=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new ht(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var N=c[0],A=c[1],b,g=r,w=0,x=s;typeof d=="string"&&d===C&&d!=="mixed"&&(b=d,g=e.find(r,[b,b]),w=e.convert(0,b),x=e.find(s,[b,b]));var _=u&&m?[]:void 0,E=[],D=[],T=_?[]:void 0,M=_?[]:void 0,I=[],P=[],B,$,R,G;for($=0;$<A;$++){D[$]=E.length;var L=$+1;for(R=o[$],G=o[$+1];R<G;R++)B=l[R],E.push(B),I[B]=L,T&&(T[B]=u[R]);for(R=p[$],G=p[$+1];R<G;R++)B=h[R],I[B]!==L&&E.push(B),P[B]=L,M&&(M[B]=m[R]);if(_)for(R=D[$];R<E.length;){B=E[R];var H=I[B],Z=P[B];if(H===L||Z===L){var ie=H===L?T[B]:w,k=Z===L?M[B]:w,Y=x(ie,k);g(Y,w)?E.splice(R,1):(_.push(Y),R++)}}}return D[A]=E.length,a.createSparseMatrix({values:_,index:E,ptr:D,size:[N,A],datatype:d===a._datatype&&C===i._datatype?b:void 0})}}),Ez="matAlgo13xDD",Sz=["typed"],n4=q(Ez,Sz,t=>{var{typed:e}=t;return function(a,i,s){var u=a._data,l=a._size,o=a._datatype,c=i._data,d=i._size,m=i._datatype,h=[];if(l.length!==d.length)throw new ht(l.length,d.length);for(var p=0;p<l.length;p++){if(l[p]!==d[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");h[p]=l[p]}var v,C=s;typeof o=="string"&&o===m&&(v=o,C=e.find(s,[v,v]));var N=h.length>0?r(C,0,h,h[0],u,c):[];return a.createDenseMatrix({data:N,size:h,datatype:v})};function r(n,a,i,s,u,l){var o=[];if(a===i.length-1)for(var c=0;c<s;c++)o[c]=n(u[c],l[c]);else for(var d=0;d<s;d++)o[d]=r(n,a+1,i,i[a+1],u[d],l[d]);return o}});function Ur(t,e){if(Si(t.size(),e.size()))return[t,e];var r=Fm(t.size(),e.size());return[t,e].map(n=>Az(n,r))}function Az(t,e){return Si(t.size(),e)?t:t.create(Zs(t.valueOf(),e),t.datatype())}var Dz="matrixAlgorithmSuite",Cz=["typed","matrix"],er=q(Dz,Cz,t=>{var{typed:e,matrix:r}=t,n=n4({typed:e}),a=ga({typed:e});return function(s){var u=s.elop,l=s.SD||s.DS,o;u?(o={"DenseMatrix, DenseMatrix":(h,p)=>n(...Ur(h,p),u),"Array, Array":(h,p)=>n(...Ur(r(h),r(p)),u).valueOf(),"Array, DenseMatrix":(h,p)=>n(...Ur(r(h),p),u),"DenseMatrix, Array":(h,p)=>n(...Ur(h,r(p)),u)},s.SS&&(o["SparseMatrix, SparseMatrix"]=(h,p)=>s.SS(...Ur(h,p),u,!1)),s.DS&&(o["DenseMatrix, SparseMatrix"]=(h,p)=>s.DS(...Ur(h,p),u,!1),o["Array, SparseMatrix"]=(h,p)=>s.DS(...Ur(r(h),p),u,!1)),l&&(o["SparseMatrix, DenseMatrix"]=(h,p)=>l(...Ur(p,h),u,!0),o["SparseMatrix, Array"]=(h,p)=>l(...Ur(r(p),h),u,!0))):(o={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(p,v)=>n(...Ur(p,v),h)),"Array, Array":e.referToSelf(h=>(p,v)=>n(...Ur(r(p),r(v)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(p,v)=>n(...Ur(r(p),v),h)),"DenseMatrix, Array":e.referToSelf(h=>(p,v)=>n(...Ur(p,r(v)),h))},s.SS&&(o["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(p,v)=>s.SS(...Ur(p,v),h,!1))),s.DS&&(o["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(p,v)=>s.DS(...Ur(p,v),h,!1)),o["Array, SparseMatrix"]=e.referToSelf(h=>(p,v)=>s.DS(...Ur(r(p),v),h,!1))),l&&(o["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(p,v)=>l(...Ur(v,p),h,!0)),o["SparseMatrix, Array"]=e.referToSelf(h=>(p,v)=>l(...Ur(r(v),p),h,!0))));var c=s.scalar||"any",d=s.Ds||s.Ss;d&&(u?(o["DenseMatrix,"+c]=(h,p)=>a(h,p,u,!1),o[c+", DenseMatrix"]=(h,p)=>a(p,h,u,!0),o["Array,"+c]=(h,p)=>a(r(h),p,u,!1).valueOf(),o[c+", Array"]=(h,p)=>a(r(p),h,u,!0).valueOf()):(o["DenseMatrix,"+c]=e.referToSelf(h=>(p,v)=>a(p,v,h,!1)),o[c+", DenseMatrix"]=e.referToSelf(h=>(p,v)=>a(v,p,h,!0)),o["Array,"+c]=e.referToSelf(h=>(p,v)=>a(r(p),v,h,!1).valueOf()),o[c+", Array"]=e.referToSelf(h=>(p,v)=>a(r(v),p,h,!0).valueOf())));var m=s.sS!==void 0?s.sS:s.Ss;return u?(s.Ss&&(o["SparseMatrix,"+c]=(h,p)=>s.Ss(h,p,u,!1)),m&&(o[c+", SparseMatrix"]=(h,p)=>m(p,h,u,!0))):(s.Ss&&(o["SparseMatrix,"+c]=e.referToSelf(h=>(p,v)=>s.Ss(p,v,h,!1))),m&&(o[c+", SparseMatrix"]=e.referToSelf(h=>(p,v)=>m(v,p,h,!0)))),u&&u.signatures&&k3(o,u.signatures),o}}),D2="mod",Tz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],a4=q(D2,Tz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u,concat:l}=t,o=r4({typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u}),c=Ra({typed:e,equalScalar:i}),d=wn({typed:e}),m=$h({typed:e,equalScalar:i}),h=un({typed:e,equalScalar:i}),p=kr({typed:e,DenseMatrix:u}),v=er({typed:e,matrix:a,concat:l});return e(D2,{"number, number":C,"BigNumber, BigNumber":function(A,b){return b.isZero()?A:A.sub(b.mul(o(A.div(b))))},"bigint, bigint":function(A,b){if(b===0n)return A;if(A<0){var g=A%b;return g===0n?g:g+b}return A%b},"Fraction, Fraction":function(A,b){return b.equals(0)?A:A.sub(b.mul(o(A.div(b))))}},v({SS:m,DS:d,SD:c,Ss:h,sS:p}));function C(N,A){return A===0?N:N-A*o(N/A)}}),Mz="matAlgo01xDSid",Iz=["typed"],Ts=q(Mz,Iz,t=>{var{typed:e}=t;return function(n,a,i,s){var u=n._data,l=n._size,o=n._datatype||n.getDataType(),c=a._values,d=a._index,m=a._ptr,h=a._size,p=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==h.length)throw new ht(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],C=l[1],N=typeof o=="string"&&o!=="mixed"&&o===p?o:void 0,A=N?e.find(i,[N,N]):i,b,g,w=[];for(b=0;b<v;b++)w[b]=[];var x=[],_=[];for(g=0;g<C;g++){for(var E=g+1,D=m[g],T=m[g+1],M=D;M<T;M++)b=d[M],x[b]=s?A(c[M],u[b][g]):A(u[b][g],c[M]),_[b]=E;for(b=0;b<v;b++)_[b]===E?w[b][g]=x[b]:w[b][g]=u[b][g]}return n.createDenseMatrix({data:w,size:[v,C],datatype:o===n._datatype&&p===a._datatype?N:void 0})}}),Pz="matAlgo04xSidSid",Fz=["typed","equalScalar"],jy=q(Pz,Fz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,d=a._datatype||a._data===void 0?a._datatype:a.getDataType(),m=i._values,h=i._index,p=i._ptr,v=i._size,C=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new ht(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var N=c[0],A=c[1],b,g=r,w=0,x=s;typeof d=="string"&&d===C&&d!=="mixed"&&(b=d,g=e.find(r,[b,b]),w=e.convert(0,b),x=e.find(s,[b,b]));var _=u&&m?[]:void 0,E=[],D=[],T=u&&m?[]:void 0,M=u&&m?[]:void 0,I=[],P=[],B,$,R,G,L;for($=0;$<A;$++){D[$]=E.length;var H=$+1;for(G=o[$],L=o[$+1],R=G;R<L;R++)B=l[R],E.push(B),I[B]=H,T&&(T[B]=u[R]);for(G=p[$],L=p[$+1],R=G;R<L;R++)if(B=h[R],I[B]===H){if(T){var Z=x(T[B],m[R]);g(Z,w)?I[B]=null:T[B]=Z}}else E.push(B),P[B]=H,M&&(M[B]=m[R]);if(T&&M)for(R=D[$];R<E.length;)B=E[R],I[B]===H?(_[R]=T[B],R++):P[B]===H?(_[R]=M[B],R++):E.splice(R,1)}return D[A]=E.length,a.createSparseMatrix({values:_,index:E,ptr:D,size:[N,A],datatype:d===a._datatype&&C===i._datatype?b:void 0})}}),Rz="matAlgo10xSids",Oz=["typed","DenseMatrix"],Eo=q(Rz,Oz,t=>{var{typed:e,DenseMatrix:r}=t;return function(a,i,s,u){var l=a._values,o=a._index,c=a._ptr,d=a._size,m=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=d[0],p=d[1],v,C=s;typeof m=="string"&&(v=m,i=e.convert(i,v),C=e.find(s,[v,v]));for(var N=[],A=[],b=[],g=0;g<p;g++){for(var w=g+1,x=c[g],_=c[g+1],E=x;E<_;E++){var D=o[E];A[D]=l[E],b[D]=w}for(var T=0;T<h;T++)g===0&&(N[T]=[]),b[T]===w?N[T][g]=u?C(i,A[T]):C(A[T],i):N[T][g]=i}return new r({data:N,size:[h,p],datatype:v})}});function So(t,e,r,n){if(!(this instanceof So))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}So.prototype=new Error;So.prototype.constructor=Error;So.prototype.name="ArgumentsError";So.prototype.isArgumentsError=!0;var C2="gcd",Bz=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],Yp="number | BigNumber | Fraction | Matrix | Array",jz="".concat(Yp,", ").concat(Yp,", ...").concat(Yp);function T2(t){return!t.some(e=>Array.isArray(e))}var kz=q(C2,Bz,t=>{var{typed:e,matrix:r,config:n,round:a,equalScalar:i,zeros:s,BigNumber:u,DenseMatrix:l,concat:o}=t,c=a4({typed:e,config:n,round:a,matrix:r,equalScalar:i,zeros:s,DenseMatrix:l,concat:o}),d=Ts({typed:e}),m=jy({typed:e,equalScalar:i}),h=Eo({typed:e,DenseMatrix:l}),p=er({typed:e,matrix:r,concat:o});return e(C2,{"number, number":v,"BigNumber, BigNumber":C,"Fraction, Fraction":(N,A)=>N.gcd(A)},p({SS:m,DS:d,Ss:h}),{[jz]:e.referToSelf(N=>(A,b,g)=>{for(var w=N(A,b),x=0;x<g.length;x++)w=N(w,g[x]);return w}),Array:e.referToSelf(N=>A=>{if(A.length===1&&Array.isArray(A[0])&&T2(A[0]))return N(...A[0]);if(T2(A))return N(...A);throw new So("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(N=>A=>N(A.toArray()))});function v(N,A){if(!Qe(N)||!Qe(A))throw new Error("Parameters in function gcd must be integer numbers");for(var b;A!==0;)b=c(N,A),N=A,A=b;return N<0?-N:N}function C(N,A){if(!N.isInt()||!A.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new u(0);!A.isZero();){var g=c(N,A);N=A,A=g}return N.lt(b)?N.neg():N}}),$z="matAlgo06xS0S0",Lz=["typed","equalScalar"],Lh=q($z,Lz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._size,o=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=i._values,d=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==d.length)throw new ht(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");var h=l[0],p=l[1],v,C=r,N=0,A=s;typeof o=="string"&&o===m&&o!=="mixed"&&(v=o,C=e.find(r,[v,v]),N=e.convert(0,v),A=e.find(s,[v,v]));for(var b=u&&c?[]:void 0,g=[],w=[],x=b?[]:void 0,_=[],E=[],D=0;D<p;D++){w[D]=g.length;var T=D+1;if(YN(a,D,_,x,E,T,g,A),YN(i,D,_,x,E,T,g,A),x)for(var M=w[D];M<g.length;){var I=g[M];if(E[I]===T){var P=x[I];C(P,N)?g.splice(M,1):(b.push(P),M++)}else g.splice(M,1)}else for(var B=w[D];B<g.length;){var $=g[B];E[$]!==T?g.splice(B,1):B++}}return w[p]=g.length,a.createSparseMatrix({values:b,index:g,ptr:w,size:[h,p],datatype:o===a._datatype&&m===i._datatype?v:void 0})}}),M2="lcm",zz=["typed","matrix","equalScalar","concat"],Vz=q(M2,zz,t=>{var{typed:e,matrix:r,equalScalar:n,concat:a}=t,i=Ra({typed:e,equalScalar:n}),s=Lh({typed:e,equalScalar:n}),u=un({typed:e,equalScalar:n}),l=er({typed:e,matrix:r,concat:a}),o="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(o,", ").concat(o,", ...").concat(o)]=e.referToSelf(m=>(h,p,v)=>{for(var C=m(h,p),N=0;N<v.length;N++)C=m(C,v[N]);return C}),e(M2,{"number, number":NM,"BigNumber, BigNumber":d,"Fraction, Fraction":(m,h)=>m.lcm(h)},l({SS:s,DS:i,Ss:u}),c);function d(m,h){if(!m.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(m.isZero())return m;if(h.isZero())return h;for(var p=m.times(h);!h.isZero();){var v=h;h=m.mod(v),m=v}return p.div(m).abs()}});function ky(t,e,r,n){return function(a){if(a>0||r.predictable){if(a<=0)return NaN;var i=a.toString(16),s=i.substring(0,15);return t*(i.length-s.length)+e(+("0x"+s))}return n(a.toNumber())}}var I2="log10",Uz=["typed","config","Complex"],qz=Bm(16),Hz=q(I2,Uz,t=>{var{typed:e,config:r,Complex:n}=t;function a(s){return s.log().div(Math.LN10)}function i(s){return a(new n(s,0))}return e(I2,{number:function(u){return u>=0||r.predictable?Bm(u):i(u)},bigint:ky(qz,Bm,r,i),Complex:a,BigNumber:function(u){return!u.isNegative()||r.predictable?u.log():i(u.toNumber())},"Array | Matrix":e.referToSelf(s=>u=>ct(u,s))})}),P2="log2",Gz=["typed","config","Complex"],Wz=q(P2,Gz,t=>{var{typed:e,config:r,Complex:n}=t;function a(s){return i(new n(s,0))}return e(P2,{number:function(u){return u>=0||r.predictable?Tg(u):a(u)},bigint:ky(4,Tg,r,a),Complex:i,BigNumber:function(u){return!u.isNegative()||r.predictable?u.log(2):a(u.toNumber())},"Array | Matrix":e.referToSelf(s=>u=>ct(u,s))});function i(s){var u=Math.sqrt(s.re*s.re+s.im*s.im);return new n(Math.log2?Math.log2(u):Math.log(u)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),Qz="multiplyScalar",Xz=["typed"],Kz=q(Qz,Xz,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":vM,"Complex, Complex":function(n,a){return n.mul(a)},"BigNumber, BigNumber":function(n,a){return n.times(a)},"bigint, bigint":function(n,a){return n*a},"Fraction, Fraction":function(n,a){return n.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),F2="multiply",Jz=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Yz=q(F2,Jz,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:a,equalScalar:i,dot:s}=t,u=un({typed:e,equalScalar:i}),l=ga({typed:e});function o(w,x){switch(w.length){case 1:switch(x.length){case 1:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+x[0]+")");break;case 2:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,x,_){if(_===0)throw new Error("Cannot multiply two empty vectors");return s(w,x)}function d(w,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return m(w,x)}function m(w,x){var _=w._data,E=w._size,D=w._datatype||w.getDataType(),T=x._data,M=x._size,I=x._datatype||x.getDataType(),P=E[0],B=M[1],$,R=n,G=a;D&&I&&D===I&&typeof D=="string"&&D!=="mixed"&&($=D,R=e.find(n,[$,$]),G=e.find(a,[$,$]));for(var L=[],H=0;H<B;H++){for(var Z=G(_[0],T[0][H]),ie=1;ie<P;ie++)Z=R(Z,G(_[ie],T[ie][H]));L[H]=Z}return w.createDenseMatrix({data:L,size:[B],datatype:D===w._datatype&&I===x._datatype?$:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":A}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":C,"DenseMatrix, SparseMatrix":N,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":g});function v(w,x){var _=w._data,E=w._size,D=w._datatype||w.getDataType(),T=x._data,M=x._datatype||x.getDataType(),I=E[0],P=E[1],B,$=n,R=a;D&&M&&D===M&&typeof D=="string"&&D!=="mixed"&&(B=D,$=e.find(n,[B,B]),R=e.find(a,[B,B]));for(var G=[],L=0;L<I;L++){for(var H=_[L],Z=R(H[0],T[0]),ie=1;ie<P;ie++)Z=$(Z,R(H[ie],T[ie]));G[L]=Z}return w.createDenseMatrix({data:G,size:[I],datatype:D===w._datatype&&M===x._datatype?B:void 0})}function C(w,x){var _=w._data,E=w._size,D=w._datatype||w.getDataType(),T=x._data,M=x._size,I=x._datatype||x.getDataType(),P=E[0],B=E[1],$=M[1],R,G=n,L=a;D&&I&&D===I&&typeof D=="string"&&D!=="mixed"&&D!=="mixed"&&(R=D,G=e.find(n,[R,R]),L=e.find(a,[R,R]));for(var H=[],Z=0;Z<P;Z++){var ie=_[Z];H[Z]=[];for(var k=0;k<$;k++){for(var Y=L(ie[0],T[0][k]),V=1;V<B;V++)Y=G(Y,L(ie[V],T[V][k]));H[Z][k]=Y}}return w.createDenseMatrix({data:H,size:[P,$],datatype:D===w._datatype&&I===x._datatype?R:void 0})}function N(w,x){var _=w._data,E=w._size,D=w._datatype||w.getDataType(),T=x._values,M=x._index,I=x._ptr,P=x._size,B=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var $=E[0],R=P[1],G,L=n,H=a,Z=i,ie=0;D&&B&&D===B&&typeof D=="string"&&D!=="mixed"&&(G=D,L=e.find(n,[G,G]),H=e.find(a,[G,G]),Z=e.find(i,[G,G]),ie=e.convert(0,G));for(var k=[],Y=[],V=[],xe=x.createSparseMatrix({values:k,index:Y,ptr:V,size:[$,R],datatype:D===w._datatype&&B===x._datatype?G:void 0}),le=0;le<R;le++){V[le]=Y.length;var de=I[le],Q=I[le+1];if(Q>de)for(var K=0,te=0;te<$;te++){for(var se=te+1,ue=void 0,ve=de;ve<Q;ve++){var he=M[ve];K!==se?(ue=H(_[te][he],T[ve]),K=se):ue=L(ue,H(_[te][he],T[ve]))}K===se&&!Z(ue,ie)&&(Y.push(te),k.push(ue))}}return V[R]=Y.length,xe}function A(w,x){var _=w._values,E=w._index,D=w._ptr,T=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=x._data,I=x._datatype||x.getDataType(),P=w._size[0],B=x._size[0],$=[],R=[],G=[],L,H=n,Z=a,ie=i,k=0;T&&I&&T===I&&typeof T=="string"&&T!=="mixed"&&(L=T,H=e.find(n,[L,L]),Z=e.find(a,[L,L]),ie=e.find(i,[L,L]),k=e.convert(0,L));var Y=[],V=[];G[0]=0;for(var xe=0;xe<B;xe++){var le=M[xe];if(!ie(le,k))for(var de=D[xe],Q=D[xe+1],K=de;K<Q;K++){var te=E[K];V[te]?Y[te]=H(Y[te],Z(le,_[K])):(V[te]=!0,R.push(te),Y[te]=Z(le,_[K]))}}for(var se=R.length,ue=0;ue<se;ue++){var ve=R[ue];$[ue]=Y[ve]}return G[1]=R.length,w.createSparseMatrix({values:$,index:R,ptr:G,size:[P,1],datatype:T===w._datatype&&I===x._datatype?L:void 0})}function b(w,x){var _=w._values,E=w._index,D=w._ptr,T=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=x._data,I=x._datatype||x.getDataType(),P=w._size[0],B=x._size[0],$=x._size[1],R,G=n,L=a,H=i,Z=0;T&&I&&T===I&&typeof T=="string"&&T!=="mixed"&&(R=T,G=e.find(n,[R,R]),L=e.find(a,[R,R]),H=e.find(i,[R,R]),Z=e.convert(0,R));for(var ie=[],k=[],Y=[],V=w.createSparseMatrix({values:ie,index:k,ptr:Y,size:[P,$],datatype:T===w._datatype&&I===x._datatype?R:void 0}),xe=[],le=[],de=0;de<$;de++){Y[de]=k.length;for(var Q=de+1,K=0;K<B;K++){var te=M[K][de];if(!H(te,Z))for(var se=D[K],ue=D[K+1],ve=se;ve<ue;ve++){var he=E[ve];le[he]!==Q?(le[he]=Q,k.push(he),xe[he]=L(te,_[ve])):xe[he]=G(xe[he],L(te,_[ve]))}}for(var Me=Y[de],$e=k.length,Ve=Me;Ve<$e;Ve++){var Be=k[Ve];ie[Ve]=xe[Be]}}return Y[$]=k.length,V}function g(w,x){var _=w._values,E=w._index,D=w._ptr,T=w._datatype||w._data===void 0?w._datatype:w.getDataType(),M=x._values,I=x._index,P=x._ptr,B=x._datatype||x._data===void 0?x._datatype:x.getDataType(),$=w._size[0],R=x._size[1],G=_&&M,L,H=n,Z=a;T&&B&&T===B&&typeof T=="string"&&T!=="mixed"&&(L=T,H=e.find(n,[L,L]),Z=e.find(a,[L,L]));for(var ie=G?[]:void 0,k=[],Y=[],V=w.createSparseMatrix({values:ie,index:k,ptr:Y,size:[$,R],datatype:T===w._datatype&&B===x._datatype?L:void 0}),xe=G?[]:void 0,le=[],de,Q,K,te,se,ue,ve,he,Me=0;Me<R;Me++){Y[Me]=k.length;var $e=Me+1;for(se=P[Me],ue=P[Me+1],te=se;te<ue;te++)if(he=I[te],G)for(Q=D[he],K=D[he+1],de=Q;de<K;de++)ve=E[de],le[ve]!==$e?(le[ve]=$e,k.push(ve),xe[ve]=Z(M[te],_[de])):xe[ve]=H(xe[ve],Z(M[te],_[de]));else for(Q=D[he],K=D[he+1],de=Q;de<K;de++)ve=E[de],le[ve]!==$e&&(le[ve]=$e,k.push(ve));if(G)for(var Ve=Y[Me],Be=k.length,Le=Ve;Le<Be;Le++){var W=k[Le];ie[Le]=xe[W]}}return Y[R]=k.length,V}return e(F2,a,{"Array, Array":e.referTo("Matrix, Matrix",w=>(x,_)=>{o(it(x),it(_));var E=w(r(x),r(_));return Ze(E)?E.valueOf():E}),"Matrix, Matrix":function(x,_){var E=x.size(),D=_.size();return o(E,D),E.length===1?D.length===1?c(x,_,E[0]):d(x,_):D.length===1?h(x,_):p(x,_)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(x,_)=>w(x,r(_))),"Array, Matrix":e.referToSelf(w=>(x,_)=>w(r(x,_.storage()),_)),"SparseMatrix, any":function(x,_){return u(x,_,a,!1)},"DenseMatrix, any":function(x,_){return l(x,_,a,!1)},"any, SparseMatrix":function(x,_){return u(_,x,a,!0)},"any, DenseMatrix":function(x,_){return l(_,x,a,!0)},"Array, any":function(x,_){return l(r(x),_,a,!1).valueOf()},"any, Array":function(x,_){return l(r(_),x,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(w=>(x,_,E)=>{for(var D=w(x,_),T=0;T<E.length;T++)D=w(D,E[T]);return D})})}),R2="nthRoot",Zz=["typed","matrix","equalScalar","BigNumber","concat"],eV=q(R2,Zz,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:a,concat:i}=t,s=Ts({typed:e}),u=Ra({typed:e,equalScalar:n}),l=Lh({typed:e,equalScalar:n}),o=un({typed:e,equalScalar:n}),c=er({typed:e,matrix:r,concat:i});function d(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(R2,{number:t2,"number, number":t2,BigNumber:h=>m(h,new a(2)),"BigNumber, BigNumber":m,Complex:d,"Complex, number":d,Array:e.referTo("DenseMatrix,number",h=>p=>h(r(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>p=>h(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>p=>h(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(p,v)=>{if(v.density()===1)return l(p,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(p,v)=>{if(v.density()===1)return s(p,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(p,v)=>h(r(p),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(p,v)=>{if(v.density()===1)return o(v,p,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:u,Ss:o,sS:!1}));function m(h,p){var v=a.precision,C=a.clone({precision:v+2}),N=new a(0),A=new C(1),b=p.isNegative();if(b&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return b?new C(1/0):0;if(!h.isFinite())return b?N:h;var g=h.abs().pow(A.div(p));return g=h.isNeg()?g.neg():g,new a((b?A.div(g):g).toPrecision(v))}}),O2="sign",tV=["typed","BigNumber","Fraction","complex"],rV=q(O2,tV,t=>{var{typed:e,BigNumber:r,complex:n,Fraction:a}=t;return e(O2,{number:Mg,Complex:function(s){return s.im===0?n(Mg(s.re)):s.sign()},BigNumber:function(s){return new r(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return s.n===0n?new a(0):new a(s.s)},"Array | Matrix":e.referToSelf(i=>s=>ct(s,i,!0)),Unit:e.referToSelf(i=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(i,s.valueType())(s.value)})})}),nV="sqrt",aV=["config","typed","Complex"],iV=q(nV,aV,t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:a,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():a(s.toNumber())},Unit:function(s){return s.pow(.5)}});function a(i){return isNaN(i)?NaN:i>=0||e.predictable?Math.sqrt(i):new n(i,0).sqrt()}}),B2="square",sV=["typed"],oV=q(B2,sV,t=>{var{typed:e}=t;return e(B2,{number:_M,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),j2="subtract",uV=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],lV=q(j2,uV,t=>{var{typed:e,matrix:r,equalScalar:n,subtractScalar:a,unaryMinus:i,DenseMatrix:s,concat:u}=t,l=Ts({typed:e}),o=wn({typed:e}),c=$h({typed:e,equalScalar:n}),d=Eo({typed:e,DenseMatrix:s}),m=kr({typed:e,DenseMatrix:s}),h=er({typed:e,matrix:r,concat:u});return e(j2,{"any, any":a},h({elop:a,SS:c,DS:l,SD:o,Ss:m,sS:d}))}),k2="xgcd",cV=["typed","config","matrix","BigNumber"],fV=q(k2,cV,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e(k2,{"number, number":function(u,l){var o=EM(u,l);return r.matrix==="Array"?o:n(o)},"BigNumber, BigNumber":i});function i(s,u){var l,o,c,d=new a(0),m=new a(1),h=d,p=m,v=m,C=d;if(!s.isInt()||!u.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!u.isZero();)o=s.div(u).floor(),c=s.mod(u),l=h,h=p.minus(o.times(h)),p=l,l=v,v=C.minus(o.times(v)),C=l,s=u,u=c;var N;return s.lt(d)?N=[s.neg(),p.neg(),C.neg()]:N=[s,s.isZero()?0:p,C],r.matrix==="Array"?N:n(N)}}),$2="invmod",dV=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],mV=q($2,dV,t=>{var{typed:e,config:r,BigNumber:n,xgcd:a,equal:i,smaller:s,mod:u,add:l,isInteger:o}=t;return e($2,{"number, number":c,"BigNumber, BigNumber":c});function c(d,m){if(!o(d)||!o(m))throw new Error("Parameters in function invmod must be integer numbers");if(d=u(d,m),i(m,0))throw new Error("Divisor must be non zero");var h=a(d,m);h=h.valueOf();var[p,v]=h;return i(p,n(1))?(v=u(v,m),s(v,n(0))&&(v=l(v,m)),v):NaN}}),hV="matAlgo09xS0Sf",pV=["typed","equalScalar"],i4=q(hV,pV,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,d=a._datatype||a._data===void 0?a._datatype:a.getDataType(),m=i._values,h=i._index,p=i._ptr,v=i._size,C=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new ht(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var N=c[0],A=c[1],b,g=r,w=0,x=s;typeof d=="string"&&d===C&&d!=="mixed"&&(b=d,g=e.find(r,[b,b]),w=e.convert(0,b),x=e.find(s,[b,b]));var _=u&&m?[]:void 0,E=[],D=[],T=_?[]:void 0,M=[],I,P,B,$,R;for(P=0;P<A;P++){D[P]=E.length;var G=P+1;if(T)for($=p[P],R=p[P+1],B=$;B<R;B++)I=h[B],M[I]=G,T[I]=m[B];for($=o[P],R=o[P+1],B=$;B<R;B++)if(I=l[B],T){var L=M[I]===G?T[I]:w,H=x(u[B],L);g(H,w)||(E.push(I),_.push(H))}else E.push(I)}return D[A]=E.length,a.createSparseMatrix({values:_,index:E,ptr:D,size:[N,A],datatype:d===a._datatype&&C===i._datatype?b:void 0})}}),L2="dotMultiply",vV=["typed","matrix","equalScalar","multiplyScalar","concat"],gV=q(L2,vV,t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:a,concat:i}=t,s=Ra({typed:e,equalScalar:n}),u=i4({typed:e,equalScalar:n}),l=un({typed:e,equalScalar:n}),o=er({typed:e,matrix:r,concat:i});return e(L2,o({elop:a,SS:u,DS:s,Ss:l}))});function yV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return $y(t,e,function(n,a){return n&a})}function Vc(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var n=t.plus(new e(1));return n.s=-n.s||null,e.config({precision:r}),n}function xV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var n=new r(-1);return t.isZero()||e.eq(n)||t.eq(e)?e:e.isZero()||t.eq(n)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?n:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:$y(t,e,function(a,i){return a|i})}function $y(t,e,r){var n=t.constructor,a,i,s=+(t.s<0),u=+(e.s<0);if(s){a=rd(Vc(t));for(var l=0;l<a.length;++l)a[l]^=1}else a=rd(t);if(u){i=rd(Vc(e));for(var o=0;o<i.length;++o)i[o]^=1}else i=rd(e);var c,d,m;a.length<=i.length?(c=a,d=i,m=s):(c=i,d=a,m=u);var h=c.length,p=d.length,v=r(s,u)^1,C=new n(v^1),N=new n(1),A=new n(2),b=n.precision;for(n.config({precision:1e9});h>0;)r(c[--h],d[--p])===v&&(C=C.plus(N)),N=N.times(A);for(;p>0;)r(m,d[--p])===v&&(C=C.plus(N)),N=N.times(A);return n.config({precision:b}),v===0&&(C.s=-C.s),C}function rd(t){for(var e=t.d,r=e[0]+"",n=1;n<e.length;++n){for(var a=e[n]+"",i=7-a.length;i--;)a="0"+a;r+=a}for(var s=r.length;r.charAt(s)==="0";)s--;var u=t.e,l=r.slice(0,s+1||1),o=l.length;if(u>0)if(++u>o)for(u-=o;u--;)l+="0";else u<o&&(l=l.slice(0,u)+"."+l.slice(u));for(var c=[0],d=0;d<l.length;){for(var m=c.length;m--;)c[m]*=10;c[0]+=parseInt(l.charAt(d++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function bV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var n=new r(-1);return t.eq(n)?Vc(e):e.eq(n)?Vc(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?n:new r(t.isNegative()===e.isNegative()?1/0:-1/0):$y(t,e,function(a,i){return a^i})}function wV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new r(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e))}function NV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():t.isNegative()?new r(-1):t.isFinite()?new r(0):new r(NaN)}var z2="bitAnd",_V=["typed","matrix","equalScalar","concat"],s4=q(z2,_V,t=>{var{typed:e,matrix:r,equalScalar:n,concat:a}=t,i=Ra({typed:e,equalScalar:n}),s=Lh({typed:e,equalScalar:n}),u=un({typed:e,equalScalar:n}),l=er({typed:e,matrix:r,concat:a});return e(z2,{"number, number":AM,"BigNumber, BigNumber":yV,"bigint, bigint":(o,c)=>o&c},l({SS:s,DS:i,Ss:u}))}),V2="bitNot",EV=["typed"],SV=q(V2,EV,t=>{var{typed:e}=t;return e(V2,{number:DM,BigNumber:Vc,bigint:r=>~r,"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),U2="bitOr",AV=["typed","matrix","equalScalar","DenseMatrix","concat"],o4=q(U2,AV,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=Ts({typed:e}),u=jy({typed:e,equalScalar:n}),l=Eo({typed:e,DenseMatrix:a}),o=er({typed:e,matrix:r,concat:i});return e(U2,{"number, number":CM,"BigNumber, BigNumber":xV,"bigint, bigint":(c,d)=>c|d},o({SS:u,DS:s,Ss:l}))}),DV="matAlgo07xSSf",CV=["typed","SparseMatrix"],ri=q(DV,CV,t=>{var{typed:e,SparseMatrix:r}=t;return function(i,s,u){var l=i._size,o=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==c.length)throw new ht(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var m=l[0],h=l[1],p,v=0,C=u;typeof o=="string"&&o===d&&o!=="mixed"&&(p=o,v=e.convert(0,p),C=e.find(u,[p,p]));for(var N=[],A=[],b=new Array(h+1).fill(0),g=[],w=[],x=[],_=[],E=0;E<h;E++){var D=E+1,T=0;n(i,E,x,g,D),n(s,E,_,w,D);for(var M=0;M<m;M++){var I=x[M]===D?g[M]:v,P=_[M]===D?w[M]:v,B=C(I,P);B!==0&&B!==!1&&(A.push(M),N.push(B),T++)}b[E+1]=b[E]+T}return new r({values:N,index:A,ptr:b,size:[m,h],datatype:o===i._datatype&&d===s._datatype?p:void 0})};function n(a,i,s,u,l){for(var o=a._values,c=a._index,d=a._ptr,m=d[i],h=d[i+1];m<h;m++){var p=c[m];s[p]=l,u[p]=o[m]}}}),q2="bitXor",TV=["typed","matrix","DenseMatrix","concat","SparseMatrix"],MV=q(q2,TV,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:a,SparseMatrix:i}=t,s=wn({typed:e}),u=ri({typed:e,SparseMatrix:i}),l=kr({typed:e,DenseMatrix:n}),o=er({typed:e,matrix:r,concat:a});return e(q2,{"number, number":TM,"BigNumber, BigNumber":bV,"bigint, bigint":(c,d)=>c^d},o({SS:u,DS:s,Ss:l}))}),H2="arg",IV=["typed"],PV=q(H2,IV,t=>{var{typed:e}=t;return e(H2,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),G2="conj",FV=["typed"],RV=q(G2,FV,t=>{var{typed:e}=t;return e(G2,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:e.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),W2="im",OV=["typed"],BV=q(W2,OV,t=>{var{typed:e}=t;return e(W2,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),Q2="re",jV=["typed"],kV=q(Q2,jV,t=>{var{typed:e}=t;return e(Q2,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),X2="not",$V=["typed"],LV=q(X2,$V,t=>{var{typed:e}=t;return e(X2,{"null | undefined":()=>!0,number:RM,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:r=>!r,Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),K2="nullish",zV=["typed","matrix","size","flatten","deepEqual"],u4=q(K2,zV,t=>{var{typed:e,matrix:r,size:n,flatten:a,deepEqual:i}=t,s=wn({typed:e}),u=ga({typed:e}),l=n4({typed:e});return e(K2,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(o,c)=>o,"null, any":(o,c)=>c,"undefined, any":(o,c)=>c,"SparseMatrix, Array | Matrix":(o,c)=>{var d=n(o),m=n(c);if(i(d,m))return o;throw new ht(d,m)},"DenseMatrix, DenseMatrix":e.referToSelf(o=>(c,d)=>l(c,d,o)),"DenseMatrix, SparseMatrix":e.referToSelf(o=>(c,d)=>s(c,d,o,!1)),"DenseMatrix, Array":e.referToSelf(o=>(c,d)=>l(c,r(d),o)),"DenseMatrix, any":e.referToSelf(o=>(c,d)=>u(c,d,o,!1)),"Array, Array":e.referToSelf(o=>(c,d)=>l(r(c),r(d),o).valueOf()),"Array, DenseMatrix":e.referToSelf(o=>(c,d)=>l(r(c),d,o)),"Array, SparseMatrix":e.referToSelf(o=>(c,d)=>s(r(c),d,o,!1)),"Array, any":e.referToSelf(o=>(c,d)=>u(r(c),d,o,!1).valueOf())})}),J2="or",VV=["typed","matrix","equalScalar","DenseMatrix","concat"],l4=q(J2,VV,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=wn({typed:e}),u=$h({typed:e,equalScalar:n}),l=kr({typed:e,DenseMatrix:a}),o=er({typed:e,matrix:r,concat:i});return e(J2,{"number, number":Ig,"Complex, Complex":function(d,m){return d.re!==0||d.im!==0||m.re!==0||m.im!==0},"BigNumber, BigNumber":function(d,m){return!d.isZero()&&!d.isNaN()||!m.isZero()&&!m.isNaN()},"bigint, bigint":Ig,"Unit, Unit":e.referToSelf(c=>(d,m)=>c(d.value||0,m.value||0))},o({SS:u,DS:s,Ss:l}))}),Y2="xor",UV=["typed","matrix","DenseMatrix","concat","SparseMatrix"],qV=q(Y2,UV,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:a,SparseMatrix:i}=t,s=wn({typed:e}),u=ri({typed:e,SparseMatrix:i}),l=kr({typed:e,DenseMatrix:n}),o=er({typed:e,matrix:r,concat:a});return e(Y2,{"number, number":Pg,"Complex, Complex":function(d,m){return(d.re!==0||d.im!==0)!=(m.re!==0||m.im!==0)},"bigint, bigint":Pg,"BigNumber, BigNumber":function(d,m){return(!d.isZero()&&!d.isNaN())!=(!m.isZero()&&!m.isNaN())},"Unit, Unit":e.referToSelf(c=>(d,m)=>c(d.value||0,m.value||0))},o({SS:u,DS:s,Ss:l}))}),Z2="concat",HV=["typed","matrix","isInteger"],c4=q(Z2,HV,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(Z2,{"...Array | Matrix | number | BigNumber":function(i){var s,u=i.length,l=-1,o,c=!1,d=[];for(s=0;s<u;s++){var m=i[s];if(Ze(m)&&(c=!0),Ke(m)||lt(m)){if(s!==u-1)throw new Error("Dimension must be specified as last argument");if(o=l,l=m.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>o)throw new Pa(l,o+1)}else{var h=at(m).valueOf(),p=it(h);if(d[s]=h,o=l,l=p.length-1,s>0&&l!==o)throw new ht(o+1,l+1)}}if(d.length===0)throw new SyntaxError("At least one matrix expected");for(var v=d.shift();d.length;)v=lM(v,d.shift(),l);return c?r(v):v},"...string":function(i){return i.join("")}})}),e_="column",GV=["typed","Index","matrix","range"],f4=q(e_,GV,t=>{var{typed:e,Index:r,matrix:n,range:a}=t;return e(e_,{"Matrix, number":i,"Array, number":function(u,l){return i(n(at(u)),l).valueOf()}});function i(s,u){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Zt(u,s.size()[1]);var l=a(0,s.size()[0]),o=new r(l,[u]),c=s.subset(o);return Ze(c)?c:n([[c]])}}),t_="count",WV=["typed","size","prod"],QV=q(t_,WV,t=>{var{typed:e,size:r,prod:n}=t;return e(t_,{string:function(i){return i.length},"Matrix | Array":function(i){return n(r(i))}})}),r_="cross",XV=["typed","matrix","subtract","multiply"],KV=q(r_,XV,t=>{var{typed:e,matrix:r,subtract:n,multiply:a}=t;return e(r_,{"Matrix, Matrix":function(u,l){return r(i(u.toArray(),l.toArray()))},"Matrix, Array":function(u,l){return r(i(u.toArray(),l))},"Array, Matrix":function(u,l){return r(i(u,l.toArray()))},"Array, Array":i});function i(s,u){var l=Math.max(it(s).length,it(u).length);s=Im(s),u=Im(u);var o=it(s),c=it(u);if(o.length!==1||c.length!==1||o[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+o.join(", ")+"], B = ["+c.join(", ")+"])");var d=[n(a(s[1],u[2]),a(s[2],u[1])),n(a(s[2],u[0]),a(s[0],u[2])),n(a(s[0],u[1]),a(s[1],u[0]))];return l>1?[d]:d}}),n_="diag",JV=["typed","matrix","DenseMatrix","SparseMatrix"],YV=q(n_,JV,t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:a}=t;return e(n_,{Array:function(o){return i(o,0,it(o),null)},"Array, number":function(o,c){return i(o,c,it(o),null)},"Array, BigNumber":function(o,c){return i(o,c.toNumber(),it(o),null)},"Array, string":function(o,c){return i(o,0,it(o),c)},"Array, number, string":function(o,c,d){return i(o,c,it(o),d)},"Array, BigNumber, string":function(o,c,d){return i(o,c.toNumber(),it(o),d)},Matrix:function(o){return i(o,0,o.size(),o.storage())},"Matrix, number":function(o,c){return i(o,c,o.size(),o.storage())},"Matrix, BigNumber":function(o,c){return i(o,c.toNumber(),o.size(),o.storage())},"Matrix, string":function(o,c){return i(o,0,o.size(),c)},"Matrix, number, string":function(o,c,d){return i(o,c,o.size(),d)},"Matrix, BigNumber, string":function(o,c,d){return i(o,c.toNumber(),o.size(),d)}});function i(l,o,c,d){if(!Qe(o))throw new TypeError("Second parameter in function diag must be an integer");var m=o>0?o:0,h=o<0?-o:0;switch(c.length){case 1:return s(l,o,d,c[0],h,m);case 2:return u(l,o,d,c,h,m)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,o,c,d,m,h){var p=[d+m,d+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?a.diagonal(p,l,o):n.diagonal(p,l,o);return c!==null?v:v.valueOf()}function u(l,o,c,d,m,h){if(Ze(l)){var p=l.diagonal(o);return c!==null?c!==p.storage()?r(p,c):p:p.valueOf()}for(var v=Math.min(d[0]-m,d[1]-h),C=[],N=0;N<v;N++)C[N]=l[N+m][N+h];return c!==null?r(C):C}}),ZV="filter",eU=["typed"],d4=q(ZV,eU,t=>{var{typed:e}=t;return e("filter",{"Array, function":a_,"Matrix, function":function(n,a){return n.create(a_(n.valueOf(),a),n.datatype())},"Array, RegExp":QN,"Matrix, RegExp":function(n,a){return n.create(QN(n.valueOf(),a),n.datatype())}})});function a_(t,e){var r=mo(e,t,"filter");return r.isUnary?WN(t,r.fn):WN(t,function(n,a,i){return r.fn(n,[a],i)})}var i_="flatten",tU=["typed"],rU=q(i_,tU,t=>{var{typed:e}=t;return e(i_,{Array:function(n){return Tt(n)},DenseMatrix:function(n){return n.create(Tt(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),kg="forEach",nU=["typed"],m4=q(kg,nU,t=>{var{typed:e}=t;return e(kg,{"Array, function":aU,"Matrix, function":function(n,a){n.forEach(a)}})});function aU(t,e){var r=mo(e,t,kg);fM(t,r.fn,r.isUnary)}var s_="getMatrixDataType",iU=["typed"],sU=q(s_,iU,t=>{var{typed:e}=t;return e(s_,{Array:function(n){return jh(n,Kt)},Matrix:function(n){return n.getDataType()}})}),o_="identity",oU=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],uU=q(o_,oU,t=>{var{typed:e,config:r,matrix:n,BigNumber:a,DenseMatrix:i,SparseMatrix:s}=t;return e(o_,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,d){return l(c,c,d)},"number | BigNumber, number | BigNumber":function(c,d){return l(c,d,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,d,m){return l(c,d,m)},Array:function(c){return u(c)},"Array, string":function(c,d){return u(c,d)},Matrix:function(c){return u(c.valueOf(),c.storage())},"Matrix, string":function(c,d){return u(c.valueOf(),d)}});function u(o,c){switch(o.length){case 0:return c?n(c):[];case 1:return l(o[0],o[0],c);case 2:return l(o[0],o[1],c);default:throw new Error("Vector containing two values expected")}}function l(o,c,d){var m=lt(o)||lt(c)?a:null;if(lt(o)&&(o=o.toNumber()),lt(c)&&(c=c.toNumber()),!Qe(o)||o<1)throw new Error("Parameters in function identity must be positive integers");if(!Qe(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=m?new a(1):1,p=m?new m(0):0,v=[o,c];if(d){if(d==="sparse")return s.diagonal(v,h,0,p);if(d==="dense")return i.diagonal(v,h,0,p);throw new TypeError('Unknown matrix type "'.concat(d,'"'))}for(var C=Vu([],v,p),N=o<c?o:c,A=0;A<N;A++)C[A][A]=h;return C}}),u_="kron",lU=["typed","matrix","multiplyScalar"],cU=q(u_,lU,t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e(u_,{"Matrix, Matrix":function(u,l){return r(i(u.toArray(),l.toArray()))},"Matrix, Array":function(u,l){return r(i(u.toArray(),l))},"Array, Matrix":function(u,l){return r(i(u,l.toArray()))},"Array, Array":i});function a(s,u){return s.flatMap(l=>u.map(o=>n(l,o)))}function i(s,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var o=it(s).length,c=it(u).length;for(l=Math.max(o,c);o++<l;)s=[s];for(;c++<l;)u=[u]}return l===1?a(s,u):s.flatMap(d=>u.map(m=>i(d,m,l-1)))}}),Zp="map",fU=["typed"],h4=q(Zp,fU,t=>{var{typed:e}=t;return e(Zp,{"Array, function":u,"Matrix, function":function(o,c){return o.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,o,c)=>r([l,o,...c.slice(0,c.length-1)],c[c.length-1])});function r(l,o){if(typeof o!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,d=l.map(w=>w.isMatrix?w.size():it(w)),m=Fm(...d),h=l.length,p=c?(w,x)=>w.get(x):Rm,v=l.map((w,x)=>{var _=d[x].map(()=>0);return w.isMatrix?w.get(_):Rm(w,_)}),C=e.isTypedFunction(o)?s(o,v,m.map(()=>0),l):i(o,h);if(C<2){var N=a(C,o,null);return n(l,N)}var A=c?l.map(w=>w.isMatrix?w.create(Zs(w.toArray(),m),w.datatype()):l[0].create(Zs(w.valueOf(),m))):l.map(w=>w.isMatrix?Zs(w.toArray(),m):Zs(w,m)),b=a(C,o,A),g=(w,x)=>b([w,...A.slice(1).map(_=>p(_,x))],x);return c?A[0].map(g):u(A[0],g)}function n(l,o){var c=l[0],d=l.map(w=>w.isMatrix?w.valueOf():w),m=l.map(w=>w.isMatrix?w.size():it(w)),h=Fm(...m),p=m.map(w=>h.length-w.length),v=h.length-1,C=o.length>1,N=C?[]:null,A=g(d,0);if(c.isMatrix){var b=c.create();return b._data=A,b._size=h,b}else return A;function g(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=h[x],E=Array(_);if(x<v)for(var D=function(B){N&&(N[x]=B),E[B]=g(w.map(($,R)=>p[R]>x?$:$.length===1?$[0]:$[B]),x+1)},T=0;T<_;T++)D(T);else for(var M=function(B){N&&(N[x]=B),E[B]=o(w.map($=>$.length===1?$[0]:$[B]),N?N.slice():void 0)},I=0;I<_;I++)M(I);return E}}function a(l,o,c){switch(l){case 0:return d=>o(...d);case 1:return(d,m)=>o(...d,m);case 2:return(d,m)=>o(...d,m,...c)}}function i(l,o){var c=l.toString();if(/arguments/.test(c))return 2;var d=c.match(/\(.*?\)/);return/\.\.\./.test(d)||l.length>o+1?2:l.length===o+1?1:0}function s(l,o,c,d){return e.resolve(l,[...o,c,...d])!==null?2:e.resolve(l,[...o,c])!==null?1:(e.resolve(l,o)!==null,0)}function u(l,o){var c=mo(o,l,Zp);return Cg(l,c.fn,c.isUnary)}}),l_="diff",dU=["typed","matrix","subtract","number"],p4=q(l_,dU,t=>{var{typed:e,matrix:r,subtract:n,number:a}=t;return e(l_,{"Array | Matrix":function(c){return Ze(c)?r(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,d){if(!Qe(d))throw new RangeError("Dimension must be a whole number");return Ze(c)?r(i(c.toArray(),d)):i(c,d)},"Array, BigNumber":e.referTo("Array,number",o=>(c,d)=>o(c,a(d))),"Matrix, BigNumber":e.referTo("Matrix,number",o=>(c,d)=>o(c,a(d)))});function i(o,c){if(Ze(o)&&(o=o.toArray()),!Array.isArray(o))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var d=[];return o.forEach(m=>{d.push(i(m,c-1))}),d}else{if(c===0)return s(o);throw RangeError("Cannot have negative dimension")}}function s(o){for(var c=[],d=o.length,m=1;m<d;m++)c.push(u(o[m-1],o[m]));return c}function u(o,c){Ze(o)&&(o=o.toArray()),Ze(c)&&(c=c.toArray());var d=Array.isArray(o),m=Array.isArray(c);if(d&&m)return l(o,c);if(!d&&!m)return n(c,o);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(o,c){if(o.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var d=[],m=o.length,h=0;h<m;h++)d.push(u(o[h],c[h]));return d}}),mU="ones",hU=["typed","config","matrix","BigNumber"],pU=q(mU,hU,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e("ones",{"":function(){return r.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(o){var c=o[o.length-1];if(typeof c=="string"){var d=o.pop();return i(o,d)}else return r.matrix==="Array"?i(o):i(o,"default")},Array:i,Matrix:function(o){var c=o.storage();return i(o.valueOf(),c)},"Array | Matrix, string":function(o,c){return i(o.valueOf(),c)}});function i(l,o){var c=s(l),d=c?new a(1):1;if(u(l),o){var m=n(o);return l.length>0?m.resize(l,d):m}else{var h=[];return l.length>0?Vu(h,l,d):h}}function s(l){var o=!1;return l.forEach(function(c,d,m){lt(c)&&(o=!0,m[d]=c.toNumber())}),o}function u(l){l.forEach(function(o){if(typeof o!="number"||!Qe(o)||o<0)throw new Error("Parameters in function ones must be positive integers")})}});function Ly(){throw new Error('No "bignumber" implementation available')}function v4(){throw new Error('No "fraction" implementation available')}function vU(){throw new Error('No "matrix" implementation available')}var c_="range",gU=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],g4=q(c_,gU,t=>{var{typed:e,config:r,matrix:n,bignumber:a,smaller:i,smallerEq:s,larger:u,largerEq:l,add:o,isZero:c,isPositive:d}=t;return e(c_,{string:h,"string, boolean":h,number:function(N){throw new TypeError("Too few arguments to function range(): ".concat(N))},boolean:function(N){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(N,", number|bigint|BigNumber|Fraction"))},"number, number":function(N,A){return m(p(N,A,1,!1))},"number, number, number":function(N,A,b){return m(p(N,A,b,!1))},"number, number, boolean":function(N,A,b){return m(p(N,A,1,b))},"number, number, number, boolean":function(N,A,b,g){return m(p(N,A,b,g))},"bigint, bigint|number":function(N,A){return m(p(N,A,1n,!1))},"number, bigint":function(N,A){return m(p(BigInt(N),A,1n,!1))},"bigint, bigint|number, bigint|number":function(N,A,b){return m(p(N,A,BigInt(b),!1))},"number, bigint, bigint|number":function(N,A,b){return m(p(BigInt(N),A,BigInt(b),!1))},"bigint, bigint|number, boolean":function(N,A,b){return m(p(N,A,1n,b))},"number, bigint, boolean":function(N,A,b){return m(p(BigInt(N),A,1n,b))},"bigint, bigint|number, bigint|number, boolean":function(N,A,b,g){return m(p(N,A,BigInt(b),g))},"number, bigint, bigint|number, boolean":function(N,A,b,g){return m(p(BigInt(N),A,BigInt(b),g))},"BigNumber, BigNumber":function(N,A){var b=N.constructor;return m(p(N,A,new b(1),!1))},"BigNumber, BigNumber, BigNumber":function(N,A,b){return m(p(N,A,b,!1))},"BigNumber, BigNumber, boolean":function(N,A,b){var g=N.constructor;return m(p(N,A,new g(1),b))},"BigNumber, BigNumber, BigNumber, boolean":function(N,A,b,g){return m(p(N,A,b,g))},"Fraction, Fraction":function(N,A){return m(p(N,A,1,!1))},"Fraction, Fraction, Fraction":function(N,A,b){return m(p(N,A,b,!1))},"Fraction, Fraction, boolean":function(N,A,b){return m(p(N,A,1,b))},"Fraction, Fraction, Fraction, boolean":function(N,A,b,g){return m(p(N,A,b,g))},"Unit, Unit, Unit":function(N,A,b){return m(p(N,A,b,!1))},"Unit, Unit, Unit, boolean":function(N,A,b,g){return m(p(N,A,b,g))}});function m(C){return r.matrix==="Matrix"?n?n(C):vU():C}function h(C,N){var A=v(C);if(!A)throw new SyntaxError('String "'+C+'" is no valid range');return r.number==="BigNumber"?(a===void 0&&Ly(),m(p(a(A.start),a(A.end),a(A.step)))):m(p(A.start,A.end,A.step,N))}function p(C,N,A,b){var g=[];if(c(A))throw new Error("Step must be non-zero");for(var w=d(A)?b?s:i:b?l:u,x=C;w(x,N);)g.push(x),x=o(x,A);return g}function v(C){var N=C.split(":"),A=N.map(function(g){return Number(g)}),b=A.some(function(g){return isNaN(g)});if(b)return null;switch(A.length){case 2:return{start:A[0],end:A[1],step:1};case 3:return{start:A[0],end:A[2],step:A[1]};default:return null}}}),f_="reshape",yU=["typed","isInteger","matrix"],xU=q(f_,yU,t=>{var{typed:e,isInteger:r}=t;return e(f_,{"Matrix, Array":function(a,i){return a.reshape(i,!0)},"Array, Array":function(a,i){return i.forEach(function(s){if(!r(s))throw new TypeError("Invalid size for dimension: "+s)}),Fy(a,i)}})}),bU="resize",wU=["config","matrix"],NU=q(bU,wU,t=>{var{config:e,matrix:r}=t;return function(i,s,u){if(arguments.length!==2&&arguments.length!==3)throw new So("resize",arguments.length,2,3);if(Ze(s)&&(s=s.valueOf()),lt(s[0])&&(s=s.map(function(c){return lt(c)?c.toNumber():c})),Ze(i))return i.resize(s,u,!0);if(typeof i=="string")return n(i,s,u);var l=Array.isArray(i)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(i);)i=i[0];return at(i)}else{Array.isArray(i)||(i=[i]),i=at(i);var o=Vu(i,s,u);return l?r(o):o}};function n(a,i,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(i.length!==1)throw new ht(i.length,1);var u=i[0];if(typeof u!="number"||!Qe(u))throw new TypeError("Invalid size, must contain positive integers (size: "+vt(i)+")");if(a.length>u)return a.substring(0,u);if(a.length<u){for(var l=a,o=0,c=u-a.length;o<c;o++)l+=s;return l}else return a}}),d_="rotate",_U=["typed","multiply","rotationMatrix"],EU=q(d_,_U,t=>{var{typed:e,multiply:r,rotationMatrix:n}=t;return e(d_,{"Array , number | BigNumber | Complex | Unit":function(s,u){a(s,2);var l=r(n(u),s);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,u){return a(s,2),r(n(u),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,u,l){a(s,3);var o=r(n(u,l),s);return o},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,u,l){return a(s,3),r(n(u,l),s)}});function a(i,s){var u=Array.isArray(i)?it(i):i.size();if(u.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(u.length===2&&u[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(u[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),m_="rotationMatrix",SU=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],AU=q(m_,SU,t=>{var{typed:e,config:r,multiplyScalar:n,addScalar:a,unaryMinus:i,norm:s,BigNumber:u,matrix:l,DenseMatrix:o,SparseMatrix:c,cos:d,sin:m}=t;return e(m_,{"":function(){return r.matrix==="Matrix"?l([]):[]},string:function(b){return l(b)},"number | BigNumber | Complex | Unit":function(b){return h(b,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(b,g){return h(b,g)},"number | BigNumber | Complex | Unit, Array":function(b,g){var w=l(g);return p(w),N(b,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(b,g){p(g);var w=g.storage()||(r.matrix==="Matrix"?"dense":void 0);return N(b,g,w)},"number | BigNumber | Complex | Unit, Array, string":function(b,g,w){var x=l(g);return p(x),N(b,x,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(b,g,w){return p(g),N(b,g,w)}});function h(A,b){var g=lt(A),w=g?new u(-1):-1,x=d(A),_=m(A),E=[[x,n(w,_)],[_,x]];return C(E,b)}function p(A){var b=A.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(A){return A.reduce((b,g)=>n(b,g))}function C(A,b){if(b){if(b==="sparse")return new c(A);if(b==="dense")return new o(A);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return A}function N(A,b,g){var w=s(b);if(w===0)throw new RangeError("Rotation around zero vector");var x=lt(A)?u:null,_=x?new x(1):1,E=x?new x(-1):-1,D=x?new x(b.get([0])/w):b.get([0])/w,T=x?new x(b.get([1])/w):b.get([1])/w,M=x?new x(b.get([2])/w):b.get([2])/w,I=d(A),P=a(_,i(I)),B=m(A),$=a(I,v([D,D,P])),R=a(v([D,T,P]),v([E,M,B])),G=a(v([D,M,P]),v([T,B])),L=a(v([D,T,P]),v([M,B])),H=a(I,v([T,T,P])),Z=a(v([T,M,P]),v([E,D,B])),ie=a(v([D,M,P]),v([E,T,B])),k=a(v([T,M,P]),v([D,B])),Y=a(I,v([M,M,P])),V=[[$,R,G],[L,H,Z],[ie,k,Y]];return C(V,g)}}),h_="row",DU=["typed","Index","matrix","range"],y4=q(h_,DU,t=>{var{typed:e,Index:r,matrix:n,range:a}=t;return e(h_,{"Matrix, number":i,"Array, number":function(u,l){return i(n(at(u)),l).valueOf()}});function i(s,u){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Zt(u,s.size()[0]);var l=a(0,s.size()[1]),o=new r([u],l),c=s.subset(o);return Ze(c)?c:n([[c]])}}),p_="size",CU=["typed"],TU=q(p_,CU,t=>{var{typed:e}=t;return e(p_,{Matrix:r=>r.size(),Array:it,string:r=>[r.length],"number | Complex | BigNumber | Unit | boolean | null":r=>[]})}),v_="squeeze",MU=["typed"],IU=q(v_,MU,t=>{var{typed:e}=t;return e(v_,{Array:function(n){return Im(at(n))},Matrix:function(n){var a=Im(n.toArray());return Array.isArray(a)?n.create(a,n.datatype()):a},any:function(n){return at(n)}})}),g_="subset",PU=["typed","matrix","zeros","add"],x4=q(g_,PU,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t;return e(g_,{"Matrix, Index":function(u,l){return zu(l)?r():(Mm(u,l),u.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(u,l){var o=s(r(u),l);return l.isScalar()?o:o.valueOf()}}),"Object, Index":RU,"string, Index":FU,"Matrix, Index, any, any":function(u,l,o,c){return zu(l)?u:(Mm(u,l),u.clone().subset(l,i(o,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(u,l,o,c){var d=s(r(u),l,o,c);return d.isMatrix?d.valueOf():d}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(u,l,o){return s(r(u),l,o,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(u,l,o){return s(u,l,o,void 0)}}),"string, Index, string":y_,"string, Index, string, string":y_,"Object, Index, any":OU});function i(s,u){if(typeof s=="string")throw new Error("can't boradcast a string");if(u.isScalar())return s;var l=u.size();if(l.every(o=>o>0))try{return a(s,n(l))}catch{return s}else return s}});function FU(t,e){if(!Mh(e))throw new TypeError("Index expected");if(zu(e))return"";if(Mm(Array.from(t),e),e.size().length!==1)throw new ht(e.size().length,1);var r=t.length;Zt(e.min()[0],r),Zt(e.max()[0],r);var n=e.dimension(0),a="";function i(s){a+=t.charAt(s)}return Number.isInteger(n)?i(n):n.forEach(i),a}function y_(t,e,r,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(zu(e))return t;if(Mm(Array.from(t),e),e.size().length!==1)throw new ht(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var a=e.dimension(0),i=Number.isInteger(a)?1:a.size()[0];if(i!==r.length)throw new ht(a.size()[0],r.length);var s=t.length;Zt(e.min()[0]),Zt(e.max()[0]);for(var u=[],l=0;l<s;l++)u[l]=t.charAt(l);function o(m,h){u[m]=r.charAt(h[0])}if(Number.isInteger(a)?o(a,[0]):a.forEach(o),u.length>s)for(var c=s-1,d=u.length;c<d;c++)u[c]||(u[c]=n);return u.join("")}function RU(t,e){if(!zu(e)){if(e.size().length!==1)throw new ht(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return Sn(t,r)}}function OU(t,e,r){if(zu(e))return t;if(e.size().length!==1)throw new ht(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var a=at(t);return $u(a,n,r),a}var x_="transpose",BU=["typed","matrix"],jU=q(x_,BU,t=>{var{typed:e,matrix:r}=t;return e(x_,{Array:s=>n(r(s)).valueOf(),Matrix:n,any:at});function n(s){var u=s.size(),l;switch(u.length){case 1:l=s.clone();break;case 2:{var o=u[0],c=u[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+vt(u)+")");switch(s.storage()){case"dense":l=a(s,o,c);break;case"sparse":l=i(s,o,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+vt(u)+")")}return l}function a(s,u,l){for(var o=s._data,c=[],d,m=0;m<l;m++){d=c[m]=[];for(var h=0;h<u;h++)d[h]=at(o[h][m])}return s.createDenseMatrix({data:c,size:[l,u],datatype:s._datatype})}function i(s,u,l){for(var o=s._values,c=s._index,d=s._ptr,m=o?[]:void 0,h=[],p=[],v=[],C=0;C<u;C++)v[C]=0;var N,A,b;for(N=0,A=c.length;N<A;N++)v[c[N]]++;for(var g=0,w=0;w<u;w++)p.push(g),g+=v[w],v[w]=p[w];for(p.push(g),b=0;b<l;b++)for(var x=d[b],_=d[b+1],E=x;E<_;E++){var D=v[c[E]]++;h[D]=b,o&&(m[D]=at(o[E]))}return s.createSparseMatrix({values:m,index:h,ptr:p,size:[l,u],datatype:s._datatype})}}),b_="ctranspose",kU=["typed","transpose","conj"],$U=q(b_,kU,t=>{var{typed:e,transpose:r,conj:n}=t;return e(b_,{any:function(i){return n(r(i))}})}),w_="zeros",LU=["typed","config","matrix","BigNumber"],zU=q(w_,LU,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e(w_,{"":function(){return r.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(o){var c=o[o.length-1];if(typeof c=="string"){var d=o.pop();return i(o,d)}else return r.matrix==="Array"?i(o):i(o,"default")},Array:i,Matrix:function(o){var c=o.storage();return i(o.valueOf(),c)},"Array | Matrix, string":function(o,c){return i(o.valueOf(),c)}});function i(l,o){var c=s(l),d=c?new a(0):0;if(u(l),o){var m=n(o);return l.length>0?m.resize(l,d):m}else{var h=[];return l.length>0?Vu(h,l,d):h}}function s(l){var o=!1;return l.forEach(function(c,d,m){lt(c)&&(o=!0,m[d]=c.toNumber())}),o}function u(l){l.forEach(function(o){if(typeof o!="number"||!Qe(o)||o<0)throw new Error("Parameters in function zeros must be positive integers")})}}),N_="fft",VU=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],UU=q(N_,VU,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:a,divideScalar:i,exp:s,tau:u,i:l,dotDivide:o,conj:c,pow:d,ceil:m,log2:h}=t;return e(N_,{Array:p,Matrix:function(b){return b.create(p(b.valueOf()),b.datatype())}});function p(A){var b=it(A);return b.length===1?N(A,b[0]):v(A.map(g=>p(g,b.slice(1))),0)}function v(A,b){var g=it(A);if(b!==0)return new Array(g[0]).fill(0).map((x,_)=>v(A[_],b-1));if(g.length===1)return N(A);function w(x){var _=it(x);return new Array(_[1]).fill(0).map((E,D)=>new Array(_[0]).fill(0).map((T,M)=>x[M][D]))}return w(v(w(A),1))}function C(A){for(var b=A.length,g=s(i(a(-1,a(l,u)),b)),w=[],x=1-b;x<b;x++)w.push(d(g,i(d(x,2),2)));for(var _=d(2,m(h(b+b-1))),E=[...new Array(b).fill(0).map((R,G)=>a(A[G],w[b-1+G])),...new Array(_-b).fill(0)],D=[...new Array(b+b-1).fill(0).map((R,G)=>i(1,w[G])),...new Array(_-(b+b-1)).fill(0)],T=N(E),M=N(D),I=new Array(_).fill(0).map((R,G)=>a(T[G],M[G])),P=o(c(p(c(I))),_),B=[],$=b-1;$<b+b-1;$++)B.push(a(P[$],w[$]));return B}function N(A){var b=A.length;if(b===1)return[A[0]];if(b%2===0){for(var g=[...N(A.filter((E,D)=>D%2===0)),...N(A.filter((E,D)=>D%2===1))],w=0;w<b/2;w++){var x=g[w],_=a(g[w+b/2],s(a(a(u,l),i(-w,b))));g[w]=n(x,_),g[w+b/2]=n(x,a(-1,_))}return g}else return C(A)}}),__="ifft",qU=["typed","fft","dotDivide","conj"],HU=q(__,qU,t=>{var{typed:e,fft:r,dotDivide:n,conj:a}=t;return e(__,{"Array | Matrix":function(s){var u=Ze(s)?s.size():it(s);return n(a(r(a(s))),u.reduce((l,o)=>l*o,1))}})});function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function GU(t,e){if(Uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WU(t){var e=GU(t,"string");return Uc(e)=="symbol"?e:e+""}function Ir(t,e,r){return(e=WU(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function QU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E_(Object(r),!0).forEach(function(n){Ir(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var XU="solveODE",KU=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],JU=q(XU,KU,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,max:s,map:u,abs:l,isPositive:o,isNegative:c,larger:d,smaller:m,matrix:h,bignumber:p,unaryMinus:v}=t;function C(E){return function(D,T,M,I){var P=!(T.length===2&&(T.every(x)||T.every(Wn)));if(P)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var B=T[0],$=T[1],R=d($,B),G=I.firstStep;if(G!==void 0&&!o(G))throw new Error('"firstStep" must be positive');var L=I.maxStep;if(L!==void 0&&!o(L))throw new Error('"maxStep" must be positive');var H=I.minStep;if(H&&c(H))throw new Error('"minStep" must be positive or zero');var Z=[B,$,G,H,L].filter(z=>z!==void 0);if(!(Z.every(x)||Z.every(Wn)))throw new Error('Inconsistent type of "t" dependant variables');for(var ie=1,k=I.tol?I.tol:1e-4,Y=I.minDelta?I.minDelta:.2,V=I.maxDelta?I.maxDelta:5,xe=I.maxIter?I.maxIter:1e4,le=[B,$,...M,L,H].some(lt),[de,Q,K,te]=le?[p(E.a),p(E.c),p(E.b),p(E.bp)]:[E.a,E.c,E.b,E.bp],se=G?R?G:v(G):i(n($,B),ie),ue=[B],ve=[M],he=n(K,te),Me=0,$e=0,Ve=g(R),Be=w(R);Ve(ue[Me],$);){var Le=[];se=Be(ue[Me],$,se),Le.push(D(ue[Me],ve[Me]));for(var W=1;W<Q.length;++W)Le.push(D(r(ue[Me],a(Q[W],se)),r(ve[Me],a(se,de[W],Le))));var re=s(l(u(a(he,Le),z=>Wn(z)?z.value:z)));re<k&&k/re>1/4&&(ue.push(r(ue[Me],se)),ve.push(r(ve[Me],a(se,K,Le))),Me++);var fe=.84*(k/re)**(1/5);if(m(fe,Y)?fe=Y:d(fe,V)&&(fe=V),fe=le?p(fe):fe,se=a(se,fe),L&&d(l(se),L)?se=R?L:v(L):H&&m(l(se),H)&&(se=R?H:v(H)),$e++,$e>xe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ue,y:ve}}}function N(E,D,T,M){var I=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],P=[null,1/2,3/4,1],B=[2/9,1/3,4/9,0],$=[7/24,1/4,1/3,1/8],R={a:I,c:P,b:B,bp:$};return C(R)(E,D,T,M)}function A(E,D,T,M){var I=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],P=[null,1/5,3/10,4/5,8/9,1,1],B=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],$=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],R={a:I,c:P,b:B,bp:$};return C(R)(E,D,T,M)}function b(E,D,T,M){var I=M.method?M.method:"RK45",P={RK23:N,RK45:A};if(I.toUpperCase()in P){var B=QU({},M);return delete B.method,P[I.toUpperCase()](E,D,T,B)}else{var $=Object.keys(P).map(G=>'"'.concat(G,'"')),R="".concat($.slice(0,-1).join(", ")," and ").concat($.slice(-1));throw new Error('Unavailable method "'.concat(I,'". Available methods are ').concat(R))}}function g(E){return E?m:d}function w(E){var D=E?d:m;return function(T,M,I){var P=r(T,I);return D(P,M)?n(M,T):I}}function x(E){return lt(E)||Ke(E)}function _(E,D,T,M){var I=b(E,D.toArray(),T.toArray(),M);return{t:h(I.t),y:h(I.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":_,"function, Array, Array":(E,D,T)=>b(E,D,T,{}),"function, Matrix, Matrix":(E,D,T)=>_(E,D,T,{}),"function, Array, number | BigNumber | Unit":(E,D,T)=>{var M=b(E,D,[T],{});return{t:M.t,y:M.y.map(I=>I[0])}},"function, Matrix, number | BigNumber | Unit":(E,D,T)=>{var M=b(E,D.toArray(),[T],{});return{t:h(M.t),y:h(M.y.map(I=>I[0]))}},"function, Array, number | BigNumber | Unit, Object":(E,D,T,M)=>{var I=b(E,D,[T],M);return{t:I.t,y:I.y.map(P=>P[0])}},"function, Matrix, number | BigNumber | Unit, Object":(E,D,T,M)=>{var I=b(E,D.toArray(),[T],M);return{t:h(I.t),y:h(I.y.map(P=>P[0]))}}})}),YU="erf",ZU=["typed"],eq=q(YU,ZU,t=>{var{typed:e}=t;return e("name",{number:function(s){var u=Math.abs(s);return u>=nq?Qi(s):u<=tq?Qi(s)*r(u):u<=4?Qi(s)*(1-n(u)):Qi(s)*(1-a(u))},"Array | Matrix":e.referToSelf(i=>s=>ct(s,i))});function r(i){var s=i*i,u=oi[0][4]*s,l=s,o;for(o=0;o<3;o+=1)u=(u+oi[0][o])*s,l=(l+qo[0][o])*s;return i*(u+oi[0][3])/(l+qo[0][3])}function n(i){var s=oi[1][8]*i,u=i,l;for(l=0;l<7;l+=1)s=(s+oi[1][l])*i,u=(u+qo[1][l])*i;var o=(s+oi[1][7])/(u+qo[1][7]),c=parseInt(i*16)/16,d=(i-c)*(i+c);return Math.exp(-c*c)*Math.exp(-d)*o}function a(i){var s=1/(i*i),u=oi[2][5]*s,l=s,o;for(o=0;o<4;o+=1)u=(u+oi[2][o])*s,l=(l+qo[2][o])*s;var c=s*(u+oi[2][4])/(l+qo[2][4]);c=(rq-c)/i,s=parseInt(i*16)/16;var d=(i-s)*(i+s);return Math.exp(-s*s)*Math.exp(-d)*c}}),tq=.46875,rq=.5641895835477563,oi=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],qo=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],nq=Math.pow(2,53),S_="zeta",aq=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],iq=q(S_,aq,t=>{var{typed:e,config:r,multiply:n,pow:a,divide:i,factorial:s,equal:u,smallerEq:l,isNegative:o,gamma:c,sin:d,subtract:m,add:h,Complex:p,BigNumber:v,pi:C}=t;return e(S_,{number:x=>N(x,_=>_,()=>20),BigNumber:x=>N(x,_=>new v(_),()=>Math.abs(Math.log10(r.relTol))),Complex:A});function N(x,_,E){return u(x,0)?_(-.5):u(x,1)?_(NaN):isFinite(x)?b(x,_,E,D=>D):o(x)?_(NaN):_(1)}function A(x){return x.re===0&&x.im===0?new p(-.5):x.re===1?new p(NaN,NaN):x.re===1/0&&x.im===0?new p(1):x.im===1/0||x.re===-1/0?new p(NaN,NaN):b(x,_=>_,_=>Math.round(1.3*15+.9*Math.abs(_.im)),_=>_.re)}function b(x,_,E,D){var T=E(x);if(D(x)>-(T-1)/2)return w(x,_(T),_);var M=n(a(2,x),a(_(C),m(x,1)));return M=n(M,d(n(i(_(C),2),x))),M=n(M,c(m(1,x))),n(M,b(m(1,x),_,E,D))}function g(x,_){for(var E=x,D=x;l(D,_);D=h(D,1)){var T=i(n(s(h(_,m(D,1))),a(4,D)),n(s(m(_,D)),s(n(2,D))));E=h(E,T)}return n(_,E)}function w(x,_,E){for(var D=i(1,n(g(E(0),_),m(1,a(2,m(1,x))))),T=E(0),M=E(1);l(M,_);M=h(M,1))T=h(T,i(n((-1)**(M-1),g(M,_)),a(M,x)));return n(D,T)}}),A_="mode",sq=["typed","isNaN","isNumeric"],oq=q(A_,sq,t=>{var{typed:e,isNaN:r,isNumeric:n}=t;return e(A_,{"Array | Matrix":a,"...":function(s){return a(s)}});function a(i){i=Tt(i.valueOf());var s=i.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var u={},l=[],o=0,c=0;c<i.length;c++){var d=i[c];if(n(d)&&r(d))throw new Error("Cannot calculate mode of an array containing NaN values");d in u||(u[d]=0),u[d]++,u[d]===o?l.push(d):u[d]>o&&(o=u[d],l=[d])}return l}});function Cn(t,e,r){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Kt(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+Kt(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var D_="prod",uq=["typed","config","multiplyScalar","numeric"],lq=q(D_,uq,t=>{var{typed:e,config:r,multiplyScalar:n,numeric:a}=t;return e(D_,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(u,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(u){return i(u)}});function i(s){var u;if(_s(s,function(l){try{u=u===void 0?l:n(u,l)}catch(o){throw Cn(o,"prod",l)}}),typeof u=="string"&&(u=a(u,Ds(u,r))),u===void 0)throw new Error("Cannot calculate prod of an empty array");return u}}),C_="format",cq=["typed"],fq=q(C_,cq,t=>{var{typed:e}=t;return e(C_,{any:vt,"any, Object | function | number | BigNumber":vt})}),T_="bin",dq=["typed","format"],mq=q(T_,dq,t=>{var{typed:e,format:r}=t;return e(T_,{"number | BigNumber":function(a){return r(a,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"bin",wordSize:i})}})}),M_="oct",hq=["typed","format"],pq=q(M_,hq,t=>{var{typed:e,format:r}=t;return e(M_,{"number | BigNumber":function(a){return r(a,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"oct",wordSize:i})}})}),I_="hex",vq=["typed","format"],gq=q(I_,vq,t=>{var{typed:e,format:r}=t;return e(I_,{"number | BigNumber":function(a){return r(a,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"hex",wordSize:i})}})}),b4=/\$([\w.]+)/g,P_="print",yq=["typed"],w4=q(P_,yq,t=>{var{typed:e}=t;return e(P_,{"string, Object | Array":F_,"string, Object | Array, number | Object":F_})});function F_(t,e,r){return t.replace(b4,function(n,a){var i=a.split("."),s=e[i.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());i.length&&s!==void 0;){var u=i.shift();s=u?s[u]:s+"."}return s!==void 0?xr(s)?s:vt(s,r):n})}var R_="to",xq=["typed","matrix","concat"],bq=q(R_,xq,t=>{var{typed:e,matrix:r,concat:n}=t,a=er({typed:e,matrix:r,concat:n});return e(R_,{"Unit, Unit | string":(i,s)=>i.to(s)},a({Ds:!0}))}),O_="toBest",wq=["typed"],Nq=q(O_,wq,t=>{var{typed:e}=t;return e(O_,{Unit:r=>r.toBest(),"Unit, string":(r,n)=>r.toBest(n.split(",")),"Unit, string, Object":(r,n,a)=>r.toBest(n.split(","),a),"Unit, Array":(r,n)=>r.toBest(n),"Unit, Array, Object":(r,n,a)=>r.toBest(n,a)})}),B_="isPrime",_q=["typed"],Eq=q(B_,_q,t=>{var{typed:e}=t;return e(B_,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var a=5;a*a<=n;a+=6)if(n%a===0||n%(a+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var a=5n;a*a<=n;a+=6n)if(n%a===0n||n%(a+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var a=n.toNumber(),i=5;i*i<=a;i+=6)if(a%i===0||a%(i+2)===0)return!1;return!0}function s(A,b,g){for(var w=1;!b.eq(0);)b.mod(2).eq(0)?(b=b.div(2),A=A.mul(A).mod(g)):(b=b.sub(1),w=A.mul(w).mod(g));return w}var u=n.constructor.clone({precision:n.toFixed(0).length*2});n=new u(n);for(var l=0,o=n.sub(1);o.mod(2).eq(0);)o=o.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(A=>A<n);else{var d=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var m=2;m<=d;m+=1)c.push(d)}for(var h=0;h<c.length;h+=1){var p=c[h],v=s(n.sub(n).add(p),o,n);if(!v.eq(1)){for(var C=0,N=v;!N.eq(n.sub(1));C+=1,N=N.mul(N).mod(n))if(C===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(r=>n=>ct(n,r))})}),Sq="numeric",Aq=["number","?bignumber","?fraction"],Dq=q(Sq,Aq,t=>{var{number:e,bignumber:r,fraction:n}=t,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},i={number:s=>e(s),BigNumber:r?s=>r(s):Ly,bigint:s=>BigInt(s),Fraction:n?s=>n(s):v4};return function(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",o=arguments.length>2?arguments[2]:void 0;if(o!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Kt(u);if(!(c in a))throw new TypeError("Cannot convert "+u+' of type "'+c+'"; valid input types are '+Object.keys(a).join(", "));if(!(l in i))throw new TypeError("Cannot convert "+u+' to type "'+l+'"; valid output types are '+Object.keys(i).join(", "));return l===c?u:i[l](u)}}),j_="divideScalar",Cq=["typed","numeric"],Tq=q(j_,Cq,t=>{var{typed:e,numeric:r}=t;return e(j_,{"number, number":function(a,i){return a/i},"Complex, Complex":function(a,i){return a.div(i)},"BigNumber, BigNumber":function(a,i){return a.div(i)},"bigint, bigint":function(a,i){return a/i},"Fraction, Fraction":function(a,i){return a.div(i)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,a)=>n.divide(a),"number | Fraction | Complex | BigNumber, Unit":(n,a)=>a.divideInto(n)})}),k_="pow",Mq=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Iq=q(k_,Mq,t=>{var{typed:e,config:r,identity:n,multiply:a,matrix:i,inv:s,number:u,fraction:l,Complex:o}=t;return e(k_,{"number, number":c,"Complex, Complex":function(p,v){return p.pow(v)},"BigNumber, BigNumber":function(p,v){return v.isInteger()||p>=0||r.predictable?p.pow(v):new o(p.toNumber(),0).pow(v.toNumber(),0)},"bigint, bigint":(h,p)=>h**p,"Fraction, Fraction":function(p,v){var C=p.pow(v);if(C!=null)return C;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),v.valueOf())},"Array, number":d,"Array, BigNumber":function(p,v){return d(p,v.toNumber())},"Matrix, number":m,"Matrix, BigNumber":function(p,v){return m(p,v.toNumber())},"Unit, number | BigNumber":function(p,v){return p.pow(v)}});function c(h,p){if(r.predictable&&!Qe(p)&&h<0)try{var v=l(p),C=u(v);if((p===C||Math.abs((p-C)/p)<1e-14)&&v.d%2n===1n)return(v.n%2n===0n?1:-1)*Math.pow(-h,p)}catch{}return r.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:Qe(p)||h>=0||r.predictable?SM(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new o(h,0).pow(p,0)}function d(h,p){if(!Qe(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var v=it(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(p<0)try{return d(s(h),-p)}catch(A){throw A.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):A}for(var C=n(v[0]).valueOf(),N=h;p>=1;)(p&1)===1&&(C=a(N,C)),p>>=1,N=a(N,N);return C}function m(h,p){return i(d(h.valueOf(),p))}}),Ho="Number of decimals in function round must be an integer",$_="round",Pq=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Fq=q($_,Pq,t=>{var{typed:e,config:r,matrix:n,equalScalar:a,zeros:i,BigNumber:s,DenseMatrix:u}=t,l=un({typed:e,equalScalar:a}),o=kr({typed:e,DenseMatrix:u}),c=ga({typed:e});function d(m){return Math.abs(af(m).exponent)}return e($_,{number:function(h){var p=jl(h,d(r.relTol)),v=Jr(h,p,r.relTol,r.absTol)?p:h;return jl(v)},"number, number":function(h,p){var v=d(r.relTol);if(p>=v)return jl(h,p);var C=jl(h,v),N=Jr(h,C,r.relTol,r.absTol)?C:h;return jl(N,p)},"number, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Ho);return new s(h).toDecimalPlaces(p.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,p){if(p%1)throw new TypeError(Ho);return h.round(p)},"Complex, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Ho);var v=p.toNumber();return h.round(v)},BigNumber:function(h){var p=new s(h).toDecimalPlaces(d(r.relTol)),v=va(h,p,r.relTol,r.absTol)?p:h;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Ho);var v=d(r.relTol);if(p>=v)return h.toDecimalPlaces(p.toNumber());var C=h.toDecimalPlaces(v),N=va(h,C,r.relTol,r.absTol)?C:h;return N.toDecimalPlaces(p.toNumber())},bigint:m=>m,"bigint, number":(m,h)=>m,"bigint, BigNumber":(m,h)=>m,Fraction:function(h){return h.round()},"Fraction, number":function(h,p){if(p%1)throw new TypeError(Ho);return h.round(p)},"Fraction, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Ho);return h.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(h,p,v){var C=h.toNumeric(v);return v.multiply(m(C,p))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(h,p,v)=>m(h,p.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(h,p,v)=>ct(h,C=>m(C,p,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(h,p)=>m(h,0,p)),"Array | Matrix":e.referToSelf(m=>h=>ct(h,m,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(h,p)=>l(h,p,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(h,p)=>c(h,p,m,!1)),"Array, number | BigNumber":e.referToSelf(m=>(h,p)=>c(n(h),p,m,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(m=>(h,p)=>a(h,0)?i(p.size(),p.storage()):o(p,h,m,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(m=>(h,p)=>a(h,0)?i(p.size(),p.storage()):c(p,h,m,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(m=>(h,p)=>c(n(p),h,m,!0).valueOf())})}),L_="log",Rq=["config","typed","typeOf","divideScalar","Complex"],Oq=Math.log(16),Bq=q(L_,Rq,t=>{var{typed:e,typeOf:r,config:n,divideScalar:a,Complex:i}=t;function s(l){return l.log()}function u(l){return s(new i(l,0))}return e(L_,{number:function(o){return o>=0||n.predictable?e2(o):u(o)},bigint:ky(Oq,e2,n,u),Complex:s,BigNumber:function(o){return!o.isNegative()||n.predictable?o.ln():u(o.toNumber())},"any, any":e.referToSelf(l=>(o,c)=>{if(r(o)==="Fraction"&&r(c)==="Fraction"){var d=o.log(c);if(d!==null)return d}return a(l(o),l(c))})})}),z_="log1p",jq=["typed","config","divideScalar","log","Complex"],kq=q(z_,jq,t=>{var{typed:e,config:r,divideScalar:n,log:a,Complex:i}=t;return e(z_,{number:function(l){return l>=-1||r.predictable?Ik(l):s(new i(l,0))},Complex:s,BigNumber:function(l){var o=l.plus(1);return!o.isNegative()||r.predictable?o.ln():s(new i(l.toNumber(),0))},"Array | Matrix":e.referToSelf(u=>l=>ct(l,u)),"any, any":e.referToSelf(u=>(l,o)=>n(u(l),a(o)))});function s(u){var l=u.re+1;return new i(Math.log(Math.sqrt(l*l+u.im*u.im)),Math.atan2(u.im,l))}}),V_="nthRoots",$q=["config","typed","divideScalar","Complex"],Lq=q(V_,$q,t=>{var{typed:e,config:r,divideScalar:n,Complex:a}=t,i=[function(l){return new a(l,0)},function(l){return new a(0,l)},function(l){return new a(-l,0)},function(l){return new a(0,-l)}];function s(u,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(u===0||u.abs()===0)return[new a(0,0)];var o=typeof u=="number",c;(o||u.re===0||u.im===0)&&(o?c=2*+(u<0):u.im===0?c=2*+(u.re<0):c=2*+(u.im<0)+1);for(var d=u.arg(),m=u.abs(),h=[],p=Math.pow(m,1/l),v=0;v<l;v++){var C=(c+4*v)/l;if(C===Math.round(C)){h.push(i[C%4](p));continue}h.push(new a({r:p,phi:(d+2*Math.PI*v)/l}))}return h}return e(V_,{Complex:function(l){return s(l,2)},"Complex, number":s})}),U_="dotPow",zq=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],Vq=q(U_,zq,t=>{var{typed:e,equalScalar:r,matrix:n,pow:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=wn({typed:e}),o=ri({typed:e,SparseMatrix:u}),c=un({typed:e,equalScalar:r}),d=kr({typed:e,DenseMatrix:i}),m=er({typed:e,matrix:n,concat:s}),h={};for(var p in a.signatures)Object.prototype.hasOwnProperty.call(a.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(h[p]=a.signatures[p]);var v=e(h);return e(U_,m({elop:v,SS:o,DS:l,Ss:c,sS:d}))}),q_="dotDivide",Uq=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],qq=q(q_,Uq,t=>{var{typed:e,matrix:r,equalScalar:n,divideScalar:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=Ra({typed:e,equalScalar:n}),o=wn({typed:e}),c=ri({typed:e,SparseMatrix:u}),d=un({typed:e,equalScalar:n}),m=kr({typed:e,DenseMatrix:i}),h=er({typed:e,matrix:r,concat:s});return e(q_,h({elop:a,SS:c,DS:o,SD:l,Ss:d,sS:m}))});function sf(t){var{DenseMatrix:e}=t;return function(n,a,i){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+vt(s)+")");var u=s[0],l=s[1];if(u!==l)throw new RangeError("Matrix must be square (size: "+vt(s)+")");var o=[];if(Ze(a)){var c=a.size(),d=a._data;if(c.length===1){if(c[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var m=0;m<u;m++)o[m]=[d[m]];return new e({data:o,size:[u,1],datatype:a._datatype})}if(c.length===2){if(c[0]!==u||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Sm(a)){if(i){o=[];for(var h=0;h<u;h++)o[h]=[d[h][0]];return new e({data:o,size:[u,1],datatype:a._datatype})}return a}if(Ys(a)){for(var p=0;p<u;p++)o[p]=[0];for(var v=a._values,C=a._index,N=a._ptr,A=N[1],b=N[0];b<A;b++){var g=C[b];o[g][0]=v[b]}return new e({data:o,size:[u,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Qt(a)){var w=it(a);if(w.length===1){if(w[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<u;x++)o[x]=[a[x]];return new e({data:o,size:[u,1]})}if(w.length===2){if(w[0]!==u||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<u;_++)o[_]=[a[_][0]];return new e({data:o,size:[u,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var H_="lsolve",Hq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Gq=q(H_,Hq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=sf({DenseMatrix:u});return e(H_,{"SparseMatrix, Array | Matrix":function(m,h){return c(m,h)},"DenseMatrix, Array | Matrix":function(m,h){return o(m,h)},"Array, Array | Matrix":function(m,h){var p=r(m),v=o(p,h);return v.valueOf()}});function o(d,m){m=l(d,m,!0);for(var h=m._data,p=d._size[0],v=d._size[1],C=[],N=d._data,A=0;A<v;A++){var b=h[A][0]||0,g=void 0;if(s(b,0))g=0;else{var w=N[A][A];if(s(w,0))throw new Error("Linear system cannot be solved since matrix is singular");g=n(b,w);for(var x=A+1;x<p;x++)h[x]=[i(h[x][0]||0,a(g,N[x][A]))]}C[A]=[g]}return new u({data:C,size:[p,1]})}function c(d,m){m=l(d,m,!0);for(var h=m._data,p=d._size[0],v=d._size[1],C=d._values,N=d._index,A=d._ptr,b=[],g=0;g<v;g++){var w=h[g][0]||0;if(s(w,0))b[g]=[0];else{for(var x=0,_=[],E=[],D=A[g],T=A[g+1],M=D;M<T;M++){var I=N[M];I===g?x=C[M]:I>g&&(_.push(C[M]),E.push(I))}if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var P=n(w,x),B=0,$=E.length;B<$;B++){var R=E[B];h[R]=[i(h[R][0]||0,a(P,_[B]))]}b[g]=[P]}}return new u({data:b,size:[p,1]})}}),G_="usolve",Wq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Qq=q(G_,Wq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=sf({DenseMatrix:u});return e(G_,{"SparseMatrix, Array | Matrix":function(m,h){return c(m,h)},"DenseMatrix, Array | Matrix":function(m,h){return o(m,h)},"Array, Array | Matrix":function(m,h){var p=r(m),v=o(p,h);return v.valueOf()}});function o(d,m){m=l(d,m,!0);for(var h=m._data,p=d._size[0],v=d._size[1],C=[],N=d._data,A=v-1;A>=0;A--){var b=h[A][0]||0,g=void 0;if(s(b,0))g=0;else{var w=N[A][A];if(s(w,0))throw new Error("Linear system cannot be solved since matrix is singular");g=n(b,w);for(var x=A-1;x>=0;x--)h[x]=[i(h[x][0]||0,a(g,N[x][A]))]}C[A]=[g]}return new u({data:C,size:[p,1]})}function c(d,m){m=l(d,m,!0);for(var h=m._data,p=d._size[0],v=d._size[1],C=d._values,N=d._index,A=d._ptr,b=[],g=v-1;g>=0;g--){var w=h[g][0]||0;if(s(w,0))b[g]=[0];else{for(var x=0,_=[],E=[],D=A[g],T=A[g+1],M=T-1;M>=D;M--){var I=N[M];I===g?x=C[M]:I<g&&(_.push(C[M]),E.push(I))}if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var P=n(w,x),B=0,$=E.length;B<$;B++){var R=E[B];h[R]=[i(h[R][0],a(P,_[B]))]}b[g]=[P]}}return new u({data:b,size:[p,1]})}}),W_="lsolveAll",Xq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Kq=q(W_,Xq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=sf({DenseMatrix:u});return e(W_,{"SparseMatrix, Array | Matrix":function(m,h){return c(m,h)},"DenseMatrix, Array | Matrix":function(m,h){return o(m,h)},"Array, Array | Matrix":function(m,h){var p=r(m),v=o(p,h);return v.map(C=>C.valueOf())}});function o(d,m){for(var h=[l(d,m,!0)._data.map(E=>E[0])],p=d._data,v=d._size[0],C=d._size[1],N=0;N<C;N++)for(var A=h.length,b=0;b<A;b++){var g=h[b];if(s(p[N][N],0))if(s(g[N],0)){if(b===0){var x=[...g];x[N]=1;for(var _=N+1;_<C;_++)x[_]=i(x[_],p[_][N]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,A-=1}else{g[N]=n(g[N],p[N][N]);for(var w=N+1;w<C;w++)g[w]=i(g[w],a(g[N],p[w][N]))}}return h.map(E=>new u({data:E.map(D=>[D]),size:[v,1]}))}function c(d,m){for(var h=[l(d,m,!0)._data.map(ie=>ie[0])],p=d._size[0],v=d._size[1],C=d._values,N=d._index,A=d._ptr,b=0;b<v;b++)for(var g=h.length,w=0;w<g;w++){for(var x=h[w],_=[],E=[],D=A[b],T=A[b+1],M=0,I=D;I<T;I++){var P=N[I];P===b?M=C[I]:P>b&&(_.push(C[I]),E.push(P))}if(s(M,0))if(s(x[b],0)){if(w===0){var G=[...x];G[b]=1;for(var L=0,H=E.length;L<H;L++){var Z=E[L];G[Z]=i(G[Z],_[L])}h.push(G)}}else{if(w===0)return[];h.splice(w,1),w-=1,g-=1}else{x[b]=n(x[b],M);for(var B=0,$=E.length;B<$;B++){var R=E[B];x[R]=i(x[R],a(x[b],_[B]))}}}return h.map(ie=>new u({data:ie.map(k=>[k]),size:[p,1]}))}}),Q_="usolveAll",Jq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Yq=q(Q_,Jq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=sf({DenseMatrix:u});return e(Q_,{"SparseMatrix, Array | Matrix":function(m,h){return c(m,h)},"DenseMatrix, Array | Matrix":function(m,h){return o(m,h)},"Array, Array | Matrix":function(m,h){var p=r(m),v=o(p,h);return v.map(C=>C.valueOf())}});function o(d,m){for(var h=[l(d,m,!0)._data.map(E=>E[0])],p=d._data,v=d._size[0],C=d._size[1],N=C-1;N>=0;N--)for(var A=h.length,b=0;b<A;b++){var g=h[b];if(s(p[N][N],0))if(s(g[N],0)){if(b===0){var x=[...g];x[N]=1;for(var _=N-1;_>=0;_--)x[_]=i(x[_],p[_][N]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,A-=1}else{g[N]=n(g[N],p[N][N]);for(var w=N-1;w>=0;w--)g[w]=i(g[w],a(g[N],p[w][N]))}}return h.map(E=>new u({data:E.map(D=>[D]),size:[v,1]}))}function c(d,m){for(var h=[l(d,m,!0)._data.map(ie=>ie[0])],p=d._size[0],v=d._size[1],C=d._values,N=d._index,A=d._ptr,b=v-1;b>=0;b--)for(var g=h.length,w=0;w<g;w++){for(var x=h[w],_=[],E=[],D=A[b],T=A[b+1],M=0,I=T-1;I>=D;I--){var P=N[I];P===b?M=C[I]:P<b&&(_.push(C[I]),E.push(P))}if(s(M,0))if(s(x[b],0)){if(w===0){var G=[...x];G[b]=1;for(var L=0,H=E.length;L<H;L++){var Z=E[L];G[Z]=i(G[Z],_[L])}h.push(G)}}else{if(w===0)return[];h.splice(w,1),w-=1,g-=1}else{x[b]=n(x[b],M);for(var B=0,$=E.length;B<$;B++){var R=E[B];x[R]=i(x[R],a(x[b],_[B]))}}}return h.map(ie=>new u({data:ie.map(k=>[k]),size:[p,1]}))}}),Zq="matAlgo08xS0Sid",eH=["typed","equalScalar"],zy=q(Zq,eH,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,d=a._datatype||a._data===void 0?a._datatype:a.getDataType(),m=i._values,h=i._index,p=i._ptr,v=i._size,C=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new ht(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!u||!m)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var N=c[0],A=c[1],b,g=r,w=0,x=s;typeof d=="string"&&d===C&&d!=="mixed"&&(b=d,g=e.find(r,[b,b]),w=e.convert(0,b),x=e.find(s,[b,b]));for(var _=[],E=[],D=[],T=[],M=[],I,P,B,$,R=0;R<A;R++){D[R]=E.length;var G=R+1;for(P=o[R],B=o[R+1],I=P;I<B;I++)$=l[I],M[$]=G,T[$]=u[I],E.push($);for(P=p[R],B=p[R+1],I=P;I<B;I++)$=h[I],M[$]===G&&(T[$]=x(T[$],m[I]));for(I=D[R];I<E.length;){$=E[I];var L=T[$];g(L,w)?E.splice(I,1):(_.push(L),I++)}}return D[A]=E.length,a.createSparseMatrix({values:_,index:E,ptr:D,size:[N,A],datatype:d===a._datatype&&C===i._datatype?b:void 0})}}),Vy=q("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return{"Array, number":e.referTo("DenseMatrix, number",n=>(a,i)=>n(r(a),i).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(a,i)=>n(r(a),i).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(a,i)=>n(a,r(i)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(a,i)=>n(a,r(i)).valueOf())}}),X_="leftShift",tH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],rH=q(X_,tH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,u=Ts({typed:e}),l=Ra({typed:e,equalScalar:n}),o=zy({typed:e,equalScalar:n}),c=Eo({typed:e,DenseMatrix:i}),d=un({typed:e,equalScalar:n}),m=ga({typed:e}),h=er({typed:e,matrix:r,concat:s}),p=Vy({typed:e,matrix:r});return e(X_,{"number, number":MM,"BigNumber, BigNumber":wV,"bigint, bigint":(v,C)=>v<<C,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(C,N)=>n(N,0)?C.clone():d(C,N,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(C,N)=>n(N,0)?C.clone():m(C,N,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(C,N)=>n(C,0)?a(N.size(),N.storage()):c(N,C,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(C,N)=>n(C,0)?a(N.size(),N.storage()):m(N,C,v,!0))},p,h({SS:o,DS:u,SD:l}))}),K_="rightArithShift",nH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],aH=q(K_,nH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,u=Ts({typed:e}),l=Ra({typed:e,equalScalar:n}),o=zy({typed:e,equalScalar:n}),c=Eo({typed:e,DenseMatrix:i}),d=un({typed:e,equalScalar:n}),m=ga({typed:e}),h=er({typed:e,matrix:r,concat:s}),p=Vy({typed:e,matrix:r});return e(K_,{"number, number":IM,"BigNumber, BigNumber":NV,"bigint, bigint":(v,C)=>v>>C,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(C,N)=>n(N,0)?C.clone():d(C,N,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(C,N)=>n(N,0)?C.clone():m(C,N,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(C,N)=>n(C,0)?a(N.size(),N.storage()):c(N,C,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(C,N)=>n(C,0)?a(N.size(),N.storage()):m(N,C,v,!0))},p,h({SS:o,DS:u,SD:l}))}),J_="rightLogShift",iH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],sH=q(J_,iH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,u=Ts({typed:e}),l=Ra({typed:e,equalScalar:n}),o=zy({typed:e,equalScalar:n}),c=Eo({typed:e,DenseMatrix:i}),d=un({typed:e,equalScalar:n}),m=ga({typed:e}),h=er({typed:e,matrix:r,concat:s}),p=Vy({typed:e,matrix:r});return e(J_,{"number, number":PM,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(C,N)=>n(N,0)?C.clone():d(C,N,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(C,N)=>n(N,0)?C.clone():m(C,N,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(C,N)=>n(C,0)?a(N.size(),N.storage()):c(N,C,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(C,N)=>n(C,0)?a(N.size(),N.storage()):m(N,C,v,!0))},p,h({SS:o,DS:u,SD:l}))}),Y_="and",oH=["typed","matrix","equalScalar","zeros","not","concat"],N4=q(Y_,oH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,u=Ra({typed:e,equalScalar:n}),l=Lh({typed:e,equalScalar:n}),o=un({typed:e,equalScalar:n}),c=ga({typed:e}),d=er({typed:e,matrix:r,concat:s});return e(Y_,{"number, number":Fg,"Complex, Complex":function(h,p){return(h.re!==0||h.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(h,p){return!h.isZero()&&!p.isZero()&&!h.isNaN()&&!p.isNaN()},"bigint, bigint":Fg,"Unit, Unit":e.referToSelf(m=>(h,p)=>m(h.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(m=>(h,p)=>i(p)?a(h.size(),h.storage()):o(h,p,m,!1)),"DenseMatrix, any":e.referToSelf(m=>(h,p)=>i(p)?a(h.size(),h.storage()):c(h,p,m,!1)),"any, SparseMatrix":e.referToSelf(m=>(h,p)=>i(h)?a(h.size(),h.storage()):o(p,h,m,!0)),"any, DenseMatrix":e.referToSelf(m=>(h,p)=>i(h)?a(h.size(),h.storage()):c(p,h,m,!0)),"Array, any":e.referToSelf(m=>(h,p)=>m(r(h),p).valueOf()),"any, Array":e.referToSelf(m=>(h,p)=>m(h,r(p)).valueOf())},d({SS:l,DS:u}))}),zm="compare",uH=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],lH=q(zm,uH,t=>{var{typed:e,config:r,equalScalar:n,matrix:a,BigNumber:i,Fraction:s,DenseMatrix:u,concat:l}=t,o=wn({typed:e}),c=$h({typed:e,equalScalar:n}),d=kr({typed:e,DenseMatrix:u}),m=er({typed:e,matrix:a,concat:l}),h=ol({typed:e});return e(zm,cH({typed:e,config:r}),{"boolean, boolean":function(v,C){return v===C?0:v>C?1:-1},"BigNumber, BigNumber":function(v,C){return va(v,C,r.relTol,r.absTol)?new i(0):new i(v.cmp(C))},"bigint, bigint":function(v,C){return v===C?0n:v>C?1n:-1n},"Fraction, Fraction":function(v,C){return new s(v.compare(C))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,m({SS:c,DS:o,Ss:d}))}),cH=q(zm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(zm,{"number, number":function(a,i){return Jr(a,i,r.relTol,r.absTol)?0:a>i?1:-1}})}),fH=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,u=/^0/,l=function(b){return t.insensitive&&(""+b).toLowerCase()||""+b},o=l(e).replace(a,"")||"",c=l(r).replace(a,"")||"",d=o.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(o.match(s),16)||d.length!==1&&o.match(i)&&Date.parse(o),p=parseInt(c.match(s),16)||h&&c.match(i)&&Date.parse(c)||null,v,C;if(p){if(h<p)return-1;if(h>p)return 1}for(var N=0,A=Math.max(d.length,m.length);N<A;N++){if(v=!(d[N]||"").match(u)&&parseFloat(d[N])||d[N]||0,C=!(m[N]||"").match(u)&&parseFloat(m[N])||m[N]||0,isNaN(v)!==isNaN(C))return isNaN(v)?1:-1;if(typeof v!=typeof C&&(v+="",C+=""),v<C)return-1;if(v>C)return 1}return 0};const Go=Km(fH);var Z_="compareNatural",dH=["typed","compare"],mH=q(Z_,dH,t=>{var{typed:e,compare:r}=t,n=r.signatures["boolean,boolean"];return e(Z_,{"any, any":a});function a(l,o){var c=Kt(l),d=Kt(o),m;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(d==="number"||d==="BigNumber"||d==="Fraction"))return m=r(l,o),m.toString()!=="0"?m>0?1:-1:Go(c,d);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(d))return m=i(a,l,o),m!==0?m:Go(c,d);if(c!==d)return Go(c,d);if(c==="Complex")return hH(l,o);if(c==="Unit")return l.equalBase(o)?a(l.value,o.value):s(a,l.formatUnits(),o.formatUnits());if(c==="boolean")return n(l,o);if(c==="string")return Go(l,o);if(c==="Object")return u(a,l,o);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function i(l,o,c){return Ys(o)&&Ys(c)?s(l,o.toJSON().values,c.toJSON().values):Ys(o)?i(l,o.toArray(),c):Ys(c)?i(l,o,c.toArray()):Sm(o)?i(l,o.toJSON().data,c):Sm(c)?i(l,o,c.toJSON().data):Array.isArray(o)?Array.isArray(c)?s(l,o,c):i(l,o,[c]):i(l,[o],c)}function s(l,o,c){for(var d=0,m=Math.min(o.length,c.length);d<m;d++){var h=l(o[d],c[d]);if(h!==0)return h}return o.length>c.length?1:o.length<c.length?-1:0}function u(l,o,c){var d=Object.keys(o),m=Object.keys(c);d.sort(Go),m.sort(Go);var h=s(l,d,m);if(h!==0)return h;for(var p=0;p<d.length;p++){var v=l(o[d[p]],c[m[p]]);if(v!==0)return v}return 0}});function hH(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var eE="compareText",pH=["typed","matrix","concat"];Ag.signature="any, any";var vH=q(eE,pH,t=>{var{typed:e,matrix:r,concat:n}=t,a=er({typed:e,matrix:r,concat:n});return e(eE,Ag,a({elop:Ag,Ds:!0}))}),Vm="equal",gH=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],yH=q(Vm,gH,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,u=wn({typed:e}),l=ri({typed:e,SparseMatrix:s}),o=kr({typed:e,DenseMatrix:a}),c=er({typed:e,matrix:r,concat:i});return e(Vm,xH({typed:e,equalScalar:n}),c({elop:n,SS:l,DS:u,Ss:o}))}),xH=q(Vm,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(Vm,{"any, any":function(a,i){return a===null?i===null:i===null?a===null:a===void 0?i===void 0:i===void 0?a===void 0:r(a,i)}})}),tE="equalText",bH=["typed","compareText","isZero"],wH=q(tE,bH,t=>{var{typed:e,compareText:r,isZero:n}=t;return e(tE,{"any, any":function(i,s){return n(r(i,s))}})}),Um="smaller",NH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],_H=q(Um,NH,t=>{var{typed:e,config:r,bignumber:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=wn({typed:e}),o=ri({typed:e,SparseMatrix:u}),c=kr({typed:e,DenseMatrix:i}),d=er({typed:e,matrix:a,concat:s}),m=ol({typed:e});function h(p,v){return p.lt(v)&&!va(p,v,r.relTol,r.absTol)}return e(Um,EH({typed:e,config:r}),{"boolean, boolean":(p,v)=>p<v,"BigNumber, BigNumber":h,"bigint, bigint":(p,v)=>p<v,"Fraction, Fraction":(p,v)=>p.compare(v)===-1,"Fraction, BigNumber":function(v,C){return h(n(v),C)},"BigNumber, Fraction":function(v,C){return h(v,n(C))},"Complex, Complex":function(v,C){throw new TypeError("No ordering relation is defined for complex numbers")}},m,d({SS:o,DS:l,Ss:c}))}),EH=q(Um,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Um,{"number, number":function(a,i){return a<i&&!Jr(a,i,r.relTol,r.absTol)}})}),qm="smallerEq",SH=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],AH=q(qm,SH,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,u=wn({typed:e}),l=ri({typed:e,SparseMatrix:s}),o=kr({typed:e,DenseMatrix:a}),c=er({typed:e,matrix:n,concat:i}),d=ol({typed:e});return e(qm,DH({typed:e,config:r}),{"boolean, boolean":(m,h)=>m<=h,"BigNumber, BigNumber":function(h,p){return h.lte(p)||va(h,p,r.relTol,r.absTol)},"bigint, bigint":(m,h)=>m<=h,"Fraction, Fraction":(m,h)=>m.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,c({SS:l,DS:u,Ss:o}))}),DH=q(qm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(qm,{"number, number":function(a,i){return a<=i||Jr(a,i,r.relTol,r.absTol)}})}),Hm="larger",CH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],TH=q(Hm,CH,t=>{var{typed:e,config:r,bignumber:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=wn({typed:e}),o=ri({typed:e,SparseMatrix:u}),c=kr({typed:e,DenseMatrix:i}),d=er({typed:e,matrix:a,concat:s}),m=ol({typed:e});function h(p,v){return p.gt(v)&&!va(p,v,r.relTol,r.absTol)}return e(Hm,MH({typed:e,config:r}),{"boolean, boolean":(p,v)=>p>v,"BigNumber, BigNumber":h,"bigint, bigint":(p,v)=>p>v,"Fraction, Fraction":(p,v)=>p.compare(v)===1,"Fraction, BigNumber":function(v,C){return h(n(v),C)},"BigNumber, Fraction":function(v,C){return h(v,n(C))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},m,d({SS:o,DS:l,Ss:c}))}),MH=q(Hm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Hm,{"number, number":function(a,i){return a>i&&!Jr(a,i,r.relTol,r.absTol)}})}),Gm="largerEq",IH=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],PH=q(Gm,IH,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,u=wn({typed:e}),l=ri({typed:e,SparseMatrix:s}),o=kr({typed:e,DenseMatrix:a}),c=er({typed:e,matrix:n,concat:i}),d=ol({typed:e});return e(Gm,FH({typed:e,config:r}),{"boolean, boolean":(m,h)=>m>=h,"BigNumber, BigNumber":function(h,p){return h.gte(p)||va(h,p,r.relTol,r.absTol)},"bigint, bigint":function(h,p){return h>=p},"Fraction, Fraction":(m,h)=>m.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,c({SS:l,DS:u,Ss:o}))}),FH=q(Gm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Gm,{"number, number":function(a,i){return a>=i||Jr(a,i,r.relTol,r.absTol)}})}),rE="deepEqual",RH=["typed","equal"],OH=q(rE,RH,t=>{var{typed:e,equal:r}=t;return e(rE,{"any, any":function(i,s){return n(i.valueOf(),s.valueOf())}});function n(a,i){if(Array.isArray(a))if(Array.isArray(i)){var s=a.length;if(s!==i.length)return!1;for(var u=0;u<s;u++)if(!n(a[u],i[u]))return!1;return!0}else return!1;else return Array.isArray(i)?!1:r(a,i)}}),Wm="unequal",BH=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],jH=q(Wm,BH,t=>{var{typed:e,config:r,equalScalar:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=wn({typed:e}),o=ri({typed:e,SparseMatrix:u}),c=kr({typed:e,DenseMatrix:i}),d=er({typed:e,matrix:a,concat:s});return e(Wm,kH({typed:e,equalScalar:n}),d({elop:m,SS:o,DS:l,Ss:c}));function m(h,p){return!n(h,p)}}),kH=q(Wm,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(Wm,{"any, any":function(a,i){return a===null?i!==null:i===null?a!==null:a===void 0?i!==void 0:i===void 0?a!==void 0:!r(a,i)}})}),nE="partitionSelect",$H=["typed","isNumeric","isNaN","compare"],LH=q(nE,$H,t=>{var{typed:e,isNumeric:r,isNaN:n,compare:a}=t,i=a,s=(o,c)=>-a(o,c);return e(nE,{"Array | Matrix, number":function(c,d){return u(c,d,i)},"Array | Matrix, number, string":function(c,d,m){if(m==="asc")return u(c,d,i);if(m==="desc")return u(c,d,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":u});function u(o,c,d){if(!Qe(c)||c<0)throw new Error("k must be a non-negative integer");if(Ze(o)){var m=o.size();if(m.length>1)throw new Error("Only one dimensional matrices supported");return l(o.valueOf(),c,d)}if(Array.isArray(o))return l(o,c,d)}function l(o,c,d){if(c>=o.length)throw new Error("k out of bounds");for(var m=0;m<o.length;m++)if(r(o[m])&&n(o[m]))return o[m];for(var h=0,p=o.length-1;h<p;){for(var v=h,C=p,N=o[Math.floor(Math.random()*(p-h+1))+h];v<C;)if(d(o[v],N)>=0){var A=o[C];o[C]=o[v],o[v]=A,--C}else++v;d(o[v],N)>0&&--v,c<=v?p=v:h=v+1}return o[c]}}),aE="sort",zH=["typed","matrix","compare","compareNatural"],VH=q(aE,zH,t=>{var{typed:e,matrix:r,compare:n,compareNatural:a}=t,i=n,s=(c,d)=>-n(c,d);return e(aE,{Array:function(d){return l(d),d.sort(i)},Matrix:function(d){return o(d),r(d.toArray().sort(i),d.storage())},"Array, function":function(d,m){return l(d),d.sort(m)},"Matrix, function":function(d,m){return o(d),r(d.toArray().sort(m),d.storage())},"Array, string":function(d,m){return l(d),d.sort(u(m))},"Matrix, string":function(d,m){return o(d),r(d.toArray().sort(u(m)),d.storage())}});function u(c){if(c==="asc")return i;if(c==="desc")return s;if(c==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(it(c).length!==1)throw new Error("One dimensional array expected")}function o(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),iE="max",UH=["typed","config","numeric","larger","isNaN"],_4=q(iE,UH,t=>{var{typed:e,config:r,numeric:n,larger:a,isNaN:i}=t;return e(iE,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(o,c){return kh(o,c.valueOf(),s)},"...":function(o){if(al(o))throw new TypeError("Scalar values expected in function max");return u(o)}});function s(l,o){try{return a(l,o)?l:o}catch(c){throw Cn(c,"max",o)}}function u(l){var o;if(_s(l,function(c){try{(i(c)||o===void 0||a(c,o))&&(o=c)}catch(d){throw Cn(d,"max",c)}}),o===void 0)throw new Error("Cannot calculate max of an empty array");return typeof o=="string"&&(o=n(o,Ds(o,r))),o}}),sE="min",qH=["typed","config","numeric","smaller","isNaN"],E4=q(sE,qH,t=>{var{typed:e,config:r,numeric:n,smaller:a,isNaN:i}=t;return e(sE,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(o,c){return kh(o,c.valueOf(),s)},"...":function(o){if(al(o))throw new TypeError("Scalar values expected in function min");return u(o)}});function s(l,o){try{return a(l,o)?l:o}catch(c){throw Cn(c,"min",o)}}function u(l){var o;if(_s(l,function(c){try{(i(c)||o===void 0||a(c,o))&&(o=c)}catch(d){throw Cn(d,"min",c)}}),o===void 0)throw new Error("Cannot calculate min of an empty array");return typeof o=="string"&&(o=n(o,Ds(o,r))),o}}),HH="ImmutableDenseMatrix",GH=["smaller","DenseMatrix"],WH=q(HH,GH,t=>{var{smaller:e,DenseMatrix:r}=t;function n(a,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(i&&!xr(i))throw new Error("Invalid datatype: "+i);if(Ze(a)||Qt(a)){var s=new r(a,i);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(a&&Qt(a.data)&&Qt(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+Kt(a)+")");this._data=[],this._size=[0],this._datatype=i,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(a){switch(arguments.length){case 1:{var i=r.prototype.subset.call(this,a);return Ze(i)?new n({data:i._data,size:i._size,datatype:i._datatype}):i}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:at(this._data),size:at(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(a){return new n(a)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(i){(a===null||e(i,a))&&(a=i)}),this._min=a!==null?a:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(i){(a===null||e(a,i))&&(a=i)}),this._max=a!==null?a:void 0}return this._max},n},{isClass:!0}),QH="Index",XH=["ImmutableDenseMatrix","getMatrixDataType"],KH=q(QH,XH,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var i=0,s=arguments.length;i<s;i++){var u=i<0||arguments.length<=i?void 0:arguments[i],l=Qt(u),o=Ze(u),c=typeof u,d=null;if(My(u))this._dimensions.push(u),this._isScalar=!1;else if(l||o){var m=void 0;this._isScalar=!1,r(u)==="boolean"?(l&&(m=a(oE(u).valueOf())),o&&(m=a(oE(u._data).valueOf())),d=u.valueOf().length):m=a(u.valueOf()),this._dimensions.push(m)}else if(c==="number")this._dimensions.push(u);else if(c==="bigint")this._dimensions.push(Number(u));else if(c==="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(d)}}n.prototype.type="Index",n.prototype.isIndex=!0;function a(i){for(var s=0,u=i.length;s<u;s++)if(!Ke(i[s])||!Qe(i[s]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=i,l._size=[i.length],l}return n.prototype.clone=function(){var i=new n;return i._dimensions=at(this._dimensions),i._isScalar=this._isScalar,i._sourceSize=this._sourceSize,i},n.create=function(i){var s=new n;return n.apply(s,i),s},n.prototype.size=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i[s]=xr(l)||Ke(l)?1:l.size()[0]}return i},n.prototype.max=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i[s]=xr(l)||Ke(l)?l:l.max()}return i},n.prototype.min=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i[s]=xr(l)||Ke(l)?l:l.min()}return i},n.prototype.forEach=function(i){for(var s=0,u=this._dimensions.length;s<u;s++)i(this._dimensions[s],s,this)},n.prototype.dimension=function(i){var s;return Ke(i)&&(s=this._dimensions[i])!==null&&s!==void 0?s:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&xr(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i.push(xr(l)||Ke(l)?l:l.toArray())}return i},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];xr(l)?i.push(JSON.stringify(l)):i.push(l.toString())}return"["+i.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(i){return n.create(i.dimensions)},n},{isClass:!0});function oE(t){var e=[];return t.forEach((r,n)=>{r&&e.push(n)}),e}var JH="FibonacciHeap",YH=["smaller","larger"],ZH=q(JH,YH,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(c,d){var m={key:c,value:d,degree:0};if(this._minimum){var h=this._minimum;m.left=h,m.right=h.right,h.right=m,m.right.left=m,e(c,h.key)&&(this._minimum=m)}else m.left=m,m.right=m,this._minimum=m;return this._size++,m},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var d=this._minimum,m=c.degree,h=c.child;m>0;){var p=h.right;h.left.right=h.right,h.right.left=h.left,h.left=d,h.right=d.right,d.right=h,h.right.left=h,h.parent=null,h=p,m--}return c.left.right=c.right,c.right.left=c.left,c===c.right?d=null:(d=c.right,d=o(d,this._size)),this._size--,this._minimum=d,c},a.prototype.remove=function(c){this._minimum=i(this._minimum,c,-1),this.extractMinimum()};function i(c,d,m){d.key=m;var h=d.parent;return h&&e(d.key,h.key)&&(s(c,d,h),u(c,h)),e(d.key,c.key)&&(c=d),c}function s(c,d,m){d.left.right=d.right,d.right.left=d.left,m.degree--,m.child===d&&(m.child=d.right),m.degree===0&&(m.child=null),d.left=c,d.right=c.right,c.right=d,d.right.left=d,d.parent=null,d.mark=!1}function u(c,d){var m=d.parent;m&&(d.mark?(s(c,d,m),u(m)):d.mark=!0)}var l=function(d,m){d.left.right=d.right,d.right.left=d.left,d.parent=m,m.child?(d.left=m.child,d.right=m.child.right,m.child.right=d,d.right.left=d):(m.child=d,d.right=d,d.left=d),m.degree++,d.mark=!1};function o(c,d){var m=Math.floor(Math.log(d)*n)+1,h=new Array(m),p=0,v=c;if(v)for(p++,v=v.right;v!==c;)p++,v=v.right;for(var C;p>0;){for(var N=v.degree,A=v.right;C=h[N],!!C;){if(r(v.key,C.key)){var b=C;C=v,v=b}l(C,v),h[N]=null,N++}h[N]=v,v=A,p--}c=null;for(var g=0;g<m;g++)C=h[g],C&&(c?(C.left.right=C.right,C.right.left=C.left,C.left=c,C.right=c.right,c.right=C,C.right.left=C,e(C.key,c.key)&&(c=C)):c=C);return c}return a},{isClass:!0}),eG="Spa",tG=["addScalar","equalScalar","FibonacciHeap"],rG=q(eG,tG,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(i,s){if(this._values[i])this._values[i].value=s;else{var u=this._heap.insert(i,s);this._values[i]=u}},a.prototype.get=function(i){var s=this._values[i];return s?s.value:0},a.prototype.accumulate=function(i,s){var u=this._values[i];u?u.value=e(u.value,s):(u=this._heap.insert(i,s),this._values[i]=u)},a.prototype.forEach=function(i,s,u){var l=this._heap,o=this._values,c=[],d=l.extractMinimum();for(d&&c.push(d);d&&d.key<=s;)d.key>=i&&(r(d.value,0)||u(d.key,d.value,this)),d=l.extractMinimum(),d&&c.push(d);for(var m=0;m<c.length;m++){var h=c[m];d=l.insert(h.key,h.value),o[d.key]=d}},a.prototype.swap=function(i,s){var u=this._values[i],l=this._values[s];if(!u&&l)u=this._heap.insert(i,l.value),this._heap.remove(l),this._values[i]=u,this._values[s]=void 0;else if(u&&!l)l=this._heap.insert(s,u.value),this._heap.remove(u),this._values[s]=l,this._values[i]=void 0;else if(u&&l){var o=u.value;u.value=l.value,l.value=o}},a},{isClass:!0});function nG(t){var e=0,r=1,n=Object.create(null),a=Object.create(null),i=0,s=function(l){var o=a[l];if(o&&(delete n[o],delete a[l],--e,r===o)){if(!e){i=0,r=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(l){var o=a[l],c=++i;if(n[c]=l,a[l]=c,!o)return++e,e<=t?void 0:(l=n[r],s(l),l);if(delete n[o],r===o)for(;!Object.prototype.hasOwnProperty.call(n,++r););},delete:s,clear:function(){e=i=0,r=1,n=Object.create(null),a=Object.create(null)}}}function of(t){var{hasher:e,limit:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=r??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:nG(r||Number.POSITIVE_INFINITY)});for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var s=e(a);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var u=t.apply(t,a);return n.cache.values.set(s,u),n.cache.values.delete(n.cache.lru.hit(s)),u}}var aG=of(function(t){return new t(1).exp()},{hasher:zh}),iG=of(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:zh}),Uy=of(function(t){return t.acos(-1)},{hasher:zh}),sG=of(function(t){return Uy(t).times(2)},{hasher:zh});function zh(t){return t[0].precision}function uE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ev(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uE(Object(r),!0).forEach(function(n){Ir(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var oG="Unit",uG=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","toBest","number","Complex","BigNumber","Fraction"],lG=q(oG,uG,t=>{var{on:e,config:r,addScalar:n,subtractScalar:a,multiplyScalar:i,divideScalar:s,pow:u,abs:l,fix:o,round:c,equal:d,isNumeric:m,format:h,toBest:p,number:v,Complex:C,BigNumber:N,Fraction:A}=t,b=v;function g(W,re){if(!(this instanceof g))throw new Error("Constructor must be called with the new operator");if(!(W==null||m(W)||pi(W)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,re===void 0)this.units=[],this.dimensions=Y.map(z=>0);else if(typeof re=="string"){var fe=g.parse(re);this.units=fe.units,this.dimensions=fe.dimensions}else if(Wn(re)&&re.value===null)this.fixPrefix=re.fixPrefix,this.skipAutomaticSimplification=re.skipAutomaticSimplification,this.dimensions=re.dimensions.slice(0),this.units=re.units.map(z=>_r({},z));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(W)}Object.defineProperty(g,"name",{value:"Unit"}),g.prototype.constructor=g,g.prototype.type="Unit",g.prototype.isUnit=!0;var w,x,_;function E(){for(;_===" "||_==="	";)M()}function D(W){return W>="0"&&W<="9"||W==="."}function T(W){return W>="0"&&W<="9"}function M(){x++,_=w.charAt(x)}function I(W){x=W,_=w.charAt(x)}function P(){var W="",re=x;if(_==="+"?M():_==="-"&&(W+=_,M()),!D(_))return I(re),null;if(_==="."){if(W+=_,M(),!T(_))return I(re),null}else{for(;T(_);)W+=_,M();_==="."&&(W+=_,M())}for(;T(_);)W+=_,M();if(_==="E"||_==="e"){var fe="",z=x;if(fe+=_,M(),(_==="+"||_==="-")&&(fe+=_,M()),!T(_))return I(z),W;for(W=W+fe;T(_);)W+=_,M()}return W}function B(){for(var W="";T(_)||g.isValidAlpha(_);)W+=_,M();var re=W.charAt(0);return g.isValidAlpha(re)?W:null}function $(W){return _===W?(M(),W):null}g.parse=function(W,re){if(re=re||{},w=W,x=-1,_="",typeof w!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var fe=new g;fe.units=[];var z=1,J=!1;M(),E();var ne=P(),oe=null;if(ne){if(r.number==="BigNumber")oe=new N(ne);else if(r.number==="Fraction")try{oe=new A(ne)}catch{oe=parseFloat(ne)}else oe=parseFloat(ne);E(),$("*")?(z=1,J=!0):$("/")&&(z=-1,J=!0)}for(var ce=[],ge=1;;){for(E();_==="(";)ce.push(z),ge*=z,z=1,M(),E();var Ee=void 0;if(_){var Ae=_;if(Ee=B(),Ee===null)throw new SyntaxError('Unexpected "'+Ae+'" in "'+w+'" at index '+x.toString())}else break;var Ie=R(Ee);if(Ie===null)throw new SyntaxError('Unit "'+Ee+'" not found.');var De=z*ge;if(E(),$("^")){E();var pt=P();if(pt===null)throw new SyntaxError('In "'+W+'", "^" must be followed by a floating-point number');De*=pt}fe.units.push({unit:Ie.unit,prefix:Ie.prefix,power:De});for(var yt=0;yt<Y.length;yt++)fe.dimensions[yt]+=(Ie.unit.dimensions[yt]||0)*De;for(E();_===")";){if(ce.length===0)throw new SyntaxError('Unmatched ")" in "'+w+'" at index '+x.toString());ge/=ce.pop(),M(),E()}if(J=!1,$("*")?(z=1,J=!0):$("/")?(z=-1,J=!0):z=1,Ie.unit.base){var qt=Ie.unit.base.key;se.auto[qt]={unit:Ie.unit,prefix:Ie.prefix}}}if(E(),_)throw new SyntaxError('Could not parse: "'+W+'"');if(J)throw new SyntaxError('Trailing characters: "'+W+'"');if(ce.length!==0)throw new SyntaxError('Unmatched "(" in "'+w+'"');if(fe.units.length===0&&!re.allowNoUnits)throw new SyntaxError('"'+W+'" contains no units');return fe.value=oe!==void 0?fe._normalize(oe):null,fe},g.prototype.clone=function(){var W=new g;W.fixPrefix=this.fixPrefix,W.skipAutomaticSimplification=this.skipAutomaticSimplification,W.value=at(this.value),W.dimensions=this.dimensions.slice(0),W.units=[];for(var re=0;re<this.units.length;re++){W.units[re]={};for(var fe in this.units[re])Ge(this.units[re],fe)&&(W.units[re][fe]=this.units[re][fe])}return W},g.prototype.valueType=function(){return Kt(this.value)},g.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},g.prototype._normalize=function(W){if(W==null||this.units.length===0)return W;for(var re=W,fe=g._getNumberConverter(Kt(W)),z=0;z<this.units.length;z++){var J=fe(this.units[z].unit.value),ne=fe(this.units[z].prefix.value),oe=fe(this.units[z].power);re=i(re,u(i(J,ne),oe))}return re},g.prototype._denormalize=function(W,re){if(W==null||this.units.length===0)return W;for(var fe=W,z=g._getNumberConverter(Kt(W)),J=0;J<this.units.length;J++){var ne=z(this.units[J].unit.value),oe=z(this.units[J].prefix.value),ce=z(this.units[J].power);fe=s(fe,u(i(ne,oe),ce))}return fe};var R=of(W=>{if(Ge(Q,W)){var re=Q[W],fe=re.prefixes[""];return{unit:re,prefix:fe}}for(var z in Q)if(Ge(Q,z)&&h$(W,z)){var J=Q[z],ne=W.length-z.length,oe=W.substring(0,ne),ce=Ge(J.prefixes,oe)?J.prefixes[oe]:void 0;if(ce!==void 0)return{unit:J,prefix:ce}}return null},{hasher:W=>W[0],limit:100});g.isValuelessUnit=function(W){return R(W)!==null},g.prototype.hasBase=function(W){if(typeof W=="string"&&(W=V[W]),!W)return!1;for(var re=0;re<Y.length;re++)if(Math.abs((this.dimensions[re]||0)-(W.dimensions[re]||0))>1e-12)return!1;return!0},g.prototype.equalBase=function(W){for(var re=0;re<Y.length;re++)if(Math.abs((this.dimensions[re]||0)-(W.dimensions[re]||0))>1e-12)return!1;return!0},g.prototype.equals=function(W){return this.equalBase(W)&&d(this.value,W.value)},g.prototype.multiply=function(W){for(var re=this.clone(),fe=Wn(W)?W:new g(W),z=0;z<Y.length;z++)re.dimensions[z]=(this.dimensions[z]||0)+(fe.dimensions[z]||0);for(var J=0;J<fe.units.length;J++){var ne=ev({},fe.units[J]);re.units.push(ne)}if(this.value!==null||fe.value!==null){var oe=this.value===null?this._normalize(L(fe.value)):this.value,ce=fe.value===null?fe._normalize(L(this.value)):fe.value;re.value=i(oe,ce)}else re.value=null;return Wn(W)&&(re.skipAutomaticSimplification=!1),G(re)},g.prototype.divideInto=function(W){return new g(W).divide(this)},g.prototype.divide=function(W){for(var re=this.clone(),fe=Wn(W)?W:new g(W),z=0;z<Y.length;z++)re.dimensions[z]=(this.dimensions[z]||0)-(fe.dimensions[z]||0);for(var J=0;J<fe.units.length;J++){var ne=ev(ev({},fe.units[J]),{},{power:-fe.units[J].power});re.units.push(ne)}if(this.value!==null||fe.value!==null){var oe=this.value===null?this._normalize(L(fe.value)):this.value,ce=fe.value===null?fe._normalize(L(this.value)):fe.value;re.value=s(oe,ce)}else re.value=null;return Wn(W)&&(re.skipAutomaticSimplification=!1),G(re)},g.prototype.pow=function(W){for(var re=this.clone(),fe=0;fe<Y.length;fe++)re.dimensions[fe]=(this.dimensions[fe]||0)*W;for(var z=0;z<re.units.length;z++)re.units[z].power*=W;return re.value!==null?re.value=u(re.value,W):re.value=null,re.skipAutomaticSimplification=!1,G(re)};function G(W){return W.equalBase(V.NONE)&&W.value!==null&&!r.predictable?W.value:W}function L(W){var re=g._getNumberConverter(Kt(W));return re(1)}g.prototype.abs=function(){var W=this.clone();if(W.value!==null)if(W._isDerived()||W.units.length===0||W.units[0].unit.offset===0)W.value=l(W.value);else{var re=W._numberConverter(),fe=re(W.units[0].unit.value),z=re(W.units[0].unit.offset),J=i(fe,z);W.value=a(l(n(W.value,J)),J)}for(var ne in W.units)(W.units[ne].unit.name==="VA"||W.units[ne].unit.name==="VAR")&&(W.units[ne].unit=Q.W);return W},g.prototype.to=function(W){var re=this.value===null?this._normalize(1):this.value,fe;if(typeof W=="string")fe=g.parse(W);else if(Wn(W))fe=W.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(fe))throw new Error("Units do not match ('".concat(fe.toString(),"' != '").concat(this.toString(),"')"));if(fe.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||fe.units.length===0||this.units[0].unit.offset===fe.units[0].unit.offset)fe.value=at(re);else{var z=g._getNumberConverter(Kt(re)),J=this.units[0].unit.value,ne=this.units[0].unit.offset,oe=i(J,ne),ce=fe.units[0].unit.value,ge=fe.units[0].unit.offset,Ee=i(ce,ge);fe.value=n(re,z(a(oe,Ee)))}return fe.fixPrefix=!0,fe.skipAutomaticSimplification=!0,fe},g.prototype.toNumber=function(W){return b(this.toNumeric(W))},g.prototype.toNumeric=function(W){var re;return W?re=this.to(W):re=this.clone(),re._isDerived()||re.units.length===0?re._denormalize(re.value):re._denormalize(re.value,re.units[0].prefix.value)},g.prototype.toString=function(){return this.format()},g.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},g.fromJSON=function(W){var re,fe=new g(W.value,(re=W.unit)!==null&&re!==void 0?re:void 0);return fe.fixPrefix=W.fixPrefix||!1,fe},g.prototype.valueOf=g.prototype.toString,g.prototype.simplify=function(){var W=this.clone(),re=[],fe;for(var z in ue)if(Ge(ue,z)&&W.hasBase(V[z])){fe=z;break}if(fe==="NONE")W.units=[];else{var J;if(fe&&Ge(ue,fe)&&(J=ue[fe]),J)W.units=[{unit:J.unit,prefix:J.prefix,power:1}];else{for(var ne=!1,oe=0;oe<Y.length;oe++){var ce=Y[oe];Math.abs(W.dimensions[oe]||0)>1e-12&&(Ge(ue,ce)?re.push({unit:ue[ce].unit,prefix:ue[ce].prefix,power:W.dimensions[oe]||0}):ne=!0)}re.length<W.units.length&&!ne&&(W.units=re)}}return W},g.prototype.toSI=function(){for(var W=this.clone(),re=[],fe=0;fe<Y.length;fe++){var z=Y[fe];if(Math.abs(W.dimensions[fe]||0)>1e-12)if(Ge(se.si,z))re.push({unit:se.si[z].unit,prefix:se.si[z].prefix,power:W.dimensions[fe]||0});else throw new Error("Cannot express custom unit "+z+" in SI units")}return W.units=re,W.fixPrefix=!0,W.skipAutomaticSimplification=!0,this.value!==null?(W.value=null,this.to(W)):W},g.prototype.formatUnits=function(){for(var W="",re="",fe=0,z=0,J=0;J<this.units.length;J++)this.units[J].power>0?(fe++,W+=" "+this.units[J].prefix.name+this.units[J].unit.name,Math.abs(this.units[J].power-1)>1e-15&&(W+="^"+this.units[J].power)):this.units[J].power<0&&z++;if(z>0)for(var ne=0;ne<this.units.length;ne++)this.units[ne].power<0&&(fe>0?(re+=" "+this.units[ne].prefix.name+this.units[ne].unit.name,Math.abs(this.units[ne].power+1)>1e-15&&(re+="^"+-this.units[ne].power)):(re+=" "+this.units[ne].prefix.name+this.units[ne].unit.name,re+="^"+this.units[ne].power));W=W.substr(1),re=re.substr(1),fe>1&&z>0&&(W="("+W+")"),z>1&&fe>0&&(re="("+re+")");var oe=W;return fe>0&&z>0&&(oe+=" / "),oe+=re,oe},g.prototype.toBest=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(W&&!Array.isArray(W))throw new Error("Invalid unit type. Expected string or Unit.");var fe=this.units[0].unit.prefixes;if(W&&W.length>0){var z=W.map(oe=>{var ce=null;if(typeof oe=="string"){if(ce=g.parse(oe),!ce)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!Wn(oe))throw new Error("Invalid unit type. Expected compatible string or Unit.");ce===null&&(ce=oe.clone());try{return this.to(ce.formatUnits()),ce}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),J=z.map(oe=>oe.units[0].prefix);this.units[0].unit.prefixes=J.reduce((oe,ce)=>(oe[ce.name]=ce,oe),{}),this.units[0].prefix=J[0]}var ne=H(this,re).simp;return this.units[0].unit.prefixes=fe,ne.fixPrefix=!0,ne},g.prototype.format=function(W){var{simp:re,valueStr:fe,unitStr:z}=H(this,W),J=fe;return re.value&&pi(re.value)&&(J="("+J+")"),z.length>0&&J.length>0&&(J+=" "),J+=z,J};function H(W){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=W.skipAutomaticSimplification||W.value===null?W.clone():W.simplify();Z(fe),ie(fe,re.offset);var z=fe._denormalize(fe.value),J=fe.value!==null?h(z,re||{}):"",ne=fe.formatUnits();return{simp:fe,valueStr:J,unitStr:ne}}function Z(W){var re=!1;typeof W.value<"u"&&W.value!==null&&pi(W.value)&&(re=Math.abs(W.value.re)<1e-14);for(var fe in W.units)Ge(W.units,fe)&&W.units[fe].unit&&(W.units[fe].unit.name==="VA"&&re?W.units[fe].unit=Q.VAR:W.units[fe].unit.name==="VAR"&&!re&&(W.units[fe].unit=Q.VA))}function ie(W,re){W.units.length===1&&!W.fixPrefix&&Math.abs(W.units[0].power-Math.round(W.units[0].power))<1e-14&&(W.units[0].prefix=W._bestPrefix(re))}g.prototype._bestPrefix=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var re=this.value!==null?l(this.value):0,fe=l(this.units[0].unit.value),z=this.units[0].prefix;if(re===0)return z;var J=this.units[0].power,ne=Math.log(re/Math.pow(z.value*fe,J))/Math.LN10-W;if(ne>-2.200001&&ne<1.800001)return z;ne=Math.abs(ne);var oe=this.units[0].unit.prefixes;for(var ce in oe)if(Ge(oe,ce)){var ge=oe[ce];if(ge.scientific){var Ee=Math.abs(Math.log(re/Math.pow(ge.value*fe,J))/Math.LN10-W);(Ee<ne||Ee===ne&&ge.name.length<z.name.length)&&(z=ge,ne=Ee)}}return z},g.prototype.splitUnit=function(W){for(var re=this.clone(),fe=[],z=0;z<W.length&&(re=re.to(W[z]),z!==W.length-1);z++){var J=re.toNumeric(),ne=c(J),oe=void 0,ce=d(ne,J);ce?oe=ne:oe=o(re.toNumeric());var ge=new g(oe,W[z].toString());fe.push(ge),re=a(re,ge)}for(var Ee=0,Ae=0;Ae<fe.length;Ae++)Ee=n(Ee,fe[Ae].value);return d(Ee,this.value)&&(re.value=0),fe.push(re),fe};var k={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};k.SHORTLONG=_r({},k.SHORT,k.LONG),k.BINARY_SHORT=_r({},k.BINARY_SHORT_SI,k.BINARY_SHORT_IEC),k.BINARY_LONG=_r({},k.BINARY_LONG_SI,k.BINARY_LONG_IEC);var Y=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],V={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var xe in V)Ge(V,xe)&&(V[xe].key=xe);var le={},de={name:"",base:le,value:1,offset:0,dimensions:Y.map(W=>0)},Q={meter:{name:"meter",base:V.LENGTH,prefixes:k.LONG,value:1,offset:0},inch:{name:"inch",base:V.LENGTH,prefixes:k.NONE,value:.0254,offset:0},foot:{name:"foot",base:V.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yard:{name:"yard",base:V.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mile:{name:"mile",base:V.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},link:{name:"link",base:V.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rod:{name:"rod",base:V.LENGTH,prefixes:k.NONE,value:5.0292,offset:0},chain:{name:"chain",base:V.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:V.LENGTH,prefixes:k.NONE,value:1e-10,offset:0},m:{name:"m",base:V.LENGTH,prefixes:k.SHORT,value:1,offset:0},in:{name:"in",base:V.LENGTH,prefixes:k.NONE,value:.0254,offset:0},ft:{name:"ft",base:V.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yd:{name:"yd",base:V.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mi:{name:"mi",base:V.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},li:{name:"li",base:V.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rd:{name:"rd",base:V.LENGTH,prefixes:k.NONE,value:5.02921,offset:0},ch:{name:"ch",base:V.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},mil:{name:"mil",base:V.LENGTH,prefixes:k.NONE,value:254e-7,offset:0},m2:{name:"m2",base:V.SURFACE,prefixes:k.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:V.SURFACE,prefixes:k.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:V.SURFACE,prefixes:k.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:V.SURFACE,prefixes:k.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:V.SURFACE,prefixes:k.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:V.SURFACE,prefixes:k.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:V.SURFACE,prefixes:k.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:V.SURFACE,prefixes:k.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:V.SURFACE,prefixes:k.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:V.SURFACE,prefixes:k.NONE,value:1e4,offset:0},m3:{name:"m3",base:V.VOLUME,prefixes:k.CUBIC,value:1,offset:0},L:{name:"L",base:V.VOLUME,prefixes:k.SHORT,value:.001,offset:0},l:{name:"l",base:V.VOLUME,prefixes:k.SHORT,value:.001,offset:0},litre:{name:"litre",base:V.VOLUME,prefixes:k.LONG,value:.001,offset:0},cuin:{name:"cuin",base:V.VOLUME,prefixes:k.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:V.VOLUME,prefixes:k.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:V.VOLUME,prefixes:k.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:V.VOLUME,prefixes:k.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:V.VOLUME,prefixes:k.NONE,value:15e-6,offset:0},drop:{name:"drop",base:V.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:V.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},minim:{name:"minim",base:V.VOLUME,prefixes:k.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:V.VOLUME,prefixes:k.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:V.VOLUME,prefixes:k.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:V.VOLUME,prefixes:k.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:V.VOLUME,prefixes:k.NONE,value:1e-6,offset:0},cup:{name:"cup",base:V.VOLUME,prefixes:k.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:V.VOLUME,prefixes:k.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:V.VOLUME,prefixes:k.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:V.VOLUME,prefixes:k.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:V.VOLUME,prefixes:k.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:V.VOLUME,prefixes:k.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:V.VOLUME,prefixes:k.NONE,value:.238480942392,offset:0},g:{name:"g",base:V.MASS,prefixes:k.SHORT,value:.001,offset:0},gram:{name:"gram",base:V.MASS,prefixes:k.LONG,value:.001,offset:0},ton:{name:"ton",base:V.MASS,prefixes:k.SHORT,value:907.18474,offset:0},t:{name:"t",base:V.MASS,prefixes:k.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:V.MASS,prefixes:k.LONG,value:1e3,offset:0},grain:{name:"grain",base:V.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:V.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:V.MASS,prefixes:k.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:V.MASS,prefixes:k.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:V.MASS,prefixes:k.NONE,value:45.359237,offset:0},stick:{name:"stick",base:V.MASS,prefixes:k.NONE,value:.115,offset:0},stone:{name:"stone",base:V.MASS,prefixes:k.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:V.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:V.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:V.MASS,prefixes:k.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:V.MASS,prefixes:k.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:V.MASS,prefixes:k.NONE,value:45.359237,offset:0},s:{name:"s",base:V.TIME,prefixes:k.SHORT,value:1,offset:0},min:{name:"min",base:V.TIME,prefixes:k.NONE,value:60,offset:0},h:{name:"h",base:V.TIME,prefixes:k.NONE,value:3600,offset:0},second:{name:"second",base:V.TIME,prefixes:k.LONG,value:1,offset:0},sec:{name:"sec",base:V.TIME,prefixes:k.LONG,value:1,offset:0},minute:{name:"minute",base:V.TIME,prefixes:k.NONE,value:60,offset:0},hour:{name:"hour",base:V.TIME,prefixes:k.NONE,value:3600,offset:0},day:{name:"day",base:V.TIME,prefixes:k.NONE,value:86400,offset:0},week:{name:"week",base:V.TIME,prefixes:k.NONE,value:7*86400,offset:0},month:{name:"month",base:V.TIME,prefixes:k.NONE,value:2629800,offset:0},year:{name:"year",base:V.TIME,prefixes:k.NONE,value:31557600,offset:0},decade:{name:"decade",base:V.TIME,prefixes:k.NONE,value:315576e3,offset:0},century:{name:"century",base:V.TIME,prefixes:k.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:V.TIME,prefixes:k.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:V.FREQUENCY,prefixes:k.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:V.FREQUENCY,prefixes:k.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:V.ANGLE,prefixes:k.SHORT,value:1,offset:0},radian:{name:"radian",base:V.ANGLE,prefixes:k.LONG,value:1,offset:0},deg:{name:"deg",base:V.ANGLE,prefixes:k.SHORT,value:null,offset:0},degree:{name:"degree",base:V.ANGLE,prefixes:k.LONG,value:null,offset:0},grad:{name:"grad",base:V.ANGLE,prefixes:k.SHORT,value:null,offset:0},gradian:{name:"gradian",base:V.ANGLE,prefixes:k.LONG,value:null,offset:0},cycle:{name:"cycle",base:V.ANGLE,prefixes:k.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:V.ANGLE,prefixes:k.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:V.ANGLE,prefixes:k.NONE,value:null,offset:0},A:{name:"A",base:V.CURRENT,prefixes:k.SHORT,value:1,offset:0},ampere:{name:"ampere",base:V.CURRENT,prefixes:k.LONG,value:1,offset:0},K:{name:"K",base:V.TEMPERATURE,prefixes:k.SHORT,value:1,offset:0},degC:{name:"degC",base:V.TEMPERATURE,prefixes:k.SHORT,value:1,offset:273.15},degF:{name:"degF",base:V.TEMPERATURE,prefixes:k.SHORT,value:new A(5,9),offset:459.67},degR:{name:"degR",base:V.TEMPERATURE,prefixes:k.SHORT,value:new A(5,9),offset:0},kelvin:{name:"kelvin",base:V.TEMPERATURE,prefixes:k.LONG,value:1,offset:0},celsius:{name:"celsius",base:V.TEMPERATURE,prefixes:k.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:V.TEMPERATURE,prefixes:k.LONG,value:new A(5,9),offset:459.67},rankine:{name:"rankine",base:V.TEMPERATURE,prefixes:k.LONG,value:new A(5,9),offset:0},mol:{name:"mol",base:V.AMOUNT_OF_SUBSTANCE,prefixes:k.SHORT,value:1,offset:0},mole:{name:"mole",base:V.AMOUNT_OF_SUBSTANCE,prefixes:k.LONG,value:1,offset:0},cd:{name:"cd",base:V.LUMINOUS_INTENSITY,prefixes:k.SHORT,value:1,offset:0},candela:{name:"candela",base:V.LUMINOUS_INTENSITY,prefixes:k.LONG,value:1,offset:0},N:{name:"N",base:V.FORCE,prefixes:k.SHORT,value:1,offset:0},newton:{name:"newton",base:V.FORCE,prefixes:k.LONG,value:1,offset:0},dyn:{name:"dyn",base:V.FORCE,prefixes:k.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:V.FORCE,prefixes:k.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:V.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:V.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:V.FORCE,prefixes:k.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:V.FORCE,prefixes:k.NONE,value:9.80665,offset:0},J:{name:"J",base:V.ENERGY,prefixes:k.SHORT,value:1,offset:0},joule:{name:"joule",base:V.ENERGY,prefixes:k.LONG,value:1,offset:0},erg:{name:"erg",base:V.ENERGY,prefixes:k.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:V.ENERGY,prefixes:k.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:V.ENERGY,prefixes:k.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:V.ENERGY,prefixes:k.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:V.ENERGY,prefixes:k.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:V.POWER,prefixes:k.SHORT,value:1,offset:0},watt:{name:"watt",base:V.POWER,prefixes:k.LONG,value:1,offset:0},hp:{name:"hp",base:V.POWER,prefixes:k.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:V.POWER,prefixes:k.SHORT,value:C.I,offset:0},VA:{name:"VA",base:V.POWER,prefixes:k.SHORT,value:1,offset:0},Pa:{name:"Pa",base:V.PRESSURE,prefixes:k.SHORT,value:1,offset:0},psi:{name:"psi",base:V.PRESSURE,prefixes:k.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:V.PRESSURE,prefixes:k.NONE,value:101325,offset:0},bar:{name:"bar",base:V.PRESSURE,prefixes:k.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:V.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:V.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:V.PRESSURE,prefixes:k.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:V.PRESSURE,prefixes:k.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:V.ELECTRIC_CHARGE,prefixes:k.LONG,value:1,offset:0},C:{name:"C",base:V.ELECTRIC_CHARGE,prefixes:k.SHORT,value:1,offset:0},farad:{name:"farad",base:V.ELECTRIC_CAPACITANCE,prefixes:k.LONG,value:1,offset:0},F:{name:"F",base:V.ELECTRIC_CAPACITANCE,prefixes:k.SHORT,value:1,offset:0},volt:{name:"volt",base:V.ELECTRIC_POTENTIAL,prefixes:k.LONG,value:1,offset:0},V:{name:"V",base:V.ELECTRIC_POTENTIAL,prefixes:k.SHORT,value:1,offset:0},ohm:{name:"ohm",base:V.ELECTRIC_RESISTANCE,prefixes:k.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:V.ELECTRIC_INDUCTANCE,prefixes:k.LONG,value:1,offset:0},H:{name:"H",base:V.ELECTRIC_INDUCTANCE,prefixes:k.SHORT,value:1,offset:0},siemens:{name:"siemens",base:V.ELECTRIC_CONDUCTANCE,prefixes:k.LONG,value:1,offset:0},S:{name:"S",base:V.ELECTRIC_CONDUCTANCE,prefixes:k.SHORT,value:1,offset:0},weber:{name:"weber",base:V.MAGNETIC_FLUX,prefixes:k.LONG,value:1,offset:0},Wb:{name:"Wb",base:V.MAGNETIC_FLUX,prefixes:k.SHORT,value:1,offset:0},tesla:{name:"tesla",base:V.MAGNETIC_FLUX_DENSITY,prefixes:k.LONG,value:1,offset:0},T:{name:"T",base:V.MAGNETIC_FLUX_DENSITY,prefixes:k.SHORT,value:1,offset:0},b:{name:"b",base:V.BIT,prefixes:k.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:V.BIT,prefixes:k.BINARY_LONG,value:1,offset:0},B:{name:"B",base:V.BIT,prefixes:k.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:V.BIT,prefixes:k.BINARY_LONG,value:8,offset:0}},K={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function te(W){if(W.number==="BigNumber"){var re=Uy(N);Q.rad.value=new N(1),Q.deg.value=re.div(180),Q.grad.value=re.div(200),Q.cycle.value=re.times(2),Q.arcsec.value=re.div(648e3),Q.arcmin.value=re.div(10800)}else Q.rad.value=1,Q.deg.value=Math.PI/180,Q.grad.value=Math.PI/200,Q.cycle.value=Math.PI*2,Q.arcsec.value=Math.PI/648e3,Q.arcmin.value=Math.PI/10800;Q.radian.value=Q.rad.value,Q.degree.value=Q.deg.value,Q.gradian.value=Q.grad.value}te(r),e&&e("config",function(W,re){W.number!==re.number&&te(W)});var se={si:{NONE:{unit:de,prefix:k.NONE[""]},LENGTH:{unit:Q.m,prefix:k.SHORT[""]},MASS:{unit:Q.g,prefix:k.SHORT.k},TIME:{unit:Q.s,prefix:k.SHORT[""]},CURRENT:{unit:Q.A,prefix:k.SHORT[""]},TEMPERATURE:{unit:Q.K,prefix:k.SHORT[""]},LUMINOUS_INTENSITY:{unit:Q.cd,prefix:k.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:Q.mol,prefix:k.SHORT[""]},ANGLE:{unit:Q.rad,prefix:k.SHORT[""]},BIT:{unit:Q.bits,prefix:k.SHORT[""]},FORCE:{unit:Q.N,prefix:k.SHORT[""]},ENERGY:{unit:Q.J,prefix:k.SHORT[""]},POWER:{unit:Q.W,prefix:k.SHORT[""]},PRESSURE:{unit:Q.Pa,prefix:k.SHORT[""]},ELECTRIC_CHARGE:{unit:Q.C,prefix:k.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:Q.F,prefix:k.SHORT[""]},ELECTRIC_POTENTIAL:{unit:Q.V,prefix:k.SHORT[""]},ELECTRIC_RESISTANCE:{unit:Q.ohm,prefix:k.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:Q.H,prefix:k.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:Q.S,prefix:k.SHORT[""]},MAGNETIC_FLUX:{unit:Q.Wb,prefix:k.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:Q.T,prefix:k.SHORT[""]},FREQUENCY:{unit:Q.Hz,prefix:k.SHORT[""]}}};se.cgs=JSON.parse(JSON.stringify(se.si)),se.cgs.LENGTH={unit:Q.m,prefix:k.SHORT.c},se.cgs.MASS={unit:Q.g,prefix:k.SHORT[""]},se.cgs.FORCE={unit:Q.dyn,prefix:k.SHORT[""]},se.cgs.ENERGY={unit:Q.erg,prefix:k.NONE[""]},se.us=JSON.parse(JSON.stringify(se.si)),se.us.LENGTH={unit:Q.ft,prefix:k.NONE[""]},se.us.MASS={unit:Q.lbm,prefix:k.NONE[""]},se.us.TEMPERATURE={unit:Q.degF,prefix:k.NONE[""]},se.us.FORCE={unit:Q.lbf,prefix:k.NONE[""]},se.us.ENERGY={unit:Q.BTU,prefix:k.BTU[""]},se.us.POWER={unit:Q.hp,prefix:k.NONE[""]},se.us.PRESSURE={unit:Q.psi,prefix:k.NONE[""]},se.auto=JSON.parse(JSON.stringify(se.si));var ue=se.auto;g.setUnitSystem=function(W){if(Ge(se,W))ue=se[W];else throw new Error("Unit system "+W+" does not exist. Choices are: "+Object.keys(se).join(", "))},g.getUnitSystem=function(){for(var W in se)if(Ge(se,W)&&se[W]===ue)return W},g.typeConverters={BigNumber:function(re){return re!=null&&re.isFraction?new N(String(re.n)).div(String(re.d)).times(String(re.s)):new N(re+"")},Fraction:function(re){return new A(re)},Complex:function(re){return re},number:function(re){return re!=null&&re.isFraction?v(re):re}},g.prototype._numberConverter=function(){var W=g.typeConverters[this.valueType()];if(W)return W;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},g._getNumberConverter=function(W){if(!g.typeConverters[W])throw new TypeError('Unsupported type "'+W+'"');return g.typeConverters[W]};for(var ve in Q)if(Ge(Q,ve)){var he=Q[ve];he.dimensions=he.base.dimensions}for(var Me in K)if(Ge(K,Me)){var $e=Q[K[Me]],Ve={};for(var Be in $e)Ge($e,Be)&&(Ve[Be]=$e[Be]);Ve.name=Me,Q[Me]=Ve}g.isValidAlpha=function(re){return/^[a-zA-Z]$/.test(re)};function Le(W){for(var re=0;re<W.length;re++){if(_=W.charAt(re),re===0&&!g.isValidAlpha(_))throw new Error('Invalid unit name (must begin with alpha character): "'+W+'"');if(re>0&&!(g.isValidAlpha(_)||T(_)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+W+'"')}}return g.createUnit=function(W,re){if(typeof W!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(re&&re.override){for(var fe in W)if(Ge(W,fe)&&g.deleteUnit(fe),W[fe].aliases)for(var z=0;z<W[fe].aliases.length;z++)g.deleteUnit(W[fe].aliases[z])}var J;for(var ne in W)Ge(W,ne)&&(J=g.createUnitSingle(ne,W[ne]));return J},g.createUnitSingle=function(W,re){if((typeof re>"u"||re===null)&&(re={}),typeof W!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Ge(Q,W))throw new Error('Cannot create unit "'+W+'": a unit with that name already exists');Le(W);var fe=null,z=[],J=0,ne,oe,ce;if(re&&re.type==="Unit")fe=re.clone();else if(typeof re=="string")re!==""&&(ne=re);else if(typeof re=="object")ne=re.definition,oe=re.prefixes,J=re.offset,ce=re.baseName,re.aliases&&(z=re.aliases.valueOf());else throw new TypeError('Cannot create unit "'+W+'" from "'+re.toString()+'": expecting "string" or "Unit" or "Object"');if(z){for(var ge=0;ge<z.length;ge++)if(Ge(Q,z[ge]))throw new Error('Cannot create alias "'+z[ge]+'": a unit with that name already exists')}if(ne&&typeof ne=="string"&&!fe)try{fe=g.parse(ne,{allowNoUnits:!0})}catch(We){throw We.message='Could not create unit "'+W+'" from "'+ne+'": '+We.message,We}else ne&&ne.type==="Unit"&&(fe=ne.clone());z=z||[],J=J||0,oe&&oe.toUpperCase?oe=k[oe.toUpperCase()]||k.NONE:oe=k.NONE;var Ee={};if(fe){Ee={name:W,value:fe.value,dimensions:fe.dimensions.slice(0),prefixes:oe,offset:J};var pt=!1;for(var yt in V)if(Ge(V,yt)){for(var qt=!0,et=0;et<Y.length;et++)if(Math.abs((Ee.dimensions[et]||0)-(V[yt].dimensions[et]||0))>1e-12){qt=!1;break}if(qt){pt=!0,Ee.base=V[yt];break}}if(!pt){ce=ce||W+"_STUFF";var lr={dimensions:fe.dimensions.slice(0)};lr.key=ce,V[ce]=lr,ue[ce]={unit:Ee,prefix:k.NONE[""]},Ee.base=V[ce]}}else{if(ce=ce||W+"_STUFF",Y.indexOf(ce)>=0)throw new Error('Cannot create new base unit "'+W+'": a base unit with that name already exists (and cannot be overridden)');Y.push(ce);for(var Ae in V)Ge(V,Ae)&&(V[Ae].dimensions[Y.length-1]=0);for(var Ie={dimensions:[]},De=0;De<Y.length;De++)Ie.dimensions[De]=0;Ie.dimensions[Y.length-1]=1,Ie.key=ce,V[ce]=Ie,Ee={name:W,value:1,dimensions:V[ce].dimensions.slice(0),prefixes:oe,offset:J,base:V[ce]},ue[ce]={unit:Ee,prefix:k.NONE[""]}}g.UNITS[W]=Ee;for(var O=0;O<z.length;O++){var ae=z[O],pe={};for(var Ce in Ee)Ge(Ee,Ce)&&(pe[Ce]=Ee[Ce]);pe.name=ae,g.UNITS[ae]=pe}return delete R.cache,new g(null,W)},g.deleteUnit=function(W){delete g.UNITS[W],delete R.cache},g.PREFIXES=k,g.BASE_DIMENSIONS=Y,g.BASE_UNITS=V,g.UNIT_SYSTEMS=se,g.UNITS=Q,g},{isClass:!0}),lE="unit",cG=["typed","Unit"],fG=q(lE,cG,t=>{var{typed:e,Unit:r}=t;return e(lE,{Unit:function(a){return a.clone()},string:function(a){return r.isValuelessUnit(a)?new r(null,a):r.parse(a,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(a,i){return new r(a,i)},"number | BigNumber | Fraction":function(a){return new r(a)},"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),cE="sparse",dG=["typed","SparseMatrix"],mG=q(cE,dG,t=>{var{typed:e,SparseMatrix:r}=t;return e(cE,{"":function(){return new r([])},string:function(a){return new r([],a)},"Array | Matrix":function(a){return new r(a)},"Array | Matrix, string":function(a,i){return new r(a,i)}})}),fE="createUnit",hG=["typed","Unit"],pG=q(fE,hG,t=>{var{typed:e,Unit:r}=t;return e(fE,{"Object, Object":function(a,i){return r.createUnit(a,i)},Object:function(a){return r.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,i,s){var u={};return u[a]=i,r.createUnit(u,s)},"string, Unit | string | Object":function(a,i){var s={};return s[a]=i,r.createUnit(s,{})},string:function(a){var i={};return i[a]={},r.createUnit(i,{})}})}),dE="acos",vG=["typed","config","Complex"],gG=q(dE,vG,t=>{var{typed:e,config:r,Complex:n}=t;return e(dE,{number:function(i){return i>=-1&&i<=1||r.predictable?Math.acos(i):new n(i,0).acos()},Complex:function(i){return i.acos()},BigNumber:function(i){return i.acos()}})}),mE="acosh",yG=["typed","config","Complex"],xG=q(mE,yG,t=>{var{typed:e,config:r,Complex:n}=t;return e(mE,{number:function(i){return i>=1||r.predictable?jM(i):i<=-1?new n(Math.log(Math.sqrt(i*i-1)-i),Math.PI):new n(i,0).acosh()},Complex:function(i){return i.acosh()},BigNumber:function(i){return i.acosh()}})}),hE="acot",bG=["typed","BigNumber"],wG=q(hE,bG,t=>{var{typed:e,BigNumber:r}=t;return e(hE,{number:kM,Complex:function(a){return a.acot()},BigNumber:function(a){return new r(1).div(a).atan()}})}),pE="acoth",NG=["typed","config","Complex","BigNumber"],_G=q(pE,NG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(pE,{number:function(s){return s>=1||s<=-1||r.predictable?$M(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new a(1).div(s).atanh()}})}),vE="acsc",EG=["typed","config","Complex","BigNumber"],SG=q(vE,EG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(vE,{number:function(s){return s<=-1||s>=1||r.predictable?LM(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new a(1).div(s).asin()}})}),gE="acsch",AG=["typed","BigNumber"],DG=q(gE,AG,t=>{var{typed:e,BigNumber:r}=t;return e(gE,{number:zM,Complex:function(a){return a.acsch()},BigNumber:function(a){return new r(1).div(a).asinh()}})}),yE="asec",CG=["typed","config","Complex","BigNumber"],TG=q(yE,CG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(yE,{number:function(s){return s<=-1||s>=1||r.predictable?VM(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new a(1).div(s).acos()}})}),xE="asech",MG=["typed","config","Complex","BigNumber"],IG=q(xE,MG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(xE,{number:function(s){if(s<=1&&s>=-1||r.predictable){var u=1/s;if(u>0||r.predictable)return UM(s);var l=Math.sqrt(u*u-1);return new n(Math.log(l-u),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new a(1).div(s).acosh()}})}),bE="asin",PG=["typed","config","Complex"],FG=q(bE,PG,t=>{var{typed:e,config:r,Complex:n}=t;return e(bE,{number:function(i){return i>=-1&&i<=1||r.predictable?Math.asin(i):new n(i,0).asin()},Complex:function(i){return i.asin()},BigNumber:function(i){return i.asin()}})}),RG="asinh",OG=["typed"],BG=q(RG,OG,t=>{var{typed:e}=t;return e("asinh",{number:qM,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),jG="atan",kG=["typed"],$G=q(jG,kG,t=>{var{typed:e}=t;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),wE="atan2",LG=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],zG=q(wE,LG,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:a,DenseMatrix:i,concat:s}=t,u=Ra({typed:e,equalScalar:n}),l=wn({typed:e}),o=i4({typed:e,equalScalar:n}),c=un({typed:e,equalScalar:n}),d=kr({typed:e,DenseMatrix:i}),m=er({typed:e,matrix:r,concat:s});return e(wE,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,p)=>a.atan2(h,p)},m({scalar:"number | BigNumber",SS:o,DS:l,SD:u,Ss:c,sS:d}))}),NE="atanh",VG=["typed","config","Complex"],UG=q(NE,VG,t=>{var{typed:e,config:r,Complex:n}=t;return e(NE,{number:function(i){return i<=1&&i>=-1||r.predictable?HM(i):new n(i,0).atanh()},Complex:function(i){return i.atanh()},BigNumber:function(i){return i.atanh()}})}),ul=q("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(r=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(r,n.valueType())(n.value)})}}),_E="cos",qG=["typed"],HG=q(_E,qG,t=>{var{typed:e}=t,r=ul({typed:e});return e(_E,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},r)}),EE="cosh",GG=["typed"],WG=q(EE,GG,t=>{var{typed:e}=t;return e(EE,{number:Lk,"Complex | BigNumber":r=>r.cosh()})}),SE="cot",QG=["typed","BigNumber"],XG=q(SE,QG,t=>{var{typed:e,BigNumber:r}=t,n=ul({typed:e});return e(SE,{number:GM,Complex:a=>a.cot(),BigNumber:a=>new r(1).div(a.tan())},n)}),AE="coth",KG=["typed","BigNumber"],JG=q(AE,KG,t=>{var{typed:e,BigNumber:r}=t;return e(AE,{number:WM,Complex:n=>n.coth(),BigNumber:n=>new r(1).div(n.tanh())})}),DE="csc",YG=["typed","BigNumber"],ZG=q(DE,YG,t=>{var{typed:e,BigNumber:r}=t,n=ul({typed:e});return e(DE,{number:QM,Complex:a=>a.csc(),BigNumber:a=>new r(1).div(a.sin())},n)}),CE="csch",eW=["typed","BigNumber"],tW=q(CE,eW,t=>{var{typed:e,BigNumber:r}=t;return e(CE,{number:XM,Complex:n=>n.csch(),BigNumber:n=>new r(1).div(n.sinh())})}),TE="sec",rW=["typed","BigNumber"],nW=q(TE,rW,t=>{var{typed:e,BigNumber:r}=t,n=ul({typed:e});return e(TE,{number:KM,Complex:a=>a.sec(),BigNumber:a=>new r(1).div(a.cos())},n)}),ME="sech",aW=["typed","BigNumber"],iW=q(ME,aW,t=>{var{typed:e,BigNumber:r}=t;return e(ME,{number:JM,Complex:n=>n.sech(),BigNumber:n=>new r(1).div(n.cosh())})}),IE="sin",sW=["typed"],oW=q(IE,sW,t=>{var{typed:e}=t,r=ul({typed:e});return e(IE,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},r)}),PE="sinh",uW=["typed"],lW=q(PE,uW,t=>{var{typed:e}=t;return e(PE,{number:YM,"Complex | BigNumber":r=>r.sinh()})}),FE="tan",cW=["typed"],fW=q(FE,cW,t=>{var{typed:e}=t,r=ul({typed:e});return e(FE,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},r)}),dW="tanh",mW=["typed"],hW=q(dW,mW,t=>{var{typed:e}=t;return e("tanh",{number:Vk,"Complex | BigNumber":r=>r.tanh()})}),RE="setCartesian",pW=["typed","size","subset","compareNatural","Index","DenseMatrix"],vW=q(RE,pW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(RE,{"Array | Matrix, Array | Matrix":function(l,o){var c=[];if(n(r(l),new i(0))!==0&&n(r(o),new i(0))!==0){var d=Tt(Array.isArray(l)?l:l.toArray()).sort(a),m=Tt(Array.isArray(o)?o:o.toArray()).sort(a);c=[];for(var h=0;h<d.length;h++)for(var p=0;p<m.length;p++)c.push([d[h],m[p]])}return Array.isArray(l)&&Array.isArray(o)?c:new s(c)}})}),OE="setDifference",gW=["typed","size","subset","compareNatural","Index","DenseMatrix"],yW=q(OE,gW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(OE,{"Array | Matrix, Array | Matrix":function(l,o){var c;if(n(r(l),new i(0))===0)c=[];else{if(n(r(o),new i(0))===0)return Tt(l.toArray());var d=Uu(Tt(Array.isArray(l)?l:l.toArray()).sort(a)),m=Uu(Tt(Array.isArray(o)?o:o.toArray()).sort(a));c=[];for(var h,p=0;p<d.length;p++){h=!1;for(var v=0;v<m.length;v++)if(a(d[p].value,m[v].value)===0&&d[p].identifier===m[v].identifier){h=!0;break}h||c.push(d[p])}}return Array.isArray(l)&&Array.isArray(o)?Pm(c):new s(Pm(c))}})}),BE="setDistinct",xW=["typed","size","subset","compareNatural","Index","DenseMatrix"],bW=q(BE,xW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(BE,{"Array | Matrix":function(l){var o;if(n(r(l),new i(0))===0)o=[];else{var c=Tt(Array.isArray(l)?l:l.toArray()).sort(a);o=[],o.push(c[0]);for(var d=1;d<c.length;d++)a(c[d],c[d-1])!==0&&o.push(c[d])}return Array.isArray(l)?o:new s(o)}})}),jE="setIntersect",wW=["typed","size","subset","compareNatural","Index","DenseMatrix"],NW=q(jE,wW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(jE,{"Array | Matrix, Array | Matrix":function(l,o){var c;if(n(r(l),new i(0))===0||n(r(o),new i(0))===0)c=[];else{var d=Uu(Tt(Array.isArray(l)?l:l.toArray()).sort(a)),m=Uu(Tt(Array.isArray(o)?o:o.toArray()).sort(a));c=[];for(var h=0;h<d.length;h++)for(var p=0;p<m.length;p++)if(a(d[h].value,m[p].value)===0&&d[h].identifier===m[p].identifier){c.push(d[h]);break}}return Array.isArray(l)&&Array.isArray(o)?Pm(c):new s(Pm(c))}})}),kE="setIsSubset",_W=["typed","size","subset","compareNatural","Index"],EW=q(kE,_W,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(kE,{"Array | Matrix, Array | Matrix":function(u,l){if(n(r(u),new i(0))===0)return!0;if(n(r(l),new i(0))===0)return!1;for(var o=Uu(Tt(Array.isArray(u)?u:u.toArray()).sort(a)),c=Uu(Tt(Array.isArray(l)?l:l.toArray()).sort(a)),d,m=0;m<o.length;m++){d=!1;for(var h=0;h<c.length;h++)if(a(o[m].value,c[h].value)===0&&o[m].identifier===c[h].identifier){d=!0;break}if(d===!1)return!1}return!0}})}),$E="setMultiplicity",SW=["typed","size","subset","compareNatural","Index"],AW=q($E,SW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e($E,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(u,l){if(n(r(l),new i(0))===0)return 0;for(var o=Tt(Array.isArray(l)?l:l.toArray()),c=0,d=0;d<o.length;d++)a(o[d],u)===0&&c++;return c}})}),LE="setPowerset",DW=["typed","size","subset","compareNatural","Index"],CW=q(LE,DW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(LE,{"Array | Matrix":function(o){if(n(r(o),new i(0))===0)return[];for(var c=Tt(Array.isArray(o)?o:o.toArray()).sort(a),d=[],m=0;m.toString(2).length<=c.length;)d.push(s(c,m.toString(2).split("").reverse())),m++;return u(d)}});function s(l,o){for(var c=[],d=0;d<o.length;d++)o[d]==="1"&&c.push(l[d]);return c}function u(l){for(var o=[],c=l.length-1;c>0;c--)for(var d=0;d<c;d++)l[d].length>l[d+1].length&&(o=l[d],l[d]=l[d+1],l[d+1]=o);return l}}),zE="setSize",TW=["typed","compareNatural"],MW=q(zE,TW,t=>{var{typed:e,compareNatural:r}=t;return e(zE,{"Array | Matrix":function(a){return Array.isArray(a)?Tt(a).length:Tt(a.toArray()).length},"Array | Matrix, boolean":function(a,i){if(i===!1||a.length===0)return Array.isArray(a)?Tt(a).length:Tt(a.toArray()).length;for(var s=Tt(Array.isArray(a)?a:a.toArray()).sort(r),u=1,l=1;l<s.length;l++)r(s[l],s[l-1])!==0&&u++;return u}})}),VE="setSymDifference",IW=["typed","size","concat","subset","setDifference","Index"],PW=q(VE,IW,t=>{var{typed:e,size:r,concat:n,subset:a,setDifference:i,Index:s}=t;return e(VE,{"Array | Matrix, Array | Matrix":function(l,o){if(a(r(l),new s(0))===0)return Tt(o);if(a(r(o),new s(0))===0)return Tt(l);var c=Tt(l),d=Tt(o);return n(i(c,d),i(d,c))}})}),UE="setUnion",FW=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],RW=q(UE,FW,t=>{var{typed:e,size:r,concat:n,subset:a,setIntersect:i,setSymDifference:s,Index:u}=t;return e(UE,{"Array | Matrix, Array | Matrix":function(o,c){if(a(r(o),new u(0))===0)return Tt(c);if(a(r(c),new u(0))===0)return Tt(o);var d=Tt(o),m=Tt(c);return n(s(d,m),i(d,m))}})}),qE="add",OW=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],BW=q(qE,OW,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:a,DenseMatrix:i,SparseMatrix:s,concat:u}=t,l=Ts({typed:e}),o=jy({typed:e,equalScalar:a}),c=Eo({typed:e,DenseMatrix:i}),d=er({typed:e,matrix:r,concat:u});return e(qE,{"any, any":n,"any, any, ...any":e.referToSelf(m=>(h,p,v)=>{for(var C=m(h,p),N=0;N<v.length;N++)C=m(C,v[N]);return C})},d({elop:n,DS:l,SS:o,Ss:c}))}),HE="hypot",jW=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],kW=q(HE,jW,t=>{var{typed:e,abs:r,addScalar:n,divideScalar:a,multiplyScalar:i,sqrt:s,smaller:u,isPositive:l}=t;return e(HE,{"... number | BigNumber":o,Array:o,Matrix:c=>o(Tt(c.toArray(),!0))});function o(c){for(var d=0,m=0,h=0;h<c.length;h++){if(pi(c[h]))throw new TypeError("Unexpected type of argument to hypot");var p=r(c[h]);u(m,p)?(d=i(d,i(a(m,p),a(m,p))),d=n(d,1),m=p):d=n(d,l(p)?i(a(p,m),a(p,m)):p)}return i(m,s(d))}}),GE="norm",$W=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],LW=q(GE,$W,t=>{var{typed:e,abs:r,add:n,pow:a,conj:i,sqrt:s,multiply:u,equalScalar:l,larger:o,smaller:c,matrix:d,ctranspose:m,eigs:h}=t;return e(GE,{number:Math.abs,Complex:function(E){return E.abs()},BigNumber:function(E){return E.abs()},boolean:function(E){return Math.abs(E)},Array:function(E){return x(d(E),2)},Matrix:function(E){return x(E,2)},"Array, number | BigNumber | string":function(E,D){return x(d(E),D)},"Matrix, number | BigNumber | string":function(E,D){return x(E,D)}});function p(_){var E=0;return _.forEach(function(D){var T=r(D);o(T,E)&&(E=T)},!0),E}function v(_){var E;return _.forEach(function(D){var T=r(D);(!E||c(T,E))&&(E=T)},!0),E||0}function C(_,E){if(E===Number.POSITIVE_INFINITY||E==="inf")return p(_);if(E===Number.NEGATIVE_INFINITY||E==="-inf")return v(_);if(E==="fro")return x(_,2);if(typeof E=="number"&&!isNaN(E)){if(!l(E,0)){var D=0;return _.forEach(function(T){D=n(a(r(T),E),D)},!0),a(D,1/E)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function N(_){var E=0;return _.forEach(function(D,T){E=n(E,u(D,i(D)))}),r(s(E))}function A(_){var E=[],D=0;return _.forEach(function(T,M){var I=M[1],P=n(E[I]||0,r(T));o(P,D)&&(D=P),E[I]=P},!0),D}function b(_){var E=_.size();if(E[0]!==E[1])throw new RangeError("Invalid matrix dimensions");var D=m(_),T=u(D,_),M=h(T).values.toArray(),I=M[M.length-1];return r(s(I))}function g(_){var E=[],D=0;return _.forEach(function(T,M){var I=M[0],P=n(E[I]||0,r(T));o(P,D)&&(D=P),E[I]=P},!0),D}function w(_,E){if(E===1)return A(_);if(E===Number.POSITIVE_INFINITY||E==="inf")return g(_);if(E==="fro")return N(_);if(E===2)return b(_);throw new Error("Unsupported parameter value "+E)}function x(_,E){var D=_.size();if(D.length===1)return C(_,E);if(D.length===2){if(D[0]&&D[1])return w(_,E);throw new RangeError("Invalid matrix dimensions")}}}),WE="dot",zW=["typed","addScalar","multiplyScalar","conj","size"],VW=q(WE,zW,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:a,size:i}=t;return e(WE,{"Array | DenseMatrix, Array | DenseMatrix":u,"SparseMatrix, SparseMatrix":l});function s(o,c){var d=i(o),m=i(c),h,p;if(d.length===1)h=d[0];else if(d.length===2&&d[1]===1)h=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(m.length===1)p=m[0];else if(m.length===2&&m[1]===1)p=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(h!==p)throw new RangeError("Vectors must have equal length ("+h+" != "+p+")");if(h===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function u(o,c){var d=s(o,c),m=Ze(o)?o._data:o,h=Ze(o)?o._datatype||o.getDataType():void 0,p=Ze(c)?c._data:c,v=Ze(c)?c._datatype||c.getDataType():void 0,C=i(o).length===2,N=i(c).length===2,A=r,b=n;if(h&&v&&h===v&&typeof h=="string"&&h!=="mixed"){var g=h;A=e.find(r,[g,g]),b=e.find(n,[g,g])}if(!C&&!N){for(var w=b(a(m[0]),p[0]),x=1;x<d;x++)w=A(w,b(a(m[x]),p[x]));return w}if(!C&&N){for(var _=b(a(m[0]),p[0][0]),E=1;E<d;E++)_=A(_,b(a(m[E]),p[E][0]));return _}if(C&&!N){for(var D=b(a(m[0][0]),p[0]),T=1;T<d;T++)D=A(D,b(a(m[T][0]),p[T]));return D}if(C&&N){for(var M=b(a(m[0][0]),p[0][0]),I=1;I<d;I++)M=A(M,b(a(m[I][0]),p[I][0]));return M}}function l(o,c){s(o,c);for(var d=o._index,m=o._values,h=c._index,p=c._values,v=0,C=r,N=n,A=0,b=0;A<d.length&&b<h.length;){var g=d[A],w=h[b];if(g<w){A++;continue}if(g>w){b++;continue}g===w&&(v=C(v,N(m[A],p[b])),A++,b++)}return v}}),UW="trace",qW=["typed","matrix","add"],HW=q(UW,qW,t=>{var{typed:e,matrix:r,add:n}=t;return e("trace",{Array:function(u){return a(r(u))},SparseMatrix:i,DenseMatrix:a,any:at});function a(s){var u=s._size,l=s._data;switch(u.length){case 1:if(u[0]===1)return at(l[0]);throw new RangeError("Matrix must be square (size: "+vt(u)+")");case 2:{var o=u[0],c=u[1];if(o===c){for(var d=0,m=0;m<o;m++)d=n(d,l[m][m]);return d}else throw new RangeError("Matrix must be square (size: "+vt(u)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+vt(u)+")")}}function i(s){var u=s._values,l=s._index,o=s._ptr,c=s._size,d=c[0],m=c[1];if(d===m){var h=0;if(u.length>0)for(var p=0;p<m;p++)for(var v=o[p],C=o[p+1],N=v;N<C;N++){var A=l[N];if(A===p){h=n(h,u[N]);break}if(A>p)break}return h}throw new RangeError("Matrix must be square (size: "+vt(c)+")")}}),QE="index",GW=["typed","Index"],WW=q(QE,GW,t=>{var{typed:e,Index:r}=t;return e(QE,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var i=a.map(function(u){return lt(u)?u.toNumber():Qt(u)||Ze(u)?u.map(function(l){return lt(l)?l.toNumber():l}):u}),s=new r;return r.apply(s,i),s}})}),S4=new Set(["end"]),QW="Node",XW=["mathWithTransform"],KW=q(QW,XW,t=>{var{mathWithTransform:e}=t;function r(a){for(var i of[...S4])if(a.has(i))throw new Error('Scope contains an illegal symbol, "'+i+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(i){return this.compile().evaluate(i)}compile(){var i=this._compile(e,{}),s={},u=null;function l(o){var c=Nu(o);return r(c),i(c,s,u)}return{evaluate:l}}_compile(i,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(i){throw new Error("Cannot run forEach on a Node interface")}map(i){throw new Error("Cannot run map on a Node interface")}_ifNode(i){if(!Gt(i))throw new TypeError("Callback function must return a Node");return i}traverse(i){i(this,null,null);function s(u,l){u.forEach(function(o,c,d){l(o,c,d),s(o,l)})}s(this,i)}transform(i){function s(u,l,o){var c=i(u,l,o);return c!==u?c:u.map(s)}return s(this,null,null)}filter(i){var s=[];return this.traverse(function(u,l,o){i(u,l,o)&&s.push(u)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(i){return i.cloneDeep()})}equals(i){return i?this.type===i.type&&Si(this,i):!1}toString(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toString(i)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toHTML(i)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toTex(i)}_toTex(i){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(i){if(i&&typeof i=="object")switch(typeof i.handler){case"object":case"undefined":return;case"function":return i.handler(this,i);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function In(t){return t&&t.isIndexError?new Pa(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function A4(t){var{subset:e}=t;return function(n,a){try{if(Array.isArray(n))return e(n,a);if(n&&typeof n.subset=="function")return n.subset(a);if(typeof n=="string")return e(n,a);if(typeof n=="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Sn(n,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(i){throw In(i)}}}var nd="AccessorNode",JW=["subset","Node"],YW=q(nd,JW,t=>{var{subset:e,Node:r}=t,n=A4({subset:e});function a(s){return!(fo(s)||ia(s)||_t(s)||bs(s)||Ph(s)||Ei(s)||Xr(s))}class i extends r{constructor(u,l){if(super(),!Gt(u))throw new TypeError('Node expected for parameter "object"');if(!nl(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=u,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return nd}get isAccessorNode(){return!0}_compile(u,l){var o=this.object._compile(u,l),c=this.index._compile(u,l);if(this.index.isObjectProperty()){var d=this.index.getObjectProperty();return function(h,p,v){return Sn(o(h,p,v),d)}}else return function(h,p,v){var C=o(h,p,v),N=c(h,p,C);return n(C,N)}}forEach(u){u(this.object,"object",this),u(this.index,"index",this)}map(u){return new i(this._ifNode(u(this.object,"object",this)),this._ifNode(u(this.index,"index",this)))}clone(){return new i(this.object,this.index)}_toString(u){var l=this.object.toString(u);return a(this.object)&&(l="("+l+")"),l+this.index.toString(u)}_toHTML(u){var l=this.object.toHTML(u);return a(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(u)}_toTex(u){var l=this.object.toTex(u);return a(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(u)}toJSON(){return{mathjs:nd,object:this.object,index:this.index}}static fromJSON(u){return new i(u.object,u.index)}}return Ir(i,"name",nd),i},{isClass:!0,isNode:!0}),ad="ArrayNode",ZW=["Node"],eQ=q(ad,ZW,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),this.items=a||[],!Array.isArray(this.items)||!this.items.every(Gt))throw new TypeError("Array containing Nodes expected")}get type(){return ad}get isArrayNode(){return!0}_compile(a,i){var s=cs(this.items,function(o){return o._compile(a,i)}),u=a.config.matrix!=="Array";if(u){var l=a.matrix;return function(c,d,m){return l(cs(s,function(h){return h(c,d,m)}))}}else return function(c,d,m){return cs(s,function(h){return h(c,d,m)})}}forEach(a){for(var i=0;i<this.items.length;i++){var s=this.items[i];a(s,"items["+i+"]",this)}}map(a){for(var i=[],s=0;s<this.items.length;s++)i[s]=this._ifNode(a(this.items[s],"items["+s+"]",this));return new r(i)}clone(){return new r(this.items.slice(0))}_toString(a){var i=this.items.map(function(s){return s.toString(a)});return"["+i.join(", ")+"]"}toJSON(){return{mathjs:ad,items:this.items}}static fromJSON(a){return new r(a.items)}_toHTML(a){var i=this.items.map(function(s){return s.toHTML(a)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){function i(s,u){var l=s.some(ia)&&!s.every(ia),o=u||l,c=o?"&":"\\\\",d=s.map(function(m){return m.items?i(m.items,!u):m.toTex(a)}).join(c);return l||!o||o&&!u?"\\begin{bmatrix}"+d+"\\end{bmatrix}":d}return i(this.items,!1)}}return Ir(r,"name",ad),r},{isClass:!0,isNode:!0});function tQ(t){var{subset:e,matrix:r}=t;return function(a,i,s){try{if(Array.isArray(a)){var u=r(a).subset(i,s).valueOf();return u.forEach((l,o)=>{a[o]=l}),a}else{if(a&&typeof a.subset=="function")return a.subset(i,s);if(typeof a=="string")return e(a,i,s);if(typeof a=="object"){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return $u(a,i.getObjectProperty(),s),a}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw In(l)}}}var Sa=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function id(t,e){if(!e||e!=="auto")return t;for(var r=t;Ei(r);)r=r.content;return r}function Xt(t,e,r,n){var a=t;e!=="keep"&&(a=t.getContent());for(var i=a.getIdentifier(),s=null,u=0;u<Sa.length;u++)if(i in Sa[u]){s=u;break}if(i==="OperatorNode:multiply"&&a.implicit&&r!=="show"){var l=id(a.args[0],e);!(_t(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&wg(id(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&wg(id(l.args[0],e))&&_t(id(l.args[1])))&&(s+=1)}return s}function kl(t,e){var r=t;e!=="keep"&&(r=t.getContent());var n=r.getIdentifier(),a=Xt(r,e);if(a===null)return null;var i=Sa[a][n];if(Ge(i,"associativity")){if(i.associativity==="left")return"left";if(i.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+i.associativity+"'.")}return null}function tv(t,e,r){var n=r!=="keep"?t.getContent():t,a=r!=="keep"?t.getContent():e,i=n.getIdentifier(),s=a.getIdentifier(),u=Xt(n,r);if(u===null)return null;var l=Sa[u][i];if(Ge(l,"associativeWith")&&l.associativeWith instanceof Array){for(var o=0;o<l.associativeWith.length;o++)if(l.associativeWith[o]===s)return!0;return!1}return null}function rQ(t){var e="OperatorNode:"+t;for(var r of Sa)if(e in r)return r[e].op;return null}var sd="AssignmentNode",nQ=["subset","?matrix","Node"],aQ=q(sd,nQ,t=>{var{subset:e,matrix:r,Node:n}=t,a=A4({subset:e}),i=tQ({subset:e,matrix:r});function s(l,o,c){o||(o="keep");var d=Xt(l,o,c),m=Xt(l.value,o,c);return o==="all"||m!==null&&m<=d}class u extends n{constructor(o,c,d){if(super(),this.object=o,this.index=d?c:null,this.value=d||c,!Xr(o)&&!fo(o))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Xr(o)&&o.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!nl(this.index))throw new TypeError('IndexNode expected as "index"');if(!Gt(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return sd}get isAssignmentNode(){return!0}_compile(o,c){var d=this.object._compile(o,c),m=this.index?this.index._compile(o,c):null,h=this.value._compile(o,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(g,w,x){var _=d(g,w,x),E=h(g,w,x);return $u(_,v,E),E}}else{if(Xr(this.object))return function(g,w,x){var _=d(g,w,x),E=h(g,w,x),D=m(g,w,_);return g.set(p,i(_,D,E)),E};var C=this.object.object._compile(o,c);if(this.object.index.isObjectProperty()){var N=this.object.index.getObjectProperty();return function(g,w,x){var _=C(g,w,x),E=Sn(_,N),D=m(g,w,E),T=h(g,w,x);return $u(_,N,i(E,D,T)),T}}else{var A=this.object.index._compile(o,c);return function(g,w,x){var _=C(g,w,x),E=A(g,w,_),D=a(_,E),T=m(g,w,D),M=h(g,w,x);return i(_,E,i(D,T,M)),M}}}else{if(!Xr(this.object))throw new TypeError("SymbolNode expected as object");return function(g,w,x){var _=h(g,w,x);return g.set(p,_),_}}}forEach(o){o(this.object,"object",this),this.index&&o(this.index,"index",this),o(this.value,"value",this)}map(o){var c=this._ifNode(o(this.object,"object",this)),d=this.index?this._ifNode(o(this.index,"index",this)):null,m=this._ifNode(o(this.value,"value",this));return new u(c,d,m)}clone(){return new u(this.object,this.index,this.value)}_toString(o){var c=this.object.toString(o),d=this.index?this.index.toString(o):"",m=this.value.toString(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(m="("+m+")"),c+d+" = "+m}toJSON(){return{mathjs:sd,object:this.object,index:this.index,value:this.value}}static fromJSON(o){return new u(o.object,o.index,o.value)}_toHTML(o){var c=this.object.toHTML(o),d=this.index?this.index.toHTML(o):"",m=this.value.toHTML(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(m='<span class="math-paranthesis math-round-parenthesis">(</span>'+m+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+d+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+m}_toTex(o){var c=this.object.toTex(o),d=this.index?this.index.toTex(o):"",m=this.value.toTex(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(m="\\left(".concat(m,"\\right)")),c+d+"="+m}}return Ir(u,"name",sd),u},{isClass:!0,isNode:!0}),od="BlockNode",iQ=["ResultSet","Node"],sQ=q(od,iQ,t=>{var{ResultSet:e,Node:r}=t;class n extends r{constructor(i){if(super(),!Array.isArray(i))throw new Error("Array expected");this.blocks=i.map(function(s){var u=s&&s.node,l=s&&s.visible!==void 0?s.visible:!0;if(!Gt(u))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:u,visible:l}})}get type(){return od}get isBlockNode(){return!0}_compile(i,s){var u=cs(this.blocks,function(l){return{evaluate:l.node._compile(i,s),visible:l.visible}});return function(o,c,d){var m=[];return oM(u,function(p){var v=p.evaluate(o,c,d);p.visible&&m.push(v)}),new e(m)}}forEach(i){for(var s=0;s<this.blocks.length;s++)i(this.blocks[s].node,"blocks["+s+"].node",this)}map(i){for(var s=[],u=0;u<this.blocks.length;u++){var l=this.blocks[u],o=this._ifNode(i(l.node,"blocks["+u+"].node",this));s[u]={node:o,visible:l.visible}}return new n(s)}clone(){var i=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(i)}_toString(i){return this.blocks.map(function(s){return s.node.toString(i)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:od,blocks:this.blocks}}static fromJSON(i){return new n(i.blocks)}_toHTML(i){return this.blocks.map(function(s){return s.node.toHTML(i)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(i){return this.blocks.map(function(s){return s.node.toTex(i)+(s.visible?"":";")}).join(`\\;\\;
`)}}return Ir(n,"name",od),n},{isClass:!0,isNode:!0}),ud="ConditionalNode",oQ=["Node"],uQ=q(ud,oQ,t=>{var{Node:e}=t;function r(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(lt(a))return!a.isZero();if(pi(a))return!!(a.re||a.im);if(Wn(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+Kt(a)+'"')}class n extends e{constructor(i,s,u){if(super(),!Gt(i))throw new TypeError("Parameter condition must be a Node");if(!Gt(s))throw new TypeError("Parameter trueExpr must be a Node");if(!Gt(u))throw new TypeError("Parameter falseExpr must be a Node");this.condition=i,this.trueExpr=s,this.falseExpr=u}get type(){return ud}get isConditionalNode(){return!0}_compile(i,s){var u=this.condition._compile(i,s),l=this.trueExpr._compile(i,s),o=this.falseExpr._compile(i,s);return function(d,m,h){return r(u(d,m,h))?l(d,m,h):o(d,m,h)}}forEach(i){i(this.condition,"condition",this),i(this.trueExpr,"trueExpr",this),i(this.falseExpr,"falseExpr",this)}map(i){return new n(this._ifNode(i(this.condition,"condition",this)),this._ifNode(i(this.trueExpr,"trueExpr",this)),this._ifNode(i(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=Xt(this,s,i&&i.implicit),l=this.condition.toString(i),o=Xt(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||o!==null&&o<=u)&&(l="("+l+")");var c=this.trueExpr.toString(i),d=Xt(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=u)&&(c="("+c+")");var m=this.falseExpr.toString(i),h=Xt(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=u)&&(m="("+m+")"),l+" ? "+c+" : "+m}toJSON(){return{mathjs:ud,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(i){return new n(i.condition,i.trueExpr,i.falseExpr)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=Xt(this,s,i&&i.implicit),l=this.condition.toHTML(i),o=Xt(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||o!==null&&o<=u)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(i),d=Xt(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=u)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var m=this.falseExpr.toHTML(i),h=Xt(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=u)&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+m}_toTex(i){return"\\begin{cases} {"+this.trueExpr.toTex(i)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(i)+"}\\\\{"+this.falseExpr.toTex(i)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Ir(n,"name",ud),n},{isClass:!0,isNode:!0}),$g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lQ={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},cQ={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},fQ=function(e,r){return $g({},e,r)},dQ=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.preserveFormatting,n=r===void 0?!1:r,a=e.escapeMapFn,i=a===void 0?fQ:a,s=String(t),u="",l=i($g({},lQ),n?$g({},cQ):{}),o=Object.keys(l),c=function(){var m=!1;o.forEach(function(h,p){m||s.length>=h.length&&s.slice(0,h.length)===h&&(u+=l[o[p]],s=s.slice(h.length,s.length),m=!0)}),m||(u+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return u};const mQ=Km(dQ);var Lg={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Ct={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},XE={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Ct.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Ct.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Ct.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Ct.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Ct.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Ct.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Ct.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Ct.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Ct.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Ct.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Ct.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Ct.bitAnd,"${args[1]}\\right)")},bitNot:{1:Ct.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Ct.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Ct.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Ct.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Ct.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Ct.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Ct.and,"${args[1]}\\right)")},not:{1:Ct.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Ct.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Ct.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Ct.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Ct.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Ct.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Ct.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Ct.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Ct.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Ct.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Ct.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Ct.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Ct.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Ct.to,"${args[1]}\\right)")},numeric:function(e,r){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Lg.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},hQ="\\mathrm{${name}}\\left(${args}\\right)",KE={deg:"^\\circ"};function zg(t){return mQ(t,{preserveFormatting:!0})}function D4(t,e){return e=typeof e>"u"?!1:e,e?Ge(KE,t)?KE[t]:"\\mathrm{"+zg(t)+"}":Ge(Lg,t)?Lg[t]:zg(t)}var ld="ConstantNode",pQ=["Node"],vQ=q(ld,pQ,t=>{var{Node:e}=t;class r extends e{constructor(a){super(),this.value=a}get type(){return ld}get isConstantNode(){return!0}_compile(a,i){var s=this.value;return function(){return s}}forEach(a){}map(a){return this.clone()}clone(){return new r(this.value)}_toString(a){return vt(this.value,a)}_toHTML(a){var i=this._toString(a);switch(Kt(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+i+"</span>";case"string":return'<span class="math-string">'+i+"</span>";case"boolean":return'<span class="math-boolean">'+i+"</span>";case"null":return'<span class="math-null-symbol">'+i+"</span>";case"undefined":return'<span class="math-undefined">'+i+"</span>";default:return'<span class="math-symbol">'+i+"</span>"}}toJSON(){return{mathjs:ld,value:this.value}}static fromJSON(a){return new r(a.value)}_toTex(a){var i=this._toString(a),s=Kt(this.value);switch(s){case"string":return"\\mathtt{"+zg(i)+"}";case"number":case"BigNumber":{var u=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!u)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=i.toLowerCase().indexOf("e");return l!==-1?i.substring(0,l)+"\\cdot10^{"+i.substring(l+1)+"}":i}case"bigint":return i.toString();case"Fraction":return this.value.toLatex();default:return i}}}return Ir(r,"name",ld),r},{isClass:!0,isNode:!0}),cd="FunctionAssignmentNode",gQ=["typed","Node"],yQ=q(cd,gQ,t=>{var{typed:e,Node:r}=t;function n(i,s,u){var l=Xt(i,s,u),o=Xt(i.expr,s,u);return s==="all"||o!==null&&o<=l}class a extends r{constructor(s,u,l){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(u))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Gt(l))throw new TypeError('Node expected for parameter "expr"');if(S4.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var o=new Set;for(var c of u){var d=typeof c=="string"?c:c.name;if(o.has(d))throw new Error('Duplicate parameter name "'.concat(d,'"'));o.add(d)}this.name=s,this.params=u.map(function(m){return m&&m.name||m}),this.types=u.map(function(m){return m&&m.type||"any"}),this.expr=l}get type(){return cd}get isFunctionAssignmentNode(){return!0}_compile(s,u){var l=Object.create(u);oM(this.params,function(v){l[v]=!0});var o=this.expr,c=o._compile(s,l),d=this.name,m=this.params,h=XN(this.types,","),p=d+"("+XN(this.params,", ")+")";return function(C,N,A){var b={};b[h]=function(){for(var w=Object.create(N),x=0;x<m.length;x++)w[m[x]]=arguments[x];return c(C,w,A)};var g=e(d,b);return g.syntax=p,g.expr=o.toString(),C.set(d,g),g}}forEach(s){s(this.expr,"expr",this)}map(s){var u=this._ifNode(s(this.expr,"expr",this));return new a(this.name,this.params.slice(0),u)}clone(){return new a(this.name,this.params.slice(0),this.expr)}_toString(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toString(s);return n(this,u,s&&s.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var s=this.types;return{mathjs:cd,name:this.name,params:this.params.map(function(u,l){return{name:u,type:s[l]}}),expr:this.expr}}static fromJSON(s){return new a(s.name,s.params,s.expr)}_toHTML(s){for(var u=s&&s.parenthesis?s.parenthesis:"keep",l=[],o=0;o<this.params.length;o++)l.push('<span class="math-symbol math-parameter">'+ca(this.params[o])+"</span>");var c=this.expr.toHTML(s);return n(this,u,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ca(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toTex(s);return n(this,u,s&&s.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(D4).join(",")+"\\right)="+l}}return Ir(a,"name",cd),a},{isClass:!0,isNode:!0}),fd="IndexNode",xQ=["Node","size"],bQ=q(fd,xQ,t=>{var{Node:e,size:r}=t;class n extends e{constructor(i,s){if(super(),this.dimensions=i,this.dotNotation=s||!1,!Array.isArray(i)||!i.every(Gt))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return fd}get isIndexNode(){return!0}_compile(i,s){var u=cs(this.dimensions,function(o,c){var d=o.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(d){var m=Object.create(s);m.end=!0;var h=o._compile(i,m);return function(v,C,N){if(!Ze(N)&&!Qt(N)&&!xr(N))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Kt(N));var A=r(N),b=Object.create(C);return b.end=A[c],h(v,b,N)}}else return o._compile(i,s)}),l=Sn(i,"index");return function(c,d,m){var h=cs(u,function(p){return p(c,d,m)});return l(...h)}}forEach(i){for(var s=0;s<this.dimensions.length;s++)i(this.dimensions[s],"dimensions["+s+"]",this)}map(i){for(var s=[],u=0;u<this.dimensions.length;u++)s[u]=this._ifNode(i(this.dimensions[u],"dimensions["+u+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&_t(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(i){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:fd,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(i){return new n(i.dimensions,i.dotNotation)}_toHTML(i){for(var s=[],u=0;u<this.dimensions.length;u++)s[u]=this.dimensions[u].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ca(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){var s=this.dimensions.map(function(u){return u.toTex(i)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return Ir(n,"name",fd),n},{isClass:!0,isNode:!0}),dd="ObjectNode",wQ=["Node"],NQ=q(dd,wQ,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),this.properties=a||{},a&&(typeof a!="object"||!Object.keys(a).every(function(i){return Gt(a[i])})))throw new TypeError("Object containing Nodes expected")}get type(){return dd}get isObjectNode(){return!0}_compile(a,i){var s={};for(var u in this.properties)if(Ge(this.properties,u)){var l=fu(u),o=JSON.parse(l),c=Sn(this.properties,u);s[o]=c._compile(a,i)}return function(m,h,p){var v={};for(var C in s)Ge(s,C)&&(v[C]=s[C](m,h,p));return v}}forEach(a){for(var i in this.properties)Ge(this.properties,i)&&a(this.properties[i],"properties["+fu(i)+"]",this)}map(a){var i={};for(var s in this.properties)Ge(this.properties,s)&&(i[s]=this._ifNode(a(this.properties[s],"properties["+fu(s)+"]",this)));return new r(i)}clone(){var a={};for(var i in this.properties)Ge(this.properties,i)&&(a[i]=this.properties[i]);return new r(a)}_toString(a){var i=[];for(var s in this.properties)Ge(this.properties,s)&&i.push(fu(s)+": "+this.properties[s].toString(a));return"{"+i.join(", ")+"}"}toJSON(){return{mathjs:dd,properties:this.properties}}static fromJSON(a){return new r(a.properties)}_toHTML(a){var i=[];for(var s in this.properties)Ge(this.properties,s)&&i.push('<span class="math-symbol math-property">'+ca(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(a));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(a){var i=[];for(var s in this.properties)Ge(this.properties,s)&&i.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(a)+"\\\\");var u="\\left\\{\\begin{array}{ll}"+i.join(`
`)+"\\end{array}\\right\\}";return u}}return Ir(r,"name",dd),r},{isClass:!0,isNode:!0});function Wl(t,e){return new P3(t,new Th(e),new Set(Object.keys(e)))}var md="OperatorNode",_Q=["Node"],EQ=q(md,_Q,t=>{var{Node:e}=t;function r(i,s){var u=i;if(s==="auto")for(;Ei(u);)u=u.content;return _t(u)?!0:wr(u)?r(u.args[0],s):!1}function n(i,s,u,l,o){var c=Xt(i,s,u),d=kl(i,s);if(s==="all"||l.length>2&&i.getIdentifier()!=="OperatorNode:add"&&i.getIdentifier()!=="OperatorNode:multiply")return l.map(function(T){switch(T.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var m;switch(l.length){case 0:m=[];break;case 1:{var h=Xt(l[0],s,u,i);if(o&&h!==null){var p,v;if(s==="keep"?(p=l[0].getIdentifier(),v=i.getIdentifier()):(p=l[0].getContent().getIdentifier(),v=i.getContent().getIdentifier()),Sa[c][v].latexLeftParens===!1){m=[!1];break}if(Sa[h][p].latexParens===!1){m=[!1];break}}if(h===null){m=[!1];break}if(h<=c){m=[!0];break}m=[!1]}break;case 2:{var C,N=Xt(l[0],s,u,i),A=tv(i,l[0],s);N===null?C=!1:N===c&&d==="right"&&!A||N<c?C=!0:C=!1;var b,g=Xt(l[1],s,u,i),w=tv(i,l[1],s);if(g===null?b=!1:g===c&&d==="left"&&!w||g<c?b=!0:b=!1,o){var x,_,E;s==="keep"?(x=i.getIdentifier(),_=i.args[0].getIdentifier(),E=i.args[1].getIdentifier()):(x=i.getContent().getIdentifier(),_=i.args[0].getContent().getIdentifier(),E=i.args[1].getContent().getIdentifier()),N!==null&&(Sa[c][x].latexLeftParens===!1&&(C=!1),Sa[N][_].latexParens===!1&&(C=!1)),g!==null&&(Sa[c][x].latexRightParens===!1&&(b=!1),Sa[g][E].latexParens===!1&&(b=!1))}m=[C,b]}break;default:(i.getIdentifier()==="OperatorNode:add"||i.getIdentifier()==="OperatorNode:multiply")&&(m=l.map(function(T){var M=Xt(T,s,u,i),I=tv(i,T,s),P=kl(T,s);return M===null?!1:c===M&&d===P&&!I?!0:M<c}));break}if(l.length>=2&&i.getIdentifier()==="OperatorNode:multiply"&&i.implicit&&s!=="all"&&u==="hide")for(var D=1;D<m.length;++D)r(l[D],s)&&!m[D-1]&&(s!=="keep"||!Ei(l[D-1]))&&(m[D]=!0);return m}class a extends e{constructor(s,u,l,o,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof u!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(Gt))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=o===!0,this.isPercentage=c===!0,this.op=s,this.fn=u,this.args=l||[]}get type(){return md}get isOperatorNode(){return!0}_compile(s,u){if(typeof this.fn!="string"||!Ty(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=Sn(s,this.fn),o=cs(this.args,function(p){return p._compile(s,u)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(v,C,N){return l(c,s,Wl(v,C))}}else if(o.length===1){var d=o[0];return function(v,C,N){return l(d(v,C,N))}}else if(o.length===2){var m=o[0],h=o[1];return function(v,C,N){return l(m(v,C,N),h(v,C,N))}}else return function(v,C,N){return l.apply(null,cs(o,function(A){return A(v,C,N)}))}}forEach(s){for(var u=0;u<this.args.length;u++)s(this.args[u],"args["+u+"]",this)}map(s){for(var u=[],l=0;l<this.args.length;l++)u[l]=this._ifNode(s(this.args[l],"args["+l+"]",this));return new a(this.op,this.fn,u,this.implicit,this.isPercentage)}clone(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,u,l,o,!1);if(o.length===1){var d=kl(this,u),m=o[0].toString(s);c[0]&&(m="("+m+")");var h=/[a-zA-Z]+/.test(this.op);return d==="right"?this.op+(h?" ":"")+m:d==="left"?m+(h?" ":"")+this.op:m+this.op}else if(o.length===2){var p=o[0].toString(s),v=o[1].toString(s);return c[0]&&(p="("+p+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+v:p+" "+this.op+" "+v}else if(o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var C=o.map(function(N,A){return N=N.toString(s),c[A]&&(N="("+N+")"),N});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?C.join(" "):C.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:md,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new a(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,u,l,o,!1);if(o.length===1){var d=kl(this,u),m=o[0].toHTML(s);return c[0]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),d==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ca(this.op)+"</span>"+m:m+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ca(this.op)+"</span>"}else if(o.length===2){var h=o[0].toHTML(s),p=o[1].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ca(this.op)+"</span>"+p}else{var v=o.map(function(C,N){return C=C.toHTML(s),c[N]&&(C='<span class="math-parenthesis math-round-parenthesis">(</span>'+C+'<span class="math-parenthesis math-round-parenthesis">)</span>'),C});return o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ca(this.op)+"</span>"):'<span class="math-function">'+ca(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,u,l,o,!0),d=Ct[this.fn];if(d=typeof d>"u"?this.op:d,o.length===1){var m=kl(this,u),h=o[0].toTex(s);return c[0]&&(h="\\left(".concat(h,"\\right)")),m==="right"?d+h:h+d}else if(o.length===2){var p=o[0],v=p.toTex(s);c[0]&&(v="\\left(".concat(v,"\\right)"));var C=o[1],N=C.toTex(s);c[1]&&(N="\\left(".concat(N,"\\right)"));var A;switch(u==="keep"?A=p.getIdentifier():A=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return d+"{"+v+"}{"+N+"}";case"OperatorNode:pow":switch(v="{"+v+"}",N="{"+N+"}",A){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return v+"~"+N}return v+d+N}else if(o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=o.map(function(g,w){return g=g.toTex(s),c[w]&&(g="\\left(".concat(g,"\\right)")),g});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(d)}else return"\\mathrm{"+this.fn+"}\\left("+o.map(function(g){return g.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Ir(a,"name",md),a},{isClass:!0,isNode:!0}),hd="ParenthesisNode",SQ=["Node"],AQ=q(hd,SQ,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),!Gt(a))throw new TypeError('Node expected for parameter "content"');this.content=a}get type(){return hd}get isParenthesisNode(){return!0}_compile(a,i){return this.content._compile(a,i)}getContent(){return this.content.getContent()}forEach(a){a(this.content,"content",this)}map(a){var i=a(this.content,"content",this);return new r(i)}clone(){return new r(this.content)}_toString(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"("+this.content.toString(a)+")":this.content.toString(a)}toJSON(){return{mathjs:hd,content:this.content}}static fromJSON(a){return new r(a.content)}_toHTML(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(a)}_toTex(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"\\left(".concat(this.content.toTex(a),"\\right)"):this.content.toTex(a)}}return Ir(r,"name",hd),r},{isClass:!0,isNode:!0}),pd="RangeNode",DQ=["Node"],CQ=q(pd,DQ,t=>{var{Node:e}=t;function r(a,i,s){var u=Xt(a,i,s),l={},o=Xt(a.start,i,s);if(l.start=o!==null&&o<=u||i==="all",a.step){var c=Xt(a.step,i,s);l.step=c!==null&&c<=u||i==="all"}var d=Xt(a.end,i,s);return l.end=d!==null&&d<=u||i==="all",l}class n extends e{constructor(i,s,u){if(super(),!Gt(i))throw new TypeError("Node expected");if(!Gt(s))throw new TypeError("Node expected");if(u&&!Gt(u))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=i,this.end=s,this.step=u||null}get type(){return pd}get isRangeNode(){return!0}needsEnd(){var i=this.filter(function(s){return Xr(s)&&s.name==="end"});return i.length>0}_compile(i,s){var u=i.range,l=this.start._compile(i,s),o=this.end._compile(i,s);if(this.step){var c=this.step._compile(i,s);return function(m,h,p){return u(l(m,h,p),o(m,h,p),c(m,h,p))}}else return function(m,h,p){return u(l(m,h,p),o(m,h,p))}}forEach(i){i(this.start,"start",this),i(this.end,"end",this),this.step&&i(this.step,"step",this)}map(i){return new n(this._ifNode(i(this.start,"start",this)),this._ifNode(i(this.end,"end",this)),this.step&&this._ifNode(i(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=r(this,s,i&&i.implicit),l,o=this.start.toString(i);if(u.start&&(o="("+o+")"),l=o,this.step){var c=this.step.toString(i);u.step&&(c="("+c+")"),l+=":"+c}var d=this.end.toString(i);return u.end&&(d="("+d+")"),l+=":"+d,l}toJSON(){return{mathjs:pd,start:this.start,end:this.end,step:this.step}}static fromJSON(i){return new n(i.start,i.end,i.step)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=r(this,s,i&&i.implicit),l,o=this.start.toHTML(i);if(u.start&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=o,this.step){var c=this.step.toHTML(i);u.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var d=this.end.toHTML(i);return u.end&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+d,l}_toTex(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=r(this,s,i&&i.implicit),l=this.start.toTex(i);if(u.start&&(l="\\left(".concat(l,"\\right)")),this.step){var o=this.step.toTex(i);u.step&&(o="\\left(".concat(o,"\\right)")),l+=":"+o}var c=this.end.toTex(i);return u.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return Ir(n,"name",pd),n},{isClass:!0,isNode:!0}),vd="RelationalNode",TQ=["Node"],MQ=q(vd,TQ,t=>{var{Node:e}=t,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(i,s){if(super(),!Array.isArray(i))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(i.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=i,this.params=s}get type(){return vd}get isRelationalNode(){return!0}_compile(i,s){var u=this,l=this.params.map(o=>o._compile(i,s));return function(c,d,m){for(var h,p=l[0](c,d,m),v=0;v<u.conditionals.length;v++){h=p,p=l[v+1](c,d,m);var C=Sn(i,u.conditionals[v]);if(!C(h,p))return!1}return!0}}forEach(i){this.params.forEach((s,u)=>i(s,"params["+u+"]",this),this)}map(i){return new n(this.conditionals.slice(),this.params.map((s,u)=>this._ifNode(i(s,"params["+u+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",u=Xt(this,s,i&&i.implicit),l=this.params.map(function(d,m){var h=Xt(d,s,i&&i.implicit);return s==="all"||h!==null&&h<=u?"("+d.toString(i)+")":d.toString(i)}),o=l[0],c=0;c<this.conditionals.length;c++)o+=" "+r[this.conditionals[c]],o+=" "+l[c+1];return o}toJSON(){return{mathjs:vd,conditionals:this.conditionals,params:this.params}}static fromJSON(i){return new n(i.conditionals,i.params)}_toHTML(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",u=Xt(this,s,i&&i.implicit),l=this.params.map(function(d,m){var h=Xt(d,s,i&&i.implicit);return s==="all"||h!==null&&h<=u?'<span class="math-parenthesis math-round-parenthesis">(</span>'+d.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':d.toHTML(i)}),o=l[0],c=0;c<this.conditionals.length;c++)o+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ca(r[this.conditionals[c]])+"</span>"+l[c+1];return o}_toTex(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",u=Xt(this,s,i&&i.implicit),l=this.params.map(function(d,m){var h=Xt(d,s,i&&i.implicit);return s==="all"||h!==null&&h<=u?"\\left("+d.toTex(i)+"\right)":d.toTex(i)}),o=l[0],c=0;c<this.conditionals.length;c++)o+=Ct[this.conditionals[c]]+l[c+1];return o}}return Ir(n,"name",vd),n},{isClass:!0,isNode:!0}),IQ="SymbolNode",PQ=["math","?Unit","Node"],FQ=q(IQ,PQ,t=>{var{math:e,Unit:r,Node:n}=t;function a(s){return r?r.isValuelessUnit(s):!1}class i extends n{constructor(u){if(super(),typeof u!="string")throw new TypeError('String expected for parameter "name"');this.name=u}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(u,l){var o=this.name;if(l[o]===!0)return function(d,m,h){return Sn(m,o)};if(o in u)return function(d,m,h){return d.has(o)?d.get(o):Sn(u,o)};var c=a(o);return function(d,m,h){return d.has(o)?d.get(o):c?new r(null,o):i.onUndefinedSymbol(o)}}forEach(u){}map(u){return this.clone()}static onUndefinedSymbol(u){throw new Error("Undefined symbol "+u)}clone(){return new i(this.name)}_toString(u){return this.name}_toHTML(u){var l=ca(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(u){return new i(u.name)}_toTex(u){var l=!1;typeof e[this.name]>"u"&&a(this.name)&&(l=!0);var o=D4(this.name,l);return o[0]==="\\"?o:" "+o}}return i},{isClass:!0,isNode:!0}),gd="FunctionNode",RQ=["math","Node","SymbolNode"],OQ=q(gd,RQ,t=>{var e,{math:r,Node:n,SymbolNode:a}=t,i=l=>vt(l,{truncate:78});function s(l,o,c){for(var d="",m=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,p;(p=m.exec(l))!==null;)if(d+=l.substring(h,p.index),h=p.index,p[0]==="$$")d+="$",h++;else{h+=p[0].length;var v=o[p[1]];if(!v)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof v){case"string":d+=v;break;case"object":if(Gt(v))d+=v.toTex(c);else if(Array.isArray(v))d+=v.map(function(C,N){if(Gt(C))return C.toTex(c);throw new TypeError("Template: "+p[1]+"["+N+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(Gt(v[p[2]]&&v[p[2]]))d+=v[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return d+=l.slice(h),d}class u extends n{constructor(o,c){if(super(),typeof o=="string"&&(o=new a(o)),!Gt(o))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Gt))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=o,this.args=c||[]}get name(){return this.fn.name||""}get type(){return gd}get isFunctionNode(){return!0}_compile(o,c){var d=this.args.map(E=>E._compile(o,c));if(Xr(this.fn)){var m=this.fn.name;if(c[m]){var N=this.args;return function(D,T,M){var I=Sn(T,m);if(typeof I!="function")throw new TypeError("Argument '".concat(m,"' was not a function; received: ").concat(i(I)));if(I.rawArgs)return I(N,o,Wl(D,T));var P=d.map(B=>B(D,T,M));return I.apply(I,P)}}else{var h=m in o?Sn(o,m):void 0,p=typeof h=="function"&&h.rawArgs===!0,v=E=>{var D;if(E.has(m))D=E.get(m);else if(m in o)D=Sn(o,m);else return u.onUndefinedFunction(m);if(typeof D=="function")return D;throw new TypeError("'".concat(m,`' is not a function; its value is:
  `).concat(i(D)))};if(p){var C=this.args;return function(D,T,M){var I=v(D);if(I.rawArgs===!0)return I(C,o,Wl(D,T));var P=d.map(B=>B(D,T,M));return I(...P)}}else switch(d.length){case 0:return function(D,T,M){var I=v(D);return I()};case 1:return function(D,T,M){var I=v(D),P=d[0];return I(P(D,T,M))};case 2:return function(D,T,M){var I=v(D),P=d[0],B=d[1];return I(P(D,T,M),B(D,T,M))};default:return function(D,T,M){var I=v(D),P=d.map(B=>B(D,T,M));return I(...P)}}}}else if(fo(this.fn)&&nl(this.fn.index)&&this.fn.index.isObjectProperty()){var A=this.fn.object._compile(o,c),b=this.fn.index.getObjectProperty(),g=this.args;return function(D,T,M){var I=A(D,T,M),P=ik(I,b);if(P!=null&&P.rawArgs)return P(g,o,Wl(D,T));var B=d.map($=>$(D,T,M));return P.apply(I,B)}}else{var w=this.fn.toString(),x=this.fn._compile(o,c),_=this.args;return function(D,T,M){var I=x(D,T,M);if(typeof I!="function")throw new TypeError("Expression '".concat(w,"' did not evaluate to a function; value is:")+`
  `.concat(i(I)));if(I.rawArgs)return I(_,o,Wl(D,T));var P=d.map(B=>B(D,T,M));return I.apply(I,P)}}}forEach(o){o(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)o(this.args[c],"args["+c+"]",this)}map(o){for(var c=this._ifNode(o(this.fn,"fn",this)),d=[],m=0;m<this.args.length;m++)d[m]=this._ifNode(o(this.args[m],"args["+m+"]",this));return new u(c,d)}clone(){return new u(this.fn,this.args.slice(0))}toString(o){var c,d=this.fn.toString(o);return o&&typeof o.handler=="object"&&Ge(o.handler,d)&&(c=o.handler[d](this,o)),typeof c<"u"?c:super.toString(o)}_toString(o){var c=this.args.map(function(m){return m.toString(o)}),d=nf(this.fn)?"("+this.fn.toString(o)+")":this.fn.toString(o);return d+"("+c.join(", ")+")"}toJSON(){return{mathjs:gd,fn:this.fn,args:this.args}}_toHTML(o){var c=this.args.map(function(d){return d.toHTML(o)});return'<span class="math-function">'+ca(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(o){var c;return o&&typeof o.handler=="object"&&Ge(o.handler,this.name)&&(c=o.handler[this.name](this,o)),typeof c<"u"?c:super.toTex(o)}_toTex(o){var c=this.args.map(function(h){return h.toTex(o)}),d;XE[this.name]&&(d=XE[this.name]),r[this.name]&&(typeof r[this.name].toTex=="function"||typeof r[this.name].toTex=="object"||typeof r[this.name].toTex=="string")&&(d=r[this.name].toTex);var m;switch(typeof d){case"function":m=d(this,o);break;case"string":m=s(d,this,o);break;case"object":switch(typeof d[c.length]){case"function":m=d[c.length](this,o);break;case"string":m=s(d[c.length],this,o);break}}return typeof m<"u"?m:s(hQ,this,o)}getIdentifier(){return this.type+":"+this.name}}return e=u,Ir(u,"name",gd),Ir(u,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),Ir(u,"fromJSON",function(l){return new e(l.fn,l.args)}),u},{isClass:!0,isNode:!0}),JE="parse",BQ=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],jQ=q(JE,BQ,t=>{var{typed:e,numeric:r,config:n,AccessorNode:a,ArrayNode:i,AssignmentNode:s,BlockNode:u,ConditionalNode:l,ConstantNode:o,FunctionAssignmentNode:c,FunctionNode:d,IndexNode:m,ObjectNode:h,OperatorNode:p,ParenthesisNode:v,RangeNode:C,RelationalNode:N,SymbolNode:A}=t,b=e(JE,{string:function(ae){return ie(ae,{})},"Array | Matrix":function(ae){return g(ae,{})},"string, Object":function(ae,pe){var Ce=pe.nodes!==void 0?pe.nodes:{};return ie(ae,Ce)},"Array | Matrix, Object":g});function g(O){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=ae.nodes!==void 0?ae.nodes:{};return ct(O,function(Ce){if(typeof Ce!="string")throw new TypeError("String expected");return ie(Ce,pe)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},x={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},_={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},D=["NaN","Infinity"],T={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function M(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function I(O,ae){return O.expression.substr(O.index,ae)}function P(O){return I(O,1)}function B(O){O.index++}function $(O){return O.expression.charAt(O.index-1)}function R(O){return O.expression.charAt(O.index+1)}function G(O){for(O.tokenType=w.NULL,O.token="",O.comment="";;){if(P(O)==="#")for(;P(O)!==`
`&&P(O)!=="";)O.comment+=P(O),B(O);if(b.isWhitespace(P(O),O.nestingLevel))B(O);else break}if(P(O)===""){O.tokenType=w.DELIMITER;return}if(P(O)===`
`&&!O.nestingLevel){O.tokenType=w.DELIMITER,O.token=P(O),B(O);return}var ae=P(O),pe=I(O,2),Ce=I(O,3);if(Ce.length===3&&x[Ce]){O.tokenType=w.DELIMITER,O.token=Ce,B(O),B(O),B(O);return}if(pe.length===2&&x[pe]){O.tokenType=w.DELIMITER,O.token=pe,B(O),B(O);return}if(x[ae]){O.tokenType=w.DELIMITER,O.token=ae,B(O);return}if(b.isDigitDot(ae)){O.tokenType=w.NUMBER;var We=I(O,2);if(We==="0b"||We==="0o"||We==="0x"){for(O.token+=P(O),B(O),O.token+=P(O),B(O);b.isAlpha(P(O),$(O),R(O))||b.isDigit(P(O));)O.token+=P(O),B(O);if(P(O)===".")for(O.token+=".",B(O);b.isAlpha(P(O),$(O),R(O))||b.isDigit(P(O));)O.token+=P(O),B(O);else if(P(O)==="i")for(O.token+="i",B(O);b.isDigit(P(O));)O.token+=P(O),B(O);return}if(P(O)==="."){if(O.token+=P(O),B(O),!b.isDigit(P(O))){O.tokenType=w.DELIMITER;return}}else{for(;b.isDigit(P(O));)O.token+=P(O),B(O);b.isDecimalMark(P(O),R(O))&&(O.token+=P(O),B(O))}for(;b.isDigit(P(O));)O.token+=P(O),B(O);if(P(O)==="E"||P(O)==="e"){if(b.isDigit(R(O))||R(O)==="-"||R(O)==="+"){if(O.token+=P(O),B(O),(P(O)==="+"||P(O)==="-")&&(O.token+=P(O),B(O)),!b.isDigit(P(O)))throw et(O,'Digit expected, got "'+P(O)+'"');for(;b.isDigit(P(O));)O.token+=P(O),B(O);if(b.isDecimalMark(P(O),R(O)))throw et(O,'Digit expected, got "'+P(O)+'"')}else if(b.isDecimalMark(R(O),O.expression.charAt(O.index+2)))throw B(O),et(O,'Digit expected, got "'+P(O)+'"')}return}if(b.isAlpha(P(O),$(O),R(O))){for(;b.isAlpha(P(O),$(O),R(O))||b.isDigit(P(O));)O.token+=P(O),B(O);Ge(_,O.token)?O.tokenType=w.DELIMITER:O.tokenType=w.SYMBOL;return}for(O.tokenType=w.UNKNOWN;P(O)!=="";)O.token+=P(O),B(O);throw et(O,'Syntax error in part "'+O.token+'"')}function L(O){do G(O);while(O.token===`
`)}function H(O){O.nestingLevel++}function Z(O){O.nestingLevel--}b.isAlpha=function(ae,pe,Ce){return b.isValidLatinOrGreek(ae)||b.isValidMathSymbol(ae,Ce)||b.isValidMathSymbol(pe,ae)},b.isValidLatinOrGreek=function(ae){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ae)},b.isValidMathSymbol=function(ae,pe){return/^[\uD835]$/.test(ae)&&/^[\uDC00-\uDFFF]$/.test(pe)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(pe)},b.isWhitespace=function(ae,pe){return ae===" "||ae==="	"||ae===" "||ae===`
`&&pe>0},b.isDecimalMark=function(ae,pe){return ae==="."&&pe!=="/"&&pe!=="*"&&pe!=="^"},b.isDigitDot=function(ae){return ae>="0"&&ae<="9"||ae==="."},b.isDigit=function(ae){return ae>="0"&&ae<="9"};function ie(O,ae){var pe=M();_r(pe,{expression:O,extraNodes:ae}),G(pe);var Ce=k(pe);if(pe.token!=="")throw pe.tokenType===w.DELIMITER?lr(pe,"Unexpected operator "+pe.token):et(pe,'Unexpected part "'+pe.token+'"');return Ce}function k(O){var ae,pe=[],Ce;for(O.token!==""&&O.token!==`
`&&O.token!==";"&&(ae=Y(O),O.comment&&(ae.comment=O.comment));O.token===`
`||O.token===";";)pe.length===0&&ae&&(Ce=O.token!==";",pe.push({node:ae,visible:Ce})),G(O),O.token!==`
`&&O.token!==";"&&O.token!==""&&(ae=Y(O),O.comment&&(ae.comment=O.comment),Ce=O.token!==";",pe.push({node:ae,visible:Ce}));return pe.length>0?new u(pe):(ae||(ae=new o(void 0),O.comment&&(ae.comment=O.comment)),ae)}function Y(O){var ae,pe,Ce,We,mt=V(O);if(O.token==="="){if(Xr(mt))return ae=mt.name,L(O),Ce=Y(O),new s(new A(ae),Ce);if(fo(mt))return L(O),Ce=Y(O),new s(mt.object,mt.index,Ce);if(bs(mt)&&Xr(mt.fn)&&(We=!0,pe=[],ae=mt.name,mt.args.forEach(function(Pr,ii){Xr(Pr)?pe[ii]=Pr.name:We=!1}),We))return L(O),Ce=Y(O),new c(ae,pe,Ce);throw et(O,"Invalid left hand side of assignment operator =")}return mt}function V(O){for(var ae=xe(O);O.token==="?";){var pe=O.conditionalLevel;O.conditionalLevel=O.nestingLevel,L(O);var Ce=ae,We=Y(O);if(O.token!==":")throw et(O,"False part of conditional expression expected");O.conditionalLevel=null,L(O);var mt=Y(O);ae=new l(Ce,We,mt),O.conditionalLevel=pe}return ae}function xe(O){for(var ae=le(O);O.token==="or";)L(O),ae=new p("or","or",[ae,le(O)]);return ae}function le(O){for(var ae=de(O);O.token==="xor";)L(O),ae=new p("xor","xor",[ae,de(O)]);return ae}function de(O){for(var ae=Q(O);O.token==="and";)L(O),ae=new p("and","and",[ae,Q(O)]);return ae}function Q(O){for(var ae=K(O);O.token==="|";)L(O),ae=new p("|","bitOr",[ae,K(O)]);return ae}function K(O){for(var ae=te(O);O.token==="^|";)L(O),ae=new p("^|","bitXor",[ae,te(O)]);return ae}function te(O){for(var ae=se(O);O.token==="&";)L(O),ae=new p("&","bitAnd",[ae,se(O)]);return ae}function se(O){for(var ae=[ue(O)],pe=[],Ce={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Ge(Ce,O.token);){var We={name:O.token,fn:Ce[O.token]};pe.push(We),L(O),ae.push(ue(O))}return ae.length===1?ae[0]:ae.length===2?new p(pe[0].name,pe[0].fn,ae):new N(pe.map(mt=>mt.fn),ae)}function ue(O){var ae,pe,Ce,We;ae=ve(O);for(var mt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Ge(mt,O.token);)pe=O.token,Ce=mt[pe],L(O),We=[ae,ve(O)],ae=new p(pe,Ce,We);return ae}function ve(O){var ae,pe,Ce,We;ae=he(O);for(var mt={to:"to",in:"to"};Ge(mt,O.token);)pe=O.token,Ce=mt[pe],L(O),pe==="in"&&"])},;".includes(O.token)?ae=new p("*","multiply",[ae,new A("in")],!0):(We=[ae,he(O)],ae=new p(pe,Ce,We));return ae}function he(O){var ae,pe=[];if(O.token===":"?ae=new o(1):ae=Me(O),O.token===":"&&O.conditionalLevel!==O.nestingLevel){for(pe.push(ae);O.token===":"&&pe.length<3;)L(O),O.token===")"||O.token==="]"||O.token===","||O.token===""?pe.push(new A("end")):pe.push(Me(O));pe.length===3?ae=new C(pe[0],pe[2],pe[1]):ae=new C(pe[0],pe[1])}return ae}function Me(O){var ae,pe,Ce,We;ae=$e(O);for(var mt={"+":"add","-":"subtract"};Ge(mt,O.token);){pe=O.token,Ce=mt[pe],L(O);var Pr=$e(O);Pr.isPercentage?We=[ae,new p("*","multiply",[ae,Pr])]:We=[ae,Pr],ae=new p(pe,Ce,We)}return ae}function $e(O){var ae,pe,Ce,We;ae=Ve(O),pe=ae;for(var mt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Ge(mt,O.token);)Ce=O.token,We=mt[Ce],L(O),pe=Ve(O),ae=new p(Ce,We,[ae,pe]);return ae}function Ve(O){var ae,pe;for(ae=Be(O),pe=ae;O.tokenType===w.SYMBOL||O.token==="in"&&_t(ae)||O.token==="in"&&wr(ae)&&ae.fn==="unaryMinus"&&_t(ae.args[0])||O.tokenType===w.NUMBER&&!_t(pe)&&(!wr(pe)||pe.op==="!")||O.token==="(";)pe=Be(O),ae=new p("*","multiply",[ae,pe],!0);return ae}function Be(O){for(var ae=Le(O),pe=ae,Ce=[];O.token==="/"&&wg(pe);)if(Ce.push(_r({},O)),L(O),O.tokenType===w.NUMBER)if(Ce.push(_r({},O)),L(O),O.tokenType===w.SYMBOL||O.token==="("||O.token==="in")_r(O,Ce.pop()),Ce.pop(),pe=Le(O),ae=new p("/","divide",[ae,pe]);else{Ce.pop(),_r(O,Ce.pop());break}else{_r(O,Ce.pop());break}return ae}function Le(O){var ae=W(O);if(O.token==="%"){var pe=_r({},O);L(O);try{W(O),_r(O,pe)}catch{ae=new p("/","divide",[ae,new o(100)],!1,!0)}}return ae}function W(O){var ae,pe,Ce,We={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Ge(We,O.token)?(Ce=We[O.token],ae=O.token,L(O),pe=[W(O)],new p(ae,Ce,pe)):re(O)}function re(O){var ae,pe,Ce,We;return ae=fe(O),(O.token==="^"||O.token===".^")&&(pe=O.token,Ce=pe==="^"?"pow":"dotPow",L(O),We=[ae,W(O)],ae=new p(pe,Ce,We)),ae}function fe(O){for(var ae=z(O);O.token==="??";)L(O),ae=new p("??","nullish",[ae,z(O)]);return ae}function z(O){var ae,pe,Ce,We;ae=J(O);for(var mt={"!":"factorial","'":"ctranspose"};Ge(mt,O.token);)pe=O.token,Ce=mt[pe],G(O),We=[ae],ae=new p(pe,Ce,We),ae=oe(O,ae);return ae}function J(O){var ae=[];if(O.tokenType===w.SYMBOL&&Ge(O.extraNodes,O.token)){var pe=O.extraNodes[O.token];if(G(O),O.token==="("){if(ae=[],H(O),G(O),O.token!==")")for(ae.push(Y(O));O.token===",";)G(O),ae.push(Y(O));if(O.token!==")")throw et(O,"Parenthesis ) expected");Z(O),G(O)}return new pe(ae)}return ne(O)}function ne(O){var ae,pe;return O.tokenType===w.SYMBOL||O.tokenType===w.DELIMITER&&O.token in _?(pe=O.token,G(O),Ge(E,pe)?ae=new o(E[pe]):D.includes(pe)?ae=new o(r(pe,"number")):ae=new A(pe),ae=oe(O,ae),ae):ce(O)}function oe(O,ae,pe){for(var Ce;O.token==="("||O.token==="["||O.token===".";)if(Ce=[],O.token==="(")if(Xr(ae)||fo(ae)){if(H(O),G(O),O.token!==")")for(Ce.push(Y(O));O.token===",";)G(O),Ce.push(Y(O));if(O.token!==")")throw et(O,"Parenthesis ) expected");Z(O),G(O),ae=new d(ae,Ce)}else return ae;else if(O.token==="["){if(H(O),G(O),O.token!=="]")for(Ce.push(Y(O));O.token===",";)G(O),Ce.push(Y(O));if(O.token!=="]")throw et(O,"Parenthesis ] expected");Z(O),G(O),ae=new a(ae,new m(Ce))}else{G(O);var We=O.tokenType===w.SYMBOL||O.tokenType===w.DELIMITER&&O.token in _;if(!We)throw et(O,"Property name expected after dot");Ce.push(new o(O.token)),G(O);var mt=!0;ae=new a(ae,new m(Ce,mt))}return ae}function ce(O){var ae,pe;return O.token==='"'||O.token==="'"?(pe=ge(O,O.token),ae=new o(pe),ae=oe(O,ae),ae):Ee(O)}function ge(O,ae){for(var pe="";P(O)!==""&&P(O)!==ae;)if(P(O)==="\\"){B(O);var Ce=P(O),We=T[Ce];if(We!==void 0)pe+=We,O.index+=1;else if(Ce==="u"){var mt=O.expression.slice(O.index+1,O.index+5);if(/^[0-9A-Fa-f]{4}$/.test(mt))pe+=String.fromCharCode(parseInt(mt,16)),O.index+=5;else throw et(O,"Invalid unicode character \\u".concat(mt))}else throw et(O,"Bad escape character \\".concat(Ce))}else pe+=P(O),B(O);if(G(O),O.token!==ae)throw et(O,"End of string ".concat(ae," expected"));return G(O),pe}function Ee(O){var ae,pe,Ce,We;if(O.token==="["){if(H(O),G(O),O.token!=="]"){var mt=Ae(O);if(O.token===";"){for(Ce=1,pe=[mt];O.token===";";)G(O),O.token!=="]"&&(pe[Ce]=Ae(O),Ce++);if(O.token!=="]")throw et(O,"End of matrix ] expected");Z(O),G(O),We=pe[0].items.length;for(var Pr=1;Pr<Ce;Pr++)if(pe[Pr].items.length!==We)throw lr(O,"Column dimensions mismatch ("+pe[Pr].items.length+" !== "+We+")");ae=new i(pe)}else{if(O.token!=="]")throw et(O,"End of matrix ] expected");Z(O),G(O),ae=mt}}else Z(O),G(O),ae=new i([]);return oe(O,ae)}return Ie(O)}function Ae(O){for(var ae=[Y(O)],pe=1;O.token===",";)G(O),O.token!=="]"&&O.token!==";"&&(ae[pe]=Y(O),pe++);return new i(ae)}function Ie(O){if(O.token==="{"){H(O);var ae,pe={};do if(G(O),O.token!=="}"){if(O.token==='"'||O.token==="'")ae=ge(O,O.token);else if(O.tokenType===w.SYMBOL||O.tokenType===w.DELIMITER&&O.token in _)ae=O.token,G(O);else throw et(O,"Symbol or string expected as object key");if(O.token!==":")throw et(O,"Colon : expected after object key");G(O),pe[ae]=Y(O)}while(O.token===",");if(O.token!=="}")throw et(O,"Comma , or bracket } expected after object value");Z(O),G(O);var Ce=new h(pe);return Ce=oe(O,Ce),Ce}return De(O)}function De(O){var ae;if(O.tokenType===w.NUMBER){ae=O.token,G(O);var pe=Ds(ae,n),Ce=r(ae,pe);return new o(Ce)}return pt(O)}function pt(O){var ae;if(O.token==="("){if(H(O),G(O),ae=Y(O),O.token!==")")throw et(O,"Parenthesis ) expected");return Z(O),G(O),ae=new v(ae),ae=oe(O,ae),ae}return yt(O)}function yt(O){throw O.token===""?et(O,"Unexpected end of expression"):et(O,"Value expected")}function qt(O){return O.index-O.token.length+1}function et(O,ae){var pe=qt(O),Ce=new SyntaxError(ae+" (char "+pe+")");return Ce.char=pe,Ce}function lr(O,ae){var pe=qt(O),Ce=new SyntaxError(ae+" (char "+pe+")");return Ce.char=pe,Ce}return e.addConversion({from:"string",to:"Node",convert:b}),b}),YE="compile",kQ=["typed","parse"],$Q=q(YE,kQ,t=>{var{typed:e,parse:r}=t;return e(YE,{string:function(a){return r(a).compile()},"Array | Matrix":function(a){return ct(a,function(i){return r(i).compile()})}})}),ZE="evaluate",LQ=["typed","parse"],zQ=q(ZE,LQ,t=>{var{typed:e,parse:r}=t;return e(ZE,{string:function(a){var i=Lc();return r(a).compile().evaluate(i)},"string, Map | Object":function(a,i){return r(a).compile().evaluate(i)},"Array | Matrix":function(a){var i=Lc();return ct(a,function(s){return r(s).compile().evaluate(i)})},"Array | Matrix, Map | Object":function(a,i){return ct(a,function(s){return r(s).compile().evaluate(i)})}})}),VQ="Parser",UQ=["evaluate","parse"],qQ=q(VQ,UQ,t=>{var{evaluate:e,parse:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Lc(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(i){return e(i,this.scope)},n.prototype.get=function(i){if(this.scope.has(i))return this.scope.get(i)},n.prototype.getAll=function(){return lk(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function a(i){if(i.length===0)return!1;for(var s=0;s<i.length;s++){var u=i.charAt(s-1),l=i.charAt(s),o=i.charAt(s+1),c=r.isAlpha(l,u,o)||s>0&&r.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(i,s){if(!a(i))throw new Error("Invalid variable name: '".concat(i,"'. Variable names must follow the specified rules."));return this.scope.set(i,s),s},n.prototype.remove=function(i){this.scope.delete(i)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var i={mathjs:"Parser",variables:{},functions:{}};for(var[s,u]of this.scope)if(O3(u)){if(!HQ(u))throw new Error("Cannot serialize external function ".concat(s));i.functions[s]="".concat(u.syntax," = ").concat(u.expr)}else i.variables[s]=u;return i},n.fromJSON=function(i){var s=new n;return Object.entries(i.variables).forEach(u=>{var[l,o]=u;return s.set(l,o)}),Object.entries(i.functions).forEach(u=>{var[l,o]=u;return s.evaluate(o)}),s},n},{isClass:!0});function HQ(t){return typeof t=="function"&&typeof t.syntax=="string"&&typeof t.expr=="string"}var eS="parser",GQ=["typed","Parser"],WQ=q(eS,GQ,t=>{var{typed:e,Parser:r}=t;return e(eS,{"":function(){return new r}})}),tS="lup",QQ=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],XQ=q(tS,QQ,t=>{var{typed:e,matrix:r,abs:n,addScalar:a,divideScalar:i,multiplyScalar:s,subtractScalar:u,larger:l,equalScalar:o,unaryMinus:c,DenseMatrix:d,SparseMatrix:m,Spa:h}=t;return e(tS,{DenseMatrix:function(N){return p(N)},SparseMatrix:function(N){return v(N)},Array:function(N){var A=r(N),b=p(A);return{L:b.L.valueOf(),U:b.U.valueOf(),p:b.p}}});function p(C){var N=C._size[0],A=C._size[1],b=Math.min(N,A),g=at(C._data),w=[],x=[N,b],_=[],E=[b,A],D,T,M,I=[];for(D=0;D<N;D++)I[D]=D;for(T=0;T<A;T++){if(T>0)for(D=0;D<N;D++){var P=Math.min(D,T),B=0;for(M=0;M<P;M++)B=a(B,s(g[D][M],g[M][T]));g[D][T]=u(g[D][T],B)}var $=T,R=0,G=0;for(D=T;D<N;D++){var L=g[D][T],H=n(L);l(H,R)&&($=D,R=H,G=L)}if(T!==$&&(I[T]=[I[$],I[$]=I[T]][0],d._swapRows(T,$,g)),T<N)for(D=T+1;D<N;D++){var Z=g[D][T];o(Z,0)||(g[D][T]=i(g[D][T],G))}}for(T=0;T<A;T++)for(D=0;D<N;D++){if(T===0&&(D<A&&(_[D]=[]),w[D]=[]),D<T){D<A&&(_[D][T]=g[D][T]),T<N&&(w[D][T]=0);continue}if(D===T){D<A&&(_[D][T]=g[D][T]),T<N&&(w[D][T]=1);continue}D<A&&(_[D][T]=0),T<N&&(w[D][T]=g[D][T])}var ie=new d({data:w,size:x}),k=new d({data:_,size:E}),Y=[];for(D=0,b=I.length;D<b;D++)Y[I[D]]=D;return{L:ie,U:k,p:Y,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(C){var N=C._size[0],A=C._size[1],b=Math.min(N,A),g=C._values,w=C._index,x=C._ptr,_=[],E=[],D=[],T=[N,b],M=[],I=[],P=[],B=[b,A],$,R,G,L=[],H=[];for($=0;$<N;$++)L[$]=$,H[$]=$;var Z=function(Y,V){var xe=H[Y],le=H[V];L[xe]=V,L[le]=Y,H[Y]=le,H[V]=xe},ie=function(){var Y=new h;R<N&&(D.push(_.length),_.push(1),E.push(R)),P.push(M.length);var V=x[R],xe=x[R+1];for(G=V;G<xe;G++)$=w[G],Y.set(L[$],g[G]);R>0&&Y.forEach(0,R-1,function(K,te){m._forEachRow(K,_,E,D,function(se,ue){se>K&&Y.accumulate(se,c(s(ue,te)))})});var le=R,de=Y.get(R),Q=n(de);Y.forEach(R+1,N-1,function(K,te){var se=n(te);l(se,Q)&&(le=K,Q=se,de=te)}),R!==le&&(m._swapRows(R,le,T[1],_,E,D),m._swapRows(R,le,B[1],M,I,P),Y.swap(R,le),Z(R,le)),Y.forEach(0,N-1,function(K,te){K<=R?(M.push(te),I.push(K)):(te=i(te,de),o(te,0)||(_.push(te),E.push(K)))})};for(R=0;R<A;R++)ie();return P.push(M.length),D.push(_.length),{L:new m({values:_,index:E,ptr:D,size:T}),U:new m({values:M,index:I,ptr:P,size:B}),p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),rS="qr",KQ=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],JQ=q(rS,KQ,t=>{var{typed:e,matrix:r,zeros:n,identity:a,isZero:i,equal:s,sign:u,sqrt:l,conj:o,unaryMinus:c,addScalar:d,divideScalar:m,multiplyScalar:h,subtractScalar:p,complex:v}=t;return _r(e(rS,{DenseMatrix:function(g){return N(g)},SparseMatrix:function(g){return A()},Array:function(g){var w=r(g),x=N(w);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:C});function C(b){var g=b._size[0],w=b._size[1],x=a([g],"dense"),_=x._data,E=b.clone(),D=E._data,T,M,I,P=n([g],"");for(I=0;I<Math.min(w,g);++I){var B=D[I][I],$=c(s(B,0)?1:u(B)),R=o($),G=0;for(T=I;T<g;T++)G=d(G,h(D[T][I],o(D[T][I])));var L=h($,l(G));if(!i(L)){var H=p(B,L);for(P[I]=1,T=I+1;T<g;T++)P[T]=m(D[T][I],H);var Z=c(o(m(H,L))),ie=void 0;for(M=I;M<w;M++){for(ie=0,T=I;T<g;T++)ie=d(ie,h(o(P[T]),D[T][M]));for(ie=h(ie,Z),T=I;T<g;T++)D[T][M]=h(p(D[T][M],h(P[T],ie)),R)}for(T=0;T<g;T++){for(ie=0,M=I;M<g;M++)ie=d(ie,h(_[T][M],P[M]));for(ie=h(ie,Z),M=I;M<g;++M)_[T][M]=m(p(_[T][M],h(ie,o(P[M]))),R)}}}return{Q:x,R:E,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function N(b){var g=C(b),w=g.R._data;if(b._data.length>0)for(var x=w[0][0].type==="Complex"?v(0):0,_=0;_<w.length;++_)for(var E=0;E<_&&E<(w[0]||[]).length;++E)w[_][E]=x;return g}function A(b){throw new Error("qr not implemented for sparse matrices yet")}});function YQ(t,e,r,n){t._values;for(var a=t._index,i=t._ptr,s=t._size,u=t._datatype,l=s[0],o=s[1],c=null,d=[],m=[],h=0,p=0;p<o;p++){m[p]=h;for(var v=r?r[p]:p,C=i[v],N=i[v+1],A=C;A<N;A++){var b=a[A];d[h]=b,h++}}return m[o]=h,t.createSparseMatrix({values:c,index:d,ptr:m,size:[l,o],datatype:u})}function C4(t,e,r,n,a,i,s){var u=0;for(r[s]=t;u>=0;){var l=r[s+u],o=r[n+l];o===-1?(u--,i[e++]=l):(r[n+l]=r[a+o],++u,r[s+u]=o)}return e}function ZQ(t,e){if(!t)return null;var r=0,n,a=[],i=[],s=0,u=e,l=2*e;for(n=0;n<e;n++)i[s+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(i[u+n]=i[s+t[n]],i[s+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=C4(n,r,i,s,u,a,l));return a}function eX(t,e){if(!t)return null;var r=t._index,n=t._ptr,a=t._size,i=a[0],s=a[1],u=[],l=[],o=0,c=s,d,m;for(d=0;d<i;d++)l[c+d]=-1;for(var h=0;h<s;h++){u[h]=-1,l[o+h]=-1;for(var p=n[h],v=n[h+1],C=p;C<v;C++){var N=r[C];for(d=l[c+N];d!==-1&&d<h;d=m)m=l[o+d],l[o+d]=h,m===-1&&(u[d]=h);l[c+N]=h}}return u}function tX(t,e,r){for(var n=t._values,a=t._index,i=t._ptr,s=t._size,u=s[1],l=0,o=0;o<u;o++){var c=i[o];for(i[o]=l;c<i[o+1];c++)e(a[c],o,n?n[c]:1,r)&&(a[l]=a[c],n&&(n[l]=n[c]),l++)}return i[u]=l,a.splice(l,a.length-l),n&&n.splice(l,n.length-l),l}function zi(t){return-t-2}var rX="csAmd",nX=["add","multiply","transpose"],aX=q(rX,nX,t=>{var{add:e,multiply:r,transpose:n}=t;return function(c,d){if(!d||c<=0||c>3)return null;var m=d._size,h=m[0],p=m[1],v=0,C=Math.max(16,10*Math.sqrt(p));C=Math.min(p-2,C);var N=a(c,d,h,p,C);tX(N,l,null);for(var A=N._index,b=N._ptr,g=b[p],w=[],x=[],_=0,E=p+1,D=2*(p+1),T=3*(p+1),M=4*(p+1),I=5*(p+1),P=6*(p+1),B=7*(p+1),$=w,R=i(p,b,x,_,T,$,D,B,E,P,M,I),G=s(p,b,x,I,M,P,C,E,T,$,D),L=0,H,Z,ie,k,Y,V,xe,le,de,Q,K,te,se,ue,ve,he;G<p;){for(ie=-1;L<p&&(ie=x[T+L])===-1;L++);x[D+ie]!==-1&&($[x[D+ie]]=-1),x[T+L]=x[D+ie];var Me=x[M+ie],$e=x[E+ie];G+=$e;var Ve=0;x[E+ie]=-$e;var Be=b[ie],Le=Me===0?Be:g,W=Le;for(k=1;k<=Me+1;k++){for(k>Me?(V=ie,xe=Be,le=x[_+ie]-Me):(V=A[Be++],xe=b[V],le=x[_+V]),Y=1;Y<=le;Y++)H=A[xe++],!((de=x[E+H])<=0)&&(Ve+=de,x[E+H]=-de,A[W++]=H,x[D+H]!==-1&&($[x[D+H]]=$[H]),$[H]!==-1?x[D+$[H]]=x[D+H]:x[T+x[I+H]]=x[D+H]);V!==ie&&(b[V]=zi(ie),x[P+V]=0)}for(Me!==0&&(g=W),x[I+ie]=Ve,b[ie]=Le,x[_+ie]=W-Le,x[M+ie]=-2,R=u(R,v,x,P,p),Q=Le;Q<W;Q++)if(H=A[Q],!((K=x[M+H])<=0)){de=-x[E+H];var re=R-de;for(Be=b[H],te=b[H]+K-1;Be<=te;Be++)V=A[Be],x[P+V]>=R?x[P+V]-=de:x[P+V]!==0&&(x[P+V]=x[I+V]+re)}for(Q=Le;Q<W;Q++){for(H=A[Q],te=b[H],se=te+x[M+H]-1,ue=te,ve=0,he=0,Be=te;Be<=se;Be++)if(V=A[Be],x[P+V]!==0){var fe=x[P+V]-R;fe>0?(he+=fe,A[ue++]=V,ve+=V):(b[V]=zi(ie),x[P+V]=0)}x[M+H]=ue-te+1;var z=ue,J=te+x[_+H];for(Be=se+1;Be<J;Be++){Z=A[Be];var ne=x[E+Z];ne<=0||(he+=ne,A[ue++]=Z,ve+=Z)}he===0?(b[H]=zi(ie),de=-x[E+H],Ve-=de,$e+=de,G+=de,x[E+H]=0,x[M+H]=-1):(x[I+H]=Math.min(x[I+H],he),A[ue]=A[z],A[z]=A[te],A[te]=ie,x[_+H]=ue-te+1,ve=(ve<0?-ve:ve)%p,x[D+H]=x[B+ve],x[B+ve]=H,$[H]=ve)}for(x[I+ie]=Ve,v=Math.max(v,Ve),R=u(R+v,v,x,P,p),Q=Le;Q<W;Q++)if(H=A[Q],!(x[E+H]>=0))for(ve=$[H],H=x[B+ve],x[B+ve]=-1;H!==-1&&x[D+H]!==-1;H=x[D+H],R++){for(le=x[_+H],K=x[M+H],Be=b[H]+1;Be<=b[H]+le-1;Be++)x[P+A[Be]]=R;var oe=H;for(Z=x[D+H];Z!==-1;){var ce=x[_+Z]===le&&x[M+Z]===K;for(Be=b[Z]+1;ce&&Be<=b[Z]+le-1;Be++)x[P+A[Be]]!==R&&(ce=0);ce?(b[Z]=zi(H),x[E+H]+=x[E+Z],x[E+Z]=0,x[M+Z]=-1,Z=x[D+Z],x[D+oe]=Z):(oe=Z,Z=x[D+Z])}}for(Be=Le,Q=Le;Q<W;Q++)H=A[Q],!((de=-x[E+H])<=0)&&(x[E+H]=de,he=x[I+H]+Ve-de,he=Math.min(he,p-G-de),x[T+he]!==-1&&($[x[T+he]]=H),x[D+H]=x[T+he],$[H]=-1,x[T+he]=H,L=Math.min(L,he),x[I+H]=he,A[Be++]=H);x[E+ie]=$e,(x[_+ie]=Be-Le)===0&&(b[ie]=-1,x[P+ie]=0),Me!==0&&(g=Be)}for(H=0;H<p;H++)b[H]=zi(b[H]);for(Z=0;Z<=p;Z++)x[T+Z]=-1;for(Z=p;Z>=0;Z--)x[E+Z]>0||(x[D+Z]=x[T+b[Z]],x[T+b[Z]]=Z);for(V=p;V>=0;V--)x[E+V]<=0||b[V]!==-1&&(x[D+V]=x[T+b[V]],x[T+b[V]]=V);for(ie=0,H=0;H<=p;H++)b[H]===-1&&(ie=C4(H,ie,x,T,D,w,P));return w.splice(w.length-1,1),w};function a(o,c,d,m,h){var p=n(c);if(o===1&&m===d)return e(c,p);if(o===2){for(var v=p._index,C=p._ptr,N=0,A=0;A<d;A++){var b=C[A];if(C[A]=N,!(C[A+1]-b>h))for(var g=C[A+1];b<g;b++)v[N++]=v[b]}return C[d]=N,c=n(p),r(p,c)}return r(p,c)}function i(o,c,d,m,h,p,v,C,N,A,b,g){for(var w=0;w<o;w++)d[m+w]=c[w+1]-c[w];d[m+o]=0;for(var x=0;x<=o;x++)d[h+x]=-1,p[x]=-1,d[v+x]=-1,d[C+x]=-1,d[N+x]=1,d[A+x]=1,d[b+x]=0,d[g+x]=d[m+x];var _=u(0,0,d,A,o);return d[b+o]=-2,c[o]=-1,d[A+o]=0,_}function s(o,c,d,m,h,p,v,C,N,A,b){for(var g=0,w=0;w<o;w++){var x=d[m+w];if(x===0)d[h+w]=-2,g++,c[w]=-1,d[p+w]=0;else if(x>v)d[C+w]=0,d[h+w]=-1,g++,c[w]=zi(o),d[C+o]++;else{var _=d[N+x];_!==-1&&(A[_]=w),d[b+w]=d[N+x],d[N+x]=w}}return g}function u(o,c,d,m,h){if(o<2||o+c<0){for(var p=0;p<h;p++)d[m+p]!==0&&(d[m+p]=1);o=2}return o}function l(o,c){return o!==c}});function iX(t,e,r,n,a,i,s){var u,l,o=0,c;if(t<=e||r[n+e]<=r[a+t])return-1;r[a+t]=r[n+e];var d=r[i+t];if(r[i+t]=e,d===-1)o=1,c=t;else{for(o=2,c=d;c!==r[s+c];c=r[s+c]);for(u=d;u!==c;u=l)l=r[s+u],r[s+u]=c}return{jleaf:o,q:c}}var sX="csCounts",oX=["transpose"],uX=q(sX,oX,t=>{var{transpose:e}=t;return function(r,n,a,i){if(!r||!n||!a)return null;var s=r._size,u=s[0],l=s[1],o,c,d,m,h,p,v,C=4*l+(i?l+u+1:0),N=[],A=0,b=l,g=2*l,w=3*l,x=4*l,_=5*l+1;for(d=0;d<C;d++)N[d]=-1;var E=[],D=e(r),T=D._index,M=D._ptr;for(d=0;d<l;d++)for(c=a[d],E[c]=N[w+c]===-1?1:0;c!==-1&&N[w+c]===-1;c=n[c])N[w+c]=d;if(i){for(d=0;d<l;d++)N[a[d]]=d;for(o=0;o<u;o++){for(d=l,p=M[o],v=M[o+1],h=p;h<v;h++)d=Math.min(d,N[T[h]]);N[_+o]=N[x+d],N[x+d]=o}}for(o=0;o<l;o++)N[A+o]=o;for(d=0;d<l;d++){for(c=a[d],n[c]!==-1&&E[n[c]]--,m=i?N[x+d]:c;m!==-1;m=i?N[_+m]:-1)for(h=M[m];h<M[m+1];h++){o=T[h];var I=iX(o,c,N,w,b,g,A);I.jleaf>=1&&E[c]++,I.jleaf===2&&E[I.q]--}n[c]!==-1&&(N[A+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(E[n[c]]+=E[c]);return E}}),lX="csSqr",cX=["add","multiply","transpose"],fX=q(lX,cX,t=>{var{add:e,multiply:r,transpose:n}=t,a=aX({add:e,multiply:r,transpose:n}),i=uX({transpose:n});return function(l,o,c){var d=o._ptr,m=o._size,h=m[1],p,v={};if(v.q=a(l,o),l&&!v.q)return null;if(c){var C=l?YQ(o,null,v.q):o;v.parent=eX(C);var N=ZQ(v.parent,h);if(v.cp=i(C,v.parent,N,1),C&&v.parent&&v.cp&&s(C,v))for(v.unz=0,p=0;p<h;p++)v.unz+=v.cp[p]}else v.unz=4*d[h]+h,v.lnz=v.unz;return v};function s(u,l){var o=u._ptr,c=u._index,d=u._size,m=d[0],h=d[1];l.pinv=[],l.leftmost=[];var p=l.parent,v=l.pinv,C=l.leftmost,N=[],A=0,b=m,g=m+h,w=m+2*h,x,_,E,D,T;for(_=0;_<h;_++)N[b+_]=-1,N[g+_]=-1,N[w+_]=0;for(x=0;x<m;x++)C[x]=-1;for(_=h-1;_>=0;_--)for(D=o[_],T=o[_+1],E=D;E<T;E++)C[c[E]]=_;for(x=m-1;x>=0;x--)v[x]=-1,_=C[x],_!==-1&&(N[w+_]++===0&&(N[g+_]=x),N[A+x]=N[b+_],N[b+_]=x);for(l.lnz=0,l.m2=m,_=0;_<h;_++)if(x=N[b+_],l.lnz++,x<0&&(x=l.m2++),v[x]=_,!(--w[_]<=0)){l.lnz+=N[w+_];var M=p[_];M!==-1&&(N[w+M]===0&&(N[g+M]=N[g+_]),N[A+N[g+_]]=N[b+M],N[b+M]=N[A+x],N[w+M]+=N[w+_])}for(x=0;x<m;x++)v[x]<0&&(v[x]=_++);return!0}});function Vg(t,e){return t[e]<0}function T4(t,e){t[e]=zi(t[e])}function nS(t){return t<0?zi(t):t}function dX(t,e,r,n,a){var i=e._index,s=e._ptr,u=e._size,l=u[1],o,c,d,m=0;for(n[0]=t;m>=0;){t=n[m];var h=a?a[t]:t;Vg(s,t)||(T4(s,t),n[l+m]=h<0?0:nS(s[h]));var p=1;for(c=n[l+m],d=h<0?0:nS(s[h+1]);c<d;c++)if(o=i[c],!Vg(s,o)){n[l+m]=c,n[++m]=o,p=0;break}p&&(m--,n[--r]=t)}return r}function mX(t,e,r,n,a){var i=t._ptr,s=t._size,u=e._index,l=e._ptr,o=s[1],c,d,m,h=o;for(d=l[r],m=l[r+1],c=d;c<m;c++){var p=u[c];Vg(i,p)||(h=dX(p,t,h,n,a))}for(c=h;c<o;c++)T4(i,n[c]);return h}var hX="csSpsolve",pX=["divideScalar","multiply","subtract"],vX=q(hX,pX,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(i,s,u,l,o,c,d){var m=i._values,h=i._index,p=i._ptr,v=i._size,C=v[1],N=s._values,A=s._index,b=s._ptr,g,w,x,_,E=mX(i,s,u,l,c);for(g=E;g<C;g++)o[l[g]]=0;for(w=b[u],x=b[u+1],g=w;g<x;g++)o[A[g]]=N[g];for(var D=E;D<C;D++){var T=l[D],M=c?c[T]:T;if(!(M<0))for(w=p[M],x=p[M+1],o[T]=e(o[T],m[d?w:x-1]),g=d?w+1:w,_=d?x:x-1;g<_;g++){var I=h[g];o[I]=n(o[I],r(m[g],o[T]))}}return E}}),gX="csLu",yX=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],xX=q(gX,yX,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:a,larger:i,largerEq:s,SparseMatrix:u}=t,l=vX({divideScalar:r,multiply:n,subtract:a});return function(c,d,m){if(!c)return null;var h=c._size,p=h[1],v,C=100,N=100;d&&(v=d.q,C=d.lnz||C,N=d.unz||N);var A=[],b=[],g=[],w=new u({values:A,index:b,ptr:g,size:[p,p]}),x=[],_=[],E=[],D=new u({values:x,index:_,ptr:E,size:[p,p]}),T=[],M,I,P=[],B=[];for(M=0;M<p;M++)P[M]=0,T[M]=-1,g[M+1]=0;C=0,N=0;for(var $=0;$<p;$++){g[$]=C,E[$]=N;var R=v?v[$]:$,G=l(w,c,R,B,P,T,1),L=-1,H=-1;for(I=G;I<p;I++)if(M=B[I],T[M]<0){var Z=e(P[M]);i(Z,H)&&(H=Z,L=M)}else _[N]=T[M],x[N++]=P[M];if(L===-1||H<=0)return null;T[R]<0&&s(e(P[R]),n(H,m))&&(L=R);var ie=P[L];for(_[N]=$,x[N++]=ie,T[L]=$,b[C]=L,A[C++]=1,I=G;I<p;I++)M=B[I],T[M]<0&&(b[C]=M,A[C++]=r(P[M],ie)),P[M]=0}for(g[p]=C,E[p]=N,I=0;I<C;I++)b[I]=T[b[I]];return A.splice(C,A.length-C),b.splice(C,b.length-C),x.splice(N,x.length-N),_.splice(N,_.length-N),{L:w,U:D,pinv:T}}}),aS="slu",bX=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],wX=q(aS,bX,t=>{var{typed:e,abs:r,add:n,multiply:a,transpose:i,divideScalar:s,subtract:u,larger:l,largerEq:o,SparseMatrix:c}=t,d=fX({add:n,multiply:a,transpose:i}),m=xX({abs:r,divideScalar:s,multiply:a,subtract:u,larger:l,largerEq:o,SparseMatrix:c});return e(aS,{"SparseMatrix, number, number":function(p,v,C){if(!Qe(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(C<0||C>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var N=d(v,p,!1),A=m(p,N,C);return{L:A.L,U:A.U,p:A.pinv,q:N.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function iS(t,e){var r,n=e.length,a=[];if(t)for(r=0;r<n;r++)a[t[r]]=e[r];else for(r=0;r<n;r++)a[r]=e[r];return a}var sS="lusolve",NX=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],_X=q(sS,NX,t=>{var{typed:e,matrix:r,lup:n,slu:a,usolve:i,lsolve:s,DenseMatrix:u}=t,l=sf({DenseMatrix:u});return e(sS,{"Array, Array | Matrix":function(m,h){m=r(m);var p=n(m),v=c(p.L,p.U,p.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(m,h){var p=n(m);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix":function(m,h){var p=n(m);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(m,h,p,v){var C=a(m,p,v);return c(C.L,C.U,C.p,C.q,h)},"Object, Array | Matrix":function(m,h){return c(m.L,m.U,m.p,m.q,h)}});function o(d){if(Ze(d))return d;if(Qt(d))return r(d);throw new TypeError("Invalid Matrix LU decomposition")}function c(d,m,h,p,v){d=o(d),m=o(m),h&&(v=l(d,v,!0),v._data=iS(h,v._data));var C=s(d,v),N=i(m,C);return p&&(N._data=iS(p,N._data)),N}}),oS="polynomialRoot",EX=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],SX=q(oS,EX,t=>{var{typed:e,isZero:r,equalScalar:n,add:a,subtract:i,multiply:s,divide:u,sqrt:l,unaryMinus:o,cbrt:c,typeOf:d,im:m,re:h}=t;return e(oS,{"number|Complex, ...number|Complex":(p,v)=>{for(var C=[p,...v];C.length>0&&r(C[C.length-1]);)C.pop();if(C.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(C.length){case 2:return[o(u(C[0],C[1]))];case 3:{var[N,A,b]=C,g=s(2,b),w=s(A,A),x=s(4,b,N);if(n(w,x))return[u(o(A),g)];var _=l(i(w,x));return[u(i(_,A),g),u(i(o(_),A),g)]}case 4:{var[E,D,T,M]=C,I=o(s(3,M)),P=s(T,T),B=s(3,M,D),$=a(s(2,T,T,T),s(27,M,M,E)),R=s(9,M,T,D);if(n(P,B)&&n($,R))return[u(T,I)];var G=i(P,B),L=i($,R),H=a(s(18,M,T,D,E),s(T,T,D,D)),Z=a(s(4,T,T,T,E),s(4,M,D,D,D),s(27,M,M,E,E));if(n(H,Z))return[u(i(s(4,M,T,D),a(s(9,M,M,E),s(T,T,T))),s(M,G)),u(i(s(9,M,E),s(T,D)),s(2,G))];var ie;n(P,B)?ie=L:ie=u(a(L,l(i(s(L,L),s(4,G,G,G)))),2);var k=!0,Y=c(ie,k).toArray().map(V=>u(a(T,V,u(G,V)),I));return Y.map(V=>d(V)==="Complex"&&n(h(V),h(V)+m(V))?h(V):V)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(C))}}})}),AX="Help",DX=["evaluate"],CX=q(AX,DX,t=>{var{evaluate:e}=t;function r(n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var n=this.doc||{},a=`
`;if(n.name&&(a+="Name: "+n.name+`

`),n.category&&(a+="Category: "+n.category+`

`),n.description&&(a+=`Description:
    `+n.description+`

`),n.syntax&&(a+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){a+=`Examples:
`;for(var i=!1,s=e("config()"),u={config:d=>(i=!0,e("config(newConfig)",{newConfig:d}))},l=0;l<n.examples.length;l++){var o=n.examples[l];a+="    "+o+`
`;var c=void 0;try{c=e(o,u)}catch(d){c=d}c!==void 0&&!R3(c)&&(a+="        "+vt(c,{precision:14})+`
`)}a+=`
`,i&&e("config(originalConfig)",{originalConfig:s})}return n.mayThrow&&n.mayThrow.length&&(a+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(a+="See also: "+n.seealso.join(", ")+`
`),a},r.prototype.toJSON=function(){var n=at(this.doc);return n.mathjs="Help",n},r.fromJSON=function(n){var a={};return Object.keys(n).filter(i=>i!=="mathjs").forEach(i=>{a[i]=n[i]}),new r(a)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),TX="Chain",MX=["?on","math","typed"],IX=q(TX,MX,t=>{var{on:e,math:r,typed:n}=t;function a(o){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");j3(o)?this.value=o.value:this.value=o}a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return vt(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(o){return new a(o.value)};function i(o,c){typeof c=="function"&&(a.prototype[o]=u(c))}function s(o,c){Nk(a.prototype,o,function(){var m=c();if(typeof m=="function")return u(m)})}function u(o){return function(){if(arguments.length===0)return new a(o(this.value));for(var c=[this.value],d=0;d<arguments.length;d++)c[d+1]=arguments[d];if(n.isTypedFunction(o)){var m=n.resolve(o,c);if(m.params.length===1)throw new Error("chain function "+o.name+" cannot match rest parameter between chain value and additional arguments.");return new a(m.implementation.apply(o,c))}return new a(o.apply(o,c))}}a.createProxy=function(o,c){if(typeof o=="string")i(o,c);else{var d=function(p){Ge(o,p)&&l[p]===void 0&&s(p,()=>o[p])};for(var m in o)d(m)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return a.createProxy(r),e&&e("import",function(o,c,d){d||s(o,c)}),a},{isClass:!0}),uS={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},PX={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},FX={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},RX={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},OX={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},BX={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},jX={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},kX={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},$X={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},LX={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},zX={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},lS={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},VX={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},UX={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},qX={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},HX={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},GX={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},WX={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},QX={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},XX={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},KX={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},JX={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},YX={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},ZX={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},eK={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},tK={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},rK={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},nK={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},aK={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},iK={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},sK={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},oK={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},uK={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},lK={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},cK={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},fK={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},dK={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},mK={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},hK={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},pK={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},vK={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},gK={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},yK={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},xK={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},bK={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},wK={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},NK={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},_K={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},EK={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},SK={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},AK={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},DK={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},CK={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},TK={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},MK={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},IK={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},PK={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},FK={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},RK={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},OK={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},BK={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},jK={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},kK={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},$K={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},LK={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},zK={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},VK={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},UK={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},qK={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},HK={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},GK={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},WK={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},QK={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},XK={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},KK={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},JK={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},YK={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},ZK={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},eJ={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},tJ={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},rJ={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},nJ={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},aJ={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},iJ={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},sJ={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},oJ={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},uJ={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},lJ={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},cJ={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},fJ={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},dJ={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},mJ={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},hJ={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},pJ={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},vJ={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},gJ={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},yJ={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},xJ={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},bJ={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},wJ={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},NJ={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},_J={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},EJ={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},SJ={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},AJ={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},DJ={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},CJ={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},TJ={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},MJ={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},IJ={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},PJ={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},FJ={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},RJ={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},OJ={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},BJ={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},jJ={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},kJ={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},$J={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},LJ={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},zJ={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},VJ={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},UJ={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},qJ={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},HJ={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},GJ={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},WJ={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},QJ={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},XJ={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},KJ={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},JJ={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},YJ={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},ZJ={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},eY={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},tY={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},rY={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},nY={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},aY={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},iY={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},sY={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},oY={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},uY={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},lY={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},cY={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},fY={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},dY={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},mY={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},hY={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},pY={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},vY={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},gY={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},yY={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},xY={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},bY={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},wY={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},NY={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},_Y={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},EY={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},SY={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},AY={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},DY={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},CY={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},TY={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},MY={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},IY={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},PY={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},FY={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},RY={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},OY={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},BY={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},jY={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},kY={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},$Y={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},LY={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},zY={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},VY={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},UY={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},qY={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},HY={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},GY={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},WY={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},QY={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},XY={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},KY={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},JY={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},YY={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},ZY={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},eZ={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},tZ={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},rZ={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},nZ={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},aZ={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},iZ={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},sZ={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},oZ={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},uZ={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},lZ={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},cZ={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},fZ={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},dZ={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},mZ={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},hZ={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},pZ={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},vZ={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},gZ={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},yZ={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},xZ={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},bZ={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},wZ={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},NZ={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},_Z={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},EZ={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},SZ={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},AZ={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},DZ={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},CZ={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},TZ={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},MZ={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},IZ={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},PZ={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},FZ={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},RZ={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},OZ={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},BZ={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},jZ={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},kZ={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},$Z={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},LZ={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},zZ={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},VZ={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},UZ={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},qZ={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},HZ={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},GZ={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},WZ={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},QZ={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},XZ={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},KZ={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},JZ={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},YZ={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},ZZ={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},eee={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},tee={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},ree={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},nee={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},aee={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},iee={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},see={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},oee={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},uee={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},lee={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},cee={bignumber:WX,bigint:QX,boolean:XX,complex:KX,createUnit:JX,fraction:YX,index:ZX,matrix:eK,number:tK,sparse:rK,splitUnit:nK,string:aK,unit:iK,e:uS,E:uS,false:PX,i:FX,Infinity:RX,LN2:BX,LN10:OX,LOG2E:kX,LOG10E:jX,NaN:$X,null:LX,pi:lS,PI:lS,phi:zX,SQRT1_2:VX,SQRT2:UX,tau:qX,true:HX,version:GX,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:lK,lsolve:fK,lsolveAll:dK,lup:mK,lusolve:hK,leafCount:cK,polynomialRoot:pK,resolve:yK,simplify:xK,simplifyConstant:bK,simplifyCore:wK,symbolicEqual:_K,rationalize:gK,slu:NK,usolve:EK,usolveAll:SK,qr:vK,abs:AK,add:DK,cbrt:CK,ceil:TK,cube:MK,divide:IK,dotDivide:PK,dotMultiply:FK,dotPow:RK,exp:OK,expm:BK,expm1:jK,fix:kK,floor:$K,gcd:LK,hypot:zK,lcm:UK,log:qK,log2:WK,log1p:GK,log10:HK,mod:QK,multiply:XK,norm:KK,nthRoot:JK,nthRoots:YK,pow:ZK,round:eJ,sign:tJ,sqrt:rJ,sqrtm:nJ,square:oJ,subtract:uJ,unaryMinus:lJ,unaryPlus:cJ,xgcd:fJ,invmod:VK,bitAnd:dJ,bitNot:mJ,bitOr:hJ,bitXor:pJ,leftShift:vJ,rightArithShift:gJ,rightLogShift:yJ,bellNumbers:xJ,catalan:bJ,composition:wJ,stirlingS2:NJ,config:sK,import:oK,typed:uK,arg:_J,conj:EJ,re:AJ,im:SJ,evaluate:DJ,help:IJ,parse:TJ,parser:CJ,compile:MJ,distance:PJ,intersect:FJ,and:RJ,not:OJ,nullish:BJ,or:jJ,xor:kJ,mapSlices:$J,concat:zJ,count:VJ,cross:UJ,column:LJ,ctranspose:qJ,det:HJ,diag:GJ,diff:WJ,dot:QJ,getMatrixDataType:ZJ,identity:eY,filter:KJ,flatten:JJ,forEach:YJ,inv:tY,pinv:rY,eigs:XJ,kron:nY,matrixFromFunction:sY,matrixFromRows:oY,matrixFromColumns:iY,map:aY,ones:uY,partitionSelect:lY,range:cY,resize:dY,reshape:fY,rotate:mY,rotationMatrix:hY,row:pY,size:vY,sort:gY,squeeze:yY,subset:xY,trace:bY,transpose:wY,zeros:NY,fft:_Y,ifft:EY,sylvester:aJ,schur:iJ,lyap:sJ,solveODE:lee,combinations:SY,combinationsWithRep:AY,factorial:DY,gamma:CY,kldivergence:MY,lgamma:TY,multinomial:IY,permutations:PY,pickRandom:FY,random:RY,randomInt:OY,compare:BY,compareNatural:jY,compareText:kY,deepEqual:$Y,equal:LY,equalText:zY,larger:VY,largerEq:UY,smaller:qY,smallerEq:HY,unequal:GY,setCartesian:WY,setDifference:QY,setDistinct:XY,setIntersect:KY,setIsSubset:JY,setMultiplicity:YY,setPowerset:ZY,setSize:eZ,setSymDifference:tZ,setUnion:rZ,zpk2tf:nZ,freqz:aZ,erf:iZ,zeta:sZ,cumsum:vZ,mad:oZ,max:uZ,mean:lZ,median:cZ,min:fZ,mode:dZ,prod:mZ,quantileSeq:hZ,std:pZ,sum:gZ,variance:yZ,corr:xZ,acos:bZ,acosh:wZ,acot:NZ,acoth:_Z,acsc:EZ,acsch:SZ,asec:AZ,asech:DZ,asin:CZ,asinh:TZ,atan:MZ,atanh:PZ,atan2:IZ,cos:FZ,cosh:RZ,cot:OZ,coth:BZ,csc:jZ,csch:kZ,sec:$Z,sech:LZ,sin:zZ,sinh:VZ,tan:UZ,tanh:qZ,to:HZ,toBest:GZ,clone:QZ,format:XZ,bin:WZ,oct:see,hex:JZ,isNaN:ZZ,isInteger:YZ,isNegative:eee,isNumeric:tee,hasNumericValue:KZ,isPositive:ree,isPrime:nee,isZero:aee,print:oee,typeOf:uee,numeric:iee},cS="help",fee=["typed","mathWithTransform","Help"],dee=q(cS,fee,t=>{var{typed:e,mathWithTransform:r,Help:n}=t;return e(cS,{any:function(i){var s,u=i;if(typeof i!="string"){for(s in r)if(Ge(r,s)&&i===r[s]){u=s;break}}var l=Sn(cee,u);if(!l){var o=typeof u=="function"?u.name:u;throw new Error('No documentation found on "'+o+'"')}return new n(l)}})}),fS="chain",mee=["typed","Chain"],hee=q(fS,mee,t=>{var{typed:e,Chain:r}=t;return e(fS,{"":function(){return new r},any:function(a){return new r(a)}})}),dS="det",pee=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],vee=q(dS,pee,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:a,divideScalar:i,isZero:s,unaryMinus:u}=t;return e(dS,{any:function(c){return at(c)},"Array | Matrix":function(c){var d;switch(Ze(c)?d=c.size():Array.isArray(c)?(c=r(c),d=c.size()):d=[],d.length){case 0:return at(c);case 1:if(d[0]===1)return at(c.valueOf()[0]);if(d[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+vt(d)+")");case 2:{var m=d[0],h=d[1];if(m===h)return l(c.clone().valueOf(),m);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+vt(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+vt(d)+")")}}});function l(o,c,d){if(c===1)return at(o[0][0]);if(c===2)return n(a(o[0][0],o[1][1]),a(o[1][0],o[0][1]));for(var m=!1,h=new Array(c).fill(0).map((_,E)=>E),p=0;p<c;p++){var v=h[p];if(s(o[v][p])){var C=void 0;for(C=p+1;C<c;C++)if(!s(o[h[C]][p])){v=h[C],h[C]=h[p],h[p]=v,m=!m;break}if(C===c)return o[v][p]}for(var N=o[v][p],A=p===0?1:o[h[p-1]][p-1],b=p+1;b<c;b++)for(var g=h[b],w=p+1;w<c;w++)o[g][w]=i(n(a(o[g][w],N),a(o[g][p],o[v][w])),A)}var x=o[h[c-1]][c-1];return m?u(x):x}}),mS="inv",gee=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],yee=q(mS,gee,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:a,multiply:i,unaryMinus:s,det:u,identity:l,abs:o}=t;return e(mS,{"Array | Matrix":function(m){var h=Ze(m)?m.size():it(m);switch(h.length){case 1:if(h[0]===1)return Ze(m)?r([n(1,m.valueOf()[0])]):[n(1,m[0])];throw new RangeError("Matrix must be square (size: "+vt(h)+")");case 2:{var p=h[0],v=h[1];if(p===v)return Ze(m)?r(c(m.valueOf(),p,v),m.storage()):c(m,p,v);throw new RangeError("Matrix must be square (size: "+vt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+vt(h)+")")}},any:function(m){return n(1,m)}});function c(d,m,h){var p,v,C,N,A;if(m===1){if(N=d[0][0],N===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,N)]]}else if(m===2){var b=u(d);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(d[1][1],b),n(s(d[0][1]),b)],[n(s(d[1][0]),b),n(d[0][0],b)]]}else{var g=d.concat();for(p=0;p<m;p++)g[p]=g[p].concat();for(var w=l(m).valueOf(),x=0;x<h;x++){var _=o(g[x][x]),E=x;for(p=x+1;p<m;)o(g[p][x])>_&&(_=o(g[p][x]),E=p),p++;if(_===0)throw Error("Cannot calculate inverse, determinant is zero");p=E,p!==x&&(A=g[x],g[x]=g[p],g[p]=A,A=w[x],w[x]=w[p],w[p]=A);var D=g[x],T=w[x];for(p=0;p<m;p++){var M=g[p],I=w[p];if(p!==x){if(M[x]!==0){for(C=n(s(M[x]),D[x]),v=x;v<h;v++)M[v]=a(M[v],i(C,D[v]));for(v=0;v<h;v++)I[v]=a(I[v],i(C,T[v]))}}else{for(C=D[x],v=x;v<h;v++)M[v]=n(M[v],C);for(v=0;v<h;v++)I[v]=n(I[v],C)}}}return w}}}),hS="pinv",xee=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],bee=q(hS,xee,t=>{var{typed:e,matrix:r,inv:n,deepEqual:a,equal:i,dotDivide:s,dot:u,ctranspose:l,divideScalar:o,multiply:c,add:d,Complex:m}=t;return e(hS,{"Array | Matrix":function(b){var g=Ze(b)?b.size():it(b);switch(g.length){case 1:return N(b)?l(b):g[0]===1?n(b):s(l(b),u(b,b));case 2:{if(N(b))return l(b);var w=g[0],x=g[1];if(w===x)try{return n(b)}catch(_){if(!(_ instanceof Error&&_.message.match(/Cannot calculate inverse, determinant is zero/)))throw _}return Ze(b)?r(h(b.valueOf(),w,x),b.storage()):h(b,w,x)}default:throw new RangeError("Matrix must be two dimensional (size: "+vt(g)+")")}},any:function(b){return i(b,0)?at(b):o(1,b)}});function h(A,b,g){var{C:w,F:x}=v(A,b,g),_=c(n(c(l(w),w)),l(w)),E=c(l(x),n(c(x,l(x))));return c(E,_)}function p(A,b,g){for(var w=at(A),x=0,_=0;_<b;_++){if(g<=x)return w;for(var E=_;C(w[E][x]);)if(E++,b===E&&(E=_,x++,g===x))return w;[w[E],w[_]]=[w[_],w[E]];for(var D=w[_][x],T=0;T<g;T++)w[_][T]=s(w[_][T],D);for(var M=0;M<b;M++)if(M!==_){D=w[M][x];for(var I=0;I<g;I++)w[M][I]=d(w[M][I],c(-1,c(D,w[_][I])))}x++}return w}function v(A,b,g){var w=p(A,b,g),x=A.map((E,D)=>E.filter((T,M)=>M<b&&!C(u(w[M],w[M])))),_=w.filter((E,D)=>!C(u(w[D],w[D])));return{C:x,F:_}}function C(A){return i(d(A,m(1,1)),d(0,m(1,1)))}function N(A){return a(d(A,m(1,1)),d(c(A,0),m(1,1)))}});function wee(t){var{addScalar:e,subtract:r,flatten:n,multiply:a,multiplyScalar:i,divideScalar:s,sqrt:u,abs:l,bignumber:o,diag:c,size:d,reshape:m,inv:h,qr:p,usolve:v,usolveAll:C,equal:N,complex:A,larger:b,smaller:g,matrixFromColumns:w,dot:x}=t;function _(k,Y,V,xe){var le=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,de=E(k,Y,V,xe,le);D(k,Y,V,xe,le,de);var{values:Q,C:K}=T(k,Y,V,xe,le);if(le){var te=M(k,Y,K,de,Q,V,xe);return{values:Q,eigenvectors:te}}return{values:Q}}function E(k,Y,V,xe,le){var de=xe==="BigNumber",Q=xe==="Complex",K=de?o(0):0,te=de?o(1):Q?A(1):1,se=de?o(1):1,ue=de?o(10):2,ve=i(ue,ue),he;le&&(he=Array(Y).fill(te));for(var Me=!1;!Me;){Me=!0;for(var $e=0;$e<Y;$e++){for(var Ve=K,Be=K,Le=0;Le<Y;Le++)$e!==Le&&(Ve=e(Ve,l(k[Le][$e])),Be=e(Be,l(k[$e][Le])));if(!N(Ve,0)&&!N(Be,0)){for(var W=se,re=Ve,fe=s(Be,ue),z=i(Be,ue);g(re,fe);)re=i(re,ve),W=i(W,ue);for(;b(re,z);)re=s(re,ve),W=s(W,ue);var J=g(s(e(re,Be),W),i(e(Ve,Be),.95));if(J){Me=!1;for(var ne=s(1,W),oe=0;oe<Y;oe++)$e!==oe&&(k[$e][oe]=i(k[$e][oe],ne),k[oe][$e]=i(k[oe][$e],W));le&&(he[$e]=i(he[$e],ne))}}}}return le?c(he):null}function D(k,Y,V,xe,le,de){var Q=xe==="BigNumber",K=xe==="Complex",te=Q?o(0):K?A(0):0;Q&&(V=o(V));for(var se=0;se<Y-2;se++){for(var ue=0,ve=te,he=se+1;he<Y;he++){var Me=k[he][se];g(l(ve),l(Me))&&(ve=Me,ue=he)}if(!g(l(ve),V)){if(ue!==se+1){var $e=k[ue];k[ue]=k[se+1],k[se+1]=$e;for(var Ve=0;Ve<Y;Ve++){var Be=k[Ve][ue];k[Ve][ue]=k[Ve][se+1],k[Ve][se+1]=Be}if(le){var Le=de[ue];de[ue]=de[se+1],de[se+1]=Le}}for(var W=se+2;W<Y;W++){var re=s(k[W][se],ve);if(re!==0){for(var fe=0;fe<Y;fe++)k[W][fe]=r(k[W][fe],i(re,k[se+1][fe]));for(var z=0;z<Y;z++)k[z][se+1]=e(k[z][se+1],i(re,k[z][W]));if(le)for(var J=0;J<Y;J++)de[W][J]=r(de[W][J],i(re,de[se+1][J]))}}}}return de}function T(k,Y,V,xe,le){var de=xe==="BigNumber",Q=xe==="Complex",K=de?o(1):Q?A(1):1;de&&(V=o(V));for(var te=at(k),se=[],ue=Y,ve=[],he=le?c(Array(Y).fill(K)):void 0,Me=le?c(Array(ue).fill(K)):void 0,$e=0;$e<=100;){$e+=1;for(var Ve=te[ue-1][ue-1],Be=0;Be<ue;Be++)te[Be][Be]=r(te[Be][Be],Ve);var{Q:Le,R:W}=p(te);te=a(W,Le);for(var re=0;re<ue;re++)te[re][re]=e(te[re][re],Ve);if(le&&(Me=a(Me,Le)),ue===1||g(l(te[ue-1][ue-2]),V)){$e=0,se.push(te[ue-1][ue-1]),le&&(ve.unshift([[1]]),B(Me,Y),he=a(he,Me),ue>1&&(Me=c(Array(ue-1).fill(K)))),ue-=1,te.pop();for(var fe=0;fe<ue;fe++)te[fe].pop()}else if(ue===2||g(l(te[ue-2][ue-3]),V)){$e=0;var z=I(te[ue-2][ue-2],te[ue-2][ue-1],te[ue-1][ue-2],te[ue-1][ue-1]);se.push(...z),le&&(ve.unshift(P(te[ue-2][ue-2],te[ue-2][ue-1],te[ue-1][ue-2],te[ue-1][ue-1],z[0],z[1],V,xe)),B(Me,Y),he=a(he,Me),ue>2&&(Me=c(Array(ue-2).fill(K)))),ue-=2,te.pop(),te.pop();for(var J=0;J<ue;J++)te[J].pop(),te[J].pop()}if(ue===0)break}if(se.sort((ce,ge)=>+r(l(ce),l(ge))),$e>100){var ne=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+se.join(", "));throw ne.values=se,ne.vectors=[],ne}var oe=le?a(he,$(ve,Y)):void 0;return{values:se,C:oe}}function M(k,Y,V,xe,le,de,Q){var K=h(V),te=a(K,k,V),se=Q==="BigNumber",ue=Q==="Complex",ve=se?o(0):ue?A(0):0,he=se?o(1):ue?A(1):1,Me=[],$e=[];for(var Ve of le){var Be=R(Me,Ve,N);Be===-1?(Me.push(Ve),$e.push(1)):$e[Be]+=1}for(var Le=[],W=Me.length,re=Array(Y).fill(ve),fe=c(Array(Y).fill(he)),z=function(){var oe=Me[J],ce=r(te,a(oe,fe)),ge=C(ce,re);for(ge.shift();ge.length<$e[J];){var Ee=G(ce,Y,ge,de,Q);if(Ee===null)break;ge.push(Ee)}var Ae=a(h(xe),V);ge=ge.map(Ie=>a(Ae,Ie)),Le.push(...ge.map(Ie=>({value:oe,vector:n(Ie)})))},J=0;J<W;J++)z();return Le}function I(k,Y,V,xe){var le=e(k,xe),de=r(i(k,xe),i(Y,V)),Q=i(le,.5),K=i(u(r(i(le,le),i(4,de))),.5);return[e(Q,K),r(Q,K)]}function P(k,Y,V,xe,le,de,Q,K){var te=K==="BigNumber",se=K==="Complex",ue=te?o(0):se?A(0):0,ve=te?o(1):se?A(1):1;if(g(l(V),Q))return[[ve,ue],[ue,ve]];if(b(l(r(le,de)),Q))return[[r(le,xe),r(de,xe)],[V,V]];var he=r(k,le),Me=r(xe,le);return g(l(Y),Q)&&g(l(Me),Q)?[[he,ve],[V,ue]]:[[Y,ue],[Me,ve]]}function B(k,Y){for(var V=0;V<k.length;V++)k[V].push(...Array(Y-k[V].length).fill(0));for(var xe=k.length;xe<Y;xe++)k.push(Array(Y).fill(0)),k[xe][xe]=1;return k}function $(k,Y){for(var V=[],xe=0;xe<Y;xe++)V[xe]=Array(Y).fill(0);var le=0;for(var de of k){for(var Q=de.length,K=0;K<Q;K++)for(var te=0;te<Q;te++)V[le+K][le+te]=de[K][te];le+=Q}return V}function R(k,Y,V){for(var xe=0;xe<k.length;xe++)if(V(k[xe],Y))return xe;return-1}function G(k,Y,V,xe,le){for(var de=le==="BigNumber"?o(1e3):1e3,Q,K=0;K<5;++K){Q=L(Y,V,le);try{Q=v(k,Q)}catch{continue}if(b(Z(Q),de))break}if(K>=5)return null;for(K=0;;){var te=v(k,Q);if(g(Z(H(Q,[te])),xe))break;if(++K>=10)return null;Q=ie(te)}return Q}function L(k,Y,V){var xe=V==="BigNumber",le=V==="Complex",de=Array(k).fill(0).map(Q=>2*Math.random()-1);return xe&&(de=de.map(Q=>o(Q))),le&&(de=de.map(Q=>A(Q))),de=H(de,Y),ie(de,V)}function H(k,Y){var V=d(k);for(var xe of Y)xe=m(xe,V),k=r(k,a(s(x(xe,k),x(xe,xe)),xe));return k}function Z(k){return l(u(x(k,k)))}function ie(k,Y){var V=Y==="BigNumber",xe=Y==="Complex",le=V?o(1):xe?A(1):1;return a(s(le,Z(k)),k)}return _}function Nee(t){var{config:e,addScalar:r,subtract:n,abs:a,atan:i,cos:s,sin:u,multiplyScalar:l,inv:o,bignumber:c,multiply:d,add:m}=t;function h(D,T){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,I=arguments.length>3?arguments[3]:void 0,P=arguments.length>4?arguments[4]:void 0;if(I==="number")return p(D,M,P);if(I==="BigNumber")return v(D,M,P);throw TypeError("Unsupported data type: "+I)}function p(D,T,M){var I=D.length,P=Math.abs(T/I),B,$;if(M){$=new Array(I);for(var R=0;R<I;R++)$[R]=Array(I).fill(0),$[R][R]=1}for(var G=x(D);Math.abs(G[1])>=Math.abs(P);){var L=G[0][0],H=G[0][1];B=C(D[L][L],D[H][H],D[L][H]),D=w(D,B,L,H),M&&($=A($,B,L,H)),G=x(D)}for(var Z=Array(I).fill(0),ie=0;ie<I;ie++)Z[ie]=D[ie][ie];return E(at(Z),$,M)}function v(D,T,M){var I=D.length,P=a(T/I),B,$;if(M){$=new Array(I);for(var R=0;R<I;R++)$[R]=Array(I).fill(0),$[R][R]=1}for(var G=_(D);a(G[1])>=a(P);){var L=G[0][0],H=G[0][1];B=N(D[L][L],D[H][H],D[L][H]),D=g(D,B,L,H),M&&($=b($,B,L,H)),G=_(D)}for(var Z=Array(I).fill(0),ie=0;ie<I;ie++)Z[ie]=D[ie][ie];return E(at(Z),$,M)}function C(D,T,M){var I=T-D;return Math.abs(I)<=e.relTol?Math.PI/4:.5*Math.atan(2*M/(T-D))}function N(D,T,M){var I=n(T,D);return a(I)<=e.relTol?c(-1).acos().div(4):l(.5,i(d(2,M,o(I))))}function A(D,T,M,I){for(var P=D.length,B=Math.cos(T),$=Math.sin(T),R=Array(P).fill(0),G=Array(P).fill(0),L=0;L<P;L++)R[L]=B*D[L][M]-$*D[L][I],G[L]=$*D[L][M]+B*D[L][I];for(var H=0;H<P;H++)D[H][M]=R[H],D[H][I]=G[H];return D}function b(D,T,M,I){for(var P=D.length,B=s(T),$=u(T),R=Array(P).fill(c(0)),G=Array(P).fill(c(0)),L=0;L<P;L++)R[L]=n(l(B,D[L][M]),l($,D[L][I])),G[L]=r(l($,D[L][M]),l(B,D[L][I]));for(var H=0;H<P;H++)D[H][M]=R[H],D[H][I]=G[H];return D}function g(D,T,M,I){for(var P=D.length,B=c(s(T)),$=c(u(T)),R=l(B,B),G=l($,$),L=Array(P).fill(c(0)),H=Array(P).fill(c(0)),Z=d(c(2),B,$,D[M][I]),ie=r(n(l(R,D[M][M]),Z),l(G,D[I][I])),k=m(l(G,D[M][M]),Z,l(R,D[I][I])),Y=0;Y<P;Y++)L[Y]=n(l(B,D[M][Y]),l($,D[I][Y])),H[Y]=r(l($,D[M][Y]),l(B,D[I][Y]));D[M][M]=ie,D[I][I]=k,D[M][I]=c(0),D[I][M]=c(0);for(var V=0;V<P;V++)V!==M&&V!==I&&(D[M][V]=L[V],D[V][M]=L[V],D[I][V]=H[V],D[V][I]=H[V]);return D}function w(D,T,M,I){for(var P=D.length,B=Math.cos(T),$=Math.sin(T),R=B*B,G=$*$,L=Array(P).fill(0),H=Array(P).fill(0),Z=R*D[M][M]-2*B*$*D[M][I]+G*D[I][I],ie=G*D[M][M]+2*B*$*D[M][I]+R*D[I][I],k=0;k<P;k++)L[k]=B*D[M][k]-$*D[I][k],H[k]=$*D[M][k]+B*D[I][k];D[M][M]=Z,D[I][I]=ie,D[M][I]=0,D[I][M]=0;for(var Y=0;Y<P;Y++)Y!==M&&Y!==I&&(D[M][Y]=L[Y],D[Y][M]=L[Y],D[I][Y]=H[Y],D[Y][I]=H[Y]);return D}function x(D){for(var T=D.length,M=0,I=[0,1],P=0;P<T;P++)for(var B=P+1;B<T;B++)Math.abs(M)<Math.abs(D[P][B])&&(M=Math.abs(D[P][B]),I=[P,B]);return[I,M]}function _(D){for(var T=D.length,M=0,I=[0,1],P=0;P<T;P++)for(var B=P+1;B<T;B++)a(M)<a(D[P][B])&&(M=a(D[P][B]),I=[P,B]);return[I,M]}function E(D,T,M){var I=D.length,P=Array(I),B;if(M){B=Array(I);for(var $=0;$<I;$++)B[$]=Array(I)}for(var R=0;R<I;R++){for(var G=0,L=D[0],H=0;H<D.length;H++)a(D[H])<a(L)&&(G=H,L=D[G]);if(P[R]=D.splice(G,1)[0],M)for(var Z=0;Z<I;Z++)B[R][Z]=T[Z][G],T[Z].splice(G,1)}if(!M)return{values:P};var ie=B.map((k,Y)=>({value:P[Y],vector:k}));return{values:P,eigenvectors:ie}}return h}var _ee="eigs",Eee=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],See=q(_ee,Eee,t=>{var{config:e,typed:r,matrix:n,addScalar:a,subtract:i,equal:s,abs:u,atan:l,cos:o,sin:c,multiplyScalar:d,divideScalar:m,inv:h,bignumber:p,multiply:v,add:C,larger:N,column:A,flatten:b,number:g,complex:w,sqrt:x,diag:_,size:E,reshape:D,qr:T,usolve:M,usolveAll:I,im:P,re:B,smaller:$,matrixFromColumns:R,dot:G}=t,L=Nee({config:e,addScalar:a,subtract:i,abs:u,atan:l,cos:o,sin:c,multiplyScalar:d,inv:h,bignumber:p,multiply:v,add:C}),H=wee({addScalar:a,subtract:i,multiply:v,multiplyScalar:d,flatten:b,divideScalar:m,sqrt:x,abs:u,bignumber:p,diag:_,size:E,reshape:D,qr:T,inv:h,usolve:M,usolveAll:I,equal:s,complex:w,larger:N,smaller:$,matrixFromColumns:R,dot:G});return r("eigs",{Array:function(de){return Z(n(de))},"Array, number|BigNumber":function(de,Q){return Z(n(de),{precision:Q})},"Array, Object"(le,de){return Z(n(le),de)},Matrix:function(de){return Z(de,{matricize:!0})},"Matrix, number|BigNumber":function(de,Q){return Z(de,{precision:Q,matricize:!0})},"Matrix, Object":function(de,Q){var K={matricize:!0};return _r(K,Q),Z(de,K)}});function Z(le){var de,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K="eigenvectors"in Q?Q.eigenvectors:!0,te=(de=Q.precision)!==null&&de!==void 0?de:e.relTol,se=ie(le,te,K);return Q.matricize&&(se.values=n(se.values),K&&(se.eigenvectors=se.eigenvectors.map(ue=>{var{value:ve,vector:he}=ue;return{value:ve,vector:n(he)}}))),K&&Object.defineProperty(se,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),se}function ie(le,de,Q){var K=le.toArray(),te=le.size();if(te.length!==2||te[0]!==te[1])throw new RangeError("Matrix must be square (size: ".concat(vt(te),")"));var se=te[0];if(Y(K,se,de)&&(V(K,se),k(K,se,de))){var ue=xe(le,K,se);return L(K,se,de,ue,Q)}var ve=xe(le,K,se);return H(K,se,de,ve,Q)}function k(le,de,Q){for(var K=0;K<de;K++)for(var te=K;te<de;te++)if(N(p(u(i(le[K][te],le[te][K]))),Q))return!1;return!0}function Y(le,de,Q){for(var K=0;K<de;K++)for(var te=0;te<de;te++)if(N(p(u(P(le[K][te]))),Q))return!1;return!0}function V(le,de){for(var Q=0;Q<de;Q++)for(var K=0;K<de;K++)le[Q][K]=B(le[Q][K])}function xe(le,de,Q){var K=le.datatype();if(K==="number"||K==="BigNumber"||K==="Complex")return K;for(var te=!1,se=!1,ue=!1,ve=0;ve<Q;ve++)for(var he=0;he<Q;he++){var Me=de[ve][he];if(Ke(Me)||rf(Me))te=!0;else if(lt(Me))se=!0;else if(pi(Me))ue=!0;else throw TypeError("Unsupported type in Matrix: "+Kt(Me))}if(se&&ue&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ue){for(var $e=0;$e<Q;$e++)for(var Ve=0;Ve<Q;Ve++)de[$e][Ve]=w(de[$e][Ve]);return"Complex"}if(se){for(var Be=0;Be<Q;Be++)for(var Le=0;Le<Q;Le++)de[Be][Le]=p(de[Be][Le]);return"BigNumber"}if(te){for(var W=0;W<Q;W++)for(var re=0;re<Q;re++)de[W][re]=g(de[W][re]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),pS="expm",Aee=["typed","abs","add","identity","inv","multiply"],Dee=q(pS,Aee,t=>{var{typed:e,abs:r,add:n,identity:a,inv:i,multiply:s}=t;return e(pS,{Matrix:function(d){var m=d.size();if(m.length!==2||m[0]!==m[1])throw new RangeError("Matrix must be square (size: "+vt(m)+")");for(var h=m[0],p=1e-15,v=u(d),C=l(v,p),N=C.q,A=C.j,b=s(d,Math.pow(2,-A)),g=a(h),w=a(h),x=1,_=b,E=-1,D=1;D<=N;D++)D>1&&(_=s(_,b),E=-E),x=x*(N-D+1)/((2*N-D+1)*D),g=n(g,s(x,_)),w=n(w,s(x*E,_));for(var T=s(i(w),g),M=0;M<A;M++)T=s(T,T);return Ys(d)?d.createSparseMatrix(T):T}});function u(c){for(var d=c.size()[0],m=0,h=0;h<d;h++){for(var p=0,v=0;v<d;v++)p+=r(c.get([h,v]));m=Math.max(p,m)}return m}function l(c,d){for(var m=30,h=0;h<m;h++)for(var p=0;p<=h;p++){var v=h-p;if(o(c,p,v)<d)return{q:p,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function o(c,d,m){for(var h=1,p=2;p<=d;p++)h*=p;for(var v=h,C=d+1;C<=2*d;C++)v*=C;var N=v*(2*d+1);return 8*Math.pow(c/Math.pow(2,m),2*d)*h*h/(v*N)}}),vS="sqrtm",Cee=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Tee=q(vS,Cee,t=>{var{typed:e,abs:r,add:n,multiply:a,map:i,sqrt:s,subtract:u,inv:l,size:o,max:c,identity:d}=t,m=1e3,h=1e-6;function p(v){var C,N=0,A=v,b=d(o(v));do{var g=A;if(A=a(.5,n(g,l(b))),b=a(.5,n(b,l(g))),C=c(r(u(A,g))),C>h&&++N>m)throw new Error("computing square root of matrix: iterative method could not converge")}while(C>h);return A}return e(vS,{"Array | Matrix":function(C){var N=Ze(C)?C.size():it(C);switch(N.length){case 1:if(N[0]===1)return i(C,s);throw new RangeError("Matrix must be square (size: "+vt(N)+")");case 2:{var A=N[0],b=N[1];if(A===b)return p(C);throw new RangeError("Matrix must be square (size: "+vt(N)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+vt(N)+")")}}})}),gS="sylvester",Mee=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Iee=q(gS,Mee,t=>{var{typed:e,schur:r,matrixFromColumns:n,matrix:a,multiply:i,range:s,concat:u,transpose:l,index:o,subset:c,add:d,subtract:m,identity:h,lusolve:p,abs:v,config:C}=t;return e(gS,{"Matrix, Matrix, Matrix":N,"Array, Matrix, Matrix":function(b,g,w){return N(a(b),g,w)},"Array, Array, Matrix":function(b,g,w){return N(a(b),a(g),w)},"Array, Matrix, Array":function(b,g,w){return N(a(b),g,a(w))},"Matrix, Array, Matrix":function(b,g,w){return N(b,a(g),w)},"Matrix, Array, Array":function(b,g,w){return N(b,a(g),a(w))},"Matrix, Matrix, Array":function(b,g,w){return N(b,g,a(w))},"Array, Array, Array":function(b,g,w){return N(a(b),a(g),a(w)).toArray()}});function N(A,b,g){for(var w=b.size()[0],x=A.size()[0],_=r(A),E=_.T,D=_.U,T=r(i(-1,b)),M=T.T,I=T.U,P=i(i(l(D),g),I),B=s(0,x),$=[],R=(ve,he)=>u(ve,he,1),G=(ve,he)=>u(ve,he,0),L=0;L<w;L++)if(L<w-1&&v(c(M,o(L+1,L)))>1e-5){for(var H=G(c(P,o(B,[L])),c(P,o(B,[L+1]))),Z=0;Z<L;Z++)H=d(H,G(i($[Z],c(M,o(Z,L))),i($[Z],c(M,o(Z,L+1)))));var ie=i(h(x),i(-1,c(M,o(L,L)))),k=i(h(x),i(-1,c(M,o(L+1,L)))),Y=i(h(x),i(-1,c(M,o(L,L+1)))),V=i(h(x),i(-1,c(M,o(L+1,L+1)))),xe=G(R(d(E,ie),k),R(Y,d(E,V))),le=p(xe,H);$[L]=le.subset(o(s(0,x),[0])),$[L+1]=le.subset(o(s(x,2*x),[0])),L++}else{for(var de=c(P,o(B,[L])),Q=0;Q<L;Q++)de=d(de,i($[Q],c(M,o(Q,L))));var K=c(M,o(L,L)),te=m(E,i(K,h(x)));$[L]=p(te,de)}var se=a(n(...$)),ue=i(D,i(se,l(I)));return ue}}),yS="schur",Pee=["typed","matrix","identity","multiply","qr","norm","subtract"],Fee=q(yS,Pee,t=>{var{typed:e,matrix:r,identity:n,multiply:a,qr:i,norm:s,subtract:u}=t;return e(yS,{Array:function(c){var d=l(r(c));return{U:d.U.valueOf(),T:d.T.valueOf()}},Matrix:function(c){return l(c)}});function l(o){var c=o.size()[0],d=o,m=n(c),h=0,p;do{p=d;var v=i(d),C=v.Q,N=v.R;if(d=a(N,C),m=a(m,C),h++>100)break}while(s(u(d,p))>1e-4);return{U:m,T:d}}}),xS="lyap",Ree=["typed","matrix","sylvester","multiply","transpose"],Oee=q(xS,Ree,t=>{var{typed:e,matrix:r,sylvester:n,multiply:a,transpose:i}=t;return e(xS,{"Matrix, Matrix":function(u,l){return n(u,i(u),a(-1,l))},"Array, Matrix":function(u,l){return n(r(u),i(r(u)),a(-1,l))},"Matrix, Array":function(u,l){return n(u,i(r(u)),r(a(-1,l)))},"Array, Array":function(u,l){return n(r(u),i(r(u)),r(a(-1,l))).toArray()}})}),Bee="divide",jee=["typed","matrix","multiply","equalScalar","divideScalar","inv"],kee=q(Bee,jee,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:a,divideScalar:i,inv:s}=t,u=un({typed:e,equalScalar:a}),l=ga({typed:e});return e("divide",k3({"Array | Matrix, Array | Matrix":function(c,d){return n(c,s(d))},"DenseMatrix, any":function(c,d){return l(c,d,i,!1)},"SparseMatrix, any":function(c,d){return u(c,d,i,!1)},"Array, any":function(c,d){return l(r(c),d,i,!1).valueOf()},"any, Array | Matrix":function(c,d){return n(c,s(d))}},i.signatures))}),bS="distance",$ee=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],Lee=q(bS,$ee,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:a,divideScalar:i,deepEqual:s,sqrt:u,abs:l}=t;return e(bS,{"Array, Array, Array":function(w,x,_){if(w.length===2&&x.length===2&&_.length===2){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(x,_))throw new TypeError("LinePoint1 should not be same with LinePoint2");var E=n(_[1],x[1]),D=n(x[0],_[0]),T=n(a(_[0],x[1]),a(x[0],_[1]));return C(w[0],w[1],E,D,T)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,x,_){if(Object.keys(w).length===2&&Object.keys(x).length===2&&Object.keys(_).length===2){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(p(x),p(_)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in x&&"lineOnePtY"in x&&"lineTwoPtX"in _&&"lineTwoPtY"in _){var E=n(_.lineTwoPtY,x.lineOnePtY),D=n(x.lineOnePtX,_.lineTwoPtX),T=n(a(_.lineTwoPtX,x.lineOnePtY),a(x.lineOnePtX,_.lineTwoPtY));return C(w.pointX,w.pointY,E,D,T)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,x){if(w.length===2&&x.length===3){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return C(w[0],w[1],x[0],x[1],x[2])}else if(w.length===3&&x.length===6){if(!d(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(x))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return N(w[0],w[1],w[2],x[0],x[1],x[2],x[3],x[4],x[5])}else if(w.length===x.length&&w.length>0){if(!m(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!m(x))throw new TypeError("All values of an array should be numbers or BigNumbers");return A(w,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,x){if(Object.keys(w).length===2&&Object.keys(x).length===3){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(x))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in x&&"yCoeffLine"in x&&"constant"in x)return C(w.pointX,w.pointY,x.xCoeffLine,x.yCoeffLine,x.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(x).length===6){if(!d(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in x&&"y0"in x&&"z0"in x&&"a"in x&&"b"in x&&"c"in x)return N(w.pointX,w.pointY,w.pointZ,x.x0,x.y0,x.z0,x.a,x.b,x.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(x).length===2){if(!c(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in x&&"pointTwoY"in x)return A([w.pointOneX,w.pointOneY],[x.pointTwoX,x.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(x).length===3){if(!d(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!d(x))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in x&&"pointTwoY"in x&&"pointTwoZ"in x)return A([w.pointOneX,w.pointOneY,w.pointOneZ],[x.pointTwoX,x.pointTwoY,x.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!v(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(w)}});function o(g){return typeof g=="number"||lt(g)}function c(g){return g.constructor!==Array&&(g=p(g)),o(g[0])&&o(g[1])}function d(g){return g.constructor!==Array&&(g=p(g)),o(g[0])&&o(g[1])&&o(g[2])}function m(g){return Array.isArray(g)||(g=p(g)),g.every(o)}function h(g){return g.constructor!==Array&&(g=p(g)),o(g[0])&&o(g[1])&&o(g[2])&&o(g[3])&&o(g[4])&&o(g[5])}function p(g){for(var w=Object.keys(g),x=[],_=0;_<w.length;_++)x.push(g[w[_]]);return x}function v(g){if(g[0].length===2&&o(g[0][0])&&o(g[0][1])){if(g.some(w=>w.length!==2||!o(w[0])||!o(w[1])))return!1}else if(g[0].length===3&&o(g[0][0])&&o(g[0][1])&&o(g[0][2])){if(g.some(w=>w.length!==3||!o(w[0])||!o(w[1])||!o(w[2])))return!1}else return!1;return!0}function C(g,w,x,_,E){var D=l(r(r(a(x,g),a(_,w)),E)),T=u(r(a(x,x),a(_,_)));return i(D,T)}function N(g,w,x,_,E,D,T,M,I){var P=[n(a(n(E,w),I),a(n(D,x),M)),n(a(n(D,x),T),a(n(_,g),I)),n(a(n(_,g),M),a(n(E,w),T))];P=u(r(r(a(P[0],P[0]),a(P[1],P[1])),a(P[2],P[2])));var B=u(r(r(a(T,T),a(M,M)),a(I,I)));return i(P,B)}function A(g,w){for(var x=g.length,_=0,E=0,D=0;D<x;D++)E=n(g[D],w[D]),_=r(a(E,E),_);return u(_)}function b(g){for(var w=[],x=[],_=[],E=0;E<g.length-1;E++)for(var D=E+1;D<g.length;D++)g[0].length===2?(x=[g[E][0],g[E][1]],_=[g[D][0],g[D][1]]):g[0].length===3&&(x=[g[E][0],g[E][1],g[E][2]],_=[g[D][0],g[D][1],g[D][2]]),w.push(A(x,_));return w}}),zee="intersect",Vee=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],Uee=q(zee,Vee,t=>{var{typed:e,config:r,abs:n,add:a,addScalar:i,matrix:s,multiply:u,multiplyScalar:l,divideScalar:o,subtract:c,smaller:d,equalScalar:m,flatten:h,isZero:p,isNumeric:v}=t;return e("intersect",{"Array, Array, Array":C,"Array, Array, Array, Array":N,"Matrix, Matrix, Matrix":function(M,I,P){var B=C(M.valueOf(),I.valueOf(),P.valueOf());return B===null?null:s(B)},"Matrix, Matrix, Matrix, Matrix":function(M,I,P,B){var $=N(M.valueOf(),I.valueOf(),P.valueOf(),B.valueOf());return $===null?null:s($)}});function C(T,M,I){if(T=A(T),M=A(M),I=A(I),!g(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(I))throw new TypeError("Array with 4 numbers expected as third argument");return D(T[0],T[1],T[2],M[0],M[1],M[2],I[0],I[1],I[2],I[3])}function N(T,M,I,P){if(T=A(T),M=A(M),I=A(I),P=A(P),T.length===2){if(!b(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(P))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return x(T,M,I,P)}else if(T.length===3){if(!g(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!g(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!g(P))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return E(T[0],T[1],T[2],M[0],M[1],M[2],I[0],I[1],I[2],P[0],P[1],P[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function A(T){return T.length===1?T[0]:T.length>1&&Array.isArray(T[0])&&T.every(M=>Array.isArray(M)&&M.length===1)?h(T):T}function b(T){return T.length===2&&v(T[0])&&v(T[1])}function g(T){return T.length===3&&v(T[0])&&v(T[1])&&v(T[2])}function w(T){return T.length===4&&v(T[0])&&v(T[1])&&v(T[2])&&v(T[3])}function x(T,M,I,P){var B=T,$=I,R=c(B,M),G=c($,P),L=c(l(R[0],G[1]),l(G[0],R[1]));if(p(L)||d(n(L),r.relTol))return null;var H=l(G[0],B[1]),Z=l(G[1],B[0]),ie=l(G[0],$[1]),k=l(G[1],$[0]),Y=o(i(c(c(H,Z),ie),k),L);return a(u(R,Y),B)}function _(T,M,I,P,B,$,R,G,L,H,Z,ie){var k=l(c(T,M),c(I,P)),Y=l(c(B,$),c(R,G)),V=l(c(L,H),c(Z,ie));return i(i(k,Y),V)}function E(T,M,I,P,B,$,R,G,L,H,Z,ie){var k=_(T,R,H,R,M,G,Z,G,I,L,ie,L),Y=_(H,R,P,T,Z,G,B,M,ie,L,$,I),V=_(T,R,P,T,M,G,B,M,I,L,$,I),xe=_(H,R,H,R,Z,G,Z,G,ie,L,ie,L),le=_(P,T,P,T,B,M,B,M,$,I,$,I),de=c(l(k,Y),l(V,xe)),Q=c(l(le,xe),l(Y,Y));if(p(Q))return null;var K=o(de,Q),te=o(i(k,l(K,Y)),xe),se=i(T,l(K,c(P,T))),ue=i(M,l(K,c(B,M))),ve=i(I,l(K,c($,I))),he=i(R,l(te,c(H,R))),Me=i(G,l(te,c(Z,G))),$e=i(L,l(te,c(ie,L)));return m(se,he)&&m(ue,Me)&&m(ve,$e)?[se,ue,ve]:null}function D(T,M,I,P,B,$,R,G,L,H){var Z=l(T,R),ie=l(P,R),k=l(M,G),Y=l(B,G),V=l(I,L),xe=l($,L),le=c(c(c(H,Z),k),V),de=c(c(c(i(i(ie,Y),xe),Z),k),V),Q=o(le,de),K=i(T,l(Q,c(P,T))),te=i(M,l(Q,c(B,M))),se=i(I,l(Q,c($,I)));return[K,te,se]}}),wS="sum",qee=["typed","config","add","numeric"],M4=q(wS,qee,t=>{var{typed:e,config:r,add:n,numeric:a}=t;return e(wS,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":s,"...":function(l){if(al(l))throw new TypeError("Scalar values expected in function sum");return i(l)}});function i(u){var l;return _s(u,function(o){try{l=l===void 0?o:n(l,o)}catch(c){throw Cn(c,"sum",o)}}),l===void 0&&(l=a(0,r.number)),typeof l=="string"&&(l=a(l,Ds(l,r))),l}function s(u,l){try{var o=kh(u,l,n);return o}catch(c){throw Cn(c,"sum")}}}),yd="cumsum",Hee=["typed","add","unaryPlus"],I4=q(yd,Hee,t=>{var{typed:e,add:r,unaryPlus:n}=t;return e(yd,{Array:a,Matrix:function(o){return o.create(a(o.valueOf(),o.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(o,c){return o.create(s(o.valueOf(),c),o.datatype())},"...":function(o){if(al(o))throw new TypeError("All values expected to be scalar in function cumsum");return a(o)}});function a(l){try{return i(l)}catch(o){throw Cn(o,yd)}}function i(l){if(l.length===0)return[];for(var o=[n(l[0])],c=1;c<l.length;++c)o.push(r(o[c-1],l[c]));return o}function s(l,o){var c=it(l);if(o<0||o>=c.length)throw new Pa(o,c.length);try{return u(l,o)}catch(d){throw Cn(d,yd)}}function u(l,o){var c,d,m;if(o<=0){var h=l[0][0];if(Array.isArray(h)){for(m=dM(l),d=[],c=0;c<m.length;c++)d[c]=u(m[c],o-1);return d}else return i(l)}else{for(d=[],c=0;c<l.length;c++)d[c]=u(l[c],o-1);return d}}}),NS="mean",Gee=["typed","add","divide"],P4=q(NS,Gee,t=>{var{typed:e,add:r,divide:n}=t;return e(NS,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":a,"...":function(u){if(al(u))throw new TypeError("Scalar values expected in function mean");return i(u)}});function a(s,u){try{var l=kh(s,u,r),o=Array.isArray(s)?it(s):s.size();return n(l,o[u])}catch(c){throw Cn(c,"mean")}}function i(s){var u,l=0;if(_s(s,function(o){try{u=u===void 0?o:r(u,o),l++}catch(c){throw Cn(c,"mean",o)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(u,l)}}),_S="median",Wee=["typed","add","divide","compare","partitionSelect"],Qee=q(_S,Wee,t=>{var{typed:e,add:r,divide:n,compare:a,partitionSelect:i}=t;function s(o){try{o=Tt(o.valueOf());var c=o.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var d=c/2-1,m=i(o,d+1),h=o[d],p=0;p<d;++p)a(o[p],h)>0&&(h=o[p]);return l(h,m)}else{var v=i(o,(c-1)/2);return u(v)}}catch(C){throw Cn(C,"median")}}var u=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,d){return n(r(c,d),2)}});return e(_S,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,d){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(al(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),ES="mad",Xee=["typed","abs","map","median","subtract"],Kee=q(ES,Xee,t=>{var{typed:e,abs:r,map:n,median:a,subtract:i}=t;return e(ES,{"Array | Matrix":s,"...":function(l){return s(l)}});function s(u){if(u=Tt(u.valueOf()),u.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=a(u);return a(n(u,function(o){return r(i(o,l))}))}catch(o){throw o instanceof TypeError&&o.message.includes("median")?new TypeError(o.message.replace("median","mad")):Cn(o,"mad")}}}),rv="unbiased",SS="variance",Jee=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],F4=q(SS,Jee,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:u}=t;return e(SS,{"Array | Matrix":function(d){return l(d,rv)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(d,m){return o(d,m,rv)},"Array | Matrix, number | BigNumber, string":o,"...":function(d){return l(d,rv)}});function l(c,d){var m,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(_s(c,function(C){try{m=m===void 0?C:r(m,C),h++}catch(N){throw Cn(N,"variance",C)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var p=i(m,h);if(m=void 0,_s(c,function(C){var N=n(C,p);m=m===void 0?a(N,N):r(m,a(N,N))}),u(m))return m;switch(d){case"uncorrected":return i(m,h);case"biased":return i(m,h+1);case"unbiased":{var v=lt(m)?m.mul(0):0;return h===1?v:i(m,h-1)}default:throw new Error('Unknown normalization "'+d+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function o(c,d,m){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,d,h=>l(h,m))}catch(h){throw Cn(h,"variance")}}}),AS="quantileSeq",Yee=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],R4=q(AS,Yee,t=>{var{typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:u,compare:l,isInteger:o,smaller:c,smallerEq:d,larger:m,mapSlices:h}=t;return e(AS,{"Array | Matrix, number | BigNumber":(A,b)=>v(A,b,!1),"Array | Matrix, number | BigNumber, number":(A,b,g)=>p(A,b,!1,g,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(A,b,g,w)=>p(A,b,g,w,v),"Array | Matrix, Array | Matrix":(A,b)=>C(A,b,!1),"Array | Matrix, Array | Matrix, number":(A,b,g)=>p(A,b,!1,g,C),"Array | Matrix, Array | Matrix, boolean":C,"Array | Matrix, Array | Matrix, boolean, number":(A,b,g,w)=>p(A,b,g,w,C)});function p(A,b,g,w,x){return h(A,w,_=>x(_,b,g))}function v(A,b,g){var w,x=A.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(d(b,1))return Ke(b)?N(x,b,g):r(N(x,b,g));if(m(b,1)){if(!o(b))throw new Error("N must be a positive integer");if(m(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var _=n(b,1);w=[];for(var E=0;c(E,b);E++){var D=i(E+1,_);w.push(N(x,D,g))}return Ke(b)?w:r(w)}}function C(A,b,g){for(var w=A.valueOf(),x=b.valueOf(),_=[],E=0;E<x.length;++E)_.push(N(w,x[E],g));return _}function N(A,b,g){var w=Tt(A),x=w.length;if(x===0)throw new Error("Cannot calculate quantile of an empty sequence");var _=Ke(b)?b*(x-1):b.times(x-1),E=Ke(b)?Math.floor(_):_.floor().toNumber(),D=Ke(b)?_%1:_.minus(E);if(o(_))return g?w[_]:u(w,Ke(b)?_:_.valueOf());var T,M;if(g)T=w[E],M=w[E+1];else{M=u(w,E+1),T=w[E];for(var I=0;I<E;++I)l(w[I],T)>0&&(T=w[I])}return n(s(T,a(1,D)),s(M,D))}}),DS="std",Zee=["typed","map","sqrt","variance"],O4=q(DS,Zee,t=>{var{typed:e,map:r,sqrt:n,variance:a}=t;return e(DS,{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(u){return i(u)}});function i(s,u){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=a.apply(null,arguments);return Jn(l)?r(l,n):n(l)}catch(o){throw o instanceof TypeError&&o.message.includes(" variance")?new TypeError(o.message.replace(" variance"," std")):o}}}),CS="corr",ete=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],tte=q(CS,ete,t=>{var{typed:e,matrix:r,sqrt:n,sum:a,add:i,subtract:s,multiply:u,pow:l,divide:o}=t;return e(CS,{"Array, Array":function(h,p){return c(h,p)},"Matrix, Matrix":function(h,p){var v=c(h.toArray(),p.toArray());return Array.isArray(v)?r(v):v}});function c(m,h){var p=[];if(Array.isArray(m[0])&&Array.isArray(h[0])){if(m.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<m.length;v++){if(m[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(d(m[v],h[v]))}return p}else{if(m.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return d(m,h)}}function d(m,h){var p=m.length,v=a(m),C=a(h),N=m.reduce((x,_,E)=>i(x,u(_,h[E])),0),A=a(m.map(x=>l(x,2))),b=a(h.map(x=>l(x,2))),g=s(u(p,N),u(v,C)),w=n(u(s(u(p,A),l(v,2)),s(u(p,b),l(C,2))));return o(g,w)}}),TS="combinations",rte=["typed"],nte=q(TS,rte,t=>{var{typed:e}=t;return e(TS,{"number, number":FM,"BigNumber, BigNumber":function(n,a){var i=n.constructor,s,u,l=n.minus(a),o=new i(1);if(!MS(n)||!MS(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=o,a.lt(l))for(u=o;u.lte(l);u=u.plus(o))s=s.times(a.plus(u)).dividedBy(u);else for(u=o;u.lte(a);u=u.plus(o))s=s.times(l.plus(u)).dividedBy(u);return s}})});function MS(t){return t.isInteger()&&t.gte(0)}var IS="combinationsWithRep",ate=["typed"],ite=q(IS,ate,t=>{var{typed:e}=t;return e(IS,{"number, number":function(n,a){if(!Qe(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Qe(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<n-1){var i=mi(n,n+a-1);return i/mi(1,a)}var s=mi(a+1,n+a-1);return s/mi(1,n-1)},"BigNumber, BigNumber":function(n,a){var i=n.constructor,s,u,l=new i(1),o=n.minus(l);if(!PS(n)||!PS(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=l,a.lt(o))for(u=l;u.lte(o);u=u.plus(l))s=s.times(a.plus(u)).dividedBy(u);else for(u=l;u.lte(a);u=u.plus(l))s=s.times(o.plus(u)).dividedBy(u);return s}})});function PS(t){return t.isInteger()&&t.gte(0)}var FS="gamma",ste=["typed","config","multiplyScalar","pow","BigNumber","Complex"],ote=q(FS,ste,t=>{var{typed:e,config:r,multiplyScalar:n,pow:a,BigNumber:i,Complex:s}=t;function u(o){if(o.im===0)return jm(o.re);if(o.re<.5){var c=new s(1-o.re,-o.im),d=new s(Math.PI*o.re,Math.PI*o.im);return new s(Math.PI).div(d.sin()).div(u(c))}o=new s(o.re-1,o.im);for(var m=new s(Eu[0],0),h=1;h<Eu.length;++h){var p=new s(Eu[h],0);m=m.add(p.div(o.add(h)))}var v=new s(o.re+OM+.5,o.im),C=Math.sqrt(2*Math.PI),N=v.pow(o.add(.5)),A=v.neg().exp();return m.mul(C).mul(N).mul(A)}return e(FS,{number:jm,Complex:u,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new i(1/0):l(c.minus(1));if(!c.isFinite())return new i(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(o){if(o<8)return new i([1,1,2,6,24,120,720,5040][o]);var c=r.precision+(Math.log(o.toNumber())|0),d=i.clone({precision:c});if(o%2===1)return o.times(l(new i(o-1)));for(var m=o,h=new d(o),p=o.toNumber();m>2;)m-=2,p+=m,h=h.times(p);return new i(h.toPrecision(i.precision))}}),RS="lgamma",ute=["Complex","typed"],lte=q(RS,ute,t=>{var{Complex:e,typed:r}=t,n=7,a=7,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(RS,{number:km,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(o){var c=6.283185307179586,d=1.1447298858494002,m=.1;if(o.isNaN())return new e(NaN,NaN);if(o.im===0)return new e(km(o.re),0);if(o.re>=n||Math.abs(o.im)>=a)return u(o);if(o.re<=m){var h=Uk(c,o.im)*Math.floor(.5*o.re+.25),p=o.mul(Math.PI).sin().log(),v=s(new e(1-o.re,-o.im));return new e(d,h).sub(p).sub(v)}else return o.im>=0?l(o):l(o.conjugate()).conjugate()}function u(o){for(var c=o.sub(.5).mul(o.log()).sub(o).add(BM),d=new e(1,0).div(o),m=d.div(o),h=i[0],p=i[1],v=2*m.re,C=m.re*m.re+m.im*m.im,N=2;N<8;N++){var A=p;p=-C*h+i[N],h=v*h+A}var b=d.mul(m.mul(h).add(p));return c.add(b)}function l(o){var c=0,d=0,m=o;for(o=o.add(1);o.re<=n;){m=m.mul(o);var h=m.im<0?1:0;h!==0&&d===0&&c++,d=h,o=o.add(1)}return u(o).sub(m.log()).sub(new e(0,c*2*Math.PI*1))}}),OS="factorial",cte=["typed","gamma"],fte=q(OS,cte,t=>{var{typed:e,gamma:r}=t;return e(OS,{number:function(a){if(a<0)throw new Error("Value must be non-negative");return r(a+1)},BigNumber:function(a){if(a.isNegative())throw new Error("Value must be non-negative");return r(a.plus(1))},"Array | Matrix":e.referToSelf(n=>a=>ct(a,n))})}),BS="kldivergence",dte=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],mte=q(BS,dte,t=>{var{typed:e,matrix:r,divide:n,sum:a,multiply:i,map:s,dotDivide:u,log:l,isNumeric:o}=t;return e(BS,{"Array, Array":function(m,h){return c(r(m),r(h))},"Matrix, Array":function(m,h){return c(m,r(h))},"Array, Matrix":function(m,h){return c(r(m),h)},"Matrix, Matrix":function(m,h){return c(m,h)}});function c(d,m){var h=m.size().length,p=d.size().length;if(h>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(h!==p)throw new Error("Length of two vectors must be equal");var v=a(d);if(v===0)throw new Error("Sum of elements in first object must be non zero");var C=a(m);if(C===0)throw new Error("Sum of elements in second object must be non zero");var N=n(d,a(d)),A=n(m,a(m)),b=a(i(N,s(u(N,A),g=>l(g))));return o(b)?b:Number.NaN}}),jS="multinomial",hte=["typed","add","divide","multiply","factorial","isInteger","isPositive"],pte=q(jS,hte,t=>{var{typed:e,add:r,divide:n,multiply:a,factorial:i,isInteger:s,isPositive:u}=t;return e(jS,{"Array | Matrix":function(o){var c=0,d=1;return _s(o,function(m){if(!s(m)||!u(m))throw new TypeError("Positive integer value expected in function multinomial");c=r(c,m),d=a(d,i(m))}),n(i(c),d)}})}),kS="permutations",vte=["typed","factorial"],gte=q(kS,vte,t=>{var{typed:e,factorial:r}=t;return e(kS,{"number | BigNumber":r,"number, number":function(a,i){if(!Qe(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!Qe(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(i>a)throw new TypeError("second argument k must be less than or equal to first argument n");return mi(a-i+1,a)},"BigNumber, BigNumber":function(a,i){var s,u;if(!$S(a)||!$S(i))throw new TypeError("Positive integer value expected in function permutations");if(i.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var l=a.mul(0).add(1);for(s=l,u=a.minus(i).plus(1);u.lte(a);u=u.plus(1))s=s.times(u);return s}})});function $S(t){return t.isInteger()&&t.gte(0)}var qy={exports:{}};qy.exports;(function(t){(function(e,r,n){function a(l){var o=this,c=u();o.next=function(){var d=2091639*o.s0+o.c*23283064365386963e-26;return o.s0=o.s1,o.s1=o.s2,o.s2=d-(o.c=d|0)},o.c=1,o.s0=c(" "),o.s1=c(" "),o.s2=c(" "),o.s0-=c(l),o.s0<0&&(o.s0+=1),o.s1-=c(l),o.s1<0&&(o.s1+=1),o.s2-=c(l),o.s2<0&&(o.s2+=1),c=null}function i(l,o){return o.c=l.c,o.s0=l.s0,o.s1=l.s1,o.s2=l.s2,o}function s(l,o){var c=new a(l),d=o&&o.state,m=c.next;return m.int32=function(){return c.next()*4294967296|0},m.double=function(){return m()+(m()*2097152|0)*11102230246251565e-32},m.quick=m,d&&(typeof d=="object"&&i(d,c),m.state=function(){return i(c,{})}),m}function u(){var l=4022871197,o=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var m=.02519603282416938*l;l=m>>>0,m-=l,m*=l,l=m>>>0,m-=l,l+=m*4294967296}return(l>>>0)*23283064365386963e-26};return o}r&&r.exports?r.exports=s:this.alea=s})(ho,t)})(qy);var yte=qy.exports,Hy={exports:{}};Hy.exports;(function(t){(function(e,r,n){function a(u){var l=this,o="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},u===(u|0)?l.x=u:o+=u;for(var c=0;c<o.length+64;c++)l.x^=o.charCodeAt(c)|0,l.next()}function i(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l}function s(u,l){var o=new a(u),c=l&&l.state,d=function(){return(o.next()>>>0)/4294967296};return d.double=function(){do var m=o.next()>>>11,h=(o.next()>>>0)/4294967296,p=(m+h)/(1<<21);while(p===0);return p},d.int32=o.next,d.quick=d,c&&(typeof c=="object"&&i(c,o),d.state=function(){return i(o,{})}),d}r&&r.exports?r.exports=s:this.xor128=s})(ho,t)})(Hy);var xte=Hy.exports,Gy={exports:{}};Gy.exports;(function(t){(function(e,r,n){function a(u){var l=this,o="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,u===(u|0)?l.x=u:o+=u;for(var c=0;c<o.length+64;c++)l.x^=o.charCodeAt(c)|0,c==o.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l.v=u.v,l.d=u.d,l}function s(u,l){var o=new a(u),c=l&&l.state,d=function(){return(o.next()>>>0)/4294967296};return d.double=function(){do var m=o.next()>>>11,h=(o.next()>>>0)/4294967296,p=(m+h)/(1<<21);while(p===0);return p},d.int32=o.next,d.quick=d,c&&(typeof c=="object"&&i(c,o),d.state=function(){return i(o,{})}),d}r&&r.exports?r.exports=s:this.xorwow=s})(ho,t)})(Gy);var bte=Gy.exports,Wy={exports:{}};Wy.exports;(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var c=l.x,d=l.i,m,h;return m=c[d],m^=m>>>7,h=m^m<<24,m=c[d+1&7],h^=m^m>>>10,m=c[d+3&7],h^=m^m>>>3,m=c[d+4&7],h^=m^m<<7,m=c[d+7&7],m=m^m<<13,h^=m^m<<9,c[d]=h,l.i=d+1&7,h};function o(c,d){var m,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,m=0;m<d.length;++m)h[m&7]=h[m&7]<<15^d.charCodeAt(m)+h[m+1&7]<<13;for(;h.length<8;)h.push(0);for(m=0;m<8&&h[m]===0;++m);for(m==8?h[7]=-1:h[m],c.x=h,c.i=0,m=256;m>0;--m)c.next()}o(l,u)}function i(u,l){return l.x=u.x.slice(),l.i=u.i,l}function s(u,l){u==null&&(u=+new Date);var o=new a(u),c=l&&l.state,d=function(){return(o.next()>>>0)/4294967296};return d.double=function(){do var m=o.next()>>>11,h=(o.next()>>>0)/4294967296,p=(m+h)/(1<<21);while(p===0);return p},d.int32=o.next,d.quick=d,c&&(c.x&&i(c,o),d.state=function(){return i(o,{})}),d}r&&r.exports?r.exports=s:this.xorshift7=s})(ho,t)})(Wy);var wte=Wy.exports,Qy={exports:{}};Qy.exports;(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var c=l.w,d=l.X,m=l.i,h,p;return l.w=c=c+1640531527|0,p=d[m+34&127],h=d[m=m+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[m]=p^h,l.i=m,p+(c^c>>>16)|0};function o(c,d){var m,h,p,v,C,N=[],A=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,A=Math.max(A,d.length)),p=0,v=-32;v<A;++v)d&&(h^=d.charCodeAt((v+32)%d.length)),v===0&&(C=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(C=C+1640531527|0,m=N[v&127]^=h+C,p=m==0?p+1:0);for(p>=128&&(N[(d&&d.length||0)&127]=-1),p=127,v=4*128;v>0;--v)h=N[p+34&127],m=N[p=p+1&127],h^=h<<13,m^=m<<17,h^=h>>>15,m^=m>>>12,N[p]=h^m;c.w=C,c.X=N,c.i=p}o(l,u)}function i(u,l){return l.i=u.i,l.w=u.w,l.X=u.X.slice(),l}function s(u,l){u==null&&(u=+new Date);var o=new a(u),c=l&&l.state,d=function(){return(o.next()>>>0)/4294967296};return d.double=function(){do var m=o.next()>>>11,h=(o.next()>>>0)/4294967296,p=(m+h)/(1<<21);while(p===0);return p},d.int32=o.next,d.quick=d,c&&(c.X&&i(c,o),d.state=function(){return i(o,{})}),d}r&&r.exports?r.exports=s:this.xor4096=s})(ho,t)})(Qy);var Nte=Qy.exports,Xy={exports:{}};Xy.exports;(function(t){(function(e,r,n){function a(u){var l=this,o="";l.next=function(){var d=l.b,m=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^m,m=m-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^m,l.c=m=m-h|0,l.d=h<<16^m>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,u===Math.floor(u)?(l.a=u/4294967296|0,l.b=u|0):o+=u;for(var c=0;c<o.length+20;c++)l.b^=o.charCodeAt(c)|0,l.next()}function i(u,l){return l.a=u.a,l.b=u.b,l.c=u.c,l.d=u.d,l}function s(u,l){var o=new a(u),c=l&&l.state,d=function(){return(o.next()>>>0)/4294967296};return d.double=function(){do var m=o.next()>>>11,h=(o.next()>>>0)/4294967296,p=(m+h)/(1<<21);while(p===0);return p},d.int32=o.next,d.quick=d,c&&(typeof c=="object"&&i(c,o),d.state=function(){return i(o,{})}),d}r&&r.exports?r.exports=s:this.tychei=s})(ho,t)})(Xy);var _te=Xy.exports,B4={exports:{}};const Ete={},Ste=Object.freeze(Object.defineProperty({__proto__:null,default:Ete},Symbol.toStringTag,{value:"Module"})),Ate=sF(Ste);(function(t){(function(e,r,n){var a=256,i=6,s=52,u="random",l=n.pow(a,i),o=n.pow(2,s),c=o*2,d=a-1,m;function h(g,w,x){var _=[];w=w==!0?{entropy:!0}:w||{};var E=N(C(w.entropy?[g,b(r)]:g??A(),3),_),D=new p(_),T=function(){for(var M=D.g(i),I=l,P=0;M<o;)M=(M+P)*a,I*=a,P=D.g(1);for(;M>=c;)M/=2,I/=2,P>>>=1;return(M+P)/I};return T.int32=function(){return D.g(4)|0},T.quick=function(){return D.g(4)/4294967296},T.double=T,N(b(D.S),r),(w.pass||x||function(M,I,P,B){return B&&(B.S&&v(B,D),M.state=function(){return v(D,{})}),P?(n[u]=M,I):M})(T,E,"global"in w?w.global:this==n,w.state)}function p(g){var w,x=g.length,_=this,E=0,D=_.i=_.j=0,T=_.S=[];for(x||(g=[x++]);E<a;)T[E]=E++;for(E=0;E<a;E++)T[E]=T[D=d&D+g[E%x]+(w=T[E])],T[D]=w;(_.g=function(M){for(var I,P=0,B=_.i,$=_.j,R=_.S;M--;)I=R[B=d&B+1],P=P*a+R[d&(R[B]=R[$=d&$+I])+(R[$]=I)];return _.i=B,_.j=$,P})(a)}function v(g,w){return w.i=g.i,w.j=g.j,w.S=g.S.slice(),w}function C(g,w){var x=[],_=typeof g,E;if(w&&_=="object")for(E in g)try{x.push(C(g[E],w-1))}catch{}return x.length?x:_=="string"?g:g+"\0"}function N(g,w){for(var x=g+"",_,E=0;E<x.length;)w[d&E]=d&(_^=w[d&E]*19)+x.charCodeAt(E++);return b(w)}function A(){try{var g;return m&&(g=m.randomBytes)?g=g(a):(g=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(g)),b(g)}catch{var w=e.navigator,x=w&&w.plugins;return[+new Date,e,x,e.screen,b(r)]}}function b(g){return String.fromCharCode.apply(0,g)}if(N(n.random(),r),t.exports){t.exports=h;try{m=Ate}catch{}}else n["seed"+u]=h})(typeof self<"u"?self:ho,[],Math)})(B4);var Dte=B4.exports,Cte=yte,Tte=xte,Mte=bte,Ite=wte,Pte=Nte,Fte=_te,Ao=Dte;Ao.alea=Cte;Ao.xor128=Tte;Ao.xorwow=Mte;Ao.xorshift7=Ite;Ao.xor4096=Pte;Ao.tychei=Fte;var Rte=Ao;const j4=Km(Rte);var Ote=j4(Date.now());function qu(t){var e;function r(a){e=a===null?Ote:j4(String(a))}r(t);function n(){return e()}return n}var LS="pickRandom",Bte=["typed","config","?on"],jte=q(LS,Bte,t=>{var{typed:e,config:r,on:n}=t,a=qu(r.randomSeed);return n&&n("config",function(s,u){s.randomSeed!==u.randomSeed&&(a=qu(s.randomSeed))}),e(LS,{"Array | Matrix":function(u){return i(u,{})},"Array | Matrix, Object":function(u,l){return i(u,l)},"Array | Matrix, number":function(u,l){return i(u,{number:l})},"Array | Matrix, Array | Matrix":function(u,l){return i(u,{weights:l})},"Array | Matrix, Array | Matrix, number":function(u,l,o){return i(u,{number:o,weights:l})},"Array | Matrix, number, Array | Matrix":function(u,l,o){return i(u,{number:l,weights:o})}});function i(s,u){var{number:l,weights:o,elementWise:c=!0}=u,d=typeof l>"u";d&&(l=1);var m=Ze(s)?s.create:Ze(o)?o.create:null;s=s.valueOf(),o&&(o=o.valueOf()),c===!0&&(s=Tt(s),o=Tt(o));var h=0;if(typeof o<"u"){if(o.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var p=0,v=o.length;p<v;p++){if(!Ke(o[p])||o[p]<0)throw new Error("Weights must be an array of positive numbers");h+=o[p]}}for(var C=s.length,N=[],A;N.length<l;){if(typeof o>"u")A=s[Math.floor(a()*C)];else for(var b=a()*h,g=0,w=s.length;g<w;g++)if(b-=o[g],b<0){A=s[g];break}N.push(A)}return d?N[0]:m?m(N):N}});function Ky(t,e){var r=[];if(t=t.slice(0),t.length>1)for(var n=0,a=t.shift();n<a;n++)r.push(Ky(t,e));else for(var i=0,s=t.shift();i<s;i++)r.push(e());return r}var zS="random",kte=["typed","config","?on"],$te=q(zS,kte,t=>{var{typed:e,config:r,on:n}=t,a=qu(r.randomSeed);return n&&n("config",function(u,l){u.randomSeed!==l.randomSeed&&(a=qu(u.randomSeed))}),e(zS,{"":()=>s(0,1),number:u=>s(0,u),"number, number":(u,l)=>s(u,l),"Array | Matrix":u=>i(u,0,1),"Array | Matrix, number":(u,l)=>i(u,0,l),"Array | Matrix, number, number":(u,l,o)=>i(u,l,o)});function i(u,l,o){var c=Ky(u.valueOf(),()=>s(l,o));return Ze(u)?u.create(c,"number"):c}function s(u,l){return u+a()*(l-u)}}),VS="randomInt",Lte=["typed","config","log2","?on"],zte=q(VS,Lte,t=>{var{typed:e,config:r,log2:n,on:a}=t,i=qu(r.randomSeed);return a&&a("config",function(o,c){o.randomSeed!==c.randomSeed&&(i=qu(o.randomSeed))}),e(VS,{"":()=>u(0,2),number:o=>u(0,o),"number, number":(o,c)=>u(o,c),bigint:o=>l(0n,o),"bigint, bigint":l,"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,c)=>s(o,0,c),"Array | Matrix, number, number":(o,c,d)=>s(o,c,d)});function s(o,c,d){var m=Ky(o.valueOf(),()=>u(c,d));return Ze(o)?o.create(m,"number"):m}function u(o,c){return Math.floor(o+i()*(c-o))}function l(o,c){var d=2n**30n,m=c-o;if(m<=d)return o+BigInt(u(0,Number(m)));for(var h=n(m),p=m;p>=m;){p=0n;for(var v=0;v<h;++v)p=2n*p+(i()<.5?0n:1n)}return o+p}}),US="stirlingS2",Vte=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],Ute=q(US,Vte,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:a,divideScalar:i,pow:s,factorial:u,combinations:l,isNegative:o,isInteger:c,number:d,bignumber:m,larger:h}=t,p=[],v=[];return e(US,{"number | BigNumber, number | BigNumber":function(N,A){if(!c(N)||o(N)||!c(A)||o(A))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(A,N))throw new TypeError("k must be less than or equal to n in function stirlingS2");var b=!(Ke(N)&&Ke(A)),g=b?v:p,w=b?m:d,x=d(N),_=d(A);if(g[x]&&g[x].length>_)return g[x][_];for(var E=0;E<=x;++E)if(g[E]||(g[E]=[w(E===0?1:0)]),E!==0)for(var D=g[E],T=g[E-1],M=D.length;M<=E&&M<=_;++M)M===E?D[M]=1:D[M]=r(a(w(M),T[M]),T[M-1]);return g[x][_]}})}),qS="bellNumbers",qte=["typed","addScalar","isNegative","isInteger","stirlingS2"],Hte=q(qS,qte,t=>{var{typed:e,addScalar:r,isNegative:n,isInteger:a,stirlingS2:i}=t;return e(qS,{"number | BigNumber":function(u){if(!a(u)||n(u))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,o=0;o<=u;o++)l=r(l,i(u,o));return l}})}),HS="catalan",Gte=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],Wte=q(HS,Gte,t=>{var{typed:e,addScalar:r,divideScalar:n,multiplyScalar:a,combinations:i,isNegative:s,isInteger:u}=t;return e(HS,{"number | BigNumber":function(o){if(!u(o)||s(o))throw new TypeError("Non-negative integer value expected in function catalan");return n(i(a(o,2),o),r(o,1))}})}),GS="composition",Qte=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],Xte=q(GS,Qte,t=>{var{typed:e,addScalar:r,combinations:n,isPositive:a,isNegative:i,isInteger:s,larger:u}=t;return e(GS,{"number | BigNumber, number | BigNumber":function(o,c){if(!s(o)||!a(o)||!s(c)||!a(c))throw new TypeError("Positive integer value expected in function composition");if(u(c,o))throw new TypeError("k must be less than or equal to n in function composition");return n(r(o,-1),r(c,-1))}})}),WS="leafCount",Kte=["parse","typed"],Jte=q(WS,Kte,t=>{var{parse:e,typed:r}=t;function n(a){var i=0;return a.forEach(s=>{i+=n(s)}),i||1}return r(WS,{Node:function(i){return n(i)}})});function QS(t){return _t(t)||wr(t)&&t.isUnary()&&_t(t.args[0])}function Qm(t){return!!(_t(t)||(bs(t)||wr(t))&&t.args.every(Qm)||Ei(t)&&Qm(t.content))}function XS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XS(Object(r),!0).forEach(function(n){Ir(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Yte="simplifyUtil",Zte=["FunctionNode","OperatorNode","SymbolNode"],Jy=q(Yte,Zte,t=>{var{FunctionNode:e,OperatorNode:r,SymbolNode:n}=t,a=!0,i=!1,s="defaultF",u={add:{trivial:a,total:a,commutative:a,associative:a},unaryPlus:{trivial:a,total:a,commutative:a,associative:a},subtract:{trivial:i,total:a,commutative:i,associative:i},multiply:{trivial:a,total:a,commutative:a,associative:a},divide:{trivial:i,total:a,commutative:i,associative:i},paren:{trivial:a,total:a,commutative:a,associative:i},defaultF:{trivial:i,total:a,commutative:i,associative:i}},l={divide:{total:i},log:{total:i}},o={subtract:{total:i},abs:{trivial:a},log:{total:a}};function c(b,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u,x=s;if(typeof b=="string"?x=b:wr(b)?x=b.fn.toString():bs(b)?x=b.name:Ei(b)&&(x="paren"),Ge(w,x)){var _=w[x];if(Ge(_,g))return _[g];if(Ge(u,x))return u[x][g]}if(Ge(w,s)){var E=w[s];return Ge(E,g)?E[g]:u[s][g]}if(Ge(u,x)){var D=u[x];if(Ge(D,g))return D[g]}return u[s][g]}function d(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;return c(b,"commutative",g)}function m(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;return c(b,"associative",g)}function h(b,g){var w=nv({},b);for(var x in g)Ge(b,x)?w[x]=nv(nv({},g[x]),b[x]):w[x]=g[x];return w}function p(b,g){if(!b.args||b.args.length===0)return b;b.args=v(b,g);for(var w=0;w<b.args.length;w++)p(b.args[w],g)}function v(b,g){var w,x=[],_=function(D){for(var T=0;T<D.args.length;T++){var M=D.args[T];wr(M)&&w===M.op?_(M):x.push(M)}};return m(b,g)?(w=b.op,_(b),x):b.args}function C(b,g){if(!(!b.args||b.args.length===0)){for(var w=A(b),x=b.args.length,_=0;_<x;_++)C(b.args[_],g);if(x>2&&m(b,g)){for(var E=b.args.pop();b.args.length>0;)E=w([b.args.pop(),E]);b.args=E.args}}}function N(b,g){if(!(!b.args||b.args.length===0)){for(var w=A(b),x=b.args.length,_=0;_<x;_++)N(b.args[_],g);if(x>2&&m(b,g)){for(var E=b.args.shift();b.args.length>0;)E=w([E,b.args.shift()]);b.args=E.args}}}function A(b){return wr(b)?function(g){try{return new r(b.op,b.fn,g,b.implicit)}catch(w){return console.error(w),[]}}:function(g){return new e(new n(b.name),g)}}return{createMakeNodeFunction:A,hasProperty:c,isCommutative:d,isAssociative:m,mergeContext:h,flatten:p,allChildren:v,unflattenr:C,unflattenl:N,defaultContext:u,realContext:l,positiveContext:o}}),ere="simplify",tre=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],rre=q(ere,tre,t=>{var{typed:e,parse:r,equal:n,resolve:a,simplifyConstant:i,simplifyCore:s,AccessorNode:u,ArrayNode:l,ConstantNode:o,FunctionNode:c,IndexNode:d,ObjectNode:m,OperatorNode:h,ParenthesisNode:p,SymbolNode:v,replacer:C}=t,{hasProperty:N,isCommutative:A,isAssociative:b,mergeContext:g,flatten:w,unflattenr:x,unflattenl:_,createMakeNodeFunction:E,defaultContext:D,realContext:T,positiveContext:M}=Jy({FunctionNode:c,OperatorNode:h,SymbolNode:v});e.addConversion({from:"Object",to:"Map",convert:Nu});var I=e("simplify",{Node:H,"Node, Map":(Q,K)=>H(Q,!1,K),"Node, Map, Object":(Q,K,te)=>H(Q,!1,K,te),"Node, Array":H,"Node, Array, Map":H,"Node, Array, Map, Object":H});e.removeConversion({from:"Object",to:"Map",convert:Nu}),I.defaultContext=D,I.realContext=T,I.positiveContext=M;function P(Q){return Q.transform(function(K){return Ei(K)?P(K.content):K})}var B={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};I.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},i,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},i,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function $(Q,K){var te={};if(Q.s){var se=Q.s.split("->");if(se.length===2)te.l=se[0],te.r=se[1];else throw SyntaxError("Could not parse rule: "+Q.s)}else te.l=Q.l,te.r=Q.r;te.l=P(r(te.l)),te.r=P(r(te.r));for(var ue of["imposeContext","repeat","assuming"])ue in Q&&(te[ue]=Q[ue]);if(Q.evaluate&&(te.evaluate=r(Q.evaluate)),b(te.l,K)){var ve=!A(te.l,K),he;ve&&(he=L());var Me=E(te.l),$e=L();te.expanded={},te.expanded.l=Me([te.l,$e]),w(te.expanded.l,K),x(te.expanded.l,K),te.expanded.r=Me([te.r,$e]),ve&&(te.expandedNC1={},te.expandedNC1.l=Me([he,te.l]),te.expandedNC1.r=Me([he,te.r]),te.expandedNC2={},te.expandedNC2.l=Me([he,te.expanded.l]),te.expandedNC2.r=Me([he,te.expanded.r]))}return te}function R(Q,K){for(var te=[],se=0;se<Q.length;se++){var ue=Q[se],ve=void 0,he=typeof ue;switch(he){case"string":ue={s:ue};case"object":ve=$(ue,K);break;case"function":ve=ue;break;default:throw TypeError("Unsupported type of rule: "+he)}te.push(ve)}return te}var G=0;function L(){return new v("_p"+G++)}function H(Q,K){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lc(),se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ue=se.consoleDebug;K=R(K||I.rules,se.context);var ve=a(Q,te);ve=P(ve);for(var he={},Me=ve.toString({parenthesis:"all"});!he[Me];){he[Me]=!0,G=0;var $e=Me;ue&&console.log("Working on: ",Me);for(var Ve=0;Ve<K.length;Ve++){var Be="";if(typeof K[Ve]=="function"?(ve=K[Ve](ve,se),ue&&(Be=K[Ve].name)):(w(ve,se.context),ve=ie(ve,K[Ve],se.context),ue&&(Be="".concat(K[Ve].l.toString()," -> ").concat(K[Ve].r.toString()))),ue){var Le=ve.toString({parenthesis:"all"});Le!==$e&&(console.log("Applying",Be,"produced",Le),$e=Le)}_(ve,se.context)}Me=ve.toString({parenthesis:"all"})}return ve}function Z(Q,K,te){var se=Q;if(Q)for(var ue=0;ue<Q.length;++ue){var ve=ie(Q[ue],K,te);ve!==Q[ue]&&(se===Q&&(se=Q.slice()),se[ue]=ve)}return se}function ie(Q,K,te){if(K.assuming){for(var se in K.assuming)for(var ue in K.assuming[se])if(N(se,ue,te)!==K.assuming[se][ue])return Q}var ve=g(K.imposeContext,te),he=Q;if(he instanceof h||he instanceof c){var Me=Z(he.args,K,te);Me!==he.args&&(he=he.clone(),he.args=Me)}else if(he instanceof p){if(he.content){var $e=ie(he.content,K,te);$e!==he.content&&(he=new p($e))}}else if(he instanceof l){var Ve=Z(he.items,K,te);Ve!==he.items&&(he=new l(Ve))}else if(he instanceof u){var Be=he.object;he.object&&(Be=ie(he.object,K,te));var Le=he.index;he.index&&(Le=ie(he.index,K,te)),(Be!==he.object||Le!==he.index)&&(he=new u(Be,Le))}else if(he instanceof d){var W=Z(he.dimensions,K,te);W!==he.dimensions&&(he=new d(W))}else if(he instanceof m){var re=!1,fe={};for(var z in he.properties)fe[z]=ie(he.properties[z],K,te),fe[z]!==he.properties[z]&&(re=!0);re&&(he=new m(fe))}var J=K.r,ne=le(K.l,he,ve)[0];if(!ne&&K.expanded&&(J=K.expanded.r,ne=le(K.expanded.l,he,ve)[0]),!ne&&K.expandedNC1&&(J=K.expandedNC1.r,ne=le(K.expandedNC1.l,he,ve)[0],ne||(J=K.expandedNC2.r,ne=le(K.expandedNC2.l,he,ve)[0])),ne){var oe=he.implicit;he=J.clone(),oe&&"implicit"in J&&(he.implicit=!0),he=he.transform(function(ce){return ce.isSymbolNode&&Ge(ne.placeholders,ce.name)?ne.placeholders[ce.name].clone():ce})}return K.repeat&&he!==Q&&(he=ie(he,K,te)),he}function k(Q,K){var te=[],se,ue,ve=E(Q);if(A(Q,K))for(var he=0;he<Q.args.length;he++)ue=Q.args.slice(0),ue.splice(he,1),se=ue.length===1?ue[0]:ve(ue),te.push(ve([Q.args[he],se]));else for(var Me=1;Me<Q.args.length;Me++){var $e=Q.args[0];Me>1&&($e=ve(Q.args.slice(0,Me))),ue=Q.args.slice(Me),se=ue.length===1?ue[0]:ve(ue),te.push(ve([$e,se]))}return te}function Y(Q,K){var te={placeholders:{}};if(!Q.placeholders&&!K.placeholders)return te;if(Q.placeholders){if(!K.placeholders)return Q}else return K;for(var se in Q.placeholders)if(Ge(Q.placeholders,se)&&(te.placeholders[se]=Q.placeholders[se],Ge(K.placeholders,se)&&!de(Q.placeholders[se],K.placeholders[se])))return null;for(var ue in K.placeholders)Ge(K.placeholders,ue)&&(te.placeholders[ue]=K.placeholders[ue]);return te}function V(Q,K){var te=[];if(Q.length===0||K.length===0)return te;for(var se,ue=0;ue<Q.length;ue++)for(var ve=0;ve<K.length;ve++)se=Y(Q[ue],K[ve]),se&&te.push(se);return te}function xe(Q){if(Q.length===0)return Q;for(var K=Q.reduce(V),te=[],se={},ue=0;ue<K.length;ue++){var ve=JSON.stringify(K[ue],C);se[ve]||(se[ve]=!0,te.push(K[ue]))}return te}function le(Q,K,te,se){var ue=[{placeholders:{}}];if(Q instanceof h&&K instanceof h||Q instanceof c&&K instanceof c){if(Q instanceof h){if(Q.op!==K.op||Q.fn!==K.fn)return[]}else if(Q instanceof c&&Q.name!==K.name)return[];if(K.args.length===1&&Q.args.length===1||!b(K,te)&&K.args.length===Q.args.length||se){for(var ve=[],he=0;he<Q.args.length;he++){var Me=le(Q.args[he],K.args[he],te);if(Me.length===0)break;ve.push(Me)}if(ve.length!==Q.args.length){if(!A(K,te)||Q.args.length===1)return[];if(Q.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var $e=le(Q.args[0],K.args[1],te);if($e.length===0)return[];var Ve=le(Q.args[1],K.args[0],te);if(Ve.length===0)return[];ve=[$e,Ve]}ue=xe(ve)}else if(K.args.length>=2&&Q.args.length===2){for(var Be=k(K,te),Le=[],W=0;W<Be.length;W++){var re=le(Q,Be[W],te,!0);Le=Le.concat(re)}return Le}else{if(Q.args.length>2)throw Error("Unexpected non-binary associative function: "+Q.toString());return[]}}else if(Q instanceof v){if(Q.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(B[Q.name]){if(Q.name!==K.name)return[]}else switch(Q.name[1]>="a"&&Q.name[1]<="z"?Q.name.substring(0,2):Q.name[0]){case"n":case"_p":ue[0].placeholders[Q.name]=K;break;case"c":case"cl":if(_t(K))ue[0].placeholders[Q.name]=K;else return[];break;case"v":if(!_t(K))ue[0].placeholders[Q.name]=K;else return[];break;case"vl":if(Xr(K))ue[0].placeholders[Q.name]=K;else return[];break;case"cd":if(QS(K))ue[0].placeholders[Q.name]=K;else return[];break;case"vd":if(!QS(K))ue[0].placeholders[Q.name]=K;else return[];break;case"ce":if(Qm(K))ue[0].placeholders[Q.name]=K;else return[];break;case"ve":if(!Qm(K))ue[0].placeholders[Q.name]=K;else return[];break;default:throw new Error("Invalid symbol in rule: "+Q.name)}}else if(Q instanceof o){if(!n(Q.value,K.value))return[]}else return[];return ue}function de(Q,K){if(Q instanceof o&&K instanceof o){if(!n(Q.value,K.value))return!1}else if(Q instanceof v&&K instanceof v){if(Q.name!==K.name)return!1}else if(Q instanceof h&&K instanceof h||Q instanceof c&&K instanceof c){if(Q instanceof h){if(Q.op!==K.op||Q.fn!==K.fn)return!1}else if(Q instanceof c&&Q.name!==K.name)return!1;if(Q.args.length!==K.args.length)return!1;for(var te=0;te<Q.args.length;te++)if(!de(Q.args[te],K.args[te]))return!1}else return!1;return!0}return I}),nre="simplifyConstant",are=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],ire=q(nre,are,t=>{var{typed:e,config:r,mathWithTransform:n,matrix:a,fraction:i,bignumber:s,AccessorNode:u,ArrayNode:l,ConstantNode:o,FunctionNode:c,IndexNode:d,ObjectNode:m,OperatorNode:h,SymbolNode:p}=t,{isCommutative:v,isAssociative:C,allChildren:N,createMakeNodeFunction:A}=Jy({FunctionNode:c,OperatorNode:h,SymbolNode:p}),b=e("simplifyConstant",{Node:$=>_(B($,{})),"Node, Object":function(R,G){return _(B(R,G))}});function g($){return rf($)?$.valueOf():$ instanceof Array?$.map(g):Ze($)?a(g($.valueOf())):$}function w($,R,G){try{return n[$].apply(null,R)}catch{return R=R.map(g),D(n[$].apply(null,R),G)}}var x=e({Fraction:M,number:function(R){return R<0?T(new o(-R)):new o(R)},BigNumber:function(R){return R<0?T(new o(-R)):new o(R)},bigint:function(R){return R<0n?T(new o(-R)):new o(R)},Complex:function(R){throw new Error("Cannot convert Complex number to Node")},string:function(R){return new o(R)},Matrix:function(R){return new l(R.valueOf().map(G=>x(G)))}});function _($){return Gt($)?$:x($)}function E($,R){var G=R&&R.exactFractions!==!1;if(G&&isFinite($)&&i){var L=i($),H=R&&typeof R.fractionsLimit=="number"?R.fractionsLimit:1/0;if(L.valueOf()===$&&L.n<H&&L.d<H)return L}return $}var D=e({"string, Object":function(R,G){var L=Ds(R,r);if(L==="BigNumber")return s===void 0&&Ly(),s(R);if(L==="bigint")return BigInt(R);if(L==="Fraction")return i===void 0&&v4(),i(R);var H=parseFloat(R);return E(H,G)},"Fraction, Object":function(R,G){return R},"BigNumber, Object":function(R,G){return R},"number, Object":function(R,G){return E(R,G)},"bigint, Object":function(R,G){return R},"Complex, Object":function(R,G){return R.im!==0?R:E(R.re,G)},"Matrix, Object":function(R,G){return a(E(R.valueOf()))},"Array, Object":function(R,G){return R.map(E)}});function T($){return new h("-","unaryMinus",[$])}function M($){var R=H=>r.number==="BigNumber"&&s?s(H):Number(H),G=$.s*$.n,L=G<0n?new h("-","unaryMinus",[new o(-R(G))]):new o(R(G));return $.d===1n?L:new h("/","divide",[L,new o(R($.d))])}function I($,R,G){if(!nl(R))return new u(_($),_(R));if(ia($)||Ze($)){for(var L=Array.from(R.dimensions);L.length>0;)if(_t(L[0])&&typeof L[0].value!="string"){var H=D(L.shift().value,G);ia($)?$=$.items[H-1]:($=$.valueOf()[H-1],$ instanceof Array&&($=a($)))}else if(L.length>1&&_t(L[1])&&typeof L[1].value!="string"){var Z=D(L[1].value,G),ie=[],k=ia($)?$.items:$.valueOf();for(var Y of k)if(ia(Y))ie.push(Y.items[Z-1]);else if(Ze($))ie.push(Y[Z-1]);else break;if(ie.length===k.length)ia($)?$=new l(ie):$=a(ie),L.splice(1,1);else break}else break;return L.length===R.dimensions.length?new u(_($),R):L.length>0?(R=new d(L),new u(_($),R)):$}if(Ph($)&&R.dimensions.length===1&&_t(R.dimensions[0])){var V=R.dimensions[0].value;return V in $.properties?$.properties[V]:new o}return new u(_($),R)}function P($,R,G,L){var H=R.shift(),Z=R.reduce((ie,k)=>{if(!Gt(k)){var Y=ie.pop();if(Gt(Y))return[Y,k];try{return ie.push(w($,[Y,k],L)),ie}catch{ie.push(Y)}}ie.push(_(ie.pop()));var V=ie.length===1?ie[0]:G(ie);return[G([V,_(k)])]},[H]);return Z.length===1?Z[0]:G([Z[0],x(Z[1])])}function B($,R){switch($.type){case"SymbolNode":return $;case"ConstantNode":switch(typeof $.value){case"number":return D($.value,R);case"bigint":return D($.value,R);case"string":return $.value;default:if(!isNaN($.value))return D($.value,R)}return $;case"FunctionNode":if(n[$.name]&&n[$.name].rawArgs)return $;{var G=["add","multiply"];if(!G.includes($.name)){var L=$.args.map(se=>B(se,R));if(!L.some(Gt))try{return w($.name,L,R)}catch{}if($.name==="size"&&L.length===1&&ia(L[0])){for(var H=[],Z=L[0];ia(Z);)H.push(Z.items.length),Z=Z.items[0];return a(H)}return new c($.name,L.map(_))}}case"OperatorNode":{var ie=$.fn.toString(),k,Y,V=A($);if(wr($)&&$.isUnary())k=[B($.args[0],R)],Gt(k[0])?Y=V(k):Y=w(ie,k,R);else if(C($,R.context))if(k=N($,R.context),k=k.map(se=>B(se,R)),v(ie,R.context)){for(var xe=[],le=[],de=0;de<k.length;de++)Gt(k[de])?le.push(k[de]):xe.push(k[de]);xe.length>1?(Y=P(ie,xe,V,R),le.unshift(Y),Y=P(ie,le,V,R)):Y=P(ie,k,V,R)}else Y=P(ie,k,V,R);else k=$.args.map(se=>B(se,R)),Y=P(ie,k,V,R);return Y}case"ParenthesisNode":return B($.content,R);case"AccessorNode":return I(B($.object,R),B($.index,R),R);case"ArrayNode":{var Q=$.items.map(se=>B(se,R));return Q.some(Gt)?new l(Q.map(_)):a(Q)}case"IndexNode":return new d($.dimensions.map(se=>b(se,R)));case"ObjectNode":{var K={};for(var te in $.properties)K[te]=b($.properties[te],R);return new m(K)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat($.type))}}return b}),KS="simplifyCore",sre=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],ore=q(KS,sre,t=>{var{typed:e,parse:r,equal:n,isZero:a,add:i,subtract:s,multiply:u,divide:l,pow:o,AccessorNode:c,ArrayNode:d,ConstantNode:m,FunctionNode:h,IndexNode:p,ObjectNode:v,OperatorNode:C,ParenthesisNode:N,SymbolNode:A}=t,b=new m(0),g=new m(1),w=new m(!0),x=new m(!1);function _(M){return wr(M)&&["and","not","or"].includes(M.op)}var{hasProperty:E,isCommutative:D}=Jy({FunctionNode:h,OperatorNode:C,SymbolNode:A});function T(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=I?I.context:void 0;if(E(M,"trivial",P)){if(bs(M)&&M.args.length===1)return T(M.args[0],I);var B=!1,$=0;if(M.forEach(le=>{++$,$===1&&(B=T(le,I))}),$===1)return B}var R=M;if(bs(R)){var G=rQ(R.name);if(G){if(R.args.length>2&&E(R,"associative",P))for(;R.args.length>2;){var L=R.args.pop(),H=R.args.pop();R.args.push(new C(G,R.name,[L,H]))}R=new C(G,R.name,R.args)}else return new h(T(R.fn),R.args.map(le=>T(le,I)))}if(wr(R)&&R.isUnary()){var Z=T(R.args[0],I);if(R.op==="~"&&wr(Z)&&Z.isUnary()&&Z.op==="~"||R.op==="not"&&wr(Z)&&Z.isUnary()&&Z.op==="not"&&_(Z.args[0]))return Z.args[0];var ie=!0;if(R.op==="-"&&wr(Z)&&(Z.isBinary()&&Z.fn==="subtract"&&(R=new C("-","subtract",[Z.args[1],Z.args[0]]),ie=!1),Z.isUnary()&&Z.op==="-"))return Z.args[0];if(ie)return new C(R.op,R.fn,[Z])}if(wr(R)&&R.isBinary()){var k=T(R.args[0],I),Y=T(R.args[1],I);if(R.op==="+"){if(_t(k)&&a(k.value))return Y;if(_t(Y)&&a(Y.value))return k;wr(Y)&&Y.isUnary()&&Y.op==="-"&&(Y=Y.args[0],R=new C("-","subtract",[k,Y]))}if(R.op==="-")return wr(Y)&&Y.isUnary()&&Y.op==="-"?T(new C("+","add",[k,Y.args[0]]),I):_t(k)&&a(k.value)?T(new C("-","unaryMinus",[Y])):_t(Y)&&a(Y.value)?k:new C(R.op,R.fn,[k,Y]);if(R.op==="*"){if(_t(k)){if(a(k.value))return b;if(n(k.value,1))return Y}if(_t(Y)){if(a(Y.value))return b;if(n(Y.value,1))return k;if(D(R,P))return new C(R.op,R.fn,[Y,k],R.implicit)}return new C(R.op,R.fn,[k,Y],R.implicit)}if(R.op==="/")return _t(k)&&a(k.value)?b:_t(Y)&&n(Y.value,1)?k:new C(R.op,R.fn,[k,Y]);if(R.op==="^"&&_t(Y)){if(a(Y.value))return g;if(n(Y.value,1))return k}if(R.op==="and"){if(_t(k))if(k.value){if(_(Y))return Y;if(_t(Y))return Y.value?w:x}else return x;if(_t(Y))if(Y.value){if(_(k))return k}else return x}if(R.op==="or"){if(_t(k)){if(k.value)return w;if(_(Y))return Y}if(_t(Y)){if(Y.value)return w;if(_(k))return k}}return new C(R.op,R.fn,[k,Y])}if(wr(R))return new C(R.op,R.fn,R.args.map(le=>T(le,I)));if(ia(R))return new d(R.items.map(le=>T(le,I)));if(fo(R))return new c(T(R.object,I),T(R.index,I));if(nl(R))return new p(R.dimensions.map(le=>T(le,I)));if(Ph(R)){var V={};for(var xe in R.properties)V[xe]=T(R.properties[xe],I);return new v(V)}return R}return e(KS,{Node:T,"Node,Object":T})}),ure="resolve",lre=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],cre=q(ure,lre,t=>{var{typed:e,parse:r,ConstantNode:n,FunctionNode:a,OperatorNode:i,ParenthesisNode:s}=t;function u(l,o){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!o)return l;if(Xr(l)){if(c.has(l.name)){var d=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(d,"}"))}var m=o.get(l.name);if(Gt(m)){var h=new Set(c);return h.add(l.name),u(m,o,h)}else return typeof m=="number"?r(String(m)):m!==void 0?new n(m):l}else if(wr(l)){var p=l.args.map(function(C){return u(C,o,c)});return new i(l.op,l.fn,p,l.implicit)}else{if(Ei(l))return new s(u(l.content,o,c));if(bs(l)){var v=l.args.map(function(C){return u(C,o,c)});return new a(l.name,v)}}return l.map(C=>u(C,o,c))}return e("resolve",{Node:u,"Node, Map | null | undefined":u,"Node, Object":(l,o)=>u(l,Nu(o)),"Array | Matrix":e.referToSelf(l=>o=>o.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>o=>o.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(o,c)=>l(o,Nu(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(o,c)=>l(o,Nu(c))),"Array | Matrix, Map":e.referToSelf(l=>(o,c)=>o.map(d=>l(d,c)))})}),JS="symbolicEqual",fre=["parse","simplify","typed","OperatorNode"],dre=q(JS,fre,t=>{var{parse:e,simplify:r,typed:n,OperatorNode:a}=t;function i(s,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=new a("-","subtract",[s,u]),c=r(o,{},l);return _t(c)&&!c.value}return n(JS,{"Node, Node":i,"Node, Node, Object":i})}),YS="derivative",mre=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],hre=q(YS,mre,t=>{var{typed:e,config:r,parse:n,simplify:a,equal:i,isZero:s,numeric:u,ConstantNode:l,FunctionNode:o,OperatorNode:c,ParenthesisNode:d,SymbolNode:m}=t;function h(g,w){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},_=new Map,E=w.name;function D(M){var I=_.get(M);if(I!==void 0)return I;var P=N(D,M,E);return _.set(M,P),P}var T=A(g,D);return x.simplify?a(T):T}function p(g){var w=n(g);if(!w.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(g)," into a variable in function derivative"));return w}var v=e(YS,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h,"Node, string":(g,w)=>h(g,p(w)),"Node, string, Object":(g,w,x)=>h(g,p(w),x)});v._simplify=!0,v.toTex=function(g){return C.apply(null,g.args)};var C=e("_derivTex",{"Node, SymbolNode":function(w,x){return _t(w)&&Kt(w.value)==="string"?C(n(w.value).toString(),x.toString(),1):C(w.toTex(),x.toString(),1)},"Node, ConstantNode":function(w,x){if(Kt(x.value)==="string")return C(w,n(x.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(w,x,_){return C(w.toString(),x.name,_.value)},"string, string, number":function(w,x,_){var E;return _===1?E="{d\\over d"+x+"}":E="{d^{"+_+"}\\over d"+x+"^{"+_+"}}",E+"\\left[".concat(w,"\\right]")}}),N=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(w,x,_){return x.name!==_},"function, ParenthesisNode, string":function(w,x,_){return w(x.content,_)},"function, FunctionAssignmentNode, string":function(w,x,_){return x.params.includes(_)?w(x.expr,_):!0},"function, FunctionNode | OperatorNode, string":function(w,x,_){return x.args.every(E=>w(E,_))}}),A=e("_derivative",{"ConstantNode, function":function(){return b(0)},"SymbolNode, function":function(w,x){return x(w)?b(0):b(1)},"ParenthesisNode, function":function(w,x){return new d(A(w.content,x))},"FunctionAssignmentNode, function":function(w,x){return x(w)?b(0):A(w.expr,x)},"FunctionNode, function":function(w,x){if(x(w))return b(0);var _=w.args[0],E,D=!1,T=!1,M;switch(w.name){case"cbrt":D=!0,M=new c("*","multiply",[b(3),new c("^","pow",[_,new c("/","divide",[b(2),b(3)])])]);break;case"sqrt":case"nthRoot":if(w.args.length===1)D=!0,M=new c("*","multiply",[b(2),new o("sqrt",[_])]);else if(w.args.length===2)return E=new c("/","divide",[b(1),w.args[1]]),A(new c("^","pow",[_,E]),x);break;case"log10":E=b(10);case"log":if(!E&&w.args.length===1)M=_.clone(),D=!0;else if(w.args.length===1&&E||w.args.length===2&&x(w.args[1]))M=new c("*","multiply",[_.clone(),new o("log",[E||w.args[1]])]),D=!0;else if(w.args.length===2)return A(new c("/","divide",[new o("log",[_]),new o("log",[w.args[1]])]),x);break;case"pow":if(w.args.length===2)return A(new c("^","pow",[_,w.args[1]]),x);break;case"exp":M=new o("exp",[_.clone()]);break;case"sin":M=new o("cos",[_.clone()]);break;case"cos":M=new c("-","unaryMinus",[new o("sin",[_.clone()])]);break;case"tan":M=new c("^","pow",[new o("sec",[_.clone()]),b(2)]);break;case"sec":M=new c("*","multiply",[w,new o("tan",[_.clone()])]);break;case"csc":T=!0,M=new c("*","multiply",[w,new o("cot",[_.clone()])]);break;case"cot":T=!0,M=new c("^","pow",[new o("csc",[_.clone()]),b(2)]);break;case"asin":D=!0,M=new o("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[_.clone(),b(2)])])]);break;case"acos":D=!0,T=!0,M=new o("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[_.clone(),b(2)])])]);break;case"atan":D=!0,M=new c("+","add",[new c("^","pow",[_.clone(),b(2)]),b(1)]);break;case"asec":D=!0,M=new c("*","multiply",[new o("abs",[_.clone()]),new o("sqrt",[new c("-","subtract",[new c("^","pow",[_.clone(),b(2)]),b(1)])])]);break;case"acsc":D=!0,T=!0,M=new c("*","multiply",[new o("abs",[_.clone()]),new o("sqrt",[new c("-","subtract",[new c("^","pow",[_.clone(),b(2)]),b(1)])])]);break;case"acot":D=!0,T=!0,M=new c("+","add",[new c("^","pow",[_.clone(),b(2)]),b(1)]);break;case"sinh":M=new o("cosh",[_.clone()]);break;case"cosh":M=new o("sinh",[_.clone()]);break;case"tanh":M=new c("^","pow",[new o("sech",[_.clone()]),b(2)]);break;case"sech":T=!0,M=new c("*","multiply",[w,new o("tanh",[_.clone()])]);break;case"csch":T=!0,M=new c("*","multiply",[w,new o("coth",[_.clone()])]);break;case"coth":T=!0,M=new c("^","pow",[new o("csch",[_.clone()]),b(2)]);break;case"asinh":D=!0,M=new o("sqrt",[new c("+","add",[new c("^","pow",[_.clone(),b(2)]),b(1)])]);break;case"acosh":D=!0,M=new o("sqrt",[new c("-","subtract",[new c("^","pow",[_.clone(),b(2)]),b(1)])]);break;case"atanh":D=!0,M=new c("-","subtract",[b(1),new c("^","pow",[_.clone(),b(2)])]);break;case"asech":D=!0,T=!0,M=new c("*","multiply",[_.clone(),new o("sqrt",[new c("-","subtract",[b(1),new c("^","pow",[_.clone(),b(2)])])])]);break;case"acsch":D=!0,T=!0,M=new c("*","multiply",[new o("abs",[_.clone()]),new o("sqrt",[new c("+","add",[new c("^","pow",[_.clone(),b(2)]),b(1)])])]);break;case"acoth":D=!0,T=!0,M=new c("-","subtract",[b(1),new c("^","pow",[_.clone(),b(2)])]);break;case"abs":M=new c("/","divide",[new o(new m("abs"),[_.clone()]),_.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+w.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var I,P;D?(I="/",P="divide"):(I="*",P="multiply");var B=A(_,x);return T&&(B=new c("-","unaryMinus",[B])),new c(I,P,[B,M])},"OperatorNode, function":function(w,x){if(x(w))return b(0);if(w.op==="+")return new c(w.op,w.fn,w.args.map(function(R){return A(R,x)}));if(w.op==="-"){if(w.isUnary())return new c(w.op,w.fn,[A(w.args[0],x)]);if(w.isBinary())return new c(w.op,w.fn,[A(w.args[0],x),A(w.args[1],x)])}if(w.op==="*"){var _=w.args.filter(function(R){return x(R)});if(_.length>0){var E=w.args.filter(function(R){return!x(R)}),D=E.length===1?E[0]:new c("*","multiply",E),T=_.concat(A(D,x));return new c("*","multiply",T)}return new c("+","add",w.args.map(function(R){return new c("*","multiply",w.args.map(function(G){return G===R?A(G,x):G.clone()}))}))}if(w.op==="/"&&w.isBinary()){var M=w.args[0],I=w.args[1];return x(I)?new c("/","divide",[A(M,x),I]):x(M)?new c("*","multiply",[new c("-","unaryMinus",[M]),new c("/","divide",[A(I,x),new c("^","pow",[I.clone(),b(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[A(M,x),I.clone()]),new c("*","multiply",[M.clone(),A(I,x)])]),new c("^","pow",[I.clone(),b(2)])])}if(w.op==="^"&&w.isBinary()){var P=w.args[0],B=w.args[1];if(x(P))return _t(P)&&(s(P.value)||i(P.value,1))?b(0):new c("*","multiply",[w,new c("*","multiply",[new o("log",[P.clone()]),A(B.clone(),x)])]);if(x(B)){if(_t(B)){if(s(B.value))return b(0);if(i(B.value,1))return A(P,x)}var $=new c("^","pow",[P.clone(),new c("-","subtract",[B,b(1)])]);return new c("*","multiply",[B.clone(),new c("*","multiply",[A(P,x),$])])}return new c("*","multiply",[new c("^","pow",[P.clone(),B.clone()]),new c("+","add",[new c("*","multiply",[A(P,x),new c("/","divide",[B.clone(),P.clone()])]),new c("*","multiply",[A(B,x),new o("log",[P.clone()])])])])}throw new Error('Cannot process operator "'+w.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function b(g,w){return new l(u(g,Ds(String(g),r)))}return v}),ZS="rationalize",pre=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],vre=q(ZS,pre,t=>{var{config:e,typed:r,equal:n,isZero:a,add:i,subtract:s,multiply:u,divide:l,pow:o,parse:c,simplifyConstant:d,simplifyCore:m,simplify:h,fraction:p,bignumber:v,mathWithTransform:C,matrix:N,AccessorNode:A,ArrayNode:b,ConstantNode:g,FunctionNode:w,IndexNode:x,ObjectNode:_,OperatorNode:E,SymbolNode:D,ParenthesisNode:T}=t;function M(R){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,H=P(),Z=I(R,G,!0,H.firstRules),ie=Z.variables.length,k={exactFractions:!1},Y={exactFractions:!0};if(R=Z.expression,ie>=1){R=B(R);var V,xe,le=!0,de=!1;R=h(R,H.firstRules,{},k);for(var Q;xe=le?H.distrDivRules:H.sucDivRules,R=h(R,xe,{},Y),le=!le,Q=R.toString(),Q!==V;)de=!0,V=Q;de&&(R=h(R,H.firstRulesAgain,{},k)),R=h(R,H.finalRules,{},k)}var K=[],te={};return R.type==="OperatorNode"&&R.isBinary()&&R.op==="/"?(ie===1&&(R.args[0]=$(R.args[0],K),R.args[1]=$(R.args[1])),L&&(te.numerator=R.args[0],te.denominator=R.args[1])):(ie===1&&(R=$(R,K)),L&&(te.numerator=R,te.denominator=null)),L?(te.coefficients=K,te.variables=Z.variables,te.expression=R,te):R}return r(ZS,{Node:M,"Node, boolean":(R,G)=>M(R,{},G),"Node, Object":M,"Node, Object, boolean":M});function I(R,G,L,H){var Z=[],ie=h(R,H,G,{exactFractions:!1});L=!!L;var k="+-*"+(L?"/":"");V(ie);var Y={};return Y.expression=ie,Y.variables=Z,Y;function V(xe){var le=xe.type;if(le==="FunctionNode")throw new Error("There is an unsolved function call");if(le==="OperatorNode")if(xe.op==="^"){if(xe.args[1].type!=="ConstantNode"||!Qe(parseFloat(xe.args[1].value)))throw new Error("There is a non-integer exponent");V(xe.args[0])}else{if(!k.includes(xe.op))throw new Error("Operator "+xe.op+" invalid in polynomial expression");for(var de=0;de<xe.args.length;de++)V(xe.args[de])}else if(le==="SymbolNode"){var Q=xe.name,K=Z.indexOf(Q);K===-1&&Z.push(Q)}else if(le==="ParenthesisNode")V(xe.content);else if(le!=="ConstantNode")throw new Error("type "+le+" is not allowed in polynomial expression")}}function P(){var R=[m,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},d,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],G=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],L=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],H=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],Z={};return Z.firstRules=R.concat(G,H),Z.distrDivRules=L,Z.sucDivRules=H,Z.firstRulesAgain=R.concat(G),Z.finalRules=[m,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},d,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],Z}function B(R,G,L){var H=R.type,Z=arguments.length>1;if(H==="OperatorNode"&&R.isBinary()){var ie=!1,k;if(R.op==="^"&&(R.args[0].type==="ParenthesisNode"||R.args[0].type==="OperatorNode")&&R.args[1].type==="ConstantNode"&&(k=parseFloat(R.args[1].value),ie=k>=2&&Qe(k)),ie){if(k>2){var Y=R.args[0],V=new E("^","pow",[R.args[0].cloneDeep(),new g(k-1)]);R=new E("*","multiply",[Y,V])}else R=new E("*","multiply",[R.args[0],R.args[0].cloneDeep()]);Z&&(L==="content"?G.content=R:G.args[L]=R)}}if(H==="ParenthesisNode")B(R.content,R,"content");else if(H!=="ConstantNode"&&H!=="SymbolNode")for(var xe=0;xe<R.args.length;xe++)B(R.args[xe],R,xe);if(!Z)return R}function $(R,G){G===void 0&&(G=[]),G[0]=0;var L={};L.cte=1,L.oper="+",L.fire="";var H=0,Z="";Q(R,null,L),H=G.length-1;for(var ie=!0,k,Y=H;Y>=0;Y--)if(G[Y]!==0){var V=new g(ie?G[Y]:Math.abs(G[Y])),xe=G[Y]<0?"-":"+";if(Y>0){var le=new D(Z);if(Y>1){var de=new g(Y);le=new E("^","pow",[le,de])}G[Y]===-1&&ie?V=new E("-","unaryMinus",[le]):Math.abs(G[Y])===1?V=le:V=new E("*","multiply",[V,le])}ie?k=V:xe==="+"?k=new E("+","add",[k,V]):k=new E("-","subtract",[k,V]),ie=!1}if(ie)return new g(0);return k;function Q(K,te,se){var ue=K.type;if(ue==="FunctionNode")throw new Error("There is an unsolved function call");if(ue==="OperatorNode"){if(!"+-*^".includes(K.op))throw new Error("Operator "+K.op+" invalid");if(te!==null){if((K.fn==="unaryMinus"||K.fn==="pow")&&te.fn!=="add"&&te.fn!=="subtract"&&te.fn!=="multiply")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="multiply")&&te.fn!=="add"&&te.fn!=="subtract")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="unaryMinus")&&se.noFil!==0)throw new Error("Invalid "+K.op+" placing")}(K.op==="^"||K.op==="*")&&(se.fire=K.op);for(var ve=0;ve<K.args.length;ve++)K.fn==="unaryMinus"&&(se.oper="-"),(K.op==="+"||K.fn==="subtract")&&(se.fire="",se.cte=1,se.oper=ve===0?"+":K.op),se.noFil=ve,Q(K.args[ve],K,se)}else if(ue==="SymbolNode"){if(K.name!==Z&&Z!=="")throw new Error("There is more than one variable");if(Z=K.name,te===null){G[1]=1;return}if(te.op==="^"&&se.noFil!==0)throw new Error("In power the variable should be the first parameter");if(te.op==="*"&&se.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(se.fire===""||se.fire==="*")&&(H<1&&(G[1]=0),G[1]+=se.cte*(se.oper==="+"?1:-1),H=Math.max(1,H))}else if(ue==="ConstantNode"){var he=parseFloat(K.value);if(te===null){G[0]=he;return}if(te.op==="^"){if(se.noFil!==1)throw new Error("Constant cannot be powered");if(!Qe(he)||he<=0)throw new Error("Non-integer exponent is not allowed");for(var Me=H+1;Me<he;Me++)G[Me]=0;he>H&&(G[he]=0),G[he]+=se.cte*(se.oper==="+"?1:-1),H=Math.max(he,H);return}se.cte=he,se.fire===""&&(G[0]+=se.cte*(se.oper==="+"?1:-1))}else throw new Error("Type "+ue+" is not allowed")}}}),eA="zpk2tf",gre=["typed","add","multiply","Complex","number"],yre=q(eA,gre,t=>{var{typed:e,add:r,multiply:n,Complex:a,number:i}=t;return e(eA,{"Array,Array,number":function(o,c,d){return s(o,c,d)},"Array,Array":function(o,c){return s(o,c,1)},"Matrix,Matrix,number":function(o,c,d){return s(o.valueOf(),c.valueOf(),d)},"Matrix,Matrix":function(o,c){return s(o.valueOf(),c.valueOf(),1)}});function s(l,o,c){l.some(A=>A.type==="BigNumber")&&(l=l.map(A=>i(A))),o.some(A=>A.type==="BigNumber")&&(o=o.map(A=>i(A)));for(var d=[a(1,0)],m=[a(1,0)],h=0;h<l.length;h++){var p=l[h];typeof p=="number"&&(p=a(p,0)),d=u(d,[a(1,0),a(-p.re,-p.im)])}for(var v=0;v<o.length;v++){var C=o[v];typeof C=="number"&&(C=a(C,0)),m=u(m,[a(1,0),a(-C.re,-C.im)])}for(var N=0;N<d.length;N++)d[N]=n(d[N],c);return[d,m]}function u(l,o){for(var c=[],d=0;d<l.length+o.length-1;d++){c[d]=a(0,0);for(var m=0;m<l.length;m++)d-m>=0&&d-m<o.length&&(c[d]=r(c[d],n(l[m],o[d-m])))}return c}}),tA="freqz",xre=["typed","add","multiply","Complex","divide","matrix"],bre=q(tA,xre,t=>{var{typed:e,add:r,multiply:n,Complex:a,divide:i,matrix:s}=t;return e(tA,{"Array, Array":function(c,d){var m=l(512);return u(c,d,m)},"Array, Array, Array":function(c,d,m){return u(c,d,m)},"Array, Array, number":function(c,d,m){if(m<0)throw new Error("w must be a positive number");var h=l(m);return u(c,d,h)},"Matrix, Matrix":function(c,d){var m=l(512),{w:h,h:p}=u(c.valueOf(),d.valueOf(),m);return{w:s(h),h:s(p)}},"Matrix, Matrix, Matrix":function(c,d,m){var{h}=u(c.valueOf(),d.valueOf(),m.valueOf());return{h:s(h),w:s(m)}},"Matrix, Matrix, number":function(c,d,m){if(m<0)throw new Error("w must be a positive number");var h=l(m),{h:p}=u(c.valueOf(),d.valueOf(),h);return{h:s(p),w:s(h)}}});function u(o,c,d){for(var m=[],h=[],p=0;p<d.length;p++){for(var v=a(0,0),C=a(0,0),N=0;N<o.length;N++)v=r(v,n(o[N],a(Math.cos(-N*d[p]),Math.sin(-N*d[p]))));for(var A=0;A<c.length;A++)C=r(C,n(c[A],a(Math.cos(-A*d[p]),Math.sin(-A*d[p]))));m.push(v),h.push(C)}for(var b=[],g=0;g<m.length;g++)b.push(i(m[g],h[g]));return{h:b,w:d}}function l(o){for(var c=[],d=0;d<o;d++)c.push(d/o*Math.PI);return c}}),wre="reviver",Nre=["classes"],_re=q(wre,Nre,t=>{var{classes:e}=t;return function(n,a){var i=e[a&&a.mathjs];return i&&typeof i.fromJSON=="function"?i.fromJSON(a):a}}),Ere="replacer",Sre=[],Are=q(Ere,Sre,()=>function(e,r){return typeof r=="number"&&(!isFinite(r)||isNaN(r))?{mathjs:"number",value:String(r)}:typeof r=="bigint"?{mathjs:"bigint",value:String(r)}:r}),Dre="15.0.0",Cre=q("true",[],()=>!0),Tre=q("false",[],()=>!1),Mre=q("null",[],()=>null),Ire=ea("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1/0):1/0}),Pre=ea("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(NaN):NaN}),Fre=ea("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?Uy(r):P$}),Rre=ea("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?sG(r):F$}),Ore=ea("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?aG(r):R$}),Bre=ea("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?iG(r):O$}),jre=ea("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).ln():Math.LN2}),kre=ea("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(10).ln():Math.LN10}),$re=ea("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(2).ln()):Math.LOG2E}),Lre=ea("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(10).ln()):Math.LOG10E}),zre=ea("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r("0.5").sqrt():Math.SQRT1_2}),Vre=ea("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).sqrt():Math.SQRT2}),Ure=ea("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),qre=q("version",[],()=>Dre);function ea(t,e,r){return q(t,e,r,{recreateOnConfigChange:!0})}var Hre=st("speedOfLight","299792458","m s^-1"),Gre=st("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Wre=st("planckConstant","6.62607015e-34","J s"),Qre=st("reducedPlanckConstant","1.0545718176461565e-34","J s"),Xre=st("magneticConstant","1.25663706212e-6","N A^-2"),Kre=st("electricConstant","8.8541878128e-12","F m^-1"),Jre=st("vacuumImpedance","376.730313667","ohm"),Yre=st("coulomb","8.987551792261171e9","N m^2 C^-2"),Zre=st("coulombConstant","8.987551792261171e9","N m^2 C^-2"),ene=st("elementaryCharge","1.602176634e-19","C"),tne=st("bohrMagneton","9.2740100783e-24","J T^-1"),rne=st("conductanceQuantum","7.748091729863649e-5","S"),nne=st("inverseConductanceQuantum","12906.403729652257","ohm"),ane=st("magneticFluxQuantum","2.0678338484619295e-15","Wb"),ine=st("nuclearMagneton","5.0507837461e-27","J T^-1"),sne=st("klitzing","25812.807459304513","ohm"),one=st("bohrRadius","5.29177210903e-11","m"),une=st("classicalElectronRadius","2.8179403262e-15","m"),lne=st("electronMass","9.1093837015e-31","kg"),cne=st("fermiCoupling","1.1663787e-5","GeV^-2"),fne=Vh("fineStructure",.0072973525693),dne=st("hartreeEnergy","4.3597447222071e-18","J"),mne=st("protonMass","1.67262192369e-27","kg"),hne=st("deuteronMass","3.3435830926e-27","kg"),pne=st("neutronMass","1.6749271613e-27","kg"),vne=st("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),gne=st("rydberg","10973731.568160","m^-1"),yne=st("thomsonCrossSection","6.6524587321e-29","m^2"),xne=Vh("weakMixingAngle",.2229),bne=Vh("efimovFactor",22.7),wne=st("atomicMass","1.66053906660e-27","kg"),Nne=st("avogadro","6.02214076e23","mol^-1"),_ne=st("boltzmann","1.380649e-23","J K^-1"),Ene=st("faraday","96485.33212331001","C mol^-1"),Sne=st("firstRadiation","3.7417718521927573e-16","W m^2"),Ane=st("loschmidt","2.686780111798444e25","m^-3"),Dne=st("gasConstant","8.31446261815324","J K^-1 mol^-1"),Cne=st("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Tne=st("molarVolume","0.022413969545014137","m^3 mol^-1"),Mne=Vh("sackurTetrode",-1.16487052358),Ine=st("secondRadiation","0.014387768775039337","m K"),Pne=st("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Fne=st("wienDisplacement","2.897771955e-3","m K"),Rne=st("molarMass","0.99999999965e-3","kg mol^-1"),One=st("molarMassC12","11.9999999958e-3","kg mol^-1"),Bne=st("gravity","9.80665","m s^-2"),jne=st("planckLength","1.616255e-35","m"),kne=st("planckMass","2.176435e-8","kg"),$ne=st("planckTime","5.391245e-44","s"),Lne=st("planckCharge","1.87554603778e-18","C"),zne=st("planckTemperature","1.416785e+32","K");function st(t,e,r){var n=["config","Unit","BigNumber"];return q(t,n,a=>{var{config:i,Unit:s,BigNumber:u}=a,l=i.number==="BigNumber"?new u(e):parseFloat(e),o=new s(l,r);return o.fixPrefix=!0,o})}function Vh(t,e){var r=["config","BigNumber"];return q(t,r,n=>{var{config:a,BigNumber:i}=n;return a.number==="BigNumber"?new i(e):e})}function rA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rA(Object(r),!0).forEach(function(n){Ir(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Une="mapSlices",qne=["typed","isInteger"],Hne=q(Une,qne,t=>{var{typed:e,isInteger:r}=t,n=Rg({typed:e,isInteger:r});return e("mapSlices",{"...any":function(i){var s=i[1];Ke(s)?i[1]=s-1:lt(s)&&(i[1]=s.minus(1));try{return n.apply(null,i)}catch(u){throw In(u)}}})},Vne({isTransformFunction:!0},Rg.meta)),Gne="column",Wne=["typed","Index","matrix","range"],Qne=q(Gne,Wne,t=>{var{typed:e,Index:r,matrix:n,range:a}=t,i=f4({typed:e,Index:r,matrix:n,range:a});return e("column",{"...any":function(u){var l=u.length-1,o=u[l];Ke(o)&&(u[l]=o-1);try{return i.apply(null,u)}catch(c){throw In(c)}}})},{isTransformFunction:!0});function Yy(t,e,r){var n=t.filter(function(l){return Xr(l)&&!(l.name in e)&&!r.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var a=n.name,i=new Map,s=new P3(r,i,new Set([a])),u=t.compile();return function(o){return i.set(a,o),u.evaluate(s)}}var Xne="transformCallback",Kne=["typed"],Zy=q(Xne,Kne,t=>{var{typed:e}=t;return function(n,a){return e.isTypedFunction(n)?r(n,a):nA(n,n.length,a)};function r(n,a){var i=Object.fromEntries(Object.entries(n.signatures).map(s=>{var[u,l]=s,o=u.split(",").length;return e.isTypedFunction(l)?[u,r(l,a)]:[u,nA(l,o,a)]}));return typeof n.name=="string"?e(n.name,i):e(i)}});function nA(t,e,r){return e===r?t:e===r+1?function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.slice(0,r),u=aA(a[r]);return t(...s,u)}:e>r+1?function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.slice(0,r),u=aA(a[r]),l=a.slice(r+1);return t(...s,u,...l)}:t}function aA(t){return t.map(e=>e+1)}var Jne="filter",Yne=["typed"],Zne=q(Jne,Yne,t=>{var{typed:e}=t;function r(a,i,s){var u=d4({typed:e}),l=Zy({typed:e});if(a.length===0)return u();var o=a[0];if(a.length===1)return u(o);var c=a.length-1,d=a[c];return o&&(o=n(o,s)),d&&(Xr(d)||nf(d)?d=n(d,s):d=Yy(d,i,s)),u(o,l(d,c))}r.rawArgs=!0;function n(a,i){return a.compile().evaluate(i)}return r},{isTransformFunction:!0}),eae="forEach",tae=["typed"],rae=q(eae,tae,t=>{var{typed:e}=t,r=m4({typed:e}),n=Zy({typed:e});function a(s,u,l){if(s.length===0)return r();var o=s[0];if(s.length===1)return r(o);var c=s.length-1,d=s[c];return o&&(o=i(o,l)),d&&(Xr(d)||nf(d)?d=i(d,l):d=Yy(d,u,l)),r(o,n(d,c))}a.rawArgs=!0;function i(s,u){return s.compile().evaluate(u)}return a},{isTransformFunction:!0}),nae="index",aae=["Index","getMatrixDataType"],iae=q(nae,aae,t=>{var{Index:e,getMatrixDataType:r}=t;return function(){for(var a=[],i=0,s=arguments.length;i<s;i++){var u=arguments[i];if(My(u))u.start--,u.end-=u.step>0?0:2;else if(u&&u.isSet===!0)u=u.map(function(o){return o-1});else if(Qt(u)||Ze(u))r(u)!=="boolean"&&(u=u.map(function(o){return o-1}));else if(Ke(u)||uc(u))u--;else if(lt(u))u=u.toNumber()-1;else if(typeof u!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");a[i]=u}var l=new e;return e.apply(l,a),l}},{isTransformFunction:!0}),sae="map",oae=["typed"],uae=q(sae,oae,t=>{var{typed:e}=t,r=h4({typed:e}),n=Zy({typed:e});function a(i,s,u){if(i.length===0)return r();if(i.length===1)return r(i[0]);var l=i.length-1,o=i.slice(0,l),c=i[l];return o=o.map(m=>d(m,u)),c&&(Xr(c)||nf(c)?c=d(c,u):c=Yy(c,s,u)),r(...o,n(c,l));function d(m,h){return m.compile().evaluate(h)}}return a.rawArgs=!0,a},{isTransformFunction:!0});function lae(t){return Ke(t)?t-1:lt(t)?t.minus(1):t}function cae(t){return Ke(t)||lt(t)}function Ms(t){if(t.length===2&&Jn(t[0])){t=t.slice();var e=t[1];cae(e)&&(t[1]=lae(e))}return t}var fae="max",dae=["typed","config","numeric","larger","isNaN"],mae=q(fae,dae,t=>{var{typed:e,config:r,numeric:n,larger:a,isNaN:i}=t,s=_4({typed:e,config:r,numeric:n,larger:a,isNaN:i});return e("max",{"...any":function(l){l=Ms(l);try{return s.apply(null,l)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),hae="mean",pae=["typed","add","divide"],vae=q(hae,pae,t=>{var{typed:e,add:r,divide:n}=t,a=P4({typed:e,add:r,divide:n});return e("mean",{"...any":function(s){s=Ms(s);try{return a.apply(null,s)}catch(u){throw In(u)}}})},{isTransformFunction:!0}),gae="min",yae=["typed","config","numeric","smaller","isNaN"],xae=q(gae,yae,t=>{var{typed:e,config:r,numeric:n,smaller:a,isNaN:i}=t,s=E4({typed:e,config:r,numeric:n,smaller:a,isNaN:i});return e("min",{"...any":function(l){l=Ms(l);try{return s.apply(null,l)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),bae="range",wae=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],Nae=q(bae,wae,t=>{var{typed:e,config:r,matrix:n,bignumber:a,equal:i,smaller:s,smallerEq:u,larger:l,largerEq:o,add:c,isZero:d,isPositive:m}=t,h=g4({typed:e,config:r,matrix:n,bignumber:a,equal:i,smaller:s,smallerEq:u,larger:l,largerEq:o,add:c,isZero:d,isPositive:m});return e("range",{"...any":function(v){var C=v.length-1,N=v[C];return typeof N!="boolean"&&v.push(!0),h.apply(null,v)}})},{isTransformFunction:!0}),_ae="row",Eae=["typed","Index","matrix","range"],Sae=q(_ae,Eae,t=>{var{typed:e,Index:r,matrix:n,range:a}=t,i=y4({typed:e,Index:r,matrix:n,range:a});return e("row",{"...any":function(u){var l=u.length-1,o=u[l];Ke(o)&&(u[l]=o-1);try{return i.apply(null,u)}catch(c){throw In(c)}}})},{isTransformFunction:!0}),Aae="subset",Dae=["typed","matrix","zeros","add"],Cae=q(Aae,Dae,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t,i=x4({typed:e,matrix:r,zeros:n,add:a});return e("subset",{"...any":function(u){try{return i.apply(null,u)}catch(l){throw In(l)}}})},{isTransformFunction:!0}),Tae="concat",Mae=["typed","matrix","isInteger"],Iae=q(Tae,Mae,t=>{var{typed:e,matrix:r,isInteger:n}=t,a=c4({typed:e,matrix:r,isInteger:n});return e("concat",{"...any":function(s){var u=s.length-1,l=s[u];Ke(l)?s[u]=l-1:lt(l)&&(s[u]=l.minus(1));try{return a.apply(null,s)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),iA="diff",Pae=["typed","matrix","subtract","number","bignumber"],Fae=q(iA,Pae,t=>{var{typed:e,matrix:r,subtract:n,number:a,bignumber:i}=t,s=p4({typed:e,matrix:r,subtract:n,number:a,bignumber:i});return e(iA,{"...any":function(l){l=Ms(l);try{return s.apply(null,l)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),Rae="std",Oae=["typed","map","sqrt","variance"],Bae=q(Rae,Oae,t=>{var{typed:e,map:r,sqrt:n,variance:a}=t,i=O4({typed:e,map:r,sqrt:n,variance:a});return e("std",{"...any":function(u){u=Ms(u);try{return i.apply(null,u)}catch(l){throw In(l)}}})},{isTransformFunction:!0}),sA="sum",jae=["typed","config","add","numeric"],kae=q(sA,jae,t=>{var{typed:e,config:r,add:n,numeric:a}=t,i=M4({typed:e,config:r,add:n,numeric:a});return e(sA,{"...any":function(u){u=Ms(u);try{return i.apply(null,u)}catch(l){throw In(l)}}})},{isTransformFunction:!0}),$ae="quantileSeq",Lae=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],zae=q($ae,Lae,t=>{var{typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:u,compare:l,isInteger:o,smaller:c,smallerEq:d,larger:m,mapSlices:h}=t,p=R4({typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:u,compare:l,isInteger:o,smaller:c,smallerEq:d,larger:m,mapSlices:h});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(C,N,A)=>p(C,N,v(A)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(C,N,A,b)=>p(C,N,A,v(b)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(C,N,A)=>p(C,N,v(A)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(C,N,A,b)=>p(C,N,A,v(b))});function v(C){return Ms([[],C])[1]}},{isTransformFunction:!0}),oA="cumsum",Vae=["typed","add","unaryPlus"],Uae=q(oA,Vae,t=>{var{typed:e,add:r,unaryPlus:n}=t,a=I4({typed:e,add:r,unaryPlus:n});return e(oA,{"...any":function(s){if(s.length===2&&Jn(s[0])){var u=s[1];Ke(u)?s[1]=u-1:lt(u)&&(s[1]=u.minus(1))}try{return a.apply(null,s)}catch(l){throw In(l)}}})},{isTransformFunction:!0}),uA="variance",qae=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Hae=q(uA,qae,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:u}=t,l=F4({typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:u});return e(uA,{"...any":function(c){c=Ms(c);try{return l.apply(null,c)}catch(d){throw In(d)}}})},{isTransformFunction:!0}),lA="print",Gae=["typed","matrix","zeros","add"],Wae=q(lA,Gae,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t,i=w4({typed:e,matrix:r,zeros:n,add:a});return e(lA,{"string, Object | Array":function(l,o){return i(s(l),o)},"string, Object | Array, number | Object":function(l,o,c){return i(s(l),o,c)}});function s(u){return u.replace(b4,l=>{var o=l.slice(1).split("."),c=o.map(function(d){return!isNaN(d)&&d.length>0?parseInt(d)-1:d});return"$"+c.join(".")})}},{isTransformFunction:!0}),Qae="and",Xae=["typed","matrix","zeros","add","equalScalar","not","concat"],Kae=q(Qae,Xae,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,u=N4({typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s});function l(o,c,d){var m=o[0].compile().evaluate(d);if(!Jn(m)&&!u(m,!0))return!1;var h=o[1].compile().evaluate(d);return u(m,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),Jae="or",Yae=["typed","matrix","equalScalar","DenseMatrix","concat"],Zae=q(Jae,Yae,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=l4({typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i});function u(l,o,c){var d=l[0].compile().evaluate(c);if(!Jn(d)&&s(d,!1))return!0;var m=l[1].compile().evaluate(c);return s(d,m)}return u.rawArgs=!0,u},{isTransformFunction:!0}),eie="nullish",tie=["typed","matrix","size","flatten","deepEqual"],rie=q(eie,tie,t=>{var{typed:e,matrix:r,size:n,flatten:a,deepEqual:i}=t,s=u4({typed:e,matrix:r,size:n,flatten:a,deepEqual:i});function u(l,o,c){var d=l[0].compile().evaluate(c);if(!Jn(d)&&d!=null&&d!==void 0)return d;var m=l[1].compile().evaluate(c);return s(d,m)}return u.rawArgs=!0,u},{isTransformFunction:!0}),nie="bitAnd",aie=["typed","matrix","zeros","add","equalScalar","not","concat"],iie=q(nie,aie,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,u=s4({typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s});function l(o,c,d){var m=o[0].compile().evaluate(d);if(!Jn(m)){if(isNaN(m))return NaN;if(m===0||m===!1)return 0}var h=o[1].compile().evaluate(d);return u(m,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),sie="bitOr",oie=["typed","matrix","equalScalar","DenseMatrix","concat"],uie=q(sie,oie,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=o4({typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i});function u(l,o,c){var d=l[0].compile().evaluate(c);if(!Jn(d)){if(isNaN(d))return NaN;if(d===-1)return-1;if(d===!0)return 1}var m=l[1].compile().evaluate(c);return s(d,m)}return u.rawArgs=!0,u},{isTransformFunction:!0}),Fe=H7({config:we}),Yt=K7({}),cA=Ore({BigNumber:Fe,config:we}),lie=Tre({}),cie=fne({BigNumber:Fe,config:we}),Do=a$({}),k4=Ure({Complex:Yt}),fie=Ire({BigNumber:Fe,config:we}),die=kre({BigNumber:Fe,config:we}),mie=Lre({BigNumber:Fe,config:we}),Uh=c$({}),hie=Pre({BigNumber:Fe,config:we}),pie=Mre({}),vie=Bre({BigNumber:Fe,config:we}),gie=o$({}),$4=Xk({}),yie=zre({BigNumber:Fe,config:we}),xie=Mne({BigNumber:Fe,config:we}),L4=Rre({BigNumber:Fe,config:we}),bie=Cre({}),wie=qre({}),dt=A$({Matrix:Uh,config:we}),Nie=bne({BigNumber:Fe,config:we}),_ie=jre({BigNumber:Fe,config:we}),Ug=Fre({BigNumber:Fe,config:we}),z4=Are({}),Eie=Vre({BigNumber:Fe,config:we}),ee=Hk({BigNumber:Fe,Complex:Yt,DenseMatrix:dt,Fraction:Do}),Sie=xne({BigNumber:Fe,config:we}),Pn=zL({typed:ee}),Aie=gG({Complex:Yt,config:we,typed:ee}),Die=wG({BigNumber:Fe,typed:ee}),Cie=SG({BigNumber:Fe,Complex:Yt,config:we,typed:ee}),$r=HL({typed:ee}),Tie=PV({typed:ee}),Mie=IG({BigNumber:Fe,Complex:Yt,config:we,typed:ee}),Iie=BG({typed:ee}),V4=$G({typed:ee}),Pie=UG({Complex:Yt,config:we,typed:ee}),Fie=dL({typed:ee}),Rie=SV({typed:ee}),Oie=vL({typed:ee}),Bie=C$({typed:ee}),qh=nte({typed:ee}),Hh=NL({Complex:Yt,typed:ee}),Co=RV({typed:ee}),ex=HG({typed:ee}),jie=XG({BigNumber:Fe,typed:ee}),kie=ZG({BigNumber:Fe,typed:ee}),$ie=oz({typed:ee}),gt=tL({config:we,typed:ee}),Lie=eq({typed:ee}),U4=lz({typed:ee}),zie=fz({Complex:Yt,typed:ee}),Vie=d4({typed:ee}),To=rU({typed:ee}),Uie=m4({typed:ee}),uf=fq({typed:ee}),tx=sU({typed:ee}),qie=gq({format:uf,typed:ee}),rx=BV({typed:ee}),Ln=M$({typed:ee}),Is=L$({config:we,typed:ee}),Mo=G$({config:we,typed:ee}),ya=Q$({equalScalar:gt,typed:ee}),Hie=$re({BigNumber:Fe,config:we}),Gie=lte({Complex:Yt,typed:ee}),Wie=Hz({Complex:Yt,config:we,typed:ee}),nx=Wz({Complex:Yt,config:we,typed:ee}),Io=h4({typed:ee}),br=Kz({typed:ee}),Xm=LV({typed:ee}),Di=lL({typed:ee}),Qie=pq({format:uf,typed:ee}),Xie=jte({config:we,typed:ee}),Kie=w4({typed:ee}),Jie=$te({config:we,typed:ee}),ax=kV({typed:ee}),Yie=nW({BigNumber:Fe,typed:ee}),q4=rV({BigNumber:Fe,Fraction:Do,complex:Hh,typed:ee}),Gh=oW({typed:ee}),Lr=TU({typed:ee}),zr=aL({Matrix:Uh,equalScalar:gt,typed:ee}),Zie=OL({typed:ee}),ese=oV({typed:ee}),tse=hL({typed:ee}),xa=WL({typed:ee}),rse=fW({typed:ee}),H4=Nq({typed:ee}),ix=Y$({typed:ee}),nse=xG({Complex:Yt,config:we,typed:ee}),ase=DG({BigNumber:Fe,typed:ee}),ise=TG({BigNumber:Fe,Complex:Yt,config:we,typed:ee}),zn=xL({BigNumber:Fe,typed:ee}),sse=ite({typed:ee}),ose=WG({typed:ee}),use=tW({BigNumber:Fe,typed:ee}),Wh=VW({addScalar:$r,conj:Co,multiplyScalar:br,size:Lr,typed:ee}),vi=K$({typed:ee}),lse=Eq({typed:ee}),qc=Rg({isInteger:Ln,typed:ee}),Pe=DL({DenseMatrix:dt,Matrix:Uh,SparseMatrix:zr,typed:ee}),cse=TL({isZero:ya,matrix:Pe,typed:ee}),Ht=Yz({addScalar:$r,dot:Wh,equalScalar:gt,matrix:Pe,multiplyScalar:br,typed:ee}),fse=pU({BigNumber:Fe,config:we,matrix:Pe,typed:ee}),dse=zte({config:we,log2:nx,typed:ee}),G4=xU({isInteger:Ln,matrix:Pe,typed:ee}),mse=iW({BigNumber:Fe,typed:ee}),hse=lW({typed:ee}),pse=mG({SparseMatrix:zr,typed:ee}),Oa=iV({Complex:Yt,config:we,typed:ee}),vse=IU({typed:ee}),gse=hW({typed:ee}),lf=jU({matrix:Pe,typed:ee}),W4=fV({BigNumber:Fe,config:we,matrix:Pe,typed:ee}),rn=zU({BigNumber:Fe,config:we,matrix:Pe,typed:ee}),yse=_G({BigNumber:Fe,Complex:Yt,config:we,typed:ee}),xse=FG({Complex:Yt,config:we,typed:ee}),bse=mq({format:uf,typed:ee}),Dt=c4({isInteger:Ln,matrix:Pe,typed:ee}),wse=JG({BigNumber:Fe,typed:ee}),sx=$U({conj:Co,transpose:lf,typed:ee}),Q4=YV({DenseMatrix:dt,SparseMatrix:zr,matrix:Pe,typed:ee}),Nse=gV({concat:Dt,equalScalar:gt,matrix:Pe,multiplyScalar:br,typed:ee}),Un=yH({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),cf=SL({Fraction:Do,typed:ee}),Ps=uU({BigNumber:Fe,DenseMatrix:dt,SparseMatrix:zr,config:we,matrix:Pe,typed:ee}),Po=V$({typed:ee}),_se=cU({matrix:Pe,multiplyScalar:br,typed:ee}),Qh=PH({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,config:we,matrix:Pe,typed:ee}),Ese=rH({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee,zeros:rn}),Sse=IL({flatten:To,matrix:Pe,size:Lr,typed:ee}),Ase=oq({isNaN:vi,isNumeric:Po,typed:ee}),Dse=eV({BigNumber:Fe,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),ma=Dq({bignumber:zn,fraction:cf,number:Di}),X4=lq({config:we,multiplyScalar:br,numeric:ma,typed:ee}),Cse=NU({config:we,matrix:Pe}),Tse=aH({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee,zeros:rn}),ll=Fq({BigNumber:Fe,DenseMatrix:dt,config:we,equalScalar:gt,matrix:Pe,typed:ee,zeros:rn}),An=_H({DenseMatrix:dt,SparseMatrix:zr,bignumber:zn,concat:Dt,config:we,matrix:Pe,typed:ee}),Mse=bq({concat:Dt,matrix:Pe,typed:ee}),ni=jL({typed:ee}),Ise=jH({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,config:we,equalScalar:gt,matrix:Pe,typed:ee}),Pse=qV({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,matrix:Pe,typed:ee}),wt=BW({DenseMatrix:dt,SparseMatrix:zr,addScalar:$r,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),Fse=zG({BigNumber:Fe,DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),Rse=s4({concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),Ose=o4({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),Bse=MV({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,matrix:Pe,typed:ee}),K4=XL({BigNumber:Fe,Complex:Yt,Fraction:Do,config:we,isNegative:Is,matrix:Pe,typed:ee,unaryMinus:ni}),Fo=lH({BigNumber:Fe,DenseMatrix:dt,Fraction:Do,concat:Dt,config:we,equalScalar:gt,matrix:Pe,typed:ee}),J4=vH({concat:Dt,matrix:Pe,typed:ee}),jse=QV({prod:X4,size:Lr,typed:ee}),ff=OH({equal:Un,typed:ee}),dr=Tq({numeric:ma,typed:ee}),kse=wH({compareText:J4,isZero:ya,typed:ee}),Y4=r4({DenseMatrix:dt,config:we,equalScalar:gt,matrix:Pe,round:ll,typed:ee,zeros:rn}),$se=kz({BigNumber:Fe,DenseMatrix:dt,concat:Dt,config:we,equalScalar:gt,matrix:Pe,round:ll,typed:ee,zeros:rn}),Lse=q$({isNumeric:Po,typed:ee}),zse=kW({abs:Pn,addScalar:$r,divideScalar:dr,isPositive:Mo,multiplyScalar:br,smaller:An,sqrt:Oa,typed:ee}),Z4=WH({DenseMatrix:dt,smaller:An}),gn=KH({ImmutableDenseMatrix:Z4,getMatrixDataType:tx}),Dn=TH({DenseMatrix:dt,SparseMatrix:zr,bignumber:zn,concat:Dt,config:we,matrix:Pe,typed:ee}),ox=Bq({Complex:Yt,config:we,divideScalar:dr,typeOf:ix,typed:ee}),eI=Gq({DenseMatrix:dt,divideScalar:dr,equalScalar:gt,matrix:Pe,multiplyScalar:br,subtractScalar:xa,typed:ee}),ux=FL({flatten:To,matrix:Pe,size:Lr,typed:ee}),Vse=E4({config:we,isNaN:vi,numeric:ma,smaller:An,typed:ee}),tI=a4({DenseMatrix:dt,concat:Dt,config:we,equalScalar:gt,matrix:Pe,round:ll,typed:ee,zeros:rn}),Use=Lq({Complex:Yt,config:we,divideScalar:dr,typed:ee}),qse=u4({deepEqual:ff,flatten:To,matrix:Pe,size:Lr,typed:ee}),Hse=l4({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),Xh=LH({compare:Fo,isNaN:vi,isNumeric:Po,typed:ee}),lx=JQ({addScalar:$r,complex:Hh,conj:Co,divideScalar:dr,equal:Un,identity:Ps,isZero:ya,matrix:Pe,multiplyScalar:br,sign:q4,sqrt:Oa,subtractScalar:xa,typed:ee,unaryMinus:ni,zeros:rn}),Gse=sH({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee,zeros:rn}),Hu=AH({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,config:we,matrix:Pe,typed:ee}),ta=x4({add:wt,matrix:Pe,typed:ee,zeros:rn}),Sr=lV({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,subtractScalar:xa,typed:ee,unaryMinus:ni}),Wse=HW({add:wt,matrix:Pe,typed:ee}),cx=Qq({DenseMatrix:dt,divideScalar:dr,equalScalar:gt,matrix:Pe,multiplyScalar:br,subtractScalar:xa,typed:ee}),Qse=yre({Complex:Yt,add:wt,multiply:Ht,number:Di,typed:ee}),Xse=Wte({addScalar:$r,combinations:qh,divideScalar:dr,isInteger:Ln,isNegative:Is,multiplyScalar:br,typed:ee}),ai=mH({compare:Fo,typed:ee}),Kse=Xte({addScalar:$r,combinations:qh,isInteger:Ln,isNegative:Is,isPositive:Mo,larger:Dn,typed:ee}),Jse=KV({matrix:Pe,multiply:Ht,subtract:Sr,typed:ee}),rI=vee({divideScalar:dr,isZero:ya,matrix:Pe,multiply:Ht,subtractScalar:xa,typed:ee,unaryMinus:ni}),Yse=p4({matrix:Pe,number:Di,subtract:Sr,typed:ee}),Zse=Lee({abs:Pn,addScalar:$r,deepEqual:ff,divideScalar:dr,multiplyScalar:br,sqrt:Oa,subtractScalar:xa,typed:ee}),df=qq({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,divideScalar:dr,equalScalar:gt,matrix:Pe,typed:ee}),nI=ZH({larger:Dn,smaller:An}),aI=WW({Index:gn,typed:ee}),eoe=Uee({abs:Pn,add:wt,addScalar:$r,config:we,divideScalar:dr,equalScalar:gt,flatten:To,isNumeric:Po,isZero:ya,matrix:Pe,multiply:Ht,multiplyScalar:br,smaller:An,subtract:Sr,typed:ee}),toe=mV({BigNumber:Fe,add:wt,config:we,equal:Un,isInteger:Ln,mod:tI,smaller:An,typed:ee,xgcd:W4}),roe=Vz({concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),noe=kq({Complex:Yt,config:we,divideScalar:dr,log:ox,typed:ee}),aoe=Kq({DenseMatrix:dt,divideScalar:dr,equalScalar:gt,matrix:Pe,multiplyScalar:br,subtractScalar:xa,typed:ee}),fx=_4({config:we,isNaN:vi,larger:Dn,numeric:ma,typed:ee}),Gu=g4({bignumber:zn,matrix:Pe,add:wt,config:we,equal:Un,isPositive:Mo,isZero:ya,larger:Dn,largerEq:Qh,smaller:An,smallerEq:Hu,typed:ee}),ioe=y4({Index:gn,matrix:Pe,range:Gu,typed:ee}),soe=vW({DenseMatrix:dt,Index:gn,compareNatural:ai,size:Lr,subset:ta,typed:ee}),ooe=bW({DenseMatrix:dt,Index:gn,compareNatural:ai,size:Lr,subset:ta,typed:ee}),uoe=EW({Index:gn,compareNatural:ai,size:Lr,subset:ta,typed:ee}),loe=CW({Index:gn,compareNatural:ai,size:Lr,subset:ta,typed:ee}),iI=wX({SparseMatrix:zr,abs:Pn,add:wt,divideScalar:dr,larger:Dn,largerEq:Qh,multiply:Ht,subtract:Sr,transpose:lf,typed:ee}),coe=VH({compare:Fo,compareNatural:ai,matrix:Pe,typed:ee}),dx=$L({config:we,numeric:ma,typed:ee}),sI=Yq({DenseMatrix:dt,divideScalar:dr,equalScalar:gt,matrix:Pe,multiplyScalar:br,subtractScalar:xa,typed:ee}),foe=N4({concat:Dt,equalScalar:gt,matrix:Pe,not:Xm,typed:ee,zeros:rn}),mx=iz({DenseMatrix:dt,config:we,equalScalar:gt,matrix:Pe,round:ll,typed:ee,zeros:rn}),oI=f4({Index:gn,matrix:Pe,range:Gu,typed:ee}),doe=I4({add:wt,typed:ee,unaryPlus:dx}),uI=hz({Complex:Yt,DenseMatrix:dt,ceil:mx,equalScalar:gt,floor:Y4,matrix:Pe,typed:ee,zeros:rn}),lI=yW({DenseMatrix:dt,Index:gn,compareNatural:ai,size:Lr,subset:ta,typed:ee}),moe=AW({Index:gn,compareNatural:ai,size:Lr,subset:ta,typed:ee}),cI=PW({Index:gn,concat:Dt,setDifference:lI,size:Lr,subset:ta,typed:ee}),fI=rG({FibonacciHeap:nI,addScalar:$r,equalScalar:gt}),hx=M4({add:wt,config:we,numeric:ma,typed:ee}),Ro=yee({abs:Pn,addScalar:$r,det:rI,divideScalar:dr,identity:Ps,matrix:Pe,multiply:Ht,typed:ee,unaryMinus:ni}),dI=XQ({DenseMatrix:dt,Spa:fI,SparseMatrix:zr,abs:Pn,addScalar:$r,divideScalar:dr,equalScalar:gt,larger:Dn,matrix:Pe,multiplyScalar:br,subtractScalar:xa,typed:ee,unaryMinus:ni}),hoe=bee({Complex:Yt,add:wt,ctranspose:sx,deepEqual:ff,divideScalar:dr,dot:Wh,dotDivide:df,equal:Un,inv:Ro,matrix:Pe,multiply:Ht,typed:ee}),Ba=Iq({Complex:Yt,config:we,fraction:cf,identity:Ps,inv:Ro,matrix:Pe,multiply:Ht,number:Di,typed:ee}),mI=NW({DenseMatrix:dt,Index:gn,compareNatural:ai,size:Lr,subset:ta,typed:ee}),poe=RW({Index:gn,concat:Dt,setIntersect:mI,setSymDifference:cI,size:Lr,subset:ta,typed:ee}),voe=Tee({abs:Pn,add:wt,identity:Ps,inv:Ro,map:Io,max:fx,multiply:Ht,size:Lr,sqrt:Oa,subtract:Sr,typed:ee}),rt=lG({BigNumber:Fe,Complex:Yt,Fraction:Do,abs:Pn,addScalar:$r,config:we,divideScalar:dr,equal:Un,fix:uI,format:uf,isNumeric:Po,multiplyScalar:br,number:Di,pow:Ba,round:ll,subtractScalar:xa,toBest:H4}),goe=Jre({BigNumber:Fe,Unit:rt,config:we}),yoe=Fne({BigNumber:Fe,Unit:rt,config:we}),xoe=wne({BigNumber:Fe,Unit:rt,config:we}),boe=tne({BigNumber:Fe,Unit:rt,config:we}),woe=_ne({BigNumber:Fe,Unit:rt,config:we}),Noe=rne({BigNumber:Fe,Unit:rt,config:we}),_oe=Yre({BigNumber:Fe,Unit:rt,config:we}),Eoe=pG({Unit:rt,typed:ee}),Soe=hne({BigNumber:Fe,Unit:rt,config:we}),Aoe=Vq({DenseMatrix:dt,SparseMatrix:zr,concat:Dt,equalScalar:gt,matrix:Pe,pow:Ba,typed:ee}),Doe=Kre({BigNumber:Fe,Unit:rt,config:we}),Coe=ene({BigNumber:Fe,Unit:rt,config:we}),Toe=Dee({abs:Pn,add:wt,identity:Ps,inv:Ro,multiply:Ht,typed:ee}),Moe=Ene({BigNumber:Fe,Unit:rt,config:we}),hI=UU({addScalar:$r,ceil:mx,conj:Co,divideScalar:dr,dotDivide:df,exp:U4,i:k4,log2:nx,matrix:Pe,multiplyScalar:br,pow:Ba,tau:L4,typed:ee}),px=ote({BigNumber:Fe,Complex:Yt,config:we,multiplyScalar:br,pow:Ba,typed:ee}),Ioe=Gre({BigNumber:Fe,Unit:rt,config:we}),Poe=dne({BigNumber:Fe,Unit:rt,config:we}),Foe=HU({conj:Co,dotDivide:df,fft:hI,typed:ee}),Roe=sne({BigNumber:Fe,Unit:rt,config:we}),Ooe=Ane({BigNumber:Fe,Unit:rt,config:we}),Boe=Xre({BigNumber:Fe,Unit:rt,config:we}),joe=Rne({BigNumber:Fe,Unit:rt,config:we}),koe=Cne({BigNumber:Fe,Unit:rt,config:we}),$oe=pne({BigNumber:Fe,Unit:rt,config:we}),Loe=ine({BigNumber:Fe,Unit:rt,config:we}),zoe=Lne({BigNumber:Fe,Unit:rt,config:we}),Voe=jne({BigNumber:Fe,Unit:rt,config:we}),Uoe=zne({BigNumber:Fe,Unit:rt,config:we}),qoe=mne({BigNumber:Fe,Unit:rt,config:we}),Hoe=vne({BigNumber:Fe,Unit:rt,config:we}),Goe=Qre({BigNumber:Fe,Unit:rt,config:we}),Woe=gne({BigNumber:Fe,Unit:rt,config:we}),Qoe=Ine({BigNumber:Fe,Unit:rt,config:we}),Xoe=Hre({BigNumber:Fe,Unit:rt,config:we}),Koe=Pne({BigNumber:Fe,Unit:rt,config:we}),Joe=yne({BigNumber:Fe,Unit:rt,config:we}),Yoe=Nne({BigNumber:Fe,Unit:rt,config:we}),Zoe=one({BigNumber:Fe,Unit:rt,config:we}),eue=Zre({BigNumber:Fe,Unit:rt,config:we}),an=kee({divideScalar:dr,equalScalar:gt,inv:Ro,matrix:Pe,multiply:Ht,typed:ee}),tue=lne({BigNumber:Fe,Unit:rt,config:we}),ti=fte({gamma:px,typed:ee}),rue=Sne({BigNumber:Fe,Unit:rt,config:we}),nue=Bne({BigNumber:Fe,Unit:rt,config:we}),aue=nne({BigNumber:Fe,Unit:rt,config:we}),pI=_X({DenseMatrix:dt,lsolve:eI,lup:dI,matrix:Pe,slu:iI,typed:ee,usolve:cx}),iue=ane({BigNumber:Fe,Unit:rt,config:we}),sue=One({BigNumber:Fe,Unit:rt,config:we}),oue=pte({add:wt,divide:an,factorial:ti,isInteger:Ln,isPositive:Mo,multiply:Ht,typed:ee}),uue=gte({factorial:ti,typed:ee}),lue=kne({BigNumber:Fe,Unit:rt,config:we}),cue=SX({add:wt,cbrt:K4,divide:an,equalScalar:gt,im:rx,isZero:ya,multiply:Ht,re:ax,sqrt:Oa,subtract:Sr,typeOf:ix,typed:ee,unaryMinus:ni}),fue=MW({compareNatural:ai,typed:ee}),due=JU({abs:Pn,add:wt,bignumber:zn,divide:an,isNegative:Is,isPositive:Mo,larger:Dn,map:Io,matrix:Pe,max:fx,multiply:Ht,smaller:An,subtract:Sr,typed:ee,unaryMinus:ni}),vI=Ute({bignumber:zn,addScalar:$r,combinations:qh,divideScalar:dr,factorial:ti,isInteger:Ln,isNegative:Is,larger:Dn,multiplyScalar:br,number:Di,pow:Ba,subtractScalar:xa,typed:ee}),mue=fG({Unit:rt,typed:ee}),hue=Hte({addScalar:$r,isInteger:Ln,isNegative:Is,stirlingS2:vI,typed:ee}),gI=See({abs:Pn,add:wt,addScalar:$r,atan:V4,bignumber:zn,column:oI,complex:Hh,config:we,cos:ex,diag:Q4,divideScalar:dr,dot:Wh,equal:Un,flatten:To,im:rx,inv:Ro,larger:Dn,matrix:Pe,matrixFromColumns:ux,multiply:Ht,multiplyScalar:br,number:Di,qr:lx,re:ax,reshape:G4,sin:Gh,size:Lr,smaller:An,sqrt:Oa,subtract:Sr,typed:ee,usolve:cx,usolveAll:sI}),pue=cne({BigNumber:Fe,Unit:rt,config:we}),vue=Dne({BigNumber:Fe,Unit:rt,config:we}),gue=mte({divide:an,dotDivide:df,isNumeric:Po,log:ox,map:Io,matrix:Pe,multiply:Ht,sum:hx,typed:ee}),yI=P4({add:wt,divide:an,typed:ee}),yue=Tne({BigNumber:Fe,Unit:rt,config:we}),xue=Wre({BigNumber:Fe,Unit:rt,config:we}),bue=R4({bignumber:zn,add:wt,compare:Fo,divide:an,isInteger:Ln,larger:Dn,mapSlices:qc,multiply:Ht,partitionSelect:Xh,smaller:An,smallerEq:Hu,subtract:Sr,typed:ee}),vx=F4({add:wt,divide:an,isNaN:vi,mapSlices:qc,multiply:Ht,subtract:Sr,typed:ee}),wue=une({BigNumber:Fe,Unit:rt,config:we}),xI=Qee({add:wt,compare:Fo,divide:an,partitionSelect:Xh,typed:ee}),Nue=tte({add:wt,divide:an,matrix:Pe,mean:yI,multiply:Ht,pow:Ba,sqrt:Oa,subtract:Sr,sum:hx,typed:ee}),_ue=bre({Complex:Yt,add:wt,divide:an,matrix:Pe,multiply:Ht,typed:ee}),Eue=Kee({abs:Pn,map:Io,median:xI,subtract:Sr,typed:ee}),Sue=O4({map:Io,sqrt:Oa,typed:ee,variance:vx}),Aue=iq({BigNumber:Fe,Complex:Yt,add:wt,config:we,divide:an,equal:Un,factorial:ti,gamma:px,isNegative:Is,multiply:Ht,pi:Ug,pow:Ba,sin:Gh,smallerEq:Hu,subtract:Sr,typed:ee}),gx=LW({abs:Pn,add:wt,conj:Co,ctranspose:sx,eigs:gI,equalScalar:gt,larger:Dn,matrix:Pe,multiply:Ht,pow:Ba,smaller:An,sqrt:Oa,typed:ee}),bI=AU({BigNumber:Fe,DenseMatrix:dt,SparseMatrix:zr,addScalar:$r,config:we,cos:ex,matrix:Pe,multiplyScalar:br,norm:gx,sin:Gh,typed:ee,unaryMinus:ni}),Due=$ne({BigNumber:Fe,Unit:rt,config:we}),wI=Fee({identity:Ps,matrix:Pe,multiply:Ht,norm:gx,qr:lx,subtract:Sr,typed:ee}),Cue=EU({multiply:Ht,rotationMatrix:bI,typed:ee}),NI=Iee({abs:Pn,add:wt,concat:Dt,identity:Ps,index:aI,lusolve:pI,matrix:Pe,matrixFromColumns:ux,multiply:Ht,range:Gu,schur:wI,subset:ta,subtract:Sr,transpose:lf,typed:ee}),Tue=Oee({matrix:Pe,multiply:Ht,sylvester:NI,transpose:lf,typed:ee}),cl={},mf={},_I={},Nn=KW({mathWithTransform:mf}),fl=NQ({Node:Nn}),Ci=EQ({Node:Nn}),Oo=AQ({Node:Nn}),EI=MQ({Node:Nn}),dl=eQ({Node:Nn}),SI=sQ({Node:Nn,ResultSet:$4}),AI=uQ({Node:Nn}),Fs=vQ({Node:Nn}),DI=CQ({Node:Nn}),Mue=_re({classes:_I}),yx=IX({math:cl,typed:ee}),CI=yQ({Node:Nn,typed:ee}),Iue=hee({Chain:yx,typed:ee}),ml=bQ({Node:Nn,size:Lr}),hl=YW({Node:Nn,subset:ta}),TI=aQ({matrix:Pe,Node:Nn,subset:ta}),Rs=FQ({Unit:rt,Node:Nn,math:cl}),Os=OQ({Node:Nn,SymbolNode:Rs,math:cl}),ja=jQ({AccessorNode:hl,ArrayNode:dl,AssignmentNode:TI,BlockNode:SI,ConditionalNode:AI,ConstantNode:Fs,FunctionAssignmentNode:CI,FunctionNode:Os,IndexNode:ml,ObjectNode:fl,OperatorNode:Ci,ParenthesisNode:Oo,RangeNode:DI,RelationalNode:EI,SymbolNode:Rs,config:we,numeric:ma,typed:ee}),MI=cre({ConstantNode:Fs,FunctionNode:Os,OperatorNode:Ci,ParenthesisNode:Oo,parse:ja,typed:ee}),xx=ire({bignumber:zn,fraction:cf,AccessorNode:hl,ArrayNode:dl,ConstantNode:Fs,FunctionNode:Os,IndexNode:ml,ObjectNode:fl,OperatorNode:Ci,SymbolNode:Rs,config:we,mathWithTransform:mf,matrix:Pe,typed:ee}),Pue=$Q({parse:ja,typed:ee}),bx=ore({AccessorNode:hl,ArrayNode:dl,ConstantNode:Fs,FunctionNode:Os,IndexNode:ml,ObjectNode:fl,OperatorNode:Ci,ParenthesisNode:Oo,SymbolNode:Rs,add:wt,divide:an,equal:Un,isZero:ya,multiply:Ht,parse:ja,pow:Ba,subtract:Sr,typed:ee}),Bs=zQ({parse:ja,typed:ee}),II=CX({evaluate:Bs}),PI=qQ({evaluate:Bs,parse:ja}),Kh=rre({AccessorNode:hl,ArrayNode:dl,ConstantNode:Fs,FunctionNode:Os,IndexNode:ml,ObjectNode:fl,OperatorNode:Ci,ParenthesisNode:Oo,SymbolNode:Rs,equal:Un,parse:ja,replacer:z4,resolve:MI,simplifyConstant:xx,simplifyCore:bx,typed:ee}),Fue=dre({OperatorNode:Ci,parse:ja,simplify:Kh,typed:ee}),Rue=Jte({parse:ja,typed:ee}),Oue=WQ({Parser:PI,typed:ee}),Bue=vre({bignumber:zn,fraction:cf,AccessorNode:hl,ArrayNode:dl,ConstantNode:Fs,FunctionNode:Os,IndexNode:ml,ObjectNode:fl,OperatorNode:Ci,ParenthesisNode:Oo,SymbolNode:Rs,add:wt,config:we,divide:an,equal:Un,isZero:ya,mathWithTransform:mf,matrix:Pe,multiply:Ht,parse:ja,pow:Ba,simplify:Kh,simplifyConstant:xx,simplifyCore:bx,subtract:Sr,typed:ee}),FI=hre({ConstantNode:Fs,FunctionNode:Os,OperatorNode:Ci,ParenthesisNode:Oo,SymbolNode:Rs,config:we,equal:Un,isZero:ya,numeric:ma,parse:ja,simplify:Kh,typed:ee}),jue=dee({Help:II,mathWithTransform:mf,typed:ee});_r(cl,{e:cA,false:lie,fineStructure:cie,i:k4,Infinity:fie,LN10:die,LOG10E:mie,NaN:hie,null:pie,phi:vie,SQRT1_2:yie,sackurTetrode:xie,tau:L4,true:bie,E:cA,version:wie,efimovFactor:Nie,LN2:_ie,pi:Ug,replacer:z4,reviver:Mue,SQRT2:Eie,typed:ee,PI:Ug,weakMixingAngle:Sie,abs:Pn,acos:Aie,acot:Die,acsc:Cie,addScalar:$r,arg:Tie,asech:Mie,asinh:Iie,atan:V4,atanh:Pie,bigint:Fie,bitNot:Rie,boolean:Oie,clone:Bie,combinations:qh,complex:Hh,conj:Co,cos:ex,cot:jie,csc:kie,cube:$ie,equalScalar:gt,erf:Lie,exp:U4,expm1:zie,filter:Vie,flatten:To,forEach:Uie,format:uf,getMatrixDataType:tx,hex:qie,im:rx,isInteger:Ln,isNegative:Is,isPositive:Mo,isZero:ya,LOG2E:Hie,lgamma:Gie,log10:Wie,log2:nx,map:Io,multiplyScalar:br,not:Xm,number:Di,oct:Qie,pickRandom:Xie,print:Kie,random:Jie,re:ax,sec:Yie,sign:q4,sin:Gh,size:Lr,splitUnit:Zie,square:ese,string:tse,subtractScalar:xa,tan:rse,toBest:H4,typeOf:ix,acosh:nse,acsch:ase,asec:ise,bignumber:zn,chain:Iue,combinationsWithRep:sse,cosh:ose,csch:use,dot:Wh,isNaN:vi,isPrime:lse,mapSlices:qc,matrix:Pe,matrixFromFunction:cse,multiply:Ht,ones:fse,randomInt:dse,reshape:G4,sech:mse,sinh:hse,sparse:pse,sqrt:Oa,squeeze:vse,tanh:gse,transpose:lf,xgcd:W4,zeros:rn,acoth:yse,asin:xse,bin:bse,concat:Dt,coth:wse,ctranspose:sx,diag:Q4,dotMultiply:Nse,equal:Un,fraction:cf,identity:Ps,isNumeric:Po,kron:_se,largerEq:Qh,leftShift:Ese,matrixFromRows:Sse,mode:Ase,nthRoot:Dse,numeric:ma,prod:X4,resize:Cse,rightArithShift:Tse,round:ll,smaller:An,to:Mse,unaryMinus:ni,unequal:Ise,xor:Pse,add:wt,atan2:Fse,bitAnd:Rse,bitOr:Ose,bitXor:Bse,cbrt:K4,compare:Fo,compareText:J4,count:jse,deepEqual:ff,divideScalar:dr,equalText:kse,floor:Y4,gcd:$se,hasNumericValue:Lse,hypot:zse,larger:Dn,log:ox,lsolve:eI,matrixFromColumns:ux,min:Vse,mod:tI,nthRoots:Use,nullish:qse,or:Hse,partitionSelect:Xh,qr:lx,rightLogShift:Gse,smallerEq:Hu,subset:ta,subtract:Sr,trace:Wse,usolve:cx,zpk2tf:Qse,catalan:Xse,compareNatural:ai,composition:Kse,cross:Jse,det:rI,diff:Yse,distance:Zse,dotDivide:df,index:aI,intersect:eoe,invmod:toe,lcm:roe,log1p:noe,lsolveAll:aoe,max:fx,range:Gu,row:ioe,setCartesian:soe,setDistinct:ooe,setIsSubset:uoe,setPowerset:loe,slu:iI,sort:coe,unaryPlus:dx,usolveAll:sI,and:foe,ceil:mx,column:oI,cumsum:doe,fix:uI,setDifference:lI,setMultiplicity:moe,setSymDifference:cI,sum:hx,inv:Ro,lup:dI,pinv:hoe,pow:Ba,setIntersect:mI,setUnion:poe,sqrtm:voe,vacuumImpedance:goe,wienDisplacement:yoe,atomicMass:xoe,bohrMagneton:boe,boltzmann:woe,conductanceQuantum:Noe,coulomb:_oe,createUnit:Eoe,deuteronMass:Soe,dotPow:Aoe,electricConstant:Doe,elementaryCharge:Coe,expm:Toe,faraday:Moe,fft:hI,gamma:px,gravitationConstant:Ioe,hartreeEnergy:Poe,ifft:Foe,klitzing:Roe,loschmidt:Ooe,magneticConstant:Boe,molarMass:joe,molarPlanckConstant:koe,neutronMass:$oe,nuclearMagneton:Loe,planckCharge:zoe,planckLength:Voe,planckTemperature:Uoe,protonMass:qoe,quantumOfCirculation:Hoe,reducedPlanckConstant:Goe,rydberg:Woe,secondRadiation:Qoe,speedOfLight:Xoe,stefanBoltzmann:Koe,thomsonCrossSection:Joe,avogadro:Yoe,bohrRadius:Zoe,coulombConstant:eue,divide:an,electronMass:tue,factorial:ti,firstRadiation:rue,gravity:nue,inverseConductanceQuantum:aue,lusolve:pI,magneticFluxQuantum:iue,molarMassC12:sue,multinomial:oue,parse:ja,permutations:uue,planckMass:lue,polynomialRoot:cue,resolve:MI,setSize:fue,simplifyConstant:xx,solveODE:due,stirlingS2:vI,unit:mue,bellNumbers:hue,compile:Pue,eigs:gI,fermiCoupling:pue,gasConstant:vue,kldivergence:gue,mean:yI,molarVolume:yue,planckConstant:xue,quantileSeq:bue,simplifyCore:bx,variance:vx,classicalElectronRadius:wue,evaluate:Bs,median:xI,simplify:Kh,symbolicEqual:Fue,corr:Nue,freqz:_ue,leafCount:Rue,mad:Eue,parser:Oue,rationalize:Bue,std:Sue,zeta:Aue,derivative:FI,norm:gx,rotationMatrix:bI,help:jue,planckTime:Due,schur:wI,rotate:Cue,sylvester:NI,lyap:Tue,config:we});_r(mf,cl,{mapSlices:Hne({isInteger:Ln,typed:ee}),filter:Zne({typed:ee}),forEach:rae({typed:ee}),map:uae({typed:ee}),or:Zae({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),and:Kae({add:wt,concat:Dt,equalScalar:gt,matrix:Pe,not:Xm,typed:ee,zeros:rn}),concat:Iae({isInteger:Ln,matrix:Pe,typed:ee}),max:mae({config:we,isNaN:vi,larger:Dn,numeric:ma,typed:ee}),print:Wae({add:wt,matrix:Pe,typed:ee,zeros:rn}),sum:kae({add:wt,config:we,numeric:ma,typed:ee}),bitAnd:iie({add:wt,concat:Dt,equalScalar:gt,matrix:Pe,not:Xm,typed:ee,zeros:rn}),min:xae({config:we,isNaN:vi,numeric:ma,smaller:An,typed:ee}),nullish:rie({deepEqual:ff,flatten:To,matrix:Pe,size:Lr,typed:ee}),subset:Cae({add:wt,matrix:Pe,typed:ee,zeros:rn}),bitOr:uie({DenseMatrix:dt,concat:Dt,equalScalar:gt,matrix:Pe,typed:ee}),diff:Fae({bignumber:zn,matrix:Pe,number:Di,subtract:Sr,typed:ee}),index:iae({Index:gn,getMatrixDataType:tx}),range:Nae({bignumber:zn,matrix:Pe,add:wt,config:we,equal:Un,isPositive:Mo,isZero:ya,larger:Dn,largerEq:Qh,smaller:An,smallerEq:Hu,typed:ee}),row:Sae({Index:gn,matrix:Pe,range:Gu,typed:ee}),column:Qne({Index:gn,matrix:Pe,range:Gu,typed:ee}),cumsum:Uae({add:wt,typed:ee,unaryPlus:dx}),mean:vae({add:wt,divide:an,typed:ee}),quantileSeq:zae({add:wt,bignumber:zn,compare:Fo,divide:an,isInteger:Ln,larger:Dn,mapSlices:qc,multiply:Ht,partitionSelect:Xh,smaller:An,smallerEq:Hu,subtract:Sr,typed:ee}),variance:Hae({add:wt,divide:an,isNaN:vi,mapSlices:qc,multiply:Ht,subtract:Sr,typed:ee}),std:Bae({map:Io,sqrt:Oa,typed:ee,variance:vx})});_r(_I,{BigNumber:Fe,Complex:Yt,Fraction:Do,Matrix:Uh,Node:Nn,ObjectNode:fl,OperatorNode:Ci,ParenthesisNode:Oo,Range:gie,RelationalNode:EI,ResultSet:$4,ArrayNode:dl,BlockNode:SI,ConditionalNode:AI,ConstantNode:Fs,DenseMatrix:dt,RangeNode:DI,Chain:yx,FunctionAssignmentNode:CI,SparseMatrix:zr,IndexNode:ml,ImmutableDenseMatrix:Z4,Index:gn,AccessorNode:hl,AssignmentNode:TI,FibonacciHeap:nI,Spa:fI,Unit:rt,SymbolNode:Rs,FunctionNode:Os,Help:II,Parser:PI});yx.createProxy(cl);function kue(t,e,r,n){const a=[];let i=0,s=t;for(let u=0;u<=n;u++){const l=Bs(s,{x:e}),o=l*Math.pow(r-e,u)/ti(u);i+=o,a.push({i:u,fx0:l,term:o}),s=FI(s,"x").toString()}return{result:i,terms:a}}function $ue(){const[t,e]=U.useState("e^x"),[r,n]=U.useState(0),[a,i]=U.useState(1),[s,u]=U.useState(3),[l,o]=U.useState("-"),[c,d]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,h]=U.useState([]),{problems:p,removingIds:v,refresh:C,saveProblem:N,deleteProblem:A}=Lt(ak);U.useEffect(()=>{C().catch(console.error)},[C]);const b=()=>{try{const{result:E,terms:D}=kue(t,r,a,s);o(E),h(D),d("สถานะ: คำนวณสำเร็จ")}catch(E){console.error(E),d("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),o("-"),h([])}},g=()=>{e("e^x"),n(0),i(1),u(3),o("-"),d("สถานะ: รีเซ็ตแล้ว"),h([])},w=async()=>{try{await N({expr:t,x0:r,x:a,n:s,method:"taylor"}),alert("บันทึกแล้ว!")}catch(E){alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},x=E=>{e(E.expr),n(E.x0),i(E.x),u(E.n)},_=E=>{confirm("ลบโจทย์นี้ไหม?")&&A(E.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Taylor Series Approximation",subtitle:"การประมาณค่า f(x) ด้วยอนุพันธ์หลายลำดับ (Taylor Series)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),y.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),placeholder:"เช่น e^x, sin(x), x^3 + 2x",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),y.jsx("input",{type:"number",value:r,onChange:E=>n(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x"}),y.jsx("input",{type:"number",value:a,onChange:E=>i(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนเทอม (n)"}),y.jsx("input",{type:"number",value:s,onChange:E=>u(parseInt(E.target.value)||1),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:b,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:g,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:c}),y.jsx(zt,{problems:p,onLoad:x,onDelete:_,removingIds:v})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Taylor Series:",y.jsx("br",{}),"f(x) ≈ f(x₀) + f'(x₀)(x−x₀) + f''(x₀)(x−x₀)²/2! + …"]}),m.length>0&&y.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:y.jsxs("table",{className:"min-w-full border border-slate-700",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700",children:[y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f⁽ⁱ⁾(x₀)"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"เทอมที่ i"})]})}),y.jsx("tbody",{children:m.map(E=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-2 py-1 border border-slate-700 text-center",children:E.i}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(E.fx0)}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(E.term)})]},E.i))})]})}),l!=="-"&&y.jsx("div",{className:"text-sm text-gray-300",children:y.jsxs("p",{children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(l)})]})})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function Lue(t,e,r,n=1e-6,a=50){try{const i=[];let s=e;for(let u=0;u<=a;u++){let l=t(s);if(!isFinite(l))return{error:"f(x) คำนวณไม่ได้",iterations:i,converged:!1};const o=1e-8,c=(t(s+o)-t(s-o))/(2*o);if(!isFinite(c)||c===0)return{error:"อนุพันธ์เป็นศูนย์หรือคำนวณไม่ได้",iterations:i,converged:!1};const d=s-l/c,m=Math.abs(d-s)/(Math.abs(d)>1e-12?Math.abs(d):1);if(i.push({iter:u,x:s,fx:l,dfx:c,x1:d,error:m}),m<=n)return{root:d,iterations:i,converged:!0};s=d}return{root:s,iterations:i,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}const wx="problems_newtonraphson";async function Nx(){const t=Rt(qe(Te,wx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function _x(t){return kt(qe(Te,wx),{...t,method:"newton",createdAt:$t()})}async function Ex(t){return jt(Mt(Te,wx,t))}async function RI(){return Nx()}async function OI(t){return _x(t)}async function BI(t){return Ex(t)}const zue={getNewtonProblems:Nx,saveNewtonProblem:_x,deleteNewtonProblem:Ex,getProblems:RI,save:OI,remove:BI},Vue=Object.freeze(Object.defineProperty({__proto__:null,default:zue,deleteNewtonProblem:Ex,getNewtonProblems:Nx,getProblems:RI,remove:BI,save:OI,saveNewtonProblem:_x},Symbol.toStringTag,{value:"Module"}));function jI({iterations:t=[]}){return!t||t.length===0?null:y.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:y.jsxs("table",{className:"w-full text-sm border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[y.jsx("th",{className:"p-2 text-right",children:"iter"}),y.jsx("th",{className:"p-2 text-right",children:"x"}),y.jsx("th",{className:"p-2 text-right",children:"f(x)"}),y.jsx("th",{className:"p-2 text-right",children:"error"})]})}),y.jsx("tbody",{children:t.map(e=>y.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[y.jsx("td",{className:"p-2 text-right",children:e.iter}),y.jsx("td",{className:"p-2 text-right",children:Oe(e.x)}),y.jsx("td",{className:"p-2 text-right",children:Oe(e.fx)}),y.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":Oe(e.error)})]},e.iter))})]})})}function Uue(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,u]=U.useState(""),[l,o]=U.useState([]),[c,d]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,h]=U.useState("-"),[p,v]=U.useState("-"),C=U.useRef(null),{problems:N,removingIds:A,refresh:b,saveProblem:g,deleteProblem:w}=Lt(Vue),x=async()=>{if(!t||!r||!a||!s){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await g({expr:t,x0:r,tol:a,maxIter:s}),alert("บันทึกแล้ว!")}catch(M){console.error("บันทึกโจทย์ผิดพลาด:",M),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},_=M=>{e(M.expr??""),n(M.x0??""),i(M.tol??""),u(M.maxIter??"")},E=M=>{if(confirm(`ลบโจทย์นี้ไหม?
${M.expr}`))try{w(M.id)}catch(I){console.error("ลบโจทย์ผิดพลาด:",I),alert("ลบไม่สำเร็จ")}},D=()=>{const M=xs(t);if(!M){d("สถานะ: สมการไม่ถูกต้อง");return}const I=parseFloat(r),P=parseFloat(a),B=parseInt(s,10);if(isNaN(I)){d("สถานะ: x0 ไม่ถูกต้อง");return}if(!isFinite(P)||P<=0){d("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(B)||B<=0){d("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const $=Lue(M,I,P,B);if($.error){d("สถานะ: "+$.error);return}o($.iterations),d("สถานะ: เสร็จสิ้น "+($.converged?"(converged)":"(ไม่ converged)")),v($.iterations.length),h(Oe($.root)),ro(C.current,M,I-5,I+5,$.iterations)},T=()=>{e(""),n(""),i(""),u(""),o([]),d("สถานะ: รีเซ็ตแล้ว"),v("-"),h("-"),ro(C.current,()=>0,-5,5,[])};return U.useEffect(()=>{ro(C.current,()=>0,-5,5,[])},[]),U.useEffect(()=>{b().catch(console.error)},[b]),y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Newton-Raphson Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),y.jsx("input",{type:"text",value:t,onChange:M=>e(M.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),y.jsx("input",{type:"number",value:r,onChange:M=>n(M.target.value),placeholder:"เช่น 1.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),y.jsx("input",{type:"text",value:a,onChange:M=>i(M.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:s,onChange:M=>u(M.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-4",children:[y.jsx("button",{onClick:D,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:T,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsxs("div",{className:"text-sm",children:[y.jsx("div",{children:c}),y.jsxs("div",{children:["Iterations: ",p]}),y.jsxs("div",{children:["Root: ",m]})]}),y.jsx(zt,{problems:N,onLoad:_,onDelete:E,removingIds:A})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Iterations"}),y.jsx("canvas",{ref:C,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),y.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["จุดส้ม = ค่าที่ได้ในแต่ละ iteration, จุดส้มใหญ่ = ค่าสุดท้าย เส้นเขียว = เส้นสัมผัส f(x) ที่ x",y.jsx("sub",{children:"i"}),", Label = x0, x1, x2 …"]})]})]}),y.jsx("div",{className:"mt-6",children:y.jsx(jI,{iterations:l})})]})}function que(t,e,r,n=1e-6,a=50){try{const i=[];let s=e,u=r,l=t(s),o=t(u);if(!isFinite(l)||!isFinite(o))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};for(let c=0;c<=a;c++){if(o-l===0)return{error:"หารศูนย์ในสูตร Secant",iterations:i,converged:!1};const d=u-o*(u-s)/(o-l),m=t(d),h=Math.abs((d-u)/(Math.abs(d)>1e-12?Math.abs(d):1));if(i.push({iter:c,x0:s,x1:u,x2:d,fx2:m,error:h}),!isFinite(m))return{error:"f(x) คำนวณไม่ได้",iterations:i,converged:!1};if(h<=n)return{root:d,iterations:i,converged:!0};s=u,l=o,u=d,o=m}return{root:u,iterations:i,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}const Sx="problems_secant";async function Ax(){const t=Rt(qe(Te,Sx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function Dx(t){return kt(qe(Te,Sx),{...t,method:"secant",createdAt:$t()})}async function Cx(t){return jt(Mt(Te,Sx,t))}async function kI(){return Ax()}async function $I(t){return Dx(t)}async function LI(t){return Cx(t)}const Hue={getSecantProblems:Ax,saveSecantProblem:Dx,deleteSecantProblem:Cx,getProblems:kI,save:$I,remove:LI},Gue=Object.freeze(Object.defineProperty({__proto__:null,default:Hue,deleteSecantProblem:Cx,getProblems:kI,getSecantProblems:Ax,remove:LI,save:$I,saveSecantProblem:Dx},Symbol.toStringTag,{value:"Module"}));function Wue(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,u]=U.useState(""),[l,o]=U.useState(""),[c,d]=U.useState([]),[m,h]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[p,v]=U.useState("-"),[C,N]=U.useState("-"),A=U.useRef(null),{problems:b,removingIds:g,refresh:w,saveProblem:x,deleteProblem:_}=Lt(Gue),E=async()=>{if(!t||!r||!a||!s||!l){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await x({expr:t,x0:r,x1:a,tol:s,maxIter:l}),alert("บันทึกแล้ว!")}catch(P){console.error("บันทึกโจทย์ผิดพลาด:",P),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},D=P=>{e(P.expr??""),n(P.x0??""),i(P.x1??""),u(P.tol??""),o(P.maxIter??"")},T=P=>{if(confirm(`ลบโจทย์นี้ไหม?
${P.expr}`))try{_(P.id)}catch(B){console.error("ลบโจทย์ผิดพลาด:",B),alert("ลบไม่สำเร็จ")}},M=()=>{const P=xs(t);if(!P){h("สถานะ: สมการไม่ถูกต้อง");return}const B=parseFloat(r),$=parseFloat(a),R=parseFloat(s),G=parseInt(l,10);if(isNaN(B)||isNaN($)){h("สถานะ: x0/x1 ไม่ถูกต้อง");return}if(!isFinite(R)||R<=0){h("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(G)||G<=0){h("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const L=que(P,B,$,R,G);if(L.error){h("สถานะ: "+L.error);return}d(L.iterations),h("สถานะ: เสร็จสิ้น "+(L.converged?"(converged)":"(ไม่ converged)")),N(L.iterations.length),v(Oe(L.root)),ro(A.current,P,B-5,$+5,L.iterations)},I=()=>{e(""),n(""),i(""),u(""),o(""),d([]),h("สถานะ: รีเซ็ตแล้ว"),N("-"),v("-"),ro(A.current,()=>0,-5,5,[])};return U.useEffect(()=>{ro(A.current,()=>0,-5,5,[])},[]),U.useEffect(()=>{w().catch(console.error)},[w]),y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Secant Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),y.jsx("input",{type:"text",value:t,onChange:P=>e(P.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),y.jsx("input",{type:"number",value:r,onChange:P=>n(P.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x1"}),y.jsx("input",{type:"number",value:a,onChange:P=>i(P.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),y.jsx("input",{type:"text",value:s,onChange:P=>u(P.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:l,onChange:P=>o(P.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-4",children:[y.jsx("button",{onClick:M,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:I,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:E,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsxs("div",{className:"text-sm",children:[y.jsx("div",{children:m}),y.jsxs("div",{children:["Iterations: ",C]}),y.jsxs("div",{children:["Root: ",p]})]}),y.jsx(zt,{problems:b,onLoad:D,onDelete:T,removingIds:g})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Secant"}),y.jsx("canvas",{ref:A,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),y.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เส้นเขียว = เส้น secant ระหว่างแต่ละจุด, จุดส้ม = ค่าที่ได้, จุดส้มใหญ่ = ค่าสุดท้าย Label = x0, x1, x2 …"})]})]}),y.jsx("div",{className:"mt-6",children:y.jsx(jI,{iterations:c})})]})}const Tx="problems_cramer";async function zI(){const t=Rt(qe(Te,Tx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function VI(t){return kt(qe(Te,Tx),{...t,method:"cramer",createdAt:$t()})}async function Mx(t){return jt(Mt(Te,Tx,t))}const Que=zI,Xue=VI,Kue=Mx,Jue=Mx,Yue=Object.freeze(Object.defineProperty({__proto__:null,del:Jue,deleteCramerProblem:Mx,getCramerProblems:zI,getProblems:Que,remove:Kue,save:Xue,saveCramerProblem:VI},Symbol.toStringTag,{value:"Module"}));function qg(t){const e=t.length;if(e===0)return 0;if(e===1)return t[0][0];if(e===2)return t[0][0]*t[1][1]-t[0][1]*t[1][0];let r=0;for(let n=0;n<e;n++){const a=t.slice(1).map(i=>i.filter((s,u)=>u!==n));r+=t[0][n]*qg(a)*(n%2===0?1:-1)}return r}function Zue(t,e){try{if(!Array.isArray(t)||!Array.isArray(e))return{error:"Invalid input"};const r=t.length;if(r===0)return{error:"Empty matrix"};const n=qg(t);if(!isFinite(n))return{error:"Determinant not finite"};if(Math.abs(n)<1e-12)return{error:"Determinant = 0 (ไม่มีคำตอบหรือมีหลายคำตอบ)"};const a=[];for(let i=0;i<r;i++){const s=t.map((u,l)=>u.map((o,c)=>c===i?e[l]:o));a.push(qg(s)/n)}return{detA:n,results:a}}catch(r){return{error:String(r)}}}function ele(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([]),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(Yue);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=Zue(r,a);if(g.error){o("สถานะ: "+g.error),u([]);return}u(g.results),o("สถานะ: เสร็จสิ้น (detA = "+Oe(g.detA)+")")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("Cramer: saving problem (serialized)",g),await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.A=="string"?JSON.parse(g.A):g.A||[],x=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(w),i(x),w&&Array.isArray(w)&&e(w.length)}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Cramer's Rule",subtitle:"หาคำตอบระบบสมการเชิงเส้นโดยใช้ Determinant"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:g=>{const w=Math.max(1,parseInt(g.target.value)||1);e(w),n(Array(w).fill().map(()=>Array(w).fill(0))),i(Array(w).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((g,w)=>y.jsx("tr",{children:g.map((x,_)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:x,onChange:E=>{const D=r.map(T=>[...T]);D[w][_]=parseFloat(E.target.value)||0,n(D)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},_))},w))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((g,w)=>y.jsx("input",{type:"number",value:g,onChange:x=>{const _=[...a];_[w]=parseFloat(x.target.value)||0,i(_)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},w))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:l})}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:`ใส่เมทริกซ์ A และเวกเตอร์ b แล้วกด "คำนวณ" โปรแกรมจะคำนวณโดยใช้ Cramer's Rule หาก det(A) = 0 จะถือว่าไม่มีคำตอบหรือมีคำตอบไม่เป็นเอกเทศ`}),s.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:s.map((g,w)=>y.jsxs("li",{children:["x",w+1," = ",Oe(g)]},w))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ix="problems_gaussian";async function UI(){const t=Rt(qe(Te,Ix),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function qI(t){return kt(qe(Te,Ix),{...t,method:"gaussian",createdAt:$t()})}async function Px(t){return jt(Mt(Te,Ix,t))}const tle=UI,rle=qI,nle=Px,ale=Px,ile=Object.freeze(Object.defineProperty({__proto__:null,del:ale,deleteGaussianProblem:Px,getGaussianProblems:UI,getProblems:tle,remove:nle,save:rle,saveGaussianProblem:qI},Symbol.toStringTag,{value:"Module"}));function sle(t,e){const r=t.length,n=t.map(s=>[...s]),a=[...e];for(let s=0;s<r-1;s++){if(Math.abs(n[s][s])<1e-12)return{error:"Pivot = 0 (ควรใช้ Partial Pivoting)"};for(let u=s+1;u<r;u++){const l=n[u][s]/n[s][s];for(let o=s;o<r;o++)n[u][o]-=l*n[s][o];a[u]-=l*a[s]}}const i=Array(r).fill(0);for(let s=r-1;s>=0;s--){let u=0;for(let l=s+1;l<r;l++)u+=n[s][l]*i[l];if(Math.abs(n[s][s])<1e-12)return{error:"Pivot = 0 ทำให้หารไม่ได้"};i[s]=(a[s]-u)/n[s][s]}return{solution:i}}function ole(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([]),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(ile);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=sle(r,a);if(g.error){o("สถานะ: "+g.error),u([]);return}u(g.solution),o("สถานะ: เสร็จสิ้น (คำนวณสำเร็จ)")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("Gaussian: saving problem (serialized)",g),await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.A=="string"?JSON.parse(g.A):g.A||[],x=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(w),i(x),w&&Array.isArray(w)&&e(w.length)}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Gaussian Elimination",subtitle:"การกำจัดแบบเกาส์ (Forward Elimination + Back Substitution)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:g=>{const w=Math.max(1,parseInt(g.target.value)||1);e(w),n(Array(w).fill().map(()=>Array(w).fill(0))),i(Array(w).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((g,w)=>y.jsx("tr",{children:g.map((x,_)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:x,onChange:E=>{const D=r.map(T=>[...T]);D[w][_]=parseFloat(E.target.value)||0,n(D)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},_))},w))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((g,w)=>y.jsx("input",{type:"number",value:g,onChange:x=>{const _=[...a];_[w]=parseFloat(x.target.value)||0,i(_)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},w))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:l})}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:'ใส่เมทริกซ์ A และเวกเตอร์ b แล้วกด "คำนวณ" โปรแกรมจะใช้ขั้นตอนของ Gaussian Elimination เพื่อแปลงระบบสมการให้อยู่ในรูปสามเหลี่ยมบน จากนั้นทำ Back Substitution เพื่อหาคำตอบของ x₁, x₂, ..., xₙ'}),s.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:s.map((g,w)=>y.jsxs("li",{children:["x",w+1," = ",Oe(g)]},w))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Fx="problems_gaussjordan";async function HI(){const t=Rt(qe(Te,Fx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function GI(t){return kt(qe(Te,Fx),{...t,method:"gaussjordan",createdAt:$t()})}async function Rx(t){return jt(Mt(Te,Fx,t))}const ule=HI,lle=GI,cle=Rx,fle=Rx,dle=Object.freeze(Object.defineProperty({__proto__:null,del:fle,deleteGaussJordanProblem:Rx,getGaussJordanProblems:HI,getProblems:ule,remove:cle,save:lle,saveGaussJordanProblem:GI},Symbol.toStringTag,{value:"Module"}));function mle(t,e){const r=t.length,n=t.map((i,s)=>[...i,e[s]]);for(let i=0;i<r;i++){if(Math.abs(n[i][i])<1e-12)return{error:"Pivot = 0 (ควรใช้ Partial Pivoting)"};const s=n[i][i];for(let u=0;u<=r;u++)n[i][u]/=s;for(let u=0;u<r;u++){if(u===i)continue;const l=n[u][i];for(let o=0;o<=r;o++)n[u][o]-=l*n[i][o]}}return{solution:n.map(i=>i[r]),matrix:n}}function hle(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([]),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(dle);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=mle(r,a);if(g.error){o("สถานะ: "+g.error),u([]);return}u(g.solution),o("สถานะ: เสร็จสิ้น (Reduced Row-Echelon Form สำเร็จ)")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("GaussJordan: saving problem (serialized)",g),await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.A=="string"?JSON.parse(g.A):g.A||[],x=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(w),i(x),w&&Array.isArray(w)&&e(w.length)}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Gauss–Jordan Elimination",subtitle:"วิธีการกำจัดแบบเกาส์–จอร์แดน (Reduced Row-Echelon Form)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:g=>{const w=Math.max(1,parseInt(g.target.value)||1);e(w),n(Array(w).fill().map(()=>Array(w).fill(0))),i(Array(w).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((g,w)=>y.jsx("tr",{children:g.map((x,_)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:x,onChange:E=>{const D=r.map(T=>[...T]);D[w][_]=parseFloat(E.target.value)||0,n(D)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},_))},w))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((g,w)=>y.jsx("input",{type:"number",value:g,onChange:x=>{const _=[...a];_[w]=parseFloat(x.target.value)||0,i(_)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},w))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:l})}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:'ใส่เมทริกซ์ A และเวกเตอร์ b แล้วกด "คำนวณ" โปรแกรมจะทำการกำจัดแบบเกาส์–จอร์แดน (ทำให้ได้เมทริกซ์ Reduced Row-Echelon Form) จากนั้นผลลัพธ์ของตัวแปร x₁, x₂, ..., xₙ จะปรากฏในคอลัมน์สุดท้ายของเมทริกซ์'}),s.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:s.map((g,w)=>y.jsxs("li",{children:["x",w+1," = ",Oe(g)]},w))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ox="problems_matrixinversion";async function WI(){const t=Rt(qe(Te,Ox),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function QI(t){return kt(qe(Te,Ox),{...t,method:"matrixinversion",createdAt:$t()})}async function Bx(t){return jt(Mt(Te,Ox,t))}const ple=WI,vle=QI,gle=Bx,yle=Bx,xle=Object.freeze(Object.defineProperty({__proto__:null,del:yle,deleteMatrixInversionProblem:Bx,getMatrixInversionProblems:WI,getProblems:ple,remove:gle,save:vle,saveMatrixInversionProblem:QI},Symbol.toStringTag,{value:"Module"}));function ble(t){return Array.from({length:t},(e,r)=>Array.from({length:t},(n,a)=>r===a?1:0))}function wle(t){const e=t.length,r=ble(e),n=t.map((i,s)=>[...i,...r[s]]);for(let i=0;i<e;i++){let s=n[i][i];if(Math.abs(s)<1e-12)return{error:"Pivot = 0 (ไม่สามารถหา Inverse ได้)"};for(let u=0;u<2*e;u++)n[i][u]/=s;for(let u=0;u<e;u++){if(u===i)continue;const l=n[u][i];for(let o=0;o<2*e;o++)n[u][o]-=l*n[i][o]}}return{inverse:n.map(i=>i.slice(e))}}function Nle(t,e){const r=t.length,n=Array(r).fill(0);for(let a=0;a<r;a++)for(let i=0;i<r;i++)n[a]+=t[a][i]*e[i];return n}function _le(t,e){const r=wle(t);return r.error?{error:r.error}:{solution:Nle(r.inverse,e),inverse:r.inverse}}function Ele(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([]),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(xle);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=_le(r,a);if(g.error){o("สถานะ: "+g.error),u([]);return}u(g.solution),o("สถานะ: เสร็จสิ้น (คำนวณ Inverse สำเร็จ)")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("MatrixInversion: saving problem (serialized)",g),await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.A=="string"?JSON.parse(g.A):g.A||[],x=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(w),i(x),w&&Array.isArray(w)&&e(w.length)}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Matrix Inversion Method",subtitle:"แก้ระบบสมการเชิงเส้นโดยใช้เมทริกซ์ผกผัน (A⁻¹b)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:g=>{const w=Math.max(1,parseInt(g.target.value)||1);e(w),n(Array(w).fill().map(()=>Array(w).fill(0))),i(Array(w).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((g,w)=>y.jsx("tr",{children:g.map((x,_)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:x,onChange:E=>{const D=r.map(T=>[...T]);D[w][_]=parseFloat(E.target.value)||0,n(D)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},_))},w))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((g,w)=>y.jsx("input",{type:"number",value:g,onChange:x=>{const _=[...a];_[w]=parseFloat(x.target.value)||0,i(_)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},w))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:l})}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:"โปรแกรมจะคำนวณเมทริกซ์ผกผัน A⁻¹ โดยใช้ Gauss–Jordan บน [A | I] จากนั้นนำไปคูณกับเวกเตอร์ b เพื่อหาคำตอบของระบบสมการเชิงเส้น"}),s.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:s.map((g,w)=>y.jsxs("li",{children:["x",w+1," = ",Oe(g)]},w))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const jx="problems_lu";async function XI(){const t=Rt(qe(Te,jx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function KI(t){return kt(qe(Te,jx),{...t,method:"lu",createdAt:$t()})}async function kx(t){return jt(Mt(Te,jx,t))}const Sle=XI,Ale=KI,Dle=kx,Cle=kx,Tle=Object.freeze(Object.defineProperty({__proto__:null,del:Cle,deleteLUProblem:kx,getLUProblems:XI,getProblems:Sle,remove:Dle,save:Ale,saveLUProblem:KI},Symbol.toStringTag,{value:"Module"}));function Mle(t,e){const r=t.length,n=Array.from({length:r},()=>Array(r).fill(0)),a=Array.from({length:r},()=>Array(r).fill(0));for(let u=0;u<r;u++){for(let l=u;l<r;l++){let o=0;for(let c=0;c<u;c++)o+=n[u][c]*a[c][l];a[u][l]=t[u][l]-o}for(let l=u;l<r;l++)if(u===l)n[u][u]=1;else{let o=0;for(let c=0;c<u;c++)o+=n[l][c]*a[c][u];if(Math.abs(a[u][u])<1e-12)return{error:"Pivot = 0 (ไม่สามารถแยก LU ได้)"};n[l][u]=(t[l][u]-o)/a[u][u]}}const i=Array(r).fill(0);for(let u=0;u<r;u++){let l=0;for(let o=0;o<u;o++)l+=n[u][o]*i[o];i[u]=e[u]-l}const s=Array(r).fill(0);for(let u=r-1;u>=0;u--){let l=0;for(let o=u+1;o<r;o++)l+=a[u][o]*s[o];if(Math.abs(a[u][u])<1e-12)return{error:"Pivot = 0 (หารไม่ได้)"};s[u]=(i[u]-l)/a[u][u]}return{L:n,U:a,solution:s}}function Ile(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([]),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(Tle);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=Mle(r,a);if(g.error){o("สถานะ: "+g.error),u([]);return}u(g.solution),o("สถานะ: เสร็จสิ้น (LU Decomposition สำเร็จ)")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("LUDecomposition: saving problem (serialized)",g),await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.A=="string"?JSON.parse(g.A):g.A||[],x=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(w),i(x),w&&Array.isArray(w)&&e(w.length)}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"LU Decomposition Method",subtitle:"การแยกเมทริกซ์เป็น L และ U เพื่อแก้ระบบสมการเชิงเส้น"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:g=>{const w=Math.max(1,parseInt(g.target.value)||1);e(w),n(Array(w).fill().map(()=>Array(w).fill(0))),i(Array(w).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((g,w)=>y.jsx("tr",{children:g.map((x,_)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:x,onChange:E=>{const D=r.map(T=>[...T]);D[w][_]=parseFloat(E.target.value)||0,n(D)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},_))},w))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((g,w)=>y.jsx("input",{type:"number",value:g,onChange:x=>{const _=[...a];_[w]=parseFloat(x.target.value)||0,i(_)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},w))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:l})}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:"วิธี LU Decomposition จะแยกเมทริกซ์ A เป็น L (Lower Triangular) และ U (Upper Triangular) จากนั้นแก้สมการ L·y = b และ U·x = y เพื่อหาคำตอบของ x₁, x₂, ..., xₙ"}),s.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:s.map((g,w)=>y.jsxs("li",{children:["x",w+1," = ",Oe(g)]},w))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const $x="problems_cholesky";async function JI(){const t=Rt(qe(Te,$x),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function YI(t){return kt(qe(Te,$x),{...t,method:"cholesky",createdAt:$t()})}async function Lx(t){return jt(Mt(Te,$x,t))}const Ple=JI,Fle=YI,Rle=Lx,Ole=Lx,Ble=Object.freeze(Object.defineProperty({__proto__:null,del:Ole,deleteCholeskyProblem:Lx,getCholeskyProblems:JI,getProblems:Ple,remove:Rle,save:Fle,saveCholeskyProblem:YI},Symbol.toStringTag,{value:"Module"}));function jle(t,e){const r=t.length,n=Array.from({length:r},()=>Array(r).fill(0));try{for(let s=0;s<r;s++)for(let u=0;u<=s;u++){let l=0;for(let o=0;o<u;o++)l+=n[s][o]*n[u][o];if(s===u){const o=t[s][s]-l;if(o<=0)return{error:"A ไม่เป็นบวกกำหนดแน่นอน (Positive Definite)"};n[s][u]=Math.sqrt(o)}else n[s][u]=(t[s][u]-l)/n[u][u]}const a=Array(r).fill(0);for(let s=0;s<r;s++){let u=0;for(let l=0;l<s;l++)u+=n[s][l]*a[l];a[s]=(e[s]-u)/n[s][s]}const i=Array(r).fill(0);for(let s=r-1;s>=0;s--){let u=0;for(let l=s+1;l<r;l++)u+=n[l][s]*i[l];i[s]=(a[s]-u)/n[s][s]}return{L:n,solution:i}}catch{return{error:"เกิดข้อผิดพลาดในการคำนวณ"}}}function kle(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([]),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(Ble);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=jle(r,a);if(g.error){o("สถานะ: "+g.error),u([]);return}u(g.solution),o("สถานะ: เสร็จสิ้น (Cholesky Decomposition สำเร็จ)")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("Cholesky: saving problem (serialized)",g),await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.A=="string"?JSON.parse(g.A):g.A||[],x=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(w),i(x),w&&Array.isArray(w)&&e(w.length)}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Cholesky Decomposition Method",subtitle:"การแยกเมทริกซ์สมมาตรบวกกำหนดแน่นอน A = L·Lᵀ"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:g=>{const w=Math.max(1,parseInt(g.target.value)||1);e(w),n(Array(w).fill().map(()=>Array(w).fill(0))),i(Array(w).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((g,w)=>y.jsx("tr",{children:g.map((x,_)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:x,onChange:E=>{const D=r.map(T=>[...T]);D[w][_]=parseFloat(E.target.value)||0,n(D)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},_))},w))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((g,w)=>y.jsx("input",{type:"number",value:g,onChange:x=>{const _=[...a];_[w]=parseFloat(x.target.value)||0,i(_)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},w))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:l})}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Cholesky Decomposition ใช้สำหรับเมทริกซ์สมมาตรบวกกำหนดแน่นอน โดยแยก A = L·Lᵀ จากนั้นแก้สมการ L·y = b และ Lᵀ·x = y เพื่อหาคำตอบของตัวแปร x₁, x₂, ..., xₙ"}),s.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:s.map((g,w)=>y.jsxs("li",{children:["x",w+1," = ",Oe(g)]},w))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const zx="problems_jacobi";async function ZI(){const t=Rt(qe(Te,zx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function eP(t){return kt(qe(Te,zx),{...t,method:"jacobi",createdAt:$t()})}async function Vx(t){return jt(Mt(Te,zx,t))}const $le=ZI,Lle=eP,zle=Vx,Vle=Vx,Ule=Object.freeze(Object.defineProperty({__proto__:null,del:Vle,deleteJacobiProblem:Vx,getJacobiProblems:ZI,getProblems:$le,remove:zle,save:Lle,saveJacobiProblem:eP},Symbol.toStringTag,{value:"Module"}));function qle(t,e,r,n=1e-6,a=50){const i=t.length;let s=[...r],u=Array(i).fill(0);const l=[];for(let o=1;o<=a;o++){for(let d=0;d<i;d++){let m=0;for(let h=0;h<i;h++)d!==h&&(m+=t[d][h]*s[h]);if(Math.abs(t[d][d])<1e-12)return{error:"Pivot = 0 ที่แถว "+(d+1)};u[d]=(e[d]-m)/t[d][d]}const c=Math.max(...u.map((d,m)=>Math.abs((d-s[m])/(d||1))));if(l.push({iter:o,values:[...u],error:c}),c<n)return{solution:u,iterations:l,converged:!0};s=[...u]}return{solution:u,iterations:l,converged:!1}}function Hle(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([0,0,0]),[l,o]=U.useState(1e-6),[c,d]=U.useState(50),[m,h]=U.useState([]),[p,v]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:C,removingIds:N,refresh:A,saveProblem:b,deleteProblem:g}=Lt(Ule);U.useEffect(()=>{A().catch(console.error)},[A]);const w=()=>{try{const T=qle(r,a,s,parseFloat(l),parseInt(c));if(T.error){v("สถานะ: "+T.error),h([]);return}h(T.solution),v("สถานะ: เสร็จสิ้น "+(T.converged?"(Converged)":"(ไม่ Converged)"))}catch(T){console.error(T),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},x=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u(Array(t).fill(0)),h([]),v("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{const T={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:l,maxIter:c,size:t,expr:`Matrix ${t}x${t}`};console.log("Jacobi: saving problem (serialized)",T),await b(T),alert("บันทึกแล้ว!")}catch(T){console.error("save problem failed:",T),alert("บันทึกไม่สำเร็จ: "+((T==null?void 0:T.message)||String(T)))}},E=T=>{try{const M=typeof T.A=="string"?JSON.parse(T.A):T.A||[],I=typeof T.b=="string"?JSON.parse(T.b):T.b||[],P=typeof T.x0=="string"?JSON.parse(T.x0):T.x0||[];n(M),i(I),u(P),M&&Array.isArray(M)&&e(M.length),T.tol&&o(T.tol),T.maxIter&&d(T.maxIter)}catch(M){console.error("failed to parse saved problem",M,T),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},D=T=>{confirm("ลบโจทย์นี้ไหม?")&&g(T.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Jacobi Iteration Method",subtitle:"วิธีการหาคำตอบแบบทำซ้ำ (Iterative Method)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:T=>{const M=Math.max(1,parseInt(T.target.value)||1);e(M),n(Array(M).fill().map(()=>Array(M).fill(0))),i(Array(M).fill(0)),u(Array(M).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((T,M)=>y.jsx("tr",{children:T.map((I,P)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:I,onChange:B=>{const $=r.map(R=>[...R]);$[M][P]=parseFloat(B.target.value)||0,n($)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},P))},M))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((T,M)=>y.jsx("input",{type:"number",value:T,onChange:I=>{const P=[...a];P[M]=parseFloat(I.target.value)||0,i(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},M))})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),y.jsx("div",{className:"flex gap-2",children:s.map((T,M)=>y.jsx("input",{type:"number",value:T,onChange:I=>{const P=[...s];P[M]=parseFloat(I.target.value)||0,u(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},M))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),y.jsx("input",{type:"text",value:l,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:p})}),y.jsx(zt,{problems:C,onLoad:E,onDelete:D,removingIds:N})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Jacobi ใช้การทำซ้ำเพื่อหาคำตอบของระบบสมการเชิงเส้น โดยเริ่มจากค่าประมาณเริ่มต้น x₀ แล้วคำนวณซ้ำจนค่าความคลาดเคลื่อนน้อยกว่าที่กำหนด"}),m.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:m.map((T,M)=>y.jsxs("li",{children:["x",M+1," = ",Oe(T)]},M))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ux="problems_gaussseidel";async function tP(){const t=Rt(qe(Te,Ux),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function rP(t){return kt(qe(Te,Ux),{...t,method:"gaussseidel",createdAt:$t()})}async function qx(t){return jt(Mt(Te,Ux,t))}const Gle=tP,Wle=rP,Qle=qx,Xle=qx,Kle=Object.freeze(Object.defineProperty({__proto__:null,del:Xle,deleteGaussSeidelProblem:qx,getGaussSeidelProblems:tP,getProblems:Gle,remove:Qle,save:Wle,saveGaussSeidelProblem:rP},Symbol.toStringTag,{value:"Module"}));function Jle(t,e,r,n=1e-6,a=50){const i=t.length,s=[...r],u=[];for(let l=1;l<=a;l++){const o=[...s];for(let d=0;d<i;d++){let m=0;for(let h=0;h<i;h++)d!==h&&(m+=t[d][h]*s[h]);if(Math.abs(t[d][d])<1e-12)return{error:"Pivot = 0 ที่แถว "+(d+1)};s[d]=(e[d]-m)/t[d][d]}const c=Math.max(...s.map((d,m)=>Math.abs((d-o[m])/(d||1))));if(u.push({iter:l,values:[...s],error:c}),c<n)return{solution:s,iterations:u,converged:!0}}return{solution:s,iterations:u,converged:!1}}function Yle(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([0,0,0]),[l,o]=U.useState(1e-6),[c,d]=U.useState(50),[m,h]=U.useState([]),[p,v]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:C,removingIds:N,refresh:A,saveProblem:b,deleteProblem:g}=Lt(Kle);U.useEffect(()=>{A().catch(console.error)},[A]);const w=()=>{try{const T=Jle(r,a,s,parseFloat(l),parseInt(c));if(T.error){v("สถานะ: "+T.error),h([]);return}h(T.solution),v("สถานะ: เสร็จสิ้น "+(T.converged?"(Converged)":"(ไม่ Converged)"))}catch(T){console.error(T),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},x=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u(Array(t).fill(0)),h([]),v("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{const T={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:l,maxIter:c,size:t,expr:`Matrix ${t}x${t}`};console.log("GaussSeidel: saving problem (serialized)",T),await b(T),alert("บันทึกแล้ว!")}catch(T){console.error("save problem failed:",T),alert("บันทึกไม่สำเร็จ: "+((T==null?void 0:T.message)||String(T)))}},E=T=>{try{const M=typeof T.A=="string"?JSON.parse(T.A):T.A||[],I=typeof T.b=="string"?JSON.parse(T.b):T.b||[],P=typeof T.x0=="string"?JSON.parse(T.x0):T.x0||[];n(M),i(I),u(P),M&&Array.isArray(M)&&e(M.length),T.tol&&o(T.tol),T.maxIter&&d(T.maxIter)}catch(M){console.error("failed to parse saved problem",M,T),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},D=T=>{confirm("ลบโจทย์นี้ไหม?")&&g(T.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Gauss–Seidel Iteration Method",subtitle:"วิธีการหาคำตอบแบบทำซ้ำ (ใช้ค่าใหม่ในแต่ละรอบทันที)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:T=>{const M=Math.max(1,parseInt(T.target.value)||1);e(M),n(Array(M).fill().map(()=>Array(M).fill(0))),i(Array(M).fill(0)),u(Array(M).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((T,M)=>y.jsx("tr",{children:T.map((I,P)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:I,onChange:B=>{const $=r.map(R=>[...R]);$[M][P]=parseFloat(B.target.value)||0,n($)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},P))},M))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((T,M)=>y.jsx("input",{type:"number",value:T,onChange:I=>{const P=[...a];P[M]=parseFloat(I.target.value)||0,i(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},M))})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),y.jsx("div",{className:"flex gap-2",children:s.map((T,M)=>y.jsx("input",{type:"number",value:T,onChange:I=>{const P=[...s];P[M]=parseFloat(I.target.value)||0,u(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},M))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),y.jsx("input",{type:"text",value:l,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:p})}),y.jsx(zt,{problems:C,onLoad:E,onDelete:D,removingIds:N})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Gauss–Seidel ใช้การทำซ้ำแบบอัปเดตค่าทันทีในแต่ละรอบ ทำให้มัก converge เร็วกว่าวิธี Jacobi เหมาะกับระบบสมการที่มีเมทริกซ์แนวทแยงเด่นชัด (Diagonally Dominant)"}),m.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:m.map((T,M)=>y.jsxs("li",{children:["x",M+1," = ",Oe(T)]},M))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Hx="problems_conjugategradient";async function nP(){const t=Rt(qe(Te,Hx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function aP(t){return kt(qe(Te,Hx),{...t,method:"conjugategradient",createdAt:$t()})}async function Gx(t){return jt(Mt(Te,Hx,t))}const Zle=nP,ece=aP,tce=Gx,rce=Gx,nce=Object.freeze(Object.defineProperty({__proto__:null,del:rce,deleteConjugateGradientProblem:Gx,getConjugateGradientProblems:nP,getProblems:Zle,remove:tce,save:ece,saveConjugateGradientProblem:aP},Symbol.toStringTag,{value:"Module"}));function ace(t,e,r,n=1e-6,a=50){const i=t.length;let s=[...r],u=Array(i).fill(0),l=Array(i).fill(0);const o=[];for(let d=0;d<i;d++){let m=0;for(let h=0;h<i;h++)m+=t[d][h]*r[h];u[d]=e[d]-m,l[d]=u[d]}let c=u.reduce((d,m)=>d+m*m,0);for(let d=1;d<=a;d++){const m=Array(i).fill(0);for(let A=0;A<i;A++)for(let b=0;b<i;b++)m[A]+=t[A][b]*l[b];const h=l.reduce((A,b,g)=>A+b*m[g],0);if(h===0)return{error:"เกิดปัญหาในการคำนวณ (division by zero)"};const p=c/h;for(let A=0;A<i;A++)s[A]+=p*l[A];for(let A=0;A<i;A++)u[A]-=p*m[A];const v=u.reduce((A,b)=>A+b*b,0),C=Math.sqrt(v);if(o.push({iter:d,x:[...s],error:C}),Math.sqrt(v)<n)return{solution:s,iterations:o,converged:!0};const N=v/c;for(let A=0;A<i;A++)l[A]=u[A]+N*l[A];c=v}return{solution:s,iterations:o,converged:!1}}function ice(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,u]=U.useState([0,0,0]),[l,o]=U.useState(1e-6),[c,d]=U.useState(50),[m,h]=U.useState([]),[p,v]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:C,removingIds:N,refresh:A,saveProblem:b,deleteProblem:g}=Lt(nce);U.useEffect(()=>{A().catch(console.error)},[A]);const w=()=>{try{const T=ace(r,a,s,parseFloat(l),parseInt(c));if(T.error){v("สถานะ: "+T.error),h([]);return}h(T.solution),v("สถานะ: เสร็จสิ้น "+(T.converged?"(Converged)":"(ไม่ Converged)"))}catch(T){console.error(T),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},x=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u(Array(t).fill(0)),h([]),v("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{const T={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:l,maxIter:c,size:t,expr:`Matrix ${t}x${t}`};console.log("ConjugateGradient: saving problem (serialized)",T),await b(T),alert("บันทึกแล้ว!")}catch(T){console.error("save problem failed:",T),alert("บันทึกไม่สำเร็จ: "+((T==null?void 0:T.message)||String(T)))}},E=T=>{try{const M=typeof T.A=="string"?JSON.parse(T.A):T.A||[],I=typeof T.b=="string"?JSON.parse(T.b):T.b||[],P=typeof T.x0=="string"?JSON.parse(T.x0):T.x0||[];n(M),i(I),u(P),M&&Array.isArray(M)&&e(M.length),T.tol&&o(T.tol),T.maxIter&&d(T.maxIter)}catch(M){console.error("failed to parse saved problem",M,T),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},D=T=>{confirm("ลบโจทย์นี้ไหม?")&&g(T.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Conjugate Gradient Method",subtitle:"วิธีการหาคำตอบของระบบสมการเชิงเส้น (สำหรับเมทริกซ์สมมาตรบวกกำหนดแน่นอน)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),y.jsx("input",{type:"number",value:t,onChange:T=>{const M=Math.max(1,parseInt(T.target.value)||1);e(M),n(Array(M).fill().map(()=>Array(M).fill(0))),i(Array(M).fill(0)),u(Array(M).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),y.jsx("table",{className:"text-sm border-collapse",children:y.jsx("tbody",{children:r.map((T,M)=>y.jsx("tr",{children:T.map((I,P)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:I,onChange:B=>{const $=r.map(R=>[...R]);$[M][P]=parseFloat(B.target.value)||0,n($)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},P))},M))})})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),y.jsx("div",{className:"flex gap-2",children:a.map((T,M)=>y.jsx("input",{type:"number",value:T,onChange:I=>{const P=[...a];P[M]=parseFloat(I.target.value)||0,i(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},M))})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),y.jsx("div",{className:"flex gap-2",children:s.map((T,M)=>y.jsx("input",{type:"number",value:T,onChange:I=>{const P=[...s];P[M]=parseFloat(I.target.value)||0,u(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},M))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),y.jsx("input",{type:"text",value:l,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),y.jsx("input",{type:"number",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:y.jsx("div",{children:p})}),y.jsx(zt,{problems:C,onLoad:E,onDelete:D,removingIds:N})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Conjugate Gradient ใช้สำหรับเมทริกซ์สมมาตรบวกกำหนดแน่นอน (SPD) โดยหาคำตอบด้วยการเคลื่อนที่ในทิศทางที่สอดคล้อง (Conjugate) เพื่อลด residual อย่างรวดเร็ว"}),m.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),y.jsx("ul",{children:m.map((T,M)=>y.jsxs("li",{children:["x",M+1," = ",Oe(T)]},M))})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Wx="problems_lagrange";async function iP(){const t=Rt(qe(Te,Wx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function sP(t){return kt(qe(Te,Wx),{...t,method:"lagrange",createdAt:$t()})}async function Qx(t){return jt(Mt(Te,Wx,t))}const sce=iP,oce=sP,uce=Qx,lce=Qx,cce=Object.freeze(Object.defineProperty({__proto__:null,del:lce,deleteLagrangeProblem:Qx,getLagrangeProblems:iP,getProblems:sce,remove:uce,save:oce,saveLagrangeProblem:sP},Symbol.toStringTag,{value:"Module"}));function fce(t,e,r){const n=t.length;let a=0,i=[];for(let s=0;s<n;s++){let u=1,l=`L${s}(x) = `;for(let c=0;c<n;c++)s!==c&&(u*=(r-t[c])/(t[s]-t[c]),l+=`((x - ${t[c]})/(${t[s]} - ${t[c]})) `);const o=e[s]*u;a+=o,i.push({i:s,Li:u,term:o,LiStr:l})}return{fx:a,detail:i}}function dce(){const[t,e]=U.useState(["","",""]),[r,n]=U.useState(["","",""]),[a,i]=U.useState(""),[s,u]=U.useState(null),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,d]=U.useState([]),{problems:m,removingIds:h,refresh:p,saveProblem:v,deleteProblem:C}=Lt(cce);U.useEffect(()=>{p().catch(console.error)},[p]);const N=()=>{try{const x=t.map(M=>parseFloat(M)),_=r.map(M=>parseFloat(M)),E=parseFloat(a);if(x.some(isNaN)||_.some(isNaN)||isNaN(E)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(x.length!==_.length){o("สถานะ: จำนวนค่า x และ y ต้องเท่ากัน");return}const{fx:D,detail:T}=fce(x,_,E);u(D),d(T),o("สถานะ: คำนวณเสร็จสิ้น")}catch(x){console.error(x),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},A=()=>{e(["","",""]),n(["","",""]),i(""),u(null),d([]),o("สถานะ: รีเซ็ตแล้ว")},b=async()=>{try{const x={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Lagrange(${t.join(",")})`};await v(x),alert("บันทึกแล้ว!")}catch(x){console.error("save problem failed:",x),alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},g=x=>{try{const _=typeof x.xValues=="string"?JSON.parse(x.xValues):x.xValues||[],E=typeof x.yValues=="string"?JSON.parse(x.yValues):x.yValues||[];e(_),n(E),i(x.xTarget||"")}catch(_){console.error("failed to parse saved problem",_,x),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},w=x=>{confirm("ลบโจทย์นี้ไหม?")&&C(x.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Lagrange Interpolation",subtitle:"หาค่า f(x) โดยใช้ลากร็องจ์อินเตอร์โพเลชัน"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),y.jsx("input",{type:"number",value:t.length,onChange:x=>{const _=Math.max(2,parseInt(x.target.value)||2);e(Array(_).fill("")),n(Array(_).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),y.jsxs("table",{className:"text-sm border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"text-gray-400",children:[y.jsx("th",{className:"p-1",children:"xᵢ"}),y.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),y.jsx("tbody",{children:t.map((x,_)=>y.jsxs("tr",{children:[y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:t[_],onChange:E=>{const D=[...t];D[_]=E.target.value,e(D)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:r[_],onChange:E=>{const D=[...r];D[_]=E.target.value,n(D)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},_))})]})]}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),y.jsx("input",{type:"number",value:a,onChange:x=>i(x.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:A,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:b,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),y.jsx(zt,{problems:m,onLoad:g,onDelete:w,removingIds:h})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s!==null?y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsxs("div",{children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(s)})]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"mb-1 font-semibold text-gray-300",children:"ขั้นตอนการคำนวณ:"}),c.map(x=>y.jsxs("div",{className:"mb-1",children:["L",x.i,"(x): ",x.Li.toFixed(6)," → y",x.i,"·L",x.i,"(x) = ",x.term.toFixed(6)]},x.i))]})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Xx="problems_linear";async function oP(){const t=Rt(qe(Te,Xx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function uP(t){return kt(qe(Te,Xx),{...t,method:"linear",createdAt:$t()})}async function Kx(t){return jt(Mt(Te,Xx,t))}const mce=oP,hce=uP,pce=Kx,vce=Kx,gce=Object.freeze(Object.defineProperty({__proto__:null,del:vce,deleteLinearProblem:Kx,getLinearProblems:oP,getProblems:mce,remove:pce,save:hce,saveLinearProblem:uP},Symbol.toStringTag,{value:"Module"}));function yce(t,e,r,n,a){return e+(n-e)/(r-t)*(a-t)}function xce(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,u]=U.useState(""),[l,o]=U.useState(""),[c,d]=U.useState(null),[m,h]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:p,removingIds:v,refresh:C,saveProblem:N,deleteProblem:A}=Lt(gce);U.useEffect(()=>{C().catch(console.error)},[C]);const b=()=>{try{const E=parseFloat(t),D=parseFloat(r),T=parseFloat(a),M=parseFloat(s),I=parseFloat(l);if([E,D,T,M,I].some(isNaN)){h("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(E===T){h("สถานะ: ค่า x1 และ x2 ต้องไม่เท่ากัน");return}const P=yce(E,D,T,M,I);d(P),h("สถานะ: คำนวณเสร็จสิ้น")}catch(E){console.error(E),h("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},g=()=>{e(""),n(""),i(""),u(""),o(""),d(null),h("สถานะ: รีเซ็ตแล้ว")},w=async()=>{try{const E={x1:t,y1:r,x2:a,y2:s,xTarget:l,expr:`Linear(${t},${a})`};await N(E),alert("บันทึกแล้ว!")}catch(E){console.error("save problem failed:",E),alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},x=E=>{e(E.x1||""),n(E.y1||""),i(E.x2||""),u(E.y2||""),o(E.xTarget||"")},_=E=>{confirm("ลบโจทย์นี้ไหม?")&&A(E.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Linear Interpolation",subtitle:"คำนวณค่า f(x) โดยใช้การประมาณเชิงเส้น"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-400",children:"x₁"}),y.jsx("input",{type:"number",value:t,onChange:E=>e(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-400",children:"f(x₁)"}),y.jsx("input",{type:"number",value:r,onChange:E=>n(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-400",children:"x₂"}),y.jsx("input",{type:"number",value:a,onChange:E=>i(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-sm text-gray-400",children:"f(x₂)"}),y.jsx("input",{type:"number",value:s,onChange:E=>u(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"หาค่า f(x) เมื่อ x = "}),y.jsx("input",{type:"number",value:l,onChange:E=>o(E.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:b,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:g,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2 text-gray-400",children:m}),y.jsx(zt,{problems:p,onLoad:x,onDelete:_,removingIds:v})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),c!==null?y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsxs("div",{children:["f(",l,") ≈ ",y.jsx("b",{children:Oe(c)})]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"font-semibold text-gray-300",children:"สูตรที่ใช้:"}),y.jsx("code",{children:"f(x) = f(x₁) + [(f(x₂) - f(x₁)) / (x₂ - x₁)] · (x - x₁)"})]})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Jx="problems_quadratic";async function lP(){const t=Rt(qe(Te,Jx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function cP(t){return kt(qe(Te,Jx),{...t,method:"quadratic",createdAt:$t()})}async function Yx(t){return jt(Mt(Te,Jx,t))}const bce=lP,wce=cP,Nce=Yx,_ce=Yx,Ece=Object.freeze(Object.defineProperty({__proto__:null,del:_ce,deleteQuadraticProblem:Yx,getProblems:bce,getQuadraticProblems:lP,remove:Nce,save:wce,saveQuadraticProblem:cP},Symbol.toStringTag,{value:"Module"}));function Sce(t,e,r){if(t.length!==3||e.length!==3)throw new Error("ต้องมีข้อมูล 3 จุดเท่านั้น");const[n,a,i]=t,[s,u,l]=e,o=(r-a)*(r-i)/((n-a)*(n-i)),c=(r-n)*(r-i)/((a-n)*(a-i)),d=(r-n)*(r-a)/((i-n)*(i-a));return{fx:s*o+u*c+l*d,L0:o,L1:c,L2:d}}function Ace(){const[t,e]=U.useState(["","",""]),[r,n]=U.useState(["","",""]),[a,i]=U.useState(""),[s,u]=U.useState(null),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(Ece);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=t.map(M=>parseFloat(M)),w=r.map(M=>parseFloat(M)),x=parseFloat(a);if(g.some(isNaN)||w.some(isNaN)||isNaN(x)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}const{fx:_,L0:E,L1:D,L2:T}=Sce(g,w,x);u({fx:_,L0:E,L1:D,L2:T}),o("สถานะ: คำนวณเสร็จสิ้น")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{e(["","",""]),n(["","",""]),i(""),u(null),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Quadratic(${t.join(",")})`};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.xValues=="string"?JSON.parse(g.xValues):g.xValues||[],x=typeof g.yValues=="string"?JSON.parse(g.yValues):g.yValues||[];e(w),n(x),i(g.xTarget||"")}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Quadratic Interpolation",subtitle:"คำนวณค่า f(x) โดยใช้การอินเตอร์โพเลชันกำลังสอง (ผ่าน 3 จุด)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),y.jsxs("table",{className:"text-sm border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"text-gray-400",children:[y.jsx("th",{className:"p-1",children:"xᵢ"}),y.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),y.jsx("tbody",{children:t.map((g,w)=>y.jsxs("tr",{children:[y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:t[w],onChange:x=>{const _=[...t];_[w]=x.target.value,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:r[w],onChange:x=>{const _=[...r];_[w]=x.target.value,n(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},w))})]})]}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),y.jsx("input",{type:"number",value:a,onChange:g=>i(g.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s?y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsxs("div",{children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(s.fx)})]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"ค่า Lᵢ(x):"}),y.jsxs("div",{children:["L₀(x) = ",Oe(s.L0)]}),y.jsxs("div",{children:["L₁(x) = ",Oe(s.L1)]}),y.jsxs("div",{children:["L₂(x) = ",Oe(s.L2)]})]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"font-semibold text-gray-300",children:"สูตรที่ใช้:"}),y.jsx("code",{children:"f(x) = y₀L₀(x) + y₁L₁(x) + y₂L₂(x)"})]})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Zx="problems_polynomial";async function fP(){const t=Rt(qe(Te,Zx),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function dP(t){return kt(qe(Te,Zx),{...t,method:"polynomial",createdAt:$t()})}async function e1(t){return jt(Mt(Te,Zx,t))}const Dce=fP,Cce=dP,Tce=e1,Mce=e1,Ice=Object.freeze(Object.defineProperty({__proto__:null,del:Mce,deletePolynomialProblem:e1,getPolynomialProblems:fP,getProblems:Dce,remove:Tce,save:Cce,savePolynomialProblem:dP},Symbol.toStringTag,{value:"Module"}));function Pce(){const[t,e]=U.useState(["","","",""]),[r,n]=U.useState(["","","",""]),[a,i]=U.useState(""),[s,u]=U.useState(null),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,d]=U.useState([]),{problems:m,removingIds:h,refresh:p,saveProblem:v,deleteProblem:C}=Lt(Ice);U.useEffect(()=>{p().catch(console.error)},[p]);const N=()=>{try{const x=t.map(M=>parseFloat(M)),_=r.map(M=>parseFloat(M)),E=parseFloat(a);if(x.some(isNaN)||_.some(isNaN)||isNaN(E)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}const D=dividedDifferences(x,_),T=newtonPolynomial(x,D,E);u(T),d(D),o("สถานะ: คำนวณเสร็จสิ้น")}catch(x){console.error(x),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},A=()=>{e(["","","",""]),n(["","","",""]),i(""),u(null),d([]),o("สถานะ: รีเซ็ตแล้ว")},b=async()=>{try{const x={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Polynomial(${t.join(",")})`};await v(x),alert("บันทึกแล้ว!")}catch(x){console.error("save problem failed:",x),alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},g=x=>{try{const _=typeof x.xValues=="string"?JSON.parse(x.xValues):x.xValues||[],E=typeof x.yValues=="string"?JSON.parse(x.yValues):x.yValues||[];e(_),n(E),i(x.xTarget||"")}catch(_){console.error("failed to parse saved problem",_,x),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},w=x=>{confirm("ลบโจทย์นี้ไหม?")&&C(x.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Polynomial Interpolation",subtitle:"คำนวณค่า f(x) โดยใช้ Newton’s Divided Difference Polynomial"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),y.jsx("input",{type:"number",value:t.length,onChange:x=>{const _=Math.max(2,parseInt(x.target.value)||2);e(Array(_).fill("")),n(Array(_).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),y.jsxs("table",{className:"text-sm border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"text-gray-400",children:[y.jsx("th",{className:"p-1",children:"xᵢ"}),y.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),y.jsx("tbody",{children:t.map((x,_)=>y.jsxs("tr",{children:[y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:t[_],onChange:E=>{const D=[...t];D[_]=E.target.value,e(D)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:r[_],onChange:E=>{const D=[...r];D[_]=E.target.value,n(D)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},_))})]})]}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),y.jsx("input",{type:"number",value:a,onChange:x=>i(x.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:A,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:b,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),y.jsx(zt,{problems:m,onLoad:g,onDelete:w,removingIds:h})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s!==null?y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsxs("div",{children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(s)})]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"ตาราง Newton’s Divided Difference:"}),y.jsx("table",{className:"text-xs border-collapse border border-slate-600",children:y.jsx("tbody",{children:c.map((x,_)=>y.jsx("tr",{children:x.map((E,D)=>D<c.length-_?y.jsx("td",{className:"border border-slate-700 p-1 text-center",children:Oe(E)},D):null)},_))})})]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"font-semibold text-gray-300",children:"สูตรทั่วไป:"}),y.jsx("code",{children:"f(x) = f(x₀) + f[x₀,x₁](x - x₀) + f[x₀,x₁,x₂](x - x₀)(x - x₁) + ..."})]})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const t1="problems_linearspline";async function mP(){const t=Rt(qe(Te,t1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function hP(t){return kt(qe(Te,t1),{...t,method:"linearspline",createdAt:$t()})}async function r1(t){return jt(Mt(Te,t1,t))}const Fce=mP,Rce=hP,Oce=r1,Bce=r1,jce=Object.freeze(Object.defineProperty({__proto__:null,del:Bce,deleteLinearSplineProblem:r1,getLinearSplineProblems:mP,getProblems:Fce,remove:Oce,save:Rce,saveLinearSplineProblem:hP},Symbol.toStringTag,{value:"Module"}));function kce(t,e,r){const n=t.length;let a=[];for(let u=0;u<n-1;u++){const l=(e[u+1]-e[u])/(t[u+1]-t[u]),o=e[u]-l*t[u];a.push({i:u,x1:t[u],x2:t[u+1],slope:l,intercept:o})}let i=a.find(u=>r>=u.x1&&r<=u.x2);if(!i)throw new Error("ค่า x อยู่นอกขอบเขตข้อมูล");return{fx:i.slope*r+i.intercept,segs:a,found:i}}function $ce(){const[t,e]=U.useState(["","",""]),[r,n]=U.useState(["","",""]),[a,i]=U.useState(""),[s,u]=U.useState(null),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,d]=U.useState([]),{problems:m,removingIds:h,refresh:p,saveProblem:v,deleteProblem:C}=Lt(jce);U.useEffect(()=>{p().catch(console.error)},[p]);const N=()=>{try{const x=t.map(I=>parseFloat(I)),_=r.map(I=>parseFloat(I)),E=parseFloat(a);if(x.some(isNaN)||_.some(isNaN)||isNaN(E)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(x.length<2){o("สถานะ: ต้องมีอย่างน้อย 2 จุดข้อมูล");return}const{fx:D,segs:T,found:M}=kce(x,_,E);u({fx:D,found:M}),d(T),o("สถานะ: คำนวณเสร็จสิ้น")}catch(x){console.error(x),o("สถานะ: "+(x.message||"เกิดข้อผิดพลาดในการคำนวณ"))}},A=()=>{e(["","",""]),n(["","",""]),i(""),u(null),d([]),o("สถานะ: รีเซ็ตแล้ว")},b=async()=>{try{const x={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`LinearSpline(${t.join(",")})`};await v(x),alert("บันทึกแล้ว!")}catch(x){console.error("save problem failed:",x),alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},g=x=>{try{const _=typeof x.xValues=="string"?JSON.parse(x.xValues):x.xValues||[],E=typeof x.yValues=="string"?JSON.parse(x.yValues):x.yValues||[];e(_),n(E),i(x.xTarget||"")}catch(_){console.error("failed to parse saved problem",_,x),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},w=x=>{confirm("ลบโจทย์นี้ไหม?")&&C(x.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Linear Spline Interpolation",subtitle:"การประมาณค่า f(x) ด้วยเส้นตรงระหว่างจุดข้อมูลที่ต่อเนื่องกัน"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),y.jsx("input",{type:"number",value:t.length,onChange:x=>{const _=Math.max(2,parseInt(x.target.value)||2);e(Array(_).fill("")),n(Array(_).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"overflow-x-auto mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),y.jsxs("table",{className:"text-sm border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"text-gray-400",children:[y.jsx("th",{className:"p-1",children:"xᵢ"}),y.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),y.jsx("tbody",{children:t.map((x,_)=>y.jsxs("tr",{children:[y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:t[_],onChange:E=>{const D=[...t];D[_]=E.target.value,e(D)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:r[_],onChange:E=>{const D=[...r];D[_]=E.target.value,n(D)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},_))})]})]}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),y.jsx("input",{type:"number",value:a,onChange:x=>i(x.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:A,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:b,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),y.jsx(zt,{problems:m,onLoad:g,onDelete:w,removingIds:h})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s?y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsxs("div",{children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(s.fx)})]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"สมการเส้นตรงแต่ละช่วง:"}),c.map(x=>y.jsxs("div",{children:["ช่วง [",x.x1,", ",x.x2,"]: y = ",Oe(x.slope),"x + ",Oe(x.intercept)]},x.i))]}),y.jsxs("div",{className:"mt-3 text-gray-400",children:[y.jsx("div",{className:"font-semibold text-gray-300",children:"ช่วงที่ใช้คำนวณ:"}),y.jsxs("div",{children:["x ∈ [",s.found.x1,", ",s.found.x2,"] → y = ",Oe(s.found.slope),"x + ",Oe(s.found.intercept)]})]})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const n1="problems_quadraticspline";async function pP(){const t=Rt(qe(Te,n1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function vP(t){return kt(qe(Te,n1),{...t,method:"quadratic_spline",createdAt:$t()})}async function a1(t){return jt(Mt(Te,n1,t))}const Lce=pP,zce=vP,Vce=a1,Uce=a1,qce=Object.freeze(Object.defineProperty({__proto__:null,del:Uce,deleteQuadraticSplineProblem:a1,getProblems:Lce,getQuadraticSplineProblems:pP,remove:Vce,save:zce,saveQuadraticSplineProblem:vP},Symbol.toStringTag,{value:"Module"}));function Hce(t,e){if(t.length<3)return{error:"ต้องมีจุดอย่างน้อย 3 จุด"};const r=t.length-1,n=[],a=[],i=[];for(let o=0;o<r;o++){const c=t[o].x,d=t[o+1].x,m=t[o].y,h=t[o+1].y,p=d-c;if(p===0)return{error:"ค่าของ x ซ้ำกัน"};n[o]=m,a[o]=(h-m)/p,i[o]=0}let s=0;for(let o=0;o<r;o++)if(e>=t[o].x&&e<=t[o+1].x){s=o;break}const u=e-t[s].x,l=n[s]+a[s]*u+i[s]*u*u;return{a:n,b:a,c:i,y:l}}function Gce(){const[t,e]=U.useState([{x:0,y:0},{x:1,y:1},{x:2,y:4}]),[r,n]=U.useState(""),[a,i]=U.useState(null),[s,u]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:l,removingIds:o,refresh:c,saveProblem:d,deleteProblem:m}=Lt(qce);U.useEffect(()=>{c().catch(console.error)},[c]);const h=()=>{try{const g=parseFloat(r);if(isNaN(g)){u("กรุณากรอกค่า x ให้ถูกต้อง");return}const w=Hce(t,g);if(w.error){u("สถานะ: "+w.error),i(null);return}i(w.y),u("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),u("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},p=()=>{e([{x:0,y:0},{x:1,y:1},{x:2,y:4}]),n(""),i(null),u("สถานะ: รีเซ็ตแล้ว")},v=()=>{e([...t,{x:0,y:0}])},C=g=>{if(t.length<=3)return alert("ต้องมีอย่างน้อย 3 จุด");e(t.filter((w,x)=>x!==g))},N=async()=>{try{const g={points:JSON.stringify(t),xValue:r,expr:`Quadratic Spline (${t.length} points)`};await d(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.points=="string"?JSON.parse(g.points):g.points||[];e(w),n(g.xValue||"")}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&m(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Quadratic Spline",subtitle:"ประมาณค่า y ด้วย Quadratic Spline Interpolation"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),y.jsx("table",{className:"text-sm border-collapse mb-3",children:y.jsx("tbody",{children:t.map((g,w)=>y.jsxs("tr",{children:[y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:g.x,onChange:x=>{const _=[...t];_[w].x=parseFloat(x.target.value)||0,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:g.y,onChange:x=>{const _=[...t];_[w].y=parseFloat(x.target.value)||0,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("button",{onClick:()=>C(w),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},w))})}),y.jsx("button",{onClick:v,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการหาค่า y"}),y.jsx("input",{type:"number",value:r,onChange:g=>n(g.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:p,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:s}),y.jsx(zt,{problems:l,onLoad:A,onDelete:b,removingIds:o})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),a!==null?y.jsxs("div",{className:"text-sm text-gray-300",children:["y(",r,") = ",y.jsx("span",{className:"font-semibold",children:Oe(a)})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีผลลัพธ์"}),y.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Quadratic Spline ใช้สำหรับประมาณค่าฟังก์ชันโดยใช้โพลิโนเมียลดีกรี 2 ระหว่างจุดข้อมูล"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const i1="problems_cubicspline";async function gP(){const t=Rt(qe(Te,i1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function yP(t){return kt(qe(Te,i1),{...t,method:"cubic_spline",createdAt:$t()})}async function s1(t){return jt(Mt(Te,i1,t))}const Wce=gP,Qce=yP,Xce=s1,Kce=s1,Jce=Object.freeze(Object.defineProperty({__proto__:null,del:Kce,deleteCubicSplineProblem:s1,getCubicSplineProblems:gP,getProblems:Wce,remove:Xce,save:Qce,saveCubicSplineProblem:yP},Symbol.toStringTag,{value:"Module"}));function Yce(t,e){const r=t.length;if(r<3)return{error:"ต้องมีจุดอย่างน้อย 3 จุด"};const n=[],a=[],i=[],s=[],u=[],l=[],o=[],c=[],d=[];for(let v=0;v<r;v++)l[v]=t[v].y;for(let v=0;v<r-1;v++)n[v]=t[v+1].x-t[v].x;if(n.some(v=>v===0))return{error:"ค่าของ x ซ้ำกัน"};for(let v=1;v<r-1;v++)a[v]=3/n[v]*(l[v+1]-l[v])-3/n[v-1]*(l[v]-l[v-1]);i[0]=1,s[0]=0,u[0]=0;for(let v=1;v<r-1;v++)i[v]=2*(t[v+1].x-t[v-1].x)-n[v-1]*s[v-1],s[v]=n[v]/i[v],u[v]=(a[v]-n[v-1]*u[v-1])/i[v];i[r-1]=1,u[r-1]=0,c[r-1]=0;for(let v=r-2;v>=0;v--)c[v]=u[v]-s[v]*c[v+1],o[v]=(l[v+1]-l[v])/n[v]-n[v]*(c[v+1]+2*c[v])/3,d[v]=(c[v+1]-c[v])/(3*n[v]);let m=r-2;for(let v=0;v<r-1;v++)if(e>=t[v].x&&e<=t[v+1].x){m=v;break}const h=e-t[m].x,p=l[m]+o[m]*h+c[m]*h**2+d[m]*h**3;return{a:l,b:o,c,d,y:p}}function Zce(){const[t,e]=U.useState([{x:0,y:0},{x:1,y:1},{x:2,y:4},{x:3,y:9}]),[r,n]=U.useState(""),[a,i]=U.useState(null),[s,u]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:l,removingIds:o,refresh:c,saveProblem:d,deleteProblem:m}=Lt(Jce);U.useEffect(()=>{c().catch(console.error)},[c]);const h=()=>{try{const g=parseFloat(r);if(isNaN(g)){u("กรุณากรอกค่า x ให้ถูกต้อง");return}const w=Yce(t,g);if(w.error){u("สถานะ: "+w.error),i(null);return}i(w.y),u("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),u("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},p=()=>{e([{x:0,y:0},{x:1,y:1},{x:2,y:4},{x:3,y:9}]),n(""),i(null),u("สถานะ: รีเซ็ตแล้ว")},v=()=>{e([...t,{x:0,y:0}])},C=g=>{if(t.length<=3)return alert("ต้องมีอย่างน้อย 3 จุด");e(t.filter((w,x)=>x!==g))},N=async()=>{try{const g={points:JSON.stringify(t),xValue:r,expr:`Cubic Spline (${t.length} points)`};await d(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.points=="string"?JSON.parse(g.points):g.points||[];e(w),n(g.xValue||"")}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&m(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Cubic Spline",subtitle:"ประมาณค่า y ด้วย Cubic Spline Interpolation"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),y.jsx("table",{className:"text-sm border-collapse mb-3",children:y.jsx("tbody",{children:t.map((g,w)=>y.jsxs("tr",{children:[y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:g.x,onChange:x=>{const _=[...t];_[w].x=parseFloat(x.target.value)||0,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:g.y,onChange:x=>{const _=[...t];_[w].y=parseFloat(x.target.value)||0,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("button",{onClick:()=>C(w),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},w))})}),y.jsx("button",{onClick:v,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการหาค่า y"}),y.jsx("input",{type:"number",value:r,onChange:g=>n(g.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:p,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:s}),y.jsx(zt,{problems:l,onLoad:A,onDelete:b,removingIds:o})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),a!==null?y.jsxs("div",{className:"text-sm text-gray-300",children:["y(",r,") = ",y.jsx("span",{className:"font-semibold",children:Oe(a)})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีผลลัพธ์"}),y.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Cubic Spline ใช้สมการกำลังสามแต่ละช่วง เพื่อให้เส้นต่อเนื่องทั้งค่าฟังก์ชันและอนุพันธ์"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const o1="problems_singlelinear";async function xP(){const t=Rt(qe(Te,o1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function bP(t){return kt(qe(Te,o1),{...t,method:"single_linear",createdAt:$t()})}async function u1(t){return jt(Mt(Te,o1,t))}const efe=xP,tfe=bP,rfe=u1,nfe=u1,afe=Object.freeze(Object.defineProperty({__proto__:null,del:nfe,deleteSingleLinearProblem:u1,getProblems:efe,getSingleLinearProblems:xP,remove:rfe,save:tfe,saveSingleLinearProblem:bP},Symbol.toStringTag,{value:"Module"}));function ife(t,e){const r=t.length;if(r<2)return{error:"ต้องมีข้อมูลอย่างน้อย 2 จุด"};const n=t.reduce((c,d)=>c+d.x,0),a=t.reduce((c,d)=>c+d.y,0),i=t.reduce((c,d)=>c+d.x*d.y,0),s=t.reduce((c,d)=>c+d.x*d.x,0),u=(r*i-n*a)/(r*s-n**2),l=(a-u*n)/r,o=l+u*e;return{a:l,b:u,yPred:o}}function sfe(){const[t,e]=U.useState([{x:1,y:1},{x:2,y:2},{x:3,y:2.5}]),[r,n]=U.useState(""),[a,i]=U.useState(null),[s,u]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:l,removingIds:o,refresh:c,saveProblem:d,deleteProblem:m}=Lt(afe);U.useEffect(()=>{c().catch(console.error)},[c]);const h=()=>{try{const g=parseFloat(r);if(isNaN(g)){u("กรุณากรอกค่า x ที่ต้องการทำนาย");return}const w=ife(t,g);if(w.error){u("สถานะ: "+w.error),i(null);return}i(w),u("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),u("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},p=()=>{e([{x:1,y:1},{x:2,y:2},{x:3,y:2.5}]),n(""),i(null),u("สถานะ: รีเซ็ตแล้ว")},v=()=>{e([...t,{x:0,y:0}])},C=g=>{if(t.length<=2)return alert("ต้องมีอย่างน้อย 2 จุด");e(t.filter((w,x)=>x!==g))},N=async()=>{try{const g={points:JSON.stringify(t),xPredict:r,expr:`Single Linear Regression (${t.length} points)`};await d(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{const w=typeof g.points=="string"?JSON.parse(g.points):g.points||[];e(w),n(g.xPredict||"")}catch(w){console.error("failed to parse saved problem",w,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&m(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Single Linear Regression",subtitle:"การหาสมการเส้นตรงที่เหมาะสมกับข้อมูล (y = a + bx)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),y.jsx("table",{className:"text-sm border-collapse mb-3",children:y.jsx("tbody",{children:t.map((g,w)=>y.jsxs("tr",{children:[y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:g.x,onChange:x=>{const _=[...t];_[w].x=parseFloat(x.target.value)||0,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:g.y,onChange:x=>{const _=[...t];_[w].y=parseFloat(x.target.value)||0,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("button",{onClick:()=>C(w),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},w))})}),y.jsx("button",{onClick:v,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการทำนาย (xₚ)"}),y.jsx("input",{type:"number",value:r,onChange:g=>n(g.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:p,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:s}),y.jsx(zt,{problems:l,onLoad:A,onDelete:b,removingIds:o})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),a?y.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[y.jsxs("div",{children:["a = ",Oe(a.a)]}),y.jsxs("div",{children:["b = ",Oe(a.b)]}),y.jsxs("div",{children:["สมการ: y = ",Oe(a.a)," + ",Oe(a.b),"x"]}),y.jsxs("div",{children:["y(",r,") ="," ",y.jsx("span",{className:"font-semibold",children:Oe(a.yPred)})]})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีผลลัพธ์"}),y.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"การถดถอยเชิงเส้น (Single Linear Regression) ใช้หาความสัมพันธ์ระหว่าง x และ y ด้วยเส้นตรง y = a + bx ที่ทำให้ผลรวมของความคลาดเคลื่อนยกกำลังสองน้อยที่สุด"})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const l1="problems_multiplelinear";async function wP(){const t=Rt(qe(Te,l1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function NP(t){return kt(qe(Te,l1),{...t,method:"multiple_linear",createdAt:$t()})}async function c1(t){return jt(Mt(Te,l1,t))}const ofe=wP,ufe=NP,lfe=c1,cfe=c1,ffe=Object.freeze(Object.defineProperty({__proto__:null,del:cfe,deleteMultipleLinearProblem:c1,getMultipleLinearProblems:wP,getProblems:ofe,remove:lfe,save:ufe,saveMultipleLinearProblem:NP},Symbol.toStringTag,{value:"Module"}));function dfe(t,e){const r=t.length,n=t.map(s=>s.slice()),a=e.slice();for(let s=0;s<r;s++){let u=s,l=Math.abs(n[s][s]);for(let o=s+1;o<r;o++){const c=Math.abs(n[o][s]);c>l&&(l=c,u=o)}if(l<1e-15)throw new Error("Matrix is singular or ill-conditioned.");u!==s&&([n[s],n[u]]=[n[u],n[s]],[a[s],a[u]]=[a[u],a[s]]);for(let o=s+1;o<r;o++){const c=n[o][s]/n[s][s];n[o][s]=0;for(let d=s+1;d<r;d++)n[o][d]-=c*n[s][d];a[o]-=c*a[s]}}const i=Array(r).fill(0);for(let s=r-1;s>=0;s--){let u=a[s];for(let l=s+1;l<r;l++)u-=n[s][l]*i[l];i[s]=u/n[s][s]}return i}function mfe(t){const e=t.length,r=t[0].length,n=Array.from({length:r},()=>Array(e).fill(0));for(let a=0;a<e;a++)for(let i=0;i<r;i++)n[i][a]=t[a][i];return n}function fA(t,e){const r=t.length,n=t[0].length,a=e[0].length,i=Array.from({length:r},()=>Array(a).fill(0));for(let s=0;s<r;s++)for(let u=0;u<a;u++){let l=0;for(let o=0;o<n;o++)l+=t[s][o]*e[o][u];i[s][u]=l}return i}function hfe(t){const e=t.length;if(e<2)return{error:"ต้องมีข้อมูลอย่างน้อย 2 แถว"};t[0].x.length;const r=t.map(p=>[1,...p.x]),n=t.map(p=>[p.y]),a=mfe(r),i=fA(a,r),s=fA(a,n).map(p=>p[0]),u=dfe(i,s),l=r.map(p=>p.reduce((v,C,N)=>v+C*u[N],0)),o=n.map(p=>p[0]),c=o.reduce((p,v)=>p+v,0)/e,d=o.reduce((p,v)=>p+(v-c)**2,0),m=o.reduce((p,v,C)=>p+(v-l[C])**2,0),h=d>0?1-m/d:1;return{coef:u,r2:h,yHat:l}}function dA(t,e){return t[0]+e.reduce((r,n,a)=>r+t[a+1]*n,0)}function pfe(){const[t,e]=U.useState(2),[r,n]=U.useState([{x:[1,2],y:5},{x:[2,0],y:4},{x:[3,1],y:7}]),[a,i]=U.useState(Array(2).fill(0)),[s,u]=U.useState(null),[l,o]=U.useState(null),[c,d]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:m,removingIds:h,refresh:p,saveProblem:v,deleteProblem:C}=Lt(ffe);U.useEffect(()=>{p().catch(console.error)},[p]);const N=M=>{n(I=>I.map(P=>{const B=P.x.slice(0,M);for(;B.length<M;)B.push(0);return{...P,x:B}})),i(I=>{const P=I.slice(0,M);for(;P.length<M;)P.push(0);return P})},A=M=>{const I=Math.max(1,Math.min(8,parseInt(M)||1));e(I),N(I)},b=()=>{n([...r,{x:Array(t).fill(0),y:0}])},g=M=>{if(r.length<=2)return alert("ต้องมีอย่างน้อย 2 แถว");n(r.filter((I,P)=>P!==M))},w=()=>{try{const M=hfe(r);if(M.error){u(null),o(null),d("สถานะ: "+M.error);return}u(M),d("สถานะ: คำนวณโมเดลสำเร็จ (R² = "+Oe(M.r2)+")"),a.every(I=>Number.isFinite(parseFloat(I)))&&o(dA(M.coef,a.map(I=>parseFloat(I))))}catch(M){console.error(M),d("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},x=()=>{if(!(s!=null&&s.coef))return alert("โปรดคำนวณโมเดลก่อน");const M=a.map(I=>parseFloat(I)||0);o(dA(s.coef,M))},_=()=>{e(2),n([{x:[1,2],y:5},{x:[2,0],y:4},{x:[3,1],y:7}]),i([0,0]),u(null),o(null),d("สถานะ: รีเซ็ตแล้ว")},E=async()=>{try{const M={features:t,rows:JSON.stringify(r),xPredict:JSON.stringify(a),expr:`Multiple Linear (${t} features, ${r.length} rows)`};await v(M),alert("บันทึกแล้ว!")}catch(M){console.error("save problem failed:",M),alert("บันทึกไม่สำเร็จ: "+((M==null?void 0:M.message)||String(M)))}},D=M=>{try{const I=M.features||1,P=typeof M.rows=="string"?JSON.parse(M.rows):M.rows||[],B=typeof M.xPredict=="string"?JSON.parse(M.xPredict):M.xPredict||[];e(I),n(P),i(B&&Array.isArray(B)?B:Array(I).fill(0)),u(null),o(null),d("สถานะ: โหลดโจทย์แล้ว (โปรดกดคำนวณ)"),N(I)}catch(I){console.error("failed to parse saved problem",I,M),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},T=M=>{confirm("ลบโจทย์นี้ไหม?")&&C(M.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Multiple Linear Regression",subtitle:"การถดถอยเชิงเส้นพหุคูณ: y = a + b₁x₁ + ... + b_m x_m"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนตัวแปรอิสระ (m)"}),y.jsx("input",{type:"number",value:t,onChange:M=>A(M.target.value),className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ตารางข้อมูล"}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"text-sm border-collapse mb-3",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[Array.from({length:t},(M,I)=>y.jsxs("th",{className:"px-2 py-1 text-left text-gray-400",children:["x",I+1]},I)),y.jsx("th",{className:"px-2 py-1 text-left text-gray-400",children:"y"}),y.jsx("th",{})]})}),y.jsx("tbody",{children:r.map((M,I)=>y.jsxs("tr",{children:[M.x.map((P,B)=>y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:P,onChange:$=>{const R=r.map(G=>({...G,x:[...G.x]}));R[I].x[B]=parseFloat($.target.value)||0,n(R)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},B)),y.jsx("td",{className:"p-1",children:y.jsx("input",{type:"number",value:M.y,onChange:P=>{const B=r.map($=>({...$,x:[...$.x]}));B[I].y=parseFloat(P.target.value)||0,n(B)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),y.jsx("td",{className:"p-1",children:y.jsx("button",{onClick:()=>g(I),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},I))})]})}),y.jsx("button",{onClick:b,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มแถวข้อมูล"}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการทำนาย (xₚ1..xₚm)"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((M,I)=>y.jsx("input",{type:"number",value:M,onChange:P=>{const B=a.slice();B[I]=parseFloat(P.target.value)||0,i(B)},className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"},I))})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณโมเดล"}),y.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"ทำนายค่า yₚ"}),y.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:E,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:c}),y.jsx(zt,{problems:m,onLoad:D,onDelete:T,removingIds:h})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s!=null&&s.coef?y.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[y.jsxs("div",{children:["Intercept (a) = ",Oe(s.coef[0])]}),s.coef.slice(1).map((M,I)=>y.jsxs("div",{children:["b",I+1," = ",Oe(M)]},I)),y.jsxs("div",{children:["R² = ",y.jsx("span",{className:"font-semibold",children:Oe(s.r2)})]}),l!==null&&y.jsxs("div",{className:"mt-2",children:["yₚ = ",y.jsx("span",{className:"font-semibold",children:Oe(l)})]})]}):y.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีโมเดล"}),y.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Multiple Linear Regression แก้ด้วย Normal Equation: (XᵀX)w = Xᵀy แล้วคำนวณสัมประสิทธิ์ w = [a, b₁, …, b_m]."})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const f1="problems_polynomialreg";async function _P(){const t=Rt(qe(Te,f1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function EP(t){return kt(qe(Te,f1),{...t,method:"polynomialreg",createdAt:$t()})}async function d1(t){return jt(Mt(Te,f1,t))}const vfe=_P,gfe=EP,yfe=d1,xfe=d1,bfe=Object.freeze(Object.defineProperty({__proto__:null,del:xfe,deletePolynomialRegProblem:d1,getPolynomialRegProblems:_P,getProblems:vfe,remove:yfe,save:gfe,savePolynomialRegProblem:EP},Symbol.toStringTag,{value:"Module"}));function wfe(t,e,r){t.length;const n=Array.from({length:r+1},(s,u)=>Array.from({length:r+1},(l,o)=>t.reduce((c,d)=>c+Math.pow(d,u+o),0))),a=Array.from({length:r+1},(s,u)=>e.reduce((l,o,c)=>l+o*Math.pow(t[c],u),0)),i=n.map((s,u)=>[...s,a[u]]);for(let s=0;s<=r;s++){let u=s;for(let o=s+1;o<=r;o++)Math.abs(i[o][s])>Math.abs(i[u][s])&&(u=o);[i[s],i[u]]=[i[u],i[s]];const l=i[s][s];if(Math.abs(l)<1e-12)throw new Error("Pivot เป็นศูนย์ — ไม่สามารถแก้สมการได้");for(let o=s;o<=r+1;o++)i[s][o]/=l;for(let o=0;o<=r;o++)if(o!==s){const c=i[o][s];for(let d=s;d<=r+1;d++)i[o][d]-=c*i[s][d]}}return i.map(s=>s[r+1])}function Nfe(){const[t,e]=U.useState([1,2,3,4]),[r,n]=U.useState([2.2,2.8,3.6,4.5]),[a,i]=U.useState(2),[s,u]=U.useState([]),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(bfe);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=wfe(t,r,a);u(g),o("สถานะ: คำนวณเสร็จสิ้น")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u([])}},C=()=>{e([1,2,3,4]),n([2.2,2.8,3.6,4.5]),i(2),u([]),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={x:JSON.stringify(t),y:JSON.stringify(r),degree:a,expr:`Polynomial Regression (deg=${a})`};await h(g),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{e(JSON.parse(g.x)),n(JSON.parse(g.y)),i(g.degree)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Polynomial Regression",subtitle:"ประมาณค่าเชิงเส้นแบบพหุนาม (Polynomial Least Squares)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ลำดับพหุนาม"}),y.jsx("input",{type:"number",value:a,onChange:g=>i(Math.max(1,parseInt(g.target.value)||1)),className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x"}),y.jsx("textarea",{value:t.join(", "),onChange:g=>e(g.target.value.split(",").map(w=>parseFloat(w.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า y"}),y.jsx("textarea",{value:r.join(", "),onChange:g=>n(g.target.value.split(",").map(w=>parseFloat(w.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:l}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),y.jsxs("div",{className:"text-sm text-gray-400",children:["Polynomial Regression ใช้ประมาณค่าแนวโค้งเชิงเส้นลำดับ",y.jsx("b",{children:" m "})," ที่สอดคล้องกับข้อมูล (x, y) โดยหาค่าสัมประสิทธิ์จากสมการ Normal Equation"]}),s.length>0&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"สมการพหุนาม:"}),y.jsxs("div",{children:["y ="," ",s.map((g,w)=>`${Oe(g)}${w===0?"":`x^${w}`}`).join(" + ")]})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const m1="problems_nonlinearreg";async function SP(){const t=Rt(qe(Te,m1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function AP(t){return kt(qe(Te,m1),{...t,method:"nonlinearreg",createdAt:$t()})}async function h1(t){return jt(Mt(Te,m1,t))}const _fe=SP,Efe=AP,Sfe=h1,Afe=h1,Dfe=Object.freeze(Object.defineProperty({__proto__:null,del:Afe,deleteNonlinearRegProblem:h1,getNonlinearRegProblems:SP,getProblems:_fe,remove:Sfe,save:Efe,saveNonlinearRegProblem:AP},Symbol.toStringTag,{value:"Module"}));function Cfe(t,e){const r=t.length,n=t.reduce((o,c)=>o+c,0),a=e.reduce((o,c)=>o+c,0),i=t.reduce((o,c,d)=>o+c*e[d],0),s=t.reduce((o,c)=>o+c*c,0),u=(r*i-n*a)/(r*s-n**2);return{a:(a-u*n)/r,b:u}}function Tfe(t,e,r){if(t.length<2)throw new Error("ต้องมีข้อมูลอย่างน้อย 2 จุด");let a=[],i=[];if(r==="exponential")a=t,i=e.map(c=>Math.log(c));else if(r==="power")a=t.map(c=>Math.log(c)),i=e.map(c=>Math.log(c));else throw new Error("ไม่รู้จักโมเดลที่เลือก");const{a:s,b:u}=Cfe(a,i);return{a:Math.exp(s),b:u}}function Mfe(){const[t,e]=U.useState([1,2,3,4,5]),[r,n]=U.useState([2.7,7.4,20.1,54.6,148.4]),[a,i]=U.useState("exponential"),[s,u]=U.useState(null),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(Dfe);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=Tfe(t,r,a);u(g),o("สถานะ: คำนวณเสร็จสิ้น")}catch(g){console.error(g),u(null),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{e([1,2,3,4,5]),n([2.7,7.4,20.1,54.6,148.4]),i("exponential"),u(null),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{const g={x:JSON.stringify(t),y:JSON.stringify(r),model:a,expr:`Nonlinear Regression (${a})`};await h(g),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{try{e(JSON.parse(g.x)),n(JSON.parse(g.y)),i(g.model||"exponential")}catch{alert("ไม่สามารถโหลดโจทย์ได้")}},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Nonlinear Regression",subtitle:"การประมาณค่าแบบไม่เชิงเส้น (Exponential / Power Model)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"เลือกโมเดล"}),y.jsxs("select",{value:a,onChange:g=>i(g.target.value),className:"w-full mb-3 px-2 py-1 rounded bg-slate-900 border border-slate-700",children:[y.jsx("option",{value:"exponential",children:"Exponential (y = a·e^(b·x))"}),y.jsx("option",{value:"power",children:"Power (y = a·x^b)"})]}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x"}),y.jsx("textarea",{value:t.join(", "),onChange:g=>e(g.target.value.split(",").map(w=>parseFloat(w.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า y"}),y.jsx("textarea",{value:r.join(", "),onChange:g=>n(g.target.value.split(",").map(w=>parseFloat(w.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:l}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsx("div",{className:"text-sm text-gray-400",children:"โมเดลนี้จะประมาณค่าพารามิเตอร์ a และ b โดยใช้การแปลงลอการิทึมเพื่อลดรูปเป็นเชิงเส้น"}),s&&y.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[y.jsx("div",{className:"mb-2",children:"สมการที่ได้:"}),a==="exponential"?y.jsxs("div",{children:["y = ",Oe(s.a)," · e^(",Oe(s.b),"x)"]}):y.jsxs("div",{children:["y = ",Oe(s.a)," · x^",Oe(s.b)]})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const p1="problems_single_trapezoidal";async function DP(){const t=Rt(qe(Te,p1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function CP(t){return kt(qe(Te,p1),{...t,method:"single_trapezoidal",createdAt:$t()})}async function v1(t){return jt(Mt(Te,p1,t))}const Ife=DP,Pfe=CP,Ffe=v1,Rfe=v1,Ofe=Object.freeze(Object.defineProperty({__proto__:null,del:Rfe,deleteSingleTrapezoidalProblem:v1,getProblems:Ife,getSingleTrapezoidalProblems:DP,remove:Ffe,save:Pfe,saveSingleTrapezoidalProblem:CP},Symbol.toStringTag,{value:"Module"}));function Bfe(t,e,r){const n=s=>{try{return Bs(t,{x:s})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}};return(r-e)/2*(n(e)+n(r))}function jfe(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,u]=U.useState("-"),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:d,refresh:m,saveProblem:h,deleteProblem:p}=Lt(Ofe);U.useEffect(()=>{m().catch(console.error)},[m]);const v=()=>{try{const g=Bfe(r,a,f);u(g),o("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u("-")}},C=()=>{e("x^2 + 1"),n(0),i(2),u("-"),o("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{await h({expr:t,a:r,b:a,method:"single_trapezoidal"}),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},A=g=>{e(g.expr),n(g.a),i(g.b)},b=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Single Trapezoidal Rule",subtitle:"หาค่าประมาณเชิงตัวเลขของการอินทิเกรตแบบ Trapezoidal (หนึ่งช่วง)"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),y.jsx("input",{type:"text",value:t,onChange:g=>e(g.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),y.jsx("input",{type:"number",value:r,onChange:g=>n(parseFloat(g.target.value)),className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),y.jsx("input",{type:"number",value:a,onChange:g=>i(parseFloat(g.target.value)),className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:v,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:l}),y.jsx(zt,{problems:c,onLoad:A,onDelete:b,removingIds:d})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"ใช้สูตร: I = (h / 2) [f(a) + f(b)], โดย h = b - a"}),s!=="-"&&y.jsxs("div",{className:"text-gray-300 text-sm",children:[y.jsxs("p",{children:["h = ",Oe(a-r)]}),y.jsxs("p",{children:["f(a) = ",Oe(f(r)),", f(b) = ",Oe(f(a))]}),y.jsxs("p",{className:"mt-2",children:["ค่าประมาณของ I ≈ ",y.jsx("b",{children:Oe(s)})]})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const g1="problems_composite_trapezoidal";async function TP(){const t=Rt(qe(Te,g1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function MP(t){return kt(qe(Te,g1),{...t,method:"composite_trapezoidal",createdAt:$t()})}async function y1(t){return jt(Mt(Te,g1,t))}const kfe=TP,$fe=MP,Lfe=y1,zfe=y1,Vfe=Object.freeze(Object.defineProperty({__proto__:null,del:zfe,deleteCompositeTrapezoidalProblem:y1,getCompositeTrapezoidalProblems:TP,getProblems:kfe,remove:Lfe,save:$fe,saveCompositeTrapezoidalProblem:MP},Symbol.toStringTag,{value:"Module"}));function Ufe(t,e,r,n){const a=(e-t)/r;let i=n(t)+n(e);const s=[{i:0,x:t,fx:n(t)}];for(let l=1;l<r;l++){const o=t+l*a;i+=2*n(o),s.push({i:l,x:o,fx:n(o)})}return s.push({i:r,x:e,fx:n(e)}),{I:a/2*i,h:a,rows:s}}function qfe(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,u]=U.useState(4),[l,o]=U.useState("-"),[c,d]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,h]=U.useState([]),{problems:p,removingIds:v,refresh:C,saveProblem:N,deleteProblem:A}=Lt(Vfe);U.useEffect(()=>{C().catch(console.error)},[C]);const b=D=>{try{return Bs(t,{x:D})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},g=()=>{try{const{I:D,h:T,rows:M}=Ufe(r,a,s,b);o(D),h(M),d(`สถานะ: คำนวณสำเร็จ (h = ${Oe(T)})`)}catch(D){console.error(D),o("-"),d("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),h([])}},w=()=>{e("x^2 + 1"),n(0),i(2),u(4),o("-"),d("สถานะ: รีเซ็ตแล้ว"),h([])},x=async()=>{try{await N({expr:t,a:r,b:a,n:s,method:"composite_trapezoidal"}),alert("บันทึกแล้ว!")}catch(D){alert("บันทึกไม่สำเร็จ: "+((D==null?void 0:D.message)||String(D)))}},_=D=>{e(D.expr),n(D.a),i(D.b),u(D.n)},E=D=>{confirm("ลบโจทย์นี้ไหม?")&&A(D.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Composite Trapezoidal Rule",subtitle:"การอินทิเกรตเชิงตัวเลขด้วย Trapezoidal หลายช่วงย่อย"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),y.jsx("input",{type:"text",value:t,onChange:D=>e(D.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),y.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),y.jsx("input",{type:"number",value:r,onChange:D=>n(parseFloat(D.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),y.jsx("input",{type:"number",value:a,onChange:D=>i(parseFloat(D.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n"}),y.jsx("input",{type:"number",value:s,onChange:D=>u(Math.max(1,parseInt(D.target.value)||1)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:g,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:w,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:c}),y.jsx(zt,{problems:p,onLoad:_,onDelete:E,removingIds:v})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"ใช้สูตร: I = (h/2)[f(x₀) + 2∑f(xᵢ) + f(xₙ)], โดย h = (b - a)/n"}),m.length>0&&y.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:y.jsxs("table",{className:"min-w-full border border-slate-700",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700",children:[y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"i"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"xᵢ"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f(xᵢ)"})]})}),y.jsx("tbody",{children:m.map(D=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:D.i}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(D.x)}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(D.fx)})]},D.i))})]})}),l!=="-"&&y.jsx("div",{className:"text-sm text-gray-300",children:y.jsxs("p",{children:["ค่าประมาณของ I ≈ ",y.jsx("b",{children:Oe(l)})]})})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const x1="problems_simpson";async function IP(){const t=Rt(qe(Te,x1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function PP(t){return kt(qe(Te,x1),{...t,method:"simpson",createdAt:$t()})}async function b1(t){return jt(Mt(Te,x1,t))}const Hfe=IP,Gfe=PP,Wfe=b1,Qfe=b1,Xfe=Object.freeze(Object.defineProperty({__proto__:null,del:Qfe,deleteSimpsonProblem:b1,getProblems:Hfe,getSimpsonProblems:IP,remove:Wfe,save:Gfe,saveSimpsonProblem:PP},Symbol.toStringTag,{value:"Module"}));function Kfe(t,e,r,n){if(n%2!==0)throw new Error("n ต้องเป็นจำนวนคู่เท่านั้น");const a=o=>{try{return Bs(t,{x:o})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},i=(r-e)/n;let s=a(e)+a(r);const u=[{i:0,x:e,fx:a(e)}];for(let o=1;o<n;o++){const c=e+o*i,d=a(c);s+=o%2===0?2*d:4*d,u.push({i:o,x:c,fx:d})}return u.push({i:n,x:r,fx:a(r)}),{I:i/3*s,h:i,rows:u}}function Jfe(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,u]=U.useState(4),[l,o]=U.useState("-"),[c,d]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,h]=U.useState([]),{problems:p,removingIds:v,refresh:C,saveProblem:N,deleteProblem:A}=Lt(Xfe);U.useEffect(()=>{C().catch(console.error)},[C]);const b=()=>{try{const{I:E,h:D,rows:T}=Kfe(r,a,s,f);o(E),h(T),d(`สถานะ: คำนวณสำเร็จ (h = ${Oe(D)})`)}catch(E){console.error(E),o("-"),d("สถานะ: "+(E.message||"เกิดข้อผิดพลาดในการคำนวณ")),h([])}},g=()=>{e("x^2 + 1"),n(0),i(2),u(4),o("-"),d("สถานะ: รีเซ็ตแล้ว"),h([])},w=async()=>{try{await N({expr:t,a:r,b:a,n:s,method:"simpson"}),alert("บันทึกแล้ว!")}catch(E){alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},x=E=>{e(E.expr),n(E.a),i(E.b),u(E.n)},_=E=>{confirm("ลบโจทย์นี้ไหม?")&&A(E.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Simpson's Rule (1/3)",subtitle:"การอินทิเกรตเชิงตัวเลขด้วย Simpson’s Composite Rule"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),y.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),y.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),y.jsx("input",{type:"number",value:r,onChange:E=>n(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),y.jsx("input",{type:"number",value:a,onChange:E=>i(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n (คู่)"}),y.jsx("input",{type:"number",value:s,onChange:E=>u(Math.max(2,parseInt(E.target.value)||2)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:b,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:g,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:c}),y.jsx(zt,{problems:p,onLoad:x,onDelete:_,removingIds:v})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Simpson’s 1/3 Rule:",y.jsx("br",{}),"I = (h / 3) [f(x₀) + 4∑f(xᵢ_คี่) + 2∑f(xᵢ_คู่) + f(xₙ)]"]}),m.length>0&&y.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:y.jsxs("table",{className:"min-w-full border border-slate-700",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700",children:[y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"i"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"xᵢ"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f(xᵢ)"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"Weight"})]})}),y.jsx("tbody",{children:m.map(E=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:E.i}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(E.x)}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(E.fx)}),y.jsx("td",{className:"px-2 py-1 border border-slate-700 text-center",children:E.i===0||E.i===m.length-1?"1":E.i%2===0?"2":"4"})]},E.i))})]})}),l!=="-"&&y.jsx("div",{className:"text-sm text-gray-300",children:y.jsxs("p",{children:["ค่าประมาณของ I ≈ ",y.jsx("b",{children:Oe(l)})]})})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const w1="problems_composite_simpson";async function FP(){const t=Rt(qe(Te,w1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function RP(t){return kt(qe(Te,w1),{...t,method:"composite_simpson",createdAt:$t()})}async function N1(t){return jt(Mt(Te,w1,t))}const Yfe=FP,Zfe=RP,ede=N1,tde=N1,rde=Object.freeze(Object.defineProperty({__proto__:null,del:tde,deleteCompositeSimpsonProblem:N1,getCompositeSimpsonProblems:FP,getProblems:Yfe,remove:ede,save:Zfe,saveCompositeSimpsonProblem:RP},Symbol.toStringTag,{value:"Module"}));function nde(t,e,r,n){if(r%2!==0)throw new Error("n ต้องเป็นจำนวนคู่เท่านั้น");const a=(e-t)/r;let i=n(t)+n(e);const s=[{i:0,x:t,fx:n(t)}];for(let l=1;l<r;l++){const o=t+l*a,c=n(o);i+=l%2===0?2*c:4*c,s.push({i:l,x:o,fx:c})}return s.push({i:r,x:e,fx:n(e)}),{I:a/3*i,h:a,rows:s}}function ade(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,u]=U.useState(4),[l,o]=U.useState("-"),[c,d]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,h]=U.useState([]),{problems:p,removingIds:v,refresh:C,saveProblem:N,deleteProblem:A}=Lt(rde);U.useEffect(()=>{C().catch(console.error)},[C]);const b=D=>{try{return Bs(t,{x:D})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},g=()=>{try{const{I:D,h:T,rows:M}=nde(r,a,s,b);o(D),h(M),d(`สถานะ: คำนวณสำเร็จ (h = ${Oe(T)})`)}catch(D){console.error(D),o("-"),d("สถานะ: "+(D.message||"เกิดข้อผิดพลาดในการคำนวณ")),h([])}},w=()=>{e("x^2 + 1"),n(0),i(2),u(4),o("-"),d("สถานะ: รีเซ็ตแล้ว"),h([])},x=async()=>{try{await N({expr:t,a:r,b:a,n:s,method:"composite_simpson"}),alert("บันทึกแล้ว!")}catch(D){alert("บันทึกไม่สำเร็จ: "+((D==null?void 0:D.message)||String(D)))}},_=D=>{e(D.expr),n(D.a),i(D.b),u(D.n)},E=D=>{confirm("ลบโจทย์นี้ไหม?")&&A(D.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Composite Simpson’s Rule (1/3)",subtitle:"การอินทิเกรตเชิงตัวเลขแบบหลายช่วงด้วย Simpson’s Rule"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),y.jsx("input",{type:"text",value:t,onChange:D=>e(D.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),y.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),y.jsx("input",{type:"number",value:r,onChange:D=>n(parseFloat(D.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),y.jsx("input",{type:"number",value:a,onChange:D=>i(parseFloat(D.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n (คู่)"}),y.jsx("input",{type:"number",value:s,onChange:D=>u(Math.max(2,parseInt(D.target.value)||2)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:g,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:w,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:c}),y.jsx(zt,{problems:p,onLoad:_,onDelete:E,removingIds:v})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"สูตร: I = (h/3) [f(x₀) + 4∑f(xᵢ_คี่) + 2∑f(xᵢ_คู่) + f(xₙ)] โดย h = (b - a)/n, n ต้องเป็นจำนวนคู่"}),m.length>0&&y.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:y.jsxs("table",{className:"min-w-full border border-slate-700",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700",children:[y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"i"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"xᵢ"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f(xᵢ)"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"Weight"})]})}),y.jsx("tbody",{children:m.map(D=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:D.i}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(D.x)}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(D.fx)}),y.jsx("td",{className:"px-2 py-1 border border-slate-700 text-center",children:D.i===0||D.i===m.length-1?"1":D.i%2===0?"2":"4"})]},D.i))})]})}),l!=="-"&&y.jsx("div",{className:"text-sm text-gray-300",children:y.jsxs("p",{children:["ค่าประมาณของ I ≈ ",y.jsx("b",{children:Oe(l)})]})})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const _1="problems_first_divided";async function OP(){const t=Rt(qe(Te,_1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function BP(t){return kt(qe(Te,_1),{...t,method:"first_divided",createdAt:$t()})}async function E1(t){return jt(Mt(Te,_1,t))}const ide=OP,sde=BP,ode=E1,ude=E1,lde=Object.freeze(Object.defineProperty({__proto__:null,del:ude,deleteFirstDividedProblem:E1,getFirstDividedProblems:OP,getProblems:ide,remove:ode,save:sde,saveFirstDividedProblem:BP},Symbol.toStringTag,{value:"Module"}));function cde(t,e,r,n,a){const i=(n-r)/(e-t),s=r+i*(a-t);return{f01:i,Px:s}}function fde(){const[t,e]=U.useState(1),[r,n]=U.useState(2),[a,i]=U.useState(2),[s,u]=U.useState(5),[l,o]=U.useState(1.5),[c,d]=U.useState("-"),[m,h]=U.useState("-"),[p,v]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:C,removingIds:N,refresh:A,saveProblem:b,deleteProblem:g}=Lt(lde);U.useEffect(()=>{A().catch(console.error)},[A]);const w=()=>{try{const{f01:T,Px:M}=cde(t,r,a,s,l);h(T),d(M),v("สถานะ: คำนวณเสร็จสิ้น")}catch(T){console.error(T),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},x=()=>{e(1),n(2),i(2),u(5),o(1.5),d("-"),h("-"),v("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{await b({x0:t,x1:r,fx0:a,fx1:s,x:l,method:"first_divided"}),alert("บันทึกแล้ว!")}catch(T){alert("บันทึกไม่สำเร็จ: "+((T==null?void 0:T.message)||String(T)))}},E=T=>{e(T.x0),n(T.x1),i(T.fx0),u(T.fx1),o(T.x)},D=T=>{confirm("ลบโจทย์นี้ไหม?")&&g(T.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"First Divided-Difference",subtitle:"การประมาณเชิงเส้นด้วย Newton’s First Divided-Difference"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),y.jsx("input",{type:"number",value:t,onChange:T=>e(parseFloat(T.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x₀)"}),y.jsx("input",{type:"number",value:a,onChange:T=>i(parseFloat(T.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₁"}),y.jsx("input",{type:"number",value:r,onChange:T=>n(parseFloat(T.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x₁)"}),y.jsx("input",{type:"number",value:s,onChange:T=>u(parseFloat(T.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),y.jsx("input",{type:"number",value:l,onChange:T=>o(parseFloat(T.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:p}),y.jsx(zt,{problems:C,onLoad:E,onDelete:D,removingIds:N})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร: f[x₀, x₁] = (f(x₁) - f(x₀)) / (x₁ - x₀)",y.jsx("br",{}),"P₁(x) = f(x₀) + f[x₀, x₁](x - x₀)"]}),m!=="-"&&y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsxs("p",{children:["f[x₀, x₁] = ",Oe(m)]}),y.jsxs("p",{className:"mt-1",children:["f(",l,") ≈ ",y.jsx("b",{children:Oe(c)})]})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const S1="problems_second_divided";async function jP(){const t=Rt(qe(Te,S1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function kP(t){return kt(qe(Te,S1),{...t,method:"second_divided",createdAt:$t()})}async function A1(t){return jt(Mt(Te,S1,t))}const dde=jP,mde=kP,hde=A1,pde=A1,vde=Object.freeze(Object.defineProperty({__proto__:null,del:pde,deleteSecondDividedProblem:A1,getProblems:dde,getSecondDividedProblems:jP,remove:hde,save:mde,saveSecondDividedProblem:kP},Symbol.toStringTag,{value:"Module"}));function gde(t,e,r,n,a,i,s){const u=(a-n)/(e-t),l=(i-a)/(r-e),o=(l-u)/(r-t),c=n+u*(s-t)+o*(s-t)*(s-e);return{f01:u,f12:l,f012:o,Px:c}}function yde(){const[t,e]=U.useState(1),[r,n]=U.useState(2),[a,i]=U.useState(3),[s,u]=U.useState(2),[l,o]=U.useState(5),[c,d]=U.useState(10),[m,h]=U.useState(2.5),[p,v]=U.useState("-"),[C,N]=U.useState("-"),[A,b]=U.useState("-"),[g,w]=U.useState("-"),[x,_]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:E,removingIds:D,refresh:T,saveProblem:M,deleteProblem:I}=Lt(vde);U.useEffect(()=>{T().catch(console.error)},[T]);const P=()=>{try{const{f01:L,f12:H,f012:Z,Px:ie}=gde(t,r,a,s,l,c,m);v(L),N(H),b(Z),w(ie),_("สถานะ: คำนวณสำเร็จ")}catch(L){console.error(L),_("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},B=()=>{e(1),n(2),i(3),u(2),o(5),d(10),h(2.5),w("-"),v("-"),N("-"),b("-"),_("สถานะ: รีเซ็ตแล้ว")},$=async()=>{try{await M({x0:t,x1:r,x2:a,fx0:s,fx1:l,fx2:c,x:m,method:"second_divided"}),alert("บันทึกแล้ว!")}catch(L){alert("บันทึกไม่สำเร็จ: "+((L==null?void 0:L.message)||String(L)))}},R=L=>{e(L.x0),n(L.x1),i(L.x2),u(L.fx0),o(L.fx1),d(L.fx2),h(L.x)},G=L=>{confirm("ลบโจทย์นี้ไหม?")&&I(L.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Second Divided-Difference",subtitle:"การประมาณเชิงกำลังสองด้วย Newton’s Second Divided-Difference"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),y.jsx("input",{type:"number",value:t,onChange:L=>e(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1 mt-1",children:"f(x₀)"}),y.jsx("input",{type:"number",value:s,onChange:L=>u(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₁"}),y.jsx("input",{type:"number",value:r,onChange:L=>n(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1 mt-1",children:"f(x₁)"}),y.jsx("input",{type:"number",value:l,onChange:L=>o(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₂"}),y.jsx("input",{type:"number",value:a,onChange:L=>i(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1 mt-1",children:"f(x₂)"}),y.jsx("input",{type:"number",value:c,onChange:L=>d(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),y.jsx("input",{type:"number",value:m,onChange:L=>h(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:P,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:B,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:$,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:x}),y.jsx(zt,{problems:E,onLoad:R,onDelete:G,removingIds:D})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร:",y.jsx("br",{}),"f[x₀, x₁] = (f₁ - f₀) / (x₁ - x₀)",y.jsx("br",{}),"f[x₁, x₂] = (f₂ - f₁) / (x₂ - x₁)",y.jsx("br",{}),"f[x₀, x₁, x₂] = (f[x₁, x₂] - f[x₀, x₁]) / (x₂ - x₀)",y.jsx("br",{}),"P₂(x) = f₀ + f[x₀,x₁](x-x₀) + f[x₀,x₁,x₂](x-x₀)(x-x₁)"]}),A!=="-"&&y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsxs("p",{children:["f[x₀, x₁] = ",Oe(p)]}),y.jsxs("p",{children:["f[x₁, x₂] = ",Oe(C)]}),y.jsxs("p",{children:["f[x₀, x₁, x₂] = ",Oe(A)]}),y.jsxs("p",{className:"mt-2",children:["f(",m,") ≈ ",y.jsx("b",{children:Oe(g)})]})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const D1="problems_forward_divided";async function $P(){const t=Rt(qe(Te,D1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function LP(t){return kt(qe(Te,D1),{...t,method:"forward_divided",createdAt:$t()})}async function C1(t){return jt(Mt(Te,D1,t))}const xde=$P,bde=LP,wde=C1,Nde=C1,_de=Object.freeze(Object.defineProperty({__proto__:null,del:Nde,deleteForwardDividedProblem:C1,getForwardDividedProblems:$P,getProblems:xde,remove:wde,save:bde,saveForwardDividedProblem:LP},Symbol.toStringTag,{value:"Module"}));function Ede(t){const e=t.length,r=[t.slice()];for(let n=1;n<e;n++){const a=r[n-1],i=[];for(let s=0;s<a.length-1;s++)i.push(a[s+1]-a[s]);r.push(i)}return r}function Sde(t,e,r){const n=t.length,a=t[1]-t[0],i=Ede(e),s=(r-t[0])/a;let u=e[0];for(let l=1;l<n;l++){let o=i[l][0];for(let c=0;c<l;c++)o*=s-c;u+=o/ti(l)}return{result:u,table:i}}function Ade(){const[t,e]=U.useState([1,2,3,4]),[r,n]=U.useState([1,8,27,64]),[a,i]=U.useState(2.5),[s,u]=U.useState("-"),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,d]=U.useState([]),{problems:m,removingIds:h,refresh:p,saveProblem:v,deleteProblem:C}=Lt(_de);U.useEffect(()=>{p().catch(console.error)},[p]);const N=()=>{try{const{result:x,table:_}=Sde(t,r,a);u(x),d(_),o("สถานะ: คำนวณสำเร็จ")}catch(x){console.error(x),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u("-"),d([])}},A=()=>{e([1,2,3,4]),n([1,8,27,64]),i(2.5),u("-"),o("สถานะ: รีเซ็ตแล้ว"),d([])},b=async()=>{try{const x={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"forward_divided"};await v(x),alert("บันทึกแล้ว!")}catch(x){alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},g=x=>{try{e(JSON.parse(x.x)),n(JSON.parse(x.y)),i(x.xFind)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},w=x=>{confirm("ลบโจทย์นี้ไหม?")&&C(x.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Forward Divided-Difference",subtitle:"Newton’s Forward Difference Interpolation"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),y.jsx("textarea",{value:t.join(", "),onChange:x=>e(x.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),y.jsx("textarea",{value:r.join(", "),onChange:x=>n(x.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),y.jsx("input",{type:"number",value:a,onChange:x=>i(parseFloat(x.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:A,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:b,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:l}),y.jsx(zt,{problems:m,onLoad:g,onDelete:w,removingIds:h})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Newton’s Forward Difference:",y.jsx("br",{}),"P(x) = f₀ + uΔf₀ + (u(u−1)/2!)Δ²f₀ + (u(u−1)(u−2)/3!)Δ³f₀ + ...",y.jsx("br",{}),"โดย u = (x - x₀)/h"]}),c.length>0&&y.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:y.jsxs("table",{className:"min-w-full border border-slate-700",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700",children:[y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"Δⁿ f₀"})]})}),y.jsx("tbody",{children:c.map((x,_)=>y.jsxs("tr",{children:[y.jsxs("td",{className:"px-2 py-1 border border-slate-700 text-center",children:["Δ",_===0?"⁰":_]}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:x[0]!==void 0?Oe(x[0]):"-"})]},_))})]})}),s!=="-"&&y.jsxs("div",{className:"text-sm text-gray-300",children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(s)})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const T1="problems_backward_divided";async function zP(){const t=Rt(qe(Te,T1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function VP(t){return kt(qe(Te,T1),{...t,method:"backward_divided",createdAt:$t()})}async function M1(t){return jt(Mt(Te,T1,t))}const Dde=zP,Cde=VP,Tde=M1,Mde=M1,Ide=Object.freeze(Object.defineProperty({__proto__:null,del:Mde,deleteBackwardDividedProblem:M1,getBackwardDividedProblems:zP,getProblems:Dde,remove:Tde,save:Cde,saveBackwardDividedProblem:VP},Symbol.toStringTag,{value:"Module"}));function Pde(t){const e=t.length,r=[t.slice()];for(let n=1;n<e;n++){const a=r[n-1],i=[];for(let s=1;s<a.length;s++)i.push(a[s]-a[s-1]);r.push(i)}return r}function Fde(t,e,r){const n=t.length;if(n===0)return{error:"Empty input"};const a=t[1]-t[0],i=Pde(e),s=(r-t[n-1])/a;let u=e[n-1];for(let l=1;l<n;l++){let o=i[l][i[l].length-1];for(let c=0;c<l;c++)o*=s+c;u+=o/ti(l)}return{result:u,table:i}}function Rde(){const[t,e]=U.useState([1,2,3,4]),[r,n]=U.useState([1,8,27,64]),[a,i]=U.useState(3.5),[s,u]=U.useState("-"),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,d]=U.useState([]),{problems:m,removingIds:h,refresh:p,saveProblem:v,deleteProblem:C}=Lt(Ide);U.useEffect(()=>{p().catch(console.error)},[p]);const N=()=>{try{const{result:x,table:_}=Fde(t,r,a);u(x),d(_),o("สถานะ: คำนวณสำเร็จ")}catch(x){console.error(x),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u("-"),d([])}},A=()=>{e([1,2,3,4]),n([1,8,27,64]),i(3.5),u("-"),o("สถานะ: รีเซ็ตแล้ว"),d([])},b=async()=>{try{const x={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"backward_divided"};await v(x),alert("บันทึกแล้ว!")}catch(x){alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},g=x=>{try{e(JSON.parse(x.x)),n(JSON.parse(x.y)),i(x.xFind)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},w=x=>{confirm("ลบโจทย์นี้ไหม?")&&C(x.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Backward Divided-Difference",subtitle:"Newton’s Backward Difference Interpolation"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),y.jsx("textarea",{value:t.join(", "),onChange:x=>e(x.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),y.jsx("textarea",{value:r.join(", "),onChange:x=>n(x.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),y.jsx("input",{type:"number",value:a,onChange:x=>i(parseFloat(x.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:A,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:b,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:l}),y.jsx(zt,{problems:m,onLoad:g,onDelete:w,removingIds:h})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Newton’s Backward Difference:",y.jsx("br",{}),"P(x) = fₙ + u∇fₙ + (u(u+1)/2!)∇²fₙ + (u(u+1)(u+2)/3!)∇³fₙ + ...",y.jsx("br",{}),"โดย u = (x - xₙ)/h"]}),c.length>0&&y.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:y.jsxs("table",{className:"min-w-full border border-slate-700",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700",children:[y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"∇ⁿ fₙ"})]})}),y.jsx("tbody",{children:c.map((x,_)=>y.jsxs("tr",{children:[y.jsxs("td",{className:"px-2 py-1 border border-slate-700 text-center",children:["∇",_===0?"⁰":_]}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:x[x.length-1]!==void 0?Oe(x[x.length-1]):"-"})]},_))})]})}),s!=="-"&&y.jsxs("div",{className:"text-sm text-gray-300",children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(s)})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const I1="problems_central_divided";async function UP(){const t=Rt(qe(Te,I1),Ot("createdAt","desc"));return(await Bt(t)).docs.map(r=>({id:r.id,...r.data()}))}async function qP(t){return kt(qe(Te,I1),{...t,method:"central_divided",createdAt:$t()})}async function P1(t){return jt(Mt(Te,I1,t))}const Ode=UP,Bde=qP,jde=P1,kde=P1,$de=Object.freeze(Object.defineProperty({__proto__:null,del:kde,deleteCentralDividedProblem:P1,getCentralDividedProblems:UP,getProblems:Ode,remove:jde,save:Bde,saveCentralDividedProblem:qP},Symbol.toStringTag,{value:"Module"}));function Lde(t){const e=t.length,r=[t.slice()];for(let n=1;n<e;n++){const a=r[n-1],i=[];for(let s=0;s<a.length-1;s++)i.push(a[s+1]-a[s]);r.push(i)}return r}function zde(t,e,r){const n=t.length;if(n<3)throw new Error("ต้องมีข้อมูลอย่างน้อย 3 จุด");const a=t[1]-t[0],i=Math.floor(n/2),s=(r-t[i])/a,u=Lde(e);let l=e[i];for(let o=1;o<n&&o<6;o++)if(o%2!==0){const c=Math.floor(o/2);let d=s;for(let m=1;m<o;m++)d*=(s*s-m*m)/(2*m+1);d*=u[o][i-c],l+=d/ti(o)}else{const c=o/2;let d=1;for(let m=0;m<c;m++)d*=s*s-m*m;d*=u[o][i-c],l+=d/ti(o)}return{result:l,table:u,u:s,h:a,m:i}}function Vde(){const[t,e]=U.useState([1,2,3,4,5]),[r,n]=U.useState([1,8,27,64,125]),[a,i]=U.useState(3),[s,u]=U.useState("-"),[l,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,d]=U.useState([]),{problems:m,removingIds:h,refresh:p,saveProblem:v,deleteProblem:C}=Lt($de);U.useEffect(()=>{p().catch(console.error)},[p]);const N=()=>{try{const{result:x,table:_}=zde(t,r,a);u(x),d(_),o("สถานะ: คำนวณสำเร็จ")}catch(x){console.error(x),o("สถานะ: "+(x.message||"เกิดข้อผิดพลาดในการคำนวณ")),u("-"),d([])}},A=()=>{e([1,2,3,4,5]),n([1,8,27,64,125]),i(3),u("-"),o("สถานะ: รีเซ็ตแล้ว"),d([])},b=async()=>{try{const x={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"central_divided"};await v(x),alert("บันทึกแล้ว!")}catch(x){alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},g=x=>{try{e(JSON.parse(x.x)),n(JSON.parse(x.y)),i(x.xFind)}catch{alert("ไม่สามารถโหลดโจทย์ได้")}},w=x=>{confirm("ลบโจทย์นี้ไหม?")&&C(x.id)};return y.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[y.jsx(It,{title:"Central Divided-Difference",subtitle:"Newton’s Central Difference Interpolation"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),y.jsx("textarea",{value:t.join(", "),onChange:x=>e(x.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),y.jsx("textarea",{value:r.join(", "),onChange:x=>n(x.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),y.jsx("input",{type:"number",value:a,onChange:x=>i(parseFloat(x.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),y.jsx("button",{onClick:A,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),y.jsx("button",{onClick:b,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),y.jsx("div",{className:"text-sm mb-2",children:l}),y.jsx(zt,{problems:m,onLoad:g,onDelete:w,removingIds:h})]}),y.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[y.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),y.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["สูตร Newton’s Central Difference:",y.jsx("br",{}),"P(x) = fₘ + uδfₘ + (u(u−1)/2!)δ²fₘ + (u(u−1)(u+1)/3!)δ³fₘ + …",y.jsx("br",{}),"โดย u = (x − xₘ)/h"]}),c.length>0&&y.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:y.jsxs("table",{className:"min-w-full border border-slate-700",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-700",children:[y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),y.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"δⁿ fₘ"})]})}),y.jsx("tbody",{children:c.map((x,_)=>y.jsxs("tr",{children:[y.jsxs("td",{className:"px-2 py-1 border border-slate-700 text-center",children:["δ",_===0?"⁰":_]}),y.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Oe(x[Math.floor(x.length/2)])})]},_))})]})}),s!=="-"&&y.jsxs("div",{className:"text-sm text-gray-300",children:["f(",a,") ≈ ",y.jsx("b",{children:Oe(s)})]})]})]}),y.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function Ude(){return y.jsx(F6,{basename:"/Numerical-web",children:y.jsxs(A6,{children:[y.jsx(Nt,{path:"/",element:y.jsx(k6,{})}),y.jsx(Nt,{path:"/bisection",element:y.jsx(Q8,{})}),y.jsx(Nt,{path:"/falseposition",element:y.jsx(Y8,{})}),y.jsx(Nt,{path:"/onepoint",element:y.jsx(Z8,{})}),y.jsx(Nt,{path:"/taylor",element:y.jsx($ue,{})}),y.jsx(Nt,{path:"/newtonraphson",element:y.jsx(Uue,{})}),y.jsx(Nt,{path:"/secant",element:y.jsx(Wue,{})}),y.jsx(Nt,{path:"/cramer",element:y.jsx(ele,{})}),y.jsx(Nt,{path:"/gaussian",element:y.jsx(ole,{})}),y.jsx(Nt,{path:"/gaussjordan",element:y.jsx(hle,{})}),y.jsx(Nt,{path:"/matrixinversion",element:y.jsx(Ele,{})}),y.jsx(Nt,{path:"/ludecomposition",element:y.jsx(Ile,{})}),y.jsx(Nt,{path:"/cholesky",element:y.jsx(kle,{})}),y.jsx(Nt,{path:"/jacobi",element:y.jsx(Hle,{})}),y.jsx(Nt,{path:"/gaussseidel",element:y.jsx(Yle,{})}),y.jsx(Nt,{path:"/conjugategradient",element:y.jsx(ice,{})}),y.jsx(Nt,{path:"/lagrangeinterp",element:y.jsx(dce,{})}),y.jsx(Nt,{path:"/linearinterp",element:y.jsx(xce,{})}),y.jsx(Nt,{path:"/quadraticinterp",element:y.jsx(Ace,{})}),y.jsx(Nt,{path:"/polynomialinterp",element:y.jsx(Pce,{})}),y.jsx(Nt,{path:"/linearspline",element:y.jsx($ce,{})}),y.jsx(Nt,{path:"/quadraticspline",element:y.jsx(Gce,{})}),y.jsx(Nt,{path:"/cubicspline",element:y.jsx(Zce,{})}),y.jsx(Nt,{path:"/singlelinear",element:y.jsx(sfe,{})}),y.jsx(Nt,{path:"/multiplelinear",element:y.jsx(pfe,{})}),y.jsx(Nt,{path:"/polynomialreg",element:y.jsx(Nfe,{})}),y.jsx(Nt,{path:"/nonlinearreg",element:y.jsx(Mfe,{})}),y.jsx(Nt,{path:"/singletrapezoidal",element:y.jsx(jfe,{})}),y.jsx(Nt,{path:"/compositetrapezoidal",element:y.jsx(qfe,{})}),y.jsx(Nt,{path:"/simpsonsrule",element:y.jsx(Jfe,{})}),y.jsx(Nt,{path:"/compositesimpson",element:y.jsx(ade,{})}),y.jsx(Nt,{path:"/firstdivided",element:y.jsx(fde,{})}),y.jsx(Nt,{path:"/seconddivided",element:y.jsx(yde,{})}),y.jsx(Nt,{path:"/forwarddivided",element:y.jsx(Ade,{})}),y.jsx(Nt,{path:"/backwarddivided",element:y.jsx(Rde,{})}),y.jsx(Nt,{path:"/centraldivided",element:y.jsx(Vde,{})})]})})}SC(document.getElementById("root")).render(y.jsx(U.StrictMode,{children:y.jsx(Ude,{})}));
