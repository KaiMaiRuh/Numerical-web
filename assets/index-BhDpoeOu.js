function nF(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aF(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var fA={exports:{}},Km={},dA={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=Symbol.for("react.element"),iF=Symbol.for("react.portal"),sF=Symbol.for("react.fragment"),oF=Symbol.for("react.strict_mode"),uF=Symbol.for("react.profiler"),lF=Symbol.for("react.provider"),cF=Symbol.for("react.context"),fF=Symbol.for("react.forward_ref"),dF=Symbol.for("react.suspense"),mF=Symbol.for("react.memo"),hF=Symbol.for("react.lazy"),sb=Symbol.iterator;function pF(t){return t===null||typeof t!="object"?null:(t=sb&&t[sb]||t["@@iterator"],typeof t=="function"?t:null)}var mA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hA=Object.assign,pA={};function Gu(t,e,r){this.props=t,this.context=e,this.refs=pA,this.updater=r||mA}Gu.prototype.isReactComponent={};Gu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vA(){}vA.prototype=Gu.prototype;function Ug(t,e,r){this.props=t,this.context=e,this.refs=pA,this.updater=r||mA}var qg=Ug.prototype=new vA;qg.constructor=Ug;hA(qg,Gu.prototype);qg.isPureReactComponent=!0;var ob=Array.isArray,gA=Object.prototype.hasOwnProperty,Hg={current:null},yA={key:!0,ref:!0,__self:!0,__source:!0};function xA(t,e,r){var n,a={},i=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)gA.call(e,n)&&!yA.hasOwnProperty(n)&&(a[n]=e[n]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var l=Array(u),o=0;o<u;o++)l[o]=arguments[o+2];a.children=l}if(t&&t.defaultProps)for(n in u=t.defaultProps,u)a[n]===void 0&&(a[n]=u[n]);return{$$typeof:qc,type:t,key:i,ref:s,props:a,_owner:Hg.current}}function vF(t,e){return{$$typeof:qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gg(t){return typeof t=="object"&&t!==null&&t.$$typeof===qc}function gF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ub=/\/+/g;function fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gF(""+t.key):e.toString(36)}function yd(t,e,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case qc:case iF:s=!0}}if(s)return s=t,a=a(s),t=n===""?"."+fp(s,0):n,ob(a)?(r="",t!=null&&(r=t.replace(ub,"$&/")+"/"),yd(a,e,r,"",function(o){return o})):a!=null&&(Gg(a)&&(a=vF(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(ub,"$&/")+"/")+t)),e.push(a)),1;if(s=0,n=n===""?".":n+":",ob(t))for(var u=0;u<t.length;u++){i=t[u];var l=n+fp(i,u);s+=yd(i,e,r,l,a)}else if(l=pF(t),typeof l=="function")for(t=l.call(t),u=0;!(i=t.next()).done;)i=i.value,l=n+fp(i,u++),s+=yd(i,e,r,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Tf(t,e,r){if(t==null)return t;var n=[],a=0;return yd(t,n,"","",function(i){return e.call(r,i,a++)}),n}function yF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cn={current:null},xd={transition:null},xF={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:xd,ReactCurrentOwner:Hg};function bA(){throw Error("act(...) is not supported in production builds of React.")}_t.Children={map:Tf,forEach:function(t,e,r){Tf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Tf(t,function(){e++}),e},toArray:function(t){return Tf(t,function(e){return e})||[]},only:function(t){if(!Gg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_t.Component=Gu;_t.Fragment=sF;_t.Profiler=uF;_t.PureComponent=Ug;_t.StrictMode=oF;_t.Suspense=dF;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xF;_t.act=bA;_t.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=hA({},t.props),a=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Hg.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)gA.call(e,l)&&!yA.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&u!==void 0?u[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){u=Array(l);for(var o=0;o<l;o++)u[o]=arguments[o+2];n.children=u}return{$$typeof:qc,type:t.type,key:a,ref:i,props:n,_owner:s}};_t.createContext=function(t){return t={$$typeof:cF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lF,_context:t},t.Consumer=t};_t.createElement=xA;_t.createFactory=function(t){var e=xA.bind(null,t);return e.type=t,e};_t.createRef=function(){return{current:null}};_t.forwardRef=function(t){return{$$typeof:fF,render:t}};_t.isValidElement=Gg;_t.lazy=function(t){return{$$typeof:hF,_payload:{_status:-1,_result:t},_init:yF}};_t.memo=function(t,e){return{$$typeof:mF,type:t,compare:e===void 0?null:e}};_t.startTransition=function(t){var e=xd.transition;xd.transition={};try{t()}finally{xd.transition=e}};_t.unstable_act=bA;_t.useCallback=function(t,e){return Cn.current.useCallback(t,e)};_t.useContext=function(t){return Cn.current.useContext(t)};_t.useDebugValue=function(){};_t.useDeferredValue=function(t){return Cn.current.useDeferredValue(t)};_t.useEffect=function(t,e){return Cn.current.useEffect(t,e)};_t.useId=function(){return Cn.current.useId()};_t.useImperativeHandle=function(t,e,r){return Cn.current.useImperativeHandle(t,e,r)};_t.useInsertionEffect=function(t,e){return Cn.current.useInsertionEffect(t,e)};_t.useLayoutEffect=function(t,e){return Cn.current.useLayoutEffect(t,e)};_t.useMemo=function(t,e){return Cn.current.useMemo(t,e)};_t.useReducer=function(t,e,r){return Cn.current.useReducer(t,e,r)};_t.useRef=function(t){return Cn.current.useRef(t)};_t.useState=function(t){return Cn.current.useState(t)};_t.useSyncExternalStore=function(t,e,r){return Cn.current.useSyncExternalStore(t,e,r)};_t.useTransition=function(){return Cn.current.useTransition()};_t.version="18.3.1";dA.exports=_t;var G=dA.exports;const bF=Xm(G),wF=nF({__proto__:null,default:bF},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NF=G,_F=Symbol.for("react.element"),EF=Symbol.for("react.fragment"),SF=Object.prototype.hasOwnProperty,AF=NF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DF={key:!0,ref:!0,__self:!0,__source:!0};function wA(t,e,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)SF.call(e,n)&&!DF.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:_F,type:t,key:i,ref:s,props:a,_owner:AF.current}}Km.Fragment=EF;Km.jsx=wA;Km.jsxs=wA;fA.exports=Km;var p=fA.exports,NA={exports:{}},Jn={},_A={exports:{}},EA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,L){var q=$.length;$.push(L);e:for(;0<q;){var ae=q-1>>>1,j=$[ae];if(0<a(j,L))$[ae]=L,$[q]=j,q=ae;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var L=$[0],q=$.pop();if(q!==L){$[0]=q;e:for(var ae=0,j=$.length,K=j>>>1;ae<K;){var V=2*(ae+1)-1,pe=$[V],ue=V+1,fe=$[ue];if(0>a(pe,q))ue<j&&0>a(fe,pe)?($[ae]=fe,$[ue]=q,ae=ue):($[ae]=pe,$[V]=q,ae=V);else if(ue<j&&0>a(fe,q))$[ae]=fe,$[ue]=q,ae=ue;else break e}}return L}function a($,L){var q=$.sortIndex-L.sortIndex;return q!==0?q:$.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],o=[],c=1,f=null,d=3,m=!1,h=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _($){for(var L=r(o);L!==null;){if(L.callback===null)n(o);else if(L.startTime<=$)n(o),L.sortIndex=L.expirationTime,e(l,L);else break;L=r(o)}}function M($){if(v=!1,_($),!h)if(r(l)!==null)h=!0,P(y);else{var L=r(o);L!==null&&z(M,L.startTime-$)}}function y($,L){h=!1,v&&(v=!1,S(g),g=-1),m=!0;var q=d;try{for(_(L),f=r(l);f!==null&&(!(f.expirationTime>L)||$&&!b());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,d=f.priorityLevel;var j=ae(f.expirationTime<=L);L=t.unstable_now(),typeof j=="function"?f.callback=j:f===r(l)&&n(l),_(L)}else n(l);f=r(l)}if(f!==null)var K=!0;else{var V=r(o);V!==null&&z(M,V.startTime-L),K=!1}return K}finally{f=null,d=q,m=!1}}var x=!1,w=null,g=-1,N=5,E=-1;function b(){return!(t.unstable_now()-E<N)}function D(){if(w!==null){var $=t.unstable_now();E=$;var L=!0;try{L=w(!0,$)}finally{L?I():(x=!1,w=null)}}else x=!1}var I;if(typeof C=="function")I=function(){C(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,O=F.port2;F.port1.onmessage=D,I=function(){O.postMessage(null)}}else I=function(){T(D,0)};function P($){w=$,x||(x=!0,I())}function z($,L){g=T(function(){$(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){h||m||(h=!0,P(y))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function($){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var q=d;d=L;try{return $()}finally{d=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var q=d;d=$;try{return L()}finally{d=q}},t.unstable_scheduleCallback=function($,L,q){var ae=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ae+q:ae):q=ae,$){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=q+j,$={id:c++,callback:L,priorityLevel:$,startTime:q,expirationTime:j,sortIndex:-1},q>ae?($.sortIndex=q,e(o,$),r(l)===null&&$===r(o)&&(v?(S(g),g=-1):v=!0,z(M,q-ae))):($.sortIndex=j,e(l,$),h||m||(h=!0,P(y))),$},t.unstable_shouldYield=b,t.unstable_wrapCallback=function($){var L=d;return function(){var q=d;d=L;try{return $.apply(this,arguments)}finally{d=q}}}})(EA);_A.exports=EA;var CF=_A.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TF=G,Xn=CF;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SA=new Set,lc={};function ho(t,e){Eu(t,e),Eu(t+"Capture",e)}function Eu(t,e){for(lc[t]=e,t=0;t<e.length;t++)SA.add(e[t])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nv=Object.prototype.hasOwnProperty,MF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lb={},cb={};function IF(t){return nv.call(cb,t)?!0:nv.call(lb,t)?!1:MF.test(t)?cb[t]=!0:(lb[t]=!0,!1)}function PF(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FF(t,e,r,n){if(e===null||typeof e>"u"||PF(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,r,n,a,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){an[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];an[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){an[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){an[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){an[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){an[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){an[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){an[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){an[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wg=/[\-:]([a-z])/g;function Qg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wg,Qg);an[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wg,Qg);an[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wg,Qg);an[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){an[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});an.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){an[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xg(t,e,r,n){var a=an.hasOwnProperty(e)?an[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FF(e,r,a,n)&&(r=null),n||a===null?IF(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Si=TF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mf=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Jo=Symbol.for("react.fragment"),Kg=Symbol.for("react.strict_mode"),av=Symbol.for("react.profiler"),AA=Symbol.for("react.provider"),DA=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),iv=Symbol.for("react.suspense"),sv=Symbol.for("react.suspense_list"),Yg=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),CA=Symbol.for("react.offscreen"),fb=Symbol.iterator;function Cl(t){return t===null||typeof t!="object"?null:(t=fb&&t[fb]||t["@@iterator"],typeof t=="function"?t:null)}var hr=Object.assign,dp;function kl(t){if(dp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);dp=e&&e[1]||""}return`
`+dp+t}var mp=!1;function hp(t,e){if(!t||mp)return"";mp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(o){var n=o}Reflect.construct(t,[],e)}else{try{e.call()}catch(o){n=o}t.call(e.prototype)}else{try{throw Error()}catch(o){n=o}t()}}catch(o){if(o&&n&&typeof o.stack=="string"){for(var a=o.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,u=i.length-1;1<=s&&0<=u&&a[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(a[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||a[s]!==i[u]){var l=`
`+a[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=u);break}}}finally{mp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?kl(t):""}function RF(t){switch(t.tag){case 5:return kl(t.type);case 16:return kl("Lazy");case 13:return kl("Suspense");case 19:return kl("SuspenseList");case 0:case 2:case 15:return t=hp(t.type,!1),t;case 11:return t=hp(t.type.render,!1),t;case 1:return t=hp(t.type,!0),t;default:return""}}function ov(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jo:return"Fragment";case Ko:return"Portal";case av:return"Profiler";case Kg:return"StrictMode";case iv:return"Suspense";case sv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case DA:return(t.displayName||"Context")+".Consumer";case AA:return(t._context.displayName||"Context")+".Provider";case Jg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yg:return e=t.displayName||null,e!==null?e:ov(t.type)||"Memo";case ji:e=t._payload,t=t._init;try{return ov(t(e))}catch{}}return null}function OF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ov(e);case 8:return e===Kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BF(t){var e=TA(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function If(t){t._valueTracker||(t._valueTracker=BF(t))}function MA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=TA(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function kd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uv(t,e){var r=e.checked;return hr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function db(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IA(t,e){e=e.checked,e!=null&&Xg(t,"checked",e,!1)}function lv(t,e){IA(t,e);var r=cs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cv(t,e.type,r):e.hasOwnProperty("defaultValue")&&cv(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function cv(t,e,r){(e!=="number"||kd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $l=Array.isArray;function fu(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cs(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function fv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return hr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Fe(92));if($l(r)){if(1<r.length)throw Error(Fe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cs(r)}}function PA(t,e){var r=cs(e.value),n=cs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function pb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function FA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?FA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pf,RA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pf=Pf||document.createElement("div"),Pf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jF=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(t){jF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wl[e]=Wl[t]})});function OA(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wl.hasOwnProperty(t)&&Wl[t]?(""+e).trim():e+"px"}function BA(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=OA(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var kF=hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mv(t,e){if(e){if(kF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function hv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pv=null;function Zg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vv=null,du=null,mu=null;function vb(t){if(t=Wc(t)){if(typeof vv!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=th(e),vv(t.stateNode,t.type,e))}}function jA(t){du?mu?mu.push(t):mu=[t]:du=t}function kA(){if(du){var t=du,e=mu;if(mu=du=null,vb(t),e)for(t=0;t<e.length;t++)vb(e[t])}}function $A(t,e){return t(e)}function LA(){}var pp=!1;function zA(t,e,r){if(pp)return t(e,r);pp=!0;try{return $A(t,e,r)}finally{pp=!1,(du!==null||mu!==null)&&(LA(),kA())}}function fc(t,e){var r=t.stateNode;if(r===null)return null;var n=th(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Fe(231,e,typeof r));return r}var gv=!1;if(vi)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){gv=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{gv=!1}function $F(t,e,r,n,a,i,s,u,l){var o=Array.prototype.slice.call(arguments,3);try{e.apply(r,o)}catch(c){this.onError(c)}}var Ql=!1,$d=null,Ld=!1,yv=null,LF={onError:function(t){Ql=!0,$d=t}};function zF(t,e,r,n,a,i,s,u,l){Ql=!1,$d=null,$F.apply(LF,arguments)}function VF(t,e,r,n,a,i,s,u,l){if(zF.apply(this,arguments),Ql){if(Ql){var o=$d;Ql=!1,$d=null}else throw Error(Fe(198));Ld||(Ld=!0,yv=o)}}function po(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function VA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gb(t){if(po(t)!==t)throw Error(Fe(188))}function UF(t){var e=t.alternate;if(!e){if(e=po(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return gb(a),t;if(i===n)return gb(a),e;i=i.sibling}throw Error(Fe(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,u=a.child;u;){if(u===r){s=!0,r=a,n=i;break}if(u===n){s=!0,n=a,r=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===r){s=!0,r=i,n=a;break}if(u===n){s=!0,n=i,r=a;break}u=u.sibling}if(!s)throw Error(Fe(189))}}if(r.alternate!==n)throw Error(Fe(190))}if(r.tag!==3)throw Error(Fe(188));return r.stateNode.current===r?t:e}function UA(t){return t=UF(t),t!==null?qA(t):null}function qA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qA(t);if(e!==null)return e;t=t.sibling}return null}var HA=Xn.unstable_scheduleCallback,yb=Xn.unstable_cancelCallback,qF=Xn.unstable_shouldYield,HF=Xn.unstable_requestPaint,_r=Xn.unstable_now,GF=Xn.unstable_getCurrentPriorityLevel,e0=Xn.unstable_ImmediatePriority,GA=Xn.unstable_UserBlockingPriority,zd=Xn.unstable_NormalPriority,WF=Xn.unstable_LowPriority,WA=Xn.unstable_IdlePriority,Jm=null,Ha=null;function QF(t){if(Ha&&typeof Ha.onCommitFiberRoot=="function")try{Ha.onCommitFiberRoot(Jm,t,void 0,(t.current.flags&128)===128)}catch{}}var Aa=Math.clz32?Math.clz32:JF,XF=Math.log,KF=Math.LN2;function JF(t){return t>>>=0,t===0?32:31-(XF(t)/KF|0)|0}var Ff=64,Rf=4194304;function Ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vd(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,s=r&268435455;if(s!==0){var u=s&~a;u!==0?n=Ll(u):(i&=s,i!==0&&(n=Ll(i)))}else s=r&~a,s!==0?n=Ll(s):i!==0&&(n=Ll(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Aa(e),a=1<<r,n|=t[r],e&=~a;return n}function YF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZF(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Aa(i),u=1<<s,l=a[s];l===-1?(!(u&r)||u&n)&&(a[s]=YF(u,e)):l<=e&&(t.expiredLanes|=u),i&=~u}}function xv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QA(){var t=Ff;return Ff<<=1,!(Ff&4194240)&&(Ff=64),t}function vp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Aa(e),t[e]=r}function eR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Aa(r),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function t0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Aa(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Kt=0;function XA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var KA,r0,JA,YA,ZA,bv=!1,Of=[],Xi=null,Ki=null,Ji=null,dc=new Map,mc=new Map,zi=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xb(t,e){switch(t){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":dc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(e.pointerId)}}function Ml(t,e,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Wc(e),e!==null&&r0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function rR(t,e,r,n,a){switch(e){case"focusin":return Xi=Ml(Xi,t,e,r,n,a),!0;case"dragenter":return Ki=Ml(Ki,t,e,r,n,a),!0;case"mouseover":return Ji=Ml(Ji,t,e,r,n,a),!0;case"pointerover":var i=a.pointerId;return dc.set(i,Ml(dc.get(i)||null,t,e,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,mc.set(i,Ml(mc.get(i)||null,t,e,r,n,a)),!0}return!1}function eD(t){var e=Ws(t.target);if(e!==null){var r=po(e);if(r!==null){if(e=r.tag,e===13){if(e=VA(r),e!==null){t.blockedOn=e,ZA(t.priority,function(){JA(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=wv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);pv=n,r.target.dispatchEvent(n),pv=null}else return e=Wc(r),e!==null&&r0(e),t.blockedOn=r,!1;e.shift()}return!0}function bb(t,e,r){bd(t)&&r.delete(e)}function nR(){bv=!1,Xi!==null&&bd(Xi)&&(Xi=null),Ki!==null&&bd(Ki)&&(Ki=null),Ji!==null&&bd(Ji)&&(Ji=null),dc.forEach(bb),mc.forEach(bb)}function Il(t,e){t.blockedOn===e&&(t.blockedOn=null,bv||(bv=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,nR)))}function hc(t){function e(a){return Il(a,t)}if(0<Of.length){Il(Of[0],t);for(var r=1;r<Of.length;r++){var n=Of[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Xi!==null&&Il(Xi,t),Ki!==null&&Il(Ki,t),Ji!==null&&Il(Ji,t),dc.forEach(e),mc.forEach(e),r=0;r<zi.length;r++)n=zi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<zi.length&&(r=zi[0],r.blockedOn===null);)eD(r),r.blockedOn===null&&zi.shift()}var hu=Si.ReactCurrentBatchConfig,Ud=!0;function aR(t,e,r,n){var a=Kt,i=hu.transition;hu.transition=null;try{Kt=1,n0(t,e,r,n)}finally{Kt=a,hu.transition=i}}function iR(t,e,r,n){var a=Kt,i=hu.transition;hu.transition=null;try{Kt=4,n0(t,e,r,n)}finally{Kt=a,hu.transition=i}}function n0(t,e,r,n){if(Ud){var a=wv(t,e,r,n);if(a===null)Ap(t,e,n,qd,r),xb(t,n);else if(rR(a,t,e,r,n))n.stopPropagation();else if(xb(t,n),e&4&&-1<tR.indexOf(t)){for(;a!==null;){var i=Wc(a);if(i!==null&&KA(i),i=wv(t,e,r,n),i===null&&Ap(t,e,n,qd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Ap(t,e,n,null,r)}}var qd=null;function wv(t,e,r,n){if(qd=null,t=Zg(n),t=Ws(t),t!==null)if(e=po(t),e===null)t=null;else if(r=e.tag,r===13){if(t=VA(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qd=t,null}function tD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GF()){case e0:return 1;case GA:return 4;case zd:case WF:return 16;case WA:return 536870912;default:return 16}default:return 16}}var Ui=null,a0=null,wd=null;function rD(){if(wd)return wd;var t,e=a0,r=e.length,n,a="value"in Ui?Ui.value:Ui.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===a[i-n];n++);return wd=a.slice(t,1<n?1-n:void 0)}function Nd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bf(){return!0}function wb(){return!1}function Yn(t){function e(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bf:wb,this.isPropagationStopped=wb,this}return hr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bf)},persist:function(){},isPersistent:Bf}),e}var Wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i0=Yn(Wu),Gc=hr({},Wu,{view:0,detail:0}),sR=Yn(Gc),gp,yp,Pl,Ym=hr({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pl&&(Pl&&t.type==="mousemove"?(gp=t.screenX-Pl.screenX,yp=t.screenY-Pl.screenY):yp=gp=0,Pl=t),gp)},movementY:function(t){return"movementY"in t?t.movementY:yp}}),Nb=Yn(Ym),oR=hr({},Ym,{dataTransfer:0}),uR=Yn(oR),lR=hr({},Gc,{relatedTarget:0}),xp=Yn(lR),cR=hr({},Wu,{animationName:0,elapsedTime:0,pseudoElement:0}),fR=Yn(cR),dR=hr({},Wu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mR=Yn(dR),hR=hr({},Wu,{data:0}),_b=Yn(hR),pR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gR[t])?!!e[t]:!1}function s0(){return yR}var xR=hr({},Gc,{key:function(t){if(t.key){var e=pR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s0,charCode:function(t){return t.type==="keypress"?Nd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bR=Yn(xR),wR=hr({},Ym,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eb=Yn(wR),NR=hr({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s0}),_R=Yn(NR),ER=hr({},Wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),SR=Yn(ER),AR=hr({},Ym,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DR=Yn(AR),CR=[9,13,27,32],o0=vi&&"CompositionEvent"in window,Xl=null;vi&&"documentMode"in document&&(Xl=document.documentMode);var TR=vi&&"TextEvent"in window&&!Xl,nD=vi&&(!o0||Xl&&8<Xl&&11>=Xl),Sb=" ",Ab=!1;function aD(t,e){switch(t){case"keyup":return CR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yo=!1;function MR(t,e){switch(t){case"compositionend":return iD(e);case"keypress":return e.which!==32?null:(Ab=!0,Sb);case"textInput":return t=e.data,t===Sb&&Ab?null:t;default:return null}}function IR(t,e){if(Yo)return t==="compositionend"||!o0&&aD(t,e)?(t=rD(),wd=a0=Ui=null,Yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nD&&e.locale!=="ko"?null:e.data;default:return null}}var PR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Db(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PR[t.type]:e==="textarea"}function sD(t,e,r,n){jA(n),e=Hd(e,"onChange"),0<e.length&&(r=new i0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Kl=null,pc=null;function FR(t){gD(t,0)}function Zm(t){var e=tu(t);if(MA(e))return t}function RR(t,e){if(t==="change")return e}var oD=!1;if(vi){var bp;if(vi){var wp="oninput"in document;if(!wp){var Cb=document.createElement("div");Cb.setAttribute("oninput","return;"),wp=typeof Cb.oninput=="function"}bp=wp}else bp=!1;oD=bp&&(!document.documentMode||9<document.documentMode)}function Tb(){Kl&&(Kl.detachEvent("onpropertychange",uD),pc=Kl=null)}function uD(t){if(t.propertyName==="value"&&Zm(pc)){var e=[];sD(e,pc,t,Zg(t)),zA(FR,e)}}function OR(t,e,r){t==="focusin"?(Tb(),Kl=e,pc=r,Kl.attachEvent("onpropertychange",uD)):t==="focusout"&&Tb()}function BR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zm(pc)}function jR(t,e){if(t==="click")return Zm(e)}function kR(t,e){if(t==="input"||t==="change")return Zm(e)}function $R(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ta=typeof Object.is=="function"?Object.is:$R;function vc(t,e){if(Ta(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!nv.call(e,a)||!Ta(t[a],e[a]))return!1}return!0}function Mb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ib(t,e){var r=Mb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mb(r)}}function lD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cD(){for(var t=window,e=kd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kd(t.document)}return e}function u0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LR(t){var e=cD(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&lD(r.ownerDocument.documentElement,r)){if(n!==null&&u0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=Ib(r,i);var s=Ib(r,n);a&&s&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zR=vi&&"documentMode"in document&&11>=document.documentMode,Zo=null,Nv=null,Jl=null,_v=!1;function Pb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_v||Zo==null||Zo!==kd(n)||(n=Zo,"selectionStart"in n&&u0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jl&&vc(Jl,n)||(Jl=n,n=Hd(Nv,"onSelect"),0<n.length&&(e=new i0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Zo)))}function jf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var eu={animationend:jf("Animation","AnimationEnd"),animationiteration:jf("Animation","AnimationIteration"),animationstart:jf("Animation","AnimationStart"),transitionend:jf("Transition","TransitionEnd")},Np={},fD={};vi&&(fD=document.createElement("div").style,"AnimationEvent"in window||(delete eu.animationend.animation,delete eu.animationiteration.animation,delete eu.animationstart.animation),"TransitionEvent"in window||delete eu.transitionend.transition);function eh(t){if(Np[t])return Np[t];if(!eu[t])return t;var e=eu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in fD)return Np[t]=e[r];return t}var dD=eh("animationend"),mD=eh("animationiteration"),hD=eh("animationstart"),pD=eh("transitionend"),vD=new Map,Fb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(t,e){vD.set(t,e),ho(e,[t])}for(var _p=0;_p<Fb.length;_p++){var Ep=Fb[_p],VR=Ep.toLowerCase(),UR=Ep[0].toUpperCase()+Ep.slice(1);_s(VR,"on"+UR)}_s(dD,"onAnimationEnd");_s(mD,"onAnimationIteration");_s(hD,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(pD,"onTransitionEnd");Eu("onMouseEnter",["mouseout","mouseover"]);Eu("onMouseLeave",["mouseout","mouseover"]);Eu("onPointerEnter",["pointerout","pointerover"]);Eu("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qR=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function Rb(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,VF(n,e,void 0,t),t.currentTarget=null}function gD(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var u=n[s],l=u.instance,o=u.currentTarget;if(u=u.listener,l!==i&&a.isPropagationStopped())break e;Rb(a,u,o),i=l}else for(s=0;s<n.length;s++){if(u=n[s],l=u.instance,o=u.currentTarget,u=u.listener,l!==i&&a.isPropagationStopped())break e;Rb(a,u,o),i=l}}}if(Ld)throw t=yv,Ld=!1,yv=null,t}function ir(t,e){var r=e[Cv];r===void 0&&(r=e[Cv]=new Set);var n=t+"__bubble";r.has(n)||(yD(e,t,2,!1),r.add(n))}function Sp(t,e,r){var n=0;e&&(n|=4),yD(r,t,n,e)}var kf="_reactListening"+Math.random().toString(36).slice(2);function gc(t){if(!t[kf]){t[kf]=!0,SA.forEach(function(r){r!=="selectionchange"&&(qR.has(r)||Sp(r,!1,t),Sp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kf]||(e[kf]=!0,Sp("selectionchange",!1,e))}}function yD(t,e,r,n){switch(tD(e)){case 1:var a=aR;break;case 4:a=iR;break;default:a=n0}r=a.bind(null,e,r,t),a=void 0,!gv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Ap(t,e,r,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var u=n.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;s=s.return}for(;u!==null;){if(s=Ws(u),s===null)return;if(l=s.tag,l===5||l===6){n=i=s;continue e}u=u.parentNode}}n=n.return}zA(function(){var o=i,c=Zg(r),f=[];e:{var d=vD.get(t);if(d!==void 0){var m=i0,h=t;switch(t){case"keypress":if(Nd(r)===0)break e;case"keydown":case"keyup":m=bR;break;case"focusin":h="focus",m=xp;break;case"focusout":h="blur",m=xp;break;case"beforeblur":case"afterblur":m=xp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Nb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=uR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_R;break;case dD:case mD:case hD:m=fR;break;case pD:m=SR;break;case"scroll":m=sR;break;case"wheel":m=DR;break;case"copy":case"cut":case"paste":m=mR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Eb}var v=(e&4)!==0,T=!v&&t==="scroll",S=v?d!==null?d+"Capture":null:d;v=[];for(var C=o,_;C!==null;){_=C;var M=_.stateNode;if(_.tag===5&&M!==null&&(_=M,S!==null&&(M=fc(C,S),M!=null&&v.push(yc(C,M,_)))),T)break;C=C.return}0<v.length&&(d=new m(d,h,null,r,c),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",d&&r!==pv&&(h=r.relatedTarget||r.fromElement)&&(Ws(h)||h[gi]))break e;if((m||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,m?(h=r.relatedTarget||r.toElement,m=o,h=h?Ws(h):null,h!==null&&(T=po(h),h!==T||h.tag!==5&&h.tag!==6)&&(h=null)):(m=null,h=o),m!==h)){if(v=Nb,M="onMouseLeave",S="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(v=Eb,M="onPointerLeave",S="onPointerEnter",C="pointer"),T=m==null?d:tu(m),_=h==null?d:tu(h),d=new v(M,C+"leave",m,r,c),d.target=T,d.relatedTarget=_,M=null,Ws(c)===o&&(v=new v(S,C+"enter",h,r,c),v.target=_,v.relatedTarget=T,M=v),T=M,m&&h)t:{for(v=m,S=h,C=0,_=v;_;_=$o(_))C++;for(_=0,M=S;M;M=$o(M))_++;for(;0<C-_;)v=$o(v),C--;for(;0<_-C;)S=$o(S),_--;for(;C--;){if(v===S||S!==null&&v===S.alternate)break t;v=$o(v),S=$o(S)}v=null}else v=null;m!==null&&Ob(f,d,m,v,!1),h!==null&&T!==null&&Ob(f,T,h,v,!0)}}e:{if(d=o?tu(o):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var y=RR;else if(Db(d))if(oD)y=kR;else{y=BR;var x=OR}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(y=jR);if(y&&(y=y(t,o))){sD(f,y,r,c);break e}x&&x(t,d,o),t==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&cv(d,"number",d.value)}switch(x=o?tu(o):window,t){case"focusin":(Db(x)||x.contentEditable==="true")&&(Zo=x,Nv=o,Jl=null);break;case"focusout":Jl=Nv=Zo=null;break;case"mousedown":_v=!0;break;case"contextmenu":case"mouseup":case"dragend":_v=!1,Pb(f,r,c);break;case"selectionchange":if(zR)break;case"keydown":case"keyup":Pb(f,r,c)}var w;if(o0)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Yo?aD(t,r)&&(g="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(g="onCompositionStart");g&&(nD&&r.locale!=="ko"&&(Yo||g!=="onCompositionStart"?g==="onCompositionEnd"&&Yo&&(w=rD()):(Ui=c,a0="value"in Ui?Ui.value:Ui.textContent,Yo=!0)),x=Hd(o,g),0<x.length&&(g=new _b(g,t,null,r,c),f.push({event:g,listeners:x}),w?g.data=w:(w=iD(r),w!==null&&(g.data=w)))),(w=TR?MR(t,r):IR(t,r))&&(o=Hd(o,"onBeforeInput"),0<o.length&&(c=new _b("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:o}),c.data=w))}gD(f,e)})}function yc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Hd(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=fc(t,r),i!=null&&n.unshift(yc(t,i,a)),i=fc(t,e),i!=null&&n.push(yc(t,i,a))),t=t.return}return n}function $o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ob(t,e,r,n,a){for(var i=e._reactName,s=[];r!==null&&r!==n;){var u=r,l=u.alternate,o=u.stateNode;if(l!==null&&l===n)break;u.tag===5&&o!==null&&(u=o,a?(l=fc(r,i),l!=null&&s.unshift(yc(r,l,u))):a||(l=fc(r,i),l!=null&&s.push(yc(r,l,u)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var HR=/\r\n?/g,GR=/\u0000|\uFFFD/g;function Bb(t){return(typeof t=="string"?t:""+t).replace(HR,`
`).replace(GR,"")}function $f(t,e,r){if(e=Bb(e),Bb(t)!==e&&r)throw Error(Fe(425))}function Gd(){}var Ev=null,Sv=null;function Av(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dv=typeof setTimeout=="function"?setTimeout:void 0,WR=typeof clearTimeout=="function"?clearTimeout:void 0,jb=typeof Promise=="function"?Promise:void 0,QR=typeof queueMicrotask=="function"?queueMicrotask:typeof jb<"u"?function(t){return jb.resolve(null).then(t).catch(XR)}:Dv;function XR(t){setTimeout(function(){throw t})}function Dp(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),hc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);hc(e)}function Yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Qu=Math.random().toString(36).slice(2),Ua="__reactFiber$"+Qu,xc="__reactProps$"+Qu,gi="__reactContainer$"+Qu,Cv="__reactEvents$"+Qu,KR="__reactListeners$"+Qu,JR="__reactHandles$"+Qu;function Ws(t){var e=t[Ua];if(e)return e;for(var r=t.parentNode;r;){if(e=r[gi]||r[Ua]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=kb(t);t!==null;){if(r=t[Ua])return r;t=kb(t)}return e}t=r,r=t.parentNode}return null}function Wc(t){return t=t[Ua]||t[gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function th(t){return t[xc]||null}var Tv=[],ru=-1;function Es(t){return{current:t}}function or(t){0>ru||(t.current=Tv[ru],Tv[ru]=null,ru--)}function nr(t,e){ru++,Tv[ru]=t.current,t.current=e}var fs={},gn=Es(fs),Bn=Es(!1),no=fs;function Su(t,e){var r=t.type.contextTypes;if(!r)return fs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function jn(t){return t=t.childContextTypes,t!=null}function Wd(){or(Bn),or(gn)}function $b(t,e,r){if(gn.current!==fs)throw Error(Fe(168));nr(gn,e),nr(Bn,r)}function xD(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(Fe(108,OF(t)||"Unknown",a));return hr({},r,n)}function Qd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fs,no=gn.current,nr(gn,t),nr(Bn,Bn.current),!0}function Lb(t,e,r){var n=t.stateNode;if(!n)throw Error(Fe(169));r?(t=xD(t,e,no),n.__reactInternalMemoizedMergedChildContext=t,or(Bn),or(gn),nr(gn,t)):or(Bn),nr(Bn,r)}var ui=null,rh=!1,Cp=!1;function bD(t){ui===null?ui=[t]:ui.push(t)}function YR(t){rh=!0,bD(t)}function Ss(){if(!Cp&&ui!==null){Cp=!0;var t=0,e=Kt;try{var r=ui;for(Kt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ui=null,rh=!1}catch(a){throw ui!==null&&(ui=ui.slice(t+1)),HA(e0,Ss),a}finally{Kt=e,Cp=!1}}return null}var nu=[],au=0,Xd=null,Kd=0,ia=[],sa=0,ao=null,li=1,ci="";function Vs(t,e){nu[au++]=Kd,nu[au++]=Xd,Xd=t,Kd=e}function wD(t,e,r){ia[sa++]=li,ia[sa++]=ci,ia[sa++]=ao,ao=t;var n=li;t=ci;var a=32-Aa(n)-1;n&=~(1<<a),r+=1;var i=32-Aa(e)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,li=1<<32-Aa(e)+a|r<<a|n,ci=i+t}else li=1<<i|r<<a|n,ci=t}function l0(t){t.return!==null&&(Vs(t,1),wD(t,1,0))}function c0(t){for(;t===Xd;)Xd=nu[--au],nu[au]=null,Kd=nu[--au],nu[au]=null;for(;t===ao;)ao=ia[--sa],ia[sa]=null,ci=ia[--sa],ia[sa]=null,li=ia[--sa],ia[sa]=null}var Qn=null,Wn=null,cr=!1,_a=null;function ND(t,e){var r=ca(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function zb(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Wn=Yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ao!==null?{id:li,overflow:ci}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ca(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qn=t,Wn=null,!0):!1;default:return!1}}function Mv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Iv(t){if(cr){var e=Wn;if(e){var r=e;if(!zb(t,e)){if(Mv(t))throw Error(Fe(418));e=Yi(r.nextSibling);var n=Qn;e&&zb(t,e)?ND(n,r):(t.flags=t.flags&-4097|2,cr=!1,Qn=t)}}else{if(Mv(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,cr=!1,Qn=t}}}function Vb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function Lf(t){if(t!==Qn)return!1;if(!cr)return Vb(t),cr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Av(t.type,t.memoizedProps)),e&&(e=Wn)){if(Mv(t))throw _D(),Error(Fe(418));for(;e;)ND(t,e),e=Yi(e.nextSibling)}if(Vb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Wn=Yi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=Qn?Yi(t.stateNode.nextSibling):null;return!0}function _D(){for(var t=Wn;t;)t=Yi(t.nextSibling)}function Au(){Wn=Qn=null,cr=!1}function f0(t){_a===null?_a=[t]:_a.push(t)}var ZR=Si.ReactCurrentBatchConfig;function Fl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Fe(309));var n=r.stateNode}if(!n)throw Error(Fe(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var u=a.refs;s===null?delete u[i]:u[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(Fe(284));if(!r._owner)throw Error(Fe(290,t))}return t}function zf(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ub(t){var e=t._init;return e(t._payload)}function ED(t){function e(S,C){if(t){var _=S.deletions;_===null?(S.deletions=[C],S.flags|=16):_.push(C)}}function r(S,C){if(!t)return null;for(;C!==null;)e(S,C),C=C.sibling;return null}function n(S,C){for(S=new Map;C!==null;)C.key!==null?S.set(C.key,C):S.set(C.index,C),C=C.sibling;return S}function a(S,C){return S=rs(S,C),S.index=0,S.sibling=null,S}function i(S,C,_){return S.index=_,t?(_=S.alternate,_!==null?(_=_.index,_<C?(S.flags|=2,C):_):(S.flags|=2,C)):(S.flags|=1048576,C)}function s(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,C,_,M){return C===null||C.tag!==6?(C=Op(_,S.mode,M),C.return=S,C):(C=a(C,_),C.return=S,C)}function l(S,C,_,M){var y=_.type;return y===Jo?c(S,C,_.props.children,M,_.key):C!==null&&(C.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===ji&&Ub(y)===C.type)?(M=a(C,_.props),M.ref=Fl(S,C,_),M.return=S,M):(M=Td(_.type,_.key,_.props,null,S.mode,M),M.ref=Fl(S,C,_),M.return=S,M)}function o(S,C,_,M){return C===null||C.tag!==4||C.stateNode.containerInfo!==_.containerInfo||C.stateNode.implementation!==_.implementation?(C=Bp(_,S.mode,M),C.return=S,C):(C=a(C,_.children||[]),C.return=S,C)}function c(S,C,_,M,y){return C===null||C.tag!==7?(C=eo(_,S.mode,M,y),C.return=S,C):(C=a(C,_),C.return=S,C)}function f(S,C,_){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Op(""+C,S.mode,_),C.return=S,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Mf:return _=Td(C.type,C.key,C.props,null,S.mode,_),_.ref=Fl(S,null,C),_.return=S,_;case Ko:return C=Bp(C,S.mode,_),C.return=S,C;case ji:var M=C._init;return f(S,M(C._payload),_)}if($l(C)||Cl(C))return C=eo(C,S.mode,_,null),C.return=S,C;zf(S,C)}return null}function d(S,C,_,M){var y=C!==null?C.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return y!==null?null:u(S,C,""+_,M);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mf:return _.key===y?l(S,C,_,M):null;case Ko:return _.key===y?o(S,C,_,M):null;case ji:return y=_._init,d(S,C,y(_._payload),M)}if($l(_)||Cl(_))return y!==null?null:c(S,C,_,M,null);zf(S,_)}return null}function m(S,C,_,M,y){if(typeof M=="string"&&M!==""||typeof M=="number")return S=S.get(_)||null,u(C,S,""+M,y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Mf:return S=S.get(M.key===null?_:M.key)||null,l(C,S,M,y);case Ko:return S=S.get(M.key===null?_:M.key)||null,o(C,S,M,y);case ji:var x=M._init;return m(S,C,_,x(M._payload),y)}if($l(M)||Cl(M))return S=S.get(_)||null,c(C,S,M,y,null);zf(C,M)}return null}function h(S,C,_,M){for(var y=null,x=null,w=C,g=C=0,N=null;w!==null&&g<_.length;g++){w.index>g?(N=w,w=null):N=w.sibling;var E=d(S,w,_[g],M);if(E===null){w===null&&(w=N);break}t&&w&&E.alternate===null&&e(S,w),C=i(E,C,g),x===null?y=E:x.sibling=E,x=E,w=N}if(g===_.length)return r(S,w),cr&&Vs(S,g),y;if(w===null){for(;g<_.length;g++)w=f(S,_[g],M),w!==null&&(C=i(w,C,g),x===null?y=w:x.sibling=w,x=w);return cr&&Vs(S,g),y}for(w=n(S,w);g<_.length;g++)N=m(w,S,g,_[g],M),N!==null&&(t&&N.alternate!==null&&w.delete(N.key===null?g:N.key),C=i(N,C,g),x===null?y=N:x.sibling=N,x=N);return t&&w.forEach(function(b){return e(S,b)}),cr&&Vs(S,g),y}function v(S,C,_,M){var y=Cl(_);if(typeof y!="function")throw Error(Fe(150));if(_=y.call(_),_==null)throw Error(Fe(151));for(var x=y=null,w=C,g=C=0,N=null,E=_.next();w!==null&&!E.done;g++,E=_.next()){w.index>g?(N=w,w=null):N=w.sibling;var b=d(S,w,E.value,M);if(b===null){w===null&&(w=N);break}t&&w&&b.alternate===null&&e(S,w),C=i(b,C,g),x===null?y=b:x.sibling=b,x=b,w=N}if(E.done)return r(S,w),cr&&Vs(S,g),y;if(w===null){for(;!E.done;g++,E=_.next())E=f(S,E.value,M),E!==null&&(C=i(E,C,g),x===null?y=E:x.sibling=E,x=E);return cr&&Vs(S,g),y}for(w=n(S,w);!E.done;g++,E=_.next())E=m(w,S,g,E.value,M),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?g:E.key),C=i(E,C,g),x===null?y=E:x.sibling=E,x=E);return t&&w.forEach(function(D){return e(S,D)}),cr&&Vs(S,g),y}function T(S,C,_,M){if(typeof _=="object"&&_!==null&&_.type===Jo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Mf:e:{for(var y=_.key,x=C;x!==null;){if(x.key===y){if(y=_.type,y===Jo){if(x.tag===7){r(S,x.sibling),C=a(x,_.props.children),C.return=S,S=C;break e}}else if(x.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===ji&&Ub(y)===x.type){r(S,x.sibling),C=a(x,_.props),C.ref=Fl(S,x,_),C.return=S,S=C;break e}r(S,x);break}else e(S,x);x=x.sibling}_.type===Jo?(C=eo(_.props.children,S.mode,M,_.key),C.return=S,S=C):(M=Td(_.type,_.key,_.props,null,S.mode,M),M.ref=Fl(S,C,_),M.return=S,S=M)}return s(S);case Ko:e:{for(x=_.key;C!==null;){if(C.key===x)if(C.tag===4&&C.stateNode.containerInfo===_.containerInfo&&C.stateNode.implementation===_.implementation){r(S,C.sibling),C=a(C,_.children||[]),C.return=S,S=C;break e}else{r(S,C);break}else e(S,C);C=C.sibling}C=Bp(_,S.mode,M),C.return=S,S=C}return s(S);case ji:return x=_._init,T(S,C,x(_._payload),M)}if($l(_))return h(S,C,_,M);if(Cl(_))return v(S,C,_,M);zf(S,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,C!==null&&C.tag===6?(r(S,C.sibling),C=a(C,_),C.return=S,S=C):(r(S,C),C=Op(_,S.mode,M),C.return=S,S=C),s(S)):r(S,C)}return T}var Du=ED(!0),SD=ED(!1),Jd=Es(null),Yd=null,iu=null,d0=null;function m0(){d0=iu=Yd=null}function h0(t){var e=Jd.current;or(Jd),t._currentValue=e}function Pv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function pu(t,e){Yd=t,d0=iu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(On=!0),t.firstContext=null)}function ma(t){var e=t._currentValue;if(d0!==t)if(t={context:t,memoizedValue:e,next:null},iu===null){if(Yd===null)throw Error(Fe(308));iu=t,Yd.dependencies={lanes:0,firstContext:t}}else iu=iu.next=t;return e}var Qs=null;function p0(t){Qs===null?Qs=[t]:Qs.push(t)}function AD(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,p0(e)):(r.next=a.next,a.next=r),e.interleaved=r,yi(t,n)}function yi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ki=!1;function v0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Vt&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,yi(t,r)}return a=n.interleaved,a===null?(e.next=e,p0(n)):(e.next=a.next,a.next=e),n.interleaved=e,yi(t,r)}function _d(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,t0(t,r)}}function qb(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Zd(t,e,r,n){var a=t.updateQueue;ki=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var l=u,o=l.next;l.next=null,s===null?i=o:s.next=o,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,u=c.lastBaseUpdate,u!==s&&(u===null?c.firstBaseUpdate=o:u.next=o,c.lastBaseUpdate=l))}if(i!==null){var f=a.baseState;s=0,c=o=l=null,u=i;do{var d=u.lane,m=u.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:m,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var h=t,v=u;switch(d=e,m=r,v.tag){case 1:if(h=v.payload,typeof h=="function"){f=h.call(m,f,d);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=v.payload,d=typeof h=="function"?h.call(m,f,d):h,d==null)break e;f=hr({},f,d);break e;case 2:ki=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,d=a.effects,d===null?a.effects=[u]:d.push(u))}else m={eventTime:m,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},c===null?(o=c=m,l=f):c=c.next=m,s|=d;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;d=u,u=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(c===null&&(l=f),a.baseState=l,a.firstBaseUpdate=o,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do s|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);so|=s,t.lanes=s,t.memoizedState=f}}function Hb(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Fe(191,a));a.call(n)}}}var Qc={},Ga=Es(Qc),bc=Es(Qc),wc=Es(Qc);function Xs(t){if(t===Qc)throw Error(Fe(174));return t}function g0(t,e){switch(nr(wc,e),nr(bc,t),nr(Ga,Qc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dv(e,t)}or(Ga),nr(Ga,e)}function Cu(){or(Ga),or(bc),or(wc)}function CD(t){Xs(wc.current);var e=Xs(Ga.current),r=dv(e,t.type);e!==r&&(nr(bc,t),nr(Ga,r))}function y0(t){bc.current===t&&(or(Ga),or(bc))}var dr=Es(0);function em(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tp=[];function x0(){for(var t=0;t<Tp.length;t++)Tp[t]._workInProgressVersionPrimary=null;Tp.length=0}var Ed=Si.ReactCurrentDispatcher,Mp=Si.ReactCurrentBatchConfig,io=0,mr=null,Fr=null,Gr=null,tm=!1,Yl=!1,Nc=0,eO=0;function ln(){throw Error(Fe(321))}function b0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ta(t[r],e[r]))return!1;return!0}function w0(t,e,r,n,a,i){if(io=i,mr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?aO:iO,t=r(n,a),Yl){i=0;do{if(Yl=!1,Nc=0,25<=i)throw Error(Fe(301));i+=1,Gr=Fr=null,e.updateQueue=null,Ed.current=sO,t=r(n,a)}while(Yl)}if(Ed.current=rm,e=Fr!==null&&Fr.next!==null,io=0,Gr=Fr=mr=null,tm=!1,e)throw Error(Fe(300));return t}function N0(){var t=Nc!==0;return Nc=0,t}function za(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?mr.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function ha(){if(Fr===null){var t=mr.alternate;t=t!==null?t.memoizedState:null}else t=Fr.next;var e=Gr===null?mr.memoizedState:Gr.next;if(e!==null)Gr=e,Fr=t;else{if(t===null)throw Error(Fe(310));Fr=t,t={memoizedState:Fr.memoizedState,baseState:Fr.baseState,baseQueue:Fr.baseQueue,queue:Fr.queue,next:null},Gr===null?mr.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function _c(t,e){return typeof e=="function"?e(t):e}function Ip(t){var e=ha(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=Fr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var u=s=null,l=null,o=i;do{var c=o.lane;if((io&c)===c)l!==null&&(l=l.next={lane:0,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null}),n=o.hasEagerState?o.eagerState:t(n,o.action);else{var f={lane:c,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null};l===null?(u=l=f,s=n):l=l.next=f,mr.lanes|=c,so|=c}o=o.next}while(o!==null&&o!==i);l===null?s=n:l.next=u,Ta(n,e.memoizedState)||(On=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,mr.lanes|=i,so|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Pp(t){var e=ha(),r=e.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=t(i,s.action),s=s.next;while(s!==a);Ta(i,e.memoizedState)||(On=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function TD(){}function MD(t,e){var r=mr,n=ha(),a=e(),i=!Ta(n.memoizedState,a);if(i&&(n.memoizedState=a,On=!0),n=n.queue,_0(FD.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Gr!==null&&Gr.memoizedState.tag&1){if(r.flags|=2048,Ec(9,PD.bind(null,r,n,a,e),void 0,null),Xr===null)throw Error(Fe(349));io&30||ID(r,e,a)}return a}function ID(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function PD(t,e,r,n){e.value=r,e.getSnapshot=n,RD(e)&&OD(t)}function FD(t,e,r){return r(function(){RD(e)&&OD(t)})}function RD(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ta(t,r)}catch{return!0}}function OD(t){var e=yi(t,1);e!==null&&Da(e,t,1,-1)}function Gb(t){var e=za();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_c,lastRenderedState:t},e.queue=t,t=t.dispatch=nO.bind(null,mr,t),[e.memoizedState,t]}function Ec(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function BD(){return ha().memoizedState}function Sd(t,e,r,n){var a=za();mr.flags|=t,a.memoizedState=Ec(1|e,r,void 0,n===void 0?null:n)}function nh(t,e,r,n){var a=ha();n=n===void 0?null:n;var i=void 0;if(Fr!==null){var s=Fr.memoizedState;if(i=s.destroy,n!==null&&b0(n,s.deps)){a.memoizedState=Ec(e,r,i,n);return}}mr.flags|=t,a.memoizedState=Ec(1|e,r,i,n)}function Wb(t,e){return Sd(8390656,8,t,e)}function _0(t,e){return nh(2048,8,t,e)}function jD(t,e){return nh(4,2,t,e)}function kD(t,e){return nh(4,4,t,e)}function $D(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LD(t,e,r){return r=r!=null?r.concat([t]):null,nh(4,4,$D.bind(null,e,t),r)}function E0(){}function zD(t,e){var r=ha();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&b0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function VD(t,e){var r=ha();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&b0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function UD(t,e,r){return io&21?(Ta(r,e)||(r=QA(),mr.lanes|=r,so|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,On=!0),t.memoizedState=r)}function tO(t,e){var r=Kt;Kt=r!==0&&4>r?r:4,t(!0);var n=Mp.transition;Mp.transition={};try{t(!1),e()}finally{Kt=r,Mp.transition=n}}function qD(){return ha().memoizedState}function rO(t,e,r){var n=ts(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HD(t))GD(e,r);else if(r=AD(t,e,r,n),r!==null){var a=_n();Da(r,t,n,a),WD(r,e,n)}}function nO(t,e,r){var n=ts(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HD(t))GD(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,u=i(s,r);if(a.hasEagerState=!0,a.eagerState=u,Ta(u,s)){var l=e.interleaved;l===null?(a.next=a,p0(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}r=AD(t,e,a,n),r!==null&&(a=_n(),Da(r,t,n,a),WD(r,e,n))}}function HD(t){var e=t.alternate;return t===mr||e!==null&&e===mr}function GD(t,e){Yl=tm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function WD(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,t0(t,r)}}var rm={readContext:ma,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},aO={readContext:ma,useCallback:function(t,e){return za().memoizedState=[t,e===void 0?null:e],t},useContext:ma,useEffect:Wb,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Sd(4194308,4,$D.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sd(4,2,t,e)},useMemo:function(t,e){var r=za();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=za();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=rO.bind(null,mr,t),[n.memoizedState,t]},useRef:function(t){var e=za();return t={current:t},e.memoizedState=t},useState:Gb,useDebugValue:E0,useDeferredValue:function(t){return za().memoizedState=t},useTransition:function(){var t=Gb(!1),e=t[0];return t=tO.bind(null,t[1]),za().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=mr,a=za();if(cr){if(r===void 0)throw Error(Fe(407));r=r()}else{if(r=e(),Xr===null)throw Error(Fe(349));io&30||ID(n,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,Wb(FD.bind(null,n,i,t),[t]),n.flags|=2048,Ec(9,PD.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=za(),e=Xr.identifierPrefix;if(cr){var r=ci,n=li;r=(n&~(1<<32-Aa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Nc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=eO++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iO={readContext:ma,useCallback:zD,useContext:ma,useEffect:_0,useImperativeHandle:LD,useInsertionEffect:jD,useLayoutEffect:kD,useMemo:VD,useReducer:Ip,useRef:BD,useState:function(){return Ip(_c)},useDebugValue:E0,useDeferredValue:function(t){var e=ha();return UD(e,Fr.memoizedState,t)},useTransition:function(){var t=Ip(_c)[0],e=ha().memoizedState;return[t,e]},useMutableSource:TD,useSyncExternalStore:MD,useId:qD,unstable_isNewReconciler:!1},sO={readContext:ma,useCallback:zD,useContext:ma,useEffect:_0,useImperativeHandle:LD,useInsertionEffect:jD,useLayoutEffect:kD,useMemo:VD,useReducer:Pp,useRef:BD,useState:function(){return Pp(_c)},useDebugValue:E0,useDeferredValue:function(t){var e=ha();return Fr===null?e.memoizedState=t:UD(e,Fr.memoizedState,t)},useTransition:function(){var t=Pp(_c)[0],e=ha().memoizedState;return[t,e]},useMutableSource:TD,useSyncExternalStore:MD,useId:qD,unstable_isNewReconciler:!1};function wa(t,e){if(t&&t.defaultProps){e=hr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Fv(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:hr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ah={isMounted:function(t){return(t=t._reactInternals)?po(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_n(),a=ts(t),i=mi(n,a);i.payload=e,r!=null&&(i.callback=r),e=Zi(t,i,a),e!==null&&(Da(e,t,a,n),_d(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_n(),a=ts(t),i=mi(n,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Zi(t,i,a),e!==null&&(Da(e,t,a,n),_d(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_n(),n=ts(t),a=mi(r,n);a.tag=2,e!=null&&(a.callback=e),e=Zi(t,a,n),e!==null&&(Da(e,t,n,r),_d(e,t,n))}};function Qb(t,e,r,n,a,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!vc(r,n)||!vc(a,i):!0}function QD(t,e,r){var n=!1,a=fs,i=e.contextType;return typeof i=="object"&&i!==null?i=ma(i):(a=jn(e)?no:gn.current,n=e.contextTypes,i=(n=n!=null)?Su(t,a):fs),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ah,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Xb(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ah.enqueueReplaceState(e,e.state,null)}function Rv(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},v0(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=ma(i):(i=jn(e)?no:gn.current,a.context=Su(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Fv(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ah.enqueueReplaceState(a,a.state,null),Zd(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Tu(t,e){try{var r="",n=e;do r+=RF(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function Fp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ov(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var oO=typeof WeakMap=="function"?WeakMap:Map;function XD(t,e,r){r=mi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){am||(am=!0,Hv=n),Ov(t,e)},r}function KD(t,e,r){r=mi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){Ov(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ov(t,e),typeof n!="function"&&(es===null?es=new Set([this]):es.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function Kb(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new oO;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=wO.bind(null,t,e,r),e.then(t,t))}function Jb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yb(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=mi(-1,1),e.tag=2,Zi(r,e,1))),r.lanes|=1),t)}var uO=Si.ReactCurrentOwner,On=!1;function Nn(t,e,r,n){e.child=t===null?SD(e,null,r,n):Du(e,t.child,r,n)}function Zb(t,e,r,n,a){r=r.render;var i=e.ref;return pu(e,a),n=w0(t,e,r,n,i,a),r=N0(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,xi(t,e,a)):(cr&&r&&l0(e),e.flags|=1,Nn(t,e,n,a),e.child)}function ew(t,e,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!P0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,JD(t,e,i,n,a)):(t=Td(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:vc,r(s,n)&&t.ref===e.ref)return xi(t,e,a)}return e.flags|=1,t=rs(i,n),t.ref=e.ref,t.return=e,e.child=t}function JD(t,e,r,n,a){if(t!==null){var i=t.memoizedProps;if(vc(i,n)&&t.ref===e.ref)if(On=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(On=!0);else return e.lanes=t.lanes,xi(t,e,a)}return Bv(t,e,r,n,a)}function YD(t,e,r){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(ou,Hn),Hn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nr(ou,Hn),Hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,nr(ou,Hn),Hn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,nr(ou,Hn),Hn|=n;return Nn(t,e,a,r),e.child}function ZD(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Bv(t,e,r,n,a){var i=jn(r)?no:gn.current;return i=Su(e,i),pu(e,a),r=w0(t,e,r,n,i,a),n=N0(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,xi(t,e,a)):(cr&&n&&l0(e),e.flags|=1,Nn(t,e,r,a),e.child)}function tw(t,e,r,n,a){if(jn(r)){var i=!0;Qd(e)}else i=!1;if(pu(e,a),e.stateNode===null)Ad(t,e),QD(e,r,n),Rv(e,r,n,a),n=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var l=s.context,o=r.contextType;typeof o=="object"&&o!==null?o=ma(o):(o=jn(r)?no:gn.current,o=Su(e,o));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==n||l!==o)&&Xb(e,s,n,o),ki=!1;var d=e.memoizedState;s.state=d,Zd(e,n,s,a),l=e.memoizedState,u!==n||d!==l||Bn.current||ki?(typeof c=="function"&&(Fv(e,r,c,n),l=e.memoizedState),(u=ki||Qb(e,r,u,n,d,l,o))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=o,n=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,DD(t,e),u=e.memoizedProps,o=e.type===e.elementType?u:wa(e.type,u),s.props=o,f=e.pendingProps,d=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=ma(l):(l=jn(r)?no:gn.current,l=Su(e,l));var m=r.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==f||d!==l)&&Xb(e,s,n,l),ki=!1,d=e.memoizedState,s.state=d,Zd(e,n,s,a);var h=e.memoizedState;u!==f||d!==h||Bn.current||ki?(typeof m=="function"&&(Fv(e,r,m,n),h=e.memoizedState),(o=ki||Qb(e,r,o,n,d,h,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,h,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=h),s.props=n,s.state=h,s.context=l,n=o):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return jv(t,e,r,n,i,a)}function jv(t,e,r,n,a,i){ZD(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return a&&Lb(e,r,!1),xi(t,e,i);n=e.stateNode,uO.current=e;var u=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Du(e,t.child,null,i),e.child=Du(e,null,u,i)):Nn(t,e,u,i),e.memoizedState=n.state,a&&Lb(e,r,!0),e.child}function eC(t){var e=t.stateNode;e.pendingContext?$b(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$b(t,e.context,!1),g0(t,e.containerInfo)}function rw(t,e,r,n,a){return Au(),f0(a),e.flags|=256,Nn(t,e,r,n),e.child}var kv={dehydrated:null,treeContext:null,retryLane:0};function $v(t){return{baseLanes:t,cachePool:null,transitions:null}}function tC(t,e,r){var n=e.pendingProps,a=dr.current,i=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(a&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),nr(dr,a&1),t===null)return Iv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,i?(n=e.mode,i=e.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=oh(s,n,0,null),t=eo(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$v(r),e.memoizedState=kv,t):S0(e,s));if(a=t.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return lO(t,e,s,n,u,a,r);if(i){i=n.fallback,s=e.mode,a=t.child,u=a.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=rs(a,l),n.subtreeFlags=a.subtreeFlags&14680064),u!==null?i=rs(u,i):(i=eo(i,s,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,s=t.child.memoizedState,s=s===null?$v(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~r,e.memoizedState=kv,n}return i=t.child,t=i.sibling,n=rs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function S0(t,e){return e=oh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vf(t,e,r,n){return n!==null&&f0(n),Du(e,t.child,null,r),t=S0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lO(t,e,r,n,a,i,s){if(r)return e.flags&256?(e.flags&=-257,n=Fp(Error(Fe(422))),Vf(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=oh({mode:"visible",children:n.children},a,0,null),i=eo(i,a,s,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Du(e,t.child,null,s),e.child.memoizedState=$v(s),e.memoizedState=kv,i);if(!(e.mode&1))return Vf(t,e,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var u=n.dgst;return n=u,i=Error(Fe(419)),n=Fp(i,n,void 0),Vf(t,e,s,n)}if(u=(s&t.childLanes)!==0,On||u){if(n=Xr,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,yi(t,a),Da(n,t,a,-1))}return I0(),n=Fp(Error(Fe(421))),Vf(t,e,s,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=NO.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Wn=Yi(a.nextSibling),Qn=e,cr=!0,_a=null,t!==null&&(ia[sa++]=li,ia[sa++]=ci,ia[sa++]=ao,li=t.id,ci=t.overflow,ao=e),e=S0(e,n.children),e.flags|=4096,e)}function nw(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Pv(t.return,e,r)}function Rp(t,e,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function rC(t,e,r){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Nn(t,e,n.children,r),n=dr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nw(t,r,e);else if(t.tag===19)nw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(nr(dr,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&em(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Rp(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&em(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Rp(e,!0,r,null,i);break;case"together":Rp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ad(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,r=rs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=rs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function cO(t,e,r){switch(e.tag){case 3:eC(e),Au();break;case 5:CD(e);break;case 1:jn(e.type)&&Qd(e);break;case 4:g0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;nr(Jd,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(nr(dr,dr.current&1),e.flags|=128,null):r&e.child.childLanes?tC(t,e,r):(nr(dr,dr.current&1),t=xi(t,e,r),t!==null?t.sibling:null);nr(dr,dr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return rC(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nr(dr,dr.current),n)break;return null;case 22:case 23:return e.lanes=0,YD(t,e,r)}return xi(t,e,r)}var nC,Lv,aC,iC;nC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lv=function(){};aC=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Xs(Ga.current);var i=null;switch(r){case"input":a=uv(t,a),n=uv(t,n),i=[];break;case"select":a=hr({},a,{value:void 0}),n=hr({},n,{value:void 0}),i=[];break;case"textarea":a=fv(t,a),n=fv(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Gd)}mv(r,n);var s;r=null;for(o in a)if(!n.hasOwnProperty(o)&&a.hasOwnProperty(o)&&a[o]!=null)if(o==="style"){var u=a[o];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(lc.hasOwnProperty(o)?i||(i=[]):(i=i||[]).push(o,null));for(o in n){var l=n[o];if(u=a!=null?a[o]:void 0,n.hasOwnProperty(o)&&l!==u&&(l!=null||u!=null))if(o==="style")if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(i||(i=[]),i.push(o,r)),r=l;else o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(i=i||[]).push(o,l)):o==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(o,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(lc.hasOwnProperty(o)?(l!=null&&o==="onScroll"&&ir("scroll",t),i||u===l||(i=[])):(i=i||[]).push(o,l))}r&&(i=i||[]).push("style",r);var o=i;(e.updateQueue=o)&&(e.flags|=4)}};iC=function(t,e,r,n){r!==n&&(e.flags|=4)};function Rl(t,e){if(!cr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function fO(t,e,r){var n=e.pendingProps;switch(c0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return jn(e.type)&&Wd(),cn(e),null;case 3:return n=e.stateNode,Cu(),or(Bn),or(gn),x0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_a!==null&&(Qv(_a),_a=null))),Lv(t,e),cn(e),null;case 5:y0(e);var a=Xs(wc.current);if(r=e.type,t!==null&&e.stateNode!=null)aC(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Fe(166));return cn(e),null}if(t=Xs(Ga.current),Lf(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Ua]=e,n[xc]=i,t=(e.mode&1)!==0,r){case"dialog":ir("cancel",n),ir("close",n);break;case"iframe":case"object":case"embed":ir("load",n);break;case"video":case"audio":for(a=0;a<zl.length;a++)ir(zl[a],n);break;case"source":ir("error",n);break;case"img":case"image":case"link":ir("error",n),ir("load",n);break;case"details":ir("toggle",n);break;case"input":db(n,i),ir("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ir("invalid",n);break;case"textarea":hb(n,i),ir("invalid",n)}mv(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?n.textContent!==u&&(i.suppressHydrationWarning!==!0&&$f(n.textContent,u,t),a=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&$f(n.textContent,u,t),a=["children",""+u]):lc.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&ir("scroll",n)}switch(r){case"input":If(n),mb(n,i,!0);break;case"textarea":If(n),pb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Gd)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FA(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Ua]=e,t[xc]=n,nC(t,e,!1,!1),e.stateNode=t;e:{switch(s=hv(r,n),r){case"dialog":ir("cancel",t),ir("close",t),a=n;break;case"iframe":case"object":case"embed":ir("load",t),a=n;break;case"video":case"audio":for(a=0;a<zl.length;a++)ir(zl[a],t);a=n;break;case"source":ir("error",t),a=n;break;case"img":case"image":case"link":ir("error",t),ir("load",t),a=n;break;case"details":ir("toggle",t),a=n;break;case"input":db(t,n),a=uv(t,n),ir("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=hr({},n,{value:void 0}),ir("invalid",t);break;case"textarea":hb(t,n),a=fv(t,n),ir("invalid",t);break;default:a=n}mv(r,a),u=a;for(i in u)if(u.hasOwnProperty(i)){var l=u[i];i==="style"?BA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&RA(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&cc(t,l):typeof l=="number"&&cc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ir("scroll",t):l!=null&&Xg(t,i,l,s))}switch(r){case"input":If(t),mb(t,n,!1);break;case"textarea":If(t),pb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?fu(t,!!n.multiple,i,!1):n.defaultValue!=null&&fu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Gd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)iC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Fe(166));if(r=Xs(wc.current),Xs(Ga.current),Lf(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ua]=e,(i=n.nodeValue!==r)&&(t=Qn,t!==null))switch(t.tag){case 3:$f(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$f(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ua]=e,e.stateNode=n}return cn(e),null;case 13:if(or(dr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cr&&Wn!==null&&e.mode&1&&!(e.flags&128))_D(),Au(),e.flags|=98560,i=!1;else if(i=Lf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Fe(317));i[Ua]=e}else Au(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),i=!1}else _a!==null&&(Qv(_a),_a=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||dr.current&1?Or===0&&(Or=3):I0())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return Cu(),Lv(t,e),t===null&&gc(e.stateNode.containerInfo),cn(e),null;case 10:return h0(e.type._context),cn(e),null;case 17:return jn(e.type)&&Wd(),cn(e),null;case 19:if(or(dr),i=e.memoizedState,i===null)return cn(e),null;if(n=(e.flags&128)!==0,s=i.rendering,s===null)if(n)Rl(i,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=em(t),s!==null){for(e.flags|=128,Rl(i,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return nr(dr,dr.current&1|2),e.child}t=t.sibling}i.tail!==null&&_r()>Mu&&(e.flags|=128,n=!0,Rl(i,!1),e.lanes=4194304)}else{if(!n)if(t=em(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Rl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!cr)return cn(e),null}else 2*_r()-i.renderingStartTime>Mu&&r!==1073741824&&(e.flags|=128,n=!0,Rl(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(r=i.last,r!==null?r.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_r(),e.sibling=null,r=dr.current,nr(dr,n?r&1|2:r&1),e):(cn(e),null);case 22:case 23:return M0(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Hn&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function dO(t,e){switch(c0(e),e.tag){case 1:return jn(e.type)&&Wd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cu(),or(Bn),or(gn),x0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return y0(e),null;case 13:if(or(dr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Au()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return or(dr),null;case 4:return Cu(),null;case 10:return h0(e.type._context),null;case 22:case 23:return M0(),null;case 24:return null;default:return null}}var Uf=!1,hn=!1,mO=typeof WeakSet=="function"?WeakSet:Set,qe=null;function su(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){gr(t,e,n)}else r.current=null}function zv(t,e,r){try{r()}catch(n){gr(t,e,n)}}var aw=!1;function hO(t,e){if(Ev=Ud,t=cD(),u0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,u=-1,l=-1,o=0,c=0,f=t,d=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(u=s+a),f!==i||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)d=f,f=m;for(;;){if(f===t)break t;if(d===r&&++o===a&&(u=s),d===i&&++c===n&&(l=s),(m=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=m}r=u===-1||l===-1?null:{start:u,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sv={focusedElem:t,selectionRange:r},Ud=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var v=h.memoizedProps,T=h.memoizedState,S=e.stateNode,C=S.getSnapshotBeforeUpdate(e.elementType===e.type?v:wa(e.type,v),T);S.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(M){gr(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return h=aw,aw=!1,h}function Zl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&zv(e,r,i)}a=a.next}while(a!==n)}}function ih(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Vv(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sC(t){var e=t.alternate;e!==null&&(t.alternate=null,sC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ua],delete e[xc],delete e[Cv],delete e[KR],delete e[JR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oC(t){return t.tag===5||t.tag===3||t.tag===4}function iw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Gd));else if(n!==4&&(t=t.child,t!==null))for(Uv(t,e,r),t=t.sibling;t!==null;)Uv(t,e,r),t=t.sibling}function qv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(qv(t,e,r),t=t.sibling;t!==null;)qv(t,e,r),t=t.sibling}var Jr=null,Na=!1;function Oi(t,e,r){for(r=r.child;r!==null;)uC(t,e,r),r=r.sibling}function uC(t,e,r){if(Ha&&typeof Ha.onCommitFiberUnmount=="function")try{Ha.onCommitFiberUnmount(Jm,r)}catch{}switch(r.tag){case 5:hn||su(r,e);case 6:var n=Jr,a=Na;Jr=null,Oi(t,e,r),Jr=n,Na=a,Jr!==null&&(Na?(t=Jr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(Na?(t=Jr,r=r.stateNode,t.nodeType===8?Dp(t.parentNode,r):t.nodeType===1&&Dp(t,r),hc(t)):Dp(Jr,r.stateNode));break;case 4:n=Jr,a=Na,Jr=r.stateNode.containerInfo,Na=!0,Oi(t,e,r),Jr=n,Na=a;break;case 0:case 11:case 14:case 15:if(!hn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&zv(r,e,s),a=a.next}while(a!==n)}Oi(t,e,r);break;case 1:if(!hn&&(su(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){gr(r,e,u)}Oi(t,e,r);break;case 21:Oi(t,e,r);break;case 22:r.mode&1?(hn=(n=hn)||r.memoizedState!==null,Oi(t,e,r),hn=n):Oi(t,e,r);break;default:Oi(t,e,r)}}function sw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new mO),e.forEach(function(n){var a=_O.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function xa(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:Jr=u.stateNode,Na=!1;break e;case 3:Jr=u.stateNode.containerInfo,Na=!0;break e;case 4:Jr=u.stateNode.containerInfo,Na=!0;break e}u=u.return}if(Jr===null)throw Error(Fe(160));uC(i,s,a),Jr=null,Na=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(o){gr(a,e,o)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lC(e,t),e=e.sibling}function lC(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xa(e,t),La(t),n&4){try{Zl(3,t,t.return),ih(3,t)}catch(v){gr(t,t.return,v)}try{Zl(5,t,t.return)}catch(v){gr(t,t.return,v)}}break;case 1:xa(e,t),La(t),n&512&&r!==null&&su(r,r.return);break;case 5:if(xa(e,t),La(t),n&512&&r!==null&&su(r,r.return),t.flags&32){var a=t.stateNode;try{cc(a,"")}catch(v){gr(t,t.return,v)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,s=r!==null?r.memoizedProps:i,u=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&IA(a,i),hv(u,s);var o=hv(u,i);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?BA(a,f):c==="dangerouslySetInnerHTML"?RA(a,f):c==="children"?cc(a,f):Xg(a,c,f,o)}switch(u){case"input":lv(a,i);break;case"textarea":PA(a,i);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?fu(a,!!i.multiple,m,!1):d!==!!i.multiple&&(i.defaultValue!=null?fu(a,!!i.multiple,i.defaultValue,!0):fu(a,!!i.multiple,i.multiple?[]:"",!1))}a[xc]=i}catch(v){gr(t,t.return,v)}}break;case 6:if(xa(e,t),La(t),n&4){if(t.stateNode===null)throw Error(Fe(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(v){gr(t,t.return,v)}}break;case 3:if(xa(e,t),La(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hc(e.containerInfo)}catch(v){gr(t,t.return,v)}break;case 4:xa(e,t),La(t);break;case 13:xa(e,t),La(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(C0=_r())),n&4&&sw(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(hn=(o=hn)||c,xa(e,t),hn=o):xa(e,t),La(t),n&8192){if(o=t.memoizedState!==null,(t.stateNode.isHidden=o)&&!c&&t.mode&1)for(qe=t,c=t.child;c!==null;){for(f=qe=c;qe!==null;){switch(d=qe,m=d.child,d.tag){case 0:case 11:case 14:case 15:Zl(4,d,d.return);break;case 1:su(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(v){gr(n,r,v)}}break;case 5:su(d,d.return);break;case 22:if(d.memoizedState!==null){uw(f);continue}}m!==null?(m.return=d,qe=m):uw(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{a=f.stateNode,o?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=OA("display",s))}catch(v){gr(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=o?"":f.memoizedProps}catch(v){gr(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xa(e,t),La(t),n&4&&sw(t);break;case 21:break;default:xa(e,t),La(t)}}function La(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(oC(r)){var n=r;break e}r=r.return}throw Error(Fe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(cc(a,""),n.flags&=-33);var i=iw(t);qv(t,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,u=iw(t);Uv(t,u,s);break;default:throw Error(Fe(161))}}catch(l){gr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pO(t,e,r){qe=t,cC(t)}function cC(t,e,r){for(var n=(t.mode&1)!==0;qe!==null;){var a=qe,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||Uf;if(!s){var u=a.alternate,l=u!==null&&u.memoizedState!==null||hn;u=Uf;var o=hn;if(Uf=s,(hn=l)&&!o)for(qe=a;qe!==null;)s=qe,l=s.child,s.tag===22&&s.memoizedState!==null?lw(a):l!==null?(l.return=s,qe=l):lw(a);for(;i!==null;)qe=i,cC(i),i=i.sibling;qe=a,Uf=u,hn=o}ow(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,qe=i):ow(t)}}function ow(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||ih(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!hn)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:wa(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hb(e,i,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Hb(e,s,r)}break;case 5:var u=e.stateNode;if(r===null&&e.flags&4){r=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var o=e.alternate;if(o!==null){var c=o.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&hc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}hn||e.flags&512&&Vv(e)}catch(d){gr(e,e.return,d)}}if(e===t){qe=null;break}if(r=e.sibling,r!==null){r.return=e.return,qe=r;break}qe=e.return}}function uw(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,qe=r;break}qe=e.return}}function lw(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ih(4,e)}catch(l){gr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(l){gr(e,a,l)}}var i=e.return;try{Vv(e)}catch(l){gr(e,i,l)}break;case 5:var s=e.return;try{Vv(e)}catch(l){gr(e,s,l)}}}catch(l){gr(e,e.return,l)}if(e===t){qe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,qe=u;break}qe=e.return}}var vO=Math.ceil,nm=Si.ReactCurrentDispatcher,A0=Si.ReactCurrentOwner,fa=Si.ReactCurrentBatchConfig,Vt=0,Xr=null,Ar=null,rn=0,Hn=0,ou=Es(0),Or=0,Sc=null,so=0,sh=0,D0=0,ec=null,Rn=null,C0=0,Mu=1/0,oi=null,am=!1,Hv=null,es=null,qf=!1,qi=null,im=0,tc=0,Gv=null,Dd=-1,Cd=0;function _n(){return Vt&6?_r():Dd!==-1?Dd:Dd=_r()}function ts(t){return t.mode&1?Vt&2&&rn!==0?rn&-rn:ZR.transition!==null?(Cd===0&&(Cd=QA()),Cd):(t=Kt,t!==0||(t=window.event,t=t===void 0?16:tD(t.type)),t):1}function Da(t,e,r,n){if(50<tc)throw tc=0,Gv=null,Error(Fe(185));Hc(t,r,n),(!(Vt&2)||t!==Xr)&&(t===Xr&&(!(Vt&2)&&(sh|=r),Or===4&&Vi(t,rn)),kn(t,n),r===1&&Vt===0&&!(e.mode&1)&&(Mu=_r()+500,rh&&Ss()))}function kn(t,e){var r=t.callbackNode;ZF(t,e);var n=Vd(t,t===Xr?rn:0);if(n===0)r!==null&&yb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&yb(r),e===1)t.tag===0?YR(cw.bind(null,t)):bD(cw.bind(null,t)),QR(function(){!(Vt&6)&&Ss()}),r=null;else{switch(XA(n)){case 1:r=e0;break;case 4:r=GA;break;case 16:r=zd;break;case 536870912:r=WA;break;default:r=zd}r=yC(r,fC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function fC(t,e){if(Dd=-1,Cd=0,Vt&6)throw Error(Fe(327));var r=t.callbackNode;if(vu()&&t.callbackNode!==r)return null;var n=Vd(t,t===Xr?rn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=sm(t,n);else{e=n;var a=Vt;Vt|=2;var i=mC();(Xr!==t||rn!==e)&&(oi=null,Mu=_r()+500,Zs(t,e));do try{xO();break}catch(u){dC(t,u)}while(!0);m0(),nm.current=i,Vt=a,Ar!==null?e=0:(Xr=null,rn=0,e=Or)}if(e!==0){if(e===2&&(a=xv(t),a!==0&&(n=a,e=Wv(t,a))),e===1)throw r=Sc,Zs(t,0),Vi(t,n),kn(t,_r()),r;if(e===6)Vi(t,n);else{if(a=t.current.alternate,!(n&30)&&!gO(a)&&(e=sm(t,n),e===2&&(i=xv(t),i!==0&&(n=i,e=Wv(t,i))),e===1))throw r=Sc,Zs(t,0),Vi(t,n),kn(t,_r()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(Fe(345));case 2:Us(t,Rn,oi);break;case 3:if(Vi(t,n),(n&130023424)===n&&(e=C0+500-_r(),10<e)){if(Vd(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){_n(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Dv(Us.bind(null,t,Rn,oi),e);break}Us(t,Rn,oi);break;case 4:if(Vi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var s=31-Aa(n);i=1<<s,s=e[s],s>a&&(a=s),n&=~i}if(n=a,n=_r()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vO(n/1960))-n,10<n){t.timeoutHandle=Dv(Us.bind(null,t,Rn,oi),n);break}Us(t,Rn,oi);break;case 5:Us(t,Rn,oi);break;default:throw Error(Fe(329))}}}return kn(t,_r()),t.callbackNode===r?fC.bind(null,t):null}function Wv(t,e){var r=ec;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=sm(t,e),t!==2&&(e=Rn,Rn=r,e!==null&&Qv(e)),t}function Qv(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function gO(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ta(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~D0,e&=~sh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Aa(e),n=1<<r;t[r]=-1,e&=~n}}function cw(t){if(Vt&6)throw Error(Fe(327));vu();var e=Vd(t,0);if(!(e&1))return kn(t,_r()),null;var r=sm(t,e);if(t.tag!==0&&r===2){var n=xv(t);n!==0&&(e=n,r=Wv(t,n))}if(r===1)throw r=Sc,Zs(t,0),Vi(t,e),kn(t,_r()),r;if(r===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Us(t,Rn,oi),kn(t,_r()),null}function T0(t,e){var r=Vt;Vt|=1;try{return t(e)}finally{Vt=r,Vt===0&&(Mu=_r()+500,rh&&Ss())}}function oo(t){qi!==null&&qi.tag===0&&!(Vt&6)&&vu();var e=Vt;Vt|=1;var r=fa.transition,n=Kt;try{if(fa.transition=null,Kt=1,t)return t()}finally{Kt=n,fa.transition=r,Vt=e,!(Vt&6)&&Ss()}}function M0(){Hn=ou.current,or(ou)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,WR(r)),Ar!==null)for(r=Ar.return;r!==null;){var n=r;switch(c0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Wd();break;case 3:Cu(),or(Bn),or(gn),x0();break;case 5:y0(n);break;case 4:Cu();break;case 13:or(dr);break;case 19:or(dr);break;case 10:h0(n.type._context);break;case 22:case 23:M0()}r=r.return}if(Xr=t,Ar=t=rs(t.current,null),rn=Hn=e,Or=0,Sc=null,D0=sh=so=0,Rn=ec=null,Qs!==null){for(e=0;e<Qs.length;e++)if(r=Qs[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}Qs=null}return t}function dC(t,e){do{var r=Ar;try{if(m0(),Ed.current=rm,tm){for(var n=mr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}tm=!1}if(io=0,Gr=Fr=mr=null,Yl=!1,Nc=0,A0.current=null,r===null||r.return===null){Or=1,Sc=e,Ar=null;break}e:{var i=t,s=r.return,u=r,l=e;if(e=rn,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var o=l,c=u,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=Jb(s);if(m!==null){m.flags&=-257,Yb(m,s,u,i,e),m.mode&1&&Kb(i,o,e),e=m,l=o;var h=e.updateQueue;if(h===null){var v=new Set;v.add(l),e.updateQueue=v}else h.add(l);break e}else{if(!(e&1)){Kb(i,o,e),I0();break e}l=Error(Fe(426))}}else if(cr&&u.mode&1){var T=Jb(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Yb(T,s,u,i,e),f0(Tu(l,u));break e}}i=l=Tu(l,u),Or!==4&&(Or=2),ec===null?ec=[i]:ec.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=XD(i,l,e);qb(i,S);break e;case 1:u=l;var C=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof C.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(es===null||!es.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=KD(i,u,e);qb(i,M);break e}}i=i.return}while(i!==null)}pC(r)}catch(y){e=y,Ar===r&&r!==null&&(Ar=r=r.return);continue}break}while(!0)}function mC(){var t=nm.current;return nm.current=rm,t===null?rm:t}function I0(){(Or===0||Or===3||Or===2)&&(Or=4),Xr===null||!(so&268435455)&&!(sh&268435455)||Vi(Xr,rn)}function sm(t,e){var r=Vt;Vt|=2;var n=mC();(Xr!==t||rn!==e)&&(oi=null,Zs(t,e));do try{yO();break}catch(a){dC(t,a)}while(!0);if(m0(),Vt=r,nm.current=n,Ar!==null)throw Error(Fe(261));return Xr=null,rn=0,Or}function yO(){for(;Ar!==null;)hC(Ar)}function xO(){for(;Ar!==null&&!qF();)hC(Ar)}function hC(t){var e=gC(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,e===null?pC(t):Ar=e,A0.current=null}function pC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=dO(r,e),r!==null){r.flags&=32767,Ar=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,Ar=null;return}}else if(r=fO(r,e,Hn),r!==null){Ar=r;return}if(e=e.sibling,e!==null){Ar=e;return}Ar=e=t}while(e!==null);Or===0&&(Or=5)}function Us(t,e,r){var n=Kt,a=fa.transition;try{fa.transition=null,Kt=1,bO(t,e,r,n)}finally{fa.transition=a,Kt=n}return null}function bO(t,e,r,n){do vu();while(qi!==null);if(Vt&6)throw Error(Fe(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(eR(t,i),t===Xr&&(Ar=Xr=null,rn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qf||(qf=!0,yC(zd,function(){return vu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=fa.transition,fa.transition=null;var s=Kt;Kt=1;var u=Vt;Vt|=4,A0.current=null,hO(t,r),lC(r,t),LR(Sv),Ud=!!Ev,Sv=Ev=null,t.current=r,pO(r),HF(),Vt=u,Kt=s,fa.transition=i}else t.current=r;if(qf&&(qf=!1,qi=t,im=a),i=t.pendingLanes,i===0&&(es=null),QF(r.stateNode),kn(t,_r()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(am)throw am=!1,t=Hv,Hv=null,t;return im&1&&t.tag!==0&&vu(),i=t.pendingLanes,i&1?t===Gv?tc++:(tc=0,Gv=t):tc=0,Ss(),null}function vu(){if(qi!==null){var t=XA(im),e=fa.transition,r=Kt;try{if(fa.transition=null,Kt=16>t?16:t,qi===null)var n=!1;else{if(t=qi,qi=null,im=0,Vt&6)throw Error(Fe(331));var a=Vt;for(Vt|=4,qe=t.current;qe!==null;){var i=qe,s=i.child;if(qe.flags&16){var u=i.deletions;if(u!==null){for(var l=0;l<u.length;l++){var o=u[l];for(qe=o;qe!==null;){var c=qe;switch(c.tag){case 0:case 11:case 15:Zl(8,c,i)}var f=c.child;if(f!==null)f.return=c,qe=f;else for(;qe!==null;){c=qe;var d=c.sibling,m=c.return;if(sC(c),c===o){qe=null;break}if(d!==null){d.return=m,qe=d;break}qe=m}}}var h=i.alternate;if(h!==null){var v=h.child;if(v!==null){h.child=null;do{var T=v.sibling;v.sibling=null,v=T}while(v!==null)}}qe=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,qe=s;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zl(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,qe=S;break e}qe=i.return}}var C=t.current;for(qe=C;qe!==null;){s=qe;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,qe=_;else e:for(s=C;qe!==null;){if(u=qe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ih(9,u)}}catch(y){gr(u,u.return,y)}if(u===s){qe=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,qe=M;break e}qe=u.return}}if(Vt=a,Ss(),Ha&&typeof Ha.onPostCommitFiberRoot=="function")try{Ha.onPostCommitFiberRoot(Jm,t)}catch{}n=!0}return n}finally{Kt=r,fa.transition=e}}return!1}function fw(t,e,r){e=Tu(r,e),e=XD(t,e,1),t=Zi(t,e,1),e=_n(),t!==null&&(Hc(t,1,e),kn(t,e))}function gr(t,e,r){if(t.tag===3)fw(t,t,r);else for(;e!==null;){if(e.tag===3){fw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(es===null||!es.has(n))){t=Tu(r,t),t=KD(e,t,1),e=Zi(e,t,1),t=_n(),e!==null&&(Hc(e,1,t),kn(e,t));break}}e=e.return}}function wO(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&r,Xr===t&&(rn&r)===r&&(Or===4||Or===3&&(rn&130023424)===rn&&500>_r()-C0?Zs(t,0):D0|=r),kn(t,e)}function vC(t,e){e===0&&(t.mode&1?(e=Rf,Rf<<=1,!(Rf&130023424)&&(Rf=4194304)):e=1);var r=_n();t=yi(t,e),t!==null&&(Hc(t,e,r),kn(t,r))}function NO(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),vC(t,r)}function _O(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Fe(314))}n!==null&&n.delete(e),vC(t,r)}var gC;gC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)On=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return On=!1,cO(t,e,r);On=!!(t.flags&131072)}else On=!1,cr&&e.flags&1048576&&wD(e,Kd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ad(t,e),t=e.pendingProps;var a=Su(e,gn.current);pu(e,r),a=w0(null,e,n,t,a,r);var i=N0();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jn(n)?(i=!0,Qd(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,v0(e),a.updater=ah,e.stateNode=a,a._reactInternals=e,Rv(e,n,t,r),e=jv(null,e,n,!0,i,r)):(e.tag=0,cr&&i&&l0(e),Nn(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ad(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=SO(n),t=wa(n,t),a){case 0:e=Bv(null,e,n,t,r);break e;case 1:e=tw(null,e,n,t,r);break e;case 11:e=Zb(null,e,n,t,r);break e;case 14:e=ew(null,e,n,wa(n.type,t),r);break e}throw Error(Fe(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:wa(n,a),Bv(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:wa(n,a),tw(t,e,n,a,r);case 3:e:{if(eC(e),t===null)throw Error(Fe(387));n=e.pendingProps,i=e.memoizedState,a=i.element,DD(t,e),Zd(e,n,null,r);var s=e.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=Tu(Error(Fe(423)),e),e=rw(t,e,n,r,a);break e}else if(n!==a){a=Tu(Error(Fe(424)),e),e=rw(t,e,n,r,a);break e}else for(Wn=Yi(e.stateNode.containerInfo.firstChild),Qn=e,cr=!0,_a=null,r=SD(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Au(),n===a){e=xi(t,e,r);break e}Nn(t,e,n,r)}e=e.child}return e;case 5:return CD(e),t===null&&Iv(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,s=a.children,Av(n,a)?s=null:i!==null&&Av(n,i)&&(e.flags|=32),ZD(t,e),Nn(t,e,s,r),e.child;case 6:return t===null&&Iv(e),null;case 13:return tC(t,e,r);case 4:return g0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Du(e,null,n,r):Nn(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:wa(n,a),Zb(t,e,n,a,r);case 7:return Nn(t,e,e.pendingProps,r),e.child;case 8:return Nn(t,e,e.pendingProps.children,r),e.child;case 12:return Nn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,s=a.value,nr(Jd,n._currentValue),n._currentValue=s,i!==null)if(Ta(i.value,s)){if(i.children===a.children&&!Bn.current){e=xi(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var l=u.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=mi(-1,r&-r),l.tag=2;var o=i.updateQueue;if(o!==null){o=o.shared;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Pv(i.return,r,e),u.lanes|=r;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(Fe(341));s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),Pv(s,r,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Nn(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,pu(e,r),a=ma(a),n=n(a),e.flags|=1,Nn(t,e,n,r),e.child;case 14:return n=e.type,a=wa(n,e.pendingProps),a=wa(n.type,a),ew(t,e,n,a,r);case 15:return JD(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:wa(n,a),Ad(t,e),e.tag=1,jn(n)?(t=!0,Qd(e)):t=!1,pu(e,r),QD(e,n,a),Rv(e,n,a,r),jv(null,e,n,!0,t,r);case 19:return rC(t,e,r);case 22:return YD(t,e,r)}throw Error(Fe(156,e.tag))};function yC(t,e){return HA(t,e)}function EO(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(t,e,r,n){return new EO(t,e,r,n)}function P0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SO(t){if(typeof t=="function")return P0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jg)return 11;if(t===Yg)return 14}return 2}function rs(t,e){var r=t.alternate;return r===null?(r=ca(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Td(t,e,r,n,a,i){var s=2;if(n=t,typeof t=="function")P0(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Jo:return eo(r.children,a,i,e);case Kg:s=8,a|=8;break;case av:return t=ca(12,r,e,a|2),t.elementType=av,t.lanes=i,t;case iv:return t=ca(13,r,e,a),t.elementType=iv,t.lanes=i,t;case sv:return t=ca(19,r,e,a),t.elementType=sv,t.lanes=i,t;case CA:return oh(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AA:s=10;break e;case DA:s=9;break e;case Jg:s=11;break e;case Yg:s=14;break e;case ji:s=16,n=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=ca(s,r,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function eo(t,e,r,n){return t=ca(7,t,n,e),t.lanes=r,t}function oh(t,e,r,n){return t=ca(22,t,n,e),t.elementType=CA,t.lanes=r,t.stateNode={isHidden:!1},t}function Op(t,e,r){return t=ca(6,t,null,e),t.lanes=r,t}function Bp(t,e,r){return e=ca(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AO(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vp(0),this.expirationTimes=vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function F0(t,e,r,n,a,i,s,u,l){return t=new AO(t,e,r,u,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ca(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},v0(i),t}function DO(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function xC(t){if(!t)return fs;t=t._reactInternals;e:{if(po(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var r=t.type;if(jn(r))return xD(t,r,e)}return e}function bC(t,e,r,n,a,i,s,u,l){return t=F0(r,n,!0,t,a,i,s,u,l),t.context=xC(null),r=t.current,n=_n(),a=ts(r),i=mi(n,a),i.callback=e??null,Zi(r,i,a),t.current.lanes=a,Hc(t,a,n),kn(t,n),t}function uh(t,e,r,n){var a=e.current,i=_n(),s=ts(a);return r=xC(r),e.context===null?e.context=r:e.pendingContext=r,e=mi(i,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zi(a,e,s),t!==null&&(Da(t,a,s,i),_d(t,a,s)),s}function om(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function R0(t,e){dw(t,e),(t=t.alternate)&&dw(t,e)}function CO(){return null}var wC=typeof reportError=="function"?reportError:function(t){console.error(t)};function O0(t){this._internalRoot=t}lh.prototype.render=O0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));uh(t,e,null,null)};lh.prototype.unmount=O0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){uh(null,t,null,null)}),e[gi]=null}};function lh(t){this._internalRoot=t}lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=YA();t={blockedOn:null,target:t,priority:e};for(var r=0;r<zi.length&&e!==0&&e<zi[r].priority;r++);zi.splice(r,0,t),r===0&&eD(t)}};function B0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mw(){}function TO(t,e,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var o=om(s);i.call(o)}}var s=bC(e,n,t,0,null,!1,!1,"",mw);return t._reactRootContainer=s,t[gi]=s.current,gc(t.nodeType===8?t.parentNode:t),oo(),s}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var u=n;n=function(){var o=om(l);u.call(o)}}var l=F0(t,0,!1,null,null,!1,!1,"",mw);return t._reactRootContainer=l,t[gi]=l.current,gc(t.nodeType===8?t.parentNode:t),oo(function(){uh(e,l,r,n)}),l}function fh(t,e,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var u=a;a=function(){var l=om(s);u.call(l)}}uh(e,s,t,a)}else s=TO(r,e,t,a,n);return om(s)}KA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ll(e.pendingLanes);r!==0&&(t0(e,r|1),kn(e,_r()),!(Vt&6)&&(Mu=_r()+500,Ss()))}break;case 13:oo(function(){var n=yi(t,1);if(n!==null){var a=_n();Da(n,t,1,a)}}),R0(t,1)}};r0=function(t){if(t.tag===13){var e=yi(t,134217728);if(e!==null){var r=_n();Da(e,t,134217728,r)}R0(t,134217728)}};JA=function(t){if(t.tag===13){var e=ts(t),r=yi(t,e);if(r!==null){var n=_n();Da(r,t,e,n)}R0(t,e)}};YA=function(){return Kt};ZA=function(t,e){var r=Kt;try{return Kt=t,e()}finally{Kt=r}};vv=function(t,e,r){switch(e){case"input":if(lv(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=th(n);if(!a)throw Error(Fe(90));MA(n),lv(n,a)}}}break;case"textarea":PA(t,r);break;case"select":e=r.value,e!=null&&fu(t,!!r.multiple,e,!1)}};$A=T0;LA=oo;var MO={usingClientEntryPoint:!1,Events:[Wc,tu,th,jA,kA,T0]},Ol={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IO={bundleType:Ol.bundleType,version:Ol.version,rendererPackageName:Ol.rendererPackageName,rendererConfig:Ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UA(t),t===null?null:t.stateNode},findFiberByHostInstance:Ol.findFiberByHostInstance||CO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{Jm=Hf.inject(IO),Ha=Hf}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MO;Jn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B0(e))throw Error(Fe(200));return DO(t,e,null,r)};Jn.createRoot=function(t,e){if(!B0(t))throw Error(Fe(299));var r=!1,n="",a=wC;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=F0(t,1,!1,null,null,r,!1,n,a),t[gi]=e.current,gc(t.nodeType===8?t.parentNode:t),new O0(e)};Jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=UA(e),t=t===null?null:t.stateNode,t};Jn.flushSync=function(t){return oo(t)};Jn.hydrate=function(t,e,r){if(!ch(e))throw Error(Fe(200));return fh(null,t,e,!0,r)};Jn.hydrateRoot=function(t,e,r){if(!B0(t))throw Error(Fe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=wC;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=bC(e,null,t,1,r??null,a,!1,i,s),t[gi]=e.current,gc(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new lh(e)};Jn.render=function(t,e,r){if(!ch(e))throw Error(Fe(200));return fh(null,t,e,!1,r)};Jn.unmountComponentAtNode=function(t){if(!ch(t))throw Error(Fe(40));return t._reactRootContainer?(oo(function(){fh(null,null,t,!1,function(){t._reactRootContainer=null,t[gi]=null})}),!0):!1};Jn.unstable_batchedUpdates=T0;Jn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ch(r))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return fh(t,e,r,!1,n)};Jn.version="18.3.1-next-f1338f8080-20240426";function NC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NC)}catch(t){console.error(t)}}NC(),NA.exports=Jn;var PO=NA.exports,_C,hw=PO;_C=hw.createRoot,hw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ac(){return Ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ac.apply(this,arguments)}var Hi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hi||(Hi={}));const pw="popstate";function FO(t){t===void 0&&(t={});function e(n,a){let{pathname:i,search:s,hash:u}=n.location;return Xv("",{pathname:i,search:s,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:um(a)}return OO(e,r,null,t)}function Tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function EC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RO(){return Math.random().toString(36).substr(2,8)}function vw(t,e){return{usr:t.state,key:t.key,idx:e}}function Xv(t,e,r,n){return r===void 0&&(r=null),Ac({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xu(e):e,{state:r,key:e&&e.key||n||RO()})}function um(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Xu(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function OO(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,u=Hi.Pop,l=null,o=c();o==null&&(o=0,s.replaceState(Ac({},s.state,{idx:o}),""));function c(){return(s.state||{idx:null}).idx}function f(){u=Hi.Pop;let T=c(),S=T==null?null:T-o;o=T,l&&l({action:u,location:v.location,delta:S})}function d(T,S){u=Hi.Push;let C=Xv(v.location,T,S);o=c()+1;let _=vw(C,o),M=v.createHref(C);try{s.pushState(_,"",M)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;a.location.assign(M)}i&&l&&l({action:u,location:v.location,delta:1})}function m(T,S){u=Hi.Replace;let C=Xv(v.location,T,S);o=c();let _=vw(C,o),M=v.createHref(C);s.replaceState(_,"",M),i&&l&&l({action:u,location:v.location,delta:0})}function h(T){let S=a.location.origin!=="null"?a.location.origin:a.location.href,C=typeof T=="string"?T:um(T);return C=C.replace(/ $/,"%20"),Tr(S,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,S)}let v={get action(){return u},get location(){return t(a,s)},listen(T){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(pw,f),l=T,()=>{a.removeEventListener(pw,f),l=null}},createHref(T){return e(a,T)},createURL:h,encodeLocation(T){let S=h(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:d,replace:m,go(T){return s.go(T)}};return v}var gw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gw||(gw={}));function BO(t,e,r){return r===void 0&&(r="/"),jO(t,e,r)}function jO(t,e,r,n){let a=typeof e=="string"?Xu(e):e,i=j0(a.pathname||"/",r);if(i==null)return null;let s=SC(t);kO(s);let u=null;for(let l=0;u==null&&l<s.length;++l){let o=KO(i);u=WO(s[l],o)}return u}function SC(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,u)=>{let l={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};l.relativePath.startsWith("/")&&(Tr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let o=ns([n,l.relativePath]),c=r.concat(l);i.children&&i.children.length>0&&(Tr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),SC(i.children,e,c,o)),!(i.path==null&&!i.index)&&e.push({path:o,score:HO(o,i.index),routesMeta:c})};return t.forEach((i,s)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,s);else for(let l of AC(i.path))a(i,s,l)}),e}function AC(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=AC(n.join("/")),u=[];return u.push(...s.map(l=>l===""?i:[i,l].join("/"))),a&&u.push(...s),u.map(l=>t.startsWith("/")&&l===""?"/":l)}function kO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:GO(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $O=/^:[\w-]+$/,LO=3,zO=2,VO=1,UO=10,qO=-2,yw=t=>t==="*";function HO(t,e){let r=t.split("/"),n=r.length;return r.some(yw)&&(n+=qO),e&&(n+=zO),r.filter(a=>!yw(a)).reduce((a,i)=>a+($O.test(i)?LO:i===""?VO:UO),n)}function GO(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function WO(t,e,r){let{routesMeta:n}=t,a={},i="/",s=[];for(let u=0;u<n.length;++u){let l=n[u],o=u===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",f=QO({path:l.relativePath,caseSensitive:l.caseSensitive,end:o},c),d=l.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:ns([i,f.pathname]),pathnameBase:e6(ns([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=ns([i,f.pathnameBase]))}return s}function QO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=XO(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((o,c,f)=>{let{paramName:d,isOptional:m}=c;if(d==="*"){let v=u[f]||"";s=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const h=u[f];return m&&!h?o[d]=void 0:o[d]=(h||"").replace(/%2F/g,"/"),o},{}),pathname:i,pathnameBase:s,pattern:t}}function XO(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),EC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,u,l)=>(n.push({paramName:u,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function KO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return EC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function j0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function JO(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Xu(t):t;return{pathname:r?r.startsWith("/")?r:YO(r,e):e,search:t6(n),hash:r6(a)}}function YO(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function jp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZO(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function DC(t,e){let r=ZO(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function CC(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Xu(t):(a=Ac({},t),Tr(!a.pathname||!a.pathname.includes("?"),jp("?","pathname","search",a)),Tr(!a.pathname||!a.pathname.includes("#"),jp("#","pathname","hash",a)),Tr(!a.search||!a.search.includes("#"),jp("#","search","hash",a)));let i=t===""||a.pathname==="",s=i?"/":a.pathname,u;if(s==null)u=r;else{let f=e.length-1;if(!n&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;a.pathname=d.join("/")}u=f>=0?e[f]:"/"}let l=JO(a,u),o=s&&s!=="/"&&s.endsWith("/"),c=(i||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(o||c)&&(l.pathname+="/"),l}const ns=t=>t.join("/").replace(/\/\/+/g,"/"),e6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,r6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function n6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TC=["post","put","patch","delete"];new Set(TC);const a6=["get",...TC];new Set(a6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dc.apply(this,arguments)}const k0=G.createContext(null),i6=G.createContext(null),vo=G.createContext(null),dh=G.createContext(null),go=G.createContext({outlet:null,matches:[],isDataRoute:!1}),MC=G.createContext(null);function s6(t,e){let{relative:r}=e===void 0?{}:e;Xc()||Tr(!1);let{basename:n,navigator:a}=G.useContext(vo),{hash:i,pathname:s,search:u}=PC(t,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:ns([n,s])),a.createHref({pathname:l,search:u,hash:i})}function Xc(){return G.useContext(dh)!=null}function mh(){return Xc()||Tr(!1),G.useContext(dh).location}function IC(t){G.useContext(vo).static||G.useLayoutEffect(t)}function o6(){let{isDataRoute:t}=G.useContext(go);return t?b6():u6()}function u6(){Xc()||Tr(!1);let t=G.useContext(k0),{basename:e,future:r,navigator:n}=G.useContext(vo),{matches:a}=G.useContext(go),{pathname:i}=mh(),s=JSON.stringify(DC(a,r.v7_relativeSplatPath)),u=G.useRef(!1);return IC(()=>{u.current=!0}),G.useCallback(function(o,c){if(c===void 0&&(c={}),!u.current)return;if(typeof o=="number"){n.go(o);return}let f=CC(o,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ns([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,i,t])}function PC(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=G.useContext(vo),{matches:a}=G.useContext(go),{pathname:i}=mh(),s=JSON.stringify(DC(a,n.v7_relativeSplatPath));return G.useMemo(()=>CC(t,JSON.parse(s),i,r==="path"),[t,s,i,r])}function l6(t,e){return c6(t,e)}function c6(t,e,r,n){Xc()||Tr(!1);let{navigator:a}=G.useContext(vo),{matches:i}=G.useContext(go),s=i[i.length-1],u=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let o=mh(),c;if(e){var f;let T=typeof e=="string"?Xu(e):e;l==="/"||(f=T.pathname)!=null&&f.startsWith(l)||Tr(!1),c=T}else c=o;let d=c.pathname||"/",m=d;if(l!=="/"){let T=l.replace(/^\//,"").split("/");m="/"+d.replace(/^\//,"").split("/").slice(T.length).join("/")}let h=BO(t,{pathname:m}),v=p6(h&&h.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:ns([l,a.encodeLocation?a.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ns([l,a.encodeLocation?a.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,r,n);return e&&v?G.createElement(dh.Provider,{value:{location:Dc({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Hi.Pop}},v):v}function f6(){let t=x6(),e=n6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),r?G.createElement("pre",{style:a},r):null,null)}const d6=G.createElement(f6,null);class m6 extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?G.createElement(go.Provider,{value:this.props.routeContext},G.createElement(MC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h6(t){let{routeContext:e,match:r,children:n}=t,a=G.useContext(k0);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),G.createElement(go.Provider,{value:e},n)}function p6(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,u=(a=r)==null?void 0:a.errors;if(u!=null){let c=s.findIndex(f=>f.route.id&&(u==null?void 0:u[f.route.id])!==void 0);c>=0||Tr(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,o=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(o=c),f.route.id){let{loaderData:d,errors:m}=r,h=f.route.loader&&d[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||h){l=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((c,f,d)=>{let m,h=!1,v=null,T=null;r&&(m=u&&f.route.id?u[f.route.id]:void 0,v=f.route.errorElement||d6,l&&(o<0&&d===0?(w6("route-fallback"),h=!0,T=null):o===d&&(h=!0,T=f.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,d+1)),C=()=>{let _;return m?_=v:h?_=T:f.route.Component?_=G.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,G.createElement(h6,{match:f,routeContext:{outlet:c,matches:S,isDataRoute:r!=null},children:_})};return r&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?G.createElement(m6,{location:r.location,revalidation:r.revalidation,component:v,error:m,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):C()},null)}var FC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FC||{}),RC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(RC||{});function v6(t){let e=G.useContext(k0);return e||Tr(!1),e}function g6(t){let e=G.useContext(i6);return e||Tr(!1),e}function y6(t){let e=G.useContext(go);return e||Tr(!1),e}function OC(t){let e=y6(),r=e.matches[e.matches.length-1];return r.route.id||Tr(!1),r.route.id}function x6(){var t;let e=G.useContext(MC),r=g6(),n=OC();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function b6(){let{router:t}=v6(FC.UseNavigateStable),e=OC(RC.UseNavigateStable),r=G.useRef(!1);return IC(()=>{r.current=!0}),G.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Dc({fromRouteId:e},i)))},[t,e])}const xw={};function w6(t,e,r){xw[t]||(xw[t]=!0)}function N6(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wt(t){Tr(!1)}function _6(t){let{basename:e="/",children:r=null,location:n,navigationType:a=Hi.Pop,navigator:i,static:s=!1,future:u}=t;Xc()&&Tr(!1);let l=e.replace(/^\/*/,"/"),o=G.useMemo(()=>({basename:l,navigator:i,static:s,future:Dc({v7_relativeSplatPath:!1},u)}),[l,u,i,s]);typeof n=="string"&&(n=Xu(n));let{pathname:c="/",search:f="",hash:d="",state:m=null,key:h="default"}=n,v=G.useMemo(()=>{let T=j0(c,l);return T==null?null:{location:{pathname:T,search:f,hash:d,state:m,key:h},navigationType:a}},[l,c,f,d,m,h,a]);return v==null?null:G.createElement(vo.Provider,{value:o},G.createElement(dh.Provider,{children:r,value:v}))}function E6(t){let{children:e,location:r}=t;return l6(Kv(e),r)}new Promise(()=>{});function Kv(t,e){e===void 0&&(e=[]);let r=[];return G.Children.forEach(t,(n,a)=>{if(!G.isValidElement(n))return;let i=[...e,a];if(n.type===G.Fragment){r.push.apply(r,Kv(n.props.children,i));return}n.type!==wt&&Tr(!1),!n.props.index||!n.props.children||Tr(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Kv(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jv(){return Jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jv.apply(this,arguments)}function S6(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function A6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function D6(t,e){return t.button===0&&(!e||e==="_self")&&!A6(t)}const C6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T6="6";try{window.__reactRouterVersion=T6}catch{}const M6="startTransition",bw=wF[M6];function I6(t){let{basename:e,children:r,future:n,window:a}=t,i=G.useRef();i.current==null&&(i.current=FO({window:a,v5Compat:!0}));let s=i.current,[u,l]=G.useState({action:s.action,location:s.location}),{v7_startTransition:o}=n||{},c=G.useCallback(f=>{o&&bw?bw(()=>l(f)):l(f)},[l,o]);return G.useLayoutEffect(()=>s.listen(c),[s,c]),G.useEffect(()=>N6(n),[n]),G.createElement(_6,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:s,future:n})}const P6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R6=G.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:u,target:l,to:o,preventScrollReset:c,viewTransition:f}=e,d=S6(e,C6),{basename:m}=G.useContext(vo),h,v=!1;if(typeof o=="string"&&F6.test(o)&&(h=o,P6))try{let _=new URL(window.location.href),M=o.startsWith("//")?new URL(_.protocol+o):new URL(o),y=j0(M.pathname,m);M.origin===_.origin&&y!=null?o=y+M.search+M.hash:v=!0}catch{}let T=s6(o,{relative:a}),S=O6(o,{replace:s,state:u,target:l,preventScrollReset:c,relative:a,viewTransition:f});function C(_){n&&n(_),_.defaultPrevented||S(_)}return G.createElement("a",Jv({},d,{href:h||T,onClick:v||i?n:C,ref:r,target:l}))});var ww;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ww||(ww={}));var Nw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nw||(Nw={}));function O6(t,e){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:u}=e===void 0?{}:e,l=o6(),o=mh(),c=PC(t,{relative:s});return G.useCallback(f=>{if(D6(f,r)){f.preventDefault();let d=n!==void 0?n:um(o)===um(c);l(t,{replace:d,state:a,preventScrollReset:i,relative:s,viewTransition:u})}},[o,l,c,n,a,r,t,i,s,u])}function B6(){const t=[{title:"1. Root of Equation",topics:[{id:"bisection",name:"Bisection Method",path:"/bisection"},{id:"falseposition",name:"False Position Method",path:"/falseposition"},{id:"onepoint",name:"One-Point Iteration",path:"/onepoint"},{id:"taylor",name:"Taylor Series",path:"/taylor"},{id:"newtonraphson",name:"Newton–Raphson Method",path:"/newtonraphson"},{id:"secant",name:"Secant Method",path:"/secant"}]},{title:"2. Linear System",topics:[{id:"cramer",name:"Cramer’s Rule",path:"/cramer"},{id:"gaussian",name:"Gaussian Elimination Method",path:"/gaussian"},{id:"gaussjordan",name:"Gauss–Jordan Method",path:"/gaussjordan"},{id:"matrixinversion",name:"Matrix Inversion Method",path:"/matrixinversion"},{id:"ludecomposition",name:"LU Decomposition",path:"/ludecomposition"},{id:"cholesky",name:"Cholesky Decomposition",path:"/cholesky"},{id:"jacobi",name:"Jacobi Iteration Method",path:"/jacobi"},{id:"gaussseidel",name:"Gauss–Seidel Iteration Method",path:"/gaussseidel"},{id:"conjugategradient",name:"Conjugate Gradient Method",path:"/conjugategradient"}]},{title:"3. Interpolation",topics:[{id:"lagrangeinterp",name:"Lagrange Interpolation",path:"/lagrangeinterp"},{id:"linearinterp",name:"Linear Interpolation",path:"/linearinterp"},{id:"quadraticinterp",name:"Quadratic Interpolation",path:"/quadraticinterp"},{id:"polynomialinterp",name:"Polynomial Interpolation",path:"/polynomialinterp"},{id:"linearspline",name:"Linear Spline",path:"/linearspline"},{id:"quadraticspline",name:"Quadratic Spline",path:"/quadraticspline"},{id:"cubicspline",name:"Cubic Spline",path:"/cubicspline"}]},{title:"4. Regression",topics:[{id:"singlelinear",name:"Single Linear Regression",path:"/singlelinear"},{id:"multiplelinear",name:"Multiple Linear Regression",path:"/multiplelinear"},{id:"polynomialreg",name:"Polynomial Regression",path:"/polynomialreg"},{id:"nonlinearreg",name:"Nonlinear Regression",path:"/nonlinearreg"}]},{title:"5. Integration",topics:[{id:"singletrapezoidal",name:"Single Trapezoidal Rule",path:"/singletrapezoidal"},{id:"compositetrapezoidal",name:"Composite Trapezoidal Rule",path:"/compositetrapezoidal"},{id:"simpsonsrule",name:"Simpson’s Rule",path:"/simpsonsrule"},{id:"compositesimpson",name:"Composite Simpson’s Rule",path:"/compositesimpson"}]},{title:"6. Differentiation",topics:[{id:"firstdivided",name:"First Divided-Difference",path:"/firstdivided"},{id:"seconddivided",name:"Second Divided-Difference",path:"/seconddivided"},{id:"forwarddivided",name:"Forward Divided-Difference",path:"/forwarddivided"},{id:"backwarddivided",name:"Backward Divided-Difference",path:"/backwarddivided"},{id:"centraldivided",name:"Central Divided-Difference",path:"/centraldivided"}]}];return p.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center p-6 bg-slate-900",children:[p.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-8 text-center fade-in",children:"Numerical Methods"}),p.jsx("div",{className:"flex justify-center items-center w-full",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:t.map(e=>p.jsxs("div",{className:`bg-slate-800 rounded-xl p-5 shadow-lg border border-cyan-700 w-72\r
                         transform transition-all duration-300 fade-in-delay1\r
                         hover:scale-105 hover:shadow-2xl glow-btn`,children:[p.jsx("h2",{className:"text-lg font-semibold text-cyan-300 mb-3 text-center",children:e.title}),p.jsx("ul",{className:"space-y-2",children:e.topics.map(r=>p.jsx("li",{className:"bg-slate-700 p-2 rounded-md hover:bg-slate-600 transition-colors",children:p.jsx(R6,{to:r.path,className:"block text-center",children:r.name})},r.id))})]},e.title))})})]})}const j6=()=>{};var _w={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},k6=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],u=t[r++],l=((a&7)<<18|(i&63)<<12|(s&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},jC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,u=s?t[a+1]:0,l=a+2<t.length,o=l?t[a+2]:0,c=i>>2,f=(i&3)<<4|u>>4;let d=(u&15)<<2|o>>6,m=o&63;l||(m=64,s||(d=64)),n.push(r[c],r[f],r[d],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):k6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],u=a<t.length?r[t.charAt(a)]:0;++a;const o=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||u==null||o==null||f==null)throw new $6;const d=i<<2|u>>4;if(n.push(d),o!==64){const m=u<<4&240|o>>2;if(n.push(m),f!==64){const h=o<<6&192|f;n.push(h)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L6=function(t){const e=BC(t);return jC.encodeByteArray(e,!0)},lm=function(t){return L6(t).replace(/\./g,"")},z6=function(t){try{return jC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=()=>V6().__FIREBASE_DEFAULTS__,q6=()=>{if(typeof process>"u"||typeof _w>"u")return;const t=_w.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},H6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z6(t[1]);return e&&JSON.parse(e)},$0=()=>{try{return j6()||U6()||q6()||H6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G6=t=>{var e,r;return(r=(e=$0())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},W6=t=>{const e=G6(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},kC=()=>{var t;return(t=$0())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X6(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[lm(JSON.stringify(r)),lm(JSON.stringify(s)),""].join(".")}const rc={};function J6(){const t={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?t.emulator.push(e):t.prod.push(e);return t}function Y6(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Ew=!1;function Z6(t,e){if(typeof window>"u"||typeof document>"u"||!L0(window.location.host)||rc[t]===e||rc[t]||Ew)return;rc[t]=e;function r(d){return`__firebase__banner__${d}`}const n="__firebase__banner",i=J6().prod.length>0;function s(){const d=document.getElementById(n);d&&d.remove()}function u(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,m){d.setAttribute("width","24"),d.setAttribute("id",m),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function o(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Ew=!0,s()},d}function c(d,m){d.setAttribute("id",m),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=Y6(n),m=r("text"),h=document.getElementById(m)||document.createElement("span"),v=r("learnmore"),T=document.getElementById(v)||document.createElement("a"),S=r("preprendIcon"),C=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const _=d.element;u(_),c(T,v);const M=o();l(C,S),_.append(C,h,T,M),document.body.appendChild(_)}i?(h.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,h.innerText="Preview backend running in this workspace."),h.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tB(){var e;const t=(e=$0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rB(){return!tB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nB(){try{return typeof indexedDB=="object"}catch{return!1}}function aB(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="FirebaseError";class Ku extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=iB,Object.setPrototypeOf(this,Ku.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$C.prototype.create)}}class $C{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?sB(i,n):"Error",u=`${this.serviceName}: ${s} (${a}).`;return new Ku(a,u,n)}}function sB(t,e){return t.replace(oB,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const oB=/\{\$([^}]+)}/g;function cm(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(Sw(i)&&Sw(s)){if(!cm(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function Sw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return t&&t._delegate?t._delegate:t}class Cc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Q6;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cB(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&s.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&e(i,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:lB(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lB(t){return t===qs?void 0:t}function cB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new uB(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pt||(Pt={}));const dB={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},mB=Pt.INFO,hB={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},pB=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=hB[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class LC{constructor(e){this.name=e,this._logLevel=mB,this._logHandler=pB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const vB=(t,e)=>e.some(r=>t instanceof r);let Aw,Dw;function gB(){return Aw||(Aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yB(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zC=new WeakMap,Yv=new WeakMap,VC=new WeakMap,kp=new WeakMap,z0=new WeakMap;function xB(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(as(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&zC.set(r,t)}).catch(()=>{}),z0.set(e,t),e}function bB(t){if(Yv.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});Yv.set(t,e)}let Zv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Yv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VC.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return as(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wB(t){Zv=t(Zv)}function NB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call($p(this),e,...r);return VC.set(n,e.sort?e.sort():[e]),as(n)}:yB().includes(t)?function(...e){return t.apply($p(this),e),as(zC.get(this))}:function(...e){return as(t.apply($p(this),e))}}function _B(t){return typeof t=="function"?NB(t):(t instanceof IDBTransaction&&bB(t),vB(t,gB())?new Proxy(t,Zv):t)}function as(t){if(t instanceof IDBRequest)return xB(t);if(kp.has(t))return kp.get(t);const e=_B(t);return e!==t&&(kp.set(t,e),z0.set(e,t)),e}const $p=t=>z0.get(t);function EB(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),u=as(s);return n&&s.addEventListener("upgradeneeded",l=>{n(as(s.result),l.oldVersion,l.newVersion,as(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),u.then(l=>{i&&l.addEventListener("close",()=>i()),a&&l.addEventListener("versionchange",o=>a(o.oldVersion,o.newVersion,o))}).catch(()=>{}),u}const SB=["get","getKey","getAll","getAllKeys","count"],AB=["put","add","delete","clear"],Lp=new Map;function Cw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=AB.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||SB.includes(r)))return;const i=async function(s,...u){const l=this.transaction(s,a?"readwrite":"readonly");let o=l.store;return n&&(o=o.index(u.shift())),(await Promise.all([o[r](...u),a&&l.done]))[0]};return Lp.set(e,i),i}wB(t=>({...t,get:(e,r,n)=>Cw(e,r)||t.get(e,r,n),has:(e,r)=>!!Cw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(CB(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function CB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eg="@firebase/app",Tw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new LC("@firebase/app"),TB="@firebase/app-compat",MB="@firebase/analytics-compat",IB="@firebase/analytics",PB="@firebase/app-check-compat",FB="@firebase/app-check",RB="@firebase/auth",OB="@firebase/auth-compat",BB="@firebase/database",jB="@firebase/data-connect",kB="@firebase/database-compat",$B="@firebase/functions",LB="@firebase/functions-compat",zB="@firebase/installations",VB="@firebase/installations-compat",UB="@firebase/messaging",qB="@firebase/messaging-compat",HB="@firebase/performance",GB="@firebase/performance-compat",WB="@firebase/remote-config",QB="@firebase/remote-config-compat",XB="@firebase/storage",KB="@firebase/storage-compat",JB="@firebase/firestore",YB="@firebase/ai",ZB="@firebase/firestore-compat",e5="firebase",t5="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="[DEFAULT]",r5={[eg]:"fire-core",[TB]:"fire-core-compat",[IB]:"fire-analytics",[MB]:"fire-analytics-compat",[FB]:"fire-app-check",[PB]:"fire-app-check-compat",[RB]:"fire-auth",[OB]:"fire-auth-compat",[BB]:"fire-rtdb",[jB]:"fire-data-connect",[kB]:"fire-rtdb-compat",[$B]:"fire-fn",[LB]:"fire-fn-compat",[zB]:"fire-iid",[VB]:"fire-iid-compat",[UB]:"fire-fcm",[qB]:"fire-fcm-compat",[HB]:"fire-perf",[GB]:"fire-perf-compat",[WB]:"fire-rc",[QB]:"fire-rc-compat",[XB]:"fire-gcs",[KB]:"fire-gcs-compat",[JB]:"fire-fst",[ZB]:"fire-fst-compat",[YB]:"fire-vertex","fire-js":"fire-js",[e5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new Map,n5=new Map,rg=new Map;function Mw(t,e){try{t.container.addComponent(e)}catch(r){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function dm(t){const e=t.name;if(rg.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;rg.set(e,t);for(const r of fm.values())Mw(r,t);for(const r of n5.values())Mw(r,t);return!0}function a5(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function i5(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new $C("app","Firebase",s5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Cc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=t5;function UC(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:tg,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw is.create("bad-app-name",{appName:String(a)});if(r||(r=kC()),!r)throw is.create("no-options");const i=fm.get(a);if(i){if(cm(r,i.options)&&cm(n,i.config))return i;throw is.create("duplicate-app",{appName:a})}const s=new fB(a);for(const l of rg.values())s.addComponent(l);const u=new o5(r,n,s);return fm.set(a,u),u}function l5(t=tg){const e=fm.get(t);if(!e&&t===tg&&kC())return UC();if(!e)throw is.create("no-app",{appName:t});return e}function gu(t,e,r){let n=r5[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const s=[`Unable to register library "${n}" with version "${e}":`];a&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(s.join(" "));return}dm(new Cc(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="firebase-heartbeat-database",f5=1,Tc="firebase-heartbeat-store";let zp=null;function qC(){return zp||(zp=EB(c5,f5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Tc)}catch(r){console.warn(r)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),zp}async function d5(t){try{const r=(await qC()).transaction(Tc),n=await r.objectStore(Tc).get(HC(t));return await r.done,n}catch(e){if(e instanceof Ku)bi.warn(e.message);else{const r=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(r.message)}}}async function Iw(t,e){try{const n=(await qC()).transaction(Tc,"readwrite");await n.objectStore(Tc).put(e,HC(t)),await n.done}catch(r){if(r instanceof Ku)bi.warn(r.message);else{const n=is.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});bi.warn(n.message)}}}function HC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=1024,h5=30;class p5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new g5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Pw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>h5){const s=y5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){bi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Pw(),{heartbeatsToSend:n,unsentEntries:a}=v5(this._heartbeatsCache.heartbeats),i=lm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return bi.warn(r),""}}}function Pw(){return new Date().toISOString().substring(0,10)}function v5(t,e=m5){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),Fw(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Fw(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class g5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nB()?aB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await d5(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Iw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Iw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Fw(t){return lm(JSON.stringify({version:2,heartbeats:t})).length}function y5(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){dm(new Cc("platform-logger",e=>new DB(e),"PRIVATE")),dm(new Cc("heartbeat",e=>new p5(e),"PRIVATE")),gu(eg,Tw,t),gu(eg,Tw,"esm2020"),gu("fire-js","")}x5("");var b5="firebase",w5="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gu(b5,w5,"app");var Rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,GC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,g){function N(){}N.prototype=g.prototype,w.F=g.prototype,w.prototype=new N,w.prototype.constructor=w,w.D=function(E,b,D){for(var I=Array(arguments.length-2),F=2;F<arguments.length;F++)I[F-2]=arguments[F];return g.prototype[b].apply(E,I)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,g,N){N||(N=0);const E=Array(16);if(typeof g=="string")for(var b=0;b<16;++b)E[b]=g.charCodeAt(N++)|g.charCodeAt(N++)<<8|g.charCodeAt(N++)<<16|g.charCodeAt(N++)<<24;else for(b=0;b<16;++b)E[b]=g[N++]|g[N++]<<8|g[N++]<<16|g[N++]<<24;g=w.g[0],N=w.g[1],b=w.g[2];let D=w.g[3],I;I=g+(D^N&(b^D))+E[0]+3614090360&4294967295,g=N+(I<<7&4294967295|I>>>25),I=D+(b^g&(N^b))+E[1]+3905402710&4294967295,D=g+(I<<12&4294967295|I>>>20),I=b+(N^D&(g^N))+E[2]+606105819&4294967295,b=D+(I<<17&4294967295|I>>>15),I=N+(g^b&(D^g))+E[3]+3250441966&4294967295,N=b+(I<<22&4294967295|I>>>10),I=g+(D^N&(b^D))+E[4]+4118548399&4294967295,g=N+(I<<7&4294967295|I>>>25),I=D+(b^g&(N^b))+E[5]+1200080426&4294967295,D=g+(I<<12&4294967295|I>>>20),I=b+(N^D&(g^N))+E[6]+2821735955&4294967295,b=D+(I<<17&4294967295|I>>>15),I=N+(g^b&(D^g))+E[7]+4249261313&4294967295,N=b+(I<<22&4294967295|I>>>10),I=g+(D^N&(b^D))+E[8]+1770035416&4294967295,g=N+(I<<7&4294967295|I>>>25),I=D+(b^g&(N^b))+E[9]+2336552879&4294967295,D=g+(I<<12&4294967295|I>>>20),I=b+(N^D&(g^N))+E[10]+4294925233&4294967295,b=D+(I<<17&4294967295|I>>>15),I=N+(g^b&(D^g))+E[11]+2304563134&4294967295,N=b+(I<<22&4294967295|I>>>10),I=g+(D^N&(b^D))+E[12]+1804603682&4294967295,g=N+(I<<7&4294967295|I>>>25),I=D+(b^g&(N^b))+E[13]+4254626195&4294967295,D=g+(I<<12&4294967295|I>>>20),I=b+(N^D&(g^N))+E[14]+2792965006&4294967295,b=D+(I<<17&4294967295|I>>>15),I=N+(g^b&(D^g))+E[15]+1236535329&4294967295,N=b+(I<<22&4294967295|I>>>10),I=g+(b^D&(N^b))+E[1]+4129170786&4294967295,g=N+(I<<5&4294967295|I>>>27),I=D+(N^b&(g^N))+E[6]+3225465664&4294967295,D=g+(I<<9&4294967295|I>>>23),I=b+(g^N&(D^g))+E[11]+643717713&4294967295,b=D+(I<<14&4294967295|I>>>18),I=N+(D^g&(b^D))+E[0]+3921069994&4294967295,N=b+(I<<20&4294967295|I>>>12),I=g+(b^D&(N^b))+E[5]+3593408605&4294967295,g=N+(I<<5&4294967295|I>>>27),I=D+(N^b&(g^N))+E[10]+38016083&4294967295,D=g+(I<<9&4294967295|I>>>23),I=b+(g^N&(D^g))+E[15]+3634488961&4294967295,b=D+(I<<14&4294967295|I>>>18),I=N+(D^g&(b^D))+E[4]+3889429448&4294967295,N=b+(I<<20&4294967295|I>>>12),I=g+(b^D&(N^b))+E[9]+568446438&4294967295,g=N+(I<<5&4294967295|I>>>27),I=D+(N^b&(g^N))+E[14]+3275163606&4294967295,D=g+(I<<9&4294967295|I>>>23),I=b+(g^N&(D^g))+E[3]+4107603335&4294967295,b=D+(I<<14&4294967295|I>>>18),I=N+(D^g&(b^D))+E[8]+1163531501&4294967295,N=b+(I<<20&4294967295|I>>>12),I=g+(b^D&(N^b))+E[13]+2850285829&4294967295,g=N+(I<<5&4294967295|I>>>27),I=D+(N^b&(g^N))+E[2]+4243563512&4294967295,D=g+(I<<9&4294967295|I>>>23),I=b+(g^N&(D^g))+E[7]+1735328473&4294967295,b=D+(I<<14&4294967295|I>>>18),I=N+(D^g&(b^D))+E[12]+2368359562&4294967295,N=b+(I<<20&4294967295|I>>>12),I=g+(N^b^D)+E[5]+4294588738&4294967295,g=N+(I<<4&4294967295|I>>>28),I=D+(g^N^b)+E[8]+2272392833&4294967295,D=g+(I<<11&4294967295|I>>>21),I=b+(D^g^N)+E[11]+1839030562&4294967295,b=D+(I<<16&4294967295|I>>>16),I=N+(b^D^g)+E[14]+4259657740&4294967295,N=b+(I<<23&4294967295|I>>>9),I=g+(N^b^D)+E[1]+2763975236&4294967295,g=N+(I<<4&4294967295|I>>>28),I=D+(g^N^b)+E[4]+1272893353&4294967295,D=g+(I<<11&4294967295|I>>>21),I=b+(D^g^N)+E[7]+4139469664&4294967295,b=D+(I<<16&4294967295|I>>>16),I=N+(b^D^g)+E[10]+3200236656&4294967295,N=b+(I<<23&4294967295|I>>>9),I=g+(N^b^D)+E[13]+681279174&4294967295,g=N+(I<<4&4294967295|I>>>28),I=D+(g^N^b)+E[0]+3936430074&4294967295,D=g+(I<<11&4294967295|I>>>21),I=b+(D^g^N)+E[3]+3572445317&4294967295,b=D+(I<<16&4294967295|I>>>16),I=N+(b^D^g)+E[6]+76029189&4294967295,N=b+(I<<23&4294967295|I>>>9),I=g+(N^b^D)+E[9]+3654602809&4294967295,g=N+(I<<4&4294967295|I>>>28),I=D+(g^N^b)+E[12]+3873151461&4294967295,D=g+(I<<11&4294967295|I>>>21),I=b+(D^g^N)+E[15]+530742520&4294967295,b=D+(I<<16&4294967295|I>>>16),I=N+(b^D^g)+E[2]+3299628645&4294967295,N=b+(I<<23&4294967295|I>>>9),I=g+(b^(N|~D))+E[0]+4096336452&4294967295,g=N+(I<<6&4294967295|I>>>26),I=D+(N^(g|~b))+E[7]+1126891415&4294967295,D=g+(I<<10&4294967295|I>>>22),I=b+(g^(D|~N))+E[14]+2878612391&4294967295,b=D+(I<<15&4294967295|I>>>17),I=N+(D^(b|~g))+E[5]+4237533241&4294967295,N=b+(I<<21&4294967295|I>>>11),I=g+(b^(N|~D))+E[12]+1700485571&4294967295,g=N+(I<<6&4294967295|I>>>26),I=D+(N^(g|~b))+E[3]+2399980690&4294967295,D=g+(I<<10&4294967295|I>>>22),I=b+(g^(D|~N))+E[10]+4293915773&4294967295,b=D+(I<<15&4294967295|I>>>17),I=N+(D^(b|~g))+E[1]+2240044497&4294967295,N=b+(I<<21&4294967295|I>>>11),I=g+(b^(N|~D))+E[8]+1873313359&4294967295,g=N+(I<<6&4294967295|I>>>26),I=D+(N^(g|~b))+E[15]+4264355552&4294967295,D=g+(I<<10&4294967295|I>>>22),I=b+(g^(D|~N))+E[6]+2734768916&4294967295,b=D+(I<<15&4294967295|I>>>17),I=N+(D^(b|~g))+E[13]+1309151649&4294967295,N=b+(I<<21&4294967295|I>>>11),I=g+(b^(N|~D))+E[4]+4149444226&4294967295,g=N+(I<<6&4294967295|I>>>26),I=D+(N^(g|~b))+E[11]+3174756917&4294967295,D=g+(I<<10&4294967295|I>>>22),I=b+(g^(D|~N))+E[2]+718787259&4294967295,b=D+(I<<15&4294967295|I>>>17),I=N+(D^(b|~g))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+D&4294967295}n.prototype.v=function(w,g){g===void 0&&(g=w.length);const N=g-this.blockSize,E=this.C;let b=this.h,D=0;for(;D<g;){if(b==0)for(;D<=N;)a(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<g;)if(E[b++]=w.charCodeAt(D++),b==this.blockSize){a(this,E),b=0;break}}else for(;D<g;)if(E[b++]=w[D++],b==this.blockSize){a(this,E),b=0;break}}this.h=b,this.o+=g},n.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;g=this.o*8;for(var N=w.length-8;N<w.length;++N)w[N]=g&255,g/=256;for(this.v(w),w=Array(16),g=0,N=0;N<4;++N)for(let E=0;E<32;E+=8)w[g++]=this.g[N]>>>E&255;return w};function i(w,g){var N=u;return Object.prototype.hasOwnProperty.call(N,w)?N[w]:N[w]=g(w)}function s(w,g){this.h=g;const N=[];let E=!0;for(let b=w.length-1;b>=0;b--){const D=w[b]|0;E&&D==g||(N[b]=D,E=!1)}this.g=N}var u={};function l(w){return-128<=w&&w<128?i(w,function(g){return new s([g|0],g<0?-1:0)}):new s([w|0],w<0?-1:0)}function o(w){if(isNaN(w)||!isFinite(w))return f;if(w<0)return T(o(-w));const g=[];let N=1;for(let E=0;w>=N;E++)g[E]=w/N|0,N*=4294967296;return new s(g,0)}function c(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return T(c(w.substring(1),g));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=o(Math.pow(g,8));let E=f;for(let D=0;D<w.length;D+=8){var b=Math.min(8,w.length-D);const I=parseInt(w.substring(D,D+b),g);b<8?(b=o(Math.pow(g,b)),E=E.j(b).add(o(I))):(E=E.j(N),E=E.add(o(I)))}return E}var f=l(0),d=l(1),m=l(16777216);t=s.prototype,t.m=function(){if(v(this))return-T(this).m();let w=0,g=1;for(let N=0;N<this.g.length;N++){const E=this.i(N);w+=(E>=0?E:4294967296+E)*g,g*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(h(this))return"0";if(v(this))return"-"+T(this).toString(w);const g=o(Math.pow(w,6));var N=this;let E="";for(;;){const b=M(N,g).g;N=S(N,b.j(g));let D=((N.g.length>0?N.g[0]:N.h)>>>0).toString(w);if(N=b,h(N))return D+E;for(;D.length<6;)D="0"+D;E=D+E}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function h(w){if(w.h!=0)return!1;for(let g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function v(w){return w.h==-1}t.l=function(w){return w=S(this,w),v(w)?-1:h(w)?0:1};function T(w){const g=w.g.length,N=[];for(let E=0;E<g;E++)N[E]=~w.g[E];return new s(N,~w.h).add(d)}t.abs=function(){return v(this)?T(this):this},t.add=function(w){const g=Math.max(this.g.length,w.g.length),N=[];let E=0;for(let b=0;b<=g;b++){let D=E+(this.i(b)&65535)+(w.i(b)&65535),I=(D>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);E=I>>>16,D&=65535,I&=65535,N[b]=I<<16|D}return new s(N,N[N.length-1]&-2147483648?-1:0)};function S(w,g){return w.add(T(g))}t.j=function(w){if(h(this)||h(w))return f;if(v(this))return v(w)?T(this).j(T(w)):T(T(this).j(w));if(v(w))return T(this.j(T(w)));if(this.l(m)<0&&w.l(m)<0)return o(this.m()*w.m());const g=this.g.length+w.g.length,N=[];for(var E=0;E<2*g;E++)N[E]=0;for(E=0;E<this.g.length;E++)for(let b=0;b<w.g.length;b++){const D=this.i(E)>>>16,I=this.i(E)&65535,F=w.i(b)>>>16,O=w.i(b)&65535;N[2*E+2*b]+=I*O,C(N,2*E+2*b),N[2*E+2*b+1]+=D*O,C(N,2*E+2*b+1),N[2*E+2*b+1]+=I*F,C(N,2*E+2*b+1),N[2*E+2*b+2]+=D*F,C(N,2*E+2*b+2)}for(w=0;w<g;w++)N[w]=N[2*w+1]<<16|N[2*w];for(w=g;w<2*g;w++)N[w]=0;return new s(N,0)};function C(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function _(w,g){this.g=w,this.h=g}function M(w,g){if(h(g))throw Error("division by zero");if(h(w))return new _(f,f);if(v(w))return g=M(T(w),g),new _(T(g.g),T(g.h));if(v(g))return g=M(w,T(g)),new _(T(g.g),g.h);if(w.g.length>30){if(v(w)||v(g))throw Error("slowDivide_ only works with positive integers.");for(var N=d,E=g;E.l(w)<=0;)N=y(N),E=y(E);var b=x(N,1),D=x(E,1);for(E=x(E,2),N=x(N,2);!h(E);){var I=D.add(E);I.l(w)<=0&&(b=b.add(N),D=I),E=x(E,1),N=x(N,1)}return g=S(w,b.j(g)),new _(b,g)}for(b=f;w.l(g)>=0;){for(N=Math.max(1,Math.floor(w.m()/g.m())),E=Math.ceil(Math.log(N)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),D=o(N),I=D.j(g);v(I)||I.l(w)>0;)N-=E,D=o(N),I=D.j(g);h(D)&&(D=d),b=b.add(D),w=S(w,I)}return new _(b,w)}t.B=function(w){return M(this,w).h},t.and=function(w){const g=Math.max(this.g.length,w.g.length),N=[];for(let E=0;E<g;E++)N[E]=this.i(E)&w.i(E);return new s(N,this.h&w.h)},t.or=function(w){const g=Math.max(this.g.length,w.g.length),N=[];for(let E=0;E<g;E++)N[E]=this.i(E)|w.i(E);return new s(N,this.h|w.h)},t.xor=function(w){const g=Math.max(this.g.length,w.g.length),N=[];for(let E=0;E<g;E++)N[E]=this.i(E)^w.i(E);return new s(N,this.h^w.h)};function y(w){const g=w.g.length+1,N=[];for(let E=0;E<g;E++)N[E]=w.i(E)<<1|w.i(E-1)>>>31;return new s(N,w.h)}function x(w,g){const N=g>>5;g%=32;const E=w.g.length-N,b=[];for(let D=0;D<E;D++)b[D]=g>0?w.i(D+N)>>>g|w.i(D+N+1)<<32-g:w.i(D+N);return new s(b,w.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,GC=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=o,s.fromString=c,ss=s}).apply(typeof Rw<"u"?Rw:typeof self<"u"?self:typeof window<"u"?window:{});var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WC,Vl,QC,Md,ng,XC,KC,JC;(function(){var t,e=Object.defineProperty;function r(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gf=="object"&&Gf];for(var R=0;R<A.length;++R){var k=A[R];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=r(this);function a(A,R){if(R)e:{var k=n;A=A.split(".");for(var X=0;X<A.length-1;X++){var de=A[X];if(!(de in k))break e;k=k[de]}A=A[A.length-1],X=k[A],R=R(X),R!=X&&R!=null&&e(k,A,{configurable:!0,writable:!0,value:R})}}a("Symbol.dispose",function(A){return A||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(A){return A||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(A){return A||function(R){var k=[],X;for(X in R)Object.prototype.hasOwnProperty.call(R,X)&&k.push([X,R[X]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},s=this||self;function u(A){var R=typeof A;return R=="object"&&A!=null||R=="function"}function l(A,R,k){return A.call.apply(A.bind,arguments)}function o(A,R,k){return o=l,o.apply(null,arguments)}function c(A,R){var k=Array.prototype.slice.call(arguments,1);return function(){var X=k.slice();return X.push.apply(X,arguments),A.apply(this,X)}}function f(A,R){function k(){}k.prototype=R.prototype,A.Z=R.prototype,A.prototype=new k,A.prototype.constructor=A,A.Ob=function(X,de,ye){for(var Be=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)Be[yt-2]=arguments[yt];return R.prototype[de].apply(X,Be)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?A=>A&&AsyncContext.Snapshot.wrap(A):A=>A;function m(A){const R=A.length;if(R>0){const k=Array(R);for(let X=0;X<R;X++)k[X]=A[X];return k}return[]}function h(A,R){for(let X=1;X<arguments.length;X++){const de=arguments[X];var k=typeof de;if(k=k!="object"?k:de?Array.isArray(de)?"array":k:"null",k=="array"||k=="object"&&typeof de.length=="number"){k=A.length||0;const ye=de.length||0;A.length=k+ye;for(let Be=0;Be<ye;Be++)A[k+Be]=de[Be]}else A.push(de)}}class v{constructor(R,k){this.i=R,this.j=k,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function T(A){s.setTimeout(()=>{throw A},0)}function S(){var A=w;let R=null;return A.g&&(R=A.g,A.g=A.g.next,A.g||(A.h=null),R.next=null),R}class C{constructor(){this.h=this.g=null}add(R,k){const X=_.get();X.set(R,k),this.h?this.h.next=X:this.g=X,this.h=X}}var _=new v(()=>new M,A=>A.reset());class M{constructor(){this.next=this.g=this.h=null}set(R,k){this.h=R,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let y,x=!1,w=new C,g=()=>{const A=Promise.resolve(void 0);y=()=>{A.then(N)}};function N(){for(var A;A=S();){try{A.h.call(A.g)}catch(k){T(k)}var R=_;R.j(A),R.h<100&&(R.h++,A.next=R.g,R.g=A)}x=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(A,R){this.type=A,this.g=this.target=R,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var A=!1,R=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const k=()=>{};s.addEventListener("test",k,R),s.removeEventListener("test",k,R)}catch{}return A}();function I(A){return/^[\s\xa0]*$/.test(A)}function F(A,R){b.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A&&this.init(A,R)}f(F,b),F.prototype.init=function(A,R){const k=this.type=A.type,X=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;this.target=A.target||A.srcElement,this.g=R,R=A.relatedTarget,R||(k=="mouseover"?R=A.fromElement:k=="mouseout"&&(R=A.toElement)),this.relatedTarget=R,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=A.pointerType,this.state=A.state,this.i=A,A.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var O="closure_listenable_"+(Math.random()*1e6|0),P=0;function z(A,R,k,X,de){this.listener=A,this.proxy=null,this.src=R,this.type=k,this.capture=!!X,this.ha=de,this.key=++P,this.da=this.fa=!1}function $(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function L(A,R,k){for(const X in A)R.call(k,A[X],X,A)}function q(A,R){for(const k in A)R.call(void 0,A[k],k,A)}function ae(A){const R={};for(const k in A)R[k]=A[k];return R}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(A,R){let k,X;for(let de=1;de<arguments.length;de++){X=arguments[de];for(k in X)A[k]=X[k];for(let ye=0;ye<j.length;ye++)k=j[ye],Object.prototype.hasOwnProperty.call(X,k)&&(A[k]=X[k])}}function V(A){this.src=A,this.g={},this.h=0}V.prototype.add=function(A,R,k,X,de){const ye=A.toString();A=this.g[ye],A||(A=this.g[ye]=[],this.h++);const Be=ue(A,R,X,de);return Be>-1?(R=A[Be],k||(R.fa=!1)):(R=new z(R,this.src,ye,!!X,de),R.fa=k,A.push(R)),R};function pe(A,R){const k=R.type;if(k in A.g){var X=A.g[k],de=Array.prototype.indexOf.call(X,R,void 0),ye;(ye=de>=0)&&Array.prototype.splice.call(X,de,1),ye&&($(R),A.g[k].length==0&&(delete A.g[k],A.h--))}}function ue(A,R,k,X){for(let de=0;de<A.length;++de){const ye=A[de];if(!ye.da&&ye.listener==R&&ye.capture==!!k&&ye.ha==X)return de}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),H={};function J(A,R,k,X,de){if(Array.isArray(R)){for(let ye=0;ye<R.length;ye++)J(A,R[ye],k,X,de);return null}return k=Oe(k),A&&A[O]?A.J(R,k,u(X)?!!X.capture:!1,de):ee(A,R,k,!1,X,de)}function ee(A,R,k,X,de,ye){if(!R)throw Error("Invalid event type");const Be=u(de)?!!de.capture:!!de;let yt=ke(A);if(yt||(A[fe]=yt=new V(A)),k=yt.add(R,k,X,Be,ye),k.proxy)return k;if(X=ie(),k.proxy=X,X.src=A,X.listener=k,A.addEventListener)D||(de=Be),de===void 0&&(de=!1),A.addEventListener(R.toString(),X,de);else if(A.attachEvent)A.attachEvent(me(R.toString()),X);else if(A.addListener&&A.removeListener)A.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return k}function ie(){function A(k){return R.call(A.src,A.listener,k)}const R=Te;return A}function oe(A,R,k,X,de){if(Array.isArray(R))for(var ye=0;ye<R.length;ye++)oe(A,R[ye],k,X,de);else X=u(X)?!!X.capture:!!X,k=Oe(k),A&&A[O]?(A=A.i,ye=String(R).toString(),ye in A.g&&(R=A.g[ye],k=ue(R,k,X,de),k>-1&&($(R[k]),Array.prototype.splice.call(R,k,1),R.length==0&&(delete A.g[ye],A.h--)))):A&&(A=ke(A))&&(R=A.g[R.toString()],A=-1,R&&(A=ue(R,k,X,de)),(k=A>-1?R[A]:null)&&ve(k))}function ve(A){if(typeof A!="number"&&A&&!A.da){var R=A.src;if(R&&R[O])pe(R.i,A);else{var k=A.type,X=A.proxy;R.removeEventListener?R.removeEventListener(k,X,A.capture):R.detachEvent?R.detachEvent(me(k),X):R.addListener&&R.removeListener&&R.removeListener(X),(k=ke(R))?(pe(k,A),k.h==0&&(k.src=null,R[fe]=null)):$(A)}}}function me(A){return A in H?H[A]:H[A]="on"+A}function Te(A,R){if(A.da)A=!0;else{R=new F(R,this);const k=A.listener,X=A.ha||A.src;A.fa&&ve(A),A=k.call(X,R)}return A}function ke(A){return A=A[fe],A instanceof V?A:null}var ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oe(A){return typeof A=="function"?A:(A[ze]||(A[ze]=function(R){return A.handleEvent(R)}),A[ze])}function $e(){E.call(this),this.i=new V(this),this.M=this,this.G=null}f($e,E),$e.prototype[O]=!0,$e.prototype.removeEventListener=function(A,R,k,X){oe(this,A,R,k,X)};function Q(A,R){var k,X=A.G;if(X)for(k=[];X;X=X.G)k.push(X);if(A=A.M,X=R.type||R,typeof R=="string")R=new b(R,A);else if(R instanceof b)R.target=R.target||A;else{var de=R;R=new b(X,A),K(R,de)}de=!0;let ye,Be;if(k)for(Be=k.length-1;Be>=0;Be--)ye=R.g=k[Be],de=te(ye,X,!0,R)&&de;if(ye=R.g=A,de=te(ye,X,!0,R)&&de,de=te(ye,X,!1,R)&&de,k)for(Be=0;Be<k.length;Be++)ye=R.g=k[Be],de=te(ye,X,!1,R)&&de}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var A=this.i;for(const R in A.g){const k=A.g[R];for(let X=0;X<k.length;X++)$(k[X]);delete A.g[R],A.h--}}this.G=null},$e.prototype.J=function(A,R,k,X){return this.i.add(String(A),R,!1,k,X)},$e.prototype.K=function(A,R,k,X){return this.i.add(String(A),R,!0,k,X)};function te(A,R,k,X){if(R=A.i.g[String(R)],!R)return!0;R=R.concat();let de=!0;for(let ye=0;ye<R.length;++ye){const Be=R[ye];if(Be&&!Be.da&&Be.capture==k){const yt=Be.listener,Pr=Be.ha||Be.src;Be.fa&&pe(A.i,Be),de=yt.call(Pr,X)!==!1&&de}}return de&&!X.defaultPrevented}function ce(A,R){if(typeof A!="function")if(A&&typeof A.handleEvent=="function")A=o(A.handleEvent,A);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:s.setTimeout(A,R||0)}function U(A){A.g=ce(()=>{A.g=null,A.i&&(A.i=!1,U(A))},A.l);const R=A.h;A.h=null,A.m.apply(null,R)}class Y extends E{constructor(R,k){super(),this.m=R,this.l=k,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:U(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(A){E.call(this),this.h=A,this.g={}}f(re,E);var se=[];function le(A){L(A.g,function(R,k){this.g.hasOwnProperty(k)&&ve(R)},A),A.g={}}re.prototype.N=function(){re.Z.N.call(this),le(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=s.JSON.stringify,_e=s.JSON.parse,Se=class{stringify(A){return s.JSON.stringify(A,void 0)}parse(A){return s.JSON.parse(A,void 0)}};function Me(){}function Ae(){}var ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gt(){b.call(this,"d")}f(gt,b);function Ut(){b.call(this,"c")}f(Ut,b);var Ze={},ur=null;function B(){return ur=ur||new $e}Ze.Ia="serverreachability";function ne(A){b.call(this,Ze.Ia,A)}f(ne,b);function he(A){const R=B();Q(R,new ne(R))}Ze.STAT_EVENT="statevent";function De(A,R){b.call(this,Ze.STAT_EVENT,A),this.stat=R}f(De,b);function Ge(A){const R=B();Q(R,new De(R,A))}Ze.Ja="timingevent";function dt(A,R){b.call(this,Ze.Ja,A),this.size=R}f(dt,b);function Ir(A,R){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){A()},R)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function Kh(A,R,k,X,de,ye){A.info(function(){if(A.g)if(ye){var Be="",yt=ye.split("&");for(let er=0;er<yt.length;er++){var Pr=yt[er].split("=");if(Pr.length>1){const zr=Pr[0];Pr=Pr[1];const $a=zr.split("_");Be=$a.length>=2&&$a[1]=="type"?Be+(zr+"="+Pr+"&"):Be+(zr+"=redacted&")}}}else Be=null;else Be=ye;return"XMLHTTP REQ ("+X+") [attempt "+de+"]: "+R+`
`+k+`
`+Be})}function Jh(A,R,k,X,de,ye,Be){A.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+de+"]: "+R+`
`+k+`
`+ye+" "+Be})}function Ci(A,R,k,X){A.info(function(){return"XMLHTTP TEXT ("+R+"): "+Zh(A,k)+(X?" "+X:"")})}function Yh(A,R){A.info(function(){return"TIMEOUT: "+R})}ai.prototype.info=function(){};function Zh(A,R){if(!A.g)return R;if(!R)return null;try{const ye=JSON.parse(R);if(ye){for(A=0;A<ye.length;A++)if(Array.isArray(ye[A])){var k=ye[A];if(!(k.length<2)){var X=k[1];if(Array.isArray(X)&&!(X.length<1)){var de=X[0];if(de!="noop"&&de!="stop"&&de!="close")for(let Be=1;Be<X.length;Be++)X[Be]=""}}}}return ge(ye)}catch{return R}}var Oo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hf;function hl(){}f(hl,Me),hl.prototype.g=function(){return new XMLHttpRequest},hf=new hl;function Bs(A){return encodeURIComponent(String(A))}function ep(A){var R=1;A=A.split(":");const k=[];for(;R>0&&A.length;)k.push(A.shift()),R--;return A.length&&k.push(A.join(":")),k}function ja(A,R,k,X){this.j=A,this.i=R,this.l=k,this.S=X||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pf}function pf(){this.i=null,this.g="",this.h=!1}var vf={},pl={};function vl(A,R,k){A.M=1,A.A=wf(ka(R)),A.u=k,A.R=!0,gf(A,null)}function gf(A,R){A.F=Date.now(),Bo(A),A.B=ka(A.A);var k=A.B,X=A.S;Array.isArray(X)||(X=[String(X)]),k1(k.i,"t",X),A.C=0,k=A.j.L,A.h=new pf,A.g=rb(A.j,k?R:null,!A.u),A.P>0&&(A.O=new Y(o(A.Y,A,A.g),A.P)),R=A.V,k=A.g,X=A.ba;var de="readystatechange";Array.isArray(de)||(de&&(se[0]=de.toString()),de=se);for(let ye=0;ye<de.length;ye++){const Be=J(k,de[ye],X||R.handleEvent,!1,R.h||R);if(!Be)break;R.g[Be.key]=Be}R=A.J?ae(A.J):{},A.u?(A.v||(A.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.B,A.v,A.u,R)):(A.v="GET",A.g.ea(A.B,A.v,null,R)),he(),Kh(A.i,A.v,A.B,A.l,A.S,A.u)}ja.prototype.ba=function(A){A=A.target;const R=this.O;R&&Pi(A)==3?R.j():this.Y(A)},ja.prototype.Y=function(A){try{if(A==this.g)e:{const yt=Pi(this.g),Pr=this.g.ya(),er=this.g.ca();if(!(yt<3)&&(yt!=3||this.g&&(this.h.h||this.g.la()||H1(this.g)))){this.K||yt!=4||Pr==7||(Pr==8||er<=0?he(3):he(2)),gl(this);var R=this.g.ca();this.X=R;var k=tp(this);if(this.o=R==200,Jh(this.i,this.v,this.B,this.l,this.S,yt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var X,de=this.g;if((X=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(X)){var ye=X;break t}}ye=null}if(A=ye)Ci(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zt(this,A);else{this.o=!1,this.m=3,Ge(12),Un(this),js(this);break e}}if(this.R){A=!0;let zr;for(;!this.K&&this.C<k.length;)if(zr=rp(this,k),zr==pl){yt==4&&(this.m=4,Ge(14),A=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(zr==vf){this.m=4,Ge(15),Ci(this.i,this.l,k,"[Invalid Chunk]"),A=!1;break}else Ci(this.i,this.l,zr,null),zt(this,zr);if(yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||k.length!=0||this.h.h||(this.m=1,Ge(16),A=!1),this.o=this.o&&A,!A)Ci(this.i,this.l,k,"[Invalid Chunked Response]"),Un(this),js(this);else if(k.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),lp(Be),Be.P=!0,Ge(11))}}else Ci(this.i,this.l,k,null),zt(this,k);yt==4&&Un(this),this.o&&!this.K&&(yt==4?Y1(this.j,this):(this.o=!1,Bo(this)))}else tF(this.g),R==400&&k.indexOf("Unknown SID")>0?(this.m=3,Ge(12)):(this.m=0,Ge(13)),Un(this),js(this)}}}catch{}finally{}};function tp(A){if(!yf(A))return A.g.la();const R=H1(A.g);if(R==="")return"";let k="";const X=R.length,de=Pi(A.g)==4;if(!A.h.i){if(typeof TextDecoder>"u")return Un(A),js(A),"";A.h.i=new s.TextDecoder}for(let ye=0;ye<X;ye++)A.h.h=!0,k+=A.h.i.decode(R[ye],{stream:!(de&&ye==X-1)});return R.length=0,A.h.g+=k,A.C=0,A.h.g}function yf(A){return A.g?A.v=="GET"&&A.M!=2&&A.j.Aa:!1}function rp(A,R){var k=A.C,X=R.indexOf(`
`,k);return X==-1?pl:(k=Number(R.substring(k,X)),isNaN(k)?vf:(X+=1,X+k>R.length?pl:(R=R.slice(X,X+k),A.C=X+k,R)))}ja.prototype.cancel=function(){this.K=!0,Un(this)};function Bo(A){A.T=Date.now()+A.H,xf(A,A.H)}function xf(A,R){if(A.D!=null)throw Error("WatchDog timer not null");A.D=Ir(o(A.aa,A),R)}function gl(A){A.D&&(s.clearTimeout(A.D),A.D=null)}ja.prototype.aa=function(){this.D=null;const A=Date.now();A-this.T>=0?(Yh(this.i,this.B),this.M!=2&&(he(),Ge(17)),Un(this),this.m=2,js(this)):xf(this,this.T-A)};function js(A){A.j.I==0||A.K||Y1(A.j,A)}function Un(A){gl(A);var R=A.O;R&&typeof R.dispose=="function"&&R.dispose(),A.O=null,le(A.V),A.g&&(R=A.g,A.g=null,R.abort(),R.dispose())}function zt(A,R){try{var k=A.j;if(k.I!=0&&(k.g==A||yl(k.h,A))){if(!A.L&&yl(k.h,A)&&k.I==3){try{var X=k.Ba.g.parse(R)}catch{X=null}if(Array.isArray(X)&&X.length==3){var de=X;if(de[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<A.F)Af(k),Ef(k);else break e;up(k),Ge(18)}}else k.xa=de[1],0<k.xa-k.K&&de[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Ir(o(k.Va,k),6e3));Ti(k.h)<=1&&k.ta&&(k.ta=void 0)}else Ls(k,11)}else if((A.L||k.g==A)&&Af(k),!I(R))for(de=k.Ba.g.parse(R),R=0;R<de.length;R++){let er=de[R];const zr=er[0];if(!(zr<=k.K))if(k.K=zr,er=er[1],k.I==2)if(er[0]=="c"){k.M=er[1],k.ba=er[2];const $a=er[3];$a!=null&&(k.ka=$a,k.j.info("VER="+k.ka));const zs=er[4];zs!=null&&(k.za=zs,k.j.info("SVER="+k.za));const Fi=er[5];Fi!=null&&typeof Fi=="number"&&Fi>0&&(X=1.5*Fi,k.O=X,k.j.info("backChannelRequestTimeoutMs_="+X)),X=k;const Ri=A.g;if(Ri){const Cf=Ri.g?Ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cf){var ye=X.h;ye.g||Cf.indexOf("spdy")==-1&&Cf.indexOf("quic")==-1&&Cf.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(np(ye,ye.h),ye.h=null))}if(X.G){const cp=Ri.g?Ri.g.getResponseHeader("X-HTTP-Session-Id"):null;cp&&(X.wa=cp,ar(X.J,X.G,cp))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-A.F,k.j.info("Handshake RTT: "+k.T+"ms")),X=k;var Be=A;if(X.na=tb(X,X.L?X.ba:null,X.W),Be.L){I1(X.h,Be);var yt=Be,Pr=X.O;Pr&&(yt.H=Pr),yt.D&&(gl(yt),Bo(yt)),X.g=Be}else K1(X);k.i.length>0&&Sf(k)}else er[0]!="stop"&&er[0]!="close"||Ls(k,7);else k.I==3&&(er[0]=="stop"||er[0]=="close"?er[0]=="stop"?Ls(k,7):op(k):er[0]!="noop"&&k.l&&k.l.qa(er),k.A=0)}}he(4)}catch{}}var un=class{constructor(A,R){this.g=A,this.map=R}};function bf(A){this.l=A||10,s.PerformanceNavigationTiming?(A=s.performance.getEntriesByType("navigation"),A=A.length>0&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ks(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Ti(A){return A.h?1:A.g?A.g.size:0}function yl(A,R){return A.h?A.h==R:A.g?A.g.has(R):!1}function np(A,R){A.g?A.g.add(R):A.h=R}function I1(A,R){A.h&&A.h==R?A.h=null:A.g&&A.g.has(R)&&A.g.delete(R)}bf.prototype.cancel=function(){if(this.i=P1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function P1(A){if(A.h!=null)return A.i.concat(A.h.G);if(A.g!=null&&A.g.size!==0){let R=A.i;for(const k of A.g.values())R=R.concat(k.G);return R}return m(A.i)}var F1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UP(A,R){if(A){A=A.split("&");for(let k=0;k<A.length;k++){const X=A[k].indexOf("=");let de,ye=null;X>=0?(de=A[k].substring(0,X),ye=A[k].substring(X+1)):de=A[k],R(de,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Mi(A){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;A instanceof Mi?(this.l=A.l,xl(this,A.j),this.o=A.o,this.g=A.g,bl(this,A.u),this.h=A.h,ap(this,$1(A.i)),this.m=A.m):A&&(R=String(A).match(F1))?(this.l=!1,xl(this,R[1]||"",!0),this.o=wl(R[2]||""),this.g=wl(R[3]||"",!0),bl(this,R[4]),this.h=wl(R[5]||"",!0),ap(this,R[6]||"",!0),this.m=wl(R[7]||"")):(this.l=!1,this.i=new _l(null,this.l))}Mi.prototype.toString=function(){const A=[];var R=this.j;R&&A.push(Nl(R,R1,!0),":");var k=this.g;return(k||R=="file")&&(A.push("//"),(R=this.o)&&A.push(Nl(R,R1,!0),"@"),A.push(Bs(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&A.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&A.push("/"),A.push(Nl(k,k.charAt(0)=="/"?GP:HP,!0))),(k=this.i.toString())&&A.push("?",k),(k=this.m)&&A.push("#",Nl(k,QP)),A.join("")},Mi.prototype.resolve=function(A){const R=ka(this);let k=!!A.j;k?xl(R,A.j):k=!!A.o,k?R.o=A.o:k=!!A.g,k?R.g=A.g:k=A.u!=null;var X=A.h;if(k)bl(R,A.u);else if(k=!!A.h){if(X.charAt(0)!="/")if(this.g&&!this.h)X="/"+X;else{var de=R.h.lastIndexOf("/");de!=-1&&(X=R.h.slice(0,de+1)+X)}if(de=X,de==".."||de==".")X="";else if(de.indexOf("./")!=-1||de.indexOf("/.")!=-1){X=de.lastIndexOf("/",0)==0,de=de.split("/");const ye=[];for(let Be=0;Be<de.length;){const yt=de[Be++];yt=="."?X&&Be==de.length&&ye.push(""):yt==".."?((ye.length>1||ye.length==1&&ye[0]!="")&&ye.pop(),X&&Be==de.length&&ye.push("")):(ye.push(yt),X=!0)}X=ye.join("/")}else X=de}return k?R.h=X:k=A.i.toString()!=="",k?ap(R,$1(A.i)):k=!!A.m,k&&(R.m=A.m),R};function ka(A){return new Mi(A)}function xl(A,R,k){A.j=k?wl(R,!0):R,A.j&&(A.j=A.j.replace(/:$/,""))}function bl(A,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);A.u=R}else A.u=null}function ap(A,R,k){R instanceof _l?(A.i=R,XP(A.i,A.l)):(k||(R=Nl(R,WP)),A.i=new _l(R,A.l))}function ar(A,R,k){A.i.set(R,k)}function wf(A){return ar(A,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),A}function wl(A,R){return A?R?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Nl(A,R,k){return typeof A=="string"?(A=encodeURI(A).replace(R,qP),k&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function qP(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var R1=/[#\/\?@]/g,HP=/[#\?:]/g,GP=/[#\?]/g,WP=/[#\?@]/g,QP=/#/g;function _l(A,R){this.h=this.g=null,this.i=A||null,this.j=!!R}function $s(A){A.g||(A.g=new Map,A.h=0,A.i&&UP(A.i,function(R,k){A.add(decodeURIComponent(R.replace(/\+/g," ")),k)}))}t=_l.prototype,t.add=function(A,R){$s(this),this.i=null,A=jo(this,A);let k=this.g.get(A);return k||this.g.set(A,k=[]),k.push(R),this.h+=1,this};function O1(A,R){$s(A),R=jo(A,R),A.g.has(R)&&(A.i=null,A.h-=A.g.get(R).length,A.g.delete(R))}function B1(A,R){return $s(A),R=jo(A,R),A.g.has(R)}t.forEach=function(A,R){$s(this),this.g.forEach(function(k,X){k.forEach(function(de){A.call(R,de,X,this)},this)},this)};function j1(A,R){$s(A);let k=[];if(typeof R=="string")B1(A,R)&&(k=k.concat(A.g.get(jo(A,R))));else for(A=Array.from(A.g.values()),R=0;R<A.length;R++)k=k.concat(A[R]);return k}t.set=function(A,R){return $s(this),this.i=null,A=jo(this,A),B1(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[R]),this.h+=1,this},t.get=function(A,R){return A?(A=j1(this,A),A.length>0?String(A[0]):R):R};function k1(A,R,k){O1(A,R),k.length>0&&(A.i=null,A.g.set(jo(A,R),m(k)),A.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],R=Array.from(this.g.keys());for(let X=0;X<R.length;X++){var k=R[X];const de=Bs(k);k=j1(this,k);for(let ye=0;ye<k.length;ye++){let Be=de;k[ye]!==""&&(Be+="="+Bs(k[ye])),A.push(Be)}}return this.i=A.join("&")};function $1(A){const R=new _l;return R.i=A.i,A.g&&(R.g=new Map(A.g),R.h=A.h),R}function jo(A,R){return R=String(R),A.j&&(R=R.toLowerCase()),R}function XP(A,R){R&&!A.j&&($s(A),A.i=null,A.g.forEach(function(k,X){const de=X.toLowerCase();X!=de&&(O1(this,X),k1(this,de,k))},A)),A.j=R}function KP(A,R){const k=new ai;if(s.Image){const X=new Image;X.onload=c(Ii,k,"TestLoadImage: loaded",!0,R,X),X.onerror=c(Ii,k,"TestLoadImage: error",!1,R,X),X.onabort=c(Ii,k,"TestLoadImage: abort",!1,R,X),X.ontimeout=c(Ii,k,"TestLoadImage: timeout",!1,R,X),s.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=A}else R(!1)}function JP(A,R){const k=new ai,X=new AbortController,de=setTimeout(()=>{X.abort(),Ii(k,"TestPingServer: timeout",!1,R)},1e4);fetch(A,{signal:X.signal}).then(ye=>{clearTimeout(de),ye.ok?Ii(k,"TestPingServer: ok",!0,R):Ii(k,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(de),Ii(k,"TestPingServer: error",!1,R)})}function Ii(A,R,k,X,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),X(k)}catch{}}function YP(){this.g=new Se}function ip(A){this.i=A.Sb||null,this.h=A.ab||!1}f(ip,Me),ip.prototype.g=function(){return new Nf(this.i,this.h)};function Nf(A,R){$e.call(this),this.H=A,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Nf,$e),t=Nf.prototype,t.open=function(A,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=A,this.D=R,this.readyState=1,Sl(this)},t.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};A&&(R.body=A),(this.H||s).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,El(this)),this.readyState=0},t.Pa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Sl(this)),this.g&&(this.readyState=3,Sl(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;L1(this)}else A.text().then(this.Oa.bind(this),this.ga.bind(this))};function L1(A){A.j.read().then(A.Ma.bind(A)).catch(A.ga.bind(A))}t.Ma=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var R=A.value?A.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!A.done}))&&(this.response=this.responseText+=R)}A.done?El(this):Sl(this),this.readyState==3&&L1(this)}},t.Oa=function(A){this.g&&(this.response=this.responseText=A,El(this))},t.Na=function(A){this.g&&(this.response=A,El(this))},t.ga=function(){this.g&&El(this)};function El(A){A.readyState=4,A.l=null,A.j=null,A.B=null,Sl(A)}t.setRequestHeader=function(A,R){this.A.append(A,R)},t.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],R=this.h.entries();for(var k=R.next();!k.done;)k=k.value,A.push(k[0]+": "+k[1]),k=R.next();return A.join(`\r
`)};function Sl(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function z1(A){let R="";return L(A,function(k,X){R+=X,R+=":",R+=k,R+=`\r
`}),R}function sp(A,R,k){e:{for(X in k){var X=!1;break e}X=!0}X||(k=z1(k),typeof A=="string"?k!=null&&Bs(k):ar(A,R,k))}function vr(A){$e.call(this),this.headers=new Map,this.L=A||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(vr,$e);var ZP=/^https?$/i,eF=["POST","PUT"];t=vr.prototype,t.Fa=function(A){this.H=A},t.ea=function(A,R,k,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);R=R?R.toUpperCase():"GET",this.D=A,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hf.g(),this.g.onreadystatechange=d(o(this.Ca,this));try{this.B=!0,this.g.open(R,String(A),!0),this.B=!1}catch(ye){V1(this,ye);return}if(A=k||"",k=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var de in X)k.set(de,X[de]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const ye of X.keys())k.set(ye,X.get(ye));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(k.keys()).find(ye=>ye.toLowerCase()=="content-type"),de=s.FormData&&A instanceof s.FormData,!(Array.prototype.indexOf.call(eF,R,void 0)>=0)||X||de||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Be]of k)this.g.setRequestHeader(ye,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(A),this.v=!1}catch(ye){V1(this,ye)}};function V1(A,R){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=R,A.o=5,U1(A),_f(A)}function U1(A){A.A||(A.A=!0,Q(A,"complete"),Q(A,"error"))}t.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=A||7,Q(this,"complete"),Q(this,"abort"),_f(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_f(this,!0)),vr.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?q1(this):this.Xa())},t.Xa=function(){q1(this)};function q1(A){if(A.h&&typeof i<"u"){if(A.v&&Pi(A)==4)setTimeout(A.Ca.bind(A),0);else if(Q(A,"readystatechange"),Pi(A)==4){A.h=!1;try{const ye=A.ca();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var k;if(!(k=R)){var X;if(X=ye===0){let Be=String(A.D).match(F1)[1]||null;!Be&&s.self&&s.self.location&&(Be=s.self.location.protocol.slice(0,-1)),X=!ZP.test(Be?Be.toLowerCase():"")}k=X}if(k)Q(A,"complete"),Q(A,"success");else{A.o=6;try{var de=Pi(A)>2?A.g.statusText:""}catch{de=""}A.l=de+" ["+A.ca()+"]",U1(A)}}finally{_f(A)}}}}function _f(A,R){if(A.g){A.m&&(clearTimeout(A.m),A.m=null);const k=A.g;A.g=null,R||Q(A,"ready");try{k.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Pi(A){return A.g?A.g.readyState:0}t.ca=function(){try{return Pi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(A){if(this.g){var R=this.g.responseText;return A&&R.indexOf(A)==0&&(R=R.substring(A.length)),_e(R)}};function H1(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.F){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function tF(A){const R={};A=(A.g&&Pi(A)>=2&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<A.length;X++){if(I(A[X]))continue;var k=ep(A[X]);const de=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ye=R[de]||[];R[de]=ye,ye.push(k)}q(R,function(X){return X.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Al(A,R,k){return k&&k.internalChannelParams&&k.internalChannelParams[A]||R}function G1(A){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Al("failFast",!1,A),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Al("baseRetryDelayMs",5e3,A),this.Za=Al("retryDelaySeedMs",1e4,A),this.Ta=Al("forwardChannelMaxRetries",2,A),this.va=Al("forwardChannelRequestTimeoutMs",2e4,A),this.ma=A&&A.xmlHttpFactory||void 0,this.Ua=A&&A.Rb||void 0,this.Aa=A&&A.useFetchStreams||!1,this.O=void 0,this.L=A&&A.supportsCrossDomainXhr||!1,this.M="",this.h=new bf(A&&A.concurrentRequestLimit),this.Ba=new YP,this.S=A&&A.fastHandshake||!1,this.R=A&&A.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=A&&A.Pb||!1,A&&A.ua&&this.j.ua(),A&&A.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&A&&A.detectBufferingProxy||!1,this.ia=void 0,A&&A.longPollingTimeout&&A.longPollingTimeout>0&&(this.ia=A.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=G1.prototype,t.ka=8,t.I=1,t.connect=function(A,R,k,X){Ge(0),this.W=A,this.H=R||{},k&&X!==void 0&&(this.H.OSID=k,this.H.OAID=X),this.F=this.X,this.J=tb(this,null,this.W),Sf(this)};function op(A){if(W1(A),A.I==3){var R=A.V++,k=ka(A.J);if(ar(k,"SID",A.M),ar(k,"RID",R),ar(k,"TYPE","terminate"),Dl(A,k),R=new ja(A,A.j,R),R.M=2,R.A=wf(ka(k)),k=!1,s.navigator&&s.navigator.sendBeacon)try{k=s.navigator.sendBeacon(R.A.toString(),"")}catch{}!k&&s.Image&&(new Image().src=R.A,k=!0),k||(R.g=rb(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Bo(R)}eb(A)}function Ef(A){A.g&&(lp(A),A.g.cancel(),A.g=null)}function W1(A){Ef(A),A.v&&(s.clearTimeout(A.v),A.v=null),Af(A),A.h.cancel(),A.m&&(typeof A.m=="number"&&s.clearTimeout(A.m),A.m=null)}function Sf(A){if(!ks(A.h)&&!A.m){A.m=!0;var R=A.Ea;y||g(),x||(y(),x=!0),w.add(R,A),A.D=0}}function rF(A,R){return Ti(A.h)>=A.h.j-(A.m?1:0)?!1:A.m?(A.i=R.G.concat(A.i),!0):A.I==1||A.I==2||A.D>=(A.Sa?0:A.Ta)?!1:(A.m=Ir(o(A.Ea,A,R),Z1(A,A.D)),A.D++,!0)}t.Ea=function(A){if(this.m)if(this.m=null,this.I==1){if(!A){this.V=Math.floor(Math.random()*1e5),A=this.V++;const de=new ja(this,this.j,A);let ye=this.o;if(this.U&&(ye?(ye=ae(ye),K(ye,this.U)):ye=this.U),this.u!==null||this.R||(de.J=ye,ye=null),this.S)e:{for(var R=0,k=0;k<this.i.length;k++){t:{var X=this.i[k];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(R+=X,R>4096){R=k;break e}if(R===4096||k===this.i.length-1){R=k+1;break e}}R=1e3}else R=1e3;R=X1(this,de,R),k=ka(this.J),ar(k,"RID",A),ar(k,"CVER",22),this.G&&ar(k,"X-HTTP-Session-Id",this.G),Dl(this,k),ye&&(this.R?R="headers="+Bs(z1(ye))+"&"+R:this.u&&sp(k,this.u,ye)),np(this.h,de),this.Ra&&ar(k,"TYPE","init"),this.S?(ar(k,"$req",R),ar(k,"SID","null"),de.U=!0,vl(de,k,null)):vl(de,k,R),this.I=2}}else this.I==3&&(A?Q1(this,A):this.i.length==0||ks(this.h)||Q1(this))};function Q1(A,R){var k;R?k=R.l:k=A.V++;const X=ka(A.J);ar(X,"SID",A.M),ar(X,"RID",k),ar(X,"AID",A.K),Dl(A,X),A.u&&A.o&&sp(X,A.u,A.o),k=new ja(A,A.j,k,A.D+1),A.u===null&&(k.J=A.o),R&&(A.i=R.G.concat(A.i)),R=X1(A,k,1e3),k.H=Math.round(A.va*.5)+Math.round(A.va*.5*Math.random()),np(A.h,k),vl(k,X,R)}function Dl(A,R){A.H&&L(A.H,function(k,X){ar(R,X,k)}),A.l&&L({},function(k,X){ar(R,X,k)})}function X1(A,R,k){k=Math.min(A.i.length,k);const X=A.l?o(A.l.Ka,A.l,A):null;e:{var de=A.i;let yt=-1;for(;;){const Pr=["count="+k];yt==-1?k>0?(yt=de[0].g,Pr.push("ofs="+yt)):yt=0:Pr.push("ofs="+yt);let er=!0;for(let zr=0;zr<k;zr++){var ye=de[zr].g;const $a=de[zr].map;if(ye-=yt,ye<0)yt=Math.max(0,de[zr].g-100),er=!1;else try{ye="req"+ye+"_"||"";try{var Be=$a instanceof Map?$a:Object.entries($a);for(const[zs,Fi]of Be){let Ri=Fi;u(Fi)&&(Ri=ge(Fi)),Pr.push(ye+zs+"="+encodeURIComponent(Ri))}}catch(zs){throw Pr.push(ye+"type="+encodeURIComponent("_badmap")),zs}}catch{X&&X($a)}}if(er){Be=Pr.join("&");break e}}Be=void 0}return A=A.i.splice(0,k),R.G=A,Be}function K1(A){if(!A.g&&!A.v){A.Y=1;var R=A.Da;y||g(),x||(y(),x=!0),w.add(R,A),A.A=0}}function up(A){return A.g||A.v||A.A>=3?!1:(A.Y++,A.v=Ir(o(A.Da,A),Z1(A,A.A)),A.A++,!0)}t.Da=function(){if(this.v=null,J1(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var A=4*this.T;this.j.info("BP detection timer enabled: "+A),this.B=Ir(o(this.Wa,this),A)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ge(10),Ef(this),J1(this))};function lp(A){A.B!=null&&(s.clearTimeout(A.B),A.B=null)}function J1(A){A.g=new ja(A,A.j,"rpc",A.Y),A.u===null&&(A.g.J=A.o),A.g.P=0;var R=ka(A.na);ar(R,"RID","rpc"),ar(R,"SID",A.M),ar(R,"AID",A.K),ar(R,"CI",A.F?"0":"1"),!A.F&&A.ia&&ar(R,"TO",A.ia),ar(R,"TYPE","xmlhttp"),Dl(A,R),A.u&&A.o&&sp(R,A.u,A.o),A.O&&(A.g.H=A.O);var k=A.g;A=A.ba,k.M=1,k.A=wf(ka(R)),k.u=null,k.R=!0,gf(k,A)}t.Va=function(){this.C!=null&&(this.C=null,Ef(this),up(this),Ge(19))};function Af(A){A.C!=null&&(s.clearTimeout(A.C),A.C=null)}function Y1(A,R){var k=null;if(A.g==R){Af(A),lp(A),A.g=null;var X=2}else if(yl(A.h,R))k=R.G,I1(A.h,R),X=1;else return;if(A.I!=0){if(R.o)if(X==1){k=R.u?R.u.length:0,R=Date.now()-R.F;var de=A.D;X=B(),Q(X,new dt(X,k)),Sf(A)}else K1(A);else if(de=R.m,de==3||de==0&&R.X>0||!(X==1&&rF(A,R)||X==2&&up(A)))switch(k&&k.length>0&&(R=A.h,R.i=R.i.concat(k)),de){case 1:Ls(A,5);break;case 4:Ls(A,10);break;case 3:Ls(A,6);break;default:Ls(A,2)}}}function Z1(A,R){let k=A.Qa+Math.floor(Math.random()*A.Za);return A.isActive()||(k*=2),k*R}function Ls(A,R){if(A.j.info("Error code "+R),R==2){var k=o(A.bb,A),X=A.Ua;const de=!X;X=new Mi(X||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||xl(X,"https"),wf(X),de?KP(X.toString(),k):JP(X.toString(),k)}else Ge(2);A.I=0,A.l&&A.l.pa(R),eb(A),W1(A)}t.bb=function(A){A?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function eb(A){if(A.I=0,A.ja=[],A.l){const R=P1(A.h);(R.length!=0||A.i.length!=0)&&(h(A.ja,R),h(A.ja,A.i),A.h.i.length=0,m(A.i),A.i.length=0),A.l.oa()}}function tb(A,R,k){var X=k instanceof Mi?ka(k):new Mi(k);if(X.g!="")R&&(X.g=R+"."+X.g),bl(X,X.u);else{var de=s.location;X=de.protocol,R=R?R+"."+de.hostname:de.hostname,de=+de.port;const ye=new Mi(null);X&&xl(ye,X),R&&(ye.g=R),de&&bl(ye,de),k&&(ye.h=k),X=ye}return k=A.G,R=A.wa,k&&R&&ar(X,k,R),ar(X,"VER",A.ka),Dl(A,X),X}function rb(A,R,k){if(R&&!A.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=A.Aa&&!A.ma?new vr(new ip({ab:k})):new vr(A.ma),R.Fa(A.L),R}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nb(){}t=nb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Df(){}Df.prototype.g=function(A,R){return new qn(A,R)};function qn(A,R){$e.call(this),this.g=new G1(R),this.l=A,this.h=R&&R.messageUrlParams||null,A=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(A?A["X-WebChannel-Content-Type"]=R.messageContentType:A={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(A?A["X-WebChannel-Client-Profile"]=R.sa:A={"X-WebChannel-Client-Profile":R.sa}),this.g.U=A,(A=R&&R.Qb)&&!I(A)&&(this.g.u=A),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!I(R)&&(this.g.G=R,A=this.h,A!==null&&R in A&&(A=this.h,R in A&&delete A[R])),this.j=new ko(this)}f(qn,$e),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){op(this.g)},qn.prototype.o=function(A){var R=this.g;if(typeof A=="string"){var k={};k.__data__=A,A=k}else this.v&&(k={},k.__data__=ge(A),A=k);R.i.push(new un(R.Ya++,A)),R.I==3&&Sf(R)},qn.prototype.N=function(){this.g.l=null,delete this.j,op(this.g),delete this.g,qn.Z.N.call(this)};function ab(A){gt.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var R=A.__sm__;if(R){e:{for(const k in R){A=k;break e}A=void 0}(this.i=A)&&(A=this.i,R=R!==null&&A in R?R[A]:void 0),this.data=R}else this.data=A}f(ab,gt);function ib(){Ut.call(this),this.status=1}f(ib,Ut);function ko(A){this.g=A}f(ko,nb),ko.prototype.ra=function(){Q(this.g,"a")},ko.prototype.qa=function(A){Q(this.g,new ab(A))},ko.prototype.pa=function(A){Q(this.g,new ib)},ko.prototype.oa=function(){Q(this.g,"b")},Df.prototype.createWebChannel=Df.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,JC=function(){return new Df},KC=function(){return B()},XC=Ze,ng={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oo.NO_ERROR=0,Oo.TIMEOUT=8,Oo.HTTP_ERROR=6,Md=Oo,mf.COMPLETE="complete",QC=mf,Ae.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Vl=Ae,vr.prototype.listenOnce=vr.prototype.K,vr.prototype.getLastError=vr.prototype.Ha,vr.prototype.getLastErrorCode=vr.prototype.ya,vr.prototype.getStatus=vr.prototype.ca,vr.prototype.getResponseJson=vr.prototype.La,vr.prototype.getResponseText=vr.prototype.la,vr.prototype.send=vr.prototype.ea,vr.prototype.setWithCredentials=vr.prototype.Fa,WC=vr}).apply(typeof Gf<"u"?Gf:typeof self<"u"?self:typeof window<"u"?window:{});const Ow="@firebase/firestore",Bw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new LC("@firebase/firestore");function Go(){return uo.logLevel}function Ve(t,...e){if(uo.logLevel<=Pt.DEBUG){const r=e.map(V0);uo.debug(`Firestore (${Ju}): ${t}`,...r)}}function wi(t,...e){if(uo.logLevel<=Pt.ERROR){const r=e.map(V0);uo.error(`Firestore (${Ju}): ${t}`,...r)}}function Pu(t,...e){if(uo.logLevel<=Pt.WARN){const r=e.map(V0);uo.warn(`Firestore (${Ju}): ${t}`,...r)}}function V0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,YC(t,n,r)}function YC(t,e,r){let n=`FIRESTORE (${Ju}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw wi(n),new Error(n)}function Gt(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||YC(e,a,n)}function ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Ku{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(mn.UNAUTHENTICATED))}shutdown(){}}class _5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class E5{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Gt(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new os;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new os,e.enqueueRetryable(()=>a(this.currentUser))};const s=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},u=l=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new os)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Gt(typeof n.accessToken=="string",31837,{l:n}),new ZC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class S5{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class A5{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new S5(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D5{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,i5(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Gt(this.o===void 0,3512);const n=i=>{i.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,Ve("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const a=i=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Gt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new jw(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=C5(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%62))}return n}}function Et(t,e){return t<e?-1:t>e?1:0}function ag(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),i=e.charAt(n);if(a!==i)return Vp(a)===Vp(i)?Et(a,i):Vp(a)?1:-1}return Et(t.length,e.length)}const T5=55296,M5=57343;function Vp(t){const e=t.charCodeAt(0);return e>=T5&&e<=M5}function Fu(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="__name__";class Va{constructor(e,r,n){r===void 0?r=0:r>e.length&&rt(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&rt(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Va.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Va?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=Va.compareSegments(e.get(a),r.get(a));if(i!==0)return i}return Et(e.length,r.length)}static compareSegments(e,r){const n=Va.isNumericId(e),a=Va.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Va.extractNumericId(e).compare(Va.extractNumericId(r)):ag(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ss.fromString(e.substring(4,e.length-2))}}class rr extends Va{construct(e,r,n){return new rr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Le(we.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new rr(r)}static emptyPath(){return new rr([])}}const I5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends Va{construct(e,r,n){return new Zr(e,r,n)}static isValidIdentifier(e){return I5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kw}static keyField(){return new Zr([kw])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new Le(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;a<e.length;){const u=e[a];if(u==="\\"){if(a+1===e.length)throw new Le(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Le(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,a+=2}else u==="`"?(s=!s,a++):u!=="."||s?(n+=u,a++):(i(),a++)}if(i(),s)throw new Le(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(r)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(rr.fromString(e))}static fromName(e){return new Je(rr.fromString(e).popFirst(5))}static empty(){return new Je(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return rr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new rr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e,r){if(!r)throw new Le(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P5(t,e,r,n){if(e===!0&&n===!0)throw new Le(we.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function $w(t){if(!Je.isDocumentKey(t))throw new Le(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Lw(t){if(Je.isDocumentKey(t))throw new Le(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function hh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":rt(12329,{type:typeof t})}function Mc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Le(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=hh(t);throw new Le(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){const r={typeString:t};return e&&(r.value=e),r}function Kc(t,e){if(!tT(t))throw new Le(we.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const s=t[n];if(a&&typeof s!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(i!==void 0&&s!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new Le(we.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=-62135596800,Vw=1e6;class sr{static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Vw);return new sr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<zw)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vw}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kc(e,sr._jsonSchema))return new sr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sr._jsonSchemaVersion="firestore/timestamp/1.0",sr._jsonSchema={type:Cr("string",sr._jsonSchemaVersion),seconds:Cr("number"),nanoseconds:Cr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new sr(0,0))}static max(){return new ot(new sr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=-1;function F5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=ot.fromTimestamp(n===1e9?new sr(r+1,0):new sr(r,n));return new ds(a,Je.empty(),e)}function R5(t){return new ds(t.readTime,t.key,Ic)}class ds{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ds(ot.min(),Je.empty(),Ic)}static max(){return new ds(ot.max(),Je.empty(),Ic)}}function O5(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Je.comparator(t.documentKey,e.documentKey),r!==0?r:Et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==B5)throw t;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ne((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ne?r:Ne.resolve(r)}catch(r){return Ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.reject(r)}static resolve(e){return new Ne((r,n)=>{r(e)})}static reject(e){return new Ne((r,n)=>{n(e)})}static waitFor(e){return new Ne((r,n)=>{let a=0,i=0,s=!1;e.forEach(u=>{++a,u.next(()=>{++i,s&&i===a&&r()},l=>n(l))}),s=!0,i===a&&r()})}static or(e){let r=Ne.resolve(!1);for(const n of e)r=r.next(a=>a?Ne.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,i)=>{n.push(r.call(this,a,i))}),this.waitFor(n)}static mapArray(e,r){return new Ne((n,a)=>{const i=e.length,s=new Array(i);let u=0;for(let l=0;l<i;l++){const o=l;r(e[o]).next(c=>{s[o]=c,++u,u===i&&n(s)},c=>a(c))}})}static doWhile(e,r){return new Ne((n,a)=>{const i=()=>{e()===!0?r().next(()=>{i()},a):n()};i()})}}function k5(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Zu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ph.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-1;function vh(t){return t==null}function mm(t){return t===0&&1/t==-1/0}function $5(t){return typeof t=="number"&&Number.isInteger(t)&&!mm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="";function L5(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Uw(e)),e=z5(t.get(r),e);return Uw(e)}function z5(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case rT:r+="";break;default:r+=i}}return r}function Uw(t){return t+rT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function yo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function nT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,r){this.comparator=e,this.root=r||Yr.EMPTY}insert(e,r){return new pr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wf(this.root,e,this.comparator,!0)}}class Wf{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??Yr.RED,this.left=a??Yr.EMPTY,this.right=i??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new Yr(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Yr.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,r,n,a,i){return this}insert(e,r,n){return new Yr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Hw(this.data.getIterator())}getIteratorFrom(e){return new Hw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Br(this.comparator);return r.data=e,r}}class Hw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new Sa([])}unionWith(e){let r=new Br(Zr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Sa(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Fu(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aT("Invalid base64 string: "+i):i}}(e);return new sn(r)}static fromUint8Array(e){const r=function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i}(e);return new sn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const V5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(Gt(!!t,39018),typeof t=="string"){let e=0;const r=V5.exec(t);if(Gt(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:wr(t.seconds),nanos:wr(t.nanos)}}function wr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="server_timestamp",sT="__type__",oT="__previous_value__",uT="__local_write_time__";function H0(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[sT])==null?void 0:n.stringValue)===iT}function gh(t){const e=t.mapValue.fields[oT];return H0(e)?gh(e):e}function Pc(t){const e=ms(t.mapValue.fields[uT].timestampValue);return new sr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,r,n,a,i,s,u,l,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=o,this.isUsingEmulator=c}}const hm="(default)";class Fc{constructor(e,r){this.projectId=e,this.database=r||hm}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===hm}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="__type__",q5="__max__",Qf={mapValue:{}},cT="__vector__",pm="value";function ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?H0(t)?4:G5(t)?9007199254740991:H5(t)?10:11:rt(28295,{value:t})}function Ya(t,e){if(t===e)return!0;const r=ps(t);if(r!==ps(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pc(t).isEqual(Pc(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=ms(a.timestampValue),u=ms(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return hs(a.bytesValue).isEqual(hs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return wr(a.geoPointValue.latitude)===wr(i.geoPointValue.latitude)&&wr(a.geoPointValue.longitude)===wr(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return wr(a.integerValue)===wr(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=wr(a.doubleValue),u=wr(i.doubleValue);return s===u?mm(s)===mm(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return Fu(t.arrayValue.values||[],e.arrayValue.values||[],Ya);case 10:case 11:return function(a,i){const s=a.mapValue.fields||{},u=i.mapValue.fields||{};if(qw(s)!==qw(u))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(u[l]===void 0||!Ya(s[l],u[l])))return!1;return!0}(t,e);default:return rt(52216,{left:t})}}function Rc(t,e){return(t.values||[]).find(r=>Ya(r,e))!==void 0}function Ru(t,e){if(t===e)return 0;const r=ps(t),n=ps(e);if(r!==n)return Et(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Et(t.booleanValue,e.booleanValue);case 2:return function(i,s){const u=wr(i.integerValue||i.doubleValue),l=wr(s.integerValue||s.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(t,e);case 3:return Gw(t.timestampValue,e.timestampValue);case 4:return Gw(Pc(t),Pc(e));case 5:return ag(t.stringValue,e.stringValue);case 6:return function(i,s){const u=hs(i),l=hs(s);return u.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),l=s.split("/");for(let o=0;o<u.length&&o<l.length;o++){const c=Et(u[o],l[o]);if(c!==0)return c}return Et(u.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Et(wr(i.latitude),wr(s.latitude));return u!==0?u:Et(wr(i.longitude),wr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ww(t.arrayValue,e.arrayValue);case 10:return function(i,s){var d,m,h,v;const u=i.fields||{},l=s.fields||{},o=(d=u[pm])==null?void 0:d.arrayValue,c=(m=l[pm])==null?void 0:m.arrayValue,f=Et(((h=o==null?void 0:o.values)==null?void 0:h.length)||0,((v=c==null?void 0:c.values)==null?void 0:v.length)||0);return f!==0?f:Ww(o,c)}(t.mapValue,e.mapValue);case 11:return function(i,s){if(i===Qf.mapValue&&s===Qf.mapValue)return 0;if(i===Qf.mapValue)return 1;if(s===Qf.mapValue)return-1;const u=i.fields||{},l=Object.keys(u),o=s.fields||{},c=Object.keys(o);l.sort(),c.sort();for(let f=0;f<l.length&&f<c.length;++f){const d=ag(l[f],c[f]);if(d!==0)return d;const m=Ru(u[l[f]],o[c[f]]);if(m!==0)return m}return Et(l.length,c.length)}(t.mapValue,e.mapValue);default:throw rt(23264,{he:r})}}function Gw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Et(t,e);const r=ms(t),n=ms(e),a=Et(r.seconds,n.seconds);return a!==0?a:Et(r.nanos,n.nanos)}function Ww(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Ru(r[a],n[a]);if(i)return i}return Et(r.length,n.length)}function Ou(t){return ig(t)}function ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ms(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return hs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Je.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=ig(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const s of n)i?i=!1:a+=",",a+=`${s}:${ig(r.fields[s])}`;return a+"}"}(t.mapValue):rt(61005,{value:t})}function Id(t){switch(ps(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gh(t);return e?16+Id(e):16;case 5:return 2*t.stringValue.length;case 6:return hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,i)=>a+Id(i),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return yo(n.fields,(i,s)=>{a+=i.length+Id(s)}),a}(t.mapValue);default:throw rt(13486,{value:t})}}function Qw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sg(t){return!!t&&"integerValue"in t}function G0(t){return!!t&&"arrayValue"in t}function Xw(t){return!!t&&"nullValue"in t}function Kw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pd(t){return!!t&&"mapValue"in t}function H5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[lT])==null?void 0:n.stringValue)===cT}function nc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=nc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=nc(t.arrayValue.values[r]);return e}return{...t}}function G5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===q5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.value=e}static empty(){return new oa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Pd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(r)}setAll(e){let r=Zr.emptyPath(),n={},a=[];e.forEach((s,u)=>{if(!r.isImmediateParentOf(u)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=u.popLast()}s?n[u.lastSegment()]=nc(s):a.push(u.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());Pd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ya(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];Pd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){yo(r,(a,i)=>e[a]=i);for(const a of n)delete e[a]}clone(){return new oa(nc(this.value))}}function fT(t){const e=[];return yo(t.fields,(r,n)=>{const a=new Zr([r]);if(Pd(n)){const i=fT(n.mapValue).fields;if(i.length===0)e.push(a);else for(const s of i)e.push(a.child(s))}else e.push(a)}),new Sa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,r,n,a,i,s,u){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new pn(e,0,ot.min(),ot.min(),ot.min(),oa.empty(),0)}static newFoundDocument(e,r,n,a){return new pn(e,1,r,ot.min(),n,a,0)}static newNoDocument(e,r){return new pn(e,2,r,ot.min(),ot.min(),oa.empty(),0)}static newUnknownDocument(e,r){return new pn(e,3,r,ot.min(),ot.min(),oa.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,r){this.position=e,this.inclusive=r}}function Jw(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],s=t.position[a];if(i.field.isKeyField()?n=Je.comparator(Je.fromName(s.referenceValue),r.key):n=Ru(s,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function Yw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ya(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,r="asc"){this.field=e,this.dir=r}}function W5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class Dr extends dT{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new X5(e,r,n):r==="array-contains"?new Y5(e,n):r==="in"?new Z5(e,n):r==="not-in"?new ej(e,n):r==="array-contains-any"?new tj(e,n):new Dr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new K5(e,n):new J5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Ru(r,this.value)):r!==null&&ps(this.value)===ps(r)&&this.matchesComparison(Ru(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ma extends dT{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Ma(e,r)}matches(e){return mT(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mT(t){return t.op==="and"}function hT(t){return Q5(t)&&mT(t)}function Q5(t){for(const e of t.filters)if(e instanceof Ma)return!1;return!0}function og(t){if(t instanceof Dr)return t.field.canonicalString()+t.op.toString()+Ou(t.value);if(hT(t))return t.filters.map(e=>og(e)).join(",");{const e=t.filters.map(r=>og(r)).join(",");return`${t.op}(${e})`}}function pT(t,e){return t instanceof Dr?function(n,a){return a instanceof Dr&&n.op===a.op&&n.field.isEqual(a.field)&&Ya(n.value,a.value)}(t,e):t instanceof Ma?function(n,a){return a instanceof Ma&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((i,s,u)=>i&&pT(s,a.filters[u]),!0):!1}(t,e):void rt(19439)}function vT(t){return t instanceof Dr?function(r){return`${r.field.canonicalString()} ${r.op} ${Ou(r.value)}`}(t):t instanceof Ma?function(r){return r.op.toString()+" {"+r.getFilters().map(vT).join(" ,")+"}"}(t):"Filter"}class X5 extends Dr{constructor(e,r,n){super(e,r,n),this.key=Je.fromName(n.referenceValue)}matches(e){const r=Je.comparator(e.key,this.key);return this.matchesComparison(r)}}class K5 extends Dr{constructor(e,r){super(e,"in",r),this.keys=gT("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class J5 extends Dr{constructor(e,r){super(e,"not-in",r),this.keys=gT("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function gT(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>Je.fromName(n.referenceValue))}class Y5 extends Dr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return G0(r)&&Rc(r.arrayValue,this.value)}}class Z5 extends Dr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Rc(this.value.arrayValue,r)}}class ej extends Dr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Rc(this.value.arrayValue,r)}}class tj extends Dr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!G0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Rc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,r=null,n=[],a=[],i=null,s=null,u=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=s,this.endAt=u,this.Te=null}}function Zw(t,e=null,r=[],n=[],a=null,i=null,s=null){return new rj(t,e,r,n,a,i,s)}function W0(t){const e=ct(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>og(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),vh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ou(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ou(n)).join(",")),e.Te=r}return e.Te}function Q0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!W5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!pT(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yw(t.startAt,e.startAt)&&Yw(t.endAt,e.endAt)}function ug(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,r=null,n=[],a=[],i=null,s="F",u=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=u,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nj(t,e,r,n,a,i,s,u){return new el(t,e,r,n,a,i,s,u)}function yT(t){return new el(t)}function eN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xT(t){return t.collectionGroup!==null}function ac(t){const e=ct(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new Br(Zr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(o=>{o.isInequality()&&(u=u.add(o.field))})}),u})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Oc(i,n))}),r.has(Zr.keyField().canonicalString())||e.Ie.push(new Oc(Zr.keyField(),n))}return e.Ie}function Wa(t){const e=ct(t);return e.Ee||(e.Ee=aj(e,ac(t))),e.Ee}function aj(t,e){if(t.limitType==="F")return Zw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new Oc(a.field,i)});const r=t.endAt?new vm(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new vm(t.startAt.position,t.startAt.inclusive):null;return Zw(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function lg(t,e){const r=t.filters.concat([e]);return new el(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function cg(t,e,r){return new el(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function yh(t,e){return Q0(Wa(t),Wa(e))&&t.limitType===e.limitType}function bT(t){return`${W0(Wa(t))}|lt:${t.limitType}`}function Wo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>vT(a)).join(", ")}]`),vh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Ou(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Ou(a)).join(",")),`Target(${n})`}(Wa(t))}; limitType=${t.limitType})`}function xh(t,e){return e.isFoundDocument()&&function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Je.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,a){for(const i of ac(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(s,u,l){const o=Jw(s,u,l);return s.inclusive?o<=0:o<0}(n.startAt,ac(n),a)||n.endAt&&!function(s,u,l){const o=Jw(s,u,l);return s.inclusive?o>=0:o>0}(n.endAt,ac(n),a))}(t,e)}function ij(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wT(t){return(e,r)=>{let n=!1;for(const a of ac(t)){const i=sj(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function sj(t,e,r){const n=t.field.isKeyField()?Je.comparator(e.key,r.key):function(i,s,u){const l=s.data.field(i),o=u.data.field(i);return l!==null&&o!==null?Ru(l,o):rt(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return rt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(r,n)=>{for(const[a,i]of n)e(a,i)})}isEmpty(){return nT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new pr(Je.comparator);function Ni(){return oj}const NT=new pr(Je.comparator);function Ul(...t){let e=NT;for(const r of t)e=e.insert(r.key,r);return e}function _T(t){let e=NT;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ks(){return ic()}function ET(){return ic()}function ic(){return new xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const uj=new pr(Je.comparator),lj=new Br(Je.comparator);function St(...t){let e=lj;for(const r of t)e=e.add(r);return e}const cj=new Br(Et);function fj(){return cj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mm(e)?"-0":e}}function ST(t){return{integerValue:""+t}}function dj(t,e){return $5(e)?ST(e):X0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function mj(t,e,r){return t instanceof Bc?function(a,i){const s={fields:{[sT]:{stringValue:iT},[uT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&H0(i)&&(i=gh(i)),i&&(s.fields[oT]=i),{mapValue:s}}(r,e):t instanceof jc?DT(t,e):t instanceof kc?CT(t,e):function(a,i){const s=AT(a,i),u=tN(s)+tN(a.Ae);return sg(s)&&sg(a.Ae)?ST(u):X0(a.serializer,u)}(t,e)}function hj(t,e,r){return t instanceof jc?DT(t,e):t instanceof kc?CT(t,e):r}function AT(t,e){return t instanceof gm?function(n){return sg(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Bc extends bh{}class jc extends bh{constructor(e){super(),this.elements=e}}function DT(t,e){const r=TT(e);for(const n of t.elements)r.some(a=>Ya(a,n))||r.push(n);return{arrayValue:{values:r}}}class kc extends bh{constructor(e){super(),this.elements=e}}function CT(t,e){let r=TT(e);for(const n of t.elements)r=r.filter(a=>!Ya(a,n));return{arrayValue:{values:r}}}class gm extends bh{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function tN(t){return wr(t.integerValue||t.doubleValue)}function TT(t){return G0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,r){this.field=e,this.transform=r}}function vj(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof jc&&a instanceof jc||n instanceof kc&&a instanceof kc?Fu(n.elements,a.elements,Ya):n instanceof gm&&a instanceof gm?Ya(n.Ae,a.Ae):n instanceof Bc&&a instanceof Bc}(t.transform,e.transform)}class gj{constructor(e,r){this.version=e,this.transformResults=r}}class Qa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Qa}static exists(e){return new Qa(void 0,e)}static updateTime(e){return new Qa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wh{}function MT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new K0(t.key,Qa.none()):new Jc(t.key,t.data,Qa.none());{const r=t.data,n=oa.empty();let a=new Br(Zr.comparator);for(let i of e.fields)if(!a.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),a=a.add(i)}return new bo(t.key,n,new Sa(a.toArray()),Qa.none())}}function yj(t,e,r){t instanceof Jc?function(a,i,s){const u=a.value.clone(),l=nN(a.fieldTransforms,i,s.transformResults);u.setAll(l),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,r):t instanceof bo?function(a,i,s){if(!Fd(a.precondition,i))return void i.convertToUnknownDocument(s.version);const u=nN(a.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(IT(a)),l.setAll(u),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function sc(t,e,r,n){return t instanceof Jc?function(i,s,u,l){if(!Fd(i.precondition,s))return u;const o=i.value.clone(),c=aN(i.fieldTransforms,l,s);return o.setAll(c),s.convertToFoundDocument(s.version,o).setHasLocalMutations(),null}(t,e,r,n):t instanceof bo?function(i,s,u,l){if(!Fd(i.precondition,s))return u;const o=aN(i.fieldTransforms,l,s),c=s.data;return c.setAll(IT(i)),c.setAll(o),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,s,u){return Fd(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(t,e,r)}function xj(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=AT(n.transform,a||null);i!=null&&(r===null&&(r=oa.empty()),r.set(n.field,i))}return r||null}function rN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Fu(n,a,(i,s)=>vj(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jc extends wh{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class bo extends wh{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function IT(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function nN(t,e,r){const n=new Map;Gt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const i=t[a],s=i.transform,u=e.data.field(i.field);n.set(i.field,hj(s,u,r[a]))}return n}function aN(t,e,r){const n=new Map;for(const a of t){const i=a.transform,s=r.data.field(a.field);n.set(a.field,mj(i,s,e))}return n}class K0 extends wh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bj extends wh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&yj(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=sc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=sc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=ET();return this.mutations.forEach(a=>{const i=e.get(a.key),s=i.overlayedDocument;let u=this.applyToLocalView(s,i.mutatedFields);u=r.has(a.key)?null:u;const l=MT(s,u);l!==null&&n.set(a.key,l),s.isValidDocument()||s.convertToNoDocument(ot.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),St())}isEqual(e){return this.batchId===e.batchId&&Fu(this.mutations,e.mutations,(r,n)=>rN(r,n))&&Fu(this.baseMutations,e.baseMutations,(r,n)=>rN(r,n))}}class J0{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Gt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return uj}();const i=e.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,n[s].version);return new J0(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sr,It;function Ej(t){switch(t){case we.OK:return rt(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return rt(15467,{code:t})}}function PT(t){if(t===void 0)return wi("GRPC error has no .code"),we.UNKNOWN;switch(t){case Sr.OK:return we.OK;case Sr.CANCELLED:return we.CANCELLED;case Sr.UNKNOWN:return we.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return we.INTERNAL;case Sr.UNAVAILABLE:return we.UNAVAILABLE;case Sr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Sr.NOT_FOUND:return we.NOT_FOUND;case Sr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Sr.ABORTED:return we.ABORTED;case Sr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Sr.DATA_LOSS:return we.DATA_LOSS;default:return rt(39323,{code:t})}}(It=Sr||(Sr={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new ss([4294967295,4294967295],0);function iN(t){const e=Sj().encode(t),r=new GC;return r.update(e),new Uint8Array(r.digest())}function sN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ss([r,n],0),new ss([a,i],0)]}class Y0{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ql(`Invalid padding: ${r}`);if(n<0)throw new ql(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ql(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=ss.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(ss.fromNumber(n)));return a.compare(Aj)===1&&(a=new ss([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=iN(e),[n,a]=sN(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);if(!this.we(s))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Y0(i,a,r);return n.forEach(u=>s.insert(u)),s}insert(e){if(this.ge===0)return;const r=iN(e),[n,a]=sN(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Yc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Nh(ot.min(),a,new pr(Et),Ni(),St())}}class Yc{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Yc(n,r,St(),St(),St())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class FT{constructor(e,r){this.targetId=e,this.Ce=r}}class RT{constructor(e,r,n=sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class oN{constructor(){this.ve=0,this.Fe=uN(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=St(),r=St(),n=St();return this.Fe.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:rt(38017,{changeType:i})}}),new Yc(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=uN()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Dj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ni(),this.Je=Xf(),this.He=Xf(),this.Ye=new pr(Et)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const i=a.target;if(ug(i))if(n===0){const s=new Je(i.path);this.et(r,s,pn.newNoDocument(s,ot.min()))}else Gt(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const u=this.ut(e),l=u?this.ct(u,e,s):1;if(l!==0){this.it(r);const o=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,o)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let s,u;try{s=hs(n).toUint8Array()}catch(l){if(l instanceof aT)return Pu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new Y0(s,a,i)}catch(l){return Pu(l instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.ge===0?null:u}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(i=>{const s=this.Ge.ht(),u=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(r,i,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((i,s)=>{const u=this.ot(s);if(u){if(i.current&&ug(u.target)){const l=new Je(u.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,pn.newNoDocument(l,e))}i.Be&&(r.set(s,i.ke()),i.qe())}});let n=St();this.He.forEach((i,s)=>{let u=!0;s.forEachWhile(l=>{const o=this.ot(l);return!o||o.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(i))}),this.je.forEach((i,s)=>s.setReadTime(e));const a=new Nh(e,r,this.Ye,this.je,n);return this.je=Ni(),this.Je=Xf(),this.He=Xf(),this.Ye=new pr(Et),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new oN,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Br(Et),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Br(Et),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Ve("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oN),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Xf(){return new pr(Je.comparator)}function uN(){return new pr(Je.comparator)}const Cj={asc:"ASCENDING",desc:"DESCENDING"},Tj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mj={and:"AND",or:"OR"};class Ij{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function fg(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function ym(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pj(t,e){return ym(t,e.toTimestamp())}function Xa(t){return Gt(!!t,49232),ot.fromTimestamp(function(r){const n=ms(r);return new sr(n.seconds,n.nanos)}(t))}function Z0(t,e){return dg(t,e).canonicalString()}function dg(t,e){const r=function(a){return new rr(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function BT(t){const e=rr.fromString(t);return Gt(zT(e),10190,{key:e.toString()}),e}function mg(t,e){return Z0(t.databaseId,e.path)}function Up(t,e){const r=BT(e);if(r.get(1)!==t.databaseId.projectId)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Je(kT(r))}function jT(t,e){return Z0(t.databaseId,e)}function Fj(t){const e=BT(t);return e.length===4?rr.emptyPath():kT(e)}function hg(t){return new rr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kT(t){return Gt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lN(t,e,r){return{name:mg(t,e),fields:r.value.mapValue.fields}}function Rj(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(o){return o==="NO_CHANGE"?0:o==="ADD"?1:o==="REMOVE"?2:o==="CURRENT"?3:o==="RESET"?4:rt(39313,{state:o})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(o,c){return o.useProto3Json?(Gt(c===void 0||typeof c=="string",58123),sn.fromBase64String(c||"")):(Gt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),sn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(o){const c=o.code===void 0?we.UNKNOWN:PT(o.code);return new Le(c,o.message||"")}(s);r=new RT(n,a,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Up(t,n.document.name),i=Xa(n.document.updateTime),s=n.document.createTime?Xa(n.document.createTime):ot.min(),u=new oa({mapValue:{fields:n.document.fields}}),l=pn.newFoundDocument(a,i,s,u),o=n.targetIds||[],c=n.removedTargetIds||[];r=new Rd(o,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Up(t,n.document),i=n.readTime?Xa(n.readTime):ot.min(),s=pn.newNoDocument(a,i),u=n.removedTargetIds||[];r=new Rd([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Up(t,n.document),i=n.removedTargetIds||[];r=new Rd([],i,a,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,s=new _j(a,i),u=n.targetId;r=new FT(u,s)}}return r}function Oj(t,e){let r;if(e instanceof Jc)r={update:lN(t,e.key,e.value)};else if(e instanceof K0)r={delete:mg(t,e.key)};else if(e instanceof bo)r={update:lN(t,e.key,e.data),updateMask:qj(e.fieldMask)};else{if(!(e instanceof bj))return rt(16599,{Vt:e.type});r={verify:mg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const u=s.transform;if(u instanceof Bc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof kc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gm)return{fieldPath:s.field.canonicalString(),increment:u.Ae};throw rt(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:Pj(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:rt(27497)}(t,e.precondition)),r}function Bj(t,e){return t&&t.length>0?(Gt(e!==void 0,14353),t.map(r=>function(a,i){let s=a.updateTime?Xa(a.updateTime):Xa(i);return s.isEqual(ot.min())&&(s=Xa(i)),new gj(s,a.transformResults||[])}(r,e))):[]}function jj(t,e){return{documents:[jT(t,e.path)]}}function kj(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=jT(t,a);const i=function(o){if(o.length!==0)return LT(Ma.create(o,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const s=function(o){if(o.length!==0)return o.map(c=>function(d){return{field:Qo(d.field),direction:zj(d.dir)}}(c))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const u=fg(t,e.limit);return u!==null&&(r.structuredQuery.limit=u),e.startAt&&(r.structuredQuery.startAt=function(o){return{before:o.inclusive,values:o.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(o){return{before:!o.inclusive,values:o.position}}(e.endAt)),{ft:r,parent:a}}function $j(t){let e=Fj(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Gt(n===1,65062);const c=r.from[0];c.allDescendants?a=c.collectionId:e=e.child(c.collectionId)}let i=[];r.where&&(i=function(f){const d=$T(f);return d instanceof Ma&&hT(d)?d.getFilters():[d]}(r.where));let s=[];r.orderBy&&(s=function(f){return f.map(d=>function(h){return new Oc(Xo(h.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(d))}(r.orderBy));let u=null;r.limit&&(u=function(f){let d;return d=typeof f=="object"?f.value:f,vh(d)?null:d}(r.limit));let l=null;r.startAt&&(l=function(f){const d=!!f.before,m=f.values||[];return new vm(m,d)}(r.startAt));let o=null;return r.endAt&&(o=function(f){const d=!f.before,m=f.values||[];return new vm(m,d)}(r.endAt)),nj(e,a,s,i,u,"F",l,o)}function Lj(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function $T(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Xo(r.unaryFilter.field);return Dr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Xo(r.unaryFilter.field);return Dr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xo(r.unaryFilter.field);return Dr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xo(r.unaryFilter.field);return Dr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(t):t.fieldFilter!==void 0?function(r){return Dr.create(Xo(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ma.create(r.compositeFilter.filters.map(n=>$T(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(r.compositeFilter.op))}(t):rt(30097,{filter:t})}function zj(t){return Cj[t]}function Vj(t){return Tj[t]}function Uj(t){return Mj[t]}function Qo(t){return{fieldPath:t.canonicalString()}}function Xo(t){return Zr.fromServerFormat(t.fieldPath)}function LT(t){return t instanceof Dr?function(r){if(r.op==="=="){if(Kw(r.value))return{unaryFilter:{field:Qo(r.field),op:"IS_NAN"}};if(Xw(r.value))return{unaryFilter:{field:Qo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Kw(r.value))return{unaryFilter:{field:Qo(r.field),op:"IS_NOT_NAN"}};if(Xw(r.value))return{unaryFilter:{field:Qo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(r.field),op:Vj(r.op),value:r.value}}}(t):t instanceof Ma?function(r){const n=r.getFilters().map(a=>LT(a));return n.length===1?n[0]:{compositeFilter:{op:Uj(r.op),filters:n}}}(t):rt(54877,{filter:t})}function qj(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function zT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,r,n,a,i=ot.min(),s=ot.min(),u=sn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.yt=e}}function Gj(t){const e=$j({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.Cn=new Qj}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ne.resolve()}getCollectionParents(e,r){return Ne.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ne.resolve()}deleteFieldIndex(e,r){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,r){return Ne.resolve()}getDocumentsMatchingTarget(e,r){return Ne.resolve(null)}getIndexType(e,r){return Ne.resolve(0)}getFieldIndexes(e,r){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,r){return Ne.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,r){return Ne.resolve(ds.min())}updateCollectionGroup(e,r,n){return Ne.resolve()}updateIndexEntries(e,r){return Ne.resolve()}}class Qj{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Br(rr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Br(rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VT=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(VT,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bu(0)}static cr(){return new Bu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="LruGarbageCollector",Xj=1048576;function dN([t,e],[r,n]){const a=Et(t,r);return a===0?Et(e,n):a}class Kj{constructor(e){this.Ir=e,this.buffer=new Br(dN),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();dN(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Jj{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ve(fN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Zu(r)?Ve(fN,"Ignoring IndexedDB error during garbage collection: ",r):await Yu(r)}await this.Vr(3e5)})}}class Yj{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ne.resolve(ph.ce);const n=new Kj(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(cN)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cN):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,i,s,u,l,o;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,s=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,u=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(o=Date.now(),Go()<=Pt.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${a} in `+(u-s)+`ms
	Removed ${i} targets in `+(l-u)+`ms
	Removed ${f} documents in `+(o-l)+`ms
Total Duration: ${o-c}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:f})))}}function Zj(t,e){return new Yj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(){this.changes=new xo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&sc(n.mutation,a,Sa.empty(),sr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,St()).next(()=>n))}getLocalViewOfDocuments(e,r,n=St()){const a=Ks();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(i=>{let s=Ul();return i.forEach((u,l)=>{s=s.insert(u,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Ks();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,St()))}populateOverlays(e,r,n){const a=[];return n.forEach(i=>{r.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((s,u)=>{r.set(s,u)})})}computeViews(e,r,n,a){let i=Ni();const s=ic(),u=function(){return ic()}();return r.forEach((l,o)=>{const c=n.get(o.key);a.has(o.key)&&(c===void 0||c.mutation instanceof bo)?i=i.insert(o.key,o):c!==void 0?(s.set(o.key,c.mutation.getFieldMask()),sc(c.mutation,o,c.mutation.getFieldMask(),sr.now())):s.set(o.key,Sa.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((o,c)=>s.set(o,c)),r.forEach((o,c)=>u.set(o,new t9(c,s.get(o)??null))),u))}recalculateAndSaveOverlays(e,r){const n=ic();let a=new pr((s,u)=>s-u),i=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const u of s)u.keys().forEach(l=>{const o=r.get(l);if(o===null)return;let c=n.get(l)||Sa.empty();c=u.applyToLocalView(o,c),n.set(l,c);const f=(a.get(u.batchId)||St()).add(l);a=a.insert(u.batchId,f)})}).next(()=>{const s=[],u=a.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),o=l.key,c=l.value,f=ET();c.forEach(d=>{if(!i.has(d)){const m=MT(r.get(d),n.get(d));m!==null&&f.set(d,m),i=i.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,f))}return Ne.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(s){return Je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):xT(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Ne.resolve(Ks());let u=Ic,l=i;return s.next(o=>Ne.forEach(o,(c,f)=>(u<f.largestBatchId&&(u=f.largestBatchId),i.get(c)?Ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,o,i)).next(()=>this.computeViews(e,l,o,St())).next(c=>({batchId:u,changes:_T(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Je(r)).next(n=>{let a=Ul();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let s=Ul();return this.indexManager.getCollectionParents(e,i).next(u=>Ne.forEach(u,l=>{const o=function(f,d){return new el(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,a).next(c=>{c.forEach((f,d)=>{s=s.insert(f,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a))).next(s=>{i.forEach((l,o)=>{const c=o.getKey();s.get(c)===null&&(s=s.insert(c,pn.newInvalidDocument(c)))});let u=Ul();return s.forEach((l,o)=>{const c=i.get(l);c!==void 0&&sc(c.mutation,o,Sa.empty(),sr.now()),xh(r,o)&&(u=u.insert(l,o))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Ne.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Xa(a.createTime)}}(r)),Ne.resolve()}getNamedQuery(e,r){return Ne.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Gj(a.bundledQuery),readTime:Xa(a.readTime)}}(r)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.overlays=new pr(Je.comparator),this.qr=new Map}getOverlay(e,r){return Ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ks();return Ne.forEach(r,a=>this.getOverlay(e,a).next(i=>{i!==null&&n.set(a,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,i)=>{this.St(e,r,i)}),Ne.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,r,n){const a=Ks(),i=r.length+1,s=new Je(r.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const l=u.getNext().value,o=l.getKey();if(!r.isPrefixOf(o.path))break;o.path.length===i&&l.largestBatchId>n&&a.set(l.getKey(),l)}return Ne.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new pr((o,c)=>o-c);const s=this.overlays.getIterator();for(;s.hasNext();){const o=s.getNext().value;if(o.getKey().getCollectionGroup()===r&&o.largestBatchId>n){let c=i.get(o.largestBatchId);c===null&&(c=Ks(),i=i.insert(o.largestBatchId,c)),c.set(o.getKey(),o)}}const u=Ks(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((o,c)=>u.set(o,c)),!(u.size()>=a)););return Ne.resolve(u)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const s=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Nj(r,n));let i=this.qr.get(r);i===void 0&&(i=St(),this.qr.set(r,i)),this.qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.Qr=new Br(Hr.$r),this.Ur=new Br(Hr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Hr(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Hr(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new Je(new rr([])),n=new Hr(r,e),a=new Hr(r,e+1),i=[];return this.Ur.forEachInRange([n,a],s=>{this.Gr(s),i.push(s.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Je(new rr([])),n=new Hr(r,e),a=new Hr(r,e+1);let i=St();return this.Ur.forEachInRange([n,a],s=>{i=i.add(s.key)}),i}containsKey(e){const r=new Hr(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Hr{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Je.comparator(e.key,r.key)||Et(e.Yr,r.Yr)}static Kr(e,r){return Et(e.Yr,r.Yr)||Je.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Br(Hr.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new wj(i,r,n,a);this.mutationQueue.push(s);for(const u of a)this.Zr=this.Zr.add(new Hr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ne.resolve(s)}lookupMutationBatch(e,r){return Ne.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),i=a<0?0:a;return Ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?q0:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Hr(r,0),a=new Hr(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,a],s=>{const u=this.Xr(s.Yr);i.push(u)}),Ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Br(Et);return r.forEach(a=>{const i=new Hr(a,0),s=new Hr(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,s],u=>{n=n.add(u.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;Je.isDocumentKey(i)||(i=i.child(""));const s=new Hr(new Je(i),0);let u=new Br(Et);return this.Zr.forEachWhile(l=>{const o=l.key.path;return!!n.isPrefixOf(o)&&(o.length===a&&(u=u.add(l.Yr)),!0)},s),Ne.resolve(this.ti(u))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Gt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(r.mutations,a=>{const i=new Hr(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Hr(r,0),a=this.Zr.firstAfterOrEqual(n);return Ne.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e){this.ri=e,this.docs=function(){return new pr(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ne.resolve(n?n.document.mutableCopy():pn.newInvalidDocument(r))}getEntries(e,r){let n=Ni();return r.forEach(a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():pn.newInvalidDocument(a))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=Ni();const s=r.path,u=new Je(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:o,value:{document:c}}=l.getNext();if(!s.isPrefixOf(o.path))break;o.path.length>s.length+1||O5(R5(c),n)<=0||(a.has(c.key)||xh(r,c))&&(i=i.insert(c.key,c.mutableCopy()))}return Ne.resolve(i)}getAllFromCollectionGroup(e,r,n,a){rt(9500)}ii(e,r){return Ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new u9(this)}getSize(e){return Ne.resolve(this.size)}}class u9 extends e9{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),Ne.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.persistence=e,this.si=new xo(r=>W0(r),Q0),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.oi=0,this._i=new ey,this.targetCount=0,this.ai=Bu.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ne.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Bu(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Ne.resolve()}updateTargetData(e,r){return this.Pr(r),Ne.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.si.forEach((s,u)=>{u.sequenceNumber<=r&&n.get(u.targetId)===null&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),a++)}),Ne.waitFor(i).next(()=>a)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Ne.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Ne.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach(s=>{i.push(a.markPotentiallyOrphaned(e,s))}),Ne.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Ne.resolve(n)}containsKey(e,r){return Ne.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,r){this.ui={},this.overlays={},this.ci=new ph(0),this.li=!1,this.li=!0,this.hi=new i9,this.referenceDelegate=e(this),this.Pi=new l9(this),this.indexManager=new Wj,this.remoteDocumentCache=function(a){return new o9(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Hj(r),this.Ii=new n9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new a9,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new s9(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Ve("MemoryPersistence","Starting transaction:",e);const a=new c9(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(e,r){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class c9 extends j5{constructor(e){super(),this.currentSequenceNumber=e}}class ty{constructor(e){this.persistence=e,this.Ri=new ey,this.Vi=null}static mi(e){return new ty(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Ne.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const a=Je.fromPath(n);return this.gi(e,a).next(i=>{i||r.removeEntry(a,ot.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class xm{constructor(e,r){this.persistence=e,this.pi=new xo(n=>L5(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Zj(this,r)}static mi(e,r){return new xm(e,r)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Ne.forEach(this.pi,(n,a)=>this.br(e,n,a).next(i=>i?Ne.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,s=>this.br(e,s,r).next(u=>{u||(n++,i.removeEntry(s,ot.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Id(e.data.value)),r}br(e,r,n){return Ne.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return Ne.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=St(),a=St();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new ry(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rB()?8:k5(eB())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.ys(e,r).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ws(e,r,a,n).next(s=>{i.result=s})}).next(()=>{if(i.result)return;const s=new f9;return this.Ss(e,r,s).next(u=>{if(i.result=u,this.Vs)return this.bs(e,r,s,u.size)})}).next(()=>i.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(Go()<=Pt.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",Wo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(Go()<=Pt.DEBUG&&Ve("QueryEngine","Query:",Wo(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Go()<=Pt.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",Wo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wa(r))):Ne.resolve())}ys(e,r){if(eN(r))return Ne.resolve(null);let n=Wa(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=cg(r,null,"F"),n=Wa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const s=St(...i);return this.ps.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,n).next(l=>{const o=this.Ds(r,u);return this.Cs(r,o,s,l.readTime)?this.ys(e,cg(r,null,"F")):this.vs(e,o,r,l)}))})))}ws(e,r,n,a){return eN(r)||a.isEqual(ot.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(r,i);return this.Cs(r,s,n,a)?Ne.resolve(null):(Go()<=Pt.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Wo(r)),this.vs(e,s,r,F5(a,Ic)).next(u=>u))})}Ds(e,r){let n=new Br(wT(e));return r.forEach((a,i)=>{xh(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,r,n){return Go()<=Pt.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Wo(r)),this.ps.getDocumentsMatchingQuery(e,r,ds.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(i=>(r.forEach(s=>{i=i.insert(s.key,s)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="LocalStore",m9=3e8;class h9{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new pr(Et),this.xs=new xo(i=>W0(i),Q0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function p9(t,e,r,n){return new h9(t,e,r,n)}async function qT(t,e){const r=ct(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(i=>(a=i,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const s=[],u=[];let l=St();for(const o of a){s.push(o.batchId);for(const c of o.mutations)l=l.add(c.key)}for(const o of i){u.push(o.batchId);for(const c of o.mutations)l=l.add(c.key)}return r.localDocuments.getDocuments(n,l).next(o=>({Ls:o,removedBatchIds:s,addedBatchIds:u}))})})}function v9(t,e){const r=ct(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(u,l,o,c){const f=o.batch,d=f.keys();let m=Ne.resolve();return d.forEach(h=>{m=m.next(()=>c.getEntry(l,h)).next(v=>{const T=o.docVersions.get(h);Gt(T!==null,48541),v.version.compareTo(T)<0&&(f.applyToRemoteDocument(v,o),v.isValidDocument()&&(v.setReadTime(o.commitVersion),c.addEntry(v)))})}),m.next(()=>u.mutationQueue.removeMutationBatch(l,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let l=St();for(let o=0;o<u.mutationResults.length;++o)u.mutationResults[o].transformResults.length>0&&(l=l.add(u.batch.mutations[o].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function HT(t){const e=ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function g9(t,e){const r=ct(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const u=[];e.targetChanges.forEach((c,f)=>{const d=a.get(f);if(!d)return;u.push(r.Pi.removeMatchingKeys(i,c.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(i,c.addedDocuments,f)));let m=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(sn.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,n)),a=a.insert(f,m),function(v,T,S){return v.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=m9?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(d,m,c)&&u.push(r.Pi.updateTargetData(i,m))});let l=Ni(),o=St();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&u.push(r.persistence.referenceDelegate.updateLimboDocument(i,c))}),u.push(y9(i,s,e.documentUpdates).next(c=>{l=c.ks,o=c.qs})),!n.isEqual(ot.min())){const c=r.Pi.getLastRemoteSnapshotVersion(i).next(f=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));u.push(c)}return Ne.waitFor(u).next(()=>s.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,o)).next(()=>l)}).then(i=>(r.Ms=a,i))}function y9(t,e,r){let n=St(),a=St();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let s=Ni();return r.forEach((u,l)=>{const o=i.get(u);l.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(u)),l.isNoDocument()&&l.version.isEqual(ot.min())?(e.removeEntry(u,l.readTime),s=s.insert(u,l)):!o.isValidDocument()||l.version.compareTo(o.version)>0||l.version.compareTo(o.version)===0&&o.hasPendingWrites?(e.addEntry(l),s=s.insert(u,l)):Ve(ny,"Ignoring outdated watch update for ",u,". Current version:",o.version," Watch version:",l.version)}),{ks:s,qs:a}})}function x9(t,e){const r=ct(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=q0),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function b9(t,e){const r=ct(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(i=>i?(a=i,Ne.resolve(a)):r.Pi.allocateTargetId(n).next(s=>(a=new Gi(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function pg(t,e,r){const n=ct(t),a=n.Ms.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,s=>n.persistence.referenceDelegate.removeTarget(s,a))}catch(s){if(!Zu(s))throw s;Ve(ny,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function mN(t,e,r){const n=ct(t);let a=ot.min(),i=St();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,o,c){const f=ct(l),d=f.xs.get(c);return d!==void 0?Ne.resolve(f.Ms.get(d)):f.Pi.getTargetData(o,c)}(n,s,Wa(e)).next(u=>{if(u)return a=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,u.targetId).next(l=>{i=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,e,r?a:ot.min(),r?i:St())).next(u=>(w9(n,ij(e),u),{documents:u,Qs:i})))}function w9(t,e,r){let n=t.Os.get(e)||ot.min();r.forEach((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Os.set(e,n)}class hN{constructor(){this.activeTargetIds=fj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N9{constructor(){this.Mo=new hN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hN,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="ConnectivityMonitor";class vN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ve(pN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ve(pN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf=null;function vg(){return Kf===null?Kf=function(){return 268435456+Math.round(2147483648*Math.random())}():Kf++,"0x"+Kf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="RestConnection",E9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===hm?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,i){const s=vg(),u=this.zo(e,r.toUriEncodedString());Ve(qp,`Sending RPC '${e}' ${s}:`,u,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,i);const{host:o}=new URL(u),c=L0(o);return this.Jo(e,u,l,n,c).then(f=>(Ve(qp,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Pu(qp,`RPC '${e}' ${s} failed with error: `,f,"url: ",u,"request:",n),f})}Ho(e,r,n,a,i,s){return this.Go(e,r,n,a,i)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ju}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,i)=>e[i]=a),n&&n.headers.forEach((a,i)=>e[i]=a)}zo(e,r){const n=E9[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class D9 extends S9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,i){const s=vg();return new Promise((u,l)=>{const o=new WC;o.setWithCredentials(!0),o.listenOnce(QC.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Md.NO_ERROR:const f=o.getResponseJson();Ve(fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),u(f);break;case Md.TIMEOUT:Ve(fn,`RPC '${e}' ${s} timed out`),l(new Le(we.DEADLINE_EXCEEDED,"Request time out"));break;case Md.HTTP_ERROR:const d=o.getStatus();if(Ve(fn,`RPC '${e}' ${s} failed with status:`,d,"response text:",o.getResponseText()),d>0){let m=o.getResponseJson();Array.isArray(m)&&(m=m[0]);const h=m==null?void 0:m.error;if(h&&h.status&&h.message){const v=function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(C)>=0?C:we.UNKNOWN}(h.status);l(new Le(v,h.message))}else l(new Le(we.UNKNOWN,"Server responded with status "+o.getStatus()))}else l(new Le(we.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Ve(fn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(a);Ve(fn,`RPC '${e}' ${s} sending request:`,a),o.send(r,"POST",c,n,15)})}T_(e,r,n){const a=vg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=JC(),u=KC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;o!==void 0&&(l.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const c=i.join("");Ve(fn,`Creating RPC '${e}' stream ${a}: ${c}`,l);const f=s.createWebChannel(c,l);this.I_(f);let d=!1,m=!1;const h=new A9({Yo:T=>{m?Ve(fn,`Not sending because RPC '${e}' stream ${a} is closed:`,T):(d||(Ve(fn,`Opening RPC '${e}' stream ${a} transport.`),f.open(),d=!0),Ve(fn,`RPC '${e}' stream ${a} sending:`,T),f.send(T))},Zo:()=>f.close()}),v=(T,S,C)=>{T.listen(S,_=>{try{C(_)}catch(M){setTimeout(()=>{throw M},0)}})};return v(f,Vl.EventType.OPEN,()=>{m||(Ve(fn,`RPC '${e}' stream ${a} transport opened.`),h.o_())}),v(f,Vl.EventType.CLOSE,()=>{m||(m=!0,Ve(fn,`RPC '${e}' stream ${a} transport closed`),h.a_(),this.E_(f))}),v(f,Vl.EventType.ERROR,T=>{m||(m=!0,Pu(fn,`RPC '${e}' stream ${a} transport errored. Name:`,T.name,"Message:",T.message),h.a_(new Le(we.UNAVAILABLE,"The operation could not be completed")))}),v(f,Vl.EventType.MESSAGE,T=>{var S;if(!m){const C=T.data[0];Gt(!!C,16349);const _=C,M=(_==null?void 0:_.error)||((S=_[0])==null?void 0:S.error);if(M){Ve(fn,`RPC '${e}' stream ${a} received error:`,M);const y=M.status;let x=function(N){const E=Sr[N];if(E!==void 0)return PT(E)}(y),w=M.message;x===void 0&&(x=we.INTERNAL,w="Unknown error status: "+y+" with message "+M.message),m=!0,h.a_(new Le(x,w)),f.close()}else Ve(fn,`RPC '${e}' stream ${a} received:`,C),h.u_(C)}}),v(u,XC.STAT_EVENT,T=>{T.stat===ng.PROXY?Ve(fn,`RPC '${e}' stream ${a} detected buffering proxy`):T.stat===ng.NOPROXY&&Ve(fn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{h.__()},0),h}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){return new Ij(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,r,n=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&Ve("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="PersistentStream";class WT{constructor(e,r,n,a,i,s,u,l){this.Mi=e,this.S_=n,this.b_=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GT(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===we.RESOURCE_EXHAUSTED?(wi(r.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new Le(we.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ve(gN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Ve(gN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C9 extends WT{constructor(e,r,n,a,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=Rj(this.serializer,e),n=function(i){if(!("targetChange"in i))return ot.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ot.min():s.readTime?Xa(s.readTime):ot.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=hg(this.serializer),r.addTarget=function(i,s){let u;const l=s.target;if(u=ug(l)?{documents:jj(i,l)}:{query:kj(i,l).ft},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=OT(i,s.resumeToken);const o=fg(i,s.expectedCount);o!==null&&(u.expectedCount=o)}else if(s.snapshotVersion.compareTo(ot.min())>0){u.readTime=ym(i,s.snapshotVersion.toTimestamp());const o=fg(i,s.expectedCount);o!==null&&(u.expectedCount=o)}return u}(this.serializer,e);const n=Lj(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=hg(this.serializer),r.removeTarget=e,this.q_(r)}}class T9 extends WT{constructor(e,r,n,a,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=Bj(e.writeResults,e.commitTime),n=Xa(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=hg(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Oj(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{}class I9 extends M9{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,dg(r,n),a,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(we.UNKNOWN,i.toString())})}Ho(e,r,n,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Ho(e,dg(r,n),a,s,u,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Le(we.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class P9{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wi(r),this.aa=!1):Ve("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class F9{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{wo(this)&&(Ve(lo,"Restarting streams for network reachability change."),await async function(l){const o=ct(l);o.Ea.add(4),await Zc(o),o.Ra.set("Unknown"),o.Ea.delete(4),await Eh(o)}(this))})}),this.Ra=new P9(n,a)}}async function Eh(t){if(wo(t))for(const e of t.da)await e(!0)}async function Zc(t){for(const e of t.da)await e(!1)}function QT(t,e){const r=ct(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),oy(r)?sy(r):tl(r).O_()&&iy(r,e))}function ay(t,e){const r=ct(t),n=tl(r);r.Ia.delete(e),n.O_()&&XT(r,e),r.Ia.size===0&&(n.O_()?n.L_():wo(r)&&r.Ra.set("Unknown"))}function iy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}tl(t).Y_(e)}function XT(t,e){t.Va.Ue(e),tl(t).Z_(e)}function sy(t){t.Va=new Dj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),tl(t).start(),t.Ra.ua()}function oy(t){return wo(t)&&!tl(t).x_()&&t.Ia.size>0}function wo(t){return ct(t).Ea.size===0}function KT(t){t.Va=void 0}async function R9(t){t.Ra.set("Online")}async function O9(t){t.Ia.forEach((e,r)=>{iy(t,e)})}async function B9(t,e){KT(t),oy(t)?(t.Ra.ha(e),sy(t)):t.Ra.set("Unknown")}async function j9(t,e,r){if(t.Ra.set("Online"),e instanceof RT&&e.state===2&&e.cause)try{await async function(a,i){const s=i.cause;for(const u of i.targetIds)a.Ia.has(u)&&(await a.remoteSyncer.rejectListen(u,s),a.Ia.delete(u),a.Va.removeTarget(u))}(t,e)}catch(n){Ve(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await bm(t,n)}else if(e instanceof Rd?t.Va.Ze(e):e instanceof FT?t.Va.st(e):t.Va.tt(e),!r.isEqual(ot.min()))try{const n=await HT(t.localStore);r.compareTo(n)>=0&&await function(i,s){const u=i.Va.Tt(s);return u.targetChanges.forEach((l,o)=>{if(l.resumeToken.approximateByteSize()>0){const c=i.Ia.get(o);c&&i.Ia.set(o,c.withResumeToken(l.resumeToken,s))}}),u.targetMismatches.forEach((l,o)=>{const c=i.Ia.get(l);if(!c)return;i.Ia.set(l,c.withResumeToken(sn.EMPTY_BYTE_STRING,c.snapshotVersion)),XT(i,l);const f=new Gi(c.target,l,o,c.sequenceNumber);iy(i,f)}),i.remoteSyncer.applyRemoteEvent(u)}(t,r)}catch(n){Ve(lo,"Failed to raise snapshot:",n),await bm(t,n)}}async function bm(t,e,r){if(!Zu(e))throw e;t.Ea.add(1),await Zc(t),t.Ra.set("Offline"),r||(r=()=>HT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ve(lo,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Eh(t)})}function JT(t,e){return e().catch(r=>bm(t,r,e))}async function Sh(t){const e=ct(t),r=vs(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:q0;for(;k9(e);)try{const a=await x9(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,$9(e,a)}catch(a){await bm(e,a)}YT(e)&&ZT(e)}function k9(t){return wo(t)&&t.Ta.length<10}function $9(t,e){t.Ta.push(e);const r=vs(t);r.O_()&&r.X_&&r.ea(e.mutations)}function YT(t){return wo(t)&&!vs(t).x_()&&t.Ta.length>0}function ZT(t){vs(t).start()}async function L9(t){vs(t).ra()}async function z9(t){const e=vs(t);for(const r of t.Ta)e.ea(r.mutations)}async function V9(t,e,r){const n=t.Ta.shift(),a=J0.from(n,e,r);await JT(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Sh(t)}async function U9(t,e){e&&vs(t).X_&&await async function(n,a){if(function(s){return Ej(s)&&s!==we.ABORTED}(a.code)){const i=n.Ta.shift();vs(n).B_(),await JT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Sh(n)}}(t,e),YT(t)&&ZT(t)}async function yN(t,e){const r=ct(t);r.asyncQueue.verifyOperationInProgress(),Ve(lo,"RemoteStore received new credentials");const n=wo(r);r.Ea.add(3),await Zc(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Eh(r)}async function q9(t,e){const r=ct(t);e?(r.Ea.delete(2),await Eh(r)):e||(r.Ea.add(2),await Zc(r),r.Ra.set("Unknown"))}function tl(t){return t.ma||(t.ma=function(r,n,a){const i=ct(r);return i.sa(),new C9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:R9.bind(null,t),t_:O9.bind(null,t),r_:B9.bind(null,t),H_:j9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),oy(t)?sy(t):t.Ra.set("Unknown")):(await t.ma.stop(),KT(t))})),t.ma}function vs(t){return t.fa||(t.fa=function(r,n,a){const i=ct(r);return i.sa(),new T9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:L9.bind(null,t),r_:U9.bind(null,t),ta:z9.bind(null,t),na:V9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Sh(t)):(await t.fa.stop(),t.Ta.length>0&&(Ve(lo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const s=Date.now()+n,u=new uy(e,r,s,a,i);return u.start(n),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ly(t,e){if(wi("AsyncQueue",`${e}: ${t}`),Zu(t))return new Le(we.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{static emptySet(e){return new yu(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Je.comparator(r.key,n.key):(r,n)=>Je.comparator(r.key,n.key),this.keyedMap=Ul(),this.sortedSet=new pr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof yu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new yu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.ga=new pr(Je.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class ju{constructor(e,r,n,a,i,s,u,l,o){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=o}static fromInitialDocuments(e,r,n,a,i){const s=[];return r.forEach(u=>{s.push({type:0,doc:u})}),new ju(e,r,yu.emptySet(r),s,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class G9{constructor(){this.queries=bN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=ct(r),i=a.queries;a.queries=bN(),i.forEach((s,u)=>{for(const l of u.Sa)l.onError(n)})})(this,new Le(we.ABORTED,"Firestore shutting down"))}}function bN(){return new xo(t=>bT(t),yh)}async function W9(t,e){const r=ct(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.ba()&&e.Da()&&(n=2):(i=new H9,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(a,!0);break;case 1:i.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(s){const u=ly(s,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(u)}r.queries.set(a,i),i.Sa.push(e),e.va(r.onlineState),i.wa&&e.Fa(i.wa)&&cy(r)}async function Q9(t,e){const r=ct(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const s=i.Sa.indexOf(e);s>=0&&(i.Sa.splice(s,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function X9(t,e){const r=ct(t);let n=!1;for(const a of e){const i=a.query,s=r.queries.get(i);if(s){for(const u of s.Sa)u.Fa(a)&&(n=!0);s.wa=a}}n&&cy(r)}function K9(t,e,r){const n=ct(t),a=n.queries.get(e);if(a)for(const i of a.Sa)i.onError(r);n.queries.delete(e)}function cy(t){t.Ca.forEach(e=>{e.next()})}var gg,wN;(wN=gg||(gg={})).Ma="default",wN.Cache="cache";class J9{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new ju(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ju.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.key=e}}class t3{constructor(e){this.key=e}}class Y9{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=St(),this.mutatedKeys=St(),this.eu=wT(e),this.tu=new yu(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new xN,a=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,s=a,u=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,o=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((c,f)=>{const d=a.get(c),m=xh(this.query,f)?f:null,h=!!d&&this.mutatedKeys.has(d.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;d&&m?d.data.isEqual(m.data)?h!==v&&(n.track({type:3,doc:m}),T=!0):this.su(d,m)||(n.track({type:2,doc:m}),T=!0,(l&&this.eu(m,l)>0||o&&this.eu(m,o)<0)&&(u=!0)):!d&&m?(n.track({type:0,doc:m}),T=!0):d&&!m&&(n.track({type:1,doc:d}),T=!0,(l||o)&&(u=!0)),T&&(m?(s=s.add(m),i=v?i.add(c):i.delete(c)):(s=s.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),i=i.delete(c.key),n.track({type:1,doc:c})}return{tu:s,iu:n,Cs:u,mutatedKeys:i}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((c,f)=>function(m,h){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:T})}};return v(m)-v(h)}(c.type,f.type)||this.eu(c.doc,f.doc)),this.ou(n),a=a??!1;const u=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,o=l!==this.Za;return this.Za=l,s.length!==0||o?{snapshot:new ju(this.query,e.tu,i,s,e.mutatedKeys,l===0,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=St(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new t3(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new e3(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=St();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ju.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fy="SyncEngine";class Z9{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class e8{constructor(e){this.key=e,this.hu=!1}}class t8{constructor(e,r,n,a,i,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new xo(u=>bT(u),yh),this.Iu=new Map,this.Eu=new Set,this.du=new pr(Je.comparator),this.Au=new Map,this.Ru=new ey,this.Vu={},this.mu=new Map,this.fu=Bu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function r8(t,e,r=!0){const n=o3(t);let a;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await r3(n,e,r,!0),a}async function n8(t,e){const r=o3(t);await r3(r,e,!0,!1)}async function r3(t,e,r,n){const a=await b9(t.localStore,Wa(e)),i=a.targetId,s=t.sharedClientState.addLocalQueryTarget(i,r);let u;return n&&(u=await a8(t,e,i,s==="current",a.resumeToken)),t.isPrimaryClient&&r&&QT(t.remoteStore,a),u}async function a8(t,e,r,n,a){t.pu=(f,d,m)=>async function(v,T,S,C){let _=T.view.ru(S);_.Cs&&(_=await mN(v.localStore,T.query,!1).then(({documents:w})=>T.view.ru(w,_)));const M=C&&C.targetChanges.get(T.targetId),y=C&&C.targetMismatches.get(T.targetId)!=null,x=T.view.applyChanges(_,v.isPrimaryClient,M,y);return _N(v,T.targetId,x.au),x.snapshot}(t,f,d,m);const i=await mN(t.localStore,e,!0),s=new Y9(e,i.Qs),u=s.ru(i.documents),l=Yc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),o=s.applyChanges(u,t.isPrimaryClient,l);_N(t,r,o.au);const c=new Z9(e,r,s);return t.Tu.set(e,c),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),o.snapshot}async function i8(t,e,r){const n=ct(t),a=n.Tu.get(e),i=n.Iu.get(a.targetId);if(i.length>1)return n.Iu.set(a.targetId,i.filter(s=>!yh(s,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await pg(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&ay(n.remoteStore,a.targetId),yg(n,a.targetId)}).catch(Yu)):(yg(n,a.targetId),await pg(n.localStore,a.targetId,!0))}async function s8(t,e){const r=ct(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),ay(r.remoteStore,n.targetId))}async function o8(t,e,r){const n=h8(t);try{const a=await function(s,u){const l=ct(s),o=sr.now(),c=u.reduce((m,h)=>m.add(h.key),St());let f,d;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let h=Ni(),v=St();return l.Ns.getEntries(m,c).next(T=>{h=T,h.forEach((S,C)=>{C.isValidDocument()||(v=v.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,h)).next(T=>{f=T;const S=[];for(const C of u){const _=xj(C,f.get(C.key).overlayedDocument);_!=null&&S.push(new bo(C.key,_,fT(_.value.mapValue),Qa.exists(!0)))}return l.mutationQueue.addMutationBatch(m,o,S,u)}).next(T=>{d=T;const S=T.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,T.batchId,S)})}).then(()=>({batchId:d.batchId,changes:_T(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(s,u,l){let o=s.Vu[s.currentUser.toKey()];o||(o=new pr(Et)),o=o.insert(u,l),s.Vu[s.currentUser.toKey()]=o}(n,a.batchId,r),await ef(n,a.changes),await Sh(n.remoteStore)}catch(a){const i=ly(a,"Failed to persist write");r.reject(i)}}async function n3(t,e){const r=ct(t);try{const n=await g9(r.localStore,e);e.targetChanges.forEach((a,i)=>{const s=r.Au.get(i);s&&(Gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?s.hu=!0:a.modifiedDocuments.size>0?Gt(s.hu,14607):a.removedDocuments.size>0&&(Gt(s.hu,42227),s.hu=!1))}),await ef(r,n,e)}catch(n){await Yu(n)}}function NN(t,e,r){const n=ct(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((i,s)=>{const u=s.view.va(e);u.snapshot&&a.push(u.snapshot)}),function(s,u){const l=ct(s);l.onlineState=u;let o=!1;l.queries.forEach((c,f)=>{for(const d of f.Sa)d.va(u)&&(o=!0)}),o&&cy(l)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function u8(t,e,r){const n=ct(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),i=a&&a.key;if(i){let s=new pr(Je.comparator);s=s.insert(i,pn.newNoDocument(i,ot.min()));const u=St().add(i),l=new Nh(ot.min(),new Map,new pr(Et),s,u);await n3(n,l),n.du=n.du.remove(i),n.Au.delete(e),dy(n)}else await pg(n.localStore,e,!1).then(()=>yg(n,e,r)).catch(Yu)}async function l8(t,e){const r=ct(t),n=e.batch.batchId;try{const a=await v9(r.localStore,e);i3(r,n,null),a3(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ef(r,a)}catch(a){await Yu(a)}}async function c8(t,e,r){const n=ct(t);try{const a=await function(s,u){const l=ct(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",o=>{let c;return l.mutationQueue.lookupMutationBatch(o,u).next(f=>(Gt(f!==null,37113),c=f.keys(),l.mutationQueue.removeMutationBatch(o,f))).next(()=>l.mutationQueue.performConsistencyCheck(o)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(o,c,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,c)).next(()=>l.localDocuments.getDocuments(o,c))})}(n.localStore,e);i3(n,e,r),a3(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ef(n,a)}catch(a){await Yu(a)}}function a3(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function i3(t,e,r){const n=ct(t);let a=n.Vu[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function yg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||s3(t,n)})}function s3(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(ay(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),dy(t))}function _N(t,e,r){for(const n of r)n instanceof e3?(t.Ru.addReference(n.key,e),f8(t,n)):n instanceof t3?(Ve(fy,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||s3(t,n.key)):rt(19791,{wu:n})}function f8(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Ve(fy,"New document in limbo: "+r),t.Eu.add(n),dy(t))}function dy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Je(rr.fromString(e)),n=t.fu.next();t.Au.set(n,new e8(r)),t.du=t.du.insert(r,n),QT(t.remoteStore,new Gi(Wa(yT(r.path)),n,"TargetPurposeLimboResolution",ph.ce))}}async function ef(t,e,r){const n=ct(t),a=[],i=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((u,l)=>{s.push(n.pu(l,e,r).then(o=>{var c;if((o||r)&&n.isPrimaryClient){const f=o?!o.fromCache:(c=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(o){a.push(o);const f=ry.As(l.targetId,o);i.push(f)}}))}),await Promise.all(s),n.Pu.H_(a),await async function(l,o){const c=ct(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(o,d=>Ne.forEach(d.Es,m=>c.persistence.referenceDelegate.addReference(f,d.targetId,m)).next(()=>Ne.forEach(d.ds,m=>c.persistence.referenceDelegate.removeReference(f,d.targetId,m)))))}catch(f){if(!Zu(f))throw f;Ve(ny,"Failed to update sequence numbers: "+f)}for(const f of o){const d=f.targetId;if(!f.fromCache){const m=c.Ms.get(d),h=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(h);c.Ms=c.Ms.insert(d,v)}}}(n.localStore,i))}async function d8(t,e){const r=ct(t);if(!r.currentUser.isEqual(e)){Ve(fy,"User change. New user:",e.toKey());const n=await qT(r.localStore,e);r.currentUser=e,function(i,s){i.mu.forEach(u=>{u.forEach(l=>{l.reject(new Le(we.CANCELLED,s))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ef(r,n.Ls)}}function m8(t,e){const r=ct(t),n=r.Au.get(e);if(n&&n.hu)return St().add(n.key);{let a=St();const i=r.Iu.get(e);if(!i)return a;for(const s of i){const u=r.Tu.get(s);a=a.unionWith(u.view.nu)}return a}}function o3(t){const e=ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u8.bind(null,e),e.Pu.H_=X9.bind(null,e.eventManager),e.Pu.yu=K9.bind(null,e.eventManager),e}function h8(t){const e=ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c8.bind(null,e),e}class wm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return p9(this.persistence,new d9,e.initialUser,this.serializer)}Cu(e){return new UT(ty.mi,this.serializer)}Du(e){return new N9}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wm.provider={build:()=>new wm};class p8 extends wm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Gt(this.persistence.referenceDelegate instanceof xm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Jj(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new UT(n=>xm.mi(n,r),this.serializer)}}class xg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>NN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=d8.bind(null,this.syncEngine),await q9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new G9}()}createDatastore(e){const r=_h(e.databaseInfo.databaseId),n=function(i){return new D9(i)}(e.databaseInfo);return function(i,s,u,l){return new I9(i,s,u,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,i,s,u){return new F9(n,a,i,s,u)}(this.localStore,this.datastore,e.asyncQueue,r=>NN(this.syncEngine,r,0),function(){return vN.v()?new vN:new _9}())}createSyncEngine(e,r){return function(a,i,s,u,l,o,c){const f=new t8(a,i,s,u,l,o);return c&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const i=ct(a);Ve(lo,"RemoteStore shutting down."),i.Ea.add(5),await Zc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}xg.provider={build:()=>new xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class g8{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=mn.UNAUTHENTICATED,this.clientId=U0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async s=>{Ve(gs,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(Ve(gs,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ly(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress(),Ve(gs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await qT(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function EN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await y8(t);Ve(gs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>yN(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>yN(e.remoteStore,a)),t._onlineComponents=e}async function y8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ve(gs,"Using user provided OfflineComponentProvider");try{await Gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===we.FAILED_PRECONDITION||a.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Pu("Error using user provided cache. Falling back to memory cache: "+r),await Gp(t,new wm)}}else Ve(gs,"Using default OfflineComponentProvider"),await Gp(t,new p8(void 0));return t._offlineComponents}async function u3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ve(gs,"Using user provided OnlineComponentProvider"),await EN(t,t._uninitializedComponentsProvider._online)):(Ve(gs,"Using default OnlineComponentProvider"),await EN(t,new xg))),t._onlineComponents}function x8(t){return u3(t).then(e=>e.syncEngine)}async function b8(t){const e=await u3(t),r=e.eventManager;return r.onListen=r8.bind(null,e.syncEngine),r.onUnlisten=i8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=n8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=s8.bind(null,e.syncEngine),r}function w8(t,e,r={}){const n=new os;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,u,l,o){const c=new v8({next:d=>{c.Nu(),s.enqueueAndForget(()=>Q9(i,f)),d.fromCache&&l.source==="server"?o.reject(new Le(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(d)},error:d=>o.reject(d)}),f=new J9(u,c,{includeMetadataChanges:!0,qa:!0});return W9(i,f)}(await b8(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="firestore.googleapis.com",AN=!0;class DN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Le(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c3,this.ssl=AN}else this.host=e.host,this.ssl=e.ssl??AN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Xj)throw new Le(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l3(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ah{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new N5;switch(n.type){case"firstParty":return new A5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Le(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=SN.get(r);n&&(Ve("ComponentProvider","Removing Datastore"),SN.delete(r),n.terminate())}(this),Promise.resolve()}}function N8(t,e,r,n={}){var o;t=Mc(t,Ah);const a=L0(e),i=t._getSettings(),s={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${r}`;a&&(X6(`https://${u}`),Z6("Firestore",!0)),i.host!==c3&&i.host!==u&&Pu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:u,ssl:a,emulatorOptions:n};if(!cm(l,s)&&(t._setSettings(l),n.mockUserToken)){let c,f;if(typeof n.mockUserToken=="string")c=n.mockUserToken,f=mn.MOCK_USER;else{c=K6(n.mockUserToken,(o=t._app)==null?void 0:o.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new Le(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new mn(d)}t._authCredentials=new _5(new ZC(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class Wr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wr(this.firestore,e,this._key)}toJSON(){return{type:Wr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Kc(r,Wr._jsonSchema))return new Wr(e,n||null,new Je(rr.fromString(r.referencePath)))}}Wr._jsonSchemaVersion="firestore/documentReference/1.0",Wr._jsonSchema={type:Cr("string",Wr._jsonSchemaVersion),referencePath:Cr("string")};class us extends No{constructor(e,r,n){super(e,r,yT(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wr(this.firestore,null,new Je(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function Ue(t,e,...r){if(t=Iu(t),eT("collection","path",e),t instanceof Ah){const n=rr.fromString(e,...r);return Lw(n),new us(t,null,n)}{if(!(t instanceof Wr||t instanceof us))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(rr.fromString(e,...r));return Lw(n),new us(t.firestore,null,n)}}function Tt(t,e,...r){if(t=Iu(t),arguments.length===1&&(e=U0.newId()),eT("doc","path",e),t instanceof Ah){const n=rr.fromString(e,...r);return $w(n),new Wr(t,null,new Je(n))}{if(!(t instanceof Wr||t instanceof us))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(rr.fromString(e,...r));return $w(n),new Wr(t.firestore,t instanceof us?t.converter:null,new Je(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="AsyncQueue";class TN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GT(this,"async_queue_retry"),this._c=()=>{const n=Hp();n&&Ve(CN,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Hp();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Hp();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new os;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zu(e))throw e;Ve(CN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,wi("INTERNAL UNHANDLED ERROR: ",MN(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=uy.createAndSchedule(this,e,r,n,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&rt(47125,{Pc:MN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function MN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Dh extends Ah{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new TN,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TN(e),this._firestoreClient=void 0,await e}}}function _8(t,e){const r=typeof t=="object"?t:l5(),n=typeof t=="string"?t:hm,a=a5(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const i=W6("firestore");i&&N8(a,...i)}return a}function f3(t){if(t._terminated)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E8(t),t._firestoreClient}function E8(t){var n,a,i;const e=t._freezeSettings(),r=function(u,l,o,c){return new U5(u,l,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,l3(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new g8(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(u){const l=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ua(sn.fromBase64String(e))}catch(r){throw new Le(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ua(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ua._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kc(e,ua._jsonSchema))return ua.fromBase64String(e.bytes)}}ua._jsonSchemaVersion="firestore/bytes/1.0",ua._jsonSchema={type:Cr("string",ua._jsonSchemaVersion),bytes:Cr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Le(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Le(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Le(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ka._jsonSchemaVersion}}static fromJSON(e){if(Kc(e,Ka._jsonSchema))return new Ka(e.latitude,e.longitude)}}Ka._jsonSchemaVersion="firestore/geoPoint/1.0",Ka._jsonSchema={type:Cr("string",Ka._jsonSchemaVersion),latitude:Cr("number"),longitude:Cr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ja._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kc(e,Ja._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Ja(e.vectorValues);throw new Le(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ja._jsonSchemaVersion="firestore/vectorValue/1.0",Ja._jsonSchema={type:Cr("string",Ja._jsonSchemaVersion),vectorValues:Cr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=/^__.*__$/;class A8{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Jc(e,this.data,r,this.fieldTransforms)}}function d3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:t})}}class py{constructor(e,r,n,a,i,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new py({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(d3(this.Ac)&&S8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class D8{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||_h(e)}Cc(e,r,n,a=!1){return new py({Ac:e,methodName:r,Dc:n,path:Zr.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function m3(t){const e=t._freezeSettings(),r=_h(t._databaseId);return new D8(t._databaseId,!!e.ignoreUndefinedProperties,r)}function C8(t,e,r,n,a,i={}){const s=t.Cc(i.merge||i.mergeFields?2:0,e,r,a);v3("Data must be an object, but it was:",s,n);const u=h3(n,s);let l,o;if(i.merge)l=new Sa(s.fieldMask),o=s.fieldTransforms;else if(i.mergeFields){const c=[];for(const f of i.mergeFields){const d=M8(e,f,r);if(!s.contains(d))throw new Le(we.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);P8(c,d)||c.push(d)}l=new Sa(c),o=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,o=s.fieldTransforms;return new A8(new oa(u),l,o)}class vy extends hy{_toFieldTransform(e){return new pj(e.path,new Bc)}isEqual(e){return e instanceof vy}}function T8(t,e,r,n=!1){return gy(r,t.Cc(n?4:3,e))}function gy(t,e){if(p3(t=Iu(t)))return v3("Unsupported field value:",e,t),h3(t,e);if(t instanceof hy)return function(n,a){if(!d3(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const i=[];let s=0;for(const u of n){let l=gy(u,a.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,a){if((n=Iu(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dj(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=sr.fromDate(n);return{timestampValue:ym(a.serializer,i)}}if(n instanceof sr){const i=new sr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ym(a.serializer,i)}}if(n instanceof Ka)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ua)return{bytesValue:OT(a.serializer,n._byteString)};if(n instanceof Wr){const i=a.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw a.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Z0(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ja)return function(s,u){return{mapValue:{fields:{[lT]:{stringValue:cT},[pm]:{arrayValue:{values:s.toArray().map(o=>{if(typeof o!="number")throw u.Sc("VectorValues must only contain numeric values.");return X0(u.serializer,o)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${hh(n)}`)}(t,e)}function h3(t,e){const r={};return nT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(t,(n,a)=>{const i=gy(a,e.mc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function p3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof sr||t instanceof Ka||t instanceof ua||t instanceof Wr||t instanceof hy||t instanceof Ja)}function v3(t,e,r){if(!p3(r)||!tT(r)){const n=hh(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function M8(t,e,r){if((e=Iu(e))instanceof my)return e._internalPath;if(typeof e=="string")return g3(t,e);throw Nm("Field path arguments must be of type string or ",t,!1,void 0,r)}const I8=new RegExp("[~\\*/\\[\\]]");function g3(t,e,r){if(e.search(I8)>=0)throw Nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new my(...e.split("."))._internalPath}catch{throw Nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Nm(t,e,r,n,a){const i=n&&!n.isEmpty(),s=a!==void 0;let u=`Function ${e}() called with invalid data`;r&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${n}`),s&&(l+=` in document ${a}`),l+=")"),new Le(we.INVALID_ARGUMENT,u+t+l)}function P8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(yy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class F8 extends y3{data(){return super.data()}}function yy(t,e){return typeof e=="string"?g3(t,e):e instanceof my?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Le(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class x3 extends xy{}function Ft(t,e,...r){let n=[];e instanceof xy&&n.push(e),n=n.concat(r),function(i){const s=i.filter(l=>l instanceof wy).length,u=i.filter(l=>l instanceof by).length;if(s>1||s>0&&u>0)throw new Le(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class by extends x3{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new by(e,r,n)}_apply(e){const r=this._parse(e);return b3(e._query,r),new No(e.firestore,e.converter,lg(e._query,r))}_parse(e){const r=m3(e.firestore);return function(i,s,u,l,o,c,f){let d;if(o.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Le(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){PN(f,c);const h=[];for(const v of f)h.push(IN(l,i,v));d={arrayValue:{values:h}}}else d=IN(l,i,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||PN(f,c),d=T8(u,s,f,c==="in"||c==="not-in");return Dr.create(o,c,d)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}class wy extends xy{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new wy(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ma.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,i){let s=a;const u=i.getFlattenedFilters();for(const l of u)b3(s,l),s=lg(s,l)}(e._query,r),new No(e.firestore,e.converter,lg(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ny extends x3{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Ny(e,r)}_apply(e){const r=function(a,i,s){if(a.startAt!==null)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(i,s)}(e._query,this._field,this._direction);return new No(e.firestore,e.converter,function(a,i){const s=a.explicitOrderBy.concat([i]);return new el(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Rt(t,e="asc"){const r=e,n=yy("orderBy",t);return Ny._create(n,r)}function IN(t,e,r){if(typeof(r=Iu(r))=="string"){if(r==="")throw new Le(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xT(e)&&r.indexOf("/")!==-1)throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(rr.fromString(r));if(!Je.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Qw(t,new Je(n))}if(r instanceof Wr)return Qw(t,r._key);throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(r)}.`)}function PN(t,e){if(!Array.isArray(t)||t.length===0)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b3(t,e){const r=function(a,i){for(const s of a)for(const u of s.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Le(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Le(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class O8{convertValue(e,r="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return yo(e,(a,i)=>{n[a]=this.convertValue(i,r)}),n}convertVectorValue(e){var n,a,i;const r=(i=(a=(n=e.fields)==null?void 0:n[pm].arrayValue)==null?void 0:a.values)==null?void 0:i.map(s=>wr(s.doubleValue));return new Ja(r)}convertGeoPoint(e){return new Ka(wr(e.latitude),wr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=gh(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const r=ms(e);return new sr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=rr.fromString(e);Gt(zT(n),9688,{name:e});const a=new Fc(n.get(1),n.get(3)),i=new Je(n.popFirst(5));return a.isEqual(r)||wi(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Jf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xu extends y3{constructor(e,r,n,a,i,s){super(e,r,n,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(yy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=xu._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}xu._jsonSchemaVersion="firestore/documentSnapshot/1.0",xu._jsonSchema={type:Cr("string",xu._jsonSchemaVersion),bundleSource:Cr("string","DocumentSnapshot"),bundleName:Cr("string"),bundle:Cr("string")};class Od extends xu{data(e={}){return super.data(e)}}class bu{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Jf(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Od(this._firestore,this._userDataWriter,n.key,n,new Jf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Le(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map(u=>{const l=new Od(a._firestore,a._userDataWriter,u.doc.key,u.doc,new Jf(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const l=new Od(a._firestore,a._userDataWriter,u.doc.key,u.doc,new Jf(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);let o=-1,c=-1;return u.type!==0&&(o=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),c=s.indexOf(u.doc.key)),{type:j8(u.type),doc:l,oldIndex:o,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=U0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:t})}}bu._jsonSchemaVersion="firestore/querySnapshot/1.0",bu._jsonSchema={type:Cr("string",bu._jsonSchemaVersion),bundleSource:Cr("string","QuerySnapshot"),bundleName:Cr("string"),bundle:Cr("string")};class k8 extends O8{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wr(this.firestore,null,r)}}function Ot(t){t=Mc(t,No);const e=Mc(t.firestore,Dh),r=f3(e),n=new k8(e);return R8(t._query),w8(r,t._query).then(a=>new bu(e,n,t,a))}function Bt(t){return w3(Mc(t.firestore,Dh),[new K0(t._key,Qa.none())])}function jt(t,e){const r=Mc(t.firestore,Dh),n=Tt(t),a=B8(t.converter,e);return w3(r,[C8(m3(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Qa.exists(!1))]).then(()=>n)}function w3(t,e){return function(n,a){const i=new os;return n.asyncQueue.enqueueAndForget(async()=>o8(await x8(n),a,i)),i.promise}(f3(t),e)}function kt(){return new vy("serverTimestamp")}(function(e,r=!0){(function(a){Ju=a})(u5),dm(new Cc("firestore",(n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),u=new Dh(new E5(n.getProvider("auth-internal")),new D5(s,n.getProvider("app-check-internal")),function(o,c){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Le(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(o.options.projectId,c)}(s,a),s);return i={useFetchStreams:r,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),gu(Ow,Bw,e),gu(Ow,Bw,"esm2020")})();const $8={apiKey:"AIzaSyBUabFVbZsdvJxSNLz9E6uooOHmHAYztMQ",authDomain:"numerical-web-fe12a.firebaseapp.com",projectId:"numerical-web-fe12a",storageBucket:"numerical-web-fe12a.appspot.com",messagingSenderId:"450601861029",appId:"1:450601861029:web:8ad42bf62f220abb7a324c"},L8=UC($8),Ce=_8(L8),_y="problems_bisection";async function z8(){const t=Ft(Ue(Ce,_y),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function V8(t){return jt(Ue(Ce,_y),{...t,method:"bisection",createdAt:kt()})}async function U8(t){return Bt(Tt(Ce,_y,t))}const q8=Object.freeze(Object.defineProperty({__proto__:null,deleteBisectionProblem:U8,getBisectionProblems:z8,saveBisectionProblem:V8},Symbol.toStringTag,{value:"Module"}));function $t(t){const[e,r]=G.useState([]),[n,a]=G.useState(new Set),i=G.useCallback(async()=>{if(!t||typeof t.get!="function"){const c=(t==null?void 0:t.getBisectionProblems)||(t==null?void 0:t.getFalsePositionProblems)||(t==null?void 0:t.getProblems)||(t==null?void 0:t.get);if(!c)return;const f=await c();r(f);return}const o=await t.get();r(o)},[t]),s=G.useCallback(async o=>{if(!t)throw new Error("service required");const c=t.saveBisectionProblem||t.saveFalsePositionProblem||t.save||t.add;if(!c)throw new Error("save method not found on service");await c(o),await i()},[t,i]),u=G.useCallback(async o=>{if(!t)throw new Error("service required");const c=t.deleteBisectionProblem||t.deleteFalsePositionProblem||t.delete||t.remove;if(!c)throw new Error("delete method not found on service");await c(o),await i()},[t,i]),l=G.useCallback((o,c=480)=>{a(f=>new Set(f).add(o)),setTimeout(async()=>{try{await u(o)}finally{a(f=>{const d=new Set(f);return d.delete(o),d})}},c)},[u]);return{problems:e,removingIds:n,refresh:i,saveProblem:s,deleteProblem:l}}function Re(t,e=6){return t===null||Number.isNaN(t)?"-":isFinite(t)?Number(t).toPrecision(e).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(t)}function ys(t){if(!t||!t.trim())return null;let e=t.replace(/\^/g,"**");e=e.replace(/\bln\s*\(/gi,"log("),e=e.replace(/\bpi\b/gi,"PI"),e=e.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+e+"); }")}catch{return null}}function H8(t,e,r,n=1e-6,a=50){try{let i=t(e),s=t(r);if(!isFinite(i)||!isFinite(s))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*s>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const u=[];let l=null;for(let o=0;o<=a;o++){const c=(e+r)/2,f=t(c);if(!isFinite(f))return{error:"f(x1) คำนวณไม่ได้",iterations:u,converged:!1};let d=null;if(l!==null){const m=Math.abs(c)>1e-12?Math.abs(c):1;d=Math.abs(c-l)/m}if(u.push({iter:o,xl:e,xr:r,x1:c,fx1:f,error:d}),Math.abs(f)===0||d!==null&&d<=n)return{root:c,iterations:u,converged:!0};i*f<0?(r=c,s=f):(e=c,i=f),l=c}return{root:(e+r)/2,iterations:u,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function to(t,e,r=-5,n=5,a=[],i={}){if(!t)return;const{width:s=800,height:u=320,bg:l="#061022",curveColor:o="#8ab4ff",axesColor:c="rgba(255,255,255,0.08)",pointColor:f="#f97316",lastPointColor:d="#fb923c"}=i,m=t.getContext("2d"),h=t.width=s,v=t.height=u;m.clearRect(0,0,h,v),m.fillStyle=l,m.fillRect(0,0,h,v);const T=e||(F=>F),S=(n-r)*.2||1,C=r-S,_=n+S,M=500;let y=[],x=[],w=1/0,g=-1/0;for(let F=0;F<M;F++){const O=C+(_-C)*F/(M-1);let P;try{P=T(O)}catch{P=NaN}y.push(O),x.push(P),isFinite(P)&&(P<w&&(w=P),P>g&&(g=P))}w===1/0&&(w=-1,g=1);const N=(g-w)*.2||1;w-=N,g+=N;const E=F=>(F-C)/(_-C)*h,b=F=>v-(F-w)/(g-w)*v;if(m.strokeStyle=c,w<0&&g>0){const F=b(0);m.beginPath(),m.moveTo(0,F),m.lineTo(h,F),m.stroke()}if(C<0&&_>0){const F=E(0);m.beginPath(),m.moveTo(F,0),m.lineTo(F,v),m.stroke()}m.beginPath(),m.lineWidth=2,m.strokeStyle=o;let D=!1;for(let F=0;F<M;F++){const O=y[F],P=x[F];if(!isFinite(P)){D=!1;continue}const z=E(O),$=b(P);D?m.lineTo(z,$):(m.moveTo(z,$),D=!0)}m.stroke(),a.forEach(F=>{const O=E(F.x1),P=b(F.fx1);m.beginPath(),m.arc(O,P,3,0,2*Math.PI),m.fillStyle=f,m.fill()});const I=(F,O,P)=>{const z=E(F);m.beginPath(),m.moveTo(z,0),m.lineTo(z,v),m.strokeStyle=O,m.stroke(),m.fillStyle=O,m.font="12px sans-serif",m.fillText(P+"="+Re(F),z+6,18)};if(I(r,"#22c55e","XL"),I(n,"#ef4444","XR"),a.length){const F=a[a.length-1],O=E(F.x1),P=b(F.fx1);m.beginPath(),m.arc(O,P,6,0,2*Math.PI),m.fillStyle=d,m.fill()}}function N3({func:t,xl:e=-5,xr:r=5,iterations:n=[],width:a=800,height:i=320,className:s=""}){const u=G.useRef(null);return G.useEffect(()=>{const l=u.current;to(l,t,e,r,n,{width:a,height:i})},[t,e,r,n,a,i]),p.jsx("canvas",{ref:u,width:a,height:i,className:s})}function Lt({problems:t=[],onLoad:e=()=>{},onDelete:r=()=>{},removingIds:n=new Set}){return!t||t.length===0?null:p.jsxs("div",{className:"mt-2",children:[p.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"โจทย์ที่บันทึกไว้:"}),p.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:t.map(a=>p.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${n.has(a.id)?"fade-out":""}`,children:[p.jsx("span",{className:"truncate",children:a.expr}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>e(a),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),p.jsx("button",{onClick:()=>r(a),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},a.id))})]})}function _3({iterations:t=[]}){return!t||t.length===0?null:p.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:p.jsxs("table",{className:"w-full text-sm border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[p.jsx("th",{className:"p-2 text-right",children:"iter"}),p.jsx("th",{className:"p-2 text-right",children:"xl"}),p.jsx("th",{className:"p-2 text-right",children:"xr"}),p.jsx("th",{className:"p-2 text-right",children:"x1"}),p.jsx("th",{className:"p-2 text-right",children:"f(x1)"}),p.jsx("th",{className:"p-2 text-right",children:"error"})]})}),p.jsx("tbody",{children:t.map(e=>p.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[p.jsx("td",{className:"p-2 text-right",children:e.iter}),p.jsx("td",{className:"p-2 text-right",children:Re(e.xl)}),p.jsx("td",{className:"p-2 text-right",children:Re(e.xr)}),p.jsx("td",{className:"p-2 text-right",children:Re(e.x1)}),p.jsx("td",{className:"p-2 text-right",children:Re(e.fx1)}),p.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":Re(e.error)})]},e.iter))})]})})}function Mt({title:t,subtitle:e}){return p.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[p.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:t}),e&&p.jsx("div",{className:"text-sm text-gray-400",children:e})]})}function G8(){const[t,e]=G.useState(""),[r,n]=G.useState(""),[a,i]=G.useState(""),[s,u]=G.useState(""),[l,o]=G.useState(""),[c,f]=G.useState([]),[d,m]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[h,v]=G.useState("-"),[T,S]=G.useState("-"),{problems:C,removingIds:_,refresh:M,saveProblem:y,deleteProblem:x}=$t(q8);G.useEffect(()=>{M().catch(console.error)},[M]);const w=D=>{e(D.expr??""),n(D.xl??""),i(D.xr??""),u(D.tol??""),o(D.maxIter??"")},g=D=>{if(confirm(`ลบโจทย์นี้ไหม?
${D.expr}`))try{x(D.id)}catch(I){console.error("ลบโจทย์ผิดพลาด:",I),alert("ลบไม่สำเร็จ")}},N=async()=>{if(!t||!r||!a||!s||!l){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await y({expr:t,xl:r,xr:a,tol:s,maxIter:l}),alert("บันทึกแล้ว!")}catch(D){console.error("บันทึกโจทย์ผิดพลาด:",D),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},E=()=>{const D=ys(t);if(!D){m("สถานะ: สมการไม่ถูกต้อง");return}const I=parseFloat(r),F=parseFloat(a),O=parseFloat(s),P=parseInt(l,10);if(isNaN(I)||isNaN(F)){m("สถานะ: XL/XR ไม่ถูกต้อง");return}if(I>=F){m("สถานะ: ต้องมี XL < XR");return}if(!isFinite(O)||O<=0){m("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(P)||P<=0){m("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const z=H8(D,I,F,O,P);if(z.error){m("สถานะ: "+z.error);return}f(z.iterations),m("สถานะ: เสร็จสิ้น "+(z.converged?"(converged)":"(ไม่ converged)")),S(Math.max(0,z.iterations.length-1)),v(Re(z.root))},b=()=>{e(""),n(""),i(""),u(""),o(""),f([]),m("สถานะ: รีเซ็ตแล้ว"),S("-"),v("-")};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Bisection Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),p.jsx("input",{type:"text",value:t,onChange:D=>e(D.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),p.jsx("input",{type:"number",value:r,onChange:D=>n(D.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),p.jsx("input",{type:"number",value:a,onChange:D=>i(D.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),p.jsx("input",{type:"text",value:s,onChange:D=>u(D.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:l,onChange:D=>o(D.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-4",children:[p.jsx("button",{onClick:E,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:b,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsxs("div",{className:"text-sm mb-2",children:[p.jsx("div",{children:d}),p.jsxs("div",{children:["Iterations: ",T]}),p.jsxs("div",{children:["Root: ",h]})]}),p.jsx(Lt,{problems:C,onLoad:w,onDelete:g,removingIds:_})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),p.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:p.jsx(N3,{func:ys(t)||(D=>D),xl:parseFloat(r)||-5,xr:parseFloat(a)||5,iterations:c,className:"w-full h-72 rounded"})}),p.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = x1 ทุก iteration (วงใหญ่ = x1 สุดท้าย)"})]})]}),p.jsx(_3,{iterations:c}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ey="problems_falseposition";async function E3(){const t=Ft(Ue(Ce,Ey),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function S3(t){return jt(Ue(Ce,Ey),{...t,method:"falseposition",createdAt:kt()})}async function A3(t){return Bt(Tt(Ce,Ey,t))}const W8={getFalsePositionProblems:E3,saveFalsePositionProblem:S3,deleteFalsePositionProblem:A3},Q8=Object.freeze(Object.defineProperty({__proto__:null,default:W8,deleteFalsePositionProblem:A3,getFalsePositionProblems:E3,saveFalsePositionProblem:S3},Symbol.toStringTag,{value:"Module"}));function X8(t,e,r,n=1e-6,a=50){try{let i=t(e),s=t(r);if(!isFinite(i)||!isFinite(s))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*s>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const u=[];let l=null,o=null;for(let c=0;c<=a;c++){l=(e*s-r*i)/(s-i);const f=t(l);if(!isFinite(f))return{error:"f(x1) คำนวณไม่ได้",iterations:u,converged:!1};const d=o===null?null:Math.abs((l-o)/(Math.abs(l)>1e-12?Math.abs(l):1));if(u.push({iter:c,xl:e,xr:r,x1:l,fx1:f,error:d}),Math.abs(f)===0||d!==null&&d<=n)return{root:l,iterations:u,converged:!0};i*f<0?(r=l,s=f):(e=l,i=f),o=l}return{root:l,iterations:u,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function K8(){const[t,e]=G.useState(""),[r,n]=G.useState(""),[a,i]=G.useState(""),[s,u]=G.useState(""),[l,o]=G.useState(""),[c,f]=G.useState([]),[d,m]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[h,v]=G.useState("-"),[T,S]=G.useState("-"),{problems:C,removingIds:_,refresh:M,saveProblem:y,deleteProblem:x}=$t(Q8);G.useEffect(()=>{M().catch(console.error)},[M]);const w=async()=>{if(!t||!r||!a||!s||!l){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await y({expr:t,xl:r,xr:a,tol:s,maxIter:l}),alert("บันทึกแล้ว!")}catch(D){console.error("บันทึกโจทย์ผิดพลาด:",D),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},g=D=>{e(D.expr??""),n(D.xl??""),i(D.xr??""),u(D.tol??""),o(D.maxIter??"")},N=D=>{if(confirm(`ลบโจทย์นี้ไหม?
${D.expr}`))try{x(D.id)}catch(I){console.error("ลบโจทย์ผิดพลาด:",I),alert("ลบไม่สำเร็จ")}},E=()=>{const D=ys(t);if(!D){m("สถานะ: สมการไม่ถูกต้อง");return}const I=parseFloat(r),F=parseFloat(a),O=parseFloat(s),P=parseInt(l,10);if(isNaN(I)||isNaN(F)){m("สถานะ: XL/XR ไม่ถูกต้อง");return}if(I>=F){m("สถานะ: ต้องมี XL < XR");return}if(!isFinite(O)||O<=0){m("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(P)||P<=0){m("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const z=X8(D,I,F,O,P);if(z.error){m("สถานะ: "+z.error);return}f(z.iterations),m("สถานะ: เสร็จสิ้น "+(z.converged?"(converged)":"(ไม่ converged)")),S(Math.max(0,z.iterations.length-1)),v(Re(z.root))},b=()=>{e(""),n(""),i(""),u(""),o(""),f([]),m("สถานะ: รีเซ็ตแล้ว"),S("-"),v("-")};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"False Position Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),p.jsx("input",{type:"text",value:t,onChange:D=>e(D.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),p.jsx("input",{type:"number",value:r,onChange:D=>n(D.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),p.jsx("input",{type:"number",value:a,onChange:D=>i(D.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),p.jsx("input",{type:"text",value:s,onChange:D=>u(D.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:l,onChange:D=>o(D.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-4",children:[p.jsx("button",{onClick:E,className:"btn-primary glow-btn flex-1 py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:b,className:"btn-danger flex-1 border border-[#30363d] py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์นี้"}),p.jsxs("div",{className:"text-sm mb-2",children:[p.jsx("div",{children:d}),p.jsxs("div",{children:["Iterations: ",T]}),p.jsxs("div",{children:["Root: ",h]})]}),p.jsx(Lt,{problems:C,onLoad:g,onDelete:N,removingIds:_})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),p.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:p.jsx(N3,{func:ys(t)||(D=>D),xl:parseFloat(r)||-5,xr:parseFloat(a)||5,iterations:c,className:"w-full h-72 rounded"})}),p.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = X1 ทุก iteration (วงใหญ่ = X1 สุดท้าย)"})]})]}),p.jsx(_3,{iterations:c}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function J8(){const[t,e]=G.useState(""),[r,n]=G.useState(""),[a,i]=G.useState(""),[s,u]=G.useState(""),[l,o]=G.useState([]),[c,f]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=G.useState("-"),[h,v]=G.useState("-"),[T,S]=G.useState(null),[C,_]=G.useState("");function M(N,E){const b=Math.cbrt(Number.EPSILON)*(Math.abs(E)+1),D=N(E+b),I=N(E-b);return(D-I)/(2*b)}function y(N,E){try{const b=M(N,E);return!isFinite(b)||b===0?.5:1/Math.max(1,Math.abs(b))}catch{return .5}}function x(N,E,b,D,I){let F=[],O=E;F.push({iter:0,x:O,error:null});for(let P=1;P<=D;P++){const z=O-I*N(O),$=Math.abs((z-O)/z);if(F.push({iter:P,x:z,error:$}),!isFinite(z))return{error:"ค่า x ไม่เป็นจำนวนจำกัด (อาจ Diverge)"};if($<=b)return{root:z,iterations:F,converged:!0,lambda:I};O=z}return{root:F[F.length-1].x,iterations:F,converged:!1,lambda:I}}G.useEffect(()=>{const N=ys(t),E=parseFloat(r);if(!N||!isFinite(E)){S(null),_("");return}const b=y(N,E);S(b);const D=t.replace(/\s+/g," ").trim();_(`f2(x) = x - (${b.toPrecision(6)}) * [ ${D||"f(x)"} ]`)},[t,r]);const w=()=>{const N=ys(t);if(!N){f("สถานะ: f(x) ไม่ถูกต้อง");return}const E=parseFloat(r),b=parseFloat(a),D=parseInt(s,10);if(!isFinite(E)){f("สถานะ: ค่าเริ่มต้น x0 ไม่ถูกต้อง");return}if(!isFinite(b)||b<=0){f("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(D)||D<=0){f("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const I=y(N,E),F=x(N,E,b,D,I);if(F.error){f("สถานะ: "+F.error),o([]),v("-"),m("-");return}o(F.iterations),f("สถานะ: เสร็จสิ้น "+(F.converged?"(converged)":"(ไม่ converged)")),v(F.iterations.length),m(Re(F.root)),S(F.lambda);const O=t.replace(/\s+/g," ").trim();_(`f2(x) = x - (${F.lambda.toPrecision(6)}) * [ ${O||"f(x)"} ]`)},g=()=>{e(""),n(""),i(""),u(""),o([]),f("สถานะ: รีเซ็ตแล้ว"),v("-"),m("-"),S(null),_("")};return p.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[p.jsx(Mt,{title:"One-Point Iteration",subtitle:"แปลง f(x) → f2(x) อัตโนมัติ"}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x)"}),p.jsx("input",{type:"text",value:t,onChange:N=>e(N.target.value),placeholder:"เช่น x^3 + x - 1,  sin(x) - x/2,  ln(x) - 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x0"}),p.jsx("input",{type:"number",value:r,onChange:N=>n(N.target.value),placeholder:"เช่น 0.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),p.jsx("input",{type:"text",value:a,onChange:N=>i(N.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:s,onChange:N=>u(N.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"rounded-md bg-slate-900 border border-slate-700 p-3 text-sm text-gray-300 mb-4",children:[p.jsx("div",{className:"font-semibold text-cyan-300 mb-1",children:"f2(x) ที่ใช้ในการคำนวณ"}),p.jsx("div",{className:"break-words",children:C||"— (กรอก f(x) และ x0 เพื่อดู f2(x))"}),T!==null&&p.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["λ (อัตโนมัติ) = ",Re(T)]})]}),p.jsxs("div",{className:"flex gap-3 mb-4",children:[p.jsx("button",{onClick:w,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),p.jsx("button",{onClick:g,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),p.jsxs("div",{className:"text-sm mb-3",children:[p.jsx("div",{children:c}),p.jsxs("div",{children:["Iterations: ",h]}),p.jsxs("div",{children:["Root: ",d]})]}),l.length>0&&p.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:p.jsxs("table",{className:"w-full text-sm border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[p.jsx("th",{className:"p-2 text-right",children:"iter"}),p.jsx("th",{className:"p-2 text-right",children:"x"}),p.jsx("th",{className:"p-2 text-right",children:"error"})]})}),p.jsx("tbody",{children:l.map(N=>p.jsxs("tr",{className:"border-b border-slate-700",children:[p.jsx("td",{className:"p-2 text-right",children:N.iter}),p.jsx("td",{className:"p-2 text-right",children:Re(N.x)}),p.jsx("td",{className:"p-2 text-right",children:N.error===null?"-":Re(N.error)})]},N.iter))})]})}),p.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:[p.jsx("div",{children:"หมายเหตุ: ใช้หน่วยเรเดียนสำหรับ sin/cos/tan; เขียนคูณให้ชัด เช่น 2*x (ไม่ใช่ 2x)"}),p.jsx("div",{children:"ตัวอย่าง f(x): x^3 + x - 1,  e^(-x) - x,  ln(x) - 1,  sin(x) - x/2"})]})]})]})}const Sy="problems_taylor";async function D3(){const t=Ft(Ue(Ce,Sy),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function C3(t){return jt(Ue(Ce,Sy),{...t,method:"taylor",createdAt:kt()})}async function Ay(t){return Bt(Tt(Ce,Sy,t))}const Y8=D3,Z8=C3,ek=Ay,tk=Ay,rk=Object.freeze(Object.defineProperty({__proto__:null,del:tk,deleteTaylorProblem:Ay,getProblems:Y8,getTaylorProblems:D3,remove:ek,save:Z8,saveTaylorProblem:C3},Symbol.toStringTag,{value:"Module"}));function Nr(){return Nr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nr.apply(null,arguments)}var T3={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function En(t,e){if(_m(t,e))return t[e];throw typeof t[e]=="function"&&Dy(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function ku(t,e,r){if(_m(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function _m(t,e){return!ak(t)&&!Array.isArray(t)?!1:He(ik,e)?!0:!(e in Object.prototype||e in Function.prototype)}function nk(t,e){if(!Dy(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function Dy(t,e){return t==null||typeof t[e]!="function"||He(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:He(sk,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ak(t){return typeof t=="object"&&t&&t.constructor===Object}var ik={length:!0,name:!0},sk={toString:!0,valueOf:!0,toLocaleString:!0};class Ch{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return En(this.wrappedObject,e)}set(e,r){return ku(this.wrappedObject,e,r),this}has(e){return _m(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return I3(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){_m(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class M3{constructor(e,r,n){this.a=e,this.b=r,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,r){return this.bKeys.has(e)?this.b.set(e,r):this.a.set(e,r),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return I3(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function I3(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function $c(){return new Map}function wu(t){if(!t)return $c();if(R3(t))return t;if(Mh(t))return new Ch(t);throw new Error("createMap can create maps from objects or Maps")}function ok(t){if(t instanceof Ch)return t.wrappedObject;var e={};for(var r of t.keys()){var n=t.get(r);ku(e,r,n)}return e}function Xe(t){return typeof t=="number"}function ut(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function oc(t){return typeof t=="bigint"}function hi(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function tf(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Gn(t){return t&&t.constructor.prototype.isUnit===!0||!1}function yr(t){return typeof t=="string"}var Wt=Array.isArray;function Ye(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Kn(t){return Array.isArray(t)||Ye(t)}function Em(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Js(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Cy(t){return t&&t.constructor.prototype.isRange===!0||!1}function Th(t){return t&&t.constructor.prototype.isIndex===!0||!1}function uk(t){return typeof t=="boolean"}function lk(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function P3(t){return t&&t.constructor.prototype.isHelp===!0||!1}function F3(t){return typeof t=="function"}function ck(t){return t instanceof Date}function fk(t){return t instanceof RegExp}function Mh(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!hi(t)&&!tf(t))}function R3(t){return t?t instanceof Map||t instanceof Ch||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function dk(t){return t===null}function mk(t){return t===void 0}function co(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function aa(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function hk(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function pk(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function vk(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Nt(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function bg(t){return Nt(t)||br(t)&&t.args.length===1&&Nt(t.args[0])&&"-+~".includes(t.op)}function rf(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function xs(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function rl(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ht(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ih(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function br(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function _i(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function gk(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function yk(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qr(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function O3(t){return t&&t.constructor.prototype.isChain===!0||!1}function Xt(t){var e=typeof t;return e==="object"?t===null?"null":ut(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function nt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return nt(r)});if(t instanceof Date)return new Date(t.valueOf());if(ut(t))return t;if(Mh(t))return xk(t,nt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function xk(t,e){var r={};for(var n in t)He(t,n)&&(r[n]=e(t[n]));return r}function B3(t,e){for(var r in e)He(e,r)&&(t[r]=e[r]);return t}function Ei(t,e){var r,n,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,a=t.length;n<a;n++)if(!Ei(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Ei(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function bk(t,e,r){var n=!0,a;Object.defineProperty(t,e,{get:function(){return n&&(a=r(),n=!1),a},set:function(s){a=s,n=!1},configurable:!0,enumerable:!0})}function He(t,e){return t&&Object.hasOwnProperty.call(t,e)}function wk(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=t[a];i!==void 0&&(r[a]=i)}return r}var Nk=["Matrix","Array"],_k=["number","BigNumber","bigint","Fraction"],be=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(T3)};Nr(be,T3,{MATRIX_OPTIONS:Nk,NUMBER_OPTIONS:_k});function FN(){return!0}function ta(){return!1}function Lo(){}const RN="Argument is not a typed-function.";function j3(){function t(U){return typeof U=="object"&&U!==null&&U.constructor===Object}const e=[{name:"number",test:function(U){return typeof U=="number"}},{name:"string",test:function(U){return typeof U=="string"}},{name:"boolean",test:function(U){return typeof U=="boolean"}},{name:"Function",test:function(U){return typeof U=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(U){return U instanceof Date}},{name:"RegExp",test:function(U){return U instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(U){return U===null}},{name:"undefined",test:function(U){return U===void 0}}],r={name:"any",test:FN,isAny:!0};let n,a,i=0,s={createCount:0};function u(U){const Y=n.get(U);if(Y)return Y;let re='Unknown type "'+U+'"';const se=U.toLowerCase();let le;for(le of a)if(le.toLowerCase()===se){re+='. Did you mean "'+le+'" ?';break}throw new TypeError(re)}function l(U){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const re=Y?u(Y).index:a.length,se=[];for(let ge=0;ge<U.length;++ge){if(!U[ge]||typeof U[ge].name!="string"||typeof U[ge].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const _e=U[ge].name;if(n.has(_e))throw new TypeError('Duplicate type name "'+_e+'"');se.push(_e),n.set(_e,{name:_e,test:U[ge].test,isAny:U[ge].isAny,index:re+ge,conversionsTo:[]})}const le=a.slice(re);a=a.slice(0,re).concat(se).concat(le);for(let ge=re+se.length;ge<a.length;++ge)n.get(a[ge]).index=ge}function o(){n=new Map,a=[],i=0,l([r],!1)}o(),l(e);function c(){let U;for(U of a)n.get(U).conversionsTo=[];i=0}function f(U){const Y=a.filter(re=>{const se=n.get(re);return!se.isAny&&se.test(U)});return Y.length?Y:["any"]}function d(U){return U&&typeof U=="function"&&"_typedFunctionData"in U}function m(U,Y,re){if(!d(U))throw new TypeError(RN);const se=re&&re.exact,le=Array.isArray(Y)?Y.join(","):Y,ge=M(le),_e=T(ge);if(!se||_e in U.signatures){const ht=U._typedFunctionData.signatureMap.get(_e);if(ht)return ht}const Se=ge.length;let Me;if(se){Me=[];let ht;for(ht in U.signatures)Me.push(U._typedFunctionData.signatureMap.get(ht))}else Me=U._typedFunctionData.signatures;for(let ht=0;ht<Se;++ht){const gt=ge[ht],Ut=[];let Ze;for(Ze of Me){const ur=g(Ze.params,ht);if(!(!ur||gt.restParam&&!ur.restParam)){if(!ur.hasAny){const B=_(ur);if(gt.types.some(ne=>!B.has(ne.name)))continue}Ut.push(Ze)}}if(Me=Ut,Me.length===0)break}let Ae;for(Ae of Me)if(Ae.params.length<=Se)return Ae;throw new TypeError("Signature not found (signature: "+(U.name||"unnamed")+"("+T(ge,", ")+"))")}function h(U,Y,re){return m(U,Y,re).implementation}function v(U,Y){const re=u(Y);if(re.test(U))return U;const se=re.conversionsTo;if(se.length===0)throw new Error("There are no conversions to "+Y+" defined.");for(let le=0;le<se.length;le++)if(u(se[le].from).test(U))return se[le].convert(U);throw new Error("Cannot convert "+U+" to "+Y)}function T(U){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return U.map(re=>re.name).join(Y)}function S(U){const Y=U.indexOf("...")===0,se=(Y?U.length>3?U.slice(3):"any":U).split("|").map(Se=>u(Se.trim()));let le=!1,ge=Y?"...":"";return{types:se.map(function(Se){return le=Se.isAny||le,ge+=Se.name+"|",{name:Se.name,typeIndex:Se.index,test:Se.test,isAny:Se.isAny,conversion:null,conversionIndex:-1}}),name:ge.slice(0,-1),hasAny:le,hasConversion:!1,restParam:Y}}function C(U){const Y=U.types.map(_e=>_e.name),re=z(Y);let se=U.hasAny,le=U.name;const ge=re.map(function(_e){const Se=u(_e.from);return se=Se.isAny||se,le+="|"+_e.from,{name:_e.from,typeIndex:Se.index,test:Se.test,isAny:Se.isAny,conversion:_e,conversionIndex:_e.index}});return{types:U.types.concat(ge),name:le,hasAny:se,hasConversion:ge.length>0,restParam:U.restParam}}function _(U){return U.typeSet||(U.typeSet=new Set,U.types.forEach(Y=>U.typeSet.add(Y.name))),U.typeSet}function M(U){const Y=[];if(typeof U!="string")throw new TypeError("Signatures must be strings");const re=U.trim();if(re==="")return Y;const se=re.split(",");for(let le=0;le<se.length;++le){const ge=S(se[le].trim());if(ge.restParam&&le!==se.length-1)throw new SyntaxError('Unexpected rest parameter "'+se[le]+'": only allowed for the last parameter');if(ge.types.length===0)return null;Y.push(ge)}return Y}function y(U){const Y=J(U);return Y?Y.restParam:!1}function x(U){if(!U||U.types.length===0)return FN;if(U.types.length===1)return u(U.types[0].name).test;if(U.types.length===2){const Y=u(U.types[0].name).test,re=u(U.types[1].name).test;return function(le){return Y(le)||re(le)}}else{const Y=U.types.map(function(re){return u(re.name).test});return function(se){for(let le=0;le<Y.length;le++)if(Y[le](se))return!0;return!1}}}function w(U){let Y,re,se;if(y(U)){Y=H(U).map(x);const le=Y.length,ge=x(J(U)),_e=function(Se){for(let Me=le;Me<Se.length;Me++)if(!ge(Se[Me]))return!1;return!0};return function(Me){for(let Ae=0;Ae<Y.length;Ae++)if(!Y[Ae](Me[Ae]))return!1;return _e(Me)&&Me.length>=le+1}}else return U.length===0?function(ge){return ge.length===0}:U.length===1?(re=x(U[0]),function(ge){return re(ge[0])&&ge.length===1}):U.length===2?(re=x(U[0]),se=x(U[1]),function(ge){return re(ge[0])&&se(ge[1])&&ge.length===2}):(Y=U.map(x),function(ge){for(let _e=0;_e<Y.length;_e++)if(!Y[_e](ge[_e]))return!1;return ge.length===Y.length})}function g(U,Y){return Y<U.length?U[Y]:y(U)?J(U):null}function N(U,Y){const re=g(U,Y);return re?_(re):new Set}function E(U){return U.conversion===null||U.conversion===void 0}function b(U,Y){const re=new Set;return U.forEach(se=>{const le=N(se.params,Y);let ge;for(ge of le)re.add(ge)}),re.has("any")?["any"]:Array.from(re)}function D(U,Y,re){let se,le;const ge=U||"unnamed";let _e=re,Se;for(Se=0;Se<Y.length;Se++){const gt=[];if(_e.forEach(Ut=>{const Ze=g(Ut.params,Se),ur=x(Ze);(Se<Ut.params.length||y(Ut.params))&&ur(Y[Se])&&gt.push(Ut)}),gt.length===0){if(le=b(_e,Se),le.length>0){const Ut=f(Y[Se]);return se=new TypeError("Unexpected type of argument in function "+ge+" (expected: "+le.join(" or ")+", actual: "+Ut.join(" | ")+", index: "+Se+")"),se.data={category:"wrongType",fn:ge,index:Se,actual:Ut,expected:le},se}}else _e=gt}const Me=_e.map(function(gt){return y(gt.params)?1/0:gt.params.length});if(Y.length<Math.min.apply(null,Me))return le=b(_e,Se),se=new TypeError("Too few arguments in function "+ge+" (expected: "+le.join(" or ")+", index: "+Y.length+")"),se.data={category:"tooFewArgs",fn:ge,index:Y.length,expected:le},se;const Ae=Math.max.apply(null,Me);if(Y.length>Ae)return se=new TypeError("Too many arguments in function "+ge+" (expected: "+Ae+", actual: "+Y.length+")"),se.data={category:"tooManyArgs",fn:ge,index:Y.length,expectedLength:Ae},se;const ht=[];for(let gt=0;gt<Y.length;++gt)ht.push(f(Y[gt]).join("|"));return se=new TypeError('Arguments of type "'+ht.join(", ")+'" do not match any of the defined signatures of function '+ge+"."),se.data={category:"mismatch",actual:ht},se}function I(U){let Y=a.length+1;for(let re=0;re<U.types.length;re++)E(U.types[re])&&(Y=Math.min(Y,U.types[re].typeIndex));return Y}function F(U){let Y=i+1;for(let re=0;re<U.types.length;re++)E(U.types[re])||(Y=Math.min(Y,U.types[re].conversionIndex));return Y}function O(U,Y){if(U.hasAny){if(!Y.hasAny)return 1}else if(Y.hasAny)return-1;if(U.restParam){if(!Y.restParam)return 1}else if(Y.restParam)return-1;if(U.hasConversion){if(!Y.hasConversion)return 1}else if(Y.hasConversion)return-1;const re=I(U)-I(Y);if(re<0)return-1;if(re>0)return 1;const se=F(U)-F(Y);return se<0?-1:se>0?1:0}function P(U,Y){const re=U.params,se=Y.params,le=J(re),ge=J(se),_e=y(re),Se=y(se);if(_e&&le.hasAny){if(!Se||!ge.hasAny)return 1}else if(Se&&ge.hasAny)return-1;let Me=0,Ae=0,ht;for(ht of re)ht.hasAny&&++Me,ht.hasConversion&&++Ae;let gt=0,Ut=0;for(ht of se)ht.hasAny&&++gt,ht.hasConversion&&++Ut;if(Me!==gt)return Me-gt;if(_e&&le.hasConversion){if(!Se||!ge.hasConversion)return 1}else if(Se&&ge.hasConversion)return-1;if(Ae!==Ut)return Ae-Ut;if(_e){if(!Se)return 1}else if(Se)return-1;const Ze=(re.length-se.length)*(_e?-1:1);if(Ze!==0)return Ze;const ur=[];let B=0;for(let he=0;he<re.length;++he){const De=O(re[he],se[he]);ur.push(De),B+=De}if(B!==0)return B;let ne;for(ne of ur)if(ne!==0)return ne;return 0}function z(U){if(U.length===0)return[];const Y=U.map(u);U.length>1&&Y.sort((le,ge)=>le.index-ge.index);let re=Y[0].conversionsTo;if(U.length===1)return re;re=re.concat([]);const se=new Set(U);for(let le=1;le<Y.length;++le){let ge;for(ge of Y[le].conversionsTo)se.has(ge.from)||(re.push(ge),se.add(ge.from))}return re}function $(U,Y){let re=Y;if(U.some(le=>le.hasConversion)){const le=y(U),ge=U.map(L);re=function(){const Se=[],Me=le?arguments.length-1:arguments.length;for(let Ae=0;Ae<Me;Ae++)Se[Ae]=ge[Ae](arguments[Ae]);return le&&(Se[Me]=arguments[Me].map(ge[Me])),Y.apply(this,Se)}}let se=re;if(y(U)){const le=U.length-1;se=function(){return re.apply(this,ee(arguments,0,le).concat([ee(arguments,le)]))}}return se}function L(U){let Y,re,se,le;const ge=[],_e=[];switch(U.types.forEach(function(Se){Se.conversion&&(ge.push(u(Se.conversion.from).test),_e.push(Se.conversion.convert))}),_e.length){case 0:return function(Me){return Me};case 1:return Y=ge[0],se=_e[0],function(Me){return Y(Me)?se(Me):Me};case 2:return Y=ge[0],re=ge[1],se=_e[0],le=_e[1],function(Me){return Y(Me)?se(Me):re(Me)?le(Me):Me};default:return function(Me){for(let Ae=0;Ae<_e.length;Ae++)if(ge[Ae](Me))return _e[Ae](Me);return Me}}}function q(U){function Y(re,se,le){if(se<re.length){const ge=re[se];let _e=[];if(ge.restParam){const Se=ge.types.filter(E);Se.length<ge.types.length&&_e.push({types:Se,name:"..."+Se.map(Me=>Me.name).join("|"),hasAny:Se.some(Me=>Me.isAny),hasConversion:!1,restParam:!0}),_e.push(ge)}else _e=ge.types.map(function(Se){return{types:[Se],name:Se.name,hasAny:Se.isAny,hasConversion:Se.conversion,restParam:!1}});return oe(_e,function(Se){return Y(re,se+1,le.concat([Se]))})}else return[le]}return Y(U,0,[])}function ae(U,Y){const re=Math.max(U.length,Y.length);for(let Se=0;Se<re;Se++){const Me=N(U,Se),Ae=N(Y,Se);let ht=!1,gt;for(gt of Ae)if(Me.has(gt)){ht=!0;break}if(!ht)return!1}const se=U.length,le=Y.length,ge=y(U),_e=y(Y);return ge?_e?se===le:le>=se:_e?se>=le:se===le}function j(U){return U.map(Y=>ze(Y)?Te(Y.referToSelf.callback):ke(Y)?me(Y.referTo.references,Y.referTo.callback):Y)}function K(U,Y,re){const se=[];let le;for(le of U){let ge=re[le];if(typeof ge!="number")throw new TypeError('No definition for referenced signature "'+le+'"');if(ge=Y[ge],typeof ge!="function")return!1;se.push(ge)}return se}function V(U,Y,re){const se=j(U),le=new Array(se.length).fill(!1);let ge=!0;for(;ge;){ge=!1;let _e=!0;for(let Se=0;Se<se.length;++Se){if(le[Se])continue;const Me=se[Se];if(ze(Me))se[Se]=Me.referToSelf.callback(re),se[Se].referToSelf=Me.referToSelf,le[Se]=!0,_e=!1;else if(ke(Me)){const Ae=K(Me.referTo.references,se,Y);Ae?(se[Se]=Me.referTo.callback.apply(this,Ae),se[Se].referTo=Me.referTo,le[Se]=!0,_e=!1):ge=!0}}if(_e&&ge)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return se}function pe(U){const Y=/\bthis(\(|\.signatures\b)/;Object.keys(U).forEach(re=>{const se=U[re];if(Y.test(se.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ue(U,Y){if(s.createCount++,Object.keys(Y).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&pe(Y);const re=[],se=[],le={},ge=[];let _e;for(_e in Y){if(!Object.prototype.hasOwnProperty.call(Y,_e))continue;const zt=M(_e);if(!zt)continue;re.forEach(function(Ti){if(ae(Ti,zt))throw new TypeError('Conflicting signatures "'+T(Ti)+'" and "'+T(zt)+'".')}),re.push(zt);const un=se.length;se.push(Y[_e]);const bf=zt.map(C);let ks;for(ks of q(bf)){const Ti=T(ks);ge.push({params:ks,name:Ti,fn:un}),ks.every(yl=>!yl.hasConversion)&&(le[Ti]=un)}}ge.sort(P);const Se=V(se,le,Un);let Me;for(Me in le)Object.prototype.hasOwnProperty.call(le,Me)&&(le[Me]=Se[le[Me]]);const Ae=[],ht=new Map;for(Me of ge)ht.has(Me.name)||(Me.fn=Se[Me.fn],Ae.push(Me),ht.set(Me.name,Me));const gt=Ae[0]&&Ae[0].params.length<=2&&!y(Ae[0].params),Ut=Ae[1]&&Ae[1].params.length<=2&&!y(Ae[1].params),Ze=Ae[2]&&Ae[2].params.length<=2&&!y(Ae[2].params),ur=Ae[3]&&Ae[3].params.length<=2&&!y(Ae[3].params),B=Ae[4]&&Ae[4].params.length<=2&&!y(Ae[4].params),ne=Ae[5]&&Ae[5].params.length<=2&&!y(Ae[5].params),he=gt&&Ut&&Ze&&ur&&B&&ne;for(let zt=0;zt<Ae.length;++zt)Ae[zt].test=w(Ae[zt].params);const De=gt?x(Ae[0].params[0]):ta,Ge=Ut?x(Ae[1].params[0]):ta,dt=Ze?x(Ae[2].params[0]):ta,Ir=ur?x(Ae[3].params[0]):ta,ai=B?x(Ae[4].params[0]):ta,Kh=ne?x(Ae[5].params[0]):ta,Jh=gt?x(Ae[0].params[1]):ta,Ci=Ut?x(Ae[1].params[1]):ta,Yh=Ze?x(Ae[2].params[1]):ta,Zh=ur?x(Ae[3].params[1]):ta,Oo=B?x(Ae[4].params[1]):ta,mf=ne?x(Ae[5].params[1]):ta;for(let zt=0;zt<Ae.length;++zt)Ae[zt].implementation=$(Ae[zt].params,Ae[zt].fn);const hf=gt?Ae[0].implementation:Lo,hl=Ut?Ae[1].implementation:Lo,Bs=Ze?Ae[2].implementation:Lo,ep=ur?Ae[3].implementation:Lo,ja=B?Ae[4].implementation:Lo,pf=ne?Ae[5].implementation:Lo,vf=gt?Ae[0].params.length:-1,pl=Ut?Ae[1].params.length:-1,vl=Ze?Ae[2].params.length:-1,gf=ur?Ae[3].params.length:-1,tp=B?Ae[4].params.length:-1,yf=ne?Ae[5].params.length:-1,rp=he?6:0,Bo=Ae.length,xf=Ae.map(zt=>zt.test),gl=Ae.map(zt=>zt.implementation),js=function(){for(let un=rp;un<Bo;un++)if(xf[un](arguments))return gl[un].apply(this,arguments);return s.onMismatch(U,arguments,Ae)};function Un(zt,un){return arguments.length===vf&&De(zt)&&Jh(un)?hf.apply(this,arguments):arguments.length===pl&&Ge(zt)&&Ci(un)?hl.apply(this,arguments):arguments.length===vl&&dt(zt)&&Yh(un)?Bs.apply(this,arguments):arguments.length===gf&&Ir(zt)&&Zh(un)?ep.apply(this,arguments):arguments.length===tp&&ai(zt)&&Oo(un)?ja.apply(this,arguments):arguments.length===yf&&Kh(zt)&&mf(un)?pf.apply(this,arguments):js.apply(this,arguments)}try{Object.defineProperty(Un,"name",{value:U})}catch{}return Un.signatures=le,Un._typedFunctionData={signatures:Ae,signatureMap:ht},Un}function fe(U,Y,re){throw D(U,Y,re)}function H(U){return ee(U,0,U.length-1)}function J(U){return U[U.length-1]}function ee(U,Y,re){return Array.prototype.slice.call(U,Y,re)}function ie(U,Y){for(let re=0;re<U.length;re++)if(Y(U[re]))return U[re]}function oe(U,Y){return Array.prototype.concat.apply([],U.map(Y))}function ve(){const U=H(arguments).map(re=>T(M(re))),Y=J(arguments);if(typeof Y!="function")throw new TypeError("Callback function expected as last argument");return me(U,Y)}function me(U,Y){return{referTo:{references:U,callback:Y}}}function Te(U){if(typeof U!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:U}}}function ke(U){return U&&typeof U.referTo=="object"&&Array.isArray(U.referTo.references)&&typeof U.referTo.callback=="function"}function ze(U){return U&&typeof U.referToSelf=="object"&&typeof U.referToSelf.callback=="function"}function Oe(U,Y){if(!U)return Y;if(Y&&Y!==U){const re=new Error("Function names do not match (expected: "+U+", actual: "+Y+")");throw re.data={actual:Y,expected:U},re}return U}function $e(U){let Y;for(const re in U)Object.prototype.hasOwnProperty.call(U,re)&&(d(U[re])||typeof U[re].signature=="string")&&(Y=Oe(Y,U[re].name));return Y}function Q(U,Y){let re;for(re in Y)if(Object.prototype.hasOwnProperty.call(Y,re)){if(re in U&&Y[re]!==U[re]){const se=new Error('Signature "'+re+'" is defined twice');throw se.data={signature:re,sourceFunction:Y[re],destFunction:U[re]},se}U[re]=Y[re]}}const te=s;s=function(U){const Y=typeof U=="string",re=Y?1:0;let se=Y?U:"";const le={};for(let ge=re;ge<arguments.length;++ge){const _e=arguments[ge];let Se={},Me;if(typeof _e=="function"?(Me=_e.name,typeof _e.signature=="string"?Se[_e.signature]=_e:d(_e)&&(Se=_e.signatures)):t(_e)&&(Se=_e,Y||(Me=$e(_e))),Object.keys(Se).length===0){const Ae=new TypeError("Argument to 'typed' at index "+ge+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ae.data={index:ge,argument:_e},Ae}Y||(se=Oe(se,Me)),Q(le,Se)}return ue(se||"",le)},s.create=j3,s.createCount=te.createCount,s.onMismatch=fe,s.throwMismatchError=fe,s.createError=D,s.clear=o,s.clearConversions=c,s.addTypes=l,s._findType=u,s.referTo=ve,s.referToSelf=Te,s.convert=v,s.findSignature=m,s.find=h,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(U,Y){let re="any";Y!==!1&&n.has("Object")&&(re="Object"),s.addTypes([U],re)};function ce(U){if(!U||typeof U.from!="string"||typeof U.to!="string"||typeof U.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(U.to===U.from)throw new SyntaxError('Illegal to define conversion from "'+U.from+'" to itself.')}return s.addConversion=function(U){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ce(U);const re=u(U.to),se=re.conversionsTo.find(le=>le.from===U.from);if(se)if(Y&&Y.override)s.removeConversion({from:se.from,to:U.to,convert:se.convert});else throw new Error('There is already a conversion from "'+U.from+'" to "'+re.name+'"');re.conversionsTo.push({from:U.from,convert:U.convert,index:i++})},s.addConversions=function(U,Y){U.forEach(re=>s.addConversion(re,Y))},s.removeConversion=function(U){ce(U);const Y=u(U.to),re=ie(Y.conversionsTo,le=>le.from===U.from);if(!re)throw new Error("Attempt to remove nonexistent conversion from "+U.from+" to "+U.to);if(re.convert!==U.convert)throw new Error("Conversion to remove does not match existing conversion");const se=Y.conversionsTo.indexOf(re);Y.conversionsTo.splice(se,1)},s.resolve=function(U,Y){if(!d(U))throw new TypeError(RN);const re=U._typedFunctionData.signatures;for(let se=0;se<re.length;++se)if(re[se].test(Y))return re[se];return null},s}const Sm=j3();function W(t,e,r,n){function a(i){var s=wk(i,e.map(Ak));return Ek(t,e,i),r(s)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),n&&(a.meta=n),a}function Ek(t,e,r){var n=e.filter(i=>!Sk(i)).every(i=>r[i]!==void 0);if(!n){var a=e.filter(i=>r[i]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(i=>'"'.concat(i,'"')).join(", "),"."))}}function Sk(t){return t&&t[0]==="?"}function Ak(t){return t&&t[0]==="?"?t.slice(1):t}function We(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function As(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var Wi=Math.sign||function(t){return t>0?1:t<0?-1:0},Dk=Math.log2||function(e){return Math.log(e)/Math.LN2},Ck=Math.log10||function(e){return Math.log(e)/Math.LN10},Tk=Math.log1p||function(t){return Math.log(t+1)},Mk=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},Ik=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Wp(t,e,r){var n={2:"0b",8:"0o",16:"0x"},a=n[e],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!We(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!We(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),i="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(a).concat(t.toString(e)).concat(i)}function ro(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:a}=k3(e);switch(r){case"fixed":return $3(t,n);case"exponential":return L3(t,n);case"engineering":return Pk(t,n);case"bin":return Wp(t,2,a);case"oct":return Wp(t,8,a);case"hex":return Wp(t,16,a);case"auto":return Fk(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var i=arguments[2],s=arguments[4];return i!=="."?i+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function k3(t){var e="auto",r,n;if(t!==void 0)if(Xe(t))r=t;else if(ut(t))r=t.toNumber();else if(Mh(t))t.precision!==void 0&&(r=ON(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=ON(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function nf(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],a=parseFloat(e[4]||"0"),i=n.indexOf(".");a+=i!==-1?i-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(u){return a-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return s.length===0&&(s.push(0),a++),{sign:r,coefficients:s,exponent:a}}function Pk(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=nf(t),n=Ph(r,e),a=n.exponent,i=n.coefficients,s=a%3===0?a:a<0?a-3-a%3:a-a%3;if(Xe(e))for(;e>i.length||a-s+1>i.length;)i.push(0);else for(var u=Math.abs(a-s)-(i.length-1),l=0;l<u;l++)i.push(0);for(var o=Math.abs(a-s),c=1;o>0;)c++,o--;var f=i.slice(c).join(""),d=Xe(e)&&f.length||f.match(/[1-9]/)?"."+f:"",m=i.slice(0,c).join("")+d+"e"+(a>=0?"+":"")+s.toString();return n.sign+m}function $3(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=nf(t),n=typeof e=="number"?Ph(r,r.exponent+1+e):r,a=n.coefficients,i=n.exponent+1,s=i+(e||0);return a.length<s&&(a=a.concat(Nu(s-a.length))),i<0&&(a=Nu(-i+1).concat(a),i=1),i<a.length&&a.splice(i,0,i===0?"0.":"."),n.sign+a.join("")}function L3(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=nf(t),n=e?Ph(r,e):r,a=n.coefficients,i=n.exponent;a.length<e&&(a=a.concat(Nu(e-a.length)));var s=a.shift();return n.sign+s+(a.length>0?"."+a.join(""):"")+"e"+(i>=0?"+":"")+i}function Fk(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=BN(r==null?void 0:r.lowerExp,-3),a=BN(r==null?void 0:r.upperExp,5),i=nf(t),s=e?Ph(i,e):i;if(s.exponent<n||s.exponent>=a)return L3(t,e);var u=s.coefficients,l=s.exponent;u.length<e&&(u=u.concat(Nu(e-u.length))),u=u.concat(Nu(l-u.length+1+(u.length<e?e-u.length:0))),u=Nu(-l).concat(u);var o=l>0?l:0;return o<u.length-1&&u.splice(o+1,0,"."),s.sign+u.join("")}function Ph(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var a=n.splice(e,n.length-e);if(a[0]>=5){var i=e-1;for(n[i]++;n[i]===10;)n.pop(),i===0&&(n.unshift(0),r.exponent++,i++),i--,n[i]++}}return r}function Nu(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Rk(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Kr(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}var Ok=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},Bk=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},jk=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},kk=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},$k=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},Lk=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function zk(t,e){var r=!0,n=e>0?!0:e<0?!1:1/e===1/0;return r^n?-t:t}function ON(t,e){if(Xe(t))return t;if(ut(t))return t.toNumber();e()}function BN(t,e){return Xe(t)?t:ut(t)?t.toNumber():e}var z3=function(){return z3=Sm.create,Sm},Vk=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Uk=W("typed",Vk,function(e){var{BigNumber:r,Complex:n,DenseMatrix:a,Fraction:i}=e,s=z3();return s.clear(),s.addTypes([{name:"number",test:Xe},{name:"Complex",test:hi},{name:"BigNumber",test:ut},{name:"bigint",test:oc},{name:"Fraction",test:tf},{name:"Unit",test:Gn},{name:"identifier",test:u=>yr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:yr},{name:"Chain",test:O3},{name:"Array",test:Wt},{name:"Matrix",test:Ye},{name:"DenseMatrix",test:Em},{name:"SparseMatrix",test:Js},{name:"Range",test:Cy},{name:"Index",test:Th},{name:"boolean",test:uk},{name:"ResultSet",test:lk},{name:"Help",test:P3},{name:"function",test:F3},{name:"Date",test:ck},{name:"RegExp",test:fk},{name:"null",test:dk},{name:"undefined",test:mk},{name:"AccessorNode",test:co},{name:"ArrayNode",test:aa},{name:"AssignmentNode",test:hk},{name:"BlockNode",test:pk},{name:"ConditionalNode",test:vk},{name:"ConstantNode",test:Nt},{name:"FunctionNode",test:xs},{name:"FunctionAssignmentNode",test:rf},{name:"IndexNode",test:rl},{name:"Node",test:Ht},{name:"ObjectNode",test:Ih},{name:"OperatorNode",test:br},{name:"ParenthesisNode",test:_i},{name:"RangeNode",test:gk},{name:"RelationalNode",test:yk},{name:"SymbolNode",test:Qr},{name:"Map",test:R3},{name:"Object",test:Mh}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Yf(l),Rk(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||Zf(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||Zf(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return r||Yf(l),new r(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return i||ed(l),new i(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||Zf(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){i||ed(l);var o=new i(l);if(o.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return o}},{from:"string",to:"number",convert:function(l){var o=Number(l);if(isNaN(o))throw new Error('Cannot convert "'+l+'" to a number');return o}},{from:"string",to:"BigNumber",convert:function(l){r||Yf(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){i||ed(l);try{return new i(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||Zf(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Yf(l),new r(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return i||ed(l),new i(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return a||qk(),new a(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(u,l,o)=>{var c=s.createError(u,l,o);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Kn(l[0])&&o.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(u,l,o)=>{var c=s.createError(u,l,o);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Kn(l[0])&&o.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw f.data=c.data,f}throw c},s});function Yf(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Zf(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function qk(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function ed(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var Hk="ResultSet",Gk=[],Wk=W(Hk,Gk,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var uu=9e15,Ds=1e9,wg="0123456789abcdef",Am="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Dm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ng={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-uu,maxE:uu,crypto:!1},V3,fi,st=!0,Fh="[DecimalError] ",bs=Fh+"Invalid argument: ",U3=Fh+"Precision limit exceeded",q3=Fh+"crypto unavailable",H3="[object Decimal]",yn=Math.floor,Rr=Math.pow,Qk=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Xk=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Kk=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,G3=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ca=1e7,et=7,Jk=9007199254740991,Yk=Am.length-1,_g=Dm.length-1,Ee={toStringTag:H3};Ee.absoluteValue=Ee.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ke(t)};Ee.ceil=function(){return Ke(new this.constructor(this),this.e+1,2)};Ee.clampedTo=Ee.clamp=function(t,e){var r,n=this,a=n.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(bs+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new a(n)};Ee.comparedTo=Ee.cmp=function(t){var e,r,n,a,i=this,s=i.d,u=(t=new i.constructor(t)).d,l=i.s,o=t.s;if(!s||!u)return!l||!o?NaN:l!==o?l:s===u?0:!s^l<0?1:-1;if(!s[0]||!u[0])return s[0]?l:u[0]?-o:0;if(l!==o)return l;if(i.e!==t.e)return i.e>t.e^l<0?1:-1;for(n=s.length,a=u.length,e=0,r=n<a?n:a;e<r;++e)if(s[e]!==u[e])return s[e]>u[e]^l<0?1:-1;return n===a?0:n>a^l<0?1:-1};Ee.cosine=Ee.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=Zk(n,J3(n,r)),n.precision=t,n.rounding=e,Ke(fi==2||fi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Ee.cubeRoot=Ee.cbrt=function(){var t,e,r,n,a,i,s,u,l,o,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(st=!1,i=c.s*Rr(c.s*c,1/3),!i||Math.abs(i)==1/0?(r=en(c.d),t=c.e,(i=(t-r.length+1)%3)&&(r+=i==1||i==-2?"0":"00"),i=Rr(r,1/3),t=yn((t+1)/3)-(t%3==(t<0?-1:2)),i==1/0?r="5e"+t:(r=i.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(i.toString()),s=(t=f.precision)+3;;)if(u=n,l=u.times(u).times(u),o=l.plus(c),n=tr(o.plus(c).times(u),o.plus(l),s+2,1),en(u.d).slice(0,s)===(r=en(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!a&&r=="4999"){if(!a&&(Ke(u,t+1,0),u.times(u).times(u).eq(c))){n=u;break}s+=4,a=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ke(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return st=!0,Ke(n,t,f.rounding,e)};Ee.decimalPlaces=Ee.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-yn(this.e/et))*et,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Ee.dividedBy=Ee.div=function(t){return tr(this,new this.constructor(t))};Ee.dividedToIntegerBy=Ee.divToInt=function(t){var e=this,r=e.constructor;return Ke(tr(e,new r(t),0,1,1),r.precision,r.rounding)};Ee.equals=Ee.eq=function(t){return this.cmp(t)===0};Ee.floor=function(){return Ke(new this.constructor(this),this.e+1,3)};Ee.greaterThan=Ee.gt=function(t){return this.cmp(t)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ee.hyperbolicCosine=Ee.cosh=function(){var t,e,r,n,a,i=this,s=i.constructor,u=new s(1);if(!i.isFinite())return new s(i.s?1/0:NaN);if(i.isZero())return u;r=s.precision,n=s.rounding,s.precision=r+Math.max(i.e,i.sd())+4,s.rounding=1,a=i.d.length,a<32?(t=Math.ceil(a/3),e=(1/Oh(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),i=$u(s,1,i.times(e),new s(1),!0);for(var l,o=t,c=new s(8);o--;)l=i.times(i),i=u.minus(l.times(c.minus(l.times(c))));return Ke(i,s.precision=r,s.rounding=n,!0)};Ee.hyperbolicSine=Ee.sinh=function(){var t,e,r,n,a=this,i=a.constructor;if(!a.isFinite()||a.isZero())return new i(a);if(e=i.precision,r=i.rounding,i.precision=e+Math.max(a.e,a.sd())+4,i.rounding=1,n=a.d.length,n<3)a=$u(i,2,a,a,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,a=a.times(1/Oh(5,t)),a=$u(i,2,a,a,!0);for(var s,u=new i(5),l=new i(16),o=new i(20);t--;)s=a.times(a),a=a.times(u.plus(s.times(l.times(s).plus(o))))}return i.precision=e,i.rounding=r,Ke(a,e,r,!0)};Ee.hyperbolicTangent=Ee.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,tr(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Ee.inverseCosine=Ee.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,a=e.rounding;return r!==-1?r===0?t.isNeg()?qa(e,n,a):new e(0):new e(NaN):t.isZero()?qa(e,n+4,a).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=a,t.times(2))};Ee.inverseHyperbolicCosine=Ee.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,st=!1,r=r.times(r).minus(1).sqrt().plus(r),st=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Ee.inverseHyperbolicSine=Ee.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,st=!1,r=r.times(r).plus(1).sqrt().plus(r),st=!0,n.precision=t,n.rounding=e,r.ln())};Ee.inverseHyperbolicTangent=Ee.atanh=function(){var t,e,r,n,a=this,i=a.constructor;return a.isFinite()?a.e>=0?new i(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=i.precision,e=i.rounding,n=a.sd(),Math.max(n,t)<2*-a.e-1?Ke(new i(a),t,e,!0):(i.precision=r=n-a.e,a=tr(a.plus(1),new i(1).minus(a),r+t,1),i.precision=t+4,i.rounding=1,a=a.ln(),i.precision=t,i.rounding=e,a.times(.5))):new i(NaN)};Ee.inverseSine=Ee.asin=function(){var t,e,r,n,a=this,i=a.constructor;return a.isZero()?new i(a):(e=a.abs().cmp(1),r=i.precision,n=i.rounding,e!==-1?e===0?(t=qa(i,r+4,n).times(.5),t.s=a.s,t):new i(NaN):(i.precision=r+6,i.rounding=1,a=a.div(new i(1).minus(a.times(a)).sqrt().plus(1)).atan(),i.precision=r,i.rounding=n,a.times(2)))};Ee.inverseTangent=Ee.atan=function(){var t,e,r,n,a,i,s,u,l,o=this,c=o.constructor,f=c.precision,d=c.rounding;if(o.isFinite()){if(o.isZero())return new c(o);if(o.abs().eq(1)&&f+4<=_g)return s=qa(c,f+4,d).times(.25),s.s=o.s,s}else{if(!o.s)return new c(NaN);if(f+4<=_g)return s=qa(c,f+4,d).times(.5),s.s=o.s,s}for(c.precision=u=f+10,c.rounding=1,r=Math.min(28,u/et+2|0),t=r;t;--t)o=o.div(o.times(o).plus(1).sqrt().plus(1));for(st=!1,e=Math.ceil(u/et),n=1,l=o.times(o),s=new c(o),a=o;t!==-1;)if(a=a.times(l),i=s.minus(a.div(n+=2)),a=a.times(l),s=i.plus(a.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===i.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),st=!0,Ke(s,c.precision=f,c.rounding=d,!0)};Ee.isFinite=function(){return!!this.d};Ee.isInteger=Ee.isInt=function(){return!!this.d&&yn(this.e/et)>this.d.length-2};Ee.isNaN=function(){return!this.s};Ee.isNegative=Ee.isNeg=function(){return this.s<0};Ee.isPositive=Ee.isPos=function(){return this.s>0};Ee.isZero=function(){return!!this.d&&this.d[0]===0};Ee.lessThan=Ee.lt=function(t){return this.cmp(t)<0};Ee.lessThanOrEqualTo=Ee.lte=function(t){return this.cmp(t)<1};Ee.logarithm=Ee.log=function(t){var e,r,n,a,i,s,u,l,o=this,c=o.constructor,f=c.precision,d=c.rounding,m=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=o.d,o.s<0||!r||!r[0]||o.eq(1))return new c(r&&!r[0]?-1/0:o.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)i=!0;else{for(a=r[0];a%10===0;)a/=10;i=a!==1}if(st=!1,u=f+m,s=Qi(o,u),n=e?Cm(c,u+10):Qi(t,u),l=tr(s,n,u,1),Lc(l.d,a=f,d))do if(u+=10,s=Qi(o,u),n=e?Cm(c,u+10):Qi(t,u),l=tr(s,n,u,1),!i){+en(l.d).slice(a+1,a+15)+1==1e14&&(l=Ke(l,f+1,0));break}while(Lc(l.d,a+=10,d));return st=!0,Ke(l,f,d)};Ee.minus=Ee.sub=function(t){var e,r,n,a,i,s,u,l,o,c,f,d,m=this,h=m.constructor;if(t=new h(t),!m.d||!t.d)return!m.s||!t.s?t=new h(NaN):m.d?t.s=-t.s:t=new h(t.d||m.s!==t.s?m:NaN),t;if(m.s!=t.s)return t.s=-t.s,m.plus(t);if(o=m.d,d=t.d,u=h.precision,l=h.rounding,!o[0]||!d[0]){if(d[0])t.s=-t.s;else if(o[0])t=new h(m);else return new h(l===3?-0:0);return st?Ke(t,u,l):t}if(r=yn(t.e/et),c=yn(m.e/et),o=o.slice(),i=c-r,i){for(f=i<0,f?(e=o,i=-i,s=d.length):(e=d,r=c,s=o.length),n=Math.max(Math.ceil(u/et),s)+2,i>n&&(i=n,e.length=1),e.reverse(),n=i;n--;)e.push(0);e.reverse()}else{for(n=o.length,s=d.length,f=n<s,f&&(s=n),n=0;n<s;n++)if(o[n]!=d[n]){f=o[n]<d[n];break}i=0}for(f&&(e=o,o=d,d=e,t.s=-t.s),s=o.length,n=d.length-s;n>0;--n)o[s++]=0;for(n=d.length;n>i;){if(o[--n]<d[n]){for(a=n;a&&o[--a]===0;)o[a]=Ca-1;--o[a],o[n]+=Ca}o[n]-=d[n]}for(;o[--s]===0;)o.pop();for(;o[0]===0;o.shift())--r;return o[0]?(t.d=o,t.e=Rh(o,r),st?Ke(t,u,l):t):new h(l===3?-0:0)};Ee.modulo=Ee.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ke(new n(r),n.precision,n.rounding):(st=!1,n.modulo==9?(e=tr(r,t.abs(),0,3,1),e.s*=t.s):e=tr(r,t,0,n.modulo,1),e=e.times(t),st=!0,r.minus(e))};Ee.naturalExponential=Ee.exp=function(){return Eg(this)};Ee.naturalLogarithm=Ee.ln=function(){return Qi(this)};Ee.negated=Ee.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ke(t)};Ee.plus=Ee.add=function(t){var e,r,n,a,i,s,u,l,o,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(o=f.d,c=t.d,u=d.precision,l=d.rounding,!o[0]||!c[0])return c[0]||(t=new d(f)),st?Ke(t,u,l):t;if(i=yn(f.e/et),n=yn(t.e/et),o=o.slice(),a=i-n,a){for(a<0?(r=o,a=-a,s=c.length):(r=c,n=i,s=o.length),i=Math.ceil(u/et),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=o.length,a=c.length,s-a<0&&(a=s,r=c,c=o,o=r),e=0;a;)e=(o[--a]=o[a]+c[a]+e)/Ca|0,o[a]%=Ca;for(e&&(o.unshift(e),++n),s=o.length;o[--s]==0;)o.pop();return t.d=o,t.e=Rh(o,n),st?Ke(t,u,l):t};Ee.precision=Ee.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(bs+t);return r.d?(e=W3(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Ee.round=function(){var t=this,e=t.constructor;return Ke(new e(t),t.e+1,e.rounding)};Ee.sine=Ee.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=t7(n,J3(n,r)),n.precision=t,n.rounding=e,Ke(fi>2?r.neg():r,t,e,!0)):new n(NaN)};Ee.squareRoot=Ee.sqrt=function(){var t,e,r,n,a,i,s=this,u=s.d,l=s.e,o=s.s,c=s.constructor;if(o!==1||!u||!u[0])return new c(!o||o<0&&(!u||u[0])?NaN:u?s:1/0);for(st=!1,o=Math.sqrt(+s),o==0||o==1/0?(e=en(u),(e.length+l)%2==0&&(e+="0"),o=Math.sqrt(e),l=yn((l+1)/2)-(l<0||l%2),o==1/0?e="5e"+l:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(o.toString()),r=(l=c.precision)+3;;)if(i=n,n=i.plus(tr(s,i,r+2,1)).times(.5),en(i.d).slice(0,r)===(e=en(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!a&&e=="4999"){if(!a&&(Ke(i,l+1,0),i.times(i).eq(s))){n=i;break}r+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ke(n,l+1,1),t=!n.times(n).eq(s));break}return st=!0,Ke(n,l,c.rounding,t)};Ee.tangent=Ee.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=tr(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ke(fi==2||fi==4?r.neg():r,t,e,!0)):new n(NaN)};Ee.times=Ee.mul=function(t){var e,r,n,a,i,s,u,l,o,c=this,f=c.constructor,d=c.d,m=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!m||!m[0])return new f(!t.s||d&&!d[0]&&!m||m&&!m[0]&&!d?NaN:!d||!m?t.s/0:t.s*0);for(r=yn(c.e/et)+yn(t.e/et),l=d.length,o=m.length,l<o&&(i=d,d=m,m=i,s=l,l=o,o=s),i=[],s=l+o,n=s;n--;)i.push(0);for(n=o;--n>=0;){for(e=0,a=l+n;a>n;)u=i[a]+m[n]*d[a-n-1]+e,i[a--]=u%Ca|0,e=u/Ca|0;i[a]=(i[a]+e)%Ca|0}for(;!i[--s];)i.pop();return e?++r:i.shift(),t.d=i,t.e=Rh(i,r),st?Ke(t,f.precision,f.rounding):t};Ee.toBinary=function(t,e){return Ty(this,2,t,e)};Ee.toDecimalPlaces=Ee.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(zn(t,0,Ds),e===void 0?e=n.rounding:zn(e,0,8),Ke(r,t+r.e+1,e))};Ee.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Za(n,!0):(zn(t,0,Ds),e===void 0?e=a.rounding:zn(e,0,8),n=Ke(new a(n),t+1,e),r=Za(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Ee.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?r=Za(a):(zn(t,0,Ds),e===void 0?e=i.rounding:zn(e,0,8),n=Ke(new i(a),t+a.e+1,e),r=Za(n,!1,t+n.e+1)),a.isNeg()&&!a.isZero()?"-"+r:r};Ee.toFraction=function(t){var e,r,n,a,i,s,u,l,o,c,f,d,m=this,h=m.d,v=m.constructor;if(!h)return new v(m);if(o=r=new v(1),n=l=new v(0),e=new v(n),i=e.e=W3(h)-m.e-1,s=i%et,e.d[0]=Rr(10,s<0?et+s:s),t==null)t=i>0?e:o;else{if(u=new v(t),!u.isInt()||u.lt(o))throw Error(bs+u);t=u.gt(e)?i>0?e:o:u}for(st=!1,u=new v(en(h)),c=v.precision,v.precision=i=h.length*et*2;f=tr(u,e,0,1,1),a=r.plus(f.times(n)),a.cmp(t)!=1;)r=n,n=a,a=o,o=l.plus(f.times(a)),l=a,a=e,e=u.minus(f.times(a)),u=a;return a=tr(t.minus(r),n,0,1,1),l=l.plus(a.times(o)),r=r.plus(a.times(n)),l.s=o.s=m.s,d=tr(o,n,i,1).minus(m).abs().cmp(tr(l,r,i,1).minus(m).abs())<1?[o,n]:[l,r],v.precision=c,st=!0,d};Ee.toHexadecimal=Ee.toHex=function(t,e){return Ty(this,16,t,e)};Ee.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:zn(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(st=!1,r=tr(r,t,0,e,1).times(t),st=!0,Ke(r)):(t.s=r.s,r=t),r};Ee.toNumber=function(){return+this};Ee.toOctal=function(t,e){return Ty(this,8,t,e)};Ee.toPower=Ee.pow=function(t){var e,r,n,a,i,s,u=this,l=u.constructor,o=+(t=new l(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new l(Rr(+u,o));if(u=new l(u),u.eq(1))return u;if(n=l.precision,i=l.rounding,t.eq(1))return Ke(u,n,i);if(e=yn(t.e/et),e>=t.d.length-1&&(r=o<0?-o:o)<=Jk)return a=Q3(l,u,r,n),t.s<0?new l(1).div(a):Ke(a,n,i);if(s=u.s,s<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(s=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=s,u}return r=Rr(+u,o),e=r==0||!isFinite(r)?yn(o*(Math.log("0."+en(u.d))/Math.LN10+u.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(st=!1,l.rounding=u.s=1,r=Math.min(12,(e+"").length),a=Eg(t.times(Qi(u,n+r)),n),a.d&&(a=Ke(a,n+5,1),Lc(a.d,n,i)&&(e=n+10,a=Ke(Eg(t.times(Qi(u,e+r)),e),e+5,1),+en(a.d).slice(n+1,n+15)+1==1e14&&(a=Ke(a,n+1,0)))),a.s=s,st=!0,l.rounding=i,Ke(a,n,i))};Ee.toPrecision=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Za(n,n.e<=a.toExpNeg||n.e>=a.toExpPos):(zn(t,1,Ds),e===void 0?e=a.rounding:zn(e,0,8),n=Ke(new a(n),t,e),r=Za(n,t<=n.e||n.e<=a.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Ee.toSignificantDigits=Ee.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(zn(t,1,Ds),e===void 0?e=n.rounding:zn(e,0,8)),Ke(new n(r),t,e)};Ee.toString=function(){var t=this,e=t.constructor,r=Za(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Ee.truncated=Ee.trunc=function(){return Ke(new this.constructor(this),this.e+1,1)};Ee.valueOf=Ee.toJSON=function(){var t=this,e=t.constructor,r=Za(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function en(t){var e,r,n,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)n=t[e]+"",r=et-n.length,r&&(i+=$i(r)),i+=n;s=t[e],n=s+"",r=et-n.length,r&&(i+=$i(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}function zn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(bs+t)}function Lc(t,e,r,n){var a,i,s,u;for(i=t[0];i>=10;i/=10)--e;return--e<0?(e+=et,a=0):(a=Math.ceil((e+1)/et),e%=et),i=Rr(10,et-e),u=t[a]%i|0,n==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),s=r<4&&u==99999||r>3&&u==49999||u==5e4||u==0):s=(r<4&&u+1==i||r>3&&u+1==i/2)&&(t[a+1]/i/100|0)==Rr(10,e-2)-1||(u==i/2||u==0)&&(t[a+1]/i/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),s=(n||r<4)&&u==9999||!n&&r>3&&u==4999):s=((n||r<4)&&u+1==i||!n&&r>3&&u+1==i/2)&&(t[a+1]/i/1e3|0)==Rr(10,e-3)-1,s}function Bd(t,e,r){for(var n,a=[0],i,s=0,u=t.length;s<u;){for(i=a.length;i--;)a[i]*=e;for(a[0]+=wg.indexOf(t.charAt(s++)),n=0;n<a.length;n++)a[n]>r-1&&(a[n+1]===void 0&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}function Zk(t,e){var r,n,a;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),a=(1/Oh(4,r)).toString()):(r=16,a="2.3283064365386962890625e-10"),t.precision+=r,e=$u(t,1,e.times(a),new t(1));for(var i=r;i--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var tr=function(){function t(n,a,i){var s,u=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+u,n[l]=s%i|0,u=s/i|0;return u&&n.unshift(u),n}function e(n,a,i,s){var u,l;if(i!=s)l=i>s?1:-1;else for(u=l=0;u<i;u++)if(n[u]!=a[u]){l=n[u]>a[u]?1:-1;break}return l}function r(n,a,i,s){for(var u=0;i--;)n[i]-=u,u=n[i]<a[i]?1:0,n[i]=u*s+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s,u,l){var o,c,f,d,m,h,v,T,S,C,_,M,y,x,w,g,N,E,b,D,I=n.constructor,F=n.s==a.s?1:-1,O=n.d,P=a.d;if(!O||!O[0]||!P||!P[0])return new I(!n.s||!a.s||(O?P&&O[0]==P[0]:!P)?NaN:O&&O[0]==0||!P?F*0:F/0);for(l?(m=1,c=n.e-a.e):(l=Ca,m=et,c=yn(n.e/m)-yn(a.e/m)),b=P.length,N=O.length,S=new I(F),C=S.d=[],f=0;P[f]==(O[f]||0);f++);if(P[f]>(O[f]||0)&&c--,i==null?(x=i=I.precision,s=I.rounding):u?x=i+(n.e-a.e)+1:x=i,x<0)C.push(1),h=!0;else{if(x=x/m+2|0,f=0,b==1){for(d=0,P=P[0],x++;(f<N||d)&&x--;f++)w=d*l+(O[f]||0),C[f]=w/P|0,d=w%P|0;h=d||f<N}else{for(d=l/(P[0]+1)|0,d>1&&(P=t(P,d,l),O=t(O,d,l),b=P.length,N=O.length),g=b,_=O.slice(0,b),M=_.length;M<b;)_[M++]=0;D=P.slice(),D.unshift(0),E=P[0],P[1]>=l/2&&++E;do d=0,o=e(P,_,b,M),o<0?(y=_[0],b!=M&&(y=y*l+(_[1]||0)),d=y/E|0,d>1?(d>=l&&(d=l-1),v=t(P,d,l),T=v.length,M=_.length,o=e(v,_,T,M),o==1&&(d--,r(v,b<T?D:P,T,l))):(d==0&&(o=d=1),v=P.slice()),T=v.length,T<M&&v.unshift(0),r(_,v,M,l),o==-1&&(M=_.length,o=e(P,_,b,M),o<1&&(d++,r(_,b<M?D:P,M,l))),M=_.length):o===0&&(d++,_=[0]),C[f++]=d,o&&_[0]?_[M++]=O[g]||0:(_=[O[g]],M=1);while((g++<N||_[0]!==void 0)&&x--);h=_[0]!==void 0}C[0]||C.shift()}if(m==1)S.e=c,V3=h;else{for(f=1,d=C[0];d>=10;d/=10)f++;S.e=f+c*m-1,Ke(S,u?i+S.e+1:i,s,h)}return S}}();function Ke(t,e,r,n){var a,i,s,u,l,o,c,f,d,m=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(a=1,u=f[0];u>=10;u/=10)a++;if(i=e-a,i<0)i+=et,s=e,c=f[d=0],l=c/Rr(10,a-s-1)%10|0;else if(d=Math.ceil((i+1)/et),u=f.length,d>=u)if(n){for(;u++<=d;)f.push(0);c=l=0,a=1,i%=et,s=i-et+1}else break e;else{for(c=u=f[d],a=1;u>=10;u/=10)a++;i%=et,s=i-et+a,l=s<0?0:c/Rr(10,a-s-1)%10|0}if(n=n||e<0||f[d+1]!==void 0||(s<0?c:c%Rr(10,a-s-1)),o=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(i>0?s>0?c/Rr(10,a-s):0:f[d-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,o?(e-=t.e+1,f[0]=Rr(10,(et-e%et)%et),t.e=-e||0):f[0]=t.e=0,t;if(i==0?(f.length=d,u=1,d--):(f.length=d+1,u=Rr(10,et-i),f[d]=s>0?(c/Rr(10,a-s)%Rr(10,s)|0)*u:0),o)for(;;)if(d==0){for(i=1,s=f[0];s>=10;s/=10)i++;for(s=f[0]+=u,u=1;s>=10;s/=10)u++;i!=u&&(t.e++,f[0]==Ca&&(f[0]=1));break}else{if(f[d]+=u,f[d]!=Ca)break;f[d--]=0,u=1}for(i=f.length;f[--i]===0;)f.pop()}return st&&(t.e>m.maxE?(t.d=null,t.e=NaN):t.e<m.minE&&(t.e=0,t.d=[0])),t}function Za(t,e,r){if(!t.isFinite())return K3(t);var n,a=t.e,i=en(t.d),s=i.length;return e?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+$i(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(t.e<0?"e":"e+")+t.e):a<0?(i="0."+$i(-a-1)+i,r&&(n=r-s)>0&&(i+=$i(n))):a>=s?(i+=$i(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+$i(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=$i(n))),i}function Rh(t,e){var r=t[0];for(e*=et;r>=10;r/=10)e++;return e}function Cm(t,e,r){if(e>Yk)throw st=!0,r&&(t.precision=r),Error(U3);return Ke(new t(Am),e,1,!0)}function qa(t,e,r){if(e>_g)throw Error(U3);return Ke(new t(Dm),e,r,!0)}function W3(t){var e=t.length-1,r=e*et+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function $i(t){for(var e="";t--;)e+="0";return e}function Q3(t,e,r,n){var a,i=new t(1),s=Math.ceil(n/et+4);for(st=!1;;){if(r%2&&(i=i.times(e),kN(i.d,s)&&(a=!0)),r=yn(r/2),r===0){r=i.d.length-1,a&&i.d[r]===0&&++i.d[r];break}e=e.times(e),kN(e.d,s)}return st=!0,i}function jN(t){return t.d[t.d.length-1]&1}function X3(t,e,r){for(var n,a,i=new t(e[0]),s=0;++s<e.length;){if(a=new t(e[s]),!a.s){i=a;break}n=i.cmp(a),(n===r||n===0&&i.s===r)&&(i=a)}return i}function Eg(t,e){var r,n,a,i,s,u,l,o=0,c=0,f=0,d=t.constructor,m=d.rounding,h=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(st=!1,l=h):l=e,u=new d(.03125);t.e>-2;)t=t.times(u),f+=5;for(n=Math.log(Rr(2,f))/Math.LN10*2+5|0,l+=n,r=i=s=new d(1),d.precision=l;;){if(i=Ke(i.times(t),l,1),r=r.times(++c),u=s.plus(tr(i,r,l,1)),en(u.d).slice(0,l)===en(s.d).slice(0,l)){for(a=f;a--;)s=Ke(s.times(s),l,1);if(e==null)if(o<3&&Lc(s.d,l-n,m,o))d.precision=l+=10,r=i=u=new d(1),c=0,o++;else return Ke(s,d.precision=h,m,st=!0);else return d.precision=h,s}s=u}}function Qi(t,e){var r,n,a,i,s,u,l,o,c,f,d,m=1,h=10,v=t,T=v.d,S=v.constructor,C=S.rounding,_=S.precision;if(v.s<0||!T||!T[0]||!v.e&&T[0]==1&&T.length==1)return new S(T&&!T[0]?-1/0:v.s!=1?NaN:T?0:v);if(e==null?(st=!1,c=_):c=e,S.precision=c+=h,r=en(T),n=r.charAt(0),Math.abs(i=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=en(v.d),n=r.charAt(0),m++;i=v.e,n>1?(v=new S("0."+r),i++):v=new S(n+"."+r.slice(1))}else return o=Cm(S,c+2,_).times(i+""),v=Qi(new S(n+"."+r.slice(1)),c-h).plus(o),S.precision=_,e==null?Ke(v,_,C,st=!0):v;for(f=v,l=s=v=tr(v.minus(1),v.plus(1),c,1),d=Ke(v.times(v),c,1),a=3;;){if(s=Ke(s.times(d),c,1),o=l.plus(tr(s,new S(a),c,1)),en(o.d).slice(0,c)===en(l.d).slice(0,c))if(l=l.times(2),i!==0&&(l=l.plus(Cm(S,c+2,_).times(i+""))),l=tr(l,new S(m),c,1),e==null)if(Lc(l.d,c-h,C,u))S.precision=c+=h,o=s=v=tr(f.minus(1),f.plus(1),c,1),d=Ke(v.times(v),c,1),a=u=1;else return Ke(l,S.precision=_,C,st=!0);else return S.precision=_,l;l=o,a+=2}}function K3(t){return String(t.s*t.s/0)}function jd(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(n,a),e){if(a-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%et,r<0&&(n+=et),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=et;n<a;)t.d.push(+e.slice(n,n+=et));e=e.slice(n),n=et-e.length}else n-=a;for(;n--;)e+="0";t.d.push(+e),st&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function e7(t,e){var r,n,a,i,s,u,l,o,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),G3.test(e))return jd(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Xk.test(e))r=16,e=e.toLowerCase();else if(Qk.test(e))r=2;else if(Kk.test(e))r=8;else throw Error(bs+e);for(i=e.search(/p/i),i>0?(l=+e.slice(i+1),e=e.substring(2,i)):e=e.slice(2),i=e.indexOf("."),s=i>=0,n=t.constructor,s&&(e=e.replace(".",""),u=e.length,i=u-i,a=Q3(n,new n(r),i,i*2)),o=Bd(e,r,Ca),c=o.length-1,i=c;o[i]===0;--i)o.pop();return i<0?new n(t.s*0):(t.e=Rh(o,c),t.d=o,st=!1,s&&(t=tr(t,a,u*4)),l&&(t=t.times(Math.abs(l)<54?Rr(2,l):ws.pow(2,l))),st=!0,t)}function t7(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:$u(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/Oh(5,r)),e=$u(t,2,e,e);for(var a,i=new t(5),s=new t(16),u=new t(20);r--;)a=e.times(e),e=e.times(i.plus(a.times(s.times(a).minus(u))));return e}function $u(t,e,r,n,a){var i,s,u,l,o=t.precision,c=Math.ceil(o/et);for(st=!1,l=r.times(r),u=new t(n);;){if(s=tr(u.times(l),new t(e++*e++),o,1),u=a?n.plus(s):n.minus(s),n=tr(s.times(l),new t(e++*e++),o,1),s=u.plus(n),s.d[c]!==void 0){for(i=c;s.d[i]===u.d[i]&&i--;);if(i==-1)break}i=u,u=n,n=s,s=i}return st=!0,s.d.length=c+1,s}function Oh(t,e){for(var r=t;--e;)r*=t;return r}function J3(t,e){var r,n=e.s<0,a=qa(t,t.precision,1),i=a.times(.5);if(e=e.abs(),e.lte(i))return fi=n?4:1,e;if(r=e.divToInt(a),r.isZero())fi=n?3:2;else{if(e=e.minus(r.times(a)),e.lte(i))return fi=jN(r)?n?2:3:n?4:1,e;fi=jN(r)?n?1:4:n?3:2}return e.minus(a).abs()}function Ty(t,e,r,n){var a,i,s,u,l,o,c,f,d,m=t.constructor,h=r!==void 0;if(h?(zn(r,1,Ds),n===void 0?n=m.rounding:zn(n,0,8)):(r=m.precision,n=m.rounding),!t.isFinite())c=K3(t);else{for(c=Za(t),s=c.indexOf("."),h?(a=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):a=e,s>=0&&(c=c.replace(".",""),d=new m(1),d.e=c.length-s,d.d=Bd(Za(d),10,a),d.e=d.d.length),f=Bd(c,10,a),i=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=h?"0p+0":"0";else{if(s<0?i--:(t=new m(t),t.d=f,t.e=i,t=tr(t,d,r,n,0,a),f=t.d,i=t.e,o=V3),s=f[r],u=a/2,o=o||f[r+1]!==void 0,o=n<4?(s!==void 0||o)&&(n===0||n===(t.s<0?3:2)):s>u||s===u&&(n===4||o||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,o)for(;++f[--r]>a-1;)f[r]=0,r||(++i,f.unshift(1));for(l=f.length;!f[l-1];--l);for(s=0,c="";s<l;s++)c+=wg.charAt(f[s]);if(h){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)c+="0";for(f=Bd(c,a,e),l=f.length;!f[l-1];--l);for(s=1,c="1.";s<l;s++)c+=wg.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)c="0"+c;c="0."+c}else if(++i>l)for(i-=l;i--;)c+="0";else i<l&&(c=c.slice(0,i)+"."+c.slice(i))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function kN(t,e){if(t.length>e)return t.length=e,!0}function r7(t){return new this(t).abs()}function n7(t){return new this(t).acos()}function a7(t){return new this(t).acosh()}function i7(t,e){return new this(t).plus(e)}function s7(t){return new this(t).asin()}function o7(t){return new this(t).asinh()}function u7(t){return new this(t).atan()}function l7(t){return new this(t).atanh()}function c7(t,e){t=new this(t),e=new this(e);var r,n=this.precision,a=this.rounding,i=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=qa(this,i,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?qa(this,n,a):new this(0),r.s=t.s):!t.d||e.isZero()?(r=qa(this,i,1).times(.5),r.s=t.s):e.s<0?(this.precision=i,this.rounding=1,r=this.atan(tr(t,e,i,1)),e=qa(this,i,1),this.precision=n,this.rounding=a,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(tr(t,e,i,1)),r}function f7(t){return new this(t).cbrt()}function d7(t){return Ke(t=new this(t),t.e+1,2)}function m7(t,e,r){return new this(t).clamp(e,r)}function h7(t){if(!t||typeof t!="object")throw Error(Fh+"Object expected");var e,r,n,a=t.defaults===!0,i=["precision",1,Ds,"rounding",0,8,"toExpNeg",-uu,0,"toExpPos",0,uu,"maxE",0,uu,"minE",-uu,0,"modulo",0,9];for(e=0;e<i.length;e+=3)if(r=i[e],a&&(this[r]=Ng[r]),(n=t[r])!==void 0)if(yn(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(bs+r+": "+n);if(r="crypto",a&&(this[r]=Ng[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(q3);else this[r]=!1;else throw Error(bs+r+": "+n);return this}function p7(t){return new this(t).cos()}function v7(t){return new this(t).cosh()}function Y3(t){var e,r,n;function a(i){var s,u,l,o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,$N(i)){o.s=i.s,st?!i.d||i.e>a.maxE?(o.e=NaN,o.d=null):i.e<a.minE?(o.e=0,o.d=[0]):(o.e=i.e,o.d=i.d.slice()):(o.e=i.e,o.d=i.d?i.d.slice():i.d);return}if(l=typeof i,l==="number"){if(i===0){o.s=1/i<0?-1:1,o.e=0,o.d=[0];return}if(i<0?(i=-i,o.s=-1):o.s=1,i===~~i&&i<1e7){for(s=0,u=i;u>=10;u/=10)s++;st?s>a.maxE?(o.e=NaN,o.d=null):s<a.minE?(o.e=0,o.d=[0]):(o.e=s,o.d=[i]):(o.e=s,o.d=[i]);return}if(i*0!==0){i||(o.s=NaN),o.e=NaN,o.d=null;return}return jd(o,i.toString())}if(l==="string")return(u=i.charCodeAt(0))===45?(i=i.slice(1),o.s=-1):(u===43&&(i=i.slice(1)),o.s=1),G3.test(i)?jd(o,i):e7(o,i);if(l==="bigint")return i<0?(i=-i,o.s=-1):o.s=1,jd(o,i.toString());throw Error(bs+i)}if(a.prototype=Ee,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=h7,a.clone=Y3,a.isDecimal=$N,a.abs=r7,a.acos=n7,a.acosh=a7,a.add=i7,a.asin=s7,a.asinh=o7,a.atan=u7,a.atanh=l7,a.atan2=c7,a.cbrt=f7,a.ceil=d7,a.clamp=m7,a.cos=p7,a.cosh=v7,a.div=g7,a.exp=y7,a.floor=x7,a.hypot=b7,a.ln=w7,a.log=N7,a.log10=E7,a.log2=_7,a.max=S7,a.min=A7,a.mod=D7,a.mul=C7,a.pow=T7,a.random=M7,a.round=I7,a.sign=P7,a.sin=F7,a.sinh=R7,a.sqrt=O7,a.sub=B7,a.sum=j7,a.tan=k7,a.tanh=$7,a.trunc=L7,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function g7(t,e){return new this(t).div(e)}function y7(t){return new this(t).exp()}function x7(t){return Ke(t=new this(t),t.e+1,3)}function b7(){var t,e,r=new this(0);for(st=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return st=!0,new this(1/0);r=e}return st=!0,r.sqrt()}function $N(t){return t instanceof ws||t&&t.toStringTag===H3||!1}function w7(t){return new this(t).ln()}function N7(t,e){return new this(t).log(e)}function _7(t){return new this(t).log(2)}function E7(t){return new this(t).log(10)}function S7(){return X3(this,arguments,-1)}function A7(){return X3(this,arguments,1)}function D7(t,e){return new this(t).mod(e)}function C7(t,e){return new this(t).mul(e)}function T7(t,e){return new this(t).pow(e)}function M7(t){var e,r,n,a,i=0,s=new this(1),u=[];if(t===void 0?t=this.precision:zn(t,1,Ds),n=Math.ceil(t/et),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));i<n;)a=e[i],a>=429e7?e[i]=crypto.getRandomValues(new Uint32Array(1))[0]:u[i++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);i<n;)a=e[i]+(e[i+1]<<8)+(e[i+2]<<16)+((e[i+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,i):(u.push(a%1e7),i+=4);i=n/4}else throw Error(q3);else for(;i<n;)u[i++]=Math.random()*1e7|0;for(n=u[--i],t%=et,n&&t&&(a=Rr(10,et-t),u[i]=(n/a|0)*a);u[i]===0;i--)u.pop();if(i<0)r=0,u=[0];else{for(r=-1;u[0]===0;r-=et)u.shift();for(n=1,a=u[0];a>=10;a/=10)n++;n<et&&(r-=et-n)}return s.e=r,s.d=u,s}function I7(t){return Ke(t=new this(t),t.e+1,this.rounding)}function P7(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function F7(t){return new this(t).sin()}function R7(t){return new this(t).sinh()}function O7(t){return new this(t).sqrt()}function B7(t,e){return new this(t).sub(e)}function j7(){var t=0,e=arguments,r=new this(e[t]);for(st=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return st=!0,Ke(r,this.precision,this.rounding)}function k7(t){return new this(t).tan()}function $7(t){return new this(t).tanh()}function L7(t){return Ke(t=new this(t),t.e+1,1)}Ee[Symbol.for("nodejs.util.inspect.custom")]=Ee.toString;Ee[Symbol.toStringTag]="Decimal";var ws=Ee.constructor=Y3(Ng);Am=new ws(Am);Dm=new ws(Dm);var z7="BigNumber",V7=["?on","config"],U7=W(z7,V7,t=>{var{on:e,config:r}=t,n=ws.clone({precision:r.precision,modulo:ws.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(a){return new n(a.value)},e&&e("config",function(a,i){a.precision!==i.precision&&n.config({precision:a.precision})}),n},{isClass:!0});const dn=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},ra=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},q7=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},Qp=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},zo=function(){throw SyntaxError("Invalid Param")};function Xp(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const H7={re:0,im:0},Hs=function(t,e){const r=H7;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return xe.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return xe.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):zo();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,i=0;n===null&&zo();for(let s=0;s<n.length;s++){const u=n[s];u===" "||u==="	"||u===`
`||(u==="+"?a++:u==="-"?i++:u==="i"||u==="I"?(a+i===0&&zo(),n[s+1]!==" "&&!isNaN(n[s+1])?(r.im+=parseFloat((i%2?"-":"")+n[s+1]),s++):r.im+=parseFloat((i%2?"-":"")+"1"),a=i=0):((a+i===0||isNaN(u))&&zo(),n[s+1]==="i"||n[s+1]==="I"?(r.im+=parseFloat((i%2?"-":"")+u),s++):r.re+=parseFloat((i%2?"-":"")+u),a=i=0))}a+i>0&&zo();break;case"number":r.im=0,r.re=t;break;default:zo()}return isNaN(r.re)||isNaN(r.im),r};function xe(t,e){if(!(this instanceof xe))return new xe(t,e);const r=Hs(t,e);this.re=r.re,this.im=r.im}xe.prototype={re:0,im:0,sign:function(){const t=Qp(this.re,this.im);return new xe(this.re/t,this.im/t)},add:function(t,e){const r=Hs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?xe.NAN:xe.INFINITY:new xe(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=Hs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?xe.NAN:xe.INFINITY:new xe(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=Hs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),i=this.re===0&&this.im===0,s=r.re===0&&r.im===0;return n&&s||a&&i?xe.NAN:n||a?xe.INFINITY:r.im===0&&this.im===0?new xe(this.re*r.re,0):new xe(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=Hs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),i=this.re===0&&this.im===0,s=r.re===0&&r.im===0;if(i&&s||n&&a)return xe.NAN;if(s||n)return xe.INFINITY;if(i||a)return xe.ZERO;if(r.im===0)return new xe(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const u=r.re/r.im,l=r.re*u+r.im;return new xe((this.re*u+this.im)/l,(this.im*u-this.re)/l)}else{const u=r.im/r.re,l=r.im*u+r.re;return new xe((this.re+this.im*u)/l,(this.im-this.re*u)/l)}},pow:function(t,e){const r=Hs(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return xe.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new xe(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new xe(Math.pow(this.im,r.re),0);case 1:return new xe(0,Math.pow(this.im,r.re));case 2:return new xe(-Math.pow(this.im,r.re),0);case 3:return new xe(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return xe.ZERO;const i=Math.atan2(this.im,this.re),s=Xp(this.re,this.im);let u=Math.exp(r.re*s-r.im*i),l=r.im*s+r.re*i;return new xe(u*Math.cos(l),u*Math.sin(l))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new xe(Math.sqrt(t),0):new xe(0,Math.sqrt(-t));const r=Qp(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),a=Math.abs(e)/(2*n);return t>=0?new xe(n,e<0?-a:a):new xe(a,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new xe(t,0):new xe(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new xe(Math.expm1(t)*Math.cos(e)+q7(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new xe(Math.log(t),0):new xe(Xp(t,e),Math.atan2(e,t))},abs:function(){return Qp(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new xe(Math.sin(t)*dn(e),Math.cos(t)*ra(e))},cos:function(){const t=this.re,e=this.im;return new xe(Math.cos(t)*dn(e),-Math.sin(t)*ra(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+dn(e);return new xe(Math.sin(t)/r,ra(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-dn(e);return new xe(-Math.sin(t)/r,ra(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*dn(2*e)+.5*Math.cos(2*t);return new xe(Math.cos(t)*dn(e)/r,Math.sin(t)*ra(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*dn(2*e)-.5*Math.cos(2*t);return new xe(Math.sin(t)*dn(e)/r,-Math.cos(t)*ra(e)/r)},asin:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new xe(0,1/0);if(e===-1)return new xe(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new xe((1-e*e-t*t)/r,-2*t/r).log();return new xe(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new xe(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atan():new xe(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acos():new xe(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asin():new xe(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new xe(ra(t)*Math.cos(e),dn(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new xe(dn(t)*Math.cos(e),ra(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=dn(t)+Math.cos(e);return new xe(ra(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=dn(t)-Math.cos(e);return new xe(ra(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-dn(2*t);return new xe(-2*ra(t)*Math.cos(e)/r,2*dn(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+dn(2*t);return new xe(2*dn(t)*Math.cos(e)/r,-2*ra(t)*Math.sin(e)/r)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,r=t>1&&e===0,n=1-t,a=1+t,i=n*n+e*e,s=i!==0?new xe((a*n-e*e)/i,(e*n+a*e)/i):new xe(t!==-1?t/0:0,e!==0?e/0:0),u=s.re;return s.re=Xp(s.re,s.im)/2,s.im=Math.atan2(s.im,u)/2,r&&(s.im=-s.im),s},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,Math.PI/2);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atanh():new xe(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new xe(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asinh():new xe(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return xe.INFINITY;const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acosh():new xe(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return xe.INFINITY;if(this.isInfinite())return xe.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new xe(t/r,-e/r)},conjugate:function(){return new xe(this.re,-this.im)},neg:function(){return new xe(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new xe(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new xe(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new xe(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=Hs(t,e);return Math.abs(r.re-this.re)<=xe.EPSILON&&Math.abs(r.im-this.im)<=xe.EPSILON},clone:function(){return new xe(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<xe.EPSILON&&(t=0),Math.abs(e)<xe.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};xe.ZERO=new xe(0,0);xe.ONE=new xe(1,0);xe.I=new xe(0,1);xe.PI=new xe(Math.PI,0);xe.E=new xe(Math.E,0);xe.INFINITY=new xe(1/0,1/0);xe.NAN=new xe(NaN,NaN);xe.EPSILON=1e-15;var G7="Complex",W7=[],Q7=W(G7,W7,()=>(Object.defineProperty(xe,"name",{value:"Complex"}),xe.prototype.constructor=xe,xe.prototype.type="Complex",xe.prototype.isComplex=!0,xe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xe.prototype.format=function(t){var e="",r=this.im,n=this.re,a=ro(this.re,t),i=ro(this.im,t),s=Xe(t)?t:t?t.precision:null;if(s!==null){var u=Math.pow(10,-s);Math.abs(n/r)<u&&(n=0),Math.abs(r/n)<u&&(r=0)}return r===0?e=a:n===0?r===1?e="i":r===-1?e="-i":e=i+"i":r<0?r===-1?e=a+" - i":e=a+" - "+i.substring(1)+"i":r===1?e=a+" + i":e=a+" + "+i+"i",e},xe.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return xe(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Xe(r)){if(Gn(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Xe(n))return new xe({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xe.prototype.valueOf=xe.prototype.toString,xe.fromJSON=function(t){return new xe(t)},xe.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},xe),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Qe=BigInt(0),xt=BigInt(1),qr=BigInt(2),uc=BigInt(3),lu=BigInt(5),Fn=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const X7=2e3,je={s:xt,n:Qe,d:xt};function ii(t,e){try{t=BigInt(t)}catch{throw Bi()}return t*e}function ba(t){return typeof t=="bigint"?t:Math.floor(t)}function lr(t,e){if(e===Qe)throw My();const r=Object.create(na.prototype);r.s=t<Qe?-xt:xt,t=t<Qe?-t:t;const n=Gs(t,e);return r.n=t/n,r.d=e/n,r}const K7=[qr*qr,qr,qr*qr,qr,qr*qr,qr*uc,qr,qr*uc];function Vo(t){const e=Object.create(null);if(t<=xt)return e[t]=xt,e;const r=n=>{e[n]=(e[n]||Qe)+xt};for(;t%qr===Qe;)r(qr),t/=qr;for(;t%uc===Qe;)r(uc),t/=uc;for(;t%lu===Qe;)r(lu),t/=lu;for(let n=0,a=qr+lu;a*a<=t;){for(;t%a===Qe;)r(a),t/=a;a+=K7[n],n=n+1&7}return t>xt&&r(t),e}const Ur=function(t,e){let r=Qe,n=xt,a=xt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw Bi();if(t%1!==0)throw LN();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Bi();if(e%1!==0)throw LN();n=BigInt(e)}a=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw Bi();a=r*n}else if(typeof t=="number"){if(isNaN(t))throw Bi();if(t<0&&(a=-xt,t=-t),t%1===0)r=BigInt(t);else{let i=1,s=0,u=1,l=1,o=1,c=1e7;for(t>=1&&(i=10**Math.floor(1+Math.log10(t)),t/=i);u<=c&&o<=c;){let f=(s+l)/(u+o);if(t===f){u+o<=c?(r=s+l,n=u+o):o>u?(r=l,n=o):(r=s,n=u);break}else t>f?(s+=l,u+=o):(l+=s,o+=u),u>c?(r=l,n=o):(r=s,n=u)}r=BigInt(r)*BigInt(i),n=BigInt(n)}}else if(typeof t=="string"){let i=0,s=Qe,u=Qe,l=Qe,o=xt,c=xt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw Bi();if(f[i]==="-"?(a=-xt,i++):f[i]==="+"&&i++,f.length===i+1?u=ii(f[i++],a):f[i+1]==="."||f[i]==="."?(f[i]!=="."&&(s=ii(f[i++],a)),i++,(i+1===f.length||f[i+1]==="("&&f[i+3]===")"||f[i+1]==="'"&&f[i+3]==="'")&&(u=ii(f[i],a),o=Fn**BigInt(f[i].length),i++),(f[i]==="("&&f[i+2]===")"||f[i]==="'"&&f[i+2]==="'")&&(l=ii(f[i+1],a),c=Fn**BigInt(f[i+1].length)-xt,i+=3)):f[i+1]==="/"||f[i+1]===":"?(u=ii(f[i],a),o=ii(f[i+2],xt),i+=3):f[i+3]==="/"&&f[i+1]===" "&&(s=ii(f[i],a),u=ii(f[i+2],a),o=ii(f[i+4],xt),i+=5),f.length<=i)n=o*c,a=r=l+n*s+c*u;else throw Bi()}else if(typeof t=="bigint")r=t,a=t,n=xt;else throw Bi();if(n===Qe)throw My();je.s=a<Qe?-xt:xt,je.n=r<Qe?-r:r,je.d=n<Qe?-n:n};function J7(t,e,r){let n=xt;for(;e>Qe;t=t*t%r,e>>=xt)e&xt&&(n=n*t%r);return n}function Y7(t,e){for(;e%qr===Qe;e/=qr);for(;e%lu===Qe;e/=lu);if(e===xt)return Qe;let r=Fn%e,n=1;for(;r!==xt;n++)if(r=r*Fn%e,n>X7)return Qe;return BigInt(n)}function Z7(t,e,r){let n=xt,a=J7(Fn,r,e);for(let i=0;i<300;i++){if(n===a)return BigInt(i);n=n*Fn%e,a=a*Fn%e}return 0}function Gs(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function na(t,e){if(Ur(t,e),this instanceof na)t=Gs(je.d,je.n),this.s=je.s,this.n=je.n/t,this.d=je.d/t;else return lr(je.s*je.n,je.d)}const My=function(){return new Error("Division by Zero")},Bi=function(){return new Error("Invalid argument")},LN=function(){return new Error("Parameters must be integer")};na.prototype={s:xt,n:Qe,d:xt,abs:function(){return lr(this.n,this.d)},neg:function(){return lr(-this.s*this.n,this.d)},add:function(t,e){return Ur(t,e),lr(this.s*this.n*je.d+je.s*this.d*je.n,this.d*je.d)},sub:function(t,e){return Ur(t,e),lr(this.s*this.n*je.d-je.s*this.d*je.n,this.d*je.d)},mul:function(t,e){return Ur(t,e),lr(this.s*je.s*this.n*je.n,this.d*je.d)},div:function(t,e){return Ur(t,e),lr(this.s*je.s*this.n*je.d,this.d*je.n)},clone:function(){return lr(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return lr(this.s*this.n%this.d,xt);if(Ur(t,e),Qe===je.n*this.d)throw My();return lr(this.s*(je.d*this.n)%(je.n*this.d),je.d*this.d)},gcd:function(t,e){return Ur(t,e),lr(Gs(je.n,this.n)*Gs(je.d,this.d),je.d*this.d)},lcm:function(t,e){return Ur(t,e),je.n===Qe&&this.n===Qe?lr(Qe,xt):lr(je.n*this.n,Gs(je.n,this.n)*Gs(je.d,this.d))},inverse:function(){return lr(this.s*this.d,this.n)},pow:function(t,e){if(Ur(t,e),je.d===xt)return je.s<Qe?lr((this.s*this.d)**je.n,this.n**je.n):lr((this.s*this.n)**je.n,this.d**je.n);if(this.s<Qe)return null;let r=Vo(this.n),n=Vo(this.d),a=xt,i=xt;for(let s in r)if(s!=="1"){if(s==="0"){a=Qe;break}if(r[s]*=je.n,r[s]%je.d===Qe)r[s]/=je.d;else return null;a*=BigInt(s)**r[s]}for(let s in n)if(s!=="1"){if(n[s]*=je.n,n[s]%je.d===Qe)n[s]/=je.d;else return null;i*=BigInt(s)**n[s]}return je.s<Qe?lr(i,a):lr(a,i)},log:function(t,e){if(Ur(t,e),this.s<=Qe||je.s<=Qe)return null;const r=Object.create(null),n=Vo(je.n),a=Vo(je.d),i=Vo(this.n),s=Vo(this.d);for(const o in a)n[o]=(n[o]||Qe)-a[o];for(const o in s)i[o]=(i[o]||Qe)-s[o];for(const o in n)o!=="1"&&(r[o]=!0);for(const o in i)o!=="1"&&(r[o]=!0);let u=null,l=null;for(const o in r){const c=n[o]||Qe,f=i[o]||Qe;if(c===Qe){if(f!==Qe)return null;continue}let d=f,m=c;const h=Gs(d,m);if(d/=h,m/=h,u===null&&l===null)u=d,l=m;else if(d*l!==u*m)return null}return u!==null&&l!==null?lr(u,l):null},equals:function(t,e){return Ur(t,e),this.s*this.n*je.d===je.s*je.n*this.d},lt:function(t,e){return Ur(t,e),this.s*this.n*je.d<je.s*je.n*this.d},lte:function(t,e){return Ur(t,e),this.s*this.n*je.d<=je.s*je.n*this.d},gt:function(t,e){return Ur(t,e),this.s*this.n*je.d>je.s*je.n*this.d},gte:function(t,e){return Ur(t,e),this.s*this.n*je.d>=je.s*je.n*this.d},compare:function(t,e){Ur(t,e);let r=this.s*this.n*je.d-je.s*je.n*this.d;return(Qe<r)-(r<Qe)},ceil:function(t){return t=Fn**BigInt(t||0),lr(ba(this.s*t*this.n/this.d)+(t*this.n%this.d>Qe&&this.s>=Qe?xt:Qe),t)},floor:function(t){return t=Fn**BigInt(t||0),lr(ba(this.s*t*this.n/this.d)-(t*this.n%this.d>Qe&&this.s<Qe?xt:Qe),t)},round:function(t){return t=Fn**BigInt(t||0),lr(ba(this.s*t*this.n/this.d)+this.s*((this.s>=Qe?xt:Qe)+qr*(t*this.n%this.d)>this.d?xt:Qe),t)},roundTo:function(t,e){Ur(t,e);const r=this.n*je.d,n=this.d*je.n,a=r%n;let i=ba(r/n);return a+a>=n&&i++,lr(this.s*i*je.n,je.d)},divisible:function(t,e){return Ur(t,e),je.n===Qe?!1:this.n*je.d%(je.n*this.d)===Qe},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,r=this.d,n=Y7(e,r),a=Z7(e,r,n),i=this.s<Qe?"-":"";if(i+=ba(e/r),e%=r,e*=Fn,e&&(i+="."),n){for(let s=a;s--;)i+=ba(e/r),e%=r,e*=Fn;i+="(";for(let s=n;s--;)i+=ba(e/r),e%=r,e*=Fn;i+=")"}else for(let s=t;e&&s--;)i+=ba(e/r),e%=r,e*=Fn;return i},toFraction:function(t=!1){let e=this.n,r=this.d,n=this.s<Qe?"-":"";if(r===xt)n+=e;else{const a=ba(e/r);t&&a>Qe&&(n+=a,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t=!1){let e=this.n,r=this.d,n=this.s<Qe?"-":"";if(r===xt)n+=e;else{const a=ba(e/r);t&&a>Qe&&(n+=a,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d;const r=[];for(;e;){r.push(ba(t/e));const n=t%e;t=e,e=n}return r},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),r=this.abs(),n=r.toContinued();for(let a=1;a<n.length;a++){let i=lr(n[a-1],xt);for(let u=a-2;u>=0;u--)i=i.inverse().add(n[u]);let s=i.sub(r);if(s.n*e<s.d)return i.mul(this.s)}return this}};var e$="Fraction",t$=[],r$=W(e$,t$,()=>(Object.defineProperty(na,"name",{value:"Fraction"}),na.prototype.constructor=na,na.prototype.type="Fraction",na.prototype.isFraction=!0,na.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},na.fromJSON=function(t){return new na(t)},na),{isClass:!0}),n$="Range",a$=[],i$=W(n$,a$,()=>{function t(e,r,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,i=r!=null,s=n!=null;if(a){if(ut(e))e=e.toNumber();else if(typeof e!="number"&&!oc(e))throw new TypeError("Parameter start must be a number or bigint")}if(i){if(ut(r))r=r.toNumber();else if(typeof r!="number"&&!oc(r))throw new TypeError("Parameter end must be a number or bigint")}if(s){if(ut(n))n=n.toNumber();else if(typeof n!="number"&&!oc(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=a?parseFloat(e):0,this.end=i?parseFloat(r):0,this.step=s?parseFloat(n):1,s&&Kr(this.step,0))throw new Error("Step must not be zero")}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var r=e.split(":"),n=r.map(function(i){return parseFloat(i)}),a=n.some(function(i){return isNaN(i)});if(a)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,r=this.start,n=this.step,a=this.end,i=a-r;return Wi(n)===Wi(i)?e=Math.ceil(i/n):i===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var r=this.start,n=this.step,a=this.end,i=0;if(n>0)for(;r<a;)e(r,[i],this),r+=n,i++;else if(n<0)for(;r>a;)e(r,[i],this),r+=n,i++},t.prototype.map=function(e){var r=[];return this.forEach(function(n,a,i){r[a[0]]=e(n,a,i)}),r},t.prototype.toArray=function(){var e=[];return this.forEach(function(r,n){e[n[0]]=r}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var r=ro(this.start,e);return this.step!==1&&(r+=":"+ro(this.step,e)),r+=":"+ro(this.end,e),r},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),s$="Matrix",o$=[],u$=W(s$,o$,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Kp(t,e,r){var n=t.constructor,a=new n(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!We(r))throw new Error("size must be an integer");if(t.greaterThan(a.pow(r-1).sub(1))||t.lessThan(a.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(a.pow(r))),i="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function l$(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:a}=k3(e);switch(r){case"fixed":return f$(t,n);case"exponential":return zN(t,n);case"engineering":return c$(t,n);case"bin":return Kp(t,2,a);case"oct":return Kp(t,8,a);case"hex":return Kp(t,16,a);case"auto":{var i=VN(e==null?void 0:e.lowerExp,-3),s=VN(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var u,l=t.toSignificantDigits(n),o=l.e;return o>=i&&o<s?u=l.toFixed():u=zN(t,n),u.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function c$(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,a=t.mul(Math.pow(10,-n)),i=a.toPrecision(e);if(i.includes("e")){var s=t.constructor;i=new s(i).toFixed()}return i+"e"+(r>=0?"+":"")+n.toString()}function zN(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function f$(t,e){return t.toFixed(e)}function VN(t,e){return Xe(t)?t:ut(t)?t.toNumber():e}function d$(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e}function pt(t,e){var r=m$(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function m$(t,e){if(typeof t=="number")return ro(t,e);if(ut(t))return l$(t,e);if(h$(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return Z3(t,e);if(yr(t))return cu(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>cu(n)+": "+pt(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function cu(t){for(var e=String(t),r="",n=0;n<e.length;){var a=e.charAt(n);r+=a in UN?UN[a]:a,n++}return'"'+r+'"'}var UN={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function la(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function Z3(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,a=0;a<n;a++)a!==0&&(r+=", "),r+=Z3(t[a],e);return r+="]",r}else return pt(t,e)}function h$(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function Sg(t,e){if(!yr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Xt(t)+", index: 0)");if(!yr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Xt(e)+", index: 1)");return t===e?0:t>e?1:-1}function mt(t,e,r){if(!(this instanceof mt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}mt.prototype=new RangeError;mt.prototype.constructor=RangeError;mt.prototype.name="DimensionError";mt.prototype.isDimensionError=!0;function Ia(t,e,r){if(!(this instanceof Ia))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ia.prototype=new RangeError;Ia.prototype.constructor=RangeError;Ia.prototype.name="IndexError";Ia.prototype.isIndexError=!0;function at(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function eM(t,e,r){var n,a=t.length;if(a!==e[r])throw new mt(a,e[r]);if(r<e.length-1){var i=r+1;for(n=0;n<a;n++){var s=t[n];if(!Array.isArray(s))throw new mt(e.length-1,e.length,"<");eM(t[n],e,i)}}else for(n=0;n<a;n++)if(Array.isArray(t[n]))throw new mt(e.length+1,e.length,">")}function qN(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new mt(t.length,0)}else eM(t,e,0)}function Tm(t,e){var r=t.isMatrix?t._size:at(t),n=e._sourceSize;n.forEach((a,i)=>{if(a!==null&&a!==r[i])throw new mt(a,r[i])})}function Yt(t,e){if(t!==void 0){if(!Xe(t)||!We(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Ia(t,e)}}function Lu(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&Wt(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(yr(r)&&r.length===0)return!0}return!1}function zu(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!Xe(a)||!We(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pt(e)+")")}),(Xe(t)||ut(t))&&(t=[t]);var n=r!==void 0?r:0;return Ag(t,e,0,n),t}function Ag(t,e,r,n){var a,i,s=t.length,u=e[r],l=Math.min(s,u);if(t.length=u,r<e.length-1){var o=r+1;for(a=0;a<l;a++)i=t[a],Array.isArray(i)||(i=[i],t[a]=i),Ag(i,e,o,n);for(a=l;a<u;a++)i=[],t[a]=i,Ag(i,e,o,n)}else{for(a=0;a<l;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=l;a<u;a++)t[a]=n}}function Iy(t,e){var r=Ct(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new mt(0,n,"!=");e=Py(e,n);var a=tM(e);if(n!==a)throw new mt(a,n,"!=");try{return p$(r,e)}catch(i){throw i instanceof mt?new mt(a,n,"!="):i}}function Py(t,e){var r=tM(t),n=t.slice(),a=-1,i=t.indexOf(a),s=t.indexOf(a,i+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var u=i>=0,l=e%r===0;if(u)if(l)n[i]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function tM(t){return t.reduce((e,r)=>e*r,1)}function p$(t,e){for(var r=t,n,a=e.length-1;a>0;a--){var i=e[a];n=[];for(var s=r.length/i,u=0;u<s;u++)n.push(r.slice(u*i,(u+1)*i));r=n}return r}function Mm(t,e){for(var r=at(t);Array.isArray(t)&&t.length===1;)t=t[0],r.shift();for(var n=r.length;r[n-1]===1;)n--;return n<r.length&&(t=rM(t,n,0),r.length=n),t}function rM(t,e,r){var n,a;if(r<e){var i=r+1;for(n=0,a=t.length;n<a;n++)t[n]=rM(t[n],e,i)}else for(;Array.isArray(t);)t=t[0];return t}function nM(t,e,r,n){var a=n||at(t);if(r)for(var i=0;i<r;i++)t=[t],a.unshift(1);for(t=aM(t,e,0);a.length<e;)a.push(1);return t}function aM(t,e,r){var n,a;if(Array.isArray(t)){var i=r+1;for(n=0,a=t.length;n<a;n++)t[n]=aM(t[n],e,i)}else for(var s=r;s<e;s++)t=[t];return t}function Ct(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?a(t):n(t),r;function n(i){for(var s=0;s<i.length;s++){var u=i[s];Array.isArray(u)?n(u):r.push(u)}}function a(i){if(Array.isArray(i[0]))for(var s=0;s<i.length;s++)a(i[s]);else for(var u=0;u<i.length;u++)r.push(i[u])}}function ls(t,e){return Array.prototype.map.call(t,e)}function iM(t,e){Array.prototype.forEach.call(t,e)}function HN(t,e){if(at(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function GN(t,e){if(at(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r=>e.test(r))}function WN(t,e){return Array.prototype.join.call(t,e)}function Vu(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e}function Im(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function Bh(t,e){for(var r,n=0,a=0;a<t.length;a++){var i=t[a],s=Array.isArray(i);if(a===0&&s&&(n=i.length),s&&i.length!==n)return;var u=s?Bh(i,e):e(i);if(r===void 0)r=u;else if(r!==u)return"mixed"}return r}function sM(t,e,r,n){if(n<r){if(t.length!==e.length)throw new mt(t.length,e.length);for(var a=[],i=0;i<t.length;i++)a[i]=sM(t[i],e[i],r,n+1);return a}else return t.concat(e)}function oM(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return sM(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function Pm(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(d=>d.length),a=Math.max(...n),i=new Array(a).fill(null),s=0;s<e.length;s++)for(var u=e[s],l=n[s],o=0;o<l;o++){var c=a-l+o;u[o]>i[c]&&(i[c]=u[o])}for(var f=0;f<e.length;f++)uM(e[f],i);return i}function uM(t,e){for(var r=e.length,n=t.length,a=0;a<n;a++){var i=r-n+a;if(t[a]<e[i]&&t[a]>1||t[a]>e[i])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[a]," to size ").concat(e[i]))}}function Ys(t,e){var r=at(t);if(Ei(r,e))return t;uM(r,e);var n=Pm(r,e),a=n.length,i=[...Array(a-r.length).fill(1),...r],s=g$(t);r.length<a&&(s=Iy(s,i),r=at(s));for(var u=0;u<a;u++)r[u]<n[u]&&(s=v$(s,n[u],u),r=at(s));return s}function v$(t,e,r){return oM(...Array(e).fill(t),r)}function Fm(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=at(t);if(e.length!==r.length)throw new mt(e.length,r.length);for(var n=0;n<e.length;n++)Yt(e[n],r[n]);return e.reduce((a,i)=>a[i],t)}function Dg(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return i(t);var n=[];return a(t,0);function a(s,u){if(Array.isArray(s)){for(var l=s.length,o=Array(l),c=0;c<l;c++)n[u]=c,o[c]=a(s[c],u+1);return o}else return e(s,n.slice(0,u),t)}function i(s){if(Array.isArray(s)){for(var u=s.length,l=Array(u),o=0;o<u;o++)l[o]=i(s[o]);return l}else return e(s)}}function lM(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(r){i(t);return}var n=[];a(t,0);function a(s,u){if(Array.isArray(s))for(var l=s.length,o=0;o<l;o++)n[u]=o,a(s[o],u+1);else e(s,n.slice(0,u),t)}function i(s){if(Array.isArray(s))for(var u=s.length,l=0;l<u;l++)i(s[l]);else e(s)}}function g$(t){return Nr([],t)}function fo(t,e,r,n){if(Sm.isTypedFunction(t)){var a;if(n)a=1;else{var i=(e.isMatrix?e.size():at(e)).map(()=>0),s=e.isMatrix?e.get(i):Fm(e,i);a=b$(t,s,i,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var l=y$(t,a);u=l!==void 0?l:t}else u=t;return a>=1&&a<=3?{isUnary:a===1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return QN(u,f.slice(0,a),r,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return QN(u,f,r,t.name)}}}return n===void 0?{isUnary:x$(t),fn:t}:{isUnary:n,fn:t}}function y$(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[a,i]=n;a.split(",").length===e&&r.push(i)}),r.length===1)return r[0]}function x$(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function b$(t,e,r,n){for(var a=[e,r,n],i=3;i>0;i--){var s=a.slice(0,i);if(Sm.resolve(t,s)!==null)return i}}function QN(t,e,r,n){try{return t(...e)}catch(a){w$(a,e,r,n)}}function w$(t,e,r,n){var a;if(t instanceof TypeError&&((a=t.data)===null||a===void 0?void 0:a.category)==="wrongType"){var i=[];throw i.push("value: ".concat(Xt(e[0]))),e.length>=2&&i.push("index: ".concat(Xt(e[1]))),e.length>=3&&i.push("array: ".concat(Xt(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(i.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var N$="DenseMatrix",_$=["Matrix","config"],E$=W(N$,_$,t=>{var{Matrix:e,config:r}=t;function n(f,d){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!yr(d))throw new Error("Invalid datatype: "+d);if(Ye(f))f.type==="DenseMatrix"?(this._data=nt(f._data),this._size=nt(f._size),this._datatype=d||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=d||f._datatype);else if(f&&Wt(f.data)&&Wt(f.size))this._data=f.data,this._size=f.size,qN(this._data,this._size),this._datatype=d||f.datatype;else if(Wt(f))this._data=c(f),this._size=at(this._data),qN(this._data,this._size),this._datatype=d;else{if(f)throw new TypeError("Unsupported type of data ("+Xt(f)+")");this._data=[],this._size=[0],this._datatype=d}}n.prototype=new e,n.prototype.createDenseMatrix=function(f,d){return new n(f,d)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Bh(this._data,Xt)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(f,d){return new n(f,d)},n.prototype.subset=function(f,d,m){switch(arguments.length){case 1:return a(this,f);case 2:case 3:return s(this,f,d,m);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(f){return Fm(this._data,f)},n.prototype.set=function(f,d,m){if(!Wt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new mt(f.length,this._size.length,"<");var h,v,T,S=f.map(function(_){return _+1});o(this,S,m);var C=this._data;for(h=0,v=f.length-1;h<v;h++)T=f[h],Yt(T,C.length),C=C[T];return T=f[f.length-1],Yt(T,C.length),C[T]=d,this};function a(f,d){if(!Th(d))throw new TypeError("Invalid index");var m=r.legacySubset?d.size().every(y=>y===1):d.isScalar();if(m)return f.get(d.min());var h=d.size();if(h.length!==f._size.length)throw new mt(h.length,f._size.length);for(var v=d.min(),T=d.max(),S=0,C=f._size.length;S<C;S++)Yt(v[S],f._size[S]),Yt(T[S],f._size[S]);var _=new n,M=i(f._data,d);return _._size=M.size,_._datatype=f._datatype,_._data=M.data,r.legacySubset?_.reshape(d.size()):_}function i(f,d){var m=d.size().length-1,h=Array(m);return{data:v(f),size:h.filter(T=>T!==null)};function v(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=d.dimension(S);function _(M,y){return Xe(M)?y(M):M.map(y).valueOf()}return Xe(C)?h[S]=null:h[S]=C.size()[0],S<m?_(C,M=>(Yt(M,T.length),v(T[M],S+1))):_(C,M=>(Yt(M,T.length),T[M]))}}function s(f,d,m,h){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var v=d.size(),T=d.isScalar(),S;if(Ye(m)?(S=m.size(),m=m.valueOf()):S=at(m),T){if(S.length!==0)throw new TypeError("Scalar expected");f.set(d.min(),m,h)}else{if(!Ei(S,v)){if(S.length===0)m=Ys([m],v);else try{m=Ys(m,v)}catch{}S=at(m)}if(v.length<f._size.length)throw new mt(v.length,f._size.length,"<");if(S.length<v.length){for(var C=0,_=0;v[C]===1&&S[C]===1;)C++;for(;v[C]===1;)_++,C++;m=nM(m,v.length,_,S)}if(!Ei(v,S))throw new mt(v,S,">");var M=d.max().map(function(y){return y+1});o(f,M,h),u(f._data,d,m)}return f}function u(f,d,m){var h=d.size().length-1;v(f,m);function v(T,S){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,_=d.dimension(C),M=(x,w)=>{Yt(x,T.length),v(T[x],S[w[0]],C+1)},y=(x,w)=>{Yt(x,T.length),T[x]=S[w[0]]};C<h?Xe(_)?M(_,[0]):_.forEach(M):Xe(_)?y(_,[0]):_.forEach(y)}}n.prototype.resize=function(f,d,m){if(!Kn(f))throw new TypeError("Array or Matrix expected");var h=f.valueOf().map(T=>Array.isArray(T)&&T.length===1?T[0]:T),v=m?this.clone():this;return l(v,h,d)};function l(f,d,m){if(d.length===0){for(var h=f._data;Wt(h);)h=h[0];return h}return f._size=d.slice(0),f._data=zu(f._data,f._size,m),f}n.prototype.reshape=function(f,d){var m=d?this.clone():this;m._data=Iy(m._data,f);var h=m._size.reduce((v,T)=>v*T);return m._size=Py(f,h),m};function o(f,d,m){for(var h=f._size.slice(0),v=!1;h.length<d.length;)h.push(0),v=!0;for(var T=0,S=d.length;T<S;T++)d[T]>h[T]&&(h[T]=d[T],v=!0);v&&l(f,h,m)}n.prototype.clone=function(){var f=new n({data:nt(this._data),size:nt(this._size),datatype:this._datatype});return f},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(f){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=this,h=m._size.length-1;if(h<0)return m.clone();var v=fo(f,m,"map",d),T=v.fn,S=m.create(void 0,m._datatype);if(S._size=m._size,d||v.isUnary)return S._data=w(m._data),S;if(h===0){for(var C=m.valueOf(),_=Array(C.length),M=0;M<C.length;M++)_[M]=T(C[M],[M],m);return S._data=_,S}var y=[];return S._data=x(m._data),S;function x(g){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=Array(g.length);if(N<h)for(var b=0;b<g.length;b++)y[N]=b,E[b]=x(g[b],N+1);else for(var D=0;D<g.length;D++)y[N]=D,E[D]=T(g[D],y.slice(),m);return E}function w(g){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=Array(g.length);if(N<h)for(var b=0;b<g.length;b++)E[b]=w(g[b],N+1);else for(var D=0;D<g.length;D++)E[D]=T(g[D]);return E}},n.prototype.forEach=function(f){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=this,h=m._size.length-1;if(h<0)return;var v=fo(f,m,"map",d),T=v.fn;if(d||v.isUnary){M(m._data);return}if(h===0){for(var S=0;S<m._data.length;S++)T(m._data[S],[S],m);return}var C=[];_(m._data);function _(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<h)for(var w=0;w<y.length;w++)C[x]=w,_(y[w],x+1);else for(var g=0;g<y.length;g++)C[x]=g,T(y[g],C.slice(),m)}function M(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<h)for(var w=0;w<y.length;w++)M(y[w],x+1);else for(var g=0;g<y.length;g++)T(y[g])}},n.prototype[Symbol.iterator]=function*(){var f=this._size.length-1;if(!(f<0)){if(f===0){for(var d=0;d<this._data.length;d++)yield{value:this._data[d],index:[d]};return}for(var m=Array(f+1).fill(0),h=this._size.reduce((_,M)=>_*M,1),v=0;v<h;v++){for(var T=this._data,S=0;S<f;S++)T=T[m[S]];yield{value:T[m[f]],index:m.slice()};for(var C=f;C>=0&&(m[C]++,!(m[C]<this._size[C]));C--)m[C]=0}}},n.prototype.rows=function(){var f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var m=this._data;for(var h of m)f.push(new n([h],this._datatype));return f},n.prototype.columns=function(){var f=this,d=[],m=this.size();if(m.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,v=function(C){var _=h.map(M=>[M[C]]);d.push(new n(_,f._datatype))},T=0;T<m[1];T++)v(T);return d},n.prototype.toArray=function(){return nt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(f){return pt(this._data,f)},n.prototype.toString=function(){return pt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(f){if(f){if(ut(f)&&(f=f.toNumber()),!Xe(f)||!We(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var d=f>0?f:0,m=f<0?-f:0,h=this._size[0],v=this._size[1],T=Math.min(h-m,v-d),S=[],C=0;C<T;C++)S[C]=this._data[C+m][C+d];return new n({data:S,size:[T],datatype:this._datatype})},n.diagonal=function(f,d,m,h){if(!Wt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(g){if(ut(g)&&(g=g.toNumber()),!Xe(g)||!We(g)||g<1)throw new Error("Size values must be positive integers");return g}),m){if(ut(m)&&(m=m.toNumber()),!Xe(m)||!We(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var v=m>0?m:0,T=m<0?-m:0,S=f[0],C=f[1],_=Math.min(S-T,C-v),M;if(Wt(d)){if(d.length!==_)throw new Error("Invalid value array length");M=function(N){return d[N]}}else if(Ye(d)){var y=d.size();if(y.length!==1||y[0]!==_)throw new Error("Invalid matrix length");M=function(N){return d.get([N])}}else M=function(){return d};h||(h=ut(M(0))?M(0).mul(0):0);var x=[];if(f.length>0){x=zu(x,f,h);for(var w=0;w<_;w++)x[w+T][w+v]=M(w)}return new n({data:x,size:[S,C]})},n.fromJSON=function(f){return new n(f)},n.prototype.swapRows=function(f,d){if(!Xe(f)||!We(f)||!Xe(d)||!We(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(f,this._size[0]),Yt(d,this._size[0]),n._swapRows(f,d,this._data),this},n._swapRows=function(f,d,m){var h=m[f];m[f]=m[d],m[d]=h};function c(f){return Ye(f)?c(f.valueOf()):Wt(f)?f.map(c):f}return n},{isClass:!0}),XN="clone",S$=["typed"],A$=W(XN,S$,t=>{var{typed:e}=t;return e(XN,{any:nt})});function cM(t){var e=t.length,r=t[0].length,n,a,i=[];for(a=0;a<r;a++){var s=[];for(n=0;n<e;n++)s.push(t[n][a]);i.push(s)}return i}function nl(t){for(var e=0;e<t.length;e++)if(Kn(t[e]))return!0;return!1}function Ns(t,e){Ye(t)?t.forEach(r=>e(r),!1,!0):lM(t,e,!0)}function lt(t,e,r){if(!r)return Ye(t)?t.map(a=>e(a),!1,!0):Dg(t,e,!0);var n=a=>a===0?a:e(a);return Ye(t)?t.map(a=>n(a),!1,!0):Dg(t,n,!0)}function jh(t,e,r){var n=Array.isArray(t)?at(t):t.size();if(e<0||e>=n.length)throw new Ia(e,n.length);return Ye(t)?t.create(Rm(t.valueOf(),e,r),t.datatype()):Rm(t,e,r)}function Rm(t,e,r){var n,a,i,s;if(e<=0)if(Array.isArray(t[0])){for(s=cM(t),a=[],n=0;n<s.length;n++)a[n]=Rm(s[n],e-1,r);return a}else{for(i=t[0],n=1;n<t.length;n++)i=r(i,t[n]);return i}else{for(a=[],n=0;n<t.length;n++)a[n]=Rm(t[n],e-1,r);return a}}function KN(t,e,r,n,a,i,s,u,l,o,c){var f=t._values,d=t._index,m=t._ptr,h,v,T,S;if(n)for(v=m[e],T=m[e+1],h=v;h<T;h++)S=d[h],r[S]!==i?(r[S]=i,s.push(S),n[S]=f[h]):(n[S]=u(n[S],f[h]),a[S]=i);else for(v=m[e],T=m[e+1],h=v;h<T;h++)S=d[h],r[S]!==i?(r[S]=i,s.push(S)):a[S]=i}var JN="isInteger",D$=["typed"],C$=W(JN,D$,t=>{var{typed:e}=t;return e(JN,{number:We,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),Pa="number",al="number, number";function fM(t){return Math.abs(t)}fM.signature=Pa;function dM(t,e){return t+e}dM.signature=al;function mM(t,e){return t-e}mM.signature=al;function hM(t,e){return t*e}hM.signature=al;function pM(t){return-t}pM.signature=Pa;function vM(t){return t}vM.signature=Pa;function Hl(t){return Mk(t)}Hl.signature=Pa;function gM(t){return t*t*t}gM.signature=Pa;function yM(t){return Math.exp(t)}yM.signature=Pa;function xM(t){return Ik(t)}xM.signature=Pa;function bM(t,e){if(!We(t)||!We(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}bM.signature=al;function YN(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function Om(t){return Ck(t)}Om.signature=Pa;function Cg(t){return Dk(t)}Cg.signature=Pa;function ZN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=e<0;if(r&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return r?1/0:0;if(!isFinite(t))return r?0:t;var n=Math.pow(Math.abs(t),1/e);return n=t<0?-n:n,r?1/n:n}function Tg(t){return Wi(t)}Tg.signature=Pa;function wM(t){return t*t}wM.signature=Pa;function NM(t,e){var r,n,a,i=0,s=1,u=1,l=0;if(!We(t)||!We(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),a=t-n*e,r=i,i=s-n*i,s=r,r=u,u=l-n*u,l=r,t=e,e=a;var o;return t<0?o=[-t,-s,-l]:o=[t,t?s:0,l],o}NM.signature=al;function _M(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}_M.signature=al;function Bl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!We(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat($3(t,e))}var T$="number",il="number, number";function EM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function bitAnd");return t&e}EM.signature=il;function SM(t){if(!We(t))throw new Error("Integer expected in function bitNot");return~t}SM.signature=T$;function AM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function bitOr");return t|e}AM.signature=il;function DM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function bitXor");return t^e}DM.signature=il;function CM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function leftShift");return t<<e}CM.signature=il;function TM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function rightArithShift");return t>>e}TM.signature=il;function MM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}MM.signature=il;function di(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return di(t,r)*di(r+1,e)}function IM(t,e){if(!We(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!We(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,a=e<r?r+1:e+1,i=2,s=e<r?e:r,u=a;u<=t;++u)for(n*=u;i<=s&&n%i===0;)n/=i,++i;return i<=s&&(n/=di(i,s)),n}IM.signature="number, number";var M$=Math.PI,I$=2*Math.PI,P$=Math.E,F$=1.618033988749895,R$="number",Fy="number, number";function PM(t){return!t}PM.signature=R$;function Mg(t,e){return!!(t||e)}Mg.signature=Fy;function Ig(t,e){return!!t!=!!e}Ig.signature=Fy;function Pg(t,e){return!!(t&&e)}Pg.signature=Fy;function Bm(t){var e;if(We(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:di(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*Bm(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,a=n*t,i=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*a)+163879/(209018880*i)+5246819/(75246796800*i*t))}--t,e=_u[0];for(var s=1;s<_u.length;++s)e+=_u[s]/(t+s);var u=t+FM+.5;return Math.sqrt(2*Math.PI)*Math.pow(u,t+.5)*Math.exp(-u)*e}Bm.signature="number";var FM=4.7421875,_u=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],RM=.9189385332046728,O$=5,B$=7,e2=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function jm(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-jm(1-t);t=t-1;for(var e=t+O$+.5,r=e2[0],n=B$-1;n>=1;n--)r+=e2[n]/(t+n);return RM+(t+.5)*Math.log(e)-e+Math.log(r)}jm.signature="number";var xn="number";function OM(t){return Ok(t)}OM.signature=xn;function BM(t){return Math.atan(1/t)}BM.signature=xn;function jM(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}jM.signature=xn;function kM(t){return Math.asin(1/t)}kM.signature=xn;function $M(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}$M.signature=xn;function LM(t){return Math.acos(1/t)}LM.signature=xn;function zM(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}zM.signature=xn;function VM(t){return Bk(t)}VM.signature=xn;function UM(t){return jk(t)}UM.signature=xn;function qM(t){return 1/Math.tan(t)}qM.signature=xn;function HM(t){var e=Math.exp(2*t);return(e+1)/(e-1)}HM.signature=xn;function GM(t){return 1/Math.sin(t)}GM.signature=xn;function WM(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Wi(t)}WM.signature=xn;function QM(t){return 1/Math.cos(t)}QM.signature=xn;function XM(t){return 2/(Math.exp(t)+Math.exp(-t))}XM.signature=xn;function KM(t){return $k(t)}KM.signature=xn;var Ry="number";function JM(t){return t<0}JM.signature=Ry;function YM(t){return t>0}YM.signature=Ry;function ZM(t){return Number.isNaN(t)}ZM.signature=Ry;function pa(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var t2="isNegative",j$=["typed","config"],k$=W(t2,j$,t=>{var{typed:e,config:r}=t;return e(t2,{number:n=>Kr(n,0,r.relTol,r.absTol)?!1:JM(n),BigNumber:n=>pa(n,new n.constructor(0),r.relTol,r.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),r2="isNumeric",$$=["typed"],L$=W(r2,$$,t=>{var{typed:e}=t;return e(r2,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),n2="hasNumericValue",z$=["typed","isNumeric"],V$=W(n2,z$,t=>{var{typed:e,isNumeric:r}=t;return e(n2,{boolean:()=>!0,string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return r(a)}})}),a2="isPositive",U$=["typed","config"],q$=W(a2,U$,t=>{var{typed:e,config:r}=t;return e(a2,{number:n=>Kr(n,0,r.relTol,r.absTol)?!1:YM(n),BigNumber:n=>pa(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),i2="isZero",H$=["typed","equalScalar"],G$=W(i2,H$,t=>{var{typed:e,equalScalar:r}=t;return e(i2,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),s2="isNaN",W$=["typed"],Q$=W(s2,W$,t=>{var{typed:e}=t;return e(s2,{number:ZM,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),o2="typeOf",X$=["typed"],K$=W(o2,X$,t=>{var{typed:e}=t;return e(o2,{any:Xt})});function J$(t,e,r,n){return Kr(t.re,e.re,r,n)&&Kr(t.im,e.im,r,n)}var sl=W("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),a.valueType()])(n.value,a.value)})}}),km="equalScalar",Y$=["typed","config"],Z$=W(km,Y$,t=>{var{typed:e,config:r}=t,n=sl({typed:e});return e(km,{"boolean, boolean":function(i,s){return i===s},"number, number":function(i,s){return Kr(i,s,r.relTol,r.absTol)},"BigNumber, BigNumber":function(i,s){return i.eq(s)||pa(i,s,r.relTol,r.absTol)},"bigint, bigint":function(i,s){return i===s},"Fraction, Fraction":function(i,s){return i.equals(s)},"Complex, Complex":function(i,s){return J$(i,s,r.relTol,r.absTol)}},n)});W(km,["typed","config"],t=>{var{typed:e,config:r}=t;return e(km,{"number, number":function(a,i){return Kr(a,i,r.relTol,r.absTol)}})});var eL="SparseMatrix",tL=["typed","equalScalar","Matrix"],rL=W(eL,tL,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function a(v,T){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(T&&!yr(T))throw new Error("Invalid datatype: "+T);if(Ye(v))i(this,v,T);else if(v&&Wt(v.index)&&Wt(v.ptr)&&Wt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=T||v.datatype;else if(Wt(v))s(this,v,T);else{if(v)throw new TypeError("Unsupported type of data ("+Xt(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=T}}function i(v,T,S){T.type==="SparseMatrix"?(v._values=T._values?nt(T._values):void 0,v._index=nt(T._index),v._ptr=nt(T._ptr),v._size=nt(T._size),v._datatype=S||T._datatype):s(v,T.valueOf(),S||T._datatype)}function s(v,T,S){v._values=[],v._index=[],v._ptr=[],v._datatype=S;var C=T.length,_=0,M=r,y=0;if(yr(S)&&(M=e.find(r,[S,S])||r,y=e.convert(0,S)),C>0){var x=0;do{v._ptr.push(v._index.length);for(var w=0;w<C;w++){var g=T[w];if(Wt(g)){if(x===0&&_<g.length&&(_=g.length),x<g.length){var N=g[x];M(N,y)||(v._values.push(N),v._index.push(w))}}else x===0&&_<1&&(_=1),M(g,y)||(v._values.push(g),v._index.push(w))}x++}while(x<_)}v._ptr.push(v._index.length),v._size=[C,_]}a.prototype=new n,a.prototype.createSparseMatrix=function(v,T){return new a(v,T)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return Bh(this._values,Xt)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(v,T){return new a(v,T)},a.prototype.density=function(){var v=this._size[0],T=this._size[1];return v!==0&&T!==0?this._index.length/(v*T):0},a.prototype.subset=function(v,T,S){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,v);case 2:case 3:return l(this,v,T,S);default:throw new SyntaxError("Wrong number of arguments")}};function u(v,T){if(!Th(T))throw new TypeError("Invalid index");var S=T.isScalar();if(S)return v.get(T.min());var C=T.size();if(C.length!==v._size.length)throw new mt(C.length,v._size.length);var _,M,y,x,w=T.min(),g=T.max();for(_=0,M=v._size.length;_<M;_++)Yt(w[_],v._size[_]),Yt(g[_],v._size[_]);var N=v._values,E=v._index,b=v._ptr,D=T.dimension(0),I=T.dimension(1),F=[],O=[];function P(ae,j){O[ae]=j[0],F[ae]=!0}Number.isInteger(D)?P(D,[0]):D.forEach(P);var z=N?[]:void 0,$=[],L=[];function q(ae){for(L.push($.length),y=b[ae],x=b[ae+1];y<x;y++)_=E[y],F[_]===!0&&($.push(O[_]),z&&z.push(N[y]))}return Number.isInteger(I)?q(I):I.forEach(q),L.push($.length),new a({values:z,index:$,ptr:L,size:C,datatype:v._datatype})}function l(v,T,S,C){if(!T||T.isIndex!==!0)throw new TypeError("Invalid index");var _=T.size(),M=T.isScalar(),y;if(Ye(S)?(y=S.size(),S=S.toArray()):y=at(S),M){if(y.length!==0)throw new TypeError("Scalar expected");v.set(T.min(),S,C)}else{if(_.length!==1&&_.length!==2)throw new mt(_.length,v._size.length,"<");if(y.length<_.length){for(var x=0,w=0;_[x]===1&&y[x]===1;)x++;for(;_[x]===1;)w++,x++;S=nM(S,_.length,w,y)}if(!Ei(_,y))throw new mt(_,y,">");if(_.length===1){var g=T.dimension(0);b(g,(D,I)=>{Yt(D),v.set([D,0],S[I[0]],C)})}else{var N=T.dimension(0),E=T.dimension(1);b(N,(D,I)=>{Yt(D),b(E,(F,O)=>{Yt(F),v.set([D,F],S[I[0]][O[0]],C)})})}}return v;function b(D,I){Xe(D)?I(D,[0]):D.forEach(I)}}a.prototype.get=function(v){if(!Wt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new mt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var T=v[0],S=v[1];Yt(T,this._size[0]),Yt(S,this._size[1]);var C=o(T,this._ptr[S],this._ptr[S+1],this._index);return C<this._ptr[S+1]&&this._index[C]===T?this._values[C]:0},a.prototype.set=function(v,T,S){if(!Wt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new mt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=v[0],_=v[1],M=this._size[0],y=this._size[1],x=r,w=0;yr(this._datatype)&&(x=e.find(r,[this._datatype,this._datatype])||r,w=e.convert(0,this._datatype)),(C>M-1||_>y-1)&&(d(this,Math.max(C+1,M),Math.max(_+1,y),S),M=this._size[0],y=this._size[1]),Yt(C,M),Yt(_,y);var g=o(C,this._ptr[_],this._ptr[_+1],this._index);return g<this._ptr[_+1]&&this._index[g]===C?x(T,w)?c(g,_,this._values,this._index,this._ptr):this._values[g]=T:x(T,w)||f(g,C,_,T,this._values,this._index,this._ptr),this};function o(v,T,S,C){if(S-T===0)return S;for(var _=T;_<S;_++)if(C[_]===v)return _;return T}function c(v,T,S,C,_){S.splice(v,1),C.splice(v,1);for(var M=T+1;M<_.length;M++)_[M]--}function f(v,T,S,C,_,M,y){_.splice(v,0,C),M.splice(v,0,T);for(var x=S+1;x<y.length;x++)y[x]++}a.prototype.resize=function(v,T,S){if(!Kn(v))throw new TypeError("Array or Matrix expected");var C=v.valueOf().map(M=>Array.isArray(M)&&M.length===1?M[0]:M);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(M){if(!Xe(M)||!We(M)||M<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pt(C)+")")});var _=S?this.clone():this;return d(_,C[0],C[1],T)};function d(v,T,S,C){var _=C||0,M=r,y=0;yr(v._datatype)&&(M=e.find(r,[v._datatype,v._datatype])||r,y=e.convert(0,v._datatype),_=e.convert(_,v._datatype));var x=!M(_,y),w=v._size[0],g=v._size[1],N,E,b;if(S>g){for(E=g;E<S;E++)if(v._ptr[E]=v._values.length,x)for(N=0;N<w;N++)v._values.push(_),v._index.push(N);v._ptr[S]=v._values.length}else S<g&&(v._ptr.splice(S+1,g-S),v._values.splice(v._ptr[S],v._values.length),v._index.splice(v._ptr[S],v._index.length));if(g=S,T>w){if(x){var D=0;for(E=0;E<g;E++){v._ptr[E]=v._ptr[E]+D,b=v._ptr[E+1]+D;var I=0;for(N=w;N<T;N++,I++)v._values.splice(b+I,0,_),v._index.splice(b+I,0,N),D++}v._ptr[g]=v._values.length}}else if(T<w){var F=0;for(E=0;E<g;E++){v._ptr[E]=v._ptr[E]-F;var O=v._ptr[E],P=v._ptr[E+1]-F;for(b=O;b<P;b++)N=v._index[b],N>T-1&&(v._values.splice(b,1),v._index.splice(b,1),F++)}v._ptr[E]=v._values.length}return v._size[0]=T,v._size[1]=S,v}a.prototype.reshape=function(v,T){if(!Wt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(L){if(!Xe(L)||!We(L)||L<=-2||L===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+pt(v)+")")});var S=this._size[0]*this._size[1];v=Py(v,S);var C=v[0]*v[1];if(S!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var _=T?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return _;for(var M=[],y=0;y<_._ptr.length;y++)for(var x=0;x<_._ptr[y+1]-_._ptr[y];x++)M.push(y);for(var w=_._values.slice(),g=_._index.slice(),N=0;N<_._index.length;N++){var E=g[N],b=M[N],D=E*_._size[1]+b;M[N]=D%v[1],g[N]=Math.floor(D/v[1])}_._values.length=0,_._index.length=0,_._ptr.length=v[1]+1,_._size=v.slice();for(var I=0;I<_._ptr.length;I++)_._ptr[I]=0;for(var F=0;F<w.length;F++){var O=g[F],P=M[F],z=w[F],$=o(O,_._ptr[P],_._ptr[P+1],_._index);f($,O,P,z,_._values,_._index,_._ptr)}return _},a.prototype.clone=function(){var v=new a({values:this._values?nt(this._values):void 0,index:nt(this._index),ptr:nt(this._ptr),size:nt(this._size),datatype:this._datatype});return v},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(v,T){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var S=this,C=this._size[0],_=this._size[1],M=fo(v,S,"map"),y=function(w,g,N){return M.fn(w,[g,N],S)};return m(this,0,C-1,0,_-1,y,T)};function m(v,T,S,C,_,M,y){var x=[],w=[],g=[],N=r,E=0;yr(v._datatype)&&(N=e.find(r,[v._datatype,v._datatype])||r,E=e.convert(0,v._datatype));for(var b=function(K,V,pe){var ue=M(K,V,pe);N(ue,E)||(x.push(ue),w.push(V))},D=C;D<=_;D++){g.push(x.length);var I=v._ptr[D],F=v._ptr[D+1];if(y)for(var O=I;O<F;O++){var P=v._index[O];P>=T&&P<=S&&b(v._values[O],P-T,D-C)}else{for(var z={},$=I;$<F;$++){var L=v._index[$];z[L]=v._values[$]}for(var q=T;q<=S;q++){var ae=q in z?z[q]:0;b(ae,q-T,D-C)}}}return g.push(x.length),new a({values:x,index:w,ptr:g,size:[S-T+1,_-C+1]})}a.prototype.forEach=function(v,T){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var S=this,C=this._size[0],_=this._size[1],M=fo(v,S,"forEach"),y=0;y<_;y++){var x=this._ptr[y],w=this._ptr[y+1];if(T)for(var g=x;g<w;g++){var N=this._index[g];M.fn(this._values[g],[N,y],S)}else{for(var E={},b=x;b<w;b++){var D=this._index[b];E[D]=this._values[b]}for(var I=0;I<C;I++){var F=I in E?E[I]:0;M.fn(F,[I,y],S)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],T=0;T<v;T++)for(var S=this._ptr[T],C=this._ptr[T+1],_=S;_<C;_++){var M=this._index[_];yield{value:this._values[_],index:[M,T]}}},a.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)};function h(v,T,S,C,_){var M=C[0],y=C[1],x=[],w,g;for(w=0;w<M;w++)for(x[w]=[],g=0;g<y;g++)x[w][g]=0;for(g=0;g<y;g++)for(var N=S[g],E=S[g+1],b=N;b<E;b++)w=T[b],x[w][g]=v?_?nt(v[b]):v[b]:1;return x}return a.prototype.format=function(v){for(var T=this._size[0],S=this._size[1],C=this.density(),_="Sparse Matrix ["+pt(T,v)+" x "+pt(S,v)+"] density: "+pt(C,v)+`
`,M=0;M<S;M++)for(var y=this._ptr[M],x=this._ptr[M+1],w=y;w<x;w++){var g=this._index[w];_+=`
    (`+pt(g,v)+", "+pt(M,v)+") ==> "+(this._values?pt(this._values[w],v):"X")}return _},a.prototype.toString=function(){return pt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(v){if(v){if(ut(v)&&(v=v.toNumber()),!Xe(v)||!We(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var T=v>0?v:0,S=v<0?-v:0,C=this._size[0],_=this._size[1],M=Math.min(C-S,_-T),y=[],x=[],w=[];w[0]=0;for(var g=T;g<_&&y.length<M;g++)for(var N=this._ptr[g],E=this._ptr[g+1],b=N;b<E;b++){var D=this._index[b];if(D===g-T+S){y.push(this._values[b]),x[y.length-1]=D-S;break}}return w.push(y.length),new a({values:y,index:x,ptr:w,size:[M,1]})},a.fromJSON=function(v){return new a(v)},a.diagonal=function(v,T,S,C,_){if(!Wt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(L){if(ut(L)&&(L=L.toNumber()),!Xe(L)||!We(L)||L<1)throw new Error("Size values must be positive integers");return L}),S){if(ut(S)&&(S=S.toNumber()),!Xe(S)||!We(S))throw new TypeError("The parameter k must be an integer number")}else S=0;var M=r,y=0;yr(_)&&(M=e.find(r,[_,_])||r,y=e.convert(0,_));var x=S>0?S:0,w=S<0?-S:0,g=v[0],N=v[1],E=Math.min(g-w,N-x),b;if(Wt(T)){if(T.length!==E)throw new Error("Invalid value array length");b=function(q){return T[q]}}else if(Ye(T)){var D=T.size();if(D.length!==1||D[0]!==E)throw new Error("Invalid matrix length");b=function(q){return T.get([q])}}else b=function(){return T};for(var I=[],F=[],O=[],P=0;P<N;P++){O.push(I.length);var z=P-x;if(z>=0&&z<E){var $=b(z);M($,y)||(F.push(z+w),I.push($))}}return O.push(I.length),new a({values:I,index:F,ptr:O,size:[g,N]})},a.prototype.swapRows=function(v,T){if(!Xe(v)||!We(v)||!Xe(T)||!We(T))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(v,this._size[0]),Yt(T,this._size[0]),a._swapRows(v,T,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(v,T,S,C,_){for(var M=C[v],y=C[v+1],x=M;x<y;x++)_(S[x],T[x])},a._swapRows=function(v,T,S,C,_,M){for(var y=0;y<S;y++){var x=M[y],w=M[y+1],g=o(v,x,w,_),N=o(T,x,w,_);if(g<w&&N<w&&_[g]===v&&_[N]===T){if(C){var E=C[g];C[g]=C[N],C[N]=E}continue}if(g<w&&_[g]===v&&(N>=w||_[N]!==T)){var b=C?C[g]:void 0;_.splice(N,0,T),C&&C.splice(N,0,b),_.splice(N<=g?g+1:g,1),C&&C.splice(N<=g?g+1:g,1);continue}if(N<w&&_[N]===T&&(g>=w||_[g]!==v)){var D=C?C[N]:void 0;_.splice(g,0,v),C&&C.splice(g,0,D),_.splice(g<=N?N+1:N,1),C&&C.splice(g<=N?N+1:N,1)}}},a},{isClass:!0}),nL="number",aL=["typed"];function iL(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],a=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:a}}else return null}function sL(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var a=parseInt(t.fractionalPart[n],t.radix);r+=a/Math.pow(t.radix,n+1)}var i=e+r;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is not a valid number');return i}var oL=W(nL,aL,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var i=iL(a);if(i)return sL(i);var s=0,u=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);u&&(s=Number(u[2]),a=u[1]);var l=Number(a);if(isNaN(l))throw new SyntaxError('String "'+a+'" is not a valid number');if(u){if(l>2**s-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),null:function(a){return 0},"Unit, string | Unit":function(a,i){return a.toNumber(i)},"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),uL="bigint",lL=["typed"],cL=W(uL,lL,t=>{var{typed:e}=t,r=e("bigint",{"":function(){return 0n},bigint:function(a){return a},number:function(a){return BigInt(a.toFixed())},BigNumber:function(a){return BigInt(a.round().toString())},Fraction:function(a){return BigInt(a.valueOf().toFixed())},"string | boolean":function(a){return BigInt(a)},null:function(a){return 0n},"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))});return r.fromJSON=function(n){return BigInt(n.value)},r}),u2="string",fL=["typed"],dL=W(u2,fL,t=>{var{typed:e}=t;return e(u2,{"":function(){return""},number:ro,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(r=>n=>lt(n,r)),any:function(n){return String(n)}})}),l2="boolean",mL=["typed"],hL=W(l2,mL,t=>{var{typed:e}=t;return e(l2,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var a=n.toLowerCase();if(a==="true")return!0;if(a==="false")return!1;var i=Number(n);if(n!==""&&!isNaN(i))return!!i;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),pL="bignumber",vL=["typed","BigNumber"],gL=W(pL,vL,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(a){return new r(a+"")},string:function(a){var i=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var s=i[2],u=r(i[1]),l=new r(2).pow(Number(s));if(u.gt(l.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var o=new r(2).pow(Number(s)-1);return u.gte(o)?u.sub(l):u}return new r(a)},BigNumber:function(a){return a},bigint:function(a){return new r(a.toString())},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),Fraction:function(a){return new r(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new r(0)},"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),yL="complex",xL=["typed","Complex"],bL=W(yL,xL,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(a){return new r(a,0)},"number, number":function(a,i){return new r(a,i)},"BigNumber, BigNumber":function(a,i){return new r(a.toNumber(),i.toNumber())},Fraction:function(a){return new r(a.valueOf(),0)},Complex:function(a){return a.clone()},string:function(a){return r(a)},null:function(a){return r(0)},Object:function(a){if("re"in a&&"im"in a)return new r(a.re,a.im);if("r"in a&&"phi"in a||"abs"in a&&"arg"in a)return new r(a);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),wL="fraction",NL=["typed","Fraction"],_L=W(wL,NL,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new r(a)},string:function(a){return new r(a)},"number, number":function(a,i){return new r(a,i)},"bigint, bigint":function(a,i){return new r(a,i)},null:function(a){return new r(0)},BigNumber:function(a){return new r(a.toString())},bigint:function(a){return new r(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),Object:function(a){return new r(a)},"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),c2="matrix",EL=["typed","Matrix","DenseMatrix","SparseMatrix"],SL=W(c2,EL,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:a}=t;return e(c2,{"":function(){return i([])},string:function(u){return i([],u)},"string, string":function(u,l){return i([],u,l)},Array:function(u){return i(u)},Matrix:function(u){return i(u,u.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(s,u,l){if(u==="dense"||u==="default"||u===void 0)return new n(s,l);if(u==="sparse")return new a(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}}),f2="matrixFromFunction",AL=["typed","matrix","isZero"],DL=W(f2,AL,t=>{var{typed:e,matrix:r,isZero:n}=t;return e(f2,{"Array | Matrix, function, string, string":function(s,u,l,o){return a(s,u,l,o)},"Array | Matrix, function, string":function(s,u,l){return a(s,u,l)},"Matrix, function":function(s,u){return a(s,u,"dense")},"Array, function":function(s,u){return a(s,u,"dense").toArray()},"Array | Matrix, string, function":function(s,u,l){return a(s,l,u)},"Array | Matrix, string, string, function":function(s,u,l,o){return a(s,o,u,l)}});function a(i,s,u,l){var o;return l!==void 0?o=r(u,l):o=r(u),o.resize(i),o.forEach(function(c,f){var d=s(f);n(d)||o.set(f,d)}),o}}),d2="matrixFromRows",CL=["typed","matrix","flatten","size"],TL=W(d2,CL,t=>{var{typed:e,matrix:r,flatten:n,size:a}=t;return e(d2,{"...Array":function(l){return i(l)},"...Matrix":function(l){return r(i(l.map(o=>o.toArray())))}});function i(u){if(u.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=s(u[0]),o=[];for(var c of u){var f=s(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(f|0));o.push(n(c))}return o}function s(u){var l=a(u);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),m2="matrixFromColumns",ML=["typed","matrix","flatten","size"],IL=W(m2,ML,t=>{var{typed:e,matrix:r,flatten:n,size:a}=t;return e(m2,{"...Array":function(l){return i(l)},"...Matrix":function(l){return r(i(l.map(o=>o.toArray())))}});function i(u){if(u.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(u[0]),o=[],c=0;c<l;c++)o[c]=[];for(var f of u){var d=s(f);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+" ≠ "+(d|0));for(var m=n(f),h=0;h<l;h++)o[h].push(m[h])}return o}function s(u){var l=a(u);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),h2="splitUnit",PL=["typed"],FL=W(h2,PL,t=>{var{typed:e}=t;return e(h2,{"Unit, Array":function(n,a){return n.splitUnit(a)}})}),p2="unaryMinus",RL=["typed"],OL=W(p2,RL,t=>{var{typed:e}=t;return e(p2,{number:pM,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var a=n.clone();return a.value=e.find(r,a.valueType())(n.value),a}),"Array | Matrix":e.referToSelf(r=>n=>lt(n,r,!0))})}),v2="unaryPlus",BL=["typed","config","numeric"],jL=W(v2,BL,t=>{var{typed:e,config:r,numeric:n}=t;return e(v2,{number:vM,Complex:function(i){return i},BigNumber:function(i){return i},bigint:function(i){return i},Fraction:function(i){return i},Unit:function(i){return i.clone()},"Array | Matrix":e.referToSelf(a=>i=>lt(i,a,!0)),boolean:function(i){return n(i?1:0,r.number)},string:function(i){return n(i,As(i,r))}})}),g2="abs",kL=["typed"],$L=W(g2,kL,t=>{var{typed:e}=t;return e(g2,{number:fM,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":e.referToSelf(r=>n=>lt(n,r,!0))})}),y2="mapSlices",LL=["typed","isInteger"],Fg=W(y2,LL,t=>{var{typed:e,isInteger:r}=t;return e(y2,{"Array | Matrix, number | BigNumber, function":function(a,i,s){if(!r(i))throw new TypeError("Integer number expected for dimension");var u=Array.isArray(a)?at(a):a.size();if(i<0||i>=u.length)throw new Ia(i,u.length);return Ye(a)?a.create($m(a.valueOf(),i,s),a.datatype()):$m(a,i,s)}})},{formerly:"apply"});function $m(t,e,r){var n,a,i;if(e<=0)if(Array.isArray(t[0])){for(i=zL(t),a=[],n=0;n<i.length;n++)a[n]=$m(i[n],e-1,r);return a}else return r(t);else{for(a=[],n=0;n<t.length;n++)a[n]=$m(t[n],e-1,r);return a}}function zL(t){var e=t.length,r=t[0].length,n,a,i=[];for(a=0;a<r;a++){var s=[];for(n=0;n<e;n++)s.push(t[n][a]);i.push(s)}return i}var x2="addScalar",VL=["typed"],UL=W(x2,VL,t=>{var{typed:e}=t;return e(x2,{"number, number":dM,"Complex, Complex":function(n,a){return n.add(a)},"BigNumber, BigNumber":function(n,a){return n.plus(a)},"bigint, bigint":function(n,a){return n+a},"Fraction, Fraction":function(n,a){return n.add(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(r,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),b2="subtractScalar",qL=["typed"],HL=W(b2,qL,t=>{var{typed:e}=t;return e(b2,{"number, number":mM,"Complex, Complex":function(n,a){return n.sub(a)},"BigNumber, BigNumber":function(n,a){return n.minus(a)},"bigint, bigint":function(n,a){return n-a},"Fraction, Fraction":function(n,a){return n.sub(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(r,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),w2="cbrt",GL=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],WL=W(w2,GL,t=>{var{config:e,typed:r,isNegative:n,unaryMinus:a,matrix:i,Complex:s,BigNumber:u,Fraction:l}=t;return r(w2,{number:Hl,Complex:o,"Complex, boolean":o,BigNumber:function(d){return d.cbrt()},Unit:c});function o(f,d){var m=f.arg()/3,h=f.abs(),v=new s(Hl(h),0).mul(new s(0,m).exp());if(d){var T=[v,new s(Hl(h),0).mul(new s(0,m+Math.PI*2/3).exp()),new s(Hl(h),0).mul(new s(0,m-Math.PI*2/3).exp())];return e.matrix==="Array"?T:i(T)}else return v}function c(f){if(f.value&&hi(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=o(f.value),d}else{var m=n(f.value);m&&(f.value=a(f.value));var h;ut(f.value)?h=new u(1).div(3):tf(f.value)?h=new l(1,3):h=1/3;var v=f.pow(h);return m&&(v.value=a(v.value)),v}}}),QL="matAlgo11xS0s",XL=["typed","equalScalar"],on=W(QL,XL,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s,u){var l=a._values,o=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],h=f[1],v,T=r,S=0,C=s;typeof d=="string"&&(v=d,T=e.find(r,[v,v]),S=e.convert(0,v),i=e.convert(i,v),C=e.find(s,[v,v]));for(var _=[],M=[],y=[],x=0;x<h;x++){y[x]=M.length;for(var w=c[x],g=c[x+1],N=w;N<g;N++){var E=o[N],b=u?C(i,l[N]):C(l[N],i);T(b,S)||(M.push(E),_.push(b))}}return y[h]=M.length,a.createSparseMatrix({values:_,index:M,ptr:y,size:[m,h],datatype:v})}}),KL="matAlgo12xSfs",JL=["typed","DenseMatrix"],jr=W(KL,JL,t=>{var{typed:e,DenseMatrix:r}=t;return function(a,i,s,u){var l=a._values,o=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],h=f[1],v,T=s;typeof d=="string"&&(v=d,i=e.convert(i,v),T=e.find(s,[v,v]));for(var S=[],C=[],_=[],M=0;M<h;M++){for(var y=M+1,x=c[M],w=c[M+1],g=x;g<w;g++){var N=o[g];C[N]=l[g],_[N]=y}for(var E=0;E<m;E++)M===0&&(S[E]=[]),_[E]===y?S[E][M]=u?T(i,C[E]):T(C[E],i):S[E][M]=u?T(i,0):T(0,i)}return new r({data:S,size:[m,h],datatype:v})}}),YL="matAlgo14xDs",ZL=["typed"],va=W(YL,ZL,t=>{var{typed:e}=t;return function(a,i,s,u){var l=a._data,o=a._size,c=a._datatype,f,d=s;typeof c=="string"&&(f=c,i=e.convert(i,f),d=e.find(s,[f,f]));var m=o.length>0?r(d,0,o,o[0],l,i,u):[];return a.createDenseMatrix({data:m,size:nt(o),datatype:f})};function r(n,a,i,s,u,l,o){var c=[];if(a===i.length-1)for(var f=0;f<s;f++)c[f]=o?n(l,u[f]):n(u[f],l);else for(var d=0;d<s;d++)c[d]=r(n,a+1,i,i[a+1],u[d],l,o);return c}}),Rg="ceil",ez=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],tz=new ws(10),rz=W(Rg,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function a(i){var s=Math.ceil(i),u=n(i);return s===u?s:Kr(i,u,r.relTol,r.absTol)&&!Kr(i,s,r.relTol,r.absTol)?u:s}return e(Rg,{number:a,"number, number":function(s,u){if(!We(u))throw new RangeError("number of decimals in function ceil must be an integer");if(u<0||u>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**u;return a(s*l)/l}})}),nz=W(Rg,ez,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u}=t,l=on({typed:e,equalScalar:i}),o=jr({typed:e,DenseMatrix:u}),c=va({typed:e}),f=rz({typed:e,config:r,round:n});function d(m){var h=(S,C)=>pa(S,C,r.relTol,r.absTol),v=m.ceil(),T=n(m);return v.eq(T)?v:h(m,T)&&!h(m,v)?T:v}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,v){return h.ceil(v)},"Complex, BigNumber":function(h,v){return h.ceil(v.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(h,v){var T=tz.pow(v);return d(h.mul(T)).div(T)},bigint:m=>m,"bigint, number":(m,h)=>m,"bigint, BigNumber":(m,h)=>m,Fraction:function(h){return h.ceil()},"Fraction, number":function(h,v){return h.ceil(v)},"Fraction, BigNumber":function(h,v){return h.ceil(v.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(h,v,T){var S=h.toNumeric(T);return T.multiply(m(S,v))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(h,v,T)=>m(h,v.toNumber(),T)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(h,v,T)=>lt(h,S=>m(S,v,T),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(h,v)=>m(h,0,v)),"Array | Matrix":e.referToSelf(m=>h=>lt(h,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(h,v)=>lt(h,T=>m(T,v),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(h,v)=>l(h,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(h,v)=>c(h,v,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(h,v)=>c(a(v),h,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(h,v)=>i(h,0)?s(v.size(),v.storage()):v.storage()==="dense"?c(v,h,m,!0):o(v,h,m,!0))})}),N2="cube",az=["typed"],iz=W(N2,az,t=>{var{typed:e}=t;return e(N2,{number:gM,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),_2="exp",sz=["typed"],oz=W(_2,sz,t=>{var{typed:e}=t;return e(_2,{number:yM,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),E2="expm1",uz=["typed","Complex"],lz=W(E2,uz,t=>{var{typed:e,Complex:r}=t;return e(E2,{number:xM,Complex:function(a){var i=Math.exp(a.re);return new r(i*Math.cos(a.im)-1,i*Math.sin(a.im))},BigNumber:function(a){return a.exp().minus(1)}})}),Og="fix",cz=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],fz=W(Og,["typed","ceil","floor"],t=>{var{typed:e,ceil:r,floor:n}=t;return e(Og,{number:function(i){return i>0?n(i):r(i)},"number, number":function(i,s){return i>0?n(i,s):r(i,s)}})}),dz=W(Og,cz,t=>{var{typed:e,Complex:r,matrix:n,ceil:a,floor:i,equalScalar:s,zeros:u,DenseMatrix:l}=t,o=jr({typed:e,DenseMatrix:l}),c=va({typed:e}),f=fz({typed:e,ceil:a,floor:i});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(m){return new r(m.re>0?Math.floor(m.re):Math.ceil(m.re),m.im>0?Math.floor(m.im):Math.ceil(m.im))},"Complex, number":function(m,h){return new r(m.re>0?i(m.re,h):a(m.re,h),m.im>0?i(m.im,h):a(m.im,h))},"Complex, BigNumber":function(m,h){var v=h.toNumber();return new r(m.re>0?i(m.re,v):a(m.re,v),m.im>0?i(m.im,v):a(m.im,v))},BigNumber:function(m){return m.isNegative()?a(m):i(m)},"BigNumber, number | BigNumber":function(m,h){return m.isNegative()?a(m,h):i(m,h)},bigint:d=>d,"bigint, number":(d,m)=>d,"bigint, BigNumber":(d,m)=>d,Fraction:function(m){return m.s<0n?m.ceil():m.floor()},"Fraction, number | BigNumber":function(m,h){return m.s<0n?a(m,h):i(m,h)},"Unit, number, Unit":e.referToSelf(d=>function(m,h,v){var T=m.toNumeric(v);return v.multiply(d(T,h))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(m,h,v)=>d(m,h.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(m,h,v)=>lt(m,T=>d(T,h,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(m,h)=>d(m,0,h)),"Array | Matrix":e.referToSelf(d=>m=>lt(m,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(m,h)=>lt(m,v=>d(v,h),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(m,h)=>c(n(h),m,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(m,h)=>s(m,0)?u(h.size(),h.storage()):h.storage()==="dense"?c(h,m,d,!0):o(h,m,d,!0))})}),Bg="floor",mz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],hz=new ws(10),pz=W(Bg,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function a(i){var s=Math.floor(i),u=n(i);return s===u?s:Kr(i,u,r.relTol,r.absTol)&&!Kr(i,s,r.relTol,r.absTol)?u:s}return e(Bg,{number:a,"number, number":function(s,u){if(!We(u))throw new RangeError("number of decimals in function floor must be an integer");if(u<0||u>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**u;return a(s*l)/l}})}),e4=W(Bg,mz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u}=t,l=on({typed:e,equalScalar:i}),o=jr({typed:e,DenseMatrix:u}),c=va({typed:e}),f=pz({typed:e,config:r,round:n});function d(m){var h=(S,C)=>pa(S,C,r.relTol,r.absTol),v=m.floor(),T=n(m);return v.eq(T)?v:h(m,T)&&!h(m,v)?T:v}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,v){return h.floor(v)},"Complex, BigNumber":function(h,v){return h.floor(v.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(h,v){var T=hz.pow(v);return d(h.mul(T)).div(T)},bigint:m=>m,"bigint, number":(m,h)=>m,"bigint, BigNumber":(m,h)=>m,Fraction:function(h){return h.floor()},"Fraction, number":function(h,v){return h.floor(v)},"Fraction, BigNumber":function(h,v){return h.floor(v.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(h,v,T){var S=h.toNumeric(T);return T.multiply(m(S,v))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(h,v,T)=>m(h,v.toNumber(),T)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(h,v,T)=>lt(h,S=>m(S,v,T),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(h,v)=>m(h,0,v)),"Array | Matrix":e.referToSelf(m=>h=>lt(h,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(h,v)=>lt(h,T=>m(T,v),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(h,v)=>l(h,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(h,v)=>c(h,v,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(h,v)=>c(a(v),h,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(h,v)=>i(h,0)?s(v.size(),v.storage()):v.storage()==="dense"?c(v,h,m,!0):o(v,h,m,!0))})}),vz="matAlgo02xDS0",gz=["typed","equalScalar"],Fa=W(vz,gz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s,u){var l=a._data,o=a._size,c=a._datatype||a.getDataType(),f=i._values,d=i._index,m=i._ptr,h=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(o.length!==h.length)throw new mt(o.length,h.length);if(o[0]!==h[0]||o[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+h+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var T=o[0],S=o[1],C,_=r,M=0,y=s;typeof c=="string"&&c===v&&c!=="mixed"&&(C=c,_=e.find(r,[C,C]),M=e.convert(0,C),y=e.find(s,[C,C]));for(var x=[],w=[],g=[],N=0;N<S;N++){g[N]=w.length;for(var E=m[N],b=m[N+1],D=E;D<b;D++){var I=d[D],F=u?y(f[D],l[I][N]):y(l[I][N],f[D]);_(F,M)||(w.push(I),x.push(F))}}return g[S]=w.length,i.createSparseMatrix({values:x,index:w,ptr:g,size:[T,S],datatype:c===a._datatype&&v===i._datatype?C:void 0})}}),yz="matAlgo03xDSf",xz=["typed"],bn=W(yz,xz,t=>{var{typed:e}=t;return function(n,a,i,s){var u=n._data,l=n._size,o=n._datatype||n.getDataType(),c=a._values,f=a._index,d=a._ptr,m=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==m.length)throw new mt(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],T=l[1],S,C=0,_=i;typeof o=="string"&&o===h&&o!=="mixed"&&(S=o,C=e.convert(0,S),_=e.find(i,[S,S]));for(var M=[],y=0;y<v;y++)M[y]=[];for(var x=[],w=[],g=0;g<T;g++){for(var N=g+1,E=d[g],b=d[g+1],D=E;D<b;D++){var I=f[D];x[I]=s?_(c[D],u[I][g]):_(u[I][g],c[D]),w[I]=N}for(var F=0;F<v;F++)w[F]===N?M[F][g]=x[F]:M[F][g]=s?_(C,u[F][g]):_(u[F][g],C)}return n.createDenseMatrix({data:M,size:[v,T],datatype:o===n._datatype&&h===a._datatype?S:void 0})}}),bz="matAlgo05xSfSf",wz=["typed","equalScalar"],kh=W(bz,wz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,h=i._ptr,v=i._size,T=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new mt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var S=c[0],C=c[1],_,M=r,y=0,x=s;typeof f=="string"&&f===T&&f!=="mixed"&&(_=f,M=e.find(r,[_,_]),y=e.convert(0,_),x=e.find(s,[_,_]));var w=u&&d?[]:void 0,g=[],N=[],E=w?[]:void 0,b=w?[]:void 0,D=[],I=[],F,O,P,z;for(O=0;O<C;O++){N[O]=g.length;var $=O+1;for(P=o[O],z=o[O+1];P<z;P++)F=l[P],g.push(F),D[F]=$,E&&(E[F]=u[P]);for(P=h[O],z=h[O+1];P<z;P++)F=m[P],D[F]!==$&&g.push(F),I[F]=$,b&&(b[F]=d[P]);if(w)for(P=N[O];P<g.length;){F=g[P];var L=D[F],q=I[F];if(L===$||q===$){var ae=L===$?E[F]:y,j=q===$?b[F]:y,K=x(ae,j);M(K,y)?g.splice(P,1):(w.push(K),P++)}}}return N[C]=g.length,a.createSparseMatrix({values:w,index:g,ptr:N,size:[S,C],datatype:f===a._datatype&&T===i._datatype?_:void 0})}}),Nz="matAlgo13xDD",_z=["typed"],t4=W(Nz,_z,t=>{var{typed:e}=t;return function(a,i,s){var u=a._data,l=a._size,o=a._datatype,c=i._data,f=i._size,d=i._datatype,m=[];if(l.length!==f.length)throw new mt(l.length,f.length);for(var h=0;h<l.length;h++){if(l[h]!==f[h])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");m[h]=l[h]}var v,T=s;typeof o=="string"&&o===d&&(v=o,T=e.find(s,[v,v]));var S=m.length>0?r(T,0,m,m[0],u,c):[];return a.createDenseMatrix({data:S,size:m,datatype:v})};function r(n,a,i,s,u,l){var o=[];if(a===i.length-1)for(var c=0;c<s;c++)o[c]=n(u[c],l[c]);else for(var f=0;f<s;f++)o[f]=r(n,a+1,i,i[a+1],u[f],l[f]);return o}});function Vr(t,e){if(Ei(t.size(),e.size()))return[t,e];var r=Pm(t.size(),e.size());return[t,e].map(n=>Ez(n,r))}function Ez(t,e){return Ei(t.size(),e)?t:t.create(Ys(t.valueOf(),e),t.datatype())}var Sz="matrixAlgorithmSuite",Az=["typed","matrix"],Zt=W(Sz,Az,t=>{var{typed:e,matrix:r}=t,n=t4({typed:e}),a=va({typed:e});return function(s){var u=s.elop,l=s.SD||s.DS,o;u?(o={"DenseMatrix, DenseMatrix":(m,h)=>n(...Vr(m,h),u),"Array, Array":(m,h)=>n(...Vr(r(m),r(h)),u).valueOf(),"Array, DenseMatrix":(m,h)=>n(...Vr(r(m),h),u),"DenseMatrix, Array":(m,h)=>n(...Vr(m,r(h)),u)},s.SS&&(o["SparseMatrix, SparseMatrix"]=(m,h)=>s.SS(...Vr(m,h),u,!1)),s.DS&&(o["DenseMatrix, SparseMatrix"]=(m,h)=>s.DS(...Vr(m,h),u,!1),o["Array, SparseMatrix"]=(m,h)=>s.DS(...Vr(r(m),h),u,!1)),l&&(o["SparseMatrix, DenseMatrix"]=(m,h)=>l(...Vr(h,m),u,!0),o["SparseMatrix, Array"]=(m,h)=>l(...Vr(r(h),m),u,!0))):(o={"DenseMatrix, DenseMatrix":e.referToSelf(m=>(h,v)=>n(...Vr(h,v),m)),"Array, Array":e.referToSelf(m=>(h,v)=>n(...Vr(r(h),r(v)),m).valueOf()),"Array, DenseMatrix":e.referToSelf(m=>(h,v)=>n(...Vr(r(h),v),m)),"DenseMatrix, Array":e.referToSelf(m=>(h,v)=>n(...Vr(h,r(v)),m))},s.SS&&(o["SparseMatrix, SparseMatrix"]=e.referToSelf(m=>(h,v)=>s.SS(...Vr(h,v),m,!1))),s.DS&&(o["DenseMatrix, SparseMatrix"]=e.referToSelf(m=>(h,v)=>s.DS(...Vr(h,v),m,!1)),o["Array, SparseMatrix"]=e.referToSelf(m=>(h,v)=>s.DS(...Vr(r(h),v),m,!1))),l&&(o["SparseMatrix, DenseMatrix"]=e.referToSelf(m=>(h,v)=>l(...Vr(v,h),m,!0)),o["SparseMatrix, Array"]=e.referToSelf(m=>(h,v)=>l(...Vr(r(v),h),m,!0))));var c=s.scalar||"any",f=s.Ds||s.Ss;f&&(u?(o["DenseMatrix,"+c]=(m,h)=>a(m,h,u,!1),o[c+", DenseMatrix"]=(m,h)=>a(h,m,u,!0),o["Array,"+c]=(m,h)=>a(r(m),h,u,!1).valueOf(),o[c+", Array"]=(m,h)=>a(r(h),m,u,!0).valueOf()):(o["DenseMatrix,"+c]=e.referToSelf(m=>(h,v)=>a(h,v,m,!1)),o[c+", DenseMatrix"]=e.referToSelf(m=>(h,v)=>a(v,h,m,!0)),o["Array,"+c]=e.referToSelf(m=>(h,v)=>a(r(h),v,m,!1).valueOf()),o[c+", Array"]=e.referToSelf(m=>(h,v)=>a(r(v),h,m,!0).valueOf())));var d=s.sS!==void 0?s.sS:s.Ss;return u?(s.Ss&&(o["SparseMatrix,"+c]=(m,h)=>s.Ss(m,h,u,!1)),d&&(o[c+", SparseMatrix"]=(m,h)=>d(h,m,u,!0))):(s.Ss&&(o["SparseMatrix,"+c]=e.referToSelf(m=>(h,v)=>s.Ss(h,v,m,!1))),d&&(o[c+", SparseMatrix"]=e.referToSelf(m=>(h,v)=>d(v,h,m,!0)))),u&&u.signatures&&B3(o,u.signatures),o}}),S2="mod",Dz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],r4=W(S2,Dz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u,concat:l}=t,o=e4({typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:u}),c=Fa({typed:e,equalScalar:i}),f=bn({typed:e}),d=kh({typed:e,equalScalar:i}),m=on({typed:e,equalScalar:i}),h=jr({typed:e,DenseMatrix:u}),v=Zt({typed:e,matrix:a,concat:l});return e(S2,{"number, number":T,"BigNumber, BigNumber":function(C,_){return _.isZero()?C:C.sub(_.mul(o(C.div(_))))},"bigint, bigint":function(C,_){if(_===0n)return C;if(C<0){var M=C%_;return M===0n?M:M+_}return C%_},"Fraction, Fraction":function(C,_){return _.equals(0)?C:C.sub(_.mul(o(C.div(_))))}},v({SS:d,DS:f,SD:c,Ss:m,sS:h}));function T(S,C){return C===0?S:S-C*o(S/C)}}),Cz="matAlgo01xDSid",Tz=["typed"],Cs=W(Cz,Tz,t=>{var{typed:e}=t;return function(n,a,i,s){var u=n._data,l=n._size,o=n._datatype||n.getDataType(),c=a._values,f=a._index,d=a._ptr,m=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==m.length)throw new mt(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],T=l[1],S=typeof o=="string"&&o!=="mixed"&&o===h?o:void 0,C=S?e.find(i,[S,S]):i,_,M,y=[];for(_=0;_<v;_++)y[_]=[];var x=[],w=[];for(M=0;M<T;M++){for(var g=M+1,N=d[M],E=d[M+1],b=N;b<E;b++)_=f[b],x[_]=s?C(c[b],u[_][M]):C(u[_][M],c[b]),w[_]=g;for(_=0;_<v;_++)w[_]===g?y[_][M]=x[_]:y[_][M]=u[_][M]}return n.createDenseMatrix({data:y,size:[v,T],datatype:o===n._datatype&&h===a._datatype?S:void 0})}}),Mz="matAlgo04xSidSid",Iz=["typed","equalScalar"],Oy=W(Mz,Iz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,h=i._ptr,v=i._size,T=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new mt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var S=c[0],C=c[1],_,M=r,y=0,x=s;typeof f=="string"&&f===T&&f!=="mixed"&&(_=f,M=e.find(r,[_,_]),y=e.convert(0,_),x=e.find(s,[_,_]));var w=u&&d?[]:void 0,g=[],N=[],E=u&&d?[]:void 0,b=u&&d?[]:void 0,D=[],I=[],F,O,P,z,$;for(O=0;O<C;O++){N[O]=g.length;var L=O+1;for(z=o[O],$=o[O+1],P=z;P<$;P++)F=l[P],g.push(F),D[F]=L,E&&(E[F]=u[P]);for(z=h[O],$=h[O+1],P=z;P<$;P++)if(F=m[P],D[F]===L){if(E){var q=x(E[F],d[P]);M(q,y)?D[F]=null:E[F]=q}}else g.push(F),I[F]=L,b&&(b[F]=d[P]);if(E&&b)for(P=N[O];P<g.length;)F=g[P],D[F]===L?(w[P]=E[F],P++):I[F]===L?(w[P]=b[F],P++):g.splice(P,1)}return N[C]=g.length,a.createSparseMatrix({values:w,index:g,ptr:N,size:[S,C],datatype:f===a._datatype&&T===i._datatype?_:void 0})}}),Pz="matAlgo10xSids",Fz=["typed","DenseMatrix"],_o=W(Pz,Fz,t=>{var{typed:e,DenseMatrix:r}=t;return function(a,i,s,u){var l=a._values,o=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],h=f[1],v,T=s;typeof d=="string"&&(v=d,i=e.convert(i,v),T=e.find(s,[v,v]));for(var S=[],C=[],_=[],M=0;M<h;M++){for(var y=M+1,x=c[M],w=c[M+1],g=x;g<w;g++){var N=o[g];C[N]=l[g],_[N]=y}for(var E=0;E<m;E++)M===0&&(S[E]=[]),_[E]===y?S[E][M]=u?T(i,C[E]):T(C[E],i):S[E][M]=i}return new r({data:S,size:[m,h],datatype:v})}});function Eo(t,e,r,n){if(!(this instanceof Eo))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Eo.prototype=new Error;Eo.prototype.constructor=Error;Eo.prototype.name="ArgumentsError";Eo.prototype.isArgumentsError=!0;var A2="gcd",Rz=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],Jp="number | BigNumber | Fraction | Matrix | Array",Oz="".concat(Jp,", ").concat(Jp,", ...").concat(Jp);function D2(t){return!t.some(e=>Array.isArray(e))}var Bz=W(A2,Rz,t=>{var{typed:e,matrix:r,config:n,round:a,equalScalar:i,zeros:s,BigNumber:u,DenseMatrix:l,concat:o}=t,c=r4({typed:e,config:n,round:a,matrix:r,equalScalar:i,zeros:s,DenseMatrix:l,concat:o}),f=Cs({typed:e}),d=Oy({typed:e,equalScalar:i}),m=_o({typed:e,DenseMatrix:l}),h=Zt({typed:e,matrix:r,concat:o});return e(A2,{"number, number":v,"BigNumber, BigNumber":T,"Fraction, Fraction":(S,C)=>S.gcd(C)},h({SS:d,DS:f,Ss:m}),{[Oz]:e.referToSelf(S=>(C,_,M)=>{for(var y=S(C,_),x=0;x<M.length;x++)y=S(y,M[x]);return y}),Array:e.referToSelf(S=>C=>{if(C.length===1&&Array.isArray(C[0])&&D2(C[0]))return S(...C[0]);if(D2(C))return S(...C);throw new Eo("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(S=>C=>S(C.toArray()))});function v(S,C){if(!We(S)||!We(C))throw new Error("Parameters in function gcd must be integer numbers");for(var _;C!==0;)_=c(S,C),S=C,C=_;return S<0?-S:S}function T(S,C){if(!S.isInt()||!C.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var _=new u(0);!C.isZero();){var M=c(S,C);S=C,C=M}return S.lt(_)?S.neg():S}}),jz="matAlgo06xS0S0",kz=["typed","equalScalar"],$h=W(jz,kz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._size,o=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=i._values,f=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new mt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var m=l[0],h=l[1],v,T=r,S=0,C=s;typeof o=="string"&&o===d&&o!=="mixed"&&(v=o,T=e.find(r,[v,v]),S=e.convert(0,v),C=e.find(s,[v,v]));for(var _=u&&c?[]:void 0,M=[],y=[],x=_?[]:void 0,w=[],g=[],N=0;N<h;N++){y[N]=M.length;var E=N+1;if(KN(a,N,w,x,g,E,M,C),KN(i,N,w,x,g,E,M,C),x)for(var b=y[N];b<M.length;){var D=M[b];if(g[D]===E){var I=x[D];T(I,S)?M.splice(b,1):(_.push(I),b++)}else M.splice(b,1)}else for(var F=y[N];F<M.length;){var O=M[F];g[O]!==E?M.splice(F,1):F++}}return y[h]=M.length,a.createSparseMatrix({values:_,index:M,ptr:y,size:[m,h],datatype:o===a._datatype&&d===i._datatype?v:void 0})}}),C2="lcm",$z=["typed","matrix","equalScalar","concat"],Lz=W(C2,$z,t=>{var{typed:e,matrix:r,equalScalar:n,concat:a}=t,i=Fa({typed:e,equalScalar:n}),s=$h({typed:e,equalScalar:n}),u=on({typed:e,equalScalar:n}),l=Zt({typed:e,matrix:r,concat:a}),o="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(o,", ").concat(o,", ...").concat(o)]=e.referToSelf(d=>(m,h,v)=>{for(var T=d(m,h),S=0;S<v.length;S++)T=d(T,v[S]);return T}),e(C2,{"number, number":bM,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,m)=>d.lcm(m)},l({SS:s,DS:i,Ss:u}),c);function f(d,m){if(!d.isInt()||!m.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(m.isZero())return m;for(var h=d.times(m);!m.isZero();){var v=m;m=d.mod(v),d=v}return h.div(d).abs()}});function By(t,e,r,n){return function(a){if(a>0||r.predictable){if(a<=0)return NaN;var i=a.toString(16),s=i.substring(0,15);return t*(i.length-s.length)+e(+("0x"+s))}return n(a.toNumber())}}var T2="log10",zz=["typed","config","Complex"],Vz=Om(16),Uz=W(T2,zz,t=>{var{typed:e,config:r,Complex:n}=t;function a(s){return s.log().div(Math.LN10)}function i(s){return a(new n(s,0))}return e(T2,{number:function(u){return u>=0||r.predictable?Om(u):i(u)},bigint:By(Vz,Om,r,i),Complex:a,BigNumber:function(u){return!u.isNegative()||r.predictable?u.log():i(u.toNumber())},"Array | Matrix":e.referToSelf(s=>u=>lt(u,s))})}),M2="log2",qz=["typed","config","Complex"],Hz=W(M2,qz,t=>{var{typed:e,config:r,Complex:n}=t;function a(s){return i(new n(s,0))}return e(M2,{number:function(u){return u>=0||r.predictable?Cg(u):a(u)},bigint:By(4,Cg,r,a),Complex:i,BigNumber:function(u){return!u.isNegative()||r.predictable?u.log(2):a(u.toNumber())},"Array | Matrix":e.referToSelf(s=>u=>lt(u,s))});function i(s){var u=Math.sqrt(s.re*s.re+s.im*s.im);return new n(Math.log2?Math.log2(u):Math.log(u)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),Gz="multiplyScalar",Wz=["typed"],Qz=W(Gz,Wz,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":hM,"Complex, Complex":function(n,a){return n.mul(a)},"BigNumber, BigNumber":function(n,a){return n.times(a)},"bigint, bigint":function(n,a){return n*a},"Fraction, Fraction":function(n,a){return n.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),I2="multiply",Xz=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Kz=W(I2,Xz,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:a,equalScalar:i,dot:s}=t,u=on({typed:e,equalScalar:i}),l=va({typed:e});function o(y,x){switch(y.length){case 1:switch(x.length){case 1:if(y[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(y[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+y[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(y[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+y[1]+") must match Vector length ("+x[0]+")");break;case 2:if(y[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+y[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+y.length+" dimensions)")}}function c(y,x,w){if(w===0)throw new Error("Cannot multiply two empty vectors");return s(y,x)}function f(y,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(y,x)}function d(y,x){var w=y._data,g=y._size,N=y._datatype||y.getDataType(),E=x._data,b=x._size,D=x._datatype||x.getDataType(),I=g[0],F=b[1],O,P=n,z=a;N&&D&&N===D&&typeof N=="string"&&N!=="mixed"&&(O=N,P=e.find(n,[O,O]),z=e.find(a,[O,O]));for(var $=[],L=0;L<F;L++){for(var q=z(w[0],E[0][L]),ae=1;ae<I;ae++)q=P(q,z(w[ae],E[ae][L]));$[L]=q}return y.createDenseMatrix({data:$,size:[F],datatype:N===y._datatype&&D===x._datatype?O:void 0})}var m=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":C}),h=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":T,"DenseMatrix, SparseMatrix":S,"SparseMatrix, DenseMatrix":_,"SparseMatrix, SparseMatrix":M});function v(y,x){var w=y._data,g=y._size,N=y._datatype||y.getDataType(),E=x._data,b=x._datatype||x.getDataType(),D=g[0],I=g[1],F,O=n,P=a;N&&b&&N===b&&typeof N=="string"&&N!=="mixed"&&(F=N,O=e.find(n,[F,F]),P=e.find(a,[F,F]));for(var z=[],$=0;$<D;$++){for(var L=w[$],q=P(L[0],E[0]),ae=1;ae<I;ae++)q=O(q,P(L[ae],E[ae]));z[$]=q}return y.createDenseMatrix({data:z,size:[D],datatype:N===y._datatype&&b===x._datatype?F:void 0})}function T(y,x){var w=y._data,g=y._size,N=y._datatype||y.getDataType(),E=x._data,b=x._size,D=x._datatype||x.getDataType(),I=g[0],F=g[1],O=b[1],P,z=n,$=a;N&&D&&N===D&&typeof N=="string"&&N!=="mixed"&&N!=="mixed"&&(P=N,z=e.find(n,[P,P]),$=e.find(a,[P,P]));for(var L=[],q=0;q<I;q++){var ae=w[q];L[q]=[];for(var j=0;j<O;j++){for(var K=$(ae[0],E[0][j]),V=1;V<F;V++)K=z(K,$(ae[V],E[V][j]));L[q][j]=K}}return y.createDenseMatrix({data:L,size:[I,O],datatype:N===y._datatype&&D===x._datatype?P:void 0})}function S(y,x){var w=y._data,g=y._size,N=y._datatype||y.getDataType(),E=x._values,b=x._index,D=x._ptr,I=x._size,F=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!E)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var O=g[0],P=I[1],z,$=n,L=a,q=i,ae=0;N&&F&&N===F&&typeof N=="string"&&N!=="mixed"&&(z=N,$=e.find(n,[z,z]),L=e.find(a,[z,z]),q=e.find(i,[z,z]),ae=e.convert(0,z));for(var j=[],K=[],V=[],pe=x.createSparseMatrix({values:j,index:K,ptr:V,size:[O,P],datatype:N===y._datatype&&F===x._datatype?z:void 0}),ue=0;ue<P;ue++){V[ue]=K.length;var fe=D[ue],H=D[ue+1];if(H>fe)for(var J=0,ee=0;ee<O;ee++){for(var ie=ee+1,oe=void 0,ve=fe;ve<H;ve++){var me=b[ve];J!==ie?(oe=L(w[ee][me],E[ve]),J=ie):oe=$(oe,L(w[ee][me],E[ve]))}J===ie&&!q(oe,ae)&&(K.push(ee),j.push(oe))}}return V[P]=K.length,pe}function C(y,x){var w=y._values,g=y._index,N=y._ptr,E=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!w)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var b=x._data,D=x._datatype||x.getDataType(),I=y._size[0],F=x._size[0],O=[],P=[],z=[],$,L=n,q=a,ae=i,j=0;E&&D&&E===D&&typeof E=="string"&&E!=="mixed"&&($=E,L=e.find(n,[$,$]),q=e.find(a,[$,$]),ae=e.find(i,[$,$]),j=e.convert(0,$));var K=[],V=[];z[0]=0;for(var pe=0;pe<F;pe++){var ue=b[pe];if(!ae(ue,j))for(var fe=N[pe],H=N[pe+1],J=fe;J<H;J++){var ee=g[J];V[ee]?K[ee]=L(K[ee],q(ue,w[J])):(V[ee]=!0,P.push(ee),K[ee]=q(ue,w[J]))}}for(var ie=P.length,oe=0;oe<ie;oe++){var ve=P[oe];O[oe]=K[ve]}return z[1]=P.length,y.createSparseMatrix({values:O,index:P,ptr:z,size:[I,1],datatype:E===y._datatype&&D===x._datatype?$:void 0})}function _(y,x){var w=y._values,g=y._index,N=y._ptr,E=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!w)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var b=x._data,D=x._datatype||x.getDataType(),I=y._size[0],F=x._size[0],O=x._size[1],P,z=n,$=a,L=i,q=0;E&&D&&E===D&&typeof E=="string"&&E!=="mixed"&&(P=E,z=e.find(n,[P,P]),$=e.find(a,[P,P]),L=e.find(i,[P,P]),q=e.convert(0,P));for(var ae=[],j=[],K=[],V=y.createSparseMatrix({values:ae,index:j,ptr:K,size:[I,O],datatype:E===y._datatype&&D===x._datatype?P:void 0}),pe=[],ue=[],fe=0;fe<O;fe++){K[fe]=j.length;for(var H=fe+1,J=0;J<F;J++){var ee=b[J][fe];if(!L(ee,q))for(var ie=N[J],oe=N[J+1],ve=ie;ve<oe;ve++){var me=g[ve];ue[me]!==H?(ue[me]=H,j.push(me),pe[me]=$(ee,w[ve])):pe[me]=z(pe[me],$(ee,w[ve]))}}for(var Te=K[fe],ke=j.length,ze=Te;ze<ke;ze++){var Oe=j[ze];ae[ze]=pe[Oe]}}return K[O]=j.length,V}function M(y,x){var w=y._values,g=y._index,N=y._ptr,E=y._datatype||y._data===void 0?y._datatype:y.getDataType(),b=x._values,D=x._index,I=x._ptr,F=x._datatype||x._data===void 0?x._datatype:x.getDataType(),O=y._size[0],P=x._size[1],z=w&&b,$,L=n,q=a;E&&F&&E===F&&typeof E=="string"&&E!=="mixed"&&($=E,L=e.find(n,[$,$]),q=e.find(a,[$,$]));for(var ae=z?[]:void 0,j=[],K=[],V=y.createSparseMatrix({values:ae,index:j,ptr:K,size:[O,P],datatype:E===y._datatype&&F===x._datatype?$:void 0}),pe=z?[]:void 0,ue=[],fe,H,J,ee,ie,oe,ve,me,Te=0;Te<P;Te++){K[Te]=j.length;var ke=Te+1;for(ie=I[Te],oe=I[Te+1],ee=ie;ee<oe;ee++)if(me=D[ee],z)for(H=N[me],J=N[me+1],fe=H;fe<J;fe++)ve=g[fe],ue[ve]!==ke?(ue[ve]=ke,j.push(ve),pe[ve]=q(b[ee],w[fe])):pe[ve]=L(pe[ve],q(b[ee],w[fe]));else for(H=N[me],J=N[me+1],fe=H;fe<J;fe++)ve=g[fe],ue[ve]!==ke&&(ue[ve]=ke,j.push(ve));if(z)for(var ze=K[Te],Oe=j.length,$e=ze;$e<Oe;$e++){var Q=j[$e];ae[$e]=pe[Q]}}return K[P]=j.length,V}return e(I2,a,{"Array, Array":e.referTo("Matrix, Matrix",y=>(x,w)=>{o(at(x),at(w));var g=y(r(x),r(w));return Ye(g)?g.valueOf():g}),"Matrix, Matrix":function(x,w){var g=x.size(),N=w.size();return o(g,N),g.length===1?N.length===1?c(x,w,g[0]):f(x,w):N.length===1?m(x,w):h(x,w)},"Matrix, Array":e.referTo("Matrix,Matrix",y=>(x,w)=>y(x,r(w))),"Array, Matrix":e.referToSelf(y=>(x,w)=>y(r(x,w.storage()),w)),"SparseMatrix, any":function(x,w){return u(x,w,a,!1)},"DenseMatrix, any":function(x,w){return l(x,w,a,!1)},"any, SparseMatrix":function(x,w){return u(w,x,a,!0)},"any, DenseMatrix":function(x,w){return l(w,x,a,!0)},"Array, any":function(x,w){return l(r(x),w,a,!1).valueOf()},"any, Array":function(x,w){return l(r(w),x,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(y=>(x,w,g)=>{for(var N=y(x,w),E=0;E<g.length;E++)N=y(N,g[E]);return N})})}),P2="nthRoot",Jz=["typed","matrix","equalScalar","BigNumber","concat"],Yz=W(P2,Jz,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:a,concat:i}=t,s=Cs({typed:e}),u=Fa({typed:e,equalScalar:n}),l=$h({typed:e,equalScalar:n}),o=on({typed:e,equalScalar:n}),c=Zt({typed:e,matrix:r,concat:i});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(P2,{number:ZN,"number, number":ZN,BigNumber:m=>d(m,new a(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",m=>h=>m(r(h),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",m=>h=>m(h,2)),SparseMatrix:e.referTo("SparseMatrix,number",m=>h=>m(h,2)),"SparseMatrix, SparseMatrix":e.referToSelf(m=>(h,v)=>{if(v.density()===1)return l(h,v,m);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(m=>(h,v)=>{if(v.density()===1)return s(h,v,m,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",m=>(h,v)=>m(r(h),v)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(h,v)=>{if(v.density()===1)return o(v,h,m,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:u,Ss:o,sS:!1}));function d(m,h){var v=a.precision,T=a.clone({precision:v+2}),S=new a(0),C=new T(1),_=h.isNegative();if(_&&(h=h.neg()),h.isZero())throw new Error("Root must be non-zero");if(m.isNegative()&&!h.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(m.isZero())return _?new T(1/0):0;if(!m.isFinite())return _?S:m;var M=m.abs().pow(C.div(h));return M=m.isNeg()?M.neg():M,new a((_?C.div(M):M).toPrecision(v))}}),F2="sign",Zz=["typed","BigNumber","Fraction","complex"],eV=W(F2,Zz,t=>{var{typed:e,BigNumber:r,complex:n,Fraction:a}=t;return e(F2,{number:Tg,Complex:function(s){return s.im===0?n(Tg(s.re)):s.sign()},BigNumber:function(s){return new r(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return s.n===0n?new a(0):new a(s.s)},"Array | Matrix":e.referToSelf(i=>s=>lt(s,i,!0)),Unit:e.referToSelf(i=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(i,s.valueType())(s.value)})})}),tV="sqrt",rV=["config","typed","Complex"],nV=W(tV,rV,t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:a,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():a(s.toNumber())},Unit:function(s){return s.pow(.5)}});function a(i){return isNaN(i)?NaN:i>=0||e.predictable?Math.sqrt(i):new n(i,0).sqrt()}}),R2="square",aV=["typed"],iV=W(R2,aV,t=>{var{typed:e}=t;return e(R2,{number:wM,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),O2="subtract",sV=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],oV=W(O2,sV,t=>{var{typed:e,matrix:r,equalScalar:n,subtractScalar:a,unaryMinus:i,DenseMatrix:s,concat:u}=t,l=Cs({typed:e}),o=bn({typed:e}),c=kh({typed:e,equalScalar:n}),f=_o({typed:e,DenseMatrix:s}),d=jr({typed:e,DenseMatrix:s}),m=Zt({typed:e,matrix:r,concat:u});return e(O2,{"any, any":a},m({elop:a,SS:c,DS:l,SD:o,Ss:d,sS:f}))}),B2="xgcd",uV=["typed","config","matrix","BigNumber"],lV=W(B2,uV,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e(B2,{"number, number":function(u,l){var o=NM(u,l);return r.matrix==="Array"?o:n(o)},"BigNumber, BigNumber":i});function i(s,u){var l,o,c,f=new a(0),d=new a(1),m=f,h=d,v=d,T=f;if(!s.isInt()||!u.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!u.isZero();)o=s.div(u).floor(),c=s.mod(u),l=m,m=h.minus(o.times(m)),h=l,l=v,v=T.minus(o.times(v)),T=l,s=u,u=c;var S;return s.lt(f)?S=[s.neg(),h.neg(),T.neg()]:S=[s,s.isZero()?0:h,T],r.matrix==="Array"?S:n(S)}}),j2="invmod",cV=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],fV=W(j2,cV,t=>{var{typed:e,config:r,BigNumber:n,xgcd:a,equal:i,smaller:s,mod:u,add:l,isInteger:o}=t;return e(j2,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!o(f)||!o(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=u(f,d),i(d,0))throw new Error("Divisor must be non zero");var m=a(f,d);m=m.valueOf();var[h,v]=m;return i(h,n(1))?(v=u(v,d),s(v,n(0))&&(v=l(v,d)),v):NaN}}),dV="matAlgo09xS0Sf",mV=["typed","equalScalar"],n4=W(dV,mV,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,h=i._ptr,v=i._size,T=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new mt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var S=c[0],C=c[1],_,M=r,y=0,x=s;typeof f=="string"&&f===T&&f!=="mixed"&&(_=f,M=e.find(r,[_,_]),y=e.convert(0,_),x=e.find(s,[_,_]));var w=u&&d?[]:void 0,g=[],N=[],E=w?[]:void 0,b=[],D,I,F,O,P;for(I=0;I<C;I++){N[I]=g.length;var z=I+1;if(E)for(O=h[I],P=h[I+1],F=O;F<P;F++)D=m[F],b[D]=z,E[D]=d[F];for(O=o[I],P=o[I+1],F=O;F<P;F++)if(D=l[F],E){var $=b[D]===z?E[D]:y,L=x(u[F],$);M(L,y)||(g.push(D),w.push(L))}else g.push(D)}return N[C]=g.length,a.createSparseMatrix({values:w,index:g,ptr:N,size:[S,C],datatype:f===a._datatype&&T===i._datatype?_:void 0})}}),k2="dotMultiply",hV=["typed","matrix","equalScalar","multiplyScalar","concat"],pV=W(k2,hV,t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:a,concat:i}=t,s=Fa({typed:e,equalScalar:n}),u=n4({typed:e,equalScalar:n}),l=on({typed:e,equalScalar:n}),o=Zt({typed:e,matrix:r,concat:i});return e(k2,o({elop:a,SS:u,DS:s,Ss:l}))});function vV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return jy(t,e,function(n,a){return n&a})}function zc(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var n=t.plus(new e(1));return n.s=-n.s||null,e.config({precision:r}),n}function gV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var n=new r(-1);return t.isZero()||e.eq(n)||t.eq(e)?e:e.isZero()||t.eq(n)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?n:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:jy(t,e,function(a,i){return a|i})}function jy(t,e,r){var n=t.constructor,a,i,s=+(t.s<0),u=+(e.s<0);if(s){a=td(zc(t));for(var l=0;l<a.length;++l)a[l]^=1}else a=td(t);if(u){i=td(zc(e));for(var o=0;o<i.length;++o)i[o]^=1}else i=td(e);var c,f,d;a.length<=i.length?(c=a,f=i,d=s):(c=i,f=a,d=u);var m=c.length,h=f.length,v=r(s,u)^1,T=new n(v^1),S=new n(1),C=new n(2),_=n.precision;for(n.config({precision:1e9});m>0;)r(c[--m],f[--h])===v&&(T=T.plus(S)),S=S.times(C);for(;h>0;)r(d,f[--h])===v&&(T=T.plus(S)),S=S.times(C);return n.config({precision:_}),v===0&&(T.s=-T.s),T}function td(t){for(var e=t.d,r=e[0]+"",n=1;n<e.length;++n){for(var a=e[n]+"",i=7-a.length;i--;)a="0"+a;r+=a}for(var s=r.length;r.charAt(s)==="0";)s--;var u=t.e,l=r.slice(0,s+1||1),o=l.length;if(u>0)if(++u>o)for(u-=o;u--;)l+="0";else u<o&&(l=l.slice(0,u)+"."+l.slice(u));for(var c=[0],f=0;f<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(f++));for(var m=0;m<c.length;++m)c[m]>1&&((c[m+1]===null||c[m+1]===void 0)&&(c[m+1]=0),c[m+1]+=c[m]>>1,c[m]&=1)}return c.reverse()}function yV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var n=new r(-1);return t.eq(n)?zc(e):e.eq(n)?zc(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?n:new r(t.isNegative()===e.isNegative()?1/0:-1/0):jy(t,e,function(a,i){return a^i})}function xV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new r(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e))}function bV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():t.isNegative()?new r(-1):t.isFinite()?new r(0):new r(NaN)}var $2="bitAnd",wV=["typed","matrix","equalScalar","concat"],a4=W($2,wV,t=>{var{typed:e,matrix:r,equalScalar:n,concat:a}=t,i=Fa({typed:e,equalScalar:n}),s=$h({typed:e,equalScalar:n}),u=on({typed:e,equalScalar:n}),l=Zt({typed:e,matrix:r,concat:a});return e($2,{"number, number":EM,"BigNumber, BigNumber":vV,"bigint, bigint":(o,c)=>o&c},l({SS:s,DS:i,Ss:u}))}),L2="bitNot",NV=["typed"],_V=W(L2,NV,t=>{var{typed:e}=t;return e(L2,{number:SM,BigNumber:zc,bigint:r=>~r,"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),z2="bitOr",EV=["typed","matrix","equalScalar","DenseMatrix","concat"],i4=W(z2,EV,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=Cs({typed:e}),u=Oy({typed:e,equalScalar:n}),l=_o({typed:e,DenseMatrix:a}),o=Zt({typed:e,matrix:r,concat:i});return e(z2,{"number, number":AM,"BigNumber, BigNumber":gV,"bigint, bigint":(c,f)=>c|f},o({SS:u,DS:s,Ss:l}))}),SV="matAlgo07xSSf",AV=["typed","SparseMatrix"],ti=W(SV,AV,t=>{var{typed:e,SparseMatrix:r}=t;return function(i,s,u){var l=i._size,o=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._size,f=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==c.length)throw new mt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],m=l[1],h,v=0,T=u;typeof o=="string"&&o===f&&o!=="mixed"&&(h=o,v=e.convert(0,h),T=e.find(u,[h,h]));for(var S=[],C=[],_=new Array(m+1).fill(0),M=[],y=[],x=[],w=[],g=0;g<m;g++){var N=g+1,E=0;n(i,g,x,M,N),n(s,g,w,y,N);for(var b=0;b<d;b++){var D=x[b]===N?M[b]:v,I=w[b]===N?y[b]:v,F=T(D,I);F!==0&&F!==!1&&(C.push(b),S.push(F),E++)}_[g+1]=_[g]+E}return new r({values:S,index:C,ptr:_,size:[d,m],datatype:o===i._datatype&&f===s._datatype?h:void 0})};function n(a,i,s,u,l){for(var o=a._values,c=a._index,f=a._ptr,d=f[i],m=f[i+1];d<m;d++){var h=c[d];s[h]=l,u[h]=o[d]}}}),V2="bitXor",DV=["typed","matrix","DenseMatrix","concat","SparseMatrix"],CV=W(V2,DV,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:a,SparseMatrix:i}=t,s=bn({typed:e}),u=ti({typed:e,SparseMatrix:i}),l=jr({typed:e,DenseMatrix:n}),o=Zt({typed:e,matrix:r,concat:a});return e(V2,{"number, number":DM,"BigNumber, BigNumber":yV,"bigint, bigint":(c,f)=>c^f},o({SS:u,DS:s,Ss:l}))}),U2="arg",TV=["typed"],MV=W(U2,TV,t=>{var{typed:e}=t;return e(U2,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),q2="conj",IV=["typed"],PV=W(q2,IV,t=>{var{typed:e}=t;return e(q2,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:e.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),H2="im",FV=["typed"],RV=W(H2,FV,t=>{var{typed:e}=t;return e(H2,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),G2="re",OV=["typed"],BV=W(G2,OV,t=>{var{typed:e}=t;return e(G2,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),W2="not",jV=["typed"],kV=W(W2,jV,t=>{var{typed:e}=t;return e(W2,{"null | undefined":()=>!0,number:PM,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:r=>!r,Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),Q2="nullish",$V=["typed","matrix","size","flatten","deepEqual"],s4=W(Q2,$V,t=>{var{typed:e,matrix:r,size:n,flatten:a,deepEqual:i}=t,s=bn({typed:e}),u=va({typed:e}),l=t4({typed:e});return e(Q2,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(o,c)=>o,"null, any":(o,c)=>c,"undefined, any":(o,c)=>c,"SparseMatrix, Array | Matrix":(o,c)=>{var f=n(o),d=n(c);if(i(f,d))return o;throw new mt(f,d)},"DenseMatrix, DenseMatrix":e.referToSelf(o=>(c,f)=>l(c,f,o)),"DenseMatrix, SparseMatrix":e.referToSelf(o=>(c,f)=>s(c,f,o,!1)),"DenseMatrix, Array":e.referToSelf(o=>(c,f)=>l(c,r(f),o)),"DenseMatrix, any":e.referToSelf(o=>(c,f)=>u(c,f,o,!1)),"Array, Array":e.referToSelf(o=>(c,f)=>l(r(c),r(f),o).valueOf()),"Array, DenseMatrix":e.referToSelf(o=>(c,f)=>l(r(c),f,o)),"Array, SparseMatrix":e.referToSelf(o=>(c,f)=>s(r(c),f,o,!1)),"Array, any":e.referToSelf(o=>(c,f)=>u(r(c),f,o,!1).valueOf())})}),X2="or",LV=["typed","matrix","equalScalar","DenseMatrix","concat"],o4=W(X2,LV,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=bn({typed:e}),u=kh({typed:e,equalScalar:n}),l=jr({typed:e,DenseMatrix:a}),o=Zt({typed:e,matrix:r,concat:i});return e(X2,{"number, number":Mg,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":Mg,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},o({SS:u,DS:s,Ss:l}))}),K2="xor",zV=["typed","matrix","DenseMatrix","concat","SparseMatrix"],VV=W(K2,zV,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:a,SparseMatrix:i}=t,s=bn({typed:e}),u=ti({typed:e,SparseMatrix:i}),l=jr({typed:e,DenseMatrix:n}),o=Zt({typed:e,matrix:r,concat:a});return e(K2,{"number, number":Ig,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":Ig,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},o({SS:u,DS:s,Ss:l}))}),J2="concat",UV=["typed","matrix","isInteger"],u4=W(J2,UV,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(J2,{"...Array | Matrix | number | BigNumber":function(i){var s,u=i.length,l=-1,o,c=!1,f=[];for(s=0;s<u;s++){var d=i[s];if(Ye(d)&&(c=!0),Xe(d)||ut(d)){if(s!==u-1)throw new Error("Dimension must be specified as last argument");if(o=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>o)throw new Ia(l,o+1)}else{var m=nt(d).valueOf(),h=at(m);if(f[s]=m,o=l,l=h.length-1,s>0&&l!==o)throw new mt(o+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=oM(v,f.shift(),l);return c?r(v):v},"...string":function(i){return i.join("")}})}),Y2="column",qV=["typed","Index","matrix","range"],l4=W(Y2,qV,t=>{var{typed:e,Index:r,matrix:n,range:a}=t;return e(Y2,{"Matrix, number":i,"Array, number":function(u,l){return i(n(nt(u)),l).valueOf()}});function i(s,u){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yt(u,s.size()[1]);var l=a(0,s.size()[0]),o=new r(l,[u]),c=s.subset(o);return Ye(c)?c:n([[c]])}}),Z2="count",HV=["typed","size","prod"],GV=W(Z2,HV,t=>{var{typed:e,size:r,prod:n}=t;return e(Z2,{string:function(i){return i.length},"Matrix | Array":function(i){return n(r(i))}})}),e_="cross",WV=["typed","matrix","subtract","multiply"],QV=W(e_,WV,t=>{var{typed:e,matrix:r,subtract:n,multiply:a}=t;return e(e_,{"Matrix, Matrix":function(u,l){return r(i(u.toArray(),l.toArray()))},"Matrix, Array":function(u,l){return r(i(u.toArray(),l))},"Array, Matrix":function(u,l){return r(i(u,l.toArray()))},"Array, Array":i});function i(s,u){var l=Math.max(at(s).length,at(u).length);s=Mm(s),u=Mm(u);var o=at(s),c=at(u);if(o.length!==1||c.length!==1||o[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+o.join(", ")+"], B = ["+c.join(", ")+"])");var f=[n(a(s[1],u[2]),a(s[2],u[1])),n(a(s[2],u[0]),a(s[0],u[2])),n(a(s[0],u[1]),a(s[1],u[0]))];return l>1?[f]:f}}),t_="diag",XV=["typed","matrix","DenseMatrix","SparseMatrix"],KV=W(t_,XV,t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:a}=t;return e(t_,{Array:function(o){return i(o,0,at(o),null)},"Array, number":function(o,c){return i(o,c,at(o),null)},"Array, BigNumber":function(o,c){return i(o,c.toNumber(),at(o),null)},"Array, string":function(o,c){return i(o,0,at(o),c)},"Array, number, string":function(o,c,f){return i(o,c,at(o),f)},"Array, BigNumber, string":function(o,c,f){return i(o,c.toNumber(),at(o),f)},Matrix:function(o){return i(o,0,o.size(),o.storage())},"Matrix, number":function(o,c){return i(o,c,o.size(),o.storage())},"Matrix, BigNumber":function(o,c){return i(o,c.toNumber(),o.size(),o.storage())},"Matrix, string":function(o,c){return i(o,0,o.size(),c)},"Matrix, number, string":function(o,c,f){return i(o,c,o.size(),f)},"Matrix, BigNumber, string":function(o,c,f){return i(o,c.toNumber(),o.size(),f)}});function i(l,o,c,f){if(!We(o))throw new TypeError("Second parameter in function diag must be an integer");var d=o>0?o:0,m=o<0?-o:0;switch(c.length){case 1:return s(l,o,f,c[0],m,d);case 2:return u(l,o,f,c,m,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,o,c,f,d,m){var h=[f+d,f+m];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?a.diagonal(h,l,o):n.diagonal(h,l,o);return c!==null?v:v.valueOf()}function u(l,o,c,f,d,m){if(Ye(l)){var h=l.diagonal(o);return c!==null?c!==h.storage()?r(h,c):h:h.valueOf()}for(var v=Math.min(f[0]-d,f[1]-m),T=[],S=0;S<v;S++)T[S]=l[S+d][S+m];return c!==null?r(T):T}}),JV="filter",YV=["typed"],c4=W(JV,YV,t=>{var{typed:e}=t;return e("filter",{"Array, function":r_,"Matrix, function":function(n,a){return n.create(r_(n.valueOf(),a),n.datatype())},"Array, RegExp":GN,"Matrix, RegExp":function(n,a){return n.create(GN(n.valueOf(),a),n.datatype())}})});function r_(t,e){var r=fo(e,t,"filter");return r.isUnary?HN(t,r.fn):HN(t,function(n,a,i){return r.fn(n,[a],i)})}var n_="flatten",ZV=["typed"],eU=W(n_,ZV,t=>{var{typed:e}=t;return e(n_,{Array:function(n){return Ct(n)},DenseMatrix:function(n){return n.create(Ct(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),jg="forEach",tU=["typed"],f4=W(jg,tU,t=>{var{typed:e}=t;return e(jg,{"Array, function":rU,"Matrix, function":function(n,a){n.forEach(a)}})});function rU(t,e){var r=fo(e,t,jg);lM(t,r.fn,r.isUnary)}var a_="getMatrixDataType",nU=["typed"],aU=W(a_,nU,t=>{var{typed:e}=t;return e(a_,{Array:function(n){return Bh(n,Xt)},Matrix:function(n){return n.getDataType()}})}),i_="identity",iU=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],sU=W(i_,iU,t=>{var{typed:e,config:r,matrix:n,BigNumber:a,DenseMatrix:i,SparseMatrix:s}=t;return e(i_,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return l(c,f,d)},Array:function(c){return u(c)},"Array, string":function(c,f){return u(c,f)},Matrix:function(c){return u(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return u(c.valueOf(),f)}});function u(o,c){switch(o.length){case 0:return c?n(c):[];case 1:return l(o[0],o[0],c);case 2:return l(o[0],o[1],c);default:throw new Error("Vector containing two values expected")}}function l(o,c,f){var d=ut(o)||ut(c)?a:null;if(ut(o)&&(o=o.toNumber()),ut(c)&&(c=c.toNumber()),!We(o)||o<1)throw new Error("Parameters in function identity must be positive integers");if(!We(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var m=d?new a(1):1,h=d?new d(0):0,v=[o,c];if(f){if(f==="sparse")return s.diagonal(v,m,0,h);if(f==="dense")return i.diagonal(v,m,0,h);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var T=zu([],v,h),S=o<c?o:c,C=0;C<S;C++)T[C][C]=m;return T}}),s_="kron",oU=["typed","matrix","multiplyScalar"],uU=W(s_,oU,t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e(s_,{"Matrix, Matrix":function(u,l){return r(i(u.toArray(),l.toArray()))},"Matrix, Array":function(u,l){return r(i(u.toArray(),l))},"Array, Matrix":function(u,l){return r(i(u,l.toArray()))},"Array, Array":i});function a(s,u){return s.flatMap(l=>u.map(o=>n(l,o)))}function i(s,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var o=at(s).length,c=at(u).length;for(l=Math.max(o,c);o++<l;)s=[s];for(;c++<l;)u=[u]}return l===1?a(s,u):s.flatMap(f=>u.map(d=>i(f,d,l-1)))}}),Yp="map",lU=["typed"],d4=W(Yp,lU,t=>{var{typed:e}=t;return e(Yp,{"Array, function":u,"Matrix, function":function(o,c){return o.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,o,c)=>r([l,o,...c.slice(0,c.length-1)],c[c.length-1])});function r(l,o){if(typeof o!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,f=l.map(y=>y.isMatrix?y.size():at(y)),d=Pm(...f),m=l.length,h=c?(y,x)=>y.get(x):Fm,v=l.map((y,x)=>{var w=f[x].map(()=>0);return y.isMatrix?y.get(w):Fm(y,w)}),T=e.isTypedFunction(o)?s(o,v,d.map(()=>0),l):i(o,m);if(T<2){var S=a(T,o,null);return n(l,S)}var C=c?l.map(y=>y.isMatrix?y.create(Ys(y.toArray(),d),y.datatype()):l[0].create(Ys(y.valueOf(),d))):l.map(y=>y.isMatrix?Ys(y.toArray(),d):Ys(y,d)),_=a(T,o,C),M=(y,x)=>_([y,...C.slice(1).map(w=>h(w,x))],x);return c?C[0].map(M):u(C[0],M)}function n(l,o){var c=l[0],f=l.map(y=>y.isMatrix?y.valueOf():y),d=l.map(y=>y.isMatrix?y.size():at(y)),m=Pm(...d),h=d.map(y=>m.length-y.length),v=m.length-1,T=o.length>1,S=T?[]:null,C=M(f,0);if(c.isMatrix){var _=c.create();return _._data=C,_._size=m,_}else return C;function M(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=m[x],g=Array(w);if(x<v)for(var N=function(F){S&&(S[x]=F),g[F]=M(y.map((O,P)=>h[P]>x?O:O.length===1?O[0]:O[F]),x+1)},E=0;E<w;E++)N(E);else for(var b=function(F){S&&(S[x]=F),g[F]=o(y.map(O=>O.length===1?O[0]:O[F]),S?S.slice():void 0)},D=0;D<w;D++)b(D);return g}}function a(l,o,c){switch(l){case 0:return f=>o(...f);case 1:return(f,d)=>o(...f,d);case 2:return(f,d)=>o(...f,d,...c)}}function i(l,o){var c=l.toString();if(/arguments/.test(c))return 2;var f=c.match(/\(.*?\)/);return/\.\.\./.test(f)||l.length>o+1?2:l.length===o+1?1:0}function s(l,o,c,f){return e.resolve(l,[...o,c,...f])!==null?2:e.resolve(l,[...o,c])!==null?1:(e.resolve(l,o)!==null,0)}function u(l,o){var c=fo(o,l,Yp);return Dg(l,c.fn,c.isUnary)}}),o_="diff",cU=["typed","matrix","subtract","number"],m4=W(o_,cU,t=>{var{typed:e,matrix:r,subtract:n,number:a}=t;return e(o_,{"Array | Matrix":function(c){return Ye(c)?r(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!We(f))throw new RangeError("Dimension must be a whole number");return Ye(c)?r(i(c.toArray(),f)):i(c,f)},"Array, BigNumber":e.referTo("Array,number",o=>(c,f)=>o(c,a(f))),"Matrix, BigNumber":e.referTo("Matrix,number",o=>(c,f)=>o(c,a(f)))});function i(o,c){if(Ye(o)&&(o=o.toArray()),!Array.isArray(o))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return o.forEach(d=>{f.push(i(d,c-1))}),f}else{if(c===0)return s(o);throw RangeError("Cannot have negative dimension")}}function s(o){for(var c=[],f=o.length,d=1;d<f;d++)c.push(u(o[d-1],o[d]));return c}function u(o,c){Ye(o)&&(o=o.toArray()),Ye(c)&&(c=c.toArray());var f=Array.isArray(o),d=Array.isArray(c);if(f&&d)return l(o,c);if(!f&&!d)return n(c,o);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(o,c){if(o.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=o.length,m=0;m<d;m++)f.push(u(o[m],c[m]));return f}}),fU="ones",dU=["typed","config","matrix","BigNumber"],mU=W(fU,dU,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e("ones",{"":function(){return r.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(o){var c=o[o.length-1];if(typeof c=="string"){var f=o.pop();return i(o,f)}else return r.matrix==="Array"?i(o):i(o,"default")},Array:i,Matrix:function(o){var c=o.storage();return i(o.valueOf(),c)},"Array | Matrix, string":function(o,c){return i(o.valueOf(),c)}});function i(l,o){var c=s(l),f=c?new a(1):1;if(u(l),o){var d=n(o);return l.length>0?d.resize(l,f):d}else{var m=[];return l.length>0?zu(m,l,f):m}}function s(l){var o=!1;return l.forEach(function(c,f,d){ut(c)&&(o=!0,d[f]=c.toNumber())}),o}function u(l){l.forEach(function(o){if(typeof o!="number"||!We(o)||o<0)throw new Error("Parameters in function ones must be positive integers")})}});function ky(){throw new Error('No "bignumber" implementation available')}function h4(){throw new Error('No "fraction" implementation available')}function hU(){throw new Error('No "matrix" implementation available')}var u_="range",pU=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],p4=W(u_,pU,t=>{var{typed:e,config:r,matrix:n,bignumber:a,smaller:i,smallerEq:s,larger:u,largerEq:l,add:o,isZero:c,isPositive:f}=t;return e(u_,{string:m,"string, boolean":m,number:function(S){throw new TypeError("Too few arguments to function range(): ".concat(S))},boolean:function(S){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(S,", number|bigint|BigNumber|Fraction"))},"number, number":function(S,C){return d(h(S,C,1,!1))},"number, number, number":function(S,C,_){return d(h(S,C,_,!1))},"number, number, boolean":function(S,C,_){return d(h(S,C,1,_))},"number, number, number, boolean":function(S,C,_,M){return d(h(S,C,_,M))},"bigint, bigint|number":function(S,C){return d(h(S,C,1n,!1))},"number, bigint":function(S,C){return d(h(BigInt(S),C,1n,!1))},"bigint, bigint|number, bigint|number":function(S,C,_){return d(h(S,C,BigInt(_),!1))},"number, bigint, bigint|number":function(S,C,_){return d(h(BigInt(S),C,BigInt(_),!1))},"bigint, bigint|number, boolean":function(S,C,_){return d(h(S,C,1n,_))},"number, bigint, boolean":function(S,C,_){return d(h(BigInt(S),C,1n,_))},"bigint, bigint|number, bigint|number, boolean":function(S,C,_,M){return d(h(S,C,BigInt(_),M))},"number, bigint, bigint|number, boolean":function(S,C,_,M){return d(h(BigInt(S),C,BigInt(_),M))},"BigNumber, BigNumber":function(S,C){var _=S.constructor;return d(h(S,C,new _(1),!1))},"BigNumber, BigNumber, BigNumber":function(S,C,_){return d(h(S,C,_,!1))},"BigNumber, BigNumber, boolean":function(S,C,_){var M=S.constructor;return d(h(S,C,new M(1),_))},"BigNumber, BigNumber, BigNumber, boolean":function(S,C,_,M){return d(h(S,C,_,M))},"Fraction, Fraction":function(S,C){return d(h(S,C,1,!1))},"Fraction, Fraction, Fraction":function(S,C,_){return d(h(S,C,_,!1))},"Fraction, Fraction, boolean":function(S,C,_){return d(h(S,C,1,_))},"Fraction, Fraction, Fraction, boolean":function(S,C,_,M){return d(h(S,C,_,M))},"Unit, Unit, Unit":function(S,C,_){return d(h(S,C,_,!1))},"Unit, Unit, Unit, boolean":function(S,C,_,M){return d(h(S,C,_,M))}});function d(T){return r.matrix==="Matrix"?n?n(T):hU():T}function m(T,S){var C=v(T);if(!C)throw new SyntaxError('String "'+T+'" is no valid range');return r.number==="BigNumber"?(a===void 0&&ky(),d(h(a(C.start),a(C.end),a(C.step)))):d(h(C.start,C.end,C.step,S))}function h(T,S,C,_){var M=[];if(c(C))throw new Error("Step must be non-zero");for(var y=f(C)?_?s:i:_?l:u,x=T;y(x,S);)M.push(x),x=o(x,C);return M}function v(T){var S=T.split(":"),C=S.map(function(M){return Number(M)}),_=C.some(function(M){return isNaN(M)});if(_)return null;switch(C.length){case 2:return{start:C[0],end:C[1],step:1};case 3:return{start:C[0],end:C[2],step:C[1]};default:return null}}}),l_="reshape",vU=["typed","isInteger","matrix"],gU=W(l_,vU,t=>{var{typed:e,isInteger:r}=t;return e(l_,{"Matrix, Array":function(a,i){return a.reshape(i,!0)},"Array, Array":function(a,i){return i.forEach(function(s){if(!r(s))throw new TypeError("Invalid size for dimension: "+s)}),Iy(a,i)}})}),yU="resize",xU=["config","matrix"],bU=W(yU,xU,t=>{var{config:e,matrix:r}=t;return function(i,s,u){if(arguments.length!==2&&arguments.length!==3)throw new Eo("resize",arguments.length,2,3);if(Ye(s)&&(s=s.valueOf()),ut(s[0])&&(s=s.map(function(c){return ut(c)?c.toNumber():c})),Ye(i))return i.resize(s,u,!0);if(typeof i=="string")return n(i,s,u);var l=Array.isArray(i)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(i);)i=i[0];return nt(i)}else{Array.isArray(i)||(i=[i]),i=nt(i);var o=zu(i,s,u);return l?r(o):o}};function n(a,i,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(i.length!==1)throw new mt(i.length,1);var u=i[0];if(typeof u!="number"||!We(u))throw new TypeError("Invalid size, must contain positive integers (size: "+pt(i)+")");if(a.length>u)return a.substring(0,u);if(a.length<u){for(var l=a,o=0,c=u-a.length;o<c;o++)l+=s;return l}else return a}}),c_="rotate",wU=["typed","multiply","rotationMatrix"],NU=W(c_,wU,t=>{var{typed:e,multiply:r,rotationMatrix:n}=t;return e(c_,{"Array , number | BigNumber | Complex | Unit":function(s,u){a(s,2);var l=r(n(u),s);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,u){return a(s,2),r(n(u),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,u,l){a(s,3);var o=r(n(u,l),s);return o},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,u,l){return a(s,3),r(n(u,l),s)}});function a(i,s){var u=Array.isArray(i)?at(i):i.size();if(u.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(u.length===2&&u[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(u[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),f_="rotationMatrix",_U=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],EU=W(f_,_U,t=>{var{typed:e,config:r,multiplyScalar:n,addScalar:a,unaryMinus:i,norm:s,BigNumber:u,matrix:l,DenseMatrix:o,SparseMatrix:c,cos:f,sin:d}=t;return e(f_,{"":function(){return r.matrix==="Matrix"?l([]):[]},string:function(_){return l(_)},"number | BigNumber | Complex | Unit":function(_){return m(_,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(_,M){return m(_,M)},"number | BigNumber | Complex | Unit, Array":function(_,M){var y=l(M);return h(y),S(_,y,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(_,M){h(M);var y=M.storage()||(r.matrix==="Matrix"?"dense":void 0);return S(_,M,y)},"number | BigNumber | Complex | Unit, Array, string":function(_,M,y){var x=l(M);return h(x),S(_,x,y)},"number | BigNumber | Complex | Unit, Matrix, string":function(_,M,y){return h(M),S(_,M,y)}});function m(C,_){var M=ut(C),y=M?new u(-1):-1,x=f(C),w=d(C),g=[[x,n(y,w)],[w,x]];return T(g,_)}function h(C){var _=C.size();if(_.length<1||_[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(C){return C.reduce((_,M)=>n(_,M))}function T(C,_){if(_){if(_==="sparse")return new c(C);if(_==="dense")return new o(C);throw new TypeError('Unknown matrix type "'.concat(_,'"'))}return C}function S(C,_,M){var y=s(_);if(y===0)throw new RangeError("Rotation around zero vector");var x=ut(C)?u:null,w=x?new x(1):1,g=x?new x(-1):-1,N=x?new x(_.get([0])/y):_.get([0])/y,E=x?new x(_.get([1])/y):_.get([1])/y,b=x?new x(_.get([2])/y):_.get([2])/y,D=f(C),I=a(w,i(D)),F=d(C),O=a(D,v([N,N,I])),P=a(v([N,E,I]),v([g,b,F])),z=a(v([N,b,I]),v([E,F])),$=a(v([N,E,I]),v([b,F])),L=a(D,v([E,E,I])),q=a(v([E,b,I]),v([g,N,F])),ae=a(v([N,b,I]),v([g,E,F])),j=a(v([E,b,I]),v([N,F])),K=a(D,v([b,b,I])),V=[[O,P,z],[$,L,q],[ae,j,K]];return T(V,M)}}),d_="row",SU=["typed","Index","matrix","range"],v4=W(d_,SU,t=>{var{typed:e,Index:r,matrix:n,range:a}=t;return e(d_,{"Matrix, number":i,"Array, number":function(u,l){return i(n(nt(u)),l).valueOf()}});function i(s,u){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yt(u,s.size()[0]);var l=a(0,s.size()[1]),o=new r([u],l),c=s.subset(o);return Ye(c)?c:n([[c]])}}),m_="size",AU=["typed"],DU=W(m_,AU,t=>{var{typed:e}=t;return e(m_,{Matrix:r=>r.size(),Array:at,string:r=>[r.length],"number | Complex | BigNumber | Unit | boolean | null":r=>[]})}),h_="squeeze",CU=["typed"],TU=W(h_,CU,t=>{var{typed:e}=t;return e(h_,{Array:function(n){return Mm(nt(n))},Matrix:function(n){var a=Mm(n.toArray());return Array.isArray(a)?n.create(a,n.datatype()):a},any:function(n){return nt(n)}})}),p_="subset",MU=["typed","matrix","zeros","add"],g4=W(p_,MU,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t;return e(p_,{"Matrix, Index":function(u,l){return Lu(l)?r():(Tm(u,l),u.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(u,l){var o=s(r(u),l);return l.isScalar()?o:o.valueOf()}}),"Object, Index":PU,"string, Index":IU,"Matrix, Index, any, any":function(u,l,o,c){return Lu(l)?u:(Tm(u,l),u.clone().subset(l,i(o,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(u,l,o,c){var f=s(r(u),l,o,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(u,l,o){return s(r(u),l,o,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(u,l,o){return s(u,l,o,void 0)}}),"string, Index, string":v_,"string, Index, string, string":v_,"Object, Index, any":FU});function i(s,u){if(typeof s=="string")throw new Error("can't boradcast a string");if(u.isScalar())return s;var l=u.size();if(l.every(o=>o>0))try{return a(s,n(l))}catch{return s}else return s}});function IU(t,e){if(!Th(e))throw new TypeError("Index expected");if(Lu(e))return"";if(Tm(Array.from(t),e),e.size().length!==1)throw new mt(e.size().length,1);var r=t.length;Yt(e.min()[0],r),Yt(e.max()[0],r);var n=e.dimension(0),a="";function i(s){a+=t.charAt(s)}return Number.isInteger(n)?i(n):n.forEach(i),a}function v_(t,e,r,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Lu(e))return t;if(Tm(Array.from(t),e),e.size().length!==1)throw new mt(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var a=e.dimension(0),i=Number.isInteger(a)?1:a.size()[0];if(i!==r.length)throw new mt(a.size()[0],r.length);var s=t.length;Yt(e.min()[0]),Yt(e.max()[0]);for(var u=[],l=0;l<s;l++)u[l]=t.charAt(l);function o(d,m){u[d]=r.charAt(m[0])}if(Number.isInteger(a)?o(a,[0]):a.forEach(o),u.length>s)for(var c=s-1,f=u.length;c<f;c++)u[c]||(u[c]=n);return u.join("")}function PU(t,e){if(!Lu(e)){if(e.size().length!==1)throw new mt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return En(t,r)}}function FU(t,e,r){if(Lu(e))return t;if(e.size().length!==1)throw new mt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var a=nt(t);return ku(a,n,r),a}var g_="transpose",RU=["typed","matrix"],OU=W(g_,RU,t=>{var{typed:e,matrix:r}=t;return e(g_,{Array:s=>n(r(s)).valueOf(),Matrix:n,any:nt});function n(s){var u=s.size(),l;switch(u.length){case 1:l=s.clone();break;case 2:{var o=u[0],c=u[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+pt(u)+")");switch(s.storage()){case"dense":l=a(s,o,c);break;case"sparse":l=i(s,o,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+pt(u)+")")}return l}function a(s,u,l){for(var o=s._data,c=[],f,d=0;d<l;d++){f=c[d]=[];for(var m=0;m<u;m++)f[m]=nt(o[m][d])}return s.createDenseMatrix({data:c,size:[l,u],datatype:s._datatype})}function i(s,u,l){for(var o=s._values,c=s._index,f=s._ptr,d=o?[]:void 0,m=[],h=[],v=[],T=0;T<u;T++)v[T]=0;var S,C,_;for(S=0,C=c.length;S<C;S++)v[c[S]]++;for(var M=0,y=0;y<u;y++)h.push(M),M+=v[y],v[y]=h[y];for(h.push(M),_=0;_<l;_++)for(var x=f[_],w=f[_+1],g=x;g<w;g++){var N=v[c[g]]++;m[N]=_,o&&(d[N]=nt(o[g]))}return s.createSparseMatrix({values:d,index:m,ptr:h,size:[l,u],datatype:s._datatype})}}),y_="ctranspose",BU=["typed","transpose","conj"],jU=W(y_,BU,t=>{var{typed:e,transpose:r,conj:n}=t;return e(y_,{any:function(i){return n(r(i))}})}),x_="zeros",kU=["typed","config","matrix","BigNumber"],$U=W(x_,kU,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e(x_,{"":function(){return r.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(o){var c=o[o.length-1];if(typeof c=="string"){var f=o.pop();return i(o,f)}else return r.matrix==="Array"?i(o):i(o,"default")},Array:i,Matrix:function(o){var c=o.storage();return i(o.valueOf(),c)},"Array | Matrix, string":function(o,c){return i(o.valueOf(),c)}});function i(l,o){var c=s(l),f=c?new a(0):0;if(u(l),o){var d=n(o);return l.length>0?d.resize(l,f):d}else{var m=[];return l.length>0?zu(m,l,f):m}}function s(l){var o=!1;return l.forEach(function(c,f,d){ut(c)&&(o=!0,d[f]=c.toNumber())}),o}function u(l){l.forEach(function(o){if(typeof o!="number"||!We(o)||o<0)throw new Error("Parameters in function zeros must be positive integers")})}}),b_="fft",LU=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],zU=W(b_,LU,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:a,divideScalar:i,exp:s,tau:u,i:l,dotDivide:o,conj:c,pow:f,ceil:d,log2:m}=t;return e(b_,{Array:h,Matrix:function(_){return _.create(h(_.valueOf()),_.datatype())}});function h(C){var _=at(C);return _.length===1?S(C,_[0]):v(C.map(M=>h(M,_.slice(1))),0)}function v(C,_){var M=at(C);if(_!==0)return new Array(M[0]).fill(0).map((x,w)=>v(C[w],_-1));if(M.length===1)return S(C);function y(x){var w=at(x);return new Array(w[1]).fill(0).map((g,N)=>new Array(w[0]).fill(0).map((E,b)=>x[b][N]))}return y(v(y(C),1))}function T(C){for(var _=C.length,M=s(i(a(-1,a(l,u)),_)),y=[],x=1-_;x<_;x++)y.push(f(M,i(f(x,2),2)));for(var w=f(2,d(m(_+_-1))),g=[...new Array(_).fill(0).map((P,z)=>a(C[z],y[_-1+z])),...new Array(w-_).fill(0)],N=[...new Array(_+_-1).fill(0).map((P,z)=>i(1,y[z])),...new Array(w-(_+_-1)).fill(0)],E=S(g),b=S(N),D=new Array(w).fill(0).map((P,z)=>a(E[z],b[z])),I=o(c(h(c(D))),w),F=[],O=_-1;O<_+_-1;O++)F.push(a(I[O],y[O]));return F}function S(C){var _=C.length;if(_===1)return[C[0]];if(_%2===0){for(var M=[...S(C.filter((g,N)=>N%2===0)),...S(C.filter((g,N)=>N%2===1))],y=0;y<_/2;y++){var x=M[y],w=a(M[y+_/2],s(a(a(u,l),i(-y,_))));M[y]=n(x,w),M[y+_/2]=n(x,a(-1,w))}return M}else return T(C)}}),w_="ifft",VU=["typed","fft","dotDivide","conj"],UU=W(w_,VU,t=>{var{typed:e,fft:r,dotDivide:n,conj:a}=t;return e(w_,{"Array | Matrix":function(s){var u=Ye(s)?s.size():at(s);return n(a(r(a(s))),u.reduce((l,o)=>l*o,1))}})});function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function qU(t,e){if(Vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HU(t){var e=qU(t,"string");return Vc(e)=="symbol"?e:e+""}function Mr(t,e,r){return(e=HU(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N_(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var WU="solveODE",QU=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],XU=W(WU,QU,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,max:s,map:u,abs:l,isPositive:o,isNegative:c,larger:f,smaller:d,matrix:m,bignumber:h,unaryMinus:v}=t;function T(g){return function(N,E,b,D){var I=!(E.length===2&&(E.every(x)||E.every(Gn)));if(I)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var F=E[0],O=E[1],P=f(O,F),z=D.firstStep;if(z!==void 0&&!o(z))throw new Error('"firstStep" must be positive');var $=D.maxStep;if($!==void 0&&!o($))throw new Error('"maxStep" must be positive');var L=D.minStep;if(L&&c(L))throw new Error('"minStep" must be positive or zero');var q=[F,O,z,L,$].filter(U=>U!==void 0);if(!(q.every(x)||q.every(Gn)))throw new Error('Inconsistent type of "t" dependant variables');for(var ae=1,j=D.tol?D.tol:1e-4,K=D.minDelta?D.minDelta:.2,V=D.maxDelta?D.maxDelta:5,pe=D.maxIter?D.maxIter:1e4,ue=[F,O,...b,$,L].some(ut),[fe,H,J,ee]=ue?[h(g.a),h(g.c),h(g.b),h(g.bp)]:[g.a,g.c,g.b,g.bp],ie=z?P?z:v(z):i(n(O,F),ae),oe=[F],ve=[b],me=n(J,ee),Te=0,ke=0,ze=M(P),Oe=y(P);ze(oe[Te],O);){var $e=[];ie=Oe(oe[Te],O,ie),$e.push(N(oe[Te],ve[Te]));for(var Q=1;Q<H.length;++Q)$e.push(N(r(oe[Te],a(H[Q],ie)),r(ve[Te],a(ie,fe[Q],$e))));var te=s(l(u(a(me,$e),U=>Gn(U)?U.value:U)));te<j&&j/te>1/4&&(oe.push(r(oe[Te],ie)),ve.push(r(ve[Te],a(ie,J,$e))),Te++);var ce=.84*(j/te)**(1/5);if(d(ce,K)?ce=K:f(ce,V)&&(ce=V),ce=ue?h(ce):ce,ie=a(ie,ce),$&&f(l(ie),$)?ie=P?$:v($):L&&d(l(ie),L)&&(ie=P?L:v(L)),ke++,ke>pe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:oe,y:ve}}}function S(g,N,E,b){var D=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],I=[null,1/2,3/4,1],F=[2/9,1/3,4/9,0],O=[7/24,1/4,1/3,1/8],P={a:D,c:I,b:F,bp:O};return T(P)(g,N,E,b)}function C(g,N,E,b){var D=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],I=[null,1/5,3/10,4/5,8/9,1,1],F=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],O=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],P={a:D,c:I,b:F,bp:O};return T(P)(g,N,E,b)}function _(g,N,E,b){var D=b.method?b.method:"RK45",I={RK23:S,RK45:C};if(D.toUpperCase()in I){var F=GU({},b);return delete F.method,I[D.toUpperCase()](g,N,E,F)}else{var O=Object.keys(I).map(z=>'"'.concat(z,'"')),P="".concat(O.slice(0,-1).join(", ")," and ").concat(O.slice(-1));throw new Error('Unavailable method "'.concat(D,'". Available methods are ').concat(P))}}function M(g){return g?d:f}function y(g){var N=g?f:d;return function(E,b,D){var I=r(E,D);return N(I,b)?n(b,E):D}}function x(g){return ut(g)||Xe(g)}function w(g,N,E,b){var D=_(g,N.toArray(),E.toArray(),b);return{t:m(D.t),y:m(D.y)}}return e("solveODE",{"function, Array, Array, Object":_,"function, Matrix, Matrix, Object":w,"function, Array, Array":(g,N,E)=>_(g,N,E,{}),"function, Matrix, Matrix":(g,N,E)=>w(g,N,E,{}),"function, Array, number | BigNumber | Unit":(g,N,E)=>{var b=_(g,N,[E],{});return{t:b.t,y:b.y.map(D=>D[0])}},"function, Matrix, number | BigNumber | Unit":(g,N,E)=>{var b=_(g,N.toArray(),[E],{});return{t:m(b.t),y:m(b.y.map(D=>D[0]))}},"function, Array, number | BigNumber | Unit, Object":(g,N,E,b)=>{var D=_(g,N,[E],b);return{t:D.t,y:D.y.map(I=>I[0])}},"function, Matrix, number | BigNumber | Unit, Object":(g,N,E,b)=>{var D=_(g,N.toArray(),[E],b);return{t:m(D.t),y:m(D.y.map(I=>I[0]))}}})}),KU="erf",JU=["typed"],YU=W(KU,JU,t=>{var{typed:e}=t;return e("name",{number:function(s){var u=Math.abs(s);return u>=tq?Wi(s):u<=ZU?Wi(s)*r(u):u<=4?Wi(s)*(1-n(u)):Wi(s)*(1-a(u))},"Array | Matrix":e.referToSelf(i=>s=>lt(s,i))});function r(i){var s=i*i,u=si[0][4]*s,l=s,o;for(o=0;o<3;o+=1)u=(u+si[0][o])*s,l=(l+Uo[0][o])*s;return i*(u+si[0][3])/(l+Uo[0][3])}function n(i){var s=si[1][8]*i,u=i,l;for(l=0;l<7;l+=1)s=(s+si[1][l])*i,u=(u+Uo[1][l])*i;var o=(s+si[1][7])/(u+Uo[1][7]),c=parseInt(i*16)/16,f=(i-c)*(i+c);return Math.exp(-c*c)*Math.exp(-f)*o}function a(i){var s=1/(i*i),u=si[2][5]*s,l=s,o;for(o=0;o<4;o+=1)u=(u+si[2][o])*s,l=(l+Uo[2][o])*s;var c=s*(u+si[2][4])/(l+Uo[2][4]);c=(eq-c)/i,s=parseInt(i*16)/16;var f=(i-s)*(i+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),ZU=.46875,eq=.5641895835477563,si=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Uo=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],tq=Math.pow(2,53),__="zeta",rq=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],nq=W(__,rq,t=>{var{typed:e,config:r,multiply:n,pow:a,divide:i,factorial:s,equal:u,smallerEq:l,isNegative:o,gamma:c,sin:f,subtract:d,add:m,Complex:h,BigNumber:v,pi:T}=t;return e(__,{number:x=>S(x,w=>w,()=>20),BigNumber:x=>S(x,w=>new v(w),()=>Math.abs(Math.log10(r.relTol))),Complex:C});function S(x,w,g){return u(x,0)?w(-.5):u(x,1)?w(NaN):isFinite(x)?_(x,w,g,N=>N):o(x)?w(NaN):w(1)}function C(x){return x.re===0&&x.im===0?new h(-.5):x.re===1?new h(NaN,NaN):x.re===1/0&&x.im===0?new h(1):x.im===1/0||x.re===-1/0?new h(NaN,NaN):_(x,w=>w,w=>Math.round(1.3*15+.9*Math.abs(w.im)),w=>w.re)}function _(x,w,g,N){var E=g(x);if(N(x)>-(E-1)/2)return y(x,w(E),w);var b=n(a(2,x),a(w(T),d(x,1)));return b=n(b,f(n(i(w(T),2),x))),b=n(b,c(d(1,x))),n(b,_(d(1,x),w,g,N))}function M(x,w){for(var g=x,N=x;l(N,w);N=m(N,1)){var E=i(n(s(m(w,d(N,1))),a(4,N)),n(s(d(w,N)),s(n(2,N))));g=m(g,E)}return n(w,g)}function y(x,w,g){for(var N=i(1,n(M(g(0),w),d(1,a(2,d(1,x))))),E=g(0),b=g(1);l(b,w);b=m(b,1))E=m(E,i(n((-1)**(b-1),M(b,w)),a(b,x)));return n(N,E)}}),E_="mode",aq=["typed","isNaN","isNumeric"],iq=W(E_,aq,t=>{var{typed:e,isNaN:r,isNumeric:n}=t;return e(E_,{"Array | Matrix":a,"...":function(s){return a(s)}});function a(i){i=Ct(i.valueOf());var s=i.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var u={},l=[],o=0,c=0;c<i.length;c++){var f=i[c];if(n(f)&&r(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in u||(u[f]=0),u[f]++,u[f]===o?l.push(f):u[f]>o&&(o=u[f],l=[f])}return l}});function Dn(t,e,r){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Xt(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+Xt(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var S_="prod",sq=["typed","config","multiplyScalar","numeric"],oq=W(S_,sq,t=>{var{typed:e,config:r,multiplyScalar:n,numeric:a}=t;return e(S_,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(u,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(u){return i(u)}});function i(s){var u;if(Ns(s,function(l){try{u=u===void 0?l:n(u,l)}catch(o){throw Dn(o,"prod",l)}}),typeof u=="string"&&(u=a(u,As(u,r))),u===void 0)throw new Error("Cannot calculate prod of an empty array");return u}}),A_="format",uq=["typed"],lq=W(A_,uq,t=>{var{typed:e}=t;return e(A_,{any:pt,"any, Object | function | number | BigNumber":pt})}),D_="bin",cq=["typed","format"],fq=W(D_,cq,t=>{var{typed:e,format:r}=t;return e(D_,{"number | BigNumber":function(a){return r(a,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"bin",wordSize:i})}})}),C_="oct",dq=["typed","format"],mq=W(C_,dq,t=>{var{typed:e,format:r}=t;return e(C_,{"number | BigNumber":function(a){return r(a,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"oct",wordSize:i})}})}),T_="hex",hq=["typed","format"],pq=W(T_,hq,t=>{var{typed:e,format:r}=t;return e(T_,{"number | BigNumber":function(a){return r(a,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"hex",wordSize:i})}})}),y4=/\$([\w.]+)/g,M_="print",vq=["typed"],x4=W(M_,vq,t=>{var{typed:e}=t;return e(M_,{"string, Object | Array":I_,"string, Object | Array, number | Object":I_})});function I_(t,e,r){return t.replace(y4,function(n,a){var i=a.split("."),s=e[i.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());i.length&&s!==void 0;){var u=i.shift();s=u?s[u]:s+"."}return s!==void 0?yr(s)?s:pt(s,r):n})}var P_="to",gq=["typed","matrix","concat"],yq=W(P_,gq,t=>{var{typed:e,matrix:r,concat:n}=t,a=Zt({typed:e,matrix:r,concat:n});return e(P_,{"Unit, Unit | string":(i,s)=>i.to(s)},a({Ds:!0}))}),F_="toBest",xq=["typed"],bq=W(F_,xq,t=>{var{typed:e}=t;return e(F_,{Unit:r=>r.toBest(),"Unit, string":(r,n)=>r.toBest(n.split(",")),"Unit, string, Object":(r,n,a)=>r.toBest(n.split(","),a),"Unit, Array":(r,n)=>r.toBest(n),"Unit, Array, Object":(r,n,a)=>r.toBest(n,a)})}),R_="isPrime",wq=["typed"],Nq=W(R_,wq,t=>{var{typed:e}=t;return e(R_,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var a=5;a*a<=n;a+=6)if(n%a===0||n%(a+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var a=5n;a*a<=n;a+=6n)if(n%a===0n||n%(a+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var a=n.toNumber(),i=5;i*i<=a;i+=6)if(a%i===0||a%(i+2)===0)return!1;return!0}function s(C,_,M){for(var y=1;!_.eq(0);)_.mod(2).eq(0)?(_=_.div(2),C=C.mul(C).mod(M)):(_=_.sub(1),y=C.mul(y).mod(M));return y}var u=n.constructor.clone({precision:n.toFixed(0).length*2});n=new u(n);for(var l=0,o=n.sub(1);o.mod(2).eq(0);)o=o.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(C=>C<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var m=0;m<c.length;m+=1){var h=c[m],v=s(n.sub(n).add(h),o,n);if(!v.eq(1)){for(var T=0,S=v;!S.eq(n.sub(1));T+=1,S=S.mul(S).mod(n))if(T===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(r=>n=>lt(n,r))})}),_q="numeric",Eq=["number","?bignumber","?fraction"],Sq=W(_q,Eq,t=>{var{number:e,bignumber:r,fraction:n}=t,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},i={number:s=>e(s),BigNumber:r?s=>r(s):ky,bigint:s=>BigInt(s),Fraction:n?s=>n(s):h4};return function(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",o=arguments.length>2?arguments[2]:void 0;if(o!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Xt(u);if(!(c in a))throw new TypeError("Cannot convert "+u+' of type "'+c+'"; valid input types are '+Object.keys(a).join(", "));if(!(l in i))throw new TypeError("Cannot convert "+u+' to type "'+l+'"; valid output types are '+Object.keys(i).join(", "));return l===c?u:i[l](u)}}),O_="divideScalar",Aq=["typed","numeric"],Dq=W(O_,Aq,t=>{var{typed:e,numeric:r}=t;return e(O_,{"number, number":function(a,i){return a/i},"Complex, Complex":function(a,i){return a.div(i)},"BigNumber, BigNumber":function(a,i){return a.div(i)},"bigint, bigint":function(a,i){return a/i},"Fraction, Fraction":function(a,i){return a.div(i)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,a)=>n.divide(a),"number | Fraction | Complex | BigNumber, Unit":(n,a)=>a.divideInto(n)})}),B_="pow",Cq=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Tq=W(B_,Cq,t=>{var{typed:e,config:r,identity:n,multiply:a,matrix:i,inv:s,number:u,fraction:l,Complex:o}=t;return e(B_,{"number, number":c,"Complex, Complex":function(h,v){return h.pow(v)},"BigNumber, BigNumber":function(h,v){return v.isInteger()||h>=0||r.predictable?h.pow(v):new o(h.toNumber(),0).pow(v.toNumber(),0)},"bigint, bigint":(m,h)=>m**h,"Fraction, Fraction":function(h,v){var T=h.pow(v);if(T!=null)return T;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(h.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(h,v){return f(h,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(h,v){return d(h,v.toNumber())},"Unit, number | BigNumber":function(h,v){return h.pow(v)}});function c(m,h){if(r.predictable&&!We(h)&&m<0)try{var v=l(h),T=u(v);if((h===T||Math.abs((h-T)/h)<1e-14)&&v.d%2n===1n)return(v.n%2n===0n?1:-1)*Math.pow(-m,h)}catch{}return r.predictable&&(m<-1&&h===1/0||m>-1&&m<0&&h===-1/0)?NaN:We(h)||m>=0||r.predictable?_M(m,h):m*m<1&&h===1/0||m*m>1&&h===-1/0?0:new o(m,0).pow(h,0)}function f(m,h){if(!We(h))throw new TypeError("For A^b, b must be an integer (value is "+h+")");var v=at(m);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(h<0)try{return f(s(m),-h)}catch(C){throw C.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+h+")"):C}for(var T=n(v[0]).valueOf(),S=m;h>=1;)(h&1)===1&&(T=a(S,T)),h>>=1,S=a(S,S);return T}function d(m,h){return i(f(m.valueOf(),h))}}),qo="Number of decimals in function round must be an integer",j_="round",Mq=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Iq=W(j_,Mq,t=>{var{typed:e,config:r,matrix:n,equalScalar:a,zeros:i,BigNumber:s,DenseMatrix:u}=t,l=on({typed:e,equalScalar:a}),o=jr({typed:e,DenseMatrix:u}),c=va({typed:e});function f(d){return Math.abs(nf(d).exponent)}return e(j_,{number:function(m){var h=Bl(m,f(r.relTol)),v=Kr(m,h,r.relTol,r.absTol)?h:m;return Bl(v)},"number, number":function(m,h){var v=f(r.relTol);if(h>=v)return Bl(m,h);var T=Bl(m,v),S=Kr(m,T,r.relTol,r.absTol)?T:m;return Bl(S,h)},"number, BigNumber":function(m,h){if(!h.isInteger())throw new TypeError(qo);return new s(m).toDecimalPlaces(h.toNumber())},Complex:function(m){return m.round()},"Complex, number":function(m,h){if(h%1)throw new TypeError(qo);return m.round(h)},"Complex, BigNumber":function(m,h){if(!h.isInteger())throw new TypeError(qo);var v=h.toNumber();return m.round(v)},BigNumber:function(m){var h=new s(m).toDecimalPlaces(f(r.relTol)),v=pa(m,h,r.relTol,r.absTol)?h:m;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(m,h){if(!h.isInteger())throw new TypeError(qo);var v=f(r.relTol);if(h>=v)return m.toDecimalPlaces(h.toNumber());var T=m.toDecimalPlaces(v),S=pa(m,T,r.relTol,r.absTol)?T:m;return S.toDecimalPlaces(h.toNumber())},bigint:d=>d,"bigint, number":(d,m)=>d,"bigint, BigNumber":(d,m)=>d,Fraction:function(m){return m.round()},"Fraction, number":function(m,h){if(h%1)throw new TypeError(qo);return m.round(h)},"Fraction, BigNumber":function(m,h){if(!h.isInteger())throw new TypeError(qo);return m.round(h.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(m,h,v){var T=m.toNumeric(v);return v.multiply(d(T,h))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(m,h,v)=>d(m,h.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(m,h,v)=>lt(m,T=>d(T,h,v),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(m,h)=>d(m,0,h)),"Array | Matrix":e.referToSelf(d=>m=>lt(m,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(m,h)=>l(m,h,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(m,h)=>c(m,h,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(m,h)=>c(n(m),h,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(m,h)=>a(m,0)?i(h.size(),h.storage()):o(h,m,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(m,h)=>a(m,0)?i(h.size(),h.storage()):c(h,m,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(m,h)=>c(n(h),m,d,!0).valueOf())})}),k_="log",Pq=["config","typed","typeOf","divideScalar","Complex"],Fq=Math.log(16),Rq=W(k_,Pq,t=>{var{typed:e,typeOf:r,config:n,divideScalar:a,Complex:i}=t;function s(l){return l.log()}function u(l){return s(new i(l,0))}return e(k_,{number:function(o){return o>=0||n.predictable?YN(o):u(o)},bigint:By(Fq,YN,n,u),Complex:s,BigNumber:function(o){return!o.isNegative()||n.predictable?o.ln():u(o.toNumber())},"any, any":e.referToSelf(l=>(o,c)=>{if(r(o)==="Fraction"&&r(c)==="Fraction"){var f=o.log(c);if(f!==null)return f}return a(l(o),l(c))})})}),$_="log1p",Oq=["typed","config","divideScalar","log","Complex"],Bq=W($_,Oq,t=>{var{typed:e,config:r,divideScalar:n,log:a,Complex:i}=t;return e($_,{number:function(l){return l>=-1||r.predictable?Tk(l):s(new i(l,0))},Complex:s,BigNumber:function(l){var o=l.plus(1);return!o.isNegative()||r.predictable?o.ln():s(new i(l.toNumber(),0))},"Array | Matrix":e.referToSelf(u=>l=>lt(l,u)),"any, any":e.referToSelf(u=>(l,o)=>n(u(l),a(o)))});function s(u){var l=u.re+1;return new i(Math.log(Math.sqrt(l*l+u.im*u.im)),Math.atan2(u.im,l))}}),L_="nthRoots",jq=["config","typed","divideScalar","Complex"],kq=W(L_,jq,t=>{var{typed:e,config:r,divideScalar:n,Complex:a}=t,i=[function(l){return new a(l,0)},function(l){return new a(0,l)},function(l){return new a(-l,0)},function(l){return new a(0,-l)}];function s(u,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(u===0||u.abs()===0)return[new a(0,0)];var o=typeof u=="number",c;(o||u.re===0||u.im===0)&&(o?c=2*+(u<0):u.im===0?c=2*+(u.re<0):c=2*+(u.im<0)+1);for(var f=u.arg(),d=u.abs(),m=[],h=Math.pow(d,1/l),v=0;v<l;v++){var T=(c+4*v)/l;if(T===Math.round(T)){m.push(i[T%4](h));continue}m.push(new a({r:h,phi:(f+2*Math.PI*v)/l}))}return m}return e(L_,{Complex:function(l){return s(l,2)},"Complex, number":s})}),z_="dotPow",$q=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],Lq=W(z_,$q,t=>{var{typed:e,equalScalar:r,matrix:n,pow:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=bn({typed:e}),o=ti({typed:e,SparseMatrix:u}),c=on({typed:e,equalScalar:r}),f=jr({typed:e,DenseMatrix:i}),d=Zt({typed:e,matrix:n,concat:s}),m={};for(var h in a.signatures)Object.prototype.hasOwnProperty.call(a.signatures,h)&&!h.includes("Matrix")&&!h.includes("Array")&&(m[h]=a.signatures[h]);var v=e(m);return e(z_,d({elop:v,SS:o,DS:l,Ss:c,sS:f}))}),V_="dotDivide",zq=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],Vq=W(V_,zq,t=>{var{typed:e,matrix:r,equalScalar:n,divideScalar:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=Fa({typed:e,equalScalar:n}),o=bn({typed:e}),c=ti({typed:e,SparseMatrix:u}),f=on({typed:e,equalScalar:n}),d=jr({typed:e,DenseMatrix:i}),m=Zt({typed:e,matrix:r,concat:s});return e(V_,m({elop:a,SS:c,DS:o,SD:l,Ss:f,sS:d}))});function af(t){var{DenseMatrix:e}=t;return function(n,a,i){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+pt(s)+")");var u=s[0],l=s[1];if(u!==l)throw new RangeError("Matrix must be square (size: "+pt(s)+")");var o=[];if(Ye(a)){var c=a.size(),f=a._data;if(c.length===1){if(c[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<u;d++)o[d]=[f[d]];return new e({data:o,size:[u,1],datatype:a._datatype})}if(c.length===2){if(c[0]!==u||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Em(a)){if(i){o=[];for(var m=0;m<u;m++)o[m]=[f[m][0]];return new e({data:o,size:[u,1],datatype:a._datatype})}return a}if(Js(a)){for(var h=0;h<u;h++)o[h]=[0];for(var v=a._values,T=a._index,S=a._ptr,C=S[1],_=S[0];_<C;_++){var M=T[_];o[M][0]=v[_]}return new e({data:o,size:[u,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Wt(a)){var y=at(a);if(y.length===1){if(y[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<u;x++)o[x]=[a[x]];return new e({data:o,size:[u,1]})}if(y.length===2){if(y[0]!==u||y[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var w=0;w<u;w++)o[w]=[a[w][0]];return new e({data:o,size:[u,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var U_="lsolve",Uq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],qq=W(U_,Uq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=af({DenseMatrix:u});return e(U_,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var h=r(d),v=o(h,m);return v.valueOf()}});function o(f,d){d=l(f,d,!0);for(var m=d._data,h=f._size[0],v=f._size[1],T=[],S=f._data,C=0;C<v;C++){var _=m[C][0]||0,M=void 0;if(s(_,0))M=0;else{var y=S[C][C];if(s(y,0))throw new Error("Linear system cannot be solved since matrix is singular");M=n(_,y);for(var x=C+1;x<h;x++)m[x]=[i(m[x][0]||0,a(M,S[x][C]))]}T[C]=[M]}return new u({data:T,size:[h,1]})}function c(f,d){d=l(f,d,!0);for(var m=d._data,h=f._size[0],v=f._size[1],T=f._values,S=f._index,C=f._ptr,_=[],M=0;M<v;M++){var y=m[M][0]||0;if(s(y,0))_[M]=[0];else{for(var x=0,w=[],g=[],N=C[M],E=C[M+1],b=N;b<E;b++){var D=S[b];D===M?x=T[b]:D>M&&(w.push(T[b]),g.push(D))}if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(y,x),F=0,O=g.length;F<O;F++){var P=g[F];m[P]=[i(m[P][0]||0,a(I,w[F]))]}_[M]=[I]}}return new u({data:_,size:[h,1]})}}),q_="usolve",Hq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Gq=W(q_,Hq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=af({DenseMatrix:u});return e(q_,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var h=r(d),v=o(h,m);return v.valueOf()}});function o(f,d){d=l(f,d,!0);for(var m=d._data,h=f._size[0],v=f._size[1],T=[],S=f._data,C=v-1;C>=0;C--){var _=m[C][0]||0,M=void 0;if(s(_,0))M=0;else{var y=S[C][C];if(s(y,0))throw new Error("Linear system cannot be solved since matrix is singular");M=n(_,y);for(var x=C-1;x>=0;x--)m[x]=[i(m[x][0]||0,a(M,S[x][C]))]}T[C]=[M]}return new u({data:T,size:[h,1]})}function c(f,d){d=l(f,d,!0);for(var m=d._data,h=f._size[0],v=f._size[1],T=f._values,S=f._index,C=f._ptr,_=[],M=v-1;M>=0;M--){var y=m[M][0]||0;if(s(y,0))_[M]=[0];else{for(var x=0,w=[],g=[],N=C[M],E=C[M+1],b=E-1;b>=N;b--){var D=S[b];D===M?x=T[b]:D<M&&(w.push(T[b]),g.push(D))}if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(y,x),F=0,O=g.length;F<O;F++){var P=g[F];m[P]=[i(m[P][0],a(I,w[F]))]}_[M]=[I]}}return new u({data:_,size:[h,1]})}}),H_="lsolveAll",Wq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Qq=W(H_,Wq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=af({DenseMatrix:u});return e(H_,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var h=r(d),v=o(h,m);return v.map(T=>T.valueOf())}});function o(f,d){for(var m=[l(f,d,!0)._data.map(g=>g[0])],h=f._data,v=f._size[0],T=f._size[1],S=0;S<T;S++)for(var C=m.length,_=0;_<C;_++){var M=m[_];if(s(h[S][S],0))if(s(M[S],0)){if(_===0){var x=[...M];x[S]=1;for(var w=S+1;w<T;w++)x[w]=i(x[w],h[w][S]);m.push(x)}}else{if(_===0)return[];m.splice(_,1),_-=1,C-=1}else{M[S]=n(M[S],h[S][S]);for(var y=S+1;y<T;y++)M[y]=i(M[y],a(M[S],h[y][S]))}}return m.map(g=>new u({data:g.map(N=>[N]),size:[v,1]}))}function c(f,d){for(var m=[l(f,d,!0)._data.map(ae=>ae[0])],h=f._size[0],v=f._size[1],T=f._values,S=f._index,C=f._ptr,_=0;_<v;_++)for(var M=m.length,y=0;y<M;y++){for(var x=m[y],w=[],g=[],N=C[_],E=C[_+1],b=0,D=N;D<E;D++){var I=S[D];I===_?b=T[D]:I>_&&(w.push(T[D]),g.push(I))}if(s(b,0))if(s(x[_],0)){if(y===0){var z=[...x];z[_]=1;for(var $=0,L=g.length;$<L;$++){var q=g[$];z[q]=i(z[q],w[$])}m.push(z)}}else{if(y===0)return[];m.splice(y,1),y-=1,M-=1}else{x[_]=n(x[_],b);for(var F=0,O=g.length;F<O;F++){var P=g[F];x[P]=i(x[P],a(x[_],w[F]))}}}return m.map(ae=>new u({data:ae.map(j=>[j]),size:[h,1]}))}}),G_="usolveAll",Xq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Kq=W(G_,Xq,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:u}=t,l=af({DenseMatrix:u});return e(G_,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var h=r(d),v=o(h,m);return v.map(T=>T.valueOf())}});function o(f,d){for(var m=[l(f,d,!0)._data.map(g=>g[0])],h=f._data,v=f._size[0],T=f._size[1],S=T-1;S>=0;S--)for(var C=m.length,_=0;_<C;_++){var M=m[_];if(s(h[S][S],0))if(s(M[S],0)){if(_===0){var x=[...M];x[S]=1;for(var w=S-1;w>=0;w--)x[w]=i(x[w],h[w][S]);m.push(x)}}else{if(_===0)return[];m.splice(_,1),_-=1,C-=1}else{M[S]=n(M[S],h[S][S]);for(var y=S-1;y>=0;y--)M[y]=i(M[y],a(M[S],h[y][S]))}}return m.map(g=>new u({data:g.map(N=>[N]),size:[v,1]}))}function c(f,d){for(var m=[l(f,d,!0)._data.map(ae=>ae[0])],h=f._size[0],v=f._size[1],T=f._values,S=f._index,C=f._ptr,_=v-1;_>=0;_--)for(var M=m.length,y=0;y<M;y++){for(var x=m[y],w=[],g=[],N=C[_],E=C[_+1],b=0,D=E-1;D>=N;D--){var I=S[D];I===_?b=T[D]:I<_&&(w.push(T[D]),g.push(I))}if(s(b,0))if(s(x[_],0)){if(y===0){var z=[...x];z[_]=1;for(var $=0,L=g.length;$<L;$++){var q=g[$];z[q]=i(z[q],w[$])}m.push(z)}}else{if(y===0)return[];m.splice(y,1),y-=1,M-=1}else{x[_]=n(x[_],b);for(var F=0,O=g.length;F<O;F++){var P=g[F];x[P]=i(x[P],a(x[_],w[F]))}}}return m.map(ae=>new u({data:ae.map(j=>[j]),size:[h,1]}))}}),Jq="matAlgo08xS0Sid",Yq=["typed","equalScalar"],$y=W(Jq,Yq,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var u=a._values,l=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,h=i._ptr,v=i._size,T=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new mt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!u||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var S=c[0],C=c[1],_,M=r,y=0,x=s;typeof f=="string"&&f===T&&f!=="mixed"&&(_=f,M=e.find(r,[_,_]),y=e.convert(0,_),x=e.find(s,[_,_]));for(var w=[],g=[],N=[],E=[],b=[],D,I,F,O,P=0;P<C;P++){N[P]=g.length;var z=P+1;for(I=o[P],F=o[P+1],D=I;D<F;D++)O=l[D],b[O]=z,E[O]=u[D],g.push(O);for(I=h[P],F=h[P+1],D=I;D<F;D++)O=m[D],b[O]===z&&(E[O]=x(E[O],d[D]));for(D=N[P];D<g.length;){O=g[D];var $=E[O];M($,y)?g.splice(D,1):(w.push($),D++)}}return N[C]=g.length,a.createSparseMatrix({values:w,index:g,ptr:N,size:[S,C],datatype:f===a._datatype&&T===i._datatype?_:void 0})}}),Ly=W("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return{"Array, number":e.referTo("DenseMatrix, number",n=>(a,i)=>n(r(a),i).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(a,i)=>n(r(a),i).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(a,i)=>n(a,r(i)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(a,i)=>n(a,r(i)).valueOf())}}),W_="leftShift",Zq=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],eH=W(W_,Zq,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,u=Cs({typed:e}),l=Fa({typed:e,equalScalar:n}),o=$y({typed:e,equalScalar:n}),c=_o({typed:e,DenseMatrix:i}),f=on({typed:e,equalScalar:n}),d=va({typed:e}),m=Zt({typed:e,matrix:r,concat:s}),h=Ly({typed:e,matrix:r});return e(W_,{"number, number":CM,"BigNumber, BigNumber":xV,"bigint, bigint":(v,T)=>v<<T,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(T,S)=>n(S,0)?T.clone():f(T,S,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(T,S)=>n(S,0)?T.clone():d(T,S,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(T,S)=>n(T,0)?a(S.size(),S.storage()):c(S,T,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(T,S)=>n(T,0)?a(S.size(),S.storage()):d(S,T,v,!0))},h,m({SS:o,DS:u,SD:l}))}),Q_="rightArithShift",tH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],rH=W(Q_,tH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,u=Cs({typed:e}),l=Fa({typed:e,equalScalar:n}),o=$y({typed:e,equalScalar:n}),c=_o({typed:e,DenseMatrix:i}),f=on({typed:e,equalScalar:n}),d=va({typed:e}),m=Zt({typed:e,matrix:r,concat:s}),h=Ly({typed:e,matrix:r});return e(Q_,{"number, number":TM,"BigNumber, BigNumber":bV,"bigint, bigint":(v,T)=>v>>T,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(T,S)=>n(S,0)?T.clone():f(T,S,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(T,S)=>n(S,0)?T.clone():d(T,S,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(T,S)=>n(T,0)?a(S.size(),S.storage()):c(S,T,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(T,S)=>n(T,0)?a(S.size(),S.storage()):d(S,T,v,!0))},h,m({SS:o,DS:u,SD:l}))}),X_="rightLogShift",nH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],aH=W(X_,nH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,u=Cs({typed:e}),l=Fa({typed:e,equalScalar:n}),o=$y({typed:e,equalScalar:n}),c=_o({typed:e,DenseMatrix:i}),f=on({typed:e,equalScalar:n}),d=va({typed:e}),m=Zt({typed:e,matrix:r,concat:s}),h=Ly({typed:e,matrix:r});return e(X_,{"number, number":MM,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(T,S)=>n(S,0)?T.clone():f(T,S,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(T,S)=>n(S,0)?T.clone():d(T,S,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(T,S)=>n(T,0)?a(S.size(),S.storage()):c(S,T,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(T,S)=>n(T,0)?a(S.size(),S.storage()):d(S,T,v,!0))},h,m({SS:o,DS:u,SD:l}))}),K_="and",iH=["typed","matrix","equalScalar","zeros","not","concat"],b4=W(K_,iH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,u=Fa({typed:e,equalScalar:n}),l=$h({typed:e,equalScalar:n}),o=on({typed:e,equalScalar:n}),c=va({typed:e}),f=Zt({typed:e,matrix:r,concat:s});return e(K_,{"number, number":Pg,"Complex, Complex":function(m,h){return(m.re!==0||m.im!==0)&&(h.re!==0||h.im!==0)},"BigNumber, BigNumber":function(m,h){return!m.isZero()&&!h.isZero()&&!m.isNaN()&&!h.isNaN()},"bigint, bigint":Pg,"Unit, Unit":e.referToSelf(d=>(m,h)=>d(m.value||0,h.value||0)),"SparseMatrix, any":e.referToSelf(d=>(m,h)=>i(h)?a(m.size(),m.storage()):o(m,h,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(m,h)=>i(h)?a(m.size(),m.storage()):c(m,h,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(m,h)=>i(m)?a(m.size(),m.storage()):o(h,m,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(m,h)=>i(m)?a(m.size(),m.storage()):c(h,m,d,!0)),"Array, any":e.referToSelf(d=>(m,h)=>d(r(m),h).valueOf()),"any, Array":e.referToSelf(d=>(m,h)=>d(m,r(h)).valueOf())},f({SS:l,DS:u}))}),Lm="compare",sH=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],oH=W(Lm,sH,t=>{var{typed:e,config:r,equalScalar:n,matrix:a,BigNumber:i,Fraction:s,DenseMatrix:u,concat:l}=t,o=bn({typed:e}),c=kh({typed:e,equalScalar:n}),f=jr({typed:e,DenseMatrix:u}),d=Zt({typed:e,matrix:a,concat:l}),m=sl({typed:e});return e(Lm,uH({typed:e,config:r}),{"boolean, boolean":function(v,T){return v===T?0:v>T?1:-1},"BigNumber, BigNumber":function(v,T){return pa(v,T,r.relTol,r.absTol)?new i(0):new i(v.cmp(T))},"bigint, bigint":function(v,T){return v===T?0n:v>T?1n:-1n},"Fraction, Fraction":function(v,T){return new s(v.compare(T))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},m,d({SS:c,DS:o,Ss:f}))}),uH=W(Lm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Lm,{"number, number":function(a,i){return Kr(a,i,r.relTol,r.absTol)?0:a>i?1:-1}})}),lH=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,u=/^0/,l=function(_){return t.insensitive&&(""+_).toLowerCase()||""+_},o=l(e).replace(a,"")||"",c=l(r).replace(a,"")||"",f=o.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(o.match(s),16)||f.length!==1&&o.match(i)&&Date.parse(o),h=parseInt(c.match(s),16)||m&&c.match(i)&&Date.parse(c)||null,v,T;if(h){if(m<h)return-1;if(m>h)return 1}for(var S=0,C=Math.max(f.length,d.length);S<C;S++){if(v=!(f[S]||"").match(u)&&parseFloat(f[S])||f[S]||0,T=!(d[S]||"").match(u)&&parseFloat(d[S])||d[S]||0,isNaN(v)!==isNaN(T))return isNaN(v)?1:-1;if(typeof v!=typeof T&&(v+="",T+=""),v<T)return-1;if(v>T)return 1}return 0};const Ho=Xm(lH);var J_="compareNatural",cH=["typed","compare"],fH=W(J_,cH,t=>{var{typed:e,compare:r}=t,n=r.signatures["boolean,boolean"];return e(J_,{"any, any":a});function a(l,o){var c=Xt(l),f=Xt(o),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=r(l,o),d.toString()!=="0"?d>0?1:-1:Ho(c,f);var m=["Array","DenseMatrix","SparseMatrix"];if(m.includes(c)||m.includes(f))return d=i(a,l,o),d!==0?d:Ho(c,f);if(c!==f)return Ho(c,f);if(c==="Complex")return dH(l,o);if(c==="Unit")return l.equalBase(o)?a(l.value,o.value):s(a,l.formatUnits(),o.formatUnits());if(c==="boolean")return n(l,o);if(c==="string")return Ho(l,o);if(c==="Object")return u(a,l,o);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function i(l,o,c){return Js(o)&&Js(c)?s(l,o.toJSON().values,c.toJSON().values):Js(o)?i(l,o.toArray(),c):Js(c)?i(l,o,c.toArray()):Em(o)?i(l,o.toJSON().data,c):Em(c)?i(l,o,c.toJSON().data):Array.isArray(o)?Array.isArray(c)?s(l,o,c):i(l,o,[c]):i(l,[o],c)}function s(l,o,c){for(var f=0,d=Math.min(o.length,c.length);f<d;f++){var m=l(o[f],c[f]);if(m!==0)return m}return o.length>c.length?1:o.length<c.length?-1:0}function u(l,o,c){var f=Object.keys(o),d=Object.keys(c);f.sort(Ho),d.sort(Ho);var m=s(l,f,d);if(m!==0)return m;for(var h=0;h<f.length;h++){var v=l(o[f[h]],c[d[h]]);if(v!==0)return v}return 0}});function dH(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var Y_="compareText",mH=["typed","matrix","concat"];Sg.signature="any, any";var hH=W(Y_,mH,t=>{var{typed:e,matrix:r,concat:n}=t,a=Zt({typed:e,matrix:r,concat:n});return e(Y_,Sg,a({elop:Sg,Ds:!0}))}),zm="equal",pH=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],vH=W(zm,pH,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,u=bn({typed:e}),l=ti({typed:e,SparseMatrix:s}),o=jr({typed:e,DenseMatrix:a}),c=Zt({typed:e,matrix:r,concat:i});return e(zm,gH({typed:e,equalScalar:n}),c({elop:n,SS:l,DS:u,Ss:o}))}),gH=W(zm,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(zm,{"any, any":function(a,i){return a===null?i===null:i===null?a===null:a===void 0?i===void 0:i===void 0?a===void 0:r(a,i)}})}),Z_="equalText",yH=["typed","compareText","isZero"],xH=W(Z_,yH,t=>{var{typed:e,compareText:r,isZero:n}=t;return e(Z_,{"any, any":function(i,s){return n(r(i,s))}})}),Vm="smaller",bH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],wH=W(Vm,bH,t=>{var{typed:e,config:r,bignumber:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=bn({typed:e}),o=ti({typed:e,SparseMatrix:u}),c=jr({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:a,concat:s}),d=sl({typed:e});function m(h,v){return h.lt(v)&&!pa(h,v,r.relTol,r.absTol)}return e(Vm,NH({typed:e,config:r}),{"boolean, boolean":(h,v)=>h<v,"BigNumber, BigNumber":m,"bigint, bigint":(h,v)=>h<v,"Fraction, Fraction":(h,v)=>h.compare(v)===-1,"Fraction, BigNumber":function(v,T){return m(n(v),T)},"BigNumber, Fraction":function(v,T){return m(v,n(T))},"Complex, Complex":function(v,T){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:o,DS:l,Ss:c}))}),NH=W(Vm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Vm,{"number, number":function(a,i){return a<i&&!Kr(a,i,r.relTol,r.absTol)}})}),Um="smallerEq",_H=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],EH=W(Um,_H,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,u=bn({typed:e}),l=ti({typed:e,SparseMatrix:s}),o=jr({typed:e,DenseMatrix:a}),c=Zt({typed:e,matrix:n,concat:i}),f=sl({typed:e});return e(Um,SH({typed:e,config:r}),{"boolean, boolean":(d,m)=>d<=m,"BigNumber, BigNumber":function(m,h){return m.lte(h)||pa(m,h,r.relTol,r.absTol)},"bigint, bigint":(d,m)=>d<=m,"Fraction, Fraction":(d,m)=>d.compare(m)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:u,Ss:o}))}),SH=W(Um,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Um,{"number, number":function(a,i){return a<=i||Kr(a,i,r.relTol,r.absTol)}})}),qm="larger",AH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],DH=W(qm,AH,t=>{var{typed:e,config:r,bignumber:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=bn({typed:e}),o=ti({typed:e,SparseMatrix:u}),c=jr({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:a,concat:s}),d=sl({typed:e});function m(h,v){return h.gt(v)&&!pa(h,v,r.relTol,r.absTol)}return e(qm,CH({typed:e,config:r}),{"boolean, boolean":(h,v)=>h>v,"BigNumber, BigNumber":m,"bigint, bigint":(h,v)=>h>v,"Fraction, Fraction":(h,v)=>h.compare(v)===1,"Fraction, BigNumber":function(v,T){return m(n(v),T)},"BigNumber, Fraction":function(v,T){return m(v,n(T))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:o,DS:l,Ss:c}))}),CH=W(qm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(qm,{"number, number":function(a,i){return a>i&&!Kr(a,i,r.relTol,r.absTol)}})}),Hm="largerEq",TH=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],MH=W(Hm,TH,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,u=bn({typed:e}),l=ti({typed:e,SparseMatrix:s}),o=jr({typed:e,DenseMatrix:a}),c=Zt({typed:e,matrix:n,concat:i}),f=sl({typed:e});return e(Hm,IH({typed:e,config:r}),{"boolean, boolean":(d,m)=>d>=m,"BigNumber, BigNumber":function(m,h){return m.gte(h)||pa(m,h,r.relTol,r.absTol)},"bigint, bigint":function(m,h){return m>=h},"Fraction, Fraction":(d,m)=>d.compare(m)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:l,DS:u,Ss:o}))}),IH=W(Hm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Hm,{"number, number":function(a,i){return a>=i||Kr(a,i,r.relTol,r.absTol)}})}),eE="deepEqual",PH=["typed","equal"],FH=W(eE,PH,t=>{var{typed:e,equal:r}=t;return e(eE,{"any, any":function(i,s){return n(i.valueOf(),s.valueOf())}});function n(a,i){if(Array.isArray(a))if(Array.isArray(i)){var s=a.length;if(s!==i.length)return!1;for(var u=0;u<s;u++)if(!n(a[u],i[u]))return!1;return!0}else return!1;else return Array.isArray(i)?!1:r(a,i)}}),Gm="unequal",RH=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],OH=W(Gm,RH,t=>{var{typed:e,config:r,equalScalar:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:u}=t,l=bn({typed:e}),o=ti({typed:e,SparseMatrix:u}),c=jr({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:a,concat:s});return e(Gm,BH({typed:e,equalScalar:n}),f({elop:d,SS:o,DS:l,Ss:c}));function d(m,h){return!n(m,h)}}),BH=W(Gm,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(Gm,{"any, any":function(a,i){return a===null?i!==null:i===null?a!==null:a===void 0?i!==void 0:i===void 0?a!==void 0:!r(a,i)}})}),tE="partitionSelect",jH=["typed","isNumeric","isNaN","compare"],kH=W(tE,jH,t=>{var{typed:e,isNumeric:r,isNaN:n,compare:a}=t,i=a,s=(o,c)=>-a(o,c);return e(tE,{"Array | Matrix, number":function(c,f){return u(c,f,i)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return u(c,f,i);if(d==="desc")return u(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":u});function u(o,c,f){if(!We(c)||c<0)throw new Error("k must be a non-negative integer");if(Ye(o)){var d=o.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(o.valueOf(),c,f)}if(Array.isArray(o))return l(o,c,f)}function l(o,c,f){if(c>=o.length)throw new Error("k out of bounds");for(var d=0;d<o.length;d++)if(r(o[d])&&n(o[d]))return o[d];for(var m=0,h=o.length-1;m<h;){for(var v=m,T=h,S=o[Math.floor(Math.random()*(h-m+1))+m];v<T;)if(f(o[v],S)>=0){var C=o[T];o[T]=o[v],o[v]=C,--T}else++v;f(o[v],S)>0&&--v,c<=v?h=v:m=v+1}return o[c]}}),rE="sort",$H=["typed","matrix","compare","compareNatural"],LH=W(rE,$H,t=>{var{typed:e,matrix:r,compare:n,compareNatural:a}=t,i=n,s=(c,f)=>-n(c,f);return e(rE,{Array:function(f){return l(f),f.sort(i)},Matrix:function(f){return o(f),r(f.toArray().sort(i),f.storage())},"Array, function":function(f,d){return l(f),f.sort(d)},"Matrix, function":function(f,d){return o(f),r(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return l(f),f.sort(u(d))},"Matrix, string":function(f,d){return o(f),r(f.toArray().sort(u(d)),f.storage())}});function u(c){if(c==="asc")return i;if(c==="desc")return s;if(c==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(at(c).length!==1)throw new Error("One dimensional array expected")}function o(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),nE="max",zH=["typed","config","numeric","larger","isNaN"],w4=W(nE,zH,t=>{var{typed:e,config:r,numeric:n,larger:a,isNaN:i}=t;return e(nE,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(o,c){return jh(o,c.valueOf(),s)},"...":function(o){if(nl(o))throw new TypeError("Scalar values expected in function max");return u(o)}});function s(l,o){try{return a(l,o)?l:o}catch(c){throw Dn(c,"max",o)}}function u(l){var o;if(Ns(l,function(c){try{(i(c)||o===void 0||a(c,o))&&(o=c)}catch(f){throw Dn(f,"max",c)}}),o===void 0)throw new Error("Cannot calculate max of an empty array");return typeof o=="string"&&(o=n(o,As(o,r))),o}}),aE="min",VH=["typed","config","numeric","smaller","isNaN"],N4=W(aE,VH,t=>{var{typed:e,config:r,numeric:n,smaller:a,isNaN:i}=t;return e(aE,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(o,c){return jh(o,c.valueOf(),s)},"...":function(o){if(nl(o))throw new TypeError("Scalar values expected in function min");return u(o)}});function s(l,o){try{return a(l,o)?l:o}catch(c){throw Dn(c,"min",o)}}function u(l){var o;if(Ns(l,function(c){try{(i(c)||o===void 0||a(c,o))&&(o=c)}catch(f){throw Dn(f,"min",c)}}),o===void 0)throw new Error("Cannot calculate min of an empty array");return typeof o=="string"&&(o=n(o,As(o,r))),o}}),UH="ImmutableDenseMatrix",qH=["smaller","DenseMatrix"],HH=W(UH,qH,t=>{var{smaller:e,DenseMatrix:r}=t;function n(a,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(i&&!yr(i))throw new Error("Invalid datatype: "+i);if(Ye(a)||Wt(a)){var s=new r(a,i);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(a&&Wt(a.data)&&Wt(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+Xt(a)+")");this._data=[],this._size=[0],this._datatype=i,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(a){switch(arguments.length){case 1:{var i=r.prototype.subset.call(this,a);return Ye(i)?new n({data:i._data,size:i._size,datatype:i._datatype}):i}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:nt(this._data),size:nt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(a){return new n(a)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(i){(a===null||e(i,a))&&(a=i)}),this._min=a!==null?a:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(i){(a===null||e(a,i))&&(a=i)}),this._max=a!==null?a:void 0}return this._max},n},{isClass:!0}),GH="Index",WH=["ImmutableDenseMatrix","getMatrixDataType"],QH=W(GH,WH,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var i=0,s=arguments.length;i<s;i++){var u=i<0||arguments.length<=i?void 0:arguments[i],l=Wt(u),o=Ye(u),c=typeof u,f=null;if(Cy(u))this._dimensions.push(u),this._isScalar=!1;else if(l||o){var d=void 0;this._isScalar=!1,r(u)==="boolean"?(l&&(d=a(iE(u).valueOf())),o&&(d=a(iE(u._data).valueOf())),f=u.valueOf().length):d=a(u.valueOf()),this._dimensions.push(d)}else if(c==="number")this._dimensions.push(u);else if(c==="bigint")this._dimensions.push(Number(u));else if(c==="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(f)}}n.prototype.type="Index",n.prototype.isIndex=!0;function a(i){for(var s=0,u=i.length;s<u;s++)if(!Xe(i[s])||!We(i[s]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=i,l._size=[i.length],l}return n.prototype.clone=function(){var i=new n;return i._dimensions=nt(this._dimensions),i._isScalar=this._isScalar,i._sourceSize=this._sourceSize,i},n.create=function(i){var s=new n;return n.apply(s,i),s},n.prototype.size=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i[s]=yr(l)||Xe(l)?1:l.size()[0]}return i},n.prototype.max=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i[s]=yr(l)||Xe(l)?l:l.max()}return i},n.prototype.min=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i[s]=yr(l)||Xe(l)?l:l.min()}return i},n.prototype.forEach=function(i){for(var s=0,u=this._dimensions.length;s<u;s++)i(this._dimensions[s],s,this)},n.prototype.dimension=function(i){var s;return Xe(i)&&(s=this._dimensions[i])!==null&&s!==void 0?s:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&yr(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];i.push(yr(l)||Xe(l)?l:l.toArray())}return i},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var i=[],s=0,u=this._dimensions.length;s<u;s++){var l=this._dimensions[s];yr(l)?i.push(JSON.stringify(l)):i.push(l.toString())}return"["+i.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(i){return n.create(i.dimensions)},n},{isClass:!0});function iE(t){var e=[];return t.forEach((r,n)=>{r&&e.push(n)}),e}var XH="FibonacciHeap",KH=["smaller","larger"],JH=W(XH,KH,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var m=this._minimum;d.left=m,d.right=m.right,m.right=d,d.right.left=d,e(c,m.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,m=c.child;d>0;){var h=m.right;m.left.right=m.right,m.right.left=m.left,m.left=f,m.right=f.right,f.right=m,m.right.left=m,m.parent=null,m=h,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=o(f,this._size)),this._size--,this._minimum=f,c},a.prototype.remove=function(c){this._minimum=i(this._minimum,c,-1),this.extractMinimum()};function i(c,f,d){f.key=d;var m=f.parent;return m&&e(f.key,m.key)&&(s(c,f,m),u(c,m)),e(f.key,c.key)&&(c=f),c}function s(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function u(c,f){var d=f.parent;d&&(f.mark?(s(c,f,d),u(d)):f.mark=!0)}var l=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function o(c,f){var d=Math.floor(Math.log(f)*n)+1,m=new Array(d),h=0,v=c;if(v)for(h++,v=v.right;v!==c;)h++,v=v.right;for(var T;h>0;){for(var S=v.degree,C=v.right;T=m[S],!!T;){if(r(v.key,T.key)){var _=T;T=v,v=_}l(T,v),m[S]=null,S++}m[S]=v,v=C,h--}c=null;for(var M=0;M<d;M++)T=m[M],T&&(c?(T.left.right=T.right,T.right.left=T.left,T.left=c,T.right=c.right,c.right=T,T.right.left=T,e(T.key,c.key)&&(c=T)):c=T);return c}return a},{isClass:!0}),YH="Spa",ZH=["addScalar","equalScalar","FibonacciHeap"],eG=W(YH,ZH,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(i,s){if(this._values[i])this._values[i].value=s;else{var u=this._heap.insert(i,s);this._values[i]=u}},a.prototype.get=function(i){var s=this._values[i];return s?s.value:0},a.prototype.accumulate=function(i,s){var u=this._values[i];u?u.value=e(u.value,s):(u=this._heap.insert(i,s),this._values[i]=u)},a.prototype.forEach=function(i,s,u){var l=this._heap,o=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=i&&(r(f.value,0)||u(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var m=c[d];f=l.insert(m.key,m.value),o[f.key]=f}},a.prototype.swap=function(i,s){var u=this._values[i],l=this._values[s];if(!u&&l)u=this._heap.insert(i,l.value),this._heap.remove(l),this._values[i]=u,this._values[s]=void 0;else if(u&&!l)l=this._heap.insert(s,u.value),this._heap.remove(u),this._values[s]=l,this._values[i]=void 0;else if(u&&l){var o=u.value;u.value=l.value,l.value=o}},a},{isClass:!0});function tG(t){var e=0,r=1,n=Object.create(null),a=Object.create(null),i=0,s=function(l){var o=a[l];if(o&&(delete n[o],delete a[l],--e,r===o)){if(!e){i=0,r=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(l){var o=a[l],c=++i;if(n[c]=l,a[l]=c,!o)return++e,e<=t?void 0:(l=n[r],s(l),l);if(delete n[o],r===o)for(;!Object.prototype.hasOwnProperty.call(n,++r););},delete:s,clear:function(){e=i=0,r=1,n=Object.create(null),a=Object.create(null)}}}function sf(t){var{hasher:e,limit:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=r??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:tG(r||Number.POSITIVE_INFINITY)});for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var s=e(a);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var u=t.apply(t,a);return n.cache.values.set(s,u),n.cache.values.delete(n.cache.lru.hit(s)),u}}var rG=sf(function(t){return new t(1).exp()},{hasher:Lh}),nG=sf(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:Lh}),zy=sf(function(t){return t.acos(-1)},{hasher:Lh}),aG=sf(function(t){return zy(t).times(2)},{hasher:Lh});function Lh(t){return t[0].precision}function sE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sE(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var iG="Unit",sG=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","toBest","number","Complex","BigNumber","Fraction"],oG=W(iG,sG,t=>{var{on:e,config:r,addScalar:n,subtractScalar:a,multiplyScalar:i,divideScalar:s,pow:u,abs:l,fix:o,round:c,equal:f,isNumeric:d,format:m,toBest:h,number:v,Complex:T,BigNumber:S,Fraction:C}=t,_=v;function M(Q,te){if(!(this instanceof M))throw new Error("Constructor must be called with the new operator");if(!(Q==null||d(Q)||hi(Q)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,te===void 0)this.units=[],this.dimensions=K.map(U=>0);else if(typeof te=="string"){var ce=M.parse(te);this.units=ce.units,this.dimensions=ce.dimensions}else if(Gn(te)&&te.value===null)this.fixPrefix=te.fixPrefix,this.skipAutomaticSimplification=te.skipAutomaticSimplification,this.dimensions=te.dimensions.slice(0),this.units=te.units.map(U=>Nr({},U));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Q)}Object.defineProperty(M,"name",{value:"Unit"}),M.prototype.constructor=M,M.prototype.type="Unit",M.prototype.isUnit=!0;var y,x,w;function g(){for(;w===" "||w==="	";)b()}function N(Q){return Q>="0"&&Q<="9"||Q==="."}function E(Q){return Q>="0"&&Q<="9"}function b(){x++,w=y.charAt(x)}function D(Q){x=Q,w=y.charAt(x)}function I(){var Q="",te=x;if(w==="+"?b():w==="-"&&(Q+=w,b()),!N(w))return D(te),null;if(w==="."){if(Q+=w,b(),!E(w))return D(te),null}else{for(;E(w);)Q+=w,b();w==="."&&(Q+=w,b())}for(;E(w);)Q+=w,b();if(w==="E"||w==="e"){var ce="",U=x;if(ce+=w,b(),(w==="+"||w==="-")&&(ce+=w,b()),!E(w))return D(U),Q;for(Q=Q+ce;E(w);)Q+=w,b()}return Q}function F(){for(var Q="";E(w)||M.isValidAlpha(w);)Q+=w,b();var te=Q.charAt(0);return M.isValidAlpha(te)?Q:null}function O(Q){return w===Q?(b(),Q):null}M.parse=function(Q,te){if(te=te||{},y=Q,x=-1,w="",typeof y!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ce=new M;ce.units=[];var U=1,Y=!1;b(),g();var re=I(),se=null;if(re){if(r.number==="BigNumber")se=new S(re);else if(r.number==="Fraction")try{se=new C(re)}catch{se=parseFloat(re)}else se=parseFloat(re);g(),O("*")?(U=1,Y=!0):O("/")&&(U=-1,Y=!0)}for(var le=[],ge=1;;){for(g();w==="(";)le.push(U),ge*=U,U=1,b(),g();var _e=void 0;if(w){var Se=w;if(_e=F(),_e===null)throw new SyntaxError('Unexpected "'+Se+'" in "'+y+'" at index '+x.toString())}else break;var Me=P(_e);if(Me===null)throw new SyntaxError('Unit "'+_e+'" not found.');var Ae=U*ge;if(g(),O("^")){g();var ht=I();if(ht===null)throw new SyntaxError('In "'+Q+'", "^" must be followed by a floating-point number');Ae*=ht}ce.units.push({unit:Me.unit,prefix:Me.prefix,power:Ae});for(var gt=0;gt<K.length;gt++)ce.dimensions[gt]+=(Me.unit.dimensions[gt]||0)*Ae;for(g();w===")";){if(le.length===0)throw new SyntaxError('Unmatched ")" in "'+y+'" at index '+x.toString());ge/=le.pop(),b(),g()}if(Y=!1,O("*")?(U=1,Y=!0):O("/")?(U=-1,Y=!0):U=1,Me.unit.base){var Ut=Me.unit.base.key;ie.auto[Ut]={unit:Me.unit,prefix:Me.prefix}}}if(g(),w)throw new SyntaxError('Could not parse: "'+Q+'"');if(Y)throw new SyntaxError('Trailing characters: "'+Q+'"');if(le.length!==0)throw new SyntaxError('Unmatched "(" in "'+y+'"');if(ce.units.length===0&&!te.allowNoUnits)throw new SyntaxError('"'+Q+'" contains no units');return ce.value=se!==void 0?ce._normalize(se):null,ce},M.prototype.clone=function(){var Q=new M;Q.fixPrefix=this.fixPrefix,Q.skipAutomaticSimplification=this.skipAutomaticSimplification,Q.value=nt(this.value),Q.dimensions=this.dimensions.slice(0),Q.units=[];for(var te=0;te<this.units.length;te++){Q.units[te]={};for(var ce in this.units[te])He(this.units[te],ce)&&(Q.units[te][ce]=this.units[te][ce])}return Q},M.prototype.valueType=function(){return Xt(this.value)},M.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},M.prototype._normalize=function(Q){if(Q==null||this.units.length===0)return Q;for(var te=Q,ce=M._getNumberConverter(Xt(Q)),U=0;U<this.units.length;U++){var Y=ce(this.units[U].unit.value),re=ce(this.units[U].prefix.value),se=ce(this.units[U].power);te=i(te,u(i(Y,re),se))}return te},M.prototype._denormalize=function(Q,te){if(Q==null||this.units.length===0)return Q;for(var ce=Q,U=M._getNumberConverter(Xt(Q)),Y=0;Y<this.units.length;Y++){var re=U(this.units[Y].unit.value),se=U(this.units[Y].prefix.value),le=U(this.units[Y].power);ce=s(ce,u(i(re,se),le))}return ce};var P=sf(Q=>{if(He(H,Q)){var te=H[Q],ce=te.prefixes[""];return{unit:te,prefix:ce}}for(var U in H)if(He(H,U)&&d$(Q,U)){var Y=H[U],re=Q.length-U.length,se=Q.substring(0,re),le=He(Y.prefixes,se)?Y.prefixes[se]:void 0;if(le!==void 0)return{unit:Y,prefix:le}}return null},{hasher:Q=>Q[0],limit:100});M.isValuelessUnit=function(Q){return P(Q)!==null},M.prototype.hasBase=function(Q){if(typeof Q=="string"&&(Q=V[Q]),!Q)return!1;for(var te=0;te<K.length;te++)if(Math.abs((this.dimensions[te]||0)-(Q.dimensions[te]||0))>1e-12)return!1;return!0},M.prototype.equalBase=function(Q){for(var te=0;te<K.length;te++)if(Math.abs((this.dimensions[te]||0)-(Q.dimensions[te]||0))>1e-12)return!1;return!0},M.prototype.equals=function(Q){return this.equalBase(Q)&&f(this.value,Q.value)},M.prototype.multiply=function(Q){for(var te=this.clone(),ce=Gn(Q)?Q:new M(Q),U=0;U<K.length;U++)te.dimensions[U]=(this.dimensions[U]||0)+(ce.dimensions[U]||0);for(var Y=0;Y<ce.units.length;Y++){var re=Zp({},ce.units[Y]);te.units.push(re)}if(this.value!==null||ce.value!==null){var se=this.value===null?this._normalize($(ce.value)):this.value,le=ce.value===null?ce._normalize($(this.value)):ce.value;te.value=i(se,le)}else te.value=null;return Gn(Q)&&(te.skipAutomaticSimplification=!1),z(te)},M.prototype.divideInto=function(Q){return new M(Q).divide(this)},M.prototype.divide=function(Q){for(var te=this.clone(),ce=Gn(Q)?Q:new M(Q),U=0;U<K.length;U++)te.dimensions[U]=(this.dimensions[U]||0)-(ce.dimensions[U]||0);for(var Y=0;Y<ce.units.length;Y++){var re=Zp(Zp({},ce.units[Y]),{},{power:-ce.units[Y].power});te.units.push(re)}if(this.value!==null||ce.value!==null){var se=this.value===null?this._normalize($(ce.value)):this.value,le=ce.value===null?ce._normalize($(this.value)):ce.value;te.value=s(se,le)}else te.value=null;return Gn(Q)&&(te.skipAutomaticSimplification=!1),z(te)},M.prototype.pow=function(Q){for(var te=this.clone(),ce=0;ce<K.length;ce++)te.dimensions[ce]=(this.dimensions[ce]||0)*Q;for(var U=0;U<te.units.length;U++)te.units[U].power*=Q;return te.value!==null?te.value=u(te.value,Q):te.value=null,te.skipAutomaticSimplification=!1,z(te)};function z(Q){return Q.equalBase(V.NONE)&&Q.value!==null&&!r.predictable?Q.value:Q}function $(Q){var te=M._getNumberConverter(Xt(Q));return te(1)}M.prototype.abs=function(){var Q=this.clone();if(Q.value!==null)if(Q._isDerived()||Q.units.length===0||Q.units[0].unit.offset===0)Q.value=l(Q.value);else{var te=Q._numberConverter(),ce=te(Q.units[0].unit.value),U=te(Q.units[0].unit.offset),Y=i(ce,U);Q.value=a(l(n(Q.value,Y)),Y)}for(var re in Q.units)(Q.units[re].unit.name==="VA"||Q.units[re].unit.name==="VAR")&&(Q.units[re].unit=H.W);return Q},M.prototype.to=function(Q){var te=this.value===null?this._normalize(1):this.value,ce;if(typeof Q=="string")ce=M.parse(Q);else if(Gn(Q))ce=Q.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ce))throw new Error("Units do not match ('".concat(ce.toString(),"' != '").concat(this.toString(),"')"));if(ce.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ce.units.length===0||this.units[0].unit.offset===ce.units[0].unit.offset)ce.value=nt(te);else{var U=M._getNumberConverter(Xt(te)),Y=this.units[0].unit.value,re=this.units[0].unit.offset,se=i(Y,re),le=ce.units[0].unit.value,ge=ce.units[0].unit.offset,_e=i(le,ge);ce.value=n(te,U(a(se,_e)))}return ce.fixPrefix=!0,ce.skipAutomaticSimplification=!0,ce},M.prototype.toNumber=function(Q){return _(this.toNumeric(Q))},M.prototype.toNumeric=function(Q){var te;return Q?te=this.to(Q):te=this.clone(),te._isDerived()||te.units.length===0?te._denormalize(te.value):te._denormalize(te.value,te.units[0].prefix.value)},M.prototype.toString=function(){return this.format()},M.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},M.fromJSON=function(Q){var te,ce=new M(Q.value,(te=Q.unit)!==null&&te!==void 0?te:void 0);return ce.fixPrefix=Q.fixPrefix||!1,ce},M.prototype.valueOf=M.prototype.toString,M.prototype.simplify=function(){var Q=this.clone(),te=[],ce;for(var U in oe)if(He(oe,U)&&Q.hasBase(V[U])){ce=U;break}if(ce==="NONE")Q.units=[];else{var Y;if(ce&&He(oe,ce)&&(Y=oe[ce]),Y)Q.units=[{unit:Y.unit,prefix:Y.prefix,power:1}];else{for(var re=!1,se=0;se<K.length;se++){var le=K[se];Math.abs(Q.dimensions[se]||0)>1e-12&&(He(oe,le)?te.push({unit:oe[le].unit,prefix:oe[le].prefix,power:Q.dimensions[se]||0}):re=!0)}te.length<Q.units.length&&!re&&(Q.units=te)}}return Q},M.prototype.toSI=function(){for(var Q=this.clone(),te=[],ce=0;ce<K.length;ce++){var U=K[ce];if(Math.abs(Q.dimensions[ce]||0)>1e-12)if(He(ie.si,U))te.push({unit:ie.si[U].unit,prefix:ie.si[U].prefix,power:Q.dimensions[ce]||0});else throw new Error("Cannot express custom unit "+U+" in SI units")}return Q.units=te,Q.fixPrefix=!0,Q.skipAutomaticSimplification=!0,this.value!==null?(Q.value=null,this.to(Q)):Q},M.prototype.formatUnits=function(){for(var Q="",te="",ce=0,U=0,Y=0;Y<this.units.length;Y++)this.units[Y].power>0?(ce++,Q+=" "+this.units[Y].prefix.name+this.units[Y].unit.name,Math.abs(this.units[Y].power-1)>1e-15&&(Q+="^"+this.units[Y].power)):this.units[Y].power<0&&U++;if(U>0)for(var re=0;re<this.units.length;re++)this.units[re].power<0&&(ce>0?(te+=" "+this.units[re].prefix.name+this.units[re].unit.name,Math.abs(this.units[re].power+1)>1e-15&&(te+="^"+-this.units[re].power)):(te+=" "+this.units[re].prefix.name+this.units[re].unit.name,te+="^"+this.units[re].power));Q=Q.substr(1),te=te.substr(1),ce>1&&U>0&&(Q="("+Q+")"),U>1&&ce>0&&(te="("+te+")");var se=Q;return ce>0&&U>0&&(se+=" / "),se+=te,se},M.prototype.toBest=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Q&&!Array.isArray(Q))throw new Error("Invalid unit type. Expected string or Unit.");var ce=this.units[0].unit.prefixes;if(Q&&Q.length>0){var U=Q.map(se=>{var le=null;if(typeof se=="string"){if(le=M.parse(se),!le)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!Gn(se))throw new Error("Invalid unit type. Expected compatible string or Unit.");le===null&&(le=se.clone());try{return this.to(le.formatUnits()),le}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),Y=U.map(se=>se.units[0].prefix);this.units[0].unit.prefixes=Y.reduce((se,le)=>(se[le.name]=le,se),{}),this.units[0].prefix=Y[0]}var re=L(this,te).simp;return this.units[0].unit.prefixes=ce,re.fixPrefix=!0,re},M.prototype.format=function(Q){var{simp:te,valueStr:ce,unitStr:U}=L(this,Q),Y=ce;return te.value&&hi(te.value)&&(Y="("+Y+")"),U.length>0&&Y.length>0&&(Y+=" "),Y+=U,Y};function L(Q){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=Q.skipAutomaticSimplification||Q.value===null?Q.clone():Q.simplify();q(ce),ae(ce,te.offset);var U=ce._denormalize(ce.value),Y=ce.value!==null?m(U,te||{}):"",re=ce.formatUnits();return{simp:ce,valueStr:Y,unitStr:re}}function q(Q){var te=!1;typeof Q.value<"u"&&Q.value!==null&&hi(Q.value)&&(te=Math.abs(Q.value.re)<1e-14);for(var ce in Q.units)He(Q.units,ce)&&Q.units[ce].unit&&(Q.units[ce].unit.name==="VA"&&te?Q.units[ce].unit=H.VAR:Q.units[ce].unit.name==="VAR"&&!te&&(Q.units[ce].unit=H.VA))}function ae(Q,te){Q.units.length===1&&!Q.fixPrefix&&Math.abs(Q.units[0].power-Math.round(Q.units[0].power))<1e-14&&(Q.units[0].prefix=Q._bestPrefix(te))}M.prototype._bestPrefix=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var te=this.value!==null?l(this.value):0,ce=l(this.units[0].unit.value),U=this.units[0].prefix;if(te===0)return U;var Y=this.units[0].power,re=Math.log(te/Math.pow(U.value*ce,Y))/Math.LN10-Q;if(re>-2.200001&&re<1.800001)return U;re=Math.abs(re);var se=this.units[0].unit.prefixes;for(var le in se)if(He(se,le)){var ge=se[le];if(ge.scientific){var _e=Math.abs(Math.log(te/Math.pow(ge.value*ce,Y))/Math.LN10-Q);(_e<re||_e===re&&ge.name.length<U.name.length)&&(U=ge,re=_e)}}return U},M.prototype.splitUnit=function(Q){for(var te=this.clone(),ce=[],U=0;U<Q.length&&(te=te.to(Q[U]),U!==Q.length-1);U++){var Y=te.toNumeric(),re=c(Y),se=void 0,le=f(re,Y);le?se=re:se=o(te.toNumeric());var ge=new M(se,Q[U].toString());ce.push(ge),te=a(te,ge)}for(var _e=0,Se=0;Se<ce.length;Se++)_e=n(_e,ce[Se].value);return f(_e,this.value)&&(te.value=0),ce.push(te),ce};var j={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};j.SHORTLONG=Nr({},j.SHORT,j.LONG),j.BINARY_SHORT=Nr({},j.BINARY_SHORT_SI,j.BINARY_SHORT_IEC),j.BINARY_LONG=Nr({},j.BINARY_LONG_SI,j.BINARY_LONG_IEC);var K=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],V={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var pe in V)He(V,pe)&&(V[pe].key=pe);var ue={},fe={name:"",base:ue,value:1,offset:0,dimensions:K.map(Q=>0)},H={meter:{name:"meter",base:V.LENGTH,prefixes:j.LONG,value:1,offset:0},inch:{name:"inch",base:V.LENGTH,prefixes:j.NONE,value:.0254,offset:0},foot:{name:"foot",base:V.LENGTH,prefixes:j.NONE,value:.3048,offset:0},yard:{name:"yard",base:V.LENGTH,prefixes:j.NONE,value:.9144,offset:0},mile:{name:"mile",base:V.LENGTH,prefixes:j.NONE,value:1609.344,offset:0},link:{name:"link",base:V.LENGTH,prefixes:j.NONE,value:.201168,offset:0},rod:{name:"rod",base:V.LENGTH,prefixes:j.NONE,value:5.0292,offset:0},chain:{name:"chain",base:V.LENGTH,prefixes:j.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:V.LENGTH,prefixes:j.NONE,value:1e-10,offset:0},m:{name:"m",base:V.LENGTH,prefixes:j.SHORT,value:1,offset:0},in:{name:"in",base:V.LENGTH,prefixes:j.NONE,value:.0254,offset:0},ft:{name:"ft",base:V.LENGTH,prefixes:j.NONE,value:.3048,offset:0},yd:{name:"yd",base:V.LENGTH,prefixes:j.NONE,value:.9144,offset:0},mi:{name:"mi",base:V.LENGTH,prefixes:j.NONE,value:1609.344,offset:0},li:{name:"li",base:V.LENGTH,prefixes:j.NONE,value:.201168,offset:0},rd:{name:"rd",base:V.LENGTH,prefixes:j.NONE,value:5.02921,offset:0},ch:{name:"ch",base:V.LENGTH,prefixes:j.NONE,value:20.1168,offset:0},mil:{name:"mil",base:V.LENGTH,prefixes:j.NONE,value:254e-7,offset:0},m2:{name:"m2",base:V.SURFACE,prefixes:j.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:V.SURFACE,prefixes:j.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:V.SURFACE,prefixes:j.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:V.SURFACE,prefixes:j.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:V.SURFACE,prefixes:j.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:V.SURFACE,prefixes:j.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:V.SURFACE,prefixes:j.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:V.SURFACE,prefixes:j.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:V.SURFACE,prefixes:j.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:V.SURFACE,prefixes:j.NONE,value:1e4,offset:0},m3:{name:"m3",base:V.VOLUME,prefixes:j.CUBIC,value:1,offset:0},L:{name:"L",base:V.VOLUME,prefixes:j.SHORT,value:.001,offset:0},l:{name:"l",base:V.VOLUME,prefixes:j.SHORT,value:.001,offset:0},litre:{name:"litre",base:V.VOLUME,prefixes:j.LONG,value:.001,offset:0},cuin:{name:"cuin",base:V.VOLUME,prefixes:j.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:V.VOLUME,prefixes:j.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:V.VOLUME,prefixes:j.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:V.VOLUME,prefixes:j.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:V.VOLUME,prefixes:j.NONE,value:15e-6,offset:0},drop:{name:"drop",base:V.VOLUME,prefixes:j.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:V.VOLUME,prefixes:j.NONE,value:5e-8,offset:0},minim:{name:"minim",base:V.VOLUME,prefixes:j.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:V.VOLUME,prefixes:j.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:V.VOLUME,prefixes:j.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:V.VOLUME,prefixes:j.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:V.VOLUME,prefixes:j.NONE,value:1e-6,offset:0},cup:{name:"cup",base:V.VOLUME,prefixes:j.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:V.VOLUME,prefixes:j.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:V.VOLUME,prefixes:j.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:V.VOLUME,prefixes:j.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:V.VOLUME,prefixes:j.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:V.VOLUME,prefixes:j.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:V.VOLUME,prefixes:j.NONE,value:.238480942392,offset:0},g:{name:"g",base:V.MASS,prefixes:j.SHORT,value:.001,offset:0},gram:{name:"gram",base:V.MASS,prefixes:j.LONG,value:.001,offset:0},ton:{name:"ton",base:V.MASS,prefixes:j.SHORT,value:907.18474,offset:0},t:{name:"t",base:V.MASS,prefixes:j.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:V.MASS,prefixes:j.LONG,value:1e3,offset:0},grain:{name:"grain",base:V.MASS,prefixes:j.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:V.MASS,prefixes:j.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:V.MASS,prefixes:j.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:V.MASS,prefixes:j.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:V.MASS,prefixes:j.NONE,value:45.359237,offset:0},stick:{name:"stick",base:V.MASS,prefixes:j.NONE,value:.115,offset:0},stone:{name:"stone",base:V.MASS,prefixes:j.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:V.MASS,prefixes:j.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:V.MASS,prefixes:j.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:V.MASS,prefixes:j.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:V.MASS,prefixes:j.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:V.MASS,prefixes:j.NONE,value:45.359237,offset:0},s:{name:"s",base:V.TIME,prefixes:j.SHORT,value:1,offset:0},min:{name:"min",base:V.TIME,prefixes:j.NONE,value:60,offset:0},h:{name:"h",base:V.TIME,prefixes:j.NONE,value:3600,offset:0},second:{name:"second",base:V.TIME,prefixes:j.LONG,value:1,offset:0},sec:{name:"sec",base:V.TIME,prefixes:j.LONG,value:1,offset:0},minute:{name:"minute",base:V.TIME,prefixes:j.NONE,value:60,offset:0},hour:{name:"hour",base:V.TIME,prefixes:j.NONE,value:3600,offset:0},day:{name:"day",base:V.TIME,prefixes:j.NONE,value:86400,offset:0},week:{name:"week",base:V.TIME,prefixes:j.NONE,value:7*86400,offset:0},month:{name:"month",base:V.TIME,prefixes:j.NONE,value:2629800,offset:0},year:{name:"year",base:V.TIME,prefixes:j.NONE,value:31557600,offset:0},decade:{name:"decade",base:V.TIME,prefixes:j.NONE,value:315576e3,offset:0},century:{name:"century",base:V.TIME,prefixes:j.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:V.TIME,prefixes:j.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:V.FREQUENCY,prefixes:j.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:V.FREQUENCY,prefixes:j.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:V.ANGLE,prefixes:j.SHORT,value:1,offset:0},radian:{name:"radian",base:V.ANGLE,prefixes:j.LONG,value:1,offset:0},deg:{name:"deg",base:V.ANGLE,prefixes:j.SHORT,value:null,offset:0},degree:{name:"degree",base:V.ANGLE,prefixes:j.LONG,value:null,offset:0},grad:{name:"grad",base:V.ANGLE,prefixes:j.SHORT,value:null,offset:0},gradian:{name:"gradian",base:V.ANGLE,prefixes:j.LONG,value:null,offset:0},cycle:{name:"cycle",base:V.ANGLE,prefixes:j.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:V.ANGLE,prefixes:j.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:V.ANGLE,prefixes:j.NONE,value:null,offset:0},A:{name:"A",base:V.CURRENT,prefixes:j.SHORT,value:1,offset:0},ampere:{name:"ampere",base:V.CURRENT,prefixes:j.LONG,value:1,offset:0},K:{name:"K",base:V.TEMPERATURE,prefixes:j.SHORT,value:1,offset:0},degC:{name:"degC",base:V.TEMPERATURE,prefixes:j.SHORT,value:1,offset:273.15},degF:{name:"degF",base:V.TEMPERATURE,prefixes:j.SHORT,value:new C(5,9),offset:459.67},degR:{name:"degR",base:V.TEMPERATURE,prefixes:j.SHORT,value:new C(5,9),offset:0},kelvin:{name:"kelvin",base:V.TEMPERATURE,prefixes:j.LONG,value:1,offset:0},celsius:{name:"celsius",base:V.TEMPERATURE,prefixes:j.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:V.TEMPERATURE,prefixes:j.LONG,value:new C(5,9),offset:459.67},rankine:{name:"rankine",base:V.TEMPERATURE,prefixes:j.LONG,value:new C(5,9),offset:0},mol:{name:"mol",base:V.AMOUNT_OF_SUBSTANCE,prefixes:j.SHORT,value:1,offset:0},mole:{name:"mole",base:V.AMOUNT_OF_SUBSTANCE,prefixes:j.LONG,value:1,offset:0},cd:{name:"cd",base:V.LUMINOUS_INTENSITY,prefixes:j.SHORT,value:1,offset:0},candela:{name:"candela",base:V.LUMINOUS_INTENSITY,prefixes:j.LONG,value:1,offset:0},N:{name:"N",base:V.FORCE,prefixes:j.SHORT,value:1,offset:0},newton:{name:"newton",base:V.FORCE,prefixes:j.LONG,value:1,offset:0},dyn:{name:"dyn",base:V.FORCE,prefixes:j.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:V.FORCE,prefixes:j.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:V.FORCE,prefixes:j.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:V.FORCE,prefixes:j.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:V.FORCE,prefixes:j.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:V.FORCE,prefixes:j.NONE,value:9.80665,offset:0},J:{name:"J",base:V.ENERGY,prefixes:j.SHORT,value:1,offset:0},joule:{name:"joule",base:V.ENERGY,prefixes:j.LONG,value:1,offset:0},erg:{name:"erg",base:V.ENERGY,prefixes:j.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:V.ENERGY,prefixes:j.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:V.ENERGY,prefixes:j.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:V.ENERGY,prefixes:j.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:V.ENERGY,prefixes:j.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:V.POWER,prefixes:j.SHORT,value:1,offset:0},watt:{name:"watt",base:V.POWER,prefixes:j.LONG,value:1,offset:0},hp:{name:"hp",base:V.POWER,prefixes:j.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:V.POWER,prefixes:j.SHORT,value:T.I,offset:0},VA:{name:"VA",base:V.POWER,prefixes:j.SHORT,value:1,offset:0},Pa:{name:"Pa",base:V.PRESSURE,prefixes:j.SHORT,value:1,offset:0},psi:{name:"psi",base:V.PRESSURE,prefixes:j.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:V.PRESSURE,prefixes:j.NONE,value:101325,offset:0},bar:{name:"bar",base:V.PRESSURE,prefixes:j.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:V.PRESSURE,prefixes:j.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:V.PRESSURE,prefixes:j.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:V.PRESSURE,prefixes:j.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:V.PRESSURE,prefixes:j.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:V.ELECTRIC_CHARGE,prefixes:j.LONG,value:1,offset:0},C:{name:"C",base:V.ELECTRIC_CHARGE,prefixes:j.SHORT,value:1,offset:0},farad:{name:"farad",base:V.ELECTRIC_CAPACITANCE,prefixes:j.LONG,value:1,offset:0},F:{name:"F",base:V.ELECTRIC_CAPACITANCE,prefixes:j.SHORT,value:1,offset:0},volt:{name:"volt",base:V.ELECTRIC_POTENTIAL,prefixes:j.LONG,value:1,offset:0},V:{name:"V",base:V.ELECTRIC_POTENTIAL,prefixes:j.SHORT,value:1,offset:0},ohm:{name:"ohm",base:V.ELECTRIC_RESISTANCE,prefixes:j.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:V.ELECTRIC_INDUCTANCE,prefixes:j.LONG,value:1,offset:0},H:{name:"H",base:V.ELECTRIC_INDUCTANCE,prefixes:j.SHORT,value:1,offset:0},siemens:{name:"siemens",base:V.ELECTRIC_CONDUCTANCE,prefixes:j.LONG,value:1,offset:0},S:{name:"S",base:V.ELECTRIC_CONDUCTANCE,prefixes:j.SHORT,value:1,offset:0},weber:{name:"weber",base:V.MAGNETIC_FLUX,prefixes:j.LONG,value:1,offset:0},Wb:{name:"Wb",base:V.MAGNETIC_FLUX,prefixes:j.SHORT,value:1,offset:0},tesla:{name:"tesla",base:V.MAGNETIC_FLUX_DENSITY,prefixes:j.LONG,value:1,offset:0},T:{name:"T",base:V.MAGNETIC_FLUX_DENSITY,prefixes:j.SHORT,value:1,offset:0},b:{name:"b",base:V.BIT,prefixes:j.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:V.BIT,prefixes:j.BINARY_LONG,value:1,offset:0},B:{name:"B",base:V.BIT,prefixes:j.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:V.BIT,prefixes:j.BINARY_LONG,value:8,offset:0}},J={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ee(Q){if(Q.number==="BigNumber"){var te=zy(S);H.rad.value=new S(1),H.deg.value=te.div(180),H.grad.value=te.div(200),H.cycle.value=te.times(2),H.arcsec.value=te.div(648e3),H.arcmin.value=te.div(10800)}else H.rad.value=1,H.deg.value=Math.PI/180,H.grad.value=Math.PI/200,H.cycle.value=Math.PI*2,H.arcsec.value=Math.PI/648e3,H.arcmin.value=Math.PI/10800;H.radian.value=H.rad.value,H.degree.value=H.deg.value,H.gradian.value=H.grad.value}ee(r),e&&e("config",function(Q,te){Q.number!==te.number&&ee(Q)});var ie={si:{NONE:{unit:fe,prefix:j.NONE[""]},LENGTH:{unit:H.m,prefix:j.SHORT[""]},MASS:{unit:H.g,prefix:j.SHORT.k},TIME:{unit:H.s,prefix:j.SHORT[""]},CURRENT:{unit:H.A,prefix:j.SHORT[""]},TEMPERATURE:{unit:H.K,prefix:j.SHORT[""]},LUMINOUS_INTENSITY:{unit:H.cd,prefix:j.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:H.mol,prefix:j.SHORT[""]},ANGLE:{unit:H.rad,prefix:j.SHORT[""]},BIT:{unit:H.bits,prefix:j.SHORT[""]},FORCE:{unit:H.N,prefix:j.SHORT[""]},ENERGY:{unit:H.J,prefix:j.SHORT[""]},POWER:{unit:H.W,prefix:j.SHORT[""]},PRESSURE:{unit:H.Pa,prefix:j.SHORT[""]},ELECTRIC_CHARGE:{unit:H.C,prefix:j.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:H.F,prefix:j.SHORT[""]},ELECTRIC_POTENTIAL:{unit:H.V,prefix:j.SHORT[""]},ELECTRIC_RESISTANCE:{unit:H.ohm,prefix:j.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:H.H,prefix:j.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:H.S,prefix:j.SHORT[""]},MAGNETIC_FLUX:{unit:H.Wb,prefix:j.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:H.T,prefix:j.SHORT[""]},FREQUENCY:{unit:H.Hz,prefix:j.SHORT[""]}}};ie.cgs=JSON.parse(JSON.stringify(ie.si)),ie.cgs.LENGTH={unit:H.m,prefix:j.SHORT.c},ie.cgs.MASS={unit:H.g,prefix:j.SHORT[""]},ie.cgs.FORCE={unit:H.dyn,prefix:j.SHORT[""]},ie.cgs.ENERGY={unit:H.erg,prefix:j.NONE[""]},ie.us=JSON.parse(JSON.stringify(ie.si)),ie.us.LENGTH={unit:H.ft,prefix:j.NONE[""]},ie.us.MASS={unit:H.lbm,prefix:j.NONE[""]},ie.us.TEMPERATURE={unit:H.degF,prefix:j.NONE[""]},ie.us.FORCE={unit:H.lbf,prefix:j.NONE[""]},ie.us.ENERGY={unit:H.BTU,prefix:j.BTU[""]},ie.us.POWER={unit:H.hp,prefix:j.NONE[""]},ie.us.PRESSURE={unit:H.psi,prefix:j.NONE[""]},ie.auto=JSON.parse(JSON.stringify(ie.si));var oe=ie.auto;M.setUnitSystem=function(Q){if(He(ie,Q))oe=ie[Q];else throw new Error("Unit system "+Q+" does not exist. Choices are: "+Object.keys(ie).join(", "))},M.getUnitSystem=function(){for(var Q in ie)if(He(ie,Q)&&ie[Q]===oe)return Q},M.typeConverters={BigNumber:function(te){return te!=null&&te.isFraction?new S(String(te.n)).div(String(te.d)).times(String(te.s)):new S(te+"")},Fraction:function(te){return new C(te)},Complex:function(te){return te},number:function(te){return te!=null&&te.isFraction?v(te):te}},M.prototype._numberConverter=function(){var Q=M.typeConverters[this.valueType()];if(Q)return Q;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},M._getNumberConverter=function(Q){if(!M.typeConverters[Q])throw new TypeError('Unsupported type "'+Q+'"');return M.typeConverters[Q]};for(var ve in H)if(He(H,ve)){var me=H[ve];me.dimensions=me.base.dimensions}for(var Te in J)if(He(J,Te)){var ke=H[J[Te]],ze={};for(var Oe in ke)He(ke,Oe)&&(ze[Oe]=ke[Oe]);ze.name=Te,H[Te]=ze}M.isValidAlpha=function(te){return/^[a-zA-Z]$/.test(te)};function $e(Q){for(var te=0;te<Q.length;te++){if(w=Q.charAt(te),te===0&&!M.isValidAlpha(w))throw new Error('Invalid unit name (must begin with alpha character): "'+Q+'"');if(te>0&&!(M.isValidAlpha(w)||E(w)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Q+'"')}}return M.createUnit=function(Q,te){if(typeof Q!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(te&&te.override){for(var ce in Q)if(He(Q,ce)&&M.deleteUnit(ce),Q[ce].aliases)for(var U=0;U<Q[ce].aliases.length;U++)M.deleteUnit(Q[ce].aliases[U])}var Y;for(var re in Q)He(Q,re)&&(Y=M.createUnitSingle(re,Q[re]));return Y},M.createUnitSingle=function(Q,te){if((typeof te>"u"||te===null)&&(te={}),typeof Q!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(He(H,Q))throw new Error('Cannot create unit "'+Q+'": a unit with that name already exists');$e(Q);var ce=null,U=[],Y=0,re,se,le;if(te&&te.type==="Unit")ce=te.clone();else if(typeof te=="string")te!==""&&(re=te);else if(typeof te=="object")re=te.definition,se=te.prefixes,Y=te.offset,le=te.baseName,te.aliases&&(U=te.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Q+'" from "'+te.toString()+'": expecting "string" or "Unit" or "Object"');if(U){for(var ge=0;ge<U.length;ge++)if(He(H,U[ge]))throw new Error('Cannot create alias "'+U[ge]+'": a unit with that name already exists')}if(re&&typeof re=="string"&&!ce)try{ce=M.parse(re,{allowNoUnits:!0})}catch(Ge){throw Ge.message='Could not create unit "'+Q+'" from "'+re+'": '+Ge.message,Ge}else re&&re.type==="Unit"&&(ce=re.clone());U=U||[],Y=Y||0,se&&se.toUpperCase?se=j[se.toUpperCase()]||j.NONE:se=j.NONE;var _e={};if(ce){_e={name:Q,value:ce.value,dimensions:ce.dimensions.slice(0),prefixes:se,offset:Y};var ht=!1;for(var gt in V)if(He(V,gt)){for(var Ut=!0,Ze=0;Ze<K.length;Ze++)if(Math.abs((_e.dimensions[Ze]||0)-(V[gt].dimensions[Ze]||0))>1e-12){Ut=!1;break}if(Ut){ht=!0,_e.base=V[gt];break}}if(!ht){le=le||Q+"_STUFF";var ur={dimensions:ce.dimensions.slice(0)};ur.key=le,V[le]=ur,oe[le]={unit:_e,prefix:j.NONE[""]},_e.base=V[le]}}else{if(le=le||Q+"_STUFF",K.indexOf(le)>=0)throw new Error('Cannot create new base unit "'+Q+'": a base unit with that name already exists (and cannot be overridden)');K.push(le);for(var Se in V)He(V,Se)&&(V[Se].dimensions[K.length-1]=0);for(var Me={dimensions:[]},Ae=0;Ae<K.length;Ae++)Me.dimensions[Ae]=0;Me.dimensions[K.length-1]=1,Me.key=le,V[le]=Me,_e={name:Q,value:1,dimensions:V[le].dimensions.slice(0),prefixes:se,offset:Y,base:V[le]},oe[le]={unit:_e,prefix:j.NONE[""]}}M.UNITS[Q]=_e;for(var B=0;B<U.length;B++){var ne=U[B],he={};for(var De in _e)He(_e,De)&&(he[De]=_e[De]);he.name=ne,M.UNITS[ne]=he}return delete P.cache,new M(null,Q)},M.deleteUnit=function(Q){delete M.UNITS[Q],delete P.cache},M.PREFIXES=j,M.BASE_DIMENSIONS=K,M.BASE_UNITS=V,M.UNIT_SYSTEMS=ie,M.UNITS=H,M},{isClass:!0}),oE="unit",uG=["typed","Unit"],lG=W(oE,uG,t=>{var{typed:e,Unit:r}=t;return e(oE,{Unit:function(a){return a.clone()},string:function(a){return r.isValuelessUnit(a)?new r(null,a):r.parse(a,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(a,i){return new r(a,i)},"number | BigNumber | Fraction":function(a){return new r(a)},"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),uE="sparse",cG=["typed","SparseMatrix"],fG=W(uE,cG,t=>{var{typed:e,SparseMatrix:r}=t;return e(uE,{"":function(){return new r([])},string:function(a){return new r([],a)},"Array | Matrix":function(a){return new r(a)},"Array | Matrix, string":function(a,i){return new r(a,i)}})}),lE="createUnit",dG=["typed","Unit"],mG=W(lE,dG,t=>{var{typed:e,Unit:r}=t;return e(lE,{"Object, Object":function(a,i){return r.createUnit(a,i)},Object:function(a){return r.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,i,s){var u={};return u[a]=i,r.createUnit(u,s)},"string, Unit | string | Object":function(a,i){var s={};return s[a]=i,r.createUnit(s,{})},string:function(a){var i={};return i[a]={},r.createUnit(i,{})}})}),cE="acos",hG=["typed","config","Complex"],pG=W(cE,hG,t=>{var{typed:e,config:r,Complex:n}=t;return e(cE,{number:function(i){return i>=-1&&i<=1||r.predictable?Math.acos(i):new n(i,0).acos()},Complex:function(i){return i.acos()},BigNumber:function(i){return i.acos()}})}),fE="acosh",vG=["typed","config","Complex"],gG=W(fE,vG,t=>{var{typed:e,config:r,Complex:n}=t;return e(fE,{number:function(i){return i>=1||r.predictable?OM(i):i<=-1?new n(Math.log(Math.sqrt(i*i-1)-i),Math.PI):new n(i,0).acosh()},Complex:function(i){return i.acosh()},BigNumber:function(i){return i.acosh()}})}),dE="acot",yG=["typed","BigNumber"],xG=W(dE,yG,t=>{var{typed:e,BigNumber:r}=t;return e(dE,{number:BM,Complex:function(a){return a.acot()},BigNumber:function(a){return new r(1).div(a).atan()}})}),mE="acoth",bG=["typed","config","Complex","BigNumber"],wG=W(mE,bG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(mE,{number:function(s){return s>=1||s<=-1||r.predictable?jM(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new a(1).div(s).atanh()}})}),hE="acsc",NG=["typed","config","Complex","BigNumber"],_G=W(hE,NG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(hE,{number:function(s){return s<=-1||s>=1||r.predictable?kM(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new a(1).div(s).asin()}})}),pE="acsch",EG=["typed","BigNumber"],SG=W(pE,EG,t=>{var{typed:e,BigNumber:r}=t;return e(pE,{number:$M,Complex:function(a){return a.acsch()},BigNumber:function(a){return new r(1).div(a).asinh()}})}),vE="asec",AG=["typed","config","Complex","BigNumber"],DG=W(vE,AG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(vE,{number:function(s){return s<=-1||s>=1||r.predictable?LM(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new a(1).div(s).acos()}})}),gE="asech",CG=["typed","config","Complex","BigNumber"],TG=W(gE,CG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(gE,{number:function(s){if(s<=1&&s>=-1||r.predictable){var u=1/s;if(u>0||r.predictable)return zM(s);var l=Math.sqrt(u*u-1);return new n(Math.log(l-u),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new a(1).div(s).acosh()}})}),yE="asin",MG=["typed","config","Complex"],IG=W(yE,MG,t=>{var{typed:e,config:r,Complex:n}=t;return e(yE,{number:function(i){return i>=-1&&i<=1||r.predictable?Math.asin(i):new n(i,0).asin()},Complex:function(i){return i.asin()},BigNumber:function(i){return i.asin()}})}),PG="asinh",FG=["typed"],RG=W(PG,FG,t=>{var{typed:e}=t;return e("asinh",{number:VM,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),OG="atan",BG=["typed"],jG=W(OG,BG,t=>{var{typed:e}=t;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),xE="atan2",kG=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],$G=W(xE,kG,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:a,DenseMatrix:i,concat:s}=t,u=Fa({typed:e,equalScalar:n}),l=bn({typed:e}),o=n4({typed:e,equalScalar:n}),c=on({typed:e,equalScalar:n}),f=jr({typed:e,DenseMatrix:i}),d=Zt({typed:e,matrix:r,concat:s});return e(xE,{"number, number":Math.atan2,"BigNumber, BigNumber":(m,h)=>a.atan2(m,h)},d({scalar:"number | BigNumber",SS:o,DS:l,SD:u,Ss:c,sS:f}))}),bE="atanh",LG=["typed","config","Complex"],zG=W(bE,LG,t=>{var{typed:e,config:r,Complex:n}=t;return e(bE,{number:function(i){return i<=1&&i>=-1||r.predictable?UM(i):new n(i,0).atanh()},Complex:function(i){return i.atanh()},BigNumber:function(i){return i.atanh()}})}),ol=W("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(r=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(r,n.valueType())(n.value)})}}),wE="cos",VG=["typed"],UG=W(wE,VG,t=>{var{typed:e}=t,r=ol({typed:e});return e(wE,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},r)}),NE="cosh",qG=["typed"],HG=W(NE,qG,t=>{var{typed:e}=t;return e(NE,{number:kk,"Complex | BigNumber":r=>r.cosh()})}),_E="cot",GG=["typed","BigNumber"],WG=W(_E,GG,t=>{var{typed:e,BigNumber:r}=t,n=ol({typed:e});return e(_E,{number:qM,Complex:a=>a.cot(),BigNumber:a=>new r(1).div(a.tan())},n)}),EE="coth",QG=["typed","BigNumber"],XG=W(EE,QG,t=>{var{typed:e,BigNumber:r}=t;return e(EE,{number:HM,Complex:n=>n.coth(),BigNumber:n=>new r(1).div(n.tanh())})}),SE="csc",KG=["typed","BigNumber"],JG=W(SE,KG,t=>{var{typed:e,BigNumber:r}=t,n=ol({typed:e});return e(SE,{number:GM,Complex:a=>a.csc(),BigNumber:a=>new r(1).div(a.sin())},n)}),AE="csch",YG=["typed","BigNumber"],ZG=W(AE,YG,t=>{var{typed:e,BigNumber:r}=t;return e(AE,{number:WM,Complex:n=>n.csch(),BigNumber:n=>new r(1).div(n.sinh())})}),DE="sec",eW=["typed","BigNumber"],tW=W(DE,eW,t=>{var{typed:e,BigNumber:r}=t,n=ol({typed:e});return e(DE,{number:QM,Complex:a=>a.sec(),BigNumber:a=>new r(1).div(a.cos())},n)}),CE="sech",rW=["typed","BigNumber"],nW=W(CE,rW,t=>{var{typed:e,BigNumber:r}=t;return e(CE,{number:XM,Complex:n=>n.sech(),BigNumber:n=>new r(1).div(n.cosh())})}),TE="sin",aW=["typed"],iW=W(TE,aW,t=>{var{typed:e}=t,r=ol({typed:e});return e(TE,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},r)}),ME="sinh",sW=["typed"],oW=W(ME,sW,t=>{var{typed:e}=t;return e(ME,{number:KM,"Complex | BigNumber":r=>r.sinh()})}),IE="tan",uW=["typed"],lW=W(IE,uW,t=>{var{typed:e}=t,r=ol({typed:e});return e(IE,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},r)}),cW="tanh",fW=["typed"],dW=W(cW,fW,t=>{var{typed:e}=t;return e("tanh",{number:Lk,"Complex | BigNumber":r=>r.tanh()})}),PE="setCartesian",mW=["typed","size","subset","compareNatural","Index","DenseMatrix"],hW=W(PE,mW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(PE,{"Array | Matrix, Array | Matrix":function(l,o){var c=[];if(n(r(l),new i(0))!==0&&n(r(o),new i(0))!==0){var f=Ct(Array.isArray(l)?l:l.toArray()).sort(a),d=Ct(Array.isArray(o)?o:o.toArray()).sort(a);c=[];for(var m=0;m<f.length;m++)for(var h=0;h<d.length;h++)c.push([f[m],d[h]])}return Array.isArray(l)&&Array.isArray(o)?c:new s(c)}})}),FE="setDifference",pW=["typed","size","subset","compareNatural","Index","DenseMatrix"],vW=W(FE,pW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(FE,{"Array | Matrix, Array | Matrix":function(l,o){var c;if(n(r(l),new i(0))===0)c=[];else{if(n(r(o),new i(0))===0)return Ct(l.toArray());var f=Vu(Ct(Array.isArray(l)?l:l.toArray()).sort(a)),d=Vu(Ct(Array.isArray(o)?o:o.toArray()).sort(a));c=[];for(var m,h=0;h<f.length;h++){m=!1;for(var v=0;v<d.length;v++)if(a(f[h].value,d[v].value)===0&&f[h].identifier===d[v].identifier){m=!0;break}m||c.push(f[h])}}return Array.isArray(l)&&Array.isArray(o)?Im(c):new s(Im(c))}})}),RE="setDistinct",gW=["typed","size","subset","compareNatural","Index","DenseMatrix"],yW=W(RE,gW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(RE,{"Array | Matrix":function(l){var o;if(n(r(l),new i(0))===0)o=[];else{var c=Ct(Array.isArray(l)?l:l.toArray()).sort(a);o=[],o.push(c[0]);for(var f=1;f<c.length;f++)a(c[f],c[f-1])!==0&&o.push(c[f])}return Array.isArray(l)?o:new s(o)}})}),OE="setIntersect",xW=["typed","size","subset","compareNatural","Index","DenseMatrix"],bW=W(OE,xW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(OE,{"Array | Matrix, Array | Matrix":function(l,o){var c;if(n(r(l),new i(0))===0||n(r(o),new i(0))===0)c=[];else{var f=Vu(Ct(Array.isArray(l)?l:l.toArray()).sort(a)),d=Vu(Ct(Array.isArray(o)?o:o.toArray()).sort(a));c=[];for(var m=0;m<f.length;m++)for(var h=0;h<d.length;h++)if(a(f[m].value,d[h].value)===0&&f[m].identifier===d[h].identifier){c.push(f[m]);break}}return Array.isArray(l)&&Array.isArray(o)?Im(c):new s(Im(c))}})}),BE="setIsSubset",wW=["typed","size","subset","compareNatural","Index"],NW=W(BE,wW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(BE,{"Array | Matrix, Array | Matrix":function(u,l){if(n(r(u),new i(0))===0)return!0;if(n(r(l),new i(0))===0)return!1;for(var o=Vu(Ct(Array.isArray(u)?u:u.toArray()).sort(a)),c=Vu(Ct(Array.isArray(l)?l:l.toArray()).sort(a)),f,d=0;d<o.length;d++){f=!1;for(var m=0;m<c.length;m++)if(a(o[d].value,c[m].value)===0&&o[d].identifier===c[m].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),jE="setMultiplicity",_W=["typed","size","subset","compareNatural","Index"],EW=W(jE,_W,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(jE,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(u,l){if(n(r(l),new i(0))===0)return 0;for(var o=Ct(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<o.length;f++)a(o[f],u)===0&&c++;return c}})}),kE="setPowerset",SW=["typed","size","subset","compareNatural","Index"],AW=W(kE,SW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(kE,{"Array | Matrix":function(o){if(n(r(o),new i(0))===0)return[];for(var c=Ct(Array.isArray(o)?o:o.toArray()).sort(a),f=[],d=0;d.toString(2).length<=c.length;)f.push(s(c,d.toString(2).split("").reverse())),d++;return u(f)}});function s(l,o){for(var c=[],f=0;f<o.length;f++)o[f]==="1"&&c.push(l[f]);return c}function u(l){for(var o=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(o=l[f],l[f]=l[f+1],l[f+1]=o);return l}}),$E="setSize",DW=["typed","compareNatural"],CW=W($E,DW,t=>{var{typed:e,compareNatural:r}=t;return e($E,{"Array | Matrix":function(a){return Array.isArray(a)?Ct(a).length:Ct(a.toArray()).length},"Array | Matrix, boolean":function(a,i){if(i===!1||a.length===0)return Array.isArray(a)?Ct(a).length:Ct(a.toArray()).length;for(var s=Ct(Array.isArray(a)?a:a.toArray()).sort(r),u=1,l=1;l<s.length;l++)r(s[l],s[l-1])!==0&&u++;return u}})}),LE="setSymDifference",TW=["typed","size","concat","subset","setDifference","Index"],MW=W(LE,TW,t=>{var{typed:e,size:r,concat:n,subset:a,setDifference:i,Index:s}=t;return e(LE,{"Array | Matrix, Array | Matrix":function(l,o){if(a(r(l),new s(0))===0)return Ct(o);if(a(r(o),new s(0))===0)return Ct(l);var c=Ct(l),f=Ct(o);return n(i(c,f),i(f,c))}})}),zE="setUnion",IW=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],PW=W(zE,IW,t=>{var{typed:e,size:r,concat:n,subset:a,setIntersect:i,setSymDifference:s,Index:u}=t;return e(zE,{"Array | Matrix, Array | Matrix":function(o,c){if(a(r(o),new u(0))===0)return Ct(c);if(a(r(c),new u(0))===0)return Ct(o);var f=Ct(o),d=Ct(c);return n(s(f,d),i(f,d))}})}),VE="add",FW=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],RW=W(VE,FW,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:a,DenseMatrix:i,SparseMatrix:s,concat:u}=t,l=Cs({typed:e}),o=Oy({typed:e,equalScalar:a}),c=_o({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:r,concat:u});return e(VE,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(m,h,v)=>{for(var T=d(m,h),S=0;S<v.length;S++)T=d(T,v[S]);return T})},f({elop:n,DS:l,SS:o,Ss:c}))}),UE="hypot",OW=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],BW=W(UE,OW,t=>{var{typed:e,abs:r,addScalar:n,divideScalar:a,multiplyScalar:i,sqrt:s,smaller:u,isPositive:l}=t;return e(UE,{"... number | BigNumber":o,Array:o,Matrix:c=>o(Ct(c.toArray(),!0))});function o(c){for(var f=0,d=0,m=0;m<c.length;m++){if(hi(c[m]))throw new TypeError("Unexpected type of argument to hypot");var h=r(c[m]);u(d,h)?(f=i(f,i(a(d,h),a(d,h))),f=n(f,1),d=h):f=n(f,l(h)?i(a(h,d),a(h,d)):h)}return i(d,s(f))}}),qE="norm",jW=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],kW=W(qE,jW,t=>{var{typed:e,abs:r,add:n,pow:a,conj:i,sqrt:s,multiply:u,equalScalar:l,larger:o,smaller:c,matrix:f,ctranspose:d,eigs:m}=t;return e(qE,{number:Math.abs,Complex:function(g){return g.abs()},BigNumber:function(g){return g.abs()},boolean:function(g){return Math.abs(g)},Array:function(g){return x(f(g),2)},Matrix:function(g){return x(g,2)},"Array, number | BigNumber | string":function(g,N){return x(f(g),N)},"Matrix, number | BigNumber | string":function(g,N){return x(g,N)}});function h(w){var g=0;return w.forEach(function(N){var E=r(N);o(E,g)&&(g=E)},!0),g}function v(w){var g;return w.forEach(function(N){var E=r(N);(!g||c(E,g))&&(g=E)},!0),g||0}function T(w,g){if(g===Number.POSITIVE_INFINITY||g==="inf")return h(w);if(g===Number.NEGATIVE_INFINITY||g==="-inf")return v(w);if(g==="fro")return x(w,2);if(typeof g=="number"&&!isNaN(g)){if(!l(g,0)){var N=0;return w.forEach(function(E){N=n(a(r(E),g),N)},!0),a(N,1/g)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function S(w){var g=0;return w.forEach(function(N,E){g=n(g,u(N,i(N)))}),r(s(g))}function C(w){var g=[],N=0;return w.forEach(function(E,b){var D=b[1],I=n(g[D]||0,r(E));o(I,N)&&(N=I),g[D]=I},!0),N}function _(w){var g=w.size();if(g[0]!==g[1])throw new RangeError("Invalid matrix dimensions");var N=d(w),E=u(N,w),b=m(E).values.toArray(),D=b[b.length-1];return r(s(D))}function M(w){var g=[],N=0;return w.forEach(function(E,b){var D=b[0],I=n(g[D]||0,r(E));o(I,N)&&(N=I),g[D]=I},!0),N}function y(w,g){if(g===1)return C(w);if(g===Number.POSITIVE_INFINITY||g==="inf")return M(w);if(g==="fro")return S(w);if(g===2)return _(w);throw new Error("Unsupported parameter value "+g)}function x(w,g){var N=w.size();if(N.length===1)return T(w,g);if(N.length===2){if(N[0]&&N[1])return y(w,g);throw new RangeError("Invalid matrix dimensions")}}}),HE="dot",$W=["typed","addScalar","multiplyScalar","conj","size"],LW=W(HE,$W,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:a,size:i}=t;return e(HE,{"Array | DenseMatrix, Array | DenseMatrix":u,"SparseMatrix, SparseMatrix":l});function s(o,c){var f=i(o),d=i(c),m,h;if(f.length===1)m=f[0];else if(f.length===2&&f[1]===1)m=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(d.length===1)h=d[0];else if(d.length===2&&d[1]===1)h=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(m!==h)throw new RangeError("Vectors must have equal length ("+m+" != "+h+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function u(o,c){var f=s(o,c),d=Ye(o)?o._data:o,m=Ye(o)?o._datatype||o.getDataType():void 0,h=Ye(c)?c._data:c,v=Ye(c)?c._datatype||c.getDataType():void 0,T=i(o).length===2,S=i(c).length===2,C=r,_=n;if(m&&v&&m===v&&typeof m=="string"&&m!=="mixed"){var M=m;C=e.find(r,[M,M]),_=e.find(n,[M,M])}if(!T&&!S){for(var y=_(a(d[0]),h[0]),x=1;x<f;x++)y=C(y,_(a(d[x]),h[x]));return y}if(!T&&S){for(var w=_(a(d[0]),h[0][0]),g=1;g<f;g++)w=C(w,_(a(d[g]),h[g][0]));return w}if(T&&!S){for(var N=_(a(d[0][0]),h[0]),E=1;E<f;E++)N=C(N,_(a(d[E][0]),h[E]));return N}if(T&&S){for(var b=_(a(d[0][0]),h[0][0]),D=1;D<f;D++)b=C(b,_(a(d[D][0]),h[D][0]));return b}}function l(o,c){s(o,c);for(var f=o._index,d=o._values,m=c._index,h=c._values,v=0,T=r,S=n,C=0,_=0;C<f.length&&_<m.length;){var M=f[C],y=m[_];if(M<y){C++;continue}if(M>y){_++;continue}M===y&&(v=T(v,S(d[C],h[_])),C++,_++)}return v}}),zW="trace",VW=["typed","matrix","add"],UW=W(zW,VW,t=>{var{typed:e,matrix:r,add:n}=t;return e("trace",{Array:function(u){return a(r(u))},SparseMatrix:i,DenseMatrix:a,any:nt});function a(s){var u=s._size,l=s._data;switch(u.length){case 1:if(u[0]===1)return nt(l[0]);throw new RangeError("Matrix must be square (size: "+pt(u)+")");case 2:{var o=u[0],c=u[1];if(o===c){for(var f=0,d=0;d<o;d++)f=n(f,l[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+pt(u)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(u)+")")}}function i(s){var u=s._values,l=s._index,o=s._ptr,c=s._size,f=c[0],d=c[1];if(f===d){var m=0;if(u.length>0)for(var h=0;h<d;h++)for(var v=o[h],T=o[h+1],S=v;S<T;S++){var C=l[S];if(C===h){m=n(m,u[S]);break}if(C>h)break}return m}throw new RangeError("Matrix must be square (size: "+pt(c)+")")}}),GE="index",qW=["typed","Index"],HW=W(GE,qW,t=>{var{typed:e,Index:r}=t;return e(GE,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var i=a.map(function(u){return ut(u)?u.toNumber():Wt(u)||Ye(u)?u.map(function(l){return ut(l)?l.toNumber():l}):u}),s=new r;return r.apply(s,i),s}})}),_4=new Set(["end"]),GW="Node",WW=["mathWithTransform"],QW=W(GW,WW,t=>{var{mathWithTransform:e}=t;function r(a){for(var i of[..._4])if(a.has(i))throw new Error('Scope contains an illegal symbol, "'+i+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(i){return this.compile().evaluate(i)}compile(){var i=this._compile(e,{}),s={},u=null;function l(o){var c=wu(o);return r(c),i(c,s,u)}return{evaluate:l}}_compile(i,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(i){throw new Error("Cannot run forEach on a Node interface")}map(i){throw new Error("Cannot run map on a Node interface")}_ifNode(i){if(!Ht(i))throw new TypeError("Callback function must return a Node");return i}traverse(i){i(this,null,null);function s(u,l){u.forEach(function(o,c,f){l(o,c,f),s(o,l)})}s(this,i)}transform(i){function s(u,l,o){var c=i(u,l,o);return c!==u?c:u.map(s)}return s(this,null,null)}filter(i){var s=[];return this.traverse(function(u,l,o){i(u,l,o)&&s.push(u)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(i){return i.cloneDeep()})}equals(i){return i?this.type===i.type&&Ei(this,i):!1}toString(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toString(i)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toHTML(i)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toTex(i)}_toTex(i){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(i){if(i&&typeof i=="object")switch(typeof i.handler){case"object":case"undefined":return;case"function":return i.handler(this,i);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Mn(t){return t&&t.isIndexError?new Ia(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function E4(t){var{subset:e}=t;return function(n,a){try{if(Array.isArray(n))return e(n,a);if(n&&typeof n.subset=="function")return n.subset(a);if(typeof n=="string")return e(n,a);if(typeof n=="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return En(n,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(i){throw Mn(i)}}}var rd="AccessorNode",XW=["subset","Node"],KW=W(rd,XW,t=>{var{subset:e,Node:r}=t,n=E4({subset:e});function a(s){return!(co(s)||aa(s)||Nt(s)||xs(s)||Ih(s)||_i(s)||Qr(s))}class i extends r{constructor(u,l){if(super(),!Ht(u))throw new TypeError('Node expected for parameter "object"');if(!rl(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=u,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return rd}get isAccessorNode(){return!0}_compile(u,l){var o=this.object._compile(u,l),c=this.index._compile(u,l);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(m,h,v){return En(o(m,h,v),f)}}else return function(m,h,v){var T=o(m,h,v),S=c(m,h,T);return n(T,S)}}forEach(u){u(this.object,"object",this),u(this.index,"index",this)}map(u){return new i(this._ifNode(u(this.object,"object",this)),this._ifNode(u(this.index,"index",this)))}clone(){return new i(this.object,this.index)}_toString(u){var l=this.object.toString(u);return a(this.object)&&(l="("+l+")"),l+this.index.toString(u)}_toHTML(u){var l=this.object.toHTML(u);return a(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(u)}_toTex(u){var l=this.object.toTex(u);return a(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(u)}toJSON(){return{mathjs:rd,object:this.object,index:this.index}}static fromJSON(u){return new i(u.object,u.index)}}return Mr(i,"name",rd),i},{isClass:!0,isNode:!0}),nd="ArrayNode",JW=["Node"],YW=W(nd,JW,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),this.items=a||[],!Array.isArray(this.items)||!this.items.every(Ht))throw new TypeError("Array containing Nodes expected")}get type(){return nd}get isArrayNode(){return!0}_compile(a,i){var s=ls(this.items,function(o){return o._compile(a,i)}),u=a.config.matrix!=="Array";if(u){var l=a.matrix;return function(c,f,d){return l(ls(s,function(m){return m(c,f,d)}))}}else return function(c,f,d){return ls(s,function(m){return m(c,f,d)})}}forEach(a){for(var i=0;i<this.items.length;i++){var s=this.items[i];a(s,"items["+i+"]",this)}}map(a){for(var i=[],s=0;s<this.items.length;s++)i[s]=this._ifNode(a(this.items[s],"items["+s+"]",this));return new r(i)}clone(){return new r(this.items.slice(0))}_toString(a){var i=this.items.map(function(s){return s.toString(a)});return"["+i.join(", ")+"]"}toJSON(){return{mathjs:nd,items:this.items}}static fromJSON(a){return new r(a.items)}_toHTML(a){var i=this.items.map(function(s){return s.toHTML(a)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){function i(s,u){var l=s.some(aa)&&!s.every(aa),o=u||l,c=o?"&":"\\\\",f=s.map(function(d){return d.items?i(d.items,!u):d.toTex(a)}).join(c);return l||!o||o&&!u?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return i(this.items,!1)}}return Mr(r,"name",nd),r},{isClass:!0,isNode:!0});function ZW(t){var{subset:e,matrix:r}=t;return function(a,i,s){try{if(Array.isArray(a)){var u=r(a).subset(i,s).valueOf();return u.forEach((l,o)=>{a[o]=l}),a}else{if(a&&typeof a.subset=="function")return a.subset(i,s);if(typeof a=="string")return e(a,i,s);if(typeof a=="object"){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return ku(a,i.getObjectProperty(),s),a}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Mn(l)}}}var Ea=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function ad(t,e){if(!e||e!=="auto")return t;for(var r=t;_i(r);)r=r.content;return r}function Qt(t,e,r,n){var a=t;e!=="keep"&&(a=t.getContent());for(var i=a.getIdentifier(),s=null,u=0;u<Ea.length;u++)if(i in Ea[u]){s=u;break}if(i==="OperatorNode:multiply"&&a.implicit&&r!=="show"){var l=ad(a.args[0],e);!(Nt(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&bg(ad(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&bg(ad(l.args[0],e))&&Nt(ad(l.args[1])))&&(s+=1)}return s}function jl(t,e){var r=t;e!=="keep"&&(r=t.getContent());var n=r.getIdentifier(),a=Qt(r,e);if(a===null)return null;var i=Ea[a][n];if(He(i,"associativity")){if(i.associativity==="left")return"left";if(i.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+i.associativity+"'.")}return null}function ev(t,e,r){var n=r!=="keep"?t.getContent():t,a=r!=="keep"?t.getContent():e,i=n.getIdentifier(),s=a.getIdentifier(),u=Qt(n,r);if(u===null)return null;var l=Ea[u][i];if(He(l,"associativeWith")&&l.associativeWith instanceof Array){for(var o=0;o<l.associativeWith.length;o++)if(l.associativeWith[o]===s)return!0;return!1}return null}function eQ(t){var e="OperatorNode:"+t;for(var r of Ea)if(e in r)return r[e].op;return null}var id="AssignmentNode",tQ=["subset","?matrix","Node"],rQ=W(id,tQ,t=>{var{subset:e,matrix:r,Node:n}=t,a=E4({subset:e}),i=ZW({subset:e,matrix:r});function s(l,o,c){o||(o="keep");var f=Qt(l,o,c),d=Qt(l.value,o,c);return o==="all"||d!==null&&d<=f}class u extends n{constructor(o,c,f){if(super(),this.object=o,this.index=f?c:null,this.value=f||c,!Qr(o)&&!co(o))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Qr(o)&&o.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!rl(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ht(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return id}get isAssignmentNode(){return!0}_compile(o,c){var f=this.object._compile(o,c),d=this.index?this.index._compile(o,c):null,m=this.value._compile(o,c),h=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(M,y,x){var w=f(M,y,x),g=m(M,y,x);return ku(w,v,g),g}}else{if(Qr(this.object))return function(M,y,x){var w=f(M,y,x),g=m(M,y,x),N=d(M,y,w);return M.set(h,i(w,N,g)),g};var T=this.object.object._compile(o,c);if(this.object.index.isObjectProperty()){var S=this.object.index.getObjectProperty();return function(M,y,x){var w=T(M,y,x),g=En(w,S),N=d(M,y,g),E=m(M,y,x);return ku(w,S,i(g,N,E)),E}}else{var C=this.object.index._compile(o,c);return function(M,y,x){var w=T(M,y,x),g=C(M,y,w),N=a(w,g),E=d(M,y,N),b=m(M,y,x);return i(w,g,i(N,E,b)),b}}}else{if(!Qr(this.object))throw new TypeError("SymbolNode expected as object");return function(M,y,x){var w=m(M,y,x);return M.set(h,w),w}}}forEach(o){o(this.object,"object",this),this.index&&o(this.index,"index",this),o(this.value,"value",this)}map(o){var c=this._ifNode(o(this.object,"object",this)),f=this.index?this._ifNode(o(this.index,"index",this)):null,d=this._ifNode(o(this.value,"value",this));return new u(c,f,d)}clone(){return new u(this.object,this.index,this.value)}_toString(o){var c=this.object.toString(o),f=this.index?this.index.toString(o):"",d=this.value.toString(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:id,object:this.object,index:this.index,value:this.value}}static fromJSON(o){return new u(o.object,o.index,o.value)}_toHTML(o){var c=this.object.toHTML(o),f=this.index?this.index.toHTML(o):"",d=this.value.toHTML(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(o){var c=this.object.toTex(o),f=this.index?this.index.toTex(o):"",d=this.value.toTex(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return Mr(u,"name",id),u},{isClass:!0,isNode:!0}),sd="BlockNode",nQ=["ResultSet","Node"],aQ=W(sd,nQ,t=>{var{ResultSet:e,Node:r}=t;class n extends r{constructor(i){if(super(),!Array.isArray(i))throw new Error("Array expected");this.blocks=i.map(function(s){var u=s&&s.node,l=s&&s.visible!==void 0?s.visible:!0;if(!Ht(u))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:u,visible:l}})}get type(){return sd}get isBlockNode(){return!0}_compile(i,s){var u=ls(this.blocks,function(l){return{evaluate:l.node._compile(i,s),visible:l.visible}});return function(o,c,f){var d=[];return iM(u,function(h){var v=h.evaluate(o,c,f);h.visible&&d.push(v)}),new e(d)}}forEach(i){for(var s=0;s<this.blocks.length;s++)i(this.blocks[s].node,"blocks["+s+"].node",this)}map(i){for(var s=[],u=0;u<this.blocks.length;u++){var l=this.blocks[u],o=this._ifNode(i(l.node,"blocks["+u+"].node",this));s[u]={node:o,visible:l.visible}}return new n(s)}clone(){var i=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(i)}_toString(i){return this.blocks.map(function(s){return s.node.toString(i)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:sd,blocks:this.blocks}}static fromJSON(i){return new n(i.blocks)}_toHTML(i){return this.blocks.map(function(s){return s.node.toHTML(i)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(i){return this.blocks.map(function(s){return s.node.toTex(i)+(s.visible?"":";")}).join(`\\;\\;
`)}}return Mr(n,"name",sd),n},{isClass:!0,isNode:!0}),od="ConditionalNode",iQ=["Node"],sQ=W(od,iQ,t=>{var{Node:e}=t;function r(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(ut(a))return!a.isZero();if(hi(a))return!!(a.re||a.im);if(Gn(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+Xt(a)+'"')}class n extends e{constructor(i,s,u){if(super(),!Ht(i))throw new TypeError("Parameter condition must be a Node");if(!Ht(s))throw new TypeError("Parameter trueExpr must be a Node");if(!Ht(u))throw new TypeError("Parameter falseExpr must be a Node");this.condition=i,this.trueExpr=s,this.falseExpr=u}get type(){return od}get isConditionalNode(){return!0}_compile(i,s){var u=this.condition._compile(i,s),l=this.trueExpr._compile(i,s),o=this.falseExpr._compile(i,s);return function(f,d,m){return r(u(f,d,m))?l(f,d,m):o(f,d,m)}}forEach(i){i(this.condition,"condition",this),i(this.trueExpr,"trueExpr",this),i(this.falseExpr,"falseExpr",this)}map(i){return new n(this._ifNode(i(this.condition,"condition",this)),this._ifNode(i(this.trueExpr,"trueExpr",this)),this._ifNode(i(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=Qt(this,s,i&&i.implicit),l=this.condition.toString(i),o=Qt(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||o!==null&&o<=u)&&(l="("+l+")");var c=this.trueExpr.toString(i),f=Qt(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=u)&&(c="("+c+")");var d=this.falseExpr.toString(i),m=Qt(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||m!==null&&m<=u)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:od,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(i){return new n(i.condition,i.trueExpr,i.falseExpr)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=Qt(this,s,i&&i.implicit),l=this.condition.toHTML(i),o=Qt(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||o!==null&&o<=u)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(i),f=Qt(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=u)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(i),m=Qt(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||m!==null&&m<=u)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(i){return"\\begin{cases} {"+this.trueExpr.toTex(i)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(i)+"}\\\\{"+this.falseExpr.toTex(i)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Mr(n,"name",od),n},{isClass:!0,isNode:!0}),kg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oQ={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},uQ={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},lQ=function(e,r){return kg({},e,r)},cQ=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.preserveFormatting,n=r===void 0?!1:r,a=e.escapeMapFn,i=a===void 0?lQ:a,s=String(t),u="",l=i(kg({},oQ),n?kg({},uQ):{}),o=Object.keys(l),c=function(){var d=!1;o.forEach(function(m,h){d||s.length>=m.length&&s.slice(0,m.length)===m&&(u+=l[o[h]],s=s.slice(m.length,s.length),d=!0)}),d||(u+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return u};const fQ=Xm(cQ);var $g={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Dt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},WE={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Dt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Dt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Dt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Dt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Dt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Dt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Dt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Dt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Dt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Dt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Dt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Dt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Dt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Dt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Dt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Dt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Dt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Dt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Dt.and,"${args[1]}\\right)")},not:{1:Dt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Dt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Dt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Dt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Dt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Dt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Dt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Dt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Dt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Dt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Dt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Dt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Dt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Dt.to,"${args[1]}\\right)")},numeric:function(e,r){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat($g.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},dQ="\\mathrm{${name}}\\left(${args}\\right)",QE={deg:"^\\circ"};function Lg(t){return fQ(t,{preserveFormatting:!0})}function S4(t,e){return e=typeof e>"u"?!1:e,e?He(QE,t)?QE[t]:"\\mathrm{"+Lg(t)+"}":He($g,t)?$g[t]:Lg(t)}var ud="ConstantNode",mQ=["Node"],hQ=W(ud,mQ,t=>{var{Node:e}=t;class r extends e{constructor(a){super(),this.value=a}get type(){return ud}get isConstantNode(){return!0}_compile(a,i){var s=this.value;return function(){return s}}forEach(a){}map(a){return this.clone()}clone(){return new r(this.value)}_toString(a){return pt(this.value,a)}_toHTML(a){var i=this._toString(a);switch(Xt(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+i+"</span>";case"string":return'<span class="math-string">'+i+"</span>";case"boolean":return'<span class="math-boolean">'+i+"</span>";case"null":return'<span class="math-null-symbol">'+i+"</span>";case"undefined":return'<span class="math-undefined">'+i+"</span>";default:return'<span class="math-symbol">'+i+"</span>"}}toJSON(){return{mathjs:ud,value:this.value}}static fromJSON(a){return new r(a.value)}_toTex(a){var i=this._toString(a),s=Xt(this.value);switch(s){case"string":return"\\mathtt{"+Lg(i)+"}";case"number":case"BigNumber":{var u=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!u)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=i.toLowerCase().indexOf("e");return l!==-1?i.substring(0,l)+"\\cdot10^{"+i.substring(l+1)+"}":i}case"bigint":return i.toString();case"Fraction":return this.value.toLatex();default:return i}}}return Mr(r,"name",ud),r},{isClass:!0,isNode:!0}),ld="FunctionAssignmentNode",pQ=["typed","Node"],vQ=W(ld,pQ,t=>{var{typed:e,Node:r}=t;function n(i,s,u){var l=Qt(i,s,u),o=Qt(i.expr,s,u);return s==="all"||o!==null&&o<=l}class a extends r{constructor(s,u,l){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(u))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ht(l))throw new TypeError('Node expected for parameter "expr"');if(_4.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var o=new Set;for(var c of u){var f=typeof c=="string"?c:c.name;if(o.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));o.add(f)}this.name=s,this.params=u.map(function(d){return d&&d.name||d}),this.types=u.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return ld}get isFunctionAssignmentNode(){return!0}_compile(s,u){var l=Object.create(u);iM(this.params,function(v){l[v]=!0});var o=this.expr,c=o._compile(s,l),f=this.name,d=this.params,m=WN(this.types,","),h=f+"("+WN(this.params,", ")+")";return function(T,S,C){var _={};_[m]=function(){for(var y=Object.create(S),x=0;x<d.length;x++)y[d[x]]=arguments[x];return c(T,y,C)};var M=e(f,_);return M.syntax=h,M.expr=o.toString(),T.set(f,M),M}}forEach(s){s(this.expr,"expr",this)}map(s){var u=this._ifNode(s(this.expr,"expr",this));return new a(this.name,this.params.slice(0),u)}clone(){return new a(this.name,this.params.slice(0),this.expr)}_toString(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toString(s);return n(this,u,s&&s.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var s=this.types;return{mathjs:ld,name:this.name,params:this.params.map(function(u,l){return{name:u,type:s[l]}}),expr:this.expr}}static fromJSON(s){return new a(s.name,s.params,s.expr)}_toHTML(s){for(var u=s&&s.parenthesis?s.parenthesis:"keep",l=[],o=0;o<this.params.length;o++)l.push('<span class="math-symbol math-parameter">'+la(this.params[o])+"</span>");var c=this.expr.toHTML(s);return n(this,u,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+la(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toTex(s);return n(this,u,s&&s.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(S4).join(",")+"\\right)="+l}}return Mr(a,"name",ld),a},{isClass:!0,isNode:!0}),cd="IndexNode",gQ=["Node","size"],yQ=W(cd,gQ,t=>{var{Node:e,size:r}=t;class n extends e{constructor(i,s){if(super(),this.dimensions=i,this.dotNotation=s||!1,!Array.isArray(i)||!i.every(Ht))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return cd}get isIndexNode(){return!0}_compile(i,s){var u=ls(this.dimensions,function(o,c){var f=o.filter(h=>h.isSymbolNode&&h.name==="end").length>0;if(f){var d=Object.create(s);d.end=!0;var m=o._compile(i,d);return function(v,T,S){if(!Ye(S)&&!Wt(S)&&!yr(S))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Xt(S));var C=r(S),_=Object.create(T);return _.end=C[c],m(v,_,S)}}else return o._compile(i,s)}),l=En(i,"index");return function(c,f,d){var m=ls(u,function(h){return h(c,f,d)});return l(...m)}}forEach(i){for(var s=0;s<this.dimensions.length;s++)i(this.dimensions[s],"dimensions["+s+"]",this)}map(i){for(var s=[],u=0;u<this.dimensions.length;u++)s[u]=this._ifNode(i(this.dimensions[u],"dimensions["+u+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Nt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(i){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:cd,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(i){return new n(i.dimensions,i.dotNotation)}_toHTML(i){for(var s=[],u=0;u<this.dimensions.length;u++)s[u]=this.dimensions[u].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+la(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){var s=this.dimensions.map(function(u){return u.toTex(i)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return Mr(n,"name",cd),n},{isClass:!0,isNode:!0}),fd="ObjectNode",xQ=["Node"],bQ=W(fd,xQ,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),this.properties=a||{},a&&(typeof a!="object"||!Object.keys(a).every(function(i){return Ht(a[i])})))throw new TypeError("Object containing Nodes expected")}get type(){return fd}get isObjectNode(){return!0}_compile(a,i){var s={};for(var u in this.properties)if(He(this.properties,u)){var l=cu(u),o=JSON.parse(l),c=En(this.properties,u);s[o]=c._compile(a,i)}return function(d,m,h){var v={};for(var T in s)He(s,T)&&(v[T]=s[T](d,m,h));return v}}forEach(a){for(var i in this.properties)He(this.properties,i)&&a(this.properties[i],"properties["+cu(i)+"]",this)}map(a){var i={};for(var s in this.properties)He(this.properties,s)&&(i[s]=this._ifNode(a(this.properties[s],"properties["+cu(s)+"]",this)));return new r(i)}clone(){var a={};for(var i in this.properties)He(this.properties,i)&&(a[i]=this.properties[i]);return new r(a)}_toString(a){var i=[];for(var s in this.properties)He(this.properties,s)&&i.push(cu(s)+": "+this.properties[s].toString(a));return"{"+i.join(", ")+"}"}toJSON(){return{mathjs:fd,properties:this.properties}}static fromJSON(a){return new r(a.properties)}_toHTML(a){var i=[];for(var s in this.properties)He(this.properties,s)&&i.push('<span class="math-symbol math-property">'+la(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(a));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(a){var i=[];for(var s in this.properties)He(this.properties,s)&&i.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(a)+"\\\\");var u="\\left\\{\\begin{array}{ll}"+i.join(`
`)+"\\end{array}\\right\\}";return u}}return Mr(r,"name",fd),r},{isClass:!0,isNode:!0});function Gl(t,e){return new M3(t,new Ch(e),new Set(Object.keys(e)))}var dd="OperatorNode",wQ=["Node"],NQ=W(dd,wQ,t=>{var{Node:e}=t;function r(i,s){var u=i;if(s==="auto")for(;_i(u);)u=u.content;return Nt(u)?!0:br(u)?r(u.args[0],s):!1}function n(i,s,u,l,o){var c=Qt(i,s,u),f=jl(i,s);if(s==="all"||l.length>2&&i.getIdentifier()!=="OperatorNode:add"&&i.getIdentifier()!=="OperatorNode:multiply")return l.map(function(E){switch(E.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var m=Qt(l[0],s,u,i);if(o&&m!==null){var h,v;if(s==="keep"?(h=l[0].getIdentifier(),v=i.getIdentifier()):(h=l[0].getContent().getIdentifier(),v=i.getContent().getIdentifier()),Ea[c][v].latexLeftParens===!1){d=[!1];break}if(Ea[m][h].latexParens===!1){d=[!1];break}}if(m===null){d=[!1];break}if(m<=c){d=[!0];break}d=[!1]}break;case 2:{var T,S=Qt(l[0],s,u,i),C=ev(i,l[0],s);S===null?T=!1:S===c&&f==="right"&&!C||S<c?T=!0:T=!1;var _,M=Qt(l[1],s,u,i),y=ev(i,l[1],s);if(M===null?_=!1:M===c&&f==="left"&&!y||M<c?_=!0:_=!1,o){var x,w,g;s==="keep"?(x=i.getIdentifier(),w=i.args[0].getIdentifier(),g=i.args[1].getIdentifier()):(x=i.getContent().getIdentifier(),w=i.args[0].getContent().getIdentifier(),g=i.args[1].getContent().getIdentifier()),S!==null&&(Ea[c][x].latexLeftParens===!1&&(T=!1),Ea[S][w].latexParens===!1&&(T=!1)),M!==null&&(Ea[c][x].latexRightParens===!1&&(_=!1),Ea[M][g].latexParens===!1&&(_=!1))}d=[T,_]}break;default:(i.getIdentifier()==="OperatorNode:add"||i.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(E){var b=Qt(E,s,u,i),D=ev(i,E,s),I=jl(E,s);return b===null?!1:c===b&&f===I&&!D?!0:b<c}));break}if(l.length>=2&&i.getIdentifier()==="OperatorNode:multiply"&&i.implicit&&s!=="all"&&u==="hide")for(var N=1;N<d.length;++N)r(l[N],s)&&!d[N-1]&&(s!=="keep"||!_i(l[N-1]))&&(d[N]=!0);return d}class a extends e{constructor(s,u,l,o,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof u!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(Ht))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=o===!0,this.isPercentage=c===!0,this.op=s,this.fn=u,this.args=l||[]}get type(){return dd}get isOperatorNode(){return!0}_compile(s,u){if(typeof this.fn!="string"||!Dy(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=En(s,this.fn),o=ls(this.args,function(h){return h._compile(s,u)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(v,T,S){return l(c,s,Gl(v,T))}}else if(o.length===1){var f=o[0];return function(v,T,S){return l(f(v,T,S))}}else if(o.length===2){var d=o[0],m=o[1];return function(v,T,S){return l(d(v,T,S),m(v,T,S))}}else return function(v,T,S){return l.apply(null,ls(o,function(C){return C(v,T,S)}))}}forEach(s){for(var u=0;u<this.args.length;u++)s(this.args[u],"args["+u+"]",this)}map(s){for(var u=[],l=0;l<this.args.length;l++)u[l]=this._ifNode(s(this.args[l],"args["+l+"]",this));return new a(this.op,this.fn,u,this.implicit,this.isPercentage)}clone(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,u,l,o,!1);if(o.length===1){var f=jl(this,u),d=o[0].toString(s);c[0]&&(d="("+d+")");var m=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(m?" ":"")+d:f==="left"?d+(m?" ":"")+this.op:d+this.op}else if(o.length===2){var h=o[0].toString(s),v=o[1].toString(s);return c[0]&&(h="("+h+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?h+" "+v:h+" "+this.op+" "+v}else if(o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var T=o.map(function(S,C){return S=S.toString(s),c[C]&&(S="("+S+")"),S});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?T.join(" "):T.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:dd,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new a(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,u,l,o,!1);if(o.length===1){var f=jl(this,u),d=o[0].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+la(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+la(this.op)+"</span>"}else if(o.length===2){var m=o[0].toHTML(s),h=o[1].toHTML(s);return c[0]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?m+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+h:m+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+la(this.op)+"</span>"+h}else{var v=o.map(function(T,S){return T=T.toHTML(s),c[S]&&(T='<span class="math-parenthesis math-round-parenthesis">(</span>'+T+'<span class="math-parenthesis math-round-parenthesis">)</span>'),T});return o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+la(this.op)+"</span>"):'<span class="math-function">'+la(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var u=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,u,l,o,!0),f=Dt[this.fn];if(f=typeof f>"u"?this.op:f,o.length===1){var d=jl(this,u),m=o[0].toTex(s);return c[0]&&(m="\\left(".concat(m,"\\right)")),d==="right"?f+m:m+f}else if(o.length===2){var h=o[0],v=h.toTex(s);c[0]&&(v="\\left(".concat(v,"\\right)"));var T=o[1],S=T.toTex(s);c[1]&&(S="\\left(".concat(S,"\\right)"));var C;switch(u==="keep"?C=h.getIdentifier():C=h.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+S+"}";case"OperatorNode:pow":switch(v="{"+v+"}",S="{"+S+"}",C){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return v+"~"+S}return v+f+S}else if(o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var _=o.map(function(M,y){return M=M.toTex(s),c[y]&&(M="\\left(".concat(M,"\\right)")),M});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?_.join("~"):_.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+o.map(function(M){return M.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Mr(a,"name",dd),a},{isClass:!0,isNode:!0}),md="ParenthesisNode",_Q=["Node"],EQ=W(md,_Q,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),!Ht(a))throw new TypeError('Node expected for parameter "content"');this.content=a}get type(){return md}get isParenthesisNode(){return!0}_compile(a,i){return this.content._compile(a,i)}getContent(){return this.content.getContent()}forEach(a){a(this.content,"content",this)}map(a){var i=a(this.content,"content",this);return new r(i)}clone(){return new r(this.content)}_toString(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"("+this.content.toString(a)+")":this.content.toString(a)}toJSON(){return{mathjs:md,content:this.content}}static fromJSON(a){return new r(a.content)}_toHTML(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(a)}_toTex(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"\\left(".concat(this.content.toTex(a),"\\right)"):this.content.toTex(a)}}return Mr(r,"name",md),r},{isClass:!0,isNode:!0}),hd="RangeNode",SQ=["Node"],AQ=W(hd,SQ,t=>{var{Node:e}=t;function r(a,i,s){var u=Qt(a,i,s),l={},o=Qt(a.start,i,s);if(l.start=o!==null&&o<=u||i==="all",a.step){var c=Qt(a.step,i,s);l.step=c!==null&&c<=u||i==="all"}var f=Qt(a.end,i,s);return l.end=f!==null&&f<=u||i==="all",l}class n extends e{constructor(i,s,u){if(super(),!Ht(i))throw new TypeError("Node expected");if(!Ht(s))throw new TypeError("Node expected");if(u&&!Ht(u))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=i,this.end=s,this.step=u||null}get type(){return hd}get isRangeNode(){return!0}needsEnd(){var i=this.filter(function(s){return Qr(s)&&s.name==="end"});return i.length>0}_compile(i,s){var u=i.range,l=this.start._compile(i,s),o=this.end._compile(i,s);if(this.step){var c=this.step._compile(i,s);return function(d,m,h){return u(l(d,m,h),o(d,m,h),c(d,m,h))}}else return function(d,m,h){return u(l(d,m,h),o(d,m,h))}}forEach(i){i(this.start,"start",this),i(this.end,"end",this),this.step&&i(this.step,"step",this)}map(i){return new n(this._ifNode(i(this.start,"start",this)),this._ifNode(i(this.end,"end",this)),this.step&&this._ifNode(i(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=r(this,s,i&&i.implicit),l,o=this.start.toString(i);if(u.start&&(o="("+o+")"),l=o,this.step){var c=this.step.toString(i);u.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(i);return u.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:hd,start:this.start,end:this.end,step:this.step}}static fromJSON(i){return new n(i.start,i.end,i.step)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=r(this,s,i&&i.implicit),l,o=this.start.toHTML(i);if(u.start&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=o,this.step){var c=this.step.toHTML(i);u.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(i);return u.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(i){var s=i&&i.parenthesis?i.parenthesis:"keep",u=r(this,s,i&&i.implicit),l=this.start.toTex(i);if(u.start&&(l="\\left(".concat(l,"\\right)")),this.step){var o=this.step.toTex(i);u.step&&(o="\\left(".concat(o,"\\right)")),l+=":"+o}var c=this.end.toTex(i);return u.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return Mr(n,"name",hd),n},{isClass:!0,isNode:!0}),pd="RelationalNode",DQ=["Node"],CQ=W(pd,DQ,t=>{var{Node:e}=t,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(i,s){if(super(),!Array.isArray(i))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(i.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=i,this.params=s}get type(){return pd}get isRelationalNode(){return!0}_compile(i,s){var u=this,l=this.params.map(o=>o._compile(i,s));return function(c,f,d){for(var m,h=l[0](c,f,d),v=0;v<u.conditionals.length;v++){m=h,h=l[v+1](c,f,d);var T=En(i,u.conditionals[v]);if(!T(m,h))return!1}return!0}}forEach(i){this.params.forEach((s,u)=>i(s,"params["+u+"]",this),this)}map(i){return new n(this.conditionals.slice(),this.params.map((s,u)=>this._ifNode(i(s,"params["+u+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",u=Qt(this,s,i&&i.implicit),l=this.params.map(function(f,d){var m=Qt(f,s,i&&i.implicit);return s==="all"||m!==null&&m<=u?"("+f.toString(i)+")":f.toString(i)}),o=l[0],c=0;c<this.conditionals.length;c++)o+=" "+r[this.conditionals[c]],o+=" "+l[c+1];return o}toJSON(){return{mathjs:pd,conditionals:this.conditionals,params:this.params}}static fromJSON(i){return new n(i.conditionals,i.params)}_toHTML(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",u=Qt(this,s,i&&i.implicit),l=this.params.map(function(f,d){var m=Qt(f,s,i&&i.implicit);return s==="all"||m!==null&&m<=u?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(i)}),o=l[0],c=0;c<this.conditionals.length;c++)o+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+la(r[this.conditionals[c]])+"</span>"+l[c+1];return o}_toTex(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",u=Qt(this,s,i&&i.implicit),l=this.params.map(function(f,d){var m=Qt(f,s,i&&i.implicit);return s==="all"||m!==null&&m<=u?"\\left("+f.toTex(i)+"\right)":f.toTex(i)}),o=l[0],c=0;c<this.conditionals.length;c++)o+=Dt[this.conditionals[c]]+l[c+1];return o}}return Mr(n,"name",pd),n},{isClass:!0,isNode:!0}),TQ="SymbolNode",MQ=["math","?Unit","Node"],IQ=W(TQ,MQ,t=>{var{math:e,Unit:r,Node:n}=t;function a(s){return r?r.isValuelessUnit(s):!1}class i extends n{constructor(u){if(super(),typeof u!="string")throw new TypeError('String expected for parameter "name"');this.name=u}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(u,l){var o=this.name;if(l[o]===!0)return function(f,d,m){return En(d,o)};if(o in u)return function(f,d,m){return f.has(o)?f.get(o):En(u,o)};var c=a(o);return function(f,d,m){return f.has(o)?f.get(o):c?new r(null,o):i.onUndefinedSymbol(o)}}forEach(u){}map(u){return this.clone()}static onUndefinedSymbol(u){throw new Error("Undefined symbol "+u)}clone(){return new i(this.name)}_toString(u){return this.name}_toHTML(u){var l=la(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(u){return new i(u.name)}_toTex(u){var l=!1;typeof e[this.name]>"u"&&a(this.name)&&(l=!0);var o=S4(this.name,l);return o[0]==="\\"?o:" "+o}}return i},{isClass:!0,isNode:!0}),vd="FunctionNode",PQ=["math","Node","SymbolNode"],FQ=W(vd,PQ,t=>{var e,{math:r,Node:n,SymbolNode:a}=t,i=l=>pt(l,{truncate:78});function s(l,o,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,m=0,h;(h=d.exec(l))!==null;)if(f+=l.substring(m,h.index),m=h.index,h[0]==="$$")f+="$",m++;else{m+=h[0].length;var v=o[h[1]];if(!v)throw new ReferenceError("Template: Property "+h[1]+" does not exist.");if(h[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if(Ht(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(T,S){if(Ht(T))return T.toTex(c);throw new TypeError("Template: "+h[1]+"["+S+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+h[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+h[1]+" has to be a Node, String or array of Nodes")}else if(Ht(v[h[2]]&&v[h[2]]))f+=v[h[2]].toTex(c);else throw new TypeError("Template: "+h[1]+"["+h[2]+"] is not a Node.")}return f+=l.slice(m),f}class u extends n{constructor(o,c){if(super(),typeof o=="string"&&(o=new a(o)),!Ht(o))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Ht))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=o,this.args=c||[]}get name(){return this.fn.name||""}get type(){return vd}get isFunctionNode(){return!0}_compile(o,c){var f=this.args.map(g=>g._compile(o,c));if(Qr(this.fn)){var d=this.fn.name;if(c[d]){var S=this.args;return function(N,E,b){var D=En(E,d);if(typeof D!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(i(D)));if(D.rawArgs)return D(S,o,Gl(N,E));var I=f.map(F=>F(N,E,b));return D.apply(D,I)}}else{var m=d in o?En(o,d):void 0,h=typeof m=="function"&&m.rawArgs===!0,v=g=>{var N;if(g.has(d))N=g.get(d);else if(d in o)N=En(o,d);else return u.onUndefinedFunction(d);if(typeof N=="function")return N;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(i(N)))};if(h){var T=this.args;return function(N,E,b){var D=v(N);if(D.rawArgs===!0)return D(T,o,Gl(N,E));var I=f.map(F=>F(N,E,b));return D(...I)}}else switch(f.length){case 0:return function(N,E,b){var D=v(N);return D()};case 1:return function(N,E,b){var D=v(N),I=f[0];return D(I(N,E,b))};case 2:return function(N,E,b){var D=v(N),I=f[0],F=f[1];return D(I(N,E,b),F(N,E,b))};default:return function(N,E,b){var D=v(N),I=f.map(F=>F(N,E,b));return D(...I)}}}}else if(co(this.fn)&&rl(this.fn.index)&&this.fn.index.isObjectProperty()){var C=this.fn.object._compile(o,c),_=this.fn.index.getObjectProperty(),M=this.args;return function(N,E,b){var D=C(N,E,b),I=nk(D,_);if(I!=null&&I.rawArgs)return I(M,o,Gl(N,E));var F=f.map(O=>O(N,E,b));return I.apply(D,F)}}else{var y=this.fn.toString(),x=this.fn._compile(o,c),w=this.args;return function(N,E,b){var D=x(N,E,b);if(typeof D!="function")throw new TypeError("Expression '".concat(y,"' did not evaluate to a function; value is:")+`
  `.concat(i(D)));if(D.rawArgs)return D(w,o,Gl(N,E));var I=f.map(F=>F(N,E,b));return D.apply(D,I)}}}forEach(o){o(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)o(this.args[c],"args["+c+"]",this)}map(o){for(var c=this._ifNode(o(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(o(this.args[d],"args["+d+"]",this));return new u(c,f)}clone(){return new u(this.fn,this.args.slice(0))}toString(o){var c,f=this.fn.toString(o);return o&&typeof o.handler=="object"&&He(o.handler,f)&&(c=o.handler[f](this,o)),typeof c<"u"?c:super.toString(o)}_toString(o){var c=this.args.map(function(d){return d.toString(o)}),f=rf(this.fn)?"("+this.fn.toString(o)+")":this.fn.toString(o);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:vd,fn:this.fn,args:this.args}}_toHTML(o){var c=this.args.map(function(f){return f.toHTML(o)});return'<span class="math-function">'+la(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(o){var c;return o&&typeof o.handler=="object"&&He(o.handler,this.name)&&(c=o.handler[this.name](this,o)),typeof c<"u"?c:super.toTex(o)}_toTex(o){var c=this.args.map(function(m){return m.toTex(o)}),f;WE[this.name]&&(f=WE[this.name]),r[this.name]&&(typeof r[this.name].toTex=="function"||typeof r[this.name].toTex=="object"||typeof r[this.name].toTex=="string")&&(f=r[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,o);break;case"string":d=s(f,this,o);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,o);break;case"string":d=s(f[c.length],this,o);break}}return typeof d<"u"?d:s(dQ,this,o)}getIdentifier(){return this.type+":"+this.name}}return e=u,Mr(u,"name",vd),Mr(u,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),Mr(u,"fromJSON",function(l){return new e(l.fn,l.args)}),u},{isClass:!0,isNode:!0}),XE="parse",RQ=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],OQ=W(XE,RQ,t=>{var{typed:e,numeric:r,config:n,AccessorNode:a,ArrayNode:i,AssignmentNode:s,BlockNode:u,ConditionalNode:l,ConstantNode:o,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:m,OperatorNode:h,ParenthesisNode:v,RangeNode:T,RelationalNode:S,SymbolNode:C}=t,_=e(XE,{string:function(ne){return ae(ne,{})},"Array | Matrix":function(ne){return M(ne,{})},"string, Object":function(ne,he){var De=he.nodes!==void 0?he.nodes:{};return ae(ne,De)},"Array | Matrix, Object":M});function M(B){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=ne.nodes!==void 0?ne.nodes:{};return lt(B,function(De){if(typeof De!="string")throw new TypeError("String expected");return ae(De,he)})}var y={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},x={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},w={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},g={true:!0,false:!1,null:null,undefined:void 0},N=["NaN","Infinity"],E={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function b(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:y.NULL,nestingLevel:0,conditionalLevel:null}}function D(B,ne){return B.expression.substr(B.index,ne)}function I(B){return D(B,1)}function F(B){B.index++}function O(B){return B.expression.charAt(B.index-1)}function P(B){return B.expression.charAt(B.index+1)}function z(B){for(B.tokenType=y.NULL,B.token="",B.comment="";;){if(I(B)==="#")for(;I(B)!==`
`&&I(B)!=="";)B.comment+=I(B),F(B);if(_.isWhitespace(I(B),B.nestingLevel))F(B);else break}if(I(B)===""){B.tokenType=y.DELIMITER;return}if(I(B)===`
`&&!B.nestingLevel){B.tokenType=y.DELIMITER,B.token=I(B),F(B);return}var ne=I(B),he=D(B,2),De=D(B,3);if(De.length===3&&x[De]){B.tokenType=y.DELIMITER,B.token=De,F(B),F(B),F(B);return}if(he.length===2&&x[he]){B.tokenType=y.DELIMITER,B.token=he,F(B),F(B);return}if(x[ne]){B.tokenType=y.DELIMITER,B.token=ne,F(B);return}if(_.isDigitDot(ne)){B.tokenType=y.NUMBER;var Ge=D(B,2);if(Ge==="0b"||Ge==="0o"||Ge==="0x"){for(B.token+=I(B),F(B),B.token+=I(B),F(B);_.isAlpha(I(B),O(B),P(B))||_.isDigit(I(B));)B.token+=I(B),F(B);if(I(B)===".")for(B.token+=".",F(B);_.isAlpha(I(B),O(B),P(B))||_.isDigit(I(B));)B.token+=I(B),F(B);else if(I(B)==="i")for(B.token+="i",F(B);_.isDigit(I(B));)B.token+=I(B),F(B);return}if(I(B)==="."){if(B.token+=I(B),F(B),!_.isDigit(I(B))){B.tokenType=y.DELIMITER;return}}else{for(;_.isDigit(I(B));)B.token+=I(B),F(B);_.isDecimalMark(I(B),P(B))&&(B.token+=I(B),F(B))}for(;_.isDigit(I(B));)B.token+=I(B),F(B);if(I(B)==="E"||I(B)==="e"){if(_.isDigit(P(B))||P(B)==="-"||P(B)==="+"){if(B.token+=I(B),F(B),(I(B)==="+"||I(B)==="-")&&(B.token+=I(B),F(B)),!_.isDigit(I(B)))throw Ze(B,'Digit expected, got "'+I(B)+'"');for(;_.isDigit(I(B));)B.token+=I(B),F(B);if(_.isDecimalMark(I(B),P(B)))throw Ze(B,'Digit expected, got "'+I(B)+'"')}else if(_.isDecimalMark(P(B),B.expression.charAt(B.index+2)))throw F(B),Ze(B,'Digit expected, got "'+I(B)+'"')}return}if(_.isAlpha(I(B),O(B),P(B))){for(;_.isAlpha(I(B),O(B),P(B))||_.isDigit(I(B));)B.token+=I(B),F(B);He(w,B.token)?B.tokenType=y.DELIMITER:B.tokenType=y.SYMBOL;return}for(B.tokenType=y.UNKNOWN;I(B)!=="";)B.token+=I(B),F(B);throw Ze(B,'Syntax error in part "'+B.token+'"')}function $(B){do z(B);while(B.token===`
`)}function L(B){B.nestingLevel++}function q(B){B.nestingLevel--}_.isAlpha=function(ne,he,De){return _.isValidLatinOrGreek(ne)||_.isValidMathSymbol(ne,De)||_.isValidMathSymbol(he,ne)},_.isValidLatinOrGreek=function(ne){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ne)},_.isValidMathSymbol=function(ne,he){return/^[\uD835]$/.test(ne)&&/^[\uDC00-\uDFFF]$/.test(he)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(he)},_.isWhitespace=function(ne,he){return ne===" "||ne==="	"||ne===" "||ne===`
`&&he>0},_.isDecimalMark=function(ne,he){return ne==="."&&he!=="/"&&he!=="*"&&he!=="^"},_.isDigitDot=function(ne){return ne>="0"&&ne<="9"||ne==="."},_.isDigit=function(ne){return ne>="0"&&ne<="9"};function ae(B,ne){var he=b();Nr(he,{expression:B,extraNodes:ne}),z(he);var De=j(he);if(he.token!=="")throw he.tokenType===y.DELIMITER?ur(he,"Unexpected operator "+he.token):Ze(he,'Unexpected part "'+he.token+'"');return De}function j(B){var ne,he=[],De;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(ne=K(B),B.comment&&(ne.comment=B.comment));B.token===`
`||B.token===";";)he.length===0&&ne&&(De=B.token!==";",he.push({node:ne,visible:De})),z(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(ne=K(B),B.comment&&(ne.comment=B.comment),De=B.token!==";",he.push({node:ne,visible:De}));return he.length>0?new u(he):(ne||(ne=new o(void 0),B.comment&&(ne.comment=B.comment)),ne)}function K(B){var ne,he,De,Ge,dt=V(B);if(B.token==="="){if(Qr(dt))return ne=dt.name,$(B),De=K(B),new s(new C(ne),De);if(co(dt))return $(B),De=K(B),new s(dt.object,dt.index,De);if(xs(dt)&&Qr(dt.fn)&&(Ge=!0,he=[],ne=dt.name,dt.args.forEach(function(Ir,ai){Qr(Ir)?he[ai]=Ir.name:Ge=!1}),Ge))return $(B),De=K(B),new c(ne,he,De);throw Ze(B,"Invalid left hand side of assignment operator =")}return dt}function V(B){for(var ne=pe(B);B.token==="?";){var he=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,$(B);var De=ne,Ge=K(B);if(B.token!==":")throw Ze(B,"False part of conditional expression expected");B.conditionalLevel=null,$(B);var dt=K(B);ne=new l(De,Ge,dt),B.conditionalLevel=he}return ne}function pe(B){for(var ne=ue(B);B.token==="or";)$(B),ne=new h("or","or",[ne,ue(B)]);return ne}function ue(B){for(var ne=fe(B);B.token==="xor";)$(B),ne=new h("xor","xor",[ne,fe(B)]);return ne}function fe(B){for(var ne=H(B);B.token==="and";)$(B),ne=new h("and","and",[ne,H(B)]);return ne}function H(B){for(var ne=J(B);B.token==="|";)$(B),ne=new h("|","bitOr",[ne,J(B)]);return ne}function J(B){for(var ne=ee(B);B.token==="^|";)$(B),ne=new h("^|","bitXor",[ne,ee(B)]);return ne}function ee(B){for(var ne=ie(B);B.token==="&";)$(B),ne=new h("&","bitAnd",[ne,ie(B)]);return ne}function ie(B){for(var ne=[oe(B)],he=[],De={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};He(De,B.token);){var Ge={name:B.token,fn:De[B.token]};he.push(Ge),$(B),ne.push(oe(B))}return ne.length===1?ne[0]:ne.length===2?new h(he[0].name,he[0].fn,ne):new S(he.map(dt=>dt.fn),ne)}function oe(B){var ne,he,De,Ge;ne=ve(B);for(var dt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};He(dt,B.token);)he=B.token,De=dt[he],$(B),Ge=[ne,ve(B)],ne=new h(he,De,Ge);return ne}function ve(B){var ne,he,De,Ge;ne=me(B);for(var dt={to:"to",in:"to"};He(dt,B.token);)he=B.token,De=dt[he],$(B),he==="in"&&"])},;".includes(B.token)?ne=new h("*","multiply",[ne,new C("in")],!0):(Ge=[ne,me(B)],ne=new h(he,De,Ge));return ne}function me(B){var ne,he=[];if(B.token===":"?ne=new o(1):ne=Te(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(he.push(ne);B.token===":"&&he.length<3;)$(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?he.push(new C("end")):he.push(Te(B));he.length===3?ne=new T(he[0],he[2],he[1]):ne=new T(he[0],he[1])}return ne}function Te(B){var ne,he,De,Ge;ne=ke(B);for(var dt={"+":"add","-":"subtract"};He(dt,B.token);){he=B.token,De=dt[he],$(B);var Ir=ke(B);Ir.isPercentage?Ge=[ne,new h("*","multiply",[ne,Ir])]:Ge=[ne,Ir],ne=new h(he,De,Ge)}return ne}function ke(B){var ne,he,De,Ge;ne=ze(B),he=ne;for(var dt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};He(dt,B.token);)De=B.token,Ge=dt[De],$(B),he=ze(B),ne=new h(De,Ge,[ne,he]);return ne}function ze(B){var ne,he;for(ne=Oe(B),he=ne;B.tokenType===y.SYMBOL||B.token==="in"&&Nt(ne)||B.token==="in"&&br(ne)&&ne.fn==="unaryMinus"&&Nt(ne.args[0])||B.tokenType===y.NUMBER&&!Nt(he)&&(!br(he)||he.op==="!")||B.token==="(";)he=Oe(B),ne=new h("*","multiply",[ne,he],!0);return ne}function Oe(B){for(var ne=$e(B),he=ne,De=[];B.token==="/"&&bg(he);)if(De.push(Nr({},B)),$(B),B.tokenType===y.NUMBER)if(De.push(Nr({},B)),$(B),B.tokenType===y.SYMBOL||B.token==="("||B.token==="in")Nr(B,De.pop()),De.pop(),he=$e(B),ne=new h("/","divide",[ne,he]);else{De.pop(),Nr(B,De.pop());break}else{Nr(B,De.pop());break}return ne}function $e(B){var ne=Q(B);if(B.token==="%"){var he=Nr({},B);$(B);try{Q(B),Nr(B,he)}catch{ne=new h("/","divide",[ne,new o(100)],!1,!0)}}return ne}function Q(B){var ne,he,De,Ge={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return He(Ge,B.token)?(De=Ge[B.token],ne=B.token,$(B),he=[Q(B)],new h(ne,De,he)):te(B)}function te(B){var ne,he,De,Ge;return ne=ce(B),(B.token==="^"||B.token===".^")&&(he=B.token,De=he==="^"?"pow":"dotPow",$(B),Ge=[ne,Q(B)],ne=new h(he,De,Ge)),ne}function ce(B){for(var ne=U(B);B.token==="??";)$(B),ne=new h("??","nullish",[ne,U(B)]);return ne}function U(B){var ne,he,De,Ge;ne=Y(B);for(var dt={"!":"factorial","'":"ctranspose"};He(dt,B.token);)he=B.token,De=dt[he],z(B),Ge=[ne],ne=new h(he,De,Ge),ne=se(B,ne);return ne}function Y(B){var ne=[];if(B.tokenType===y.SYMBOL&&He(B.extraNodes,B.token)){var he=B.extraNodes[B.token];if(z(B),B.token==="("){if(ne=[],L(B),z(B),B.token!==")")for(ne.push(K(B));B.token===",";)z(B),ne.push(K(B));if(B.token!==")")throw Ze(B,"Parenthesis ) expected");q(B),z(B)}return new he(ne)}return re(B)}function re(B){var ne,he;return B.tokenType===y.SYMBOL||B.tokenType===y.DELIMITER&&B.token in w?(he=B.token,z(B),He(g,he)?ne=new o(g[he]):N.includes(he)?ne=new o(r(he,"number")):ne=new C(he),ne=se(B,ne),ne):le(B)}function se(B,ne,he){for(var De;B.token==="("||B.token==="["||B.token===".";)if(De=[],B.token==="(")if(Qr(ne)||co(ne)){if(L(B),z(B),B.token!==")")for(De.push(K(B));B.token===",";)z(B),De.push(K(B));if(B.token!==")")throw Ze(B,"Parenthesis ) expected");q(B),z(B),ne=new f(ne,De)}else return ne;else if(B.token==="["){if(L(B),z(B),B.token!=="]")for(De.push(K(B));B.token===",";)z(B),De.push(K(B));if(B.token!=="]")throw Ze(B,"Parenthesis ] expected");q(B),z(B),ne=new a(ne,new d(De))}else{z(B);var Ge=B.tokenType===y.SYMBOL||B.tokenType===y.DELIMITER&&B.token in w;if(!Ge)throw Ze(B,"Property name expected after dot");De.push(new o(B.token)),z(B);var dt=!0;ne=new a(ne,new d(De,dt))}return ne}function le(B){var ne,he;return B.token==='"'||B.token==="'"?(he=ge(B,B.token),ne=new o(he),ne=se(B,ne),ne):_e(B)}function ge(B,ne){for(var he="";I(B)!==""&&I(B)!==ne;)if(I(B)==="\\"){F(B);var De=I(B),Ge=E[De];if(Ge!==void 0)he+=Ge,B.index+=1;else if(De==="u"){var dt=B.expression.slice(B.index+1,B.index+5);if(/^[0-9A-Fa-f]{4}$/.test(dt))he+=String.fromCharCode(parseInt(dt,16)),B.index+=5;else throw Ze(B,"Invalid unicode character \\u".concat(dt))}else throw Ze(B,"Bad escape character \\".concat(De))}else he+=I(B),F(B);if(z(B),B.token!==ne)throw Ze(B,"End of string ".concat(ne," expected"));return z(B),he}function _e(B){var ne,he,De,Ge;if(B.token==="["){if(L(B),z(B),B.token!=="]"){var dt=Se(B);if(B.token===";"){for(De=1,he=[dt];B.token===";";)z(B),B.token!=="]"&&(he[De]=Se(B),De++);if(B.token!=="]")throw Ze(B,"End of matrix ] expected");q(B),z(B),Ge=he[0].items.length;for(var Ir=1;Ir<De;Ir++)if(he[Ir].items.length!==Ge)throw ur(B,"Column dimensions mismatch ("+he[Ir].items.length+" !== "+Ge+")");ne=new i(he)}else{if(B.token!=="]")throw Ze(B,"End of matrix ] expected");q(B),z(B),ne=dt}}else q(B),z(B),ne=new i([]);return se(B,ne)}return Me(B)}function Se(B){for(var ne=[K(B)],he=1;B.token===",";)z(B),B.token!=="]"&&B.token!==";"&&(ne[he]=K(B),he++);return new i(ne)}function Me(B){if(B.token==="{"){L(B);var ne,he={};do if(z(B),B.token!=="}"){if(B.token==='"'||B.token==="'")ne=ge(B,B.token);else if(B.tokenType===y.SYMBOL||B.tokenType===y.DELIMITER&&B.token in w)ne=B.token,z(B);else throw Ze(B,"Symbol or string expected as object key");if(B.token!==":")throw Ze(B,"Colon : expected after object key");z(B),he[ne]=K(B)}while(B.token===",");if(B.token!=="}")throw Ze(B,"Comma , or bracket } expected after object value");q(B),z(B);var De=new m(he);return De=se(B,De),De}return Ae(B)}function Ae(B){var ne;if(B.tokenType===y.NUMBER){ne=B.token,z(B);var he=As(ne,n),De=r(ne,he);return new o(De)}return ht(B)}function ht(B){var ne;if(B.token==="("){if(L(B),z(B),ne=K(B),B.token!==")")throw Ze(B,"Parenthesis ) expected");return q(B),z(B),ne=new v(ne),ne=se(B,ne),ne}return gt(B)}function gt(B){throw B.token===""?Ze(B,"Unexpected end of expression"):Ze(B,"Value expected")}function Ut(B){return B.index-B.token.length+1}function Ze(B,ne){var he=Ut(B),De=new SyntaxError(ne+" (char "+he+")");return De.char=he,De}function ur(B,ne){var he=Ut(B),De=new SyntaxError(ne+" (char "+he+")");return De.char=he,De}return e.addConversion({from:"string",to:"Node",convert:_}),_}),KE="compile",BQ=["typed","parse"],jQ=W(KE,BQ,t=>{var{typed:e,parse:r}=t;return e(KE,{string:function(a){return r(a).compile()},"Array | Matrix":function(a){return lt(a,function(i){return r(i).compile()})}})}),JE="evaluate",kQ=["typed","parse"],$Q=W(JE,kQ,t=>{var{typed:e,parse:r}=t;return e(JE,{string:function(a){var i=$c();return r(a).compile().evaluate(i)},"string, Map | Object":function(a,i){return r(a).compile().evaluate(i)},"Array | Matrix":function(a){var i=$c();return lt(a,function(s){return r(s).compile().evaluate(i)})},"Array | Matrix, Map | Object":function(a,i){return lt(a,function(s){return r(s).compile().evaluate(i)})}})}),LQ="Parser",zQ=["evaluate","parse"],VQ=W(LQ,zQ,t=>{var{evaluate:e,parse:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:$c(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(i){return e(i,this.scope)},n.prototype.get=function(i){if(this.scope.has(i))return this.scope.get(i)},n.prototype.getAll=function(){return ok(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function a(i){if(i.length===0)return!1;for(var s=0;s<i.length;s++){var u=i.charAt(s-1),l=i.charAt(s),o=i.charAt(s+1),c=r.isAlpha(l,u,o)||s>0&&r.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(i,s){if(!a(i))throw new Error("Invalid variable name: '".concat(i,"'. Variable names must follow the specified rules."));return this.scope.set(i,s),s},n.prototype.remove=function(i){this.scope.delete(i)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var i={mathjs:"Parser",variables:{},functions:{}};for(var[s,u]of this.scope)if(F3(u)){if(!UQ(u))throw new Error("Cannot serialize external function ".concat(s));i.functions[s]="".concat(u.syntax," = ").concat(u.expr)}else i.variables[s]=u;return i},n.fromJSON=function(i){var s=new n;return Object.entries(i.variables).forEach(u=>{var[l,o]=u;return s.set(l,o)}),Object.entries(i.functions).forEach(u=>{var[l,o]=u;return s.evaluate(o)}),s},n},{isClass:!0});function UQ(t){return typeof t=="function"&&typeof t.syntax=="string"&&typeof t.expr=="string"}var YE="parser",qQ=["typed","Parser"],HQ=W(YE,qQ,t=>{var{typed:e,Parser:r}=t;return e(YE,{"":function(){return new r}})}),ZE="lup",GQ=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],WQ=W(ZE,GQ,t=>{var{typed:e,matrix:r,abs:n,addScalar:a,divideScalar:i,multiplyScalar:s,subtractScalar:u,larger:l,equalScalar:o,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:m}=t;return e(ZE,{DenseMatrix:function(S){return h(S)},SparseMatrix:function(S){return v(S)},Array:function(S){var C=r(S),_=h(C);return{L:_.L.valueOf(),U:_.U.valueOf(),p:_.p}}});function h(T){var S=T._size[0],C=T._size[1],_=Math.min(S,C),M=nt(T._data),y=[],x=[S,_],w=[],g=[_,C],N,E,b,D=[];for(N=0;N<S;N++)D[N]=N;for(E=0;E<C;E++){if(E>0)for(N=0;N<S;N++){var I=Math.min(N,E),F=0;for(b=0;b<I;b++)F=a(F,s(M[N][b],M[b][E]));M[N][E]=u(M[N][E],F)}var O=E,P=0,z=0;for(N=E;N<S;N++){var $=M[N][E],L=n($);l(L,P)&&(O=N,P=L,z=$)}if(E!==O&&(D[E]=[D[O],D[O]=D[E]][0],f._swapRows(E,O,M)),E<S)for(N=E+1;N<S;N++){var q=M[N][E];o(q,0)||(M[N][E]=i(M[N][E],z))}}for(E=0;E<C;E++)for(N=0;N<S;N++){if(E===0&&(N<C&&(w[N]=[]),y[N]=[]),N<E){N<C&&(w[N][E]=M[N][E]),E<S&&(y[N][E]=0);continue}if(N===E){N<C&&(w[N][E]=M[N][E]),E<S&&(y[N][E]=1);continue}N<C&&(w[N][E]=0),E<S&&(y[N][E]=M[N][E])}var ae=new f({data:y,size:x}),j=new f({data:w,size:g}),K=[];for(N=0,_=D.length;N<_;N++)K[D[N]]=N;return{L:ae,U:j,p:K,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(T){var S=T._size[0],C=T._size[1],_=Math.min(S,C),M=T._values,y=T._index,x=T._ptr,w=[],g=[],N=[],E=[S,_],b=[],D=[],I=[],F=[_,C],O,P,z,$=[],L=[];for(O=0;O<S;O++)$[O]=O,L[O]=O;var q=function(K,V){var pe=L[K],ue=L[V];$[pe]=V,$[ue]=K,L[K]=ue,L[V]=pe},ae=function(){var K=new m;P<S&&(N.push(w.length),w.push(1),g.push(P)),I.push(b.length);var V=x[P],pe=x[P+1];for(z=V;z<pe;z++)O=y[z],K.set($[O],M[z]);P>0&&K.forEach(0,P-1,function(J,ee){d._forEachRow(J,w,g,N,function(ie,oe){ie>J&&K.accumulate(ie,c(s(oe,ee)))})});var ue=P,fe=K.get(P),H=n(fe);K.forEach(P+1,S-1,function(J,ee){var ie=n(ee);l(ie,H)&&(ue=J,H=ie,fe=ee)}),P!==ue&&(d._swapRows(P,ue,E[1],w,g,N),d._swapRows(P,ue,F[1],b,D,I),K.swap(P,ue),q(P,ue)),K.forEach(0,S-1,function(J,ee){J<=P?(b.push(ee),D.push(J)):(ee=i(ee,fe),o(ee,0)||(w.push(ee),g.push(J)))})};for(P=0;P<C;P++)ae();return I.push(b.length),N.push(w.length),{L:new d({values:w,index:g,ptr:N,size:E}),U:new d({values:b,index:D,ptr:I,size:F}),p:$,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),eS="qr",QQ=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],XQ=W(eS,QQ,t=>{var{typed:e,matrix:r,zeros:n,identity:a,isZero:i,equal:s,sign:u,sqrt:l,conj:o,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:m,subtractScalar:h,complex:v}=t;return Nr(e(eS,{DenseMatrix:function(M){return S(M)},SparseMatrix:function(M){return C()},Array:function(M){var y=r(M),x=S(y);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:T});function T(_){var M=_._size[0],y=_._size[1],x=a([M],"dense"),w=x._data,g=_.clone(),N=g._data,E,b,D,I=n([M],"");for(D=0;D<Math.min(y,M);++D){var F=N[D][D],O=c(s(F,0)?1:u(F)),P=o(O),z=0;for(E=D;E<M;E++)z=f(z,m(N[E][D],o(N[E][D])));var $=m(O,l(z));if(!i($)){var L=h(F,$);for(I[D]=1,E=D+1;E<M;E++)I[E]=d(N[E][D],L);var q=c(o(d(L,$))),ae=void 0;for(b=D;b<y;b++){for(ae=0,E=D;E<M;E++)ae=f(ae,m(o(I[E]),N[E][b]));for(ae=m(ae,q),E=D;E<M;E++)N[E][b]=m(h(N[E][b],m(I[E],ae)),P)}for(E=0;E<M;E++){for(ae=0,b=D;b<M;b++)ae=f(ae,m(w[E][b],I[b]));for(ae=m(ae,q),b=D;b<M;++b)w[E][b]=d(h(w[E][b],m(ae,o(I[b]))),P)}}}return{Q:x,R:g,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function S(_){var M=T(_),y=M.R._data;if(_._data.length>0)for(var x=y[0][0].type==="Complex"?v(0):0,w=0;w<y.length;++w)for(var g=0;g<w&&g<(y[0]||[]).length;++g)y[w][g]=x;return M}function C(_){throw new Error("qr not implemented for sparse matrices yet")}});function KQ(t,e,r,n){t._values;for(var a=t._index,i=t._ptr,s=t._size,u=t._datatype,l=s[0],o=s[1],c=null,f=[],d=[],m=0,h=0;h<o;h++){d[h]=m;for(var v=r?r[h]:h,T=i[v],S=i[v+1],C=T;C<S;C++){var _=a[C];f[m]=_,m++}}return d[o]=m,t.createSparseMatrix({values:c,index:f,ptr:d,size:[l,o],datatype:u})}function A4(t,e,r,n,a,i,s){var u=0;for(r[s]=t;u>=0;){var l=r[s+u],o=r[n+l];o===-1?(u--,i[e++]=l):(r[n+l]=r[a+o],++u,r[s+u]=o)}return e}function JQ(t,e){if(!t)return null;var r=0,n,a=[],i=[],s=0,u=e,l=2*e;for(n=0;n<e;n++)i[s+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(i[u+n]=i[s+t[n]],i[s+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=A4(n,r,i,s,u,a,l));return a}function YQ(t,e){if(!t)return null;var r=t._index,n=t._ptr,a=t._size,i=a[0],s=a[1],u=[],l=[],o=0,c=s,f,d;for(f=0;f<i;f++)l[c+f]=-1;for(var m=0;m<s;m++){u[m]=-1,l[o+m]=-1;for(var h=n[m],v=n[m+1],T=h;T<v;T++){var S=r[T];for(f=l[c+S];f!==-1&&f<m;f=d)d=l[o+f],l[o+f]=m,d===-1&&(u[f]=m);l[c+S]=m}}return u}function ZQ(t,e,r){for(var n=t._values,a=t._index,i=t._ptr,s=t._size,u=s[1],l=0,o=0;o<u;o++){var c=i[o];for(i[o]=l;c<i[o+1];c++)e(a[c],o,n?n[c]:1,r)&&(a[l]=a[c],n&&(n[l]=n[c]),l++)}return i[u]=l,a.splice(l,a.length-l),n&&n.splice(l,n.length-l),l}function Li(t){return-t-2}var eX="csAmd",tX=["add","multiply","transpose"],rX=W(eX,tX,t=>{var{add:e,multiply:r,transpose:n}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,m=d[0],h=d[1],v=0,T=Math.max(16,10*Math.sqrt(h));T=Math.min(h-2,T);var S=a(c,f,m,h,T);ZQ(S,l,null);for(var C=S._index,_=S._ptr,M=_[h],y=[],x=[],w=0,g=h+1,N=2*(h+1),E=3*(h+1),b=4*(h+1),D=5*(h+1),I=6*(h+1),F=7*(h+1),O=y,P=i(h,_,x,w,E,O,N,F,g,I,b,D),z=s(h,_,x,D,b,I,T,g,E,O,N),$=0,L,q,ae,j,K,V,pe,ue,fe,H,J,ee,ie,oe,ve,me;z<h;){for(ae=-1;$<h&&(ae=x[E+$])===-1;$++);x[N+ae]!==-1&&(O[x[N+ae]]=-1),x[E+$]=x[N+ae];var Te=x[b+ae],ke=x[g+ae];z+=ke;var ze=0;x[g+ae]=-ke;var Oe=_[ae],$e=Te===0?Oe:M,Q=$e;for(j=1;j<=Te+1;j++){for(j>Te?(V=ae,pe=Oe,ue=x[w+ae]-Te):(V=C[Oe++],pe=_[V],ue=x[w+V]),K=1;K<=ue;K++)L=C[pe++],!((fe=x[g+L])<=0)&&(ze+=fe,x[g+L]=-fe,C[Q++]=L,x[N+L]!==-1&&(O[x[N+L]]=O[L]),O[L]!==-1?x[N+O[L]]=x[N+L]:x[E+x[D+L]]=x[N+L]);V!==ae&&(_[V]=Li(ae),x[I+V]=0)}for(Te!==0&&(M=Q),x[D+ae]=ze,_[ae]=$e,x[w+ae]=Q-$e,x[b+ae]=-2,P=u(P,v,x,I,h),H=$e;H<Q;H++)if(L=C[H],!((J=x[b+L])<=0)){fe=-x[g+L];var te=P-fe;for(Oe=_[L],ee=_[L]+J-1;Oe<=ee;Oe++)V=C[Oe],x[I+V]>=P?x[I+V]-=fe:x[I+V]!==0&&(x[I+V]=x[D+V]+te)}for(H=$e;H<Q;H++){for(L=C[H],ee=_[L],ie=ee+x[b+L]-1,oe=ee,ve=0,me=0,Oe=ee;Oe<=ie;Oe++)if(V=C[Oe],x[I+V]!==0){var ce=x[I+V]-P;ce>0?(me+=ce,C[oe++]=V,ve+=V):(_[V]=Li(ae),x[I+V]=0)}x[b+L]=oe-ee+1;var U=oe,Y=ee+x[w+L];for(Oe=ie+1;Oe<Y;Oe++){q=C[Oe];var re=x[g+q];re<=0||(me+=re,C[oe++]=q,ve+=q)}me===0?(_[L]=Li(ae),fe=-x[g+L],ze-=fe,ke+=fe,z+=fe,x[g+L]=0,x[b+L]=-1):(x[D+L]=Math.min(x[D+L],me),C[oe]=C[U],C[U]=C[ee],C[ee]=ae,x[w+L]=oe-ee+1,ve=(ve<0?-ve:ve)%h,x[N+L]=x[F+ve],x[F+ve]=L,O[L]=ve)}for(x[D+ae]=ze,v=Math.max(v,ze),P=u(P+v,v,x,I,h),H=$e;H<Q;H++)if(L=C[H],!(x[g+L]>=0))for(ve=O[L],L=x[F+ve],x[F+ve]=-1;L!==-1&&x[N+L]!==-1;L=x[N+L],P++){for(ue=x[w+L],J=x[b+L],Oe=_[L]+1;Oe<=_[L]+ue-1;Oe++)x[I+C[Oe]]=P;var se=L;for(q=x[N+L];q!==-1;){var le=x[w+q]===ue&&x[b+q]===J;for(Oe=_[q]+1;le&&Oe<=_[q]+ue-1;Oe++)x[I+C[Oe]]!==P&&(le=0);le?(_[q]=Li(L),x[g+L]+=x[g+q],x[g+q]=0,x[b+q]=-1,q=x[N+q],x[N+se]=q):(se=q,q=x[N+q])}}for(Oe=$e,H=$e;H<Q;H++)L=C[H],!((fe=-x[g+L])<=0)&&(x[g+L]=fe,me=x[D+L]+ze-fe,me=Math.min(me,h-z-fe),x[E+me]!==-1&&(O[x[E+me]]=L),x[N+L]=x[E+me],O[L]=-1,x[E+me]=L,$=Math.min($,me),x[D+L]=me,C[Oe++]=L);x[g+ae]=ke,(x[w+ae]=Oe-$e)===0&&(_[ae]=-1,x[I+ae]=0),Te!==0&&(M=Oe)}for(L=0;L<h;L++)_[L]=Li(_[L]);for(q=0;q<=h;q++)x[E+q]=-1;for(q=h;q>=0;q--)x[g+q]>0||(x[N+q]=x[E+_[q]],x[E+_[q]]=q);for(V=h;V>=0;V--)x[g+V]<=0||_[V]!==-1&&(x[N+V]=x[E+_[V]],x[E+_[V]]=V);for(ae=0,L=0;L<=h;L++)_[L]===-1&&(ae=A4(L,ae,x,E,N,y,I));return y.splice(y.length-1,1),y};function a(o,c,f,d,m){var h=n(c);if(o===1&&d===f)return e(c,h);if(o===2){for(var v=h._index,T=h._ptr,S=0,C=0;C<f;C++){var _=T[C];if(T[C]=S,!(T[C+1]-_>m))for(var M=T[C+1];_<M;_++)v[S++]=v[_]}return T[f]=S,c=n(h),r(h,c)}return r(h,c)}function i(o,c,f,d,m,h,v,T,S,C,_,M){for(var y=0;y<o;y++)f[d+y]=c[y+1]-c[y];f[d+o]=0;for(var x=0;x<=o;x++)f[m+x]=-1,h[x]=-1,f[v+x]=-1,f[T+x]=-1,f[S+x]=1,f[C+x]=1,f[_+x]=0,f[M+x]=f[d+x];var w=u(0,0,f,C,o);return f[_+o]=-2,c[o]=-1,f[C+o]=0,w}function s(o,c,f,d,m,h,v,T,S,C,_){for(var M=0,y=0;y<o;y++){var x=f[d+y];if(x===0)f[m+y]=-2,M++,c[y]=-1,f[h+y]=0;else if(x>v)f[T+y]=0,f[m+y]=-1,M++,c[y]=Li(o),f[T+o]++;else{var w=f[S+x];w!==-1&&(C[w]=y),f[_+y]=f[S+x],f[S+x]=y}}return M}function u(o,c,f,d,m){if(o<2||o+c<0){for(var h=0;h<m;h++)f[d+h]!==0&&(f[d+h]=1);o=2}return o}function l(o,c){return o!==c}});function nX(t,e,r,n,a,i,s){var u,l,o=0,c;if(t<=e||r[n+e]<=r[a+t])return-1;r[a+t]=r[n+e];var f=r[i+t];if(r[i+t]=e,f===-1)o=1,c=t;else{for(o=2,c=f;c!==r[s+c];c=r[s+c]);for(u=f;u!==c;u=l)l=r[s+u],r[s+u]=c}return{jleaf:o,q:c}}var aX="csCounts",iX=["transpose"],sX=W(aX,iX,t=>{var{transpose:e}=t;return function(r,n,a,i){if(!r||!n||!a)return null;var s=r._size,u=s[0],l=s[1],o,c,f,d,m,h,v,T=4*l+(i?l+u+1:0),S=[],C=0,_=l,M=2*l,y=3*l,x=4*l,w=5*l+1;for(f=0;f<T;f++)S[f]=-1;var g=[],N=e(r),E=N._index,b=N._ptr;for(f=0;f<l;f++)for(c=a[f],g[c]=S[y+c]===-1?1:0;c!==-1&&S[y+c]===-1;c=n[c])S[y+c]=f;if(i){for(f=0;f<l;f++)S[a[f]]=f;for(o=0;o<u;o++){for(f=l,h=b[o],v=b[o+1],m=h;m<v;m++)f=Math.min(f,S[E[m]]);S[w+o]=S[x+f],S[x+f]=o}}for(o=0;o<l;o++)S[C+o]=o;for(f=0;f<l;f++){for(c=a[f],n[c]!==-1&&g[n[c]]--,d=i?S[x+f]:c;d!==-1;d=i?S[w+d]:-1)for(m=b[d];m<b[d+1];m++){o=E[m];var D=nX(o,c,S,y,_,M,C);D.jleaf>=1&&g[c]++,D.jleaf===2&&g[D.q]--}n[c]!==-1&&(S[C+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(g[n[c]]+=g[c]);return g}}),oX="csSqr",uX=["add","multiply","transpose"],lX=W(oX,uX,t=>{var{add:e,multiply:r,transpose:n}=t,a=rX({add:e,multiply:r,transpose:n}),i=sX({transpose:n});return function(l,o,c){var f=o._ptr,d=o._size,m=d[1],h,v={};if(v.q=a(l,o),l&&!v.q)return null;if(c){var T=l?KQ(o,null,v.q):o;v.parent=YQ(T);var S=JQ(v.parent,m);if(v.cp=i(T,v.parent,S,1),T&&v.parent&&v.cp&&s(T,v))for(v.unz=0,h=0;h<m;h++)v.unz+=v.cp[h]}else v.unz=4*f[m]+m,v.lnz=v.unz;return v};function s(u,l){var o=u._ptr,c=u._index,f=u._size,d=f[0],m=f[1];l.pinv=[],l.leftmost=[];var h=l.parent,v=l.pinv,T=l.leftmost,S=[],C=0,_=d,M=d+m,y=d+2*m,x,w,g,N,E;for(w=0;w<m;w++)S[_+w]=-1,S[M+w]=-1,S[y+w]=0;for(x=0;x<d;x++)T[x]=-1;for(w=m-1;w>=0;w--)for(N=o[w],E=o[w+1],g=N;g<E;g++)T[c[g]]=w;for(x=d-1;x>=0;x--)v[x]=-1,w=T[x],w!==-1&&(S[y+w]++===0&&(S[M+w]=x),S[C+x]=S[_+w],S[_+w]=x);for(l.lnz=0,l.m2=d,w=0;w<m;w++)if(x=S[_+w],l.lnz++,x<0&&(x=l.m2++),v[x]=w,!(--y[w]<=0)){l.lnz+=S[y+w];var b=h[w];b!==-1&&(S[y+b]===0&&(S[M+b]=S[M+w]),S[C+S[M+w]]=S[_+b],S[_+b]=S[C+x],S[y+b]+=S[y+w])}for(x=0;x<d;x++)v[x]<0&&(v[x]=w++);return!0}});function zg(t,e){return t[e]<0}function D4(t,e){t[e]=Li(t[e])}function tS(t){return t<0?Li(t):t}function cX(t,e,r,n,a){var i=e._index,s=e._ptr,u=e._size,l=u[1],o,c,f,d=0;for(n[0]=t;d>=0;){t=n[d];var m=a?a[t]:t;zg(s,t)||(D4(s,t),n[l+d]=m<0?0:tS(s[m]));var h=1;for(c=n[l+d],f=m<0?0:tS(s[m+1]);c<f;c++)if(o=i[c],!zg(s,o)){n[l+d]=c,n[++d]=o,h=0;break}h&&(d--,n[--r]=t)}return r}function fX(t,e,r,n,a){var i=t._ptr,s=t._size,u=e._index,l=e._ptr,o=s[1],c,f,d,m=o;for(f=l[r],d=l[r+1],c=f;c<d;c++){var h=u[c];zg(i,h)||(m=cX(h,t,m,n,a))}for(c=m;c<o;c++)D4(i,n[c]);return m}var dX="csSpsolve",mX=["divideScalar","multiply","subtract"],hX=W(dX,mX,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(i,s,u,l,o,c,f){var d=i._values,m=i._index,h=i._ptr,v=i._size,T=v[1],S=s._values,C=s._index,_=s._ptr,M,y,x,w,g=fX(i,s,u,l,c);for(M=g;M<T;M++)o[l[M]]=0;for(y=_[u],x=_[u+1],M=y;M<x;M++)o[C[M]]=S[M];for(var N=g;N<T;N++){var E=l[N],b=c?c[E]:E;if(!(b<0))for(y=h[b],x=h[b+1],o[E]=e(o[E],d[f?y:x-1]),M=f?y+1:y,w=f?x:x-1;M<w;M++){var D=m[M];o[D]=n(o[D],r(d[M],o[E]))}}return g}}),pX="csLu",vX=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],gX=W(pX,vX,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:a,larger:i,largerEq:s,SparseMatrix:u}=t,l=hX({divideScalar:r,multiply:n,subtract:a});return function(c,f,d){if(!c)return null;var m=c._size,h=m[1],v,T=100,S=100;f&&(v=f.q,T=f.lnz||T,S=f.unz||S);var C=[],_=[],M=[],y=new u({values:C,index:_,ptr:M,size:[h,h]}),x=[],w=[],g=[],N=new u({values:x,index:w,ptr:g,size:[h,h]}),E=[],b,D,I=[],F=[];for(b=0;b<h;b++)I[b]=0,E[b]=-1,M[b+1]=0;T=0,S=0;for(var O=0;O<h;O++){M[O]=T,g[O]=S;var P=v?v[O]:O,z=l(y,c,P,F,I,E,1),$=-1,L=-1;for(D=z;D<h;D++)if(b=F[D],E[b]<0){var q=e(I[b]);i(q,L)&&(L=q,$=b)}else w[S]=E[b],x[S++]=I[b];if($===-1||L<=0)return null;E[P]<0&&s(e(I[P]),n(L,d))&&($=P);var ae=I[$];for(w[S]=O,x[S++]=ae,E[$]=O,_[T]=$,C[T++]=1,D=z;D<h;D++)b=F[D],E[b]<0&&(_[T]=b,C[T++]=r(I[b],ae)),I[b]=0}for(M[h]=T,g[h]=S,D=0;D<T;D++)_[D]=E[_[D]];return C.splice(T,C.length-T),_.splice(T,_.length-T),x.splice(S,x.length-S),w.splice(S,w.length-S),{L:y,U:N,pinv:E}}}),rS="slu",yX=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],xX=W(rS,yX,t=>{var{typed:e,abs:r,add:n,multiply:a,transpose:i,divideScalar:s,subtract:u,larger:l,largerEq:o,SparseMatrix:c}=t,f=lX({add:n,multiply:a,transpose:i}),d=gX({abs:r,divideScalar:s,multiply:a,subtract:u,larger:l,largerEq:o,SparseMatrix:c});return e(rS,{"SparseMatrix, number, number":function(h,v,T){if(!We(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(T<0||T>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var S=f(v,h,!1),C=d(h,S,T);return{L:C.L,U:C.U,p:C.pinv,q:S.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function nS(t,e){var r,n=e.length,a=[];if(t)for(r=0;r<n;r++)a[t[r]]=e[r];else for(r=0;r<n;r++)a[r]=e[r];return a}var aS="lusolve",bX=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],wX=W(aS,bX,t=>{var{typed:e,matrix:r,lup:n,slu:a,usolve:i,lsolve:s,DenseMatrix:u}=t,l=af({DenseMatrix:u});return e(aS,{"Array, Array | Matrix":function(d,m){d=r(d);var h=n(d),v=c(h.L,h.U,h.p,null,m);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,m){var h=n(d);return c(h.L,h.U,h.p,null,m)},"SparseMatrix, Array | Matrix":function(d,m){var h=n(d);return c(h.L,h.U,h.p,null,m)},"SparseMatrix, Array | Matrix, number, number":function(d,m,h,v){var T=a(d,h,v);return c(T.L,T.U,T.p,T.q,m)},"Object, Array | Matrix":function(d,m){return c(d.L,d.U,d.p,d.q,m)}});function o(f){if(Ye(f))return f;if(Wt(f))return r(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,m,h,v){f=o(f),d=o(d),m&&(v=l(f,v,!0),v._data=nS(m,v._data));var T=s(f,v),S=i(d,T);return h&&(S._data=nS(h,S._data)),S}}),iS="polynomialRoot",NX=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],_X=W(iS,NX,t=>{var{typed:e,isZero:r,equalScalar:n,add:a,subtract:i,multiply:s,divide:u,sqrt:l,unaryMinus:o,cbrt:c,typeOf:f,im:d,re:m}=t;return e(iS,{"number|Complex, ...number|Complex":(h,v)=>{for(var T=[h,...v];T.length>0&&r(T[T.length-1]);)T.pop();if(T.length<2)throw new RangeError("Polynomial [".concat(h,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(T.length){case 2:return[o(u(T[0],T[1]))];case 3:{var[S,C,_]=T,M=s(2,_),y=s(C,C),x=s(4,_,S);if(n(y,x))return[u(o(C),M)];var w=l(i(y,x));return[u(i(w,C),M),u(i(o(w),C),M)]}case 4:{var[g,N,E,b]=T,D=o(s(3,b)),I=s(E,E),F=s(3,b,N),O=a(s(2,E,E,E),s(27,b,b,g)),P=s(9,b,E,N);if(n(I,F)&&n(O,P))return[u(E,D)];var z=i(I,F),$=i(O,P),L=a(s(18,b,E,N,g),s(E,E,N,N)),q=a(s(4,E,E,E,g),s(4,b,N,N,N),s(27,b,b,g,g));if(n(L,q))return[u(i(s(4,b,E,N),a(s(9,b,b,g),s(E,E,E))),s(b,z)),u(i(s(9,b,g),s(E,N)),s(2,z))];var ae;n(I,F)?ae=$:ae=u(a($,l(i(s($,$),s(4,z,z,z)))),2);var j=!0,K=c(ae,j).toArray().map(V=>u(a(E,V,u(z,V)),D));return K.map(V=>f(V)==="Complex"&&n(m(V),m(V)+d(V))?m(V):V)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(T))}}})}),EX="Help",SX=["evaluate"],AX=W(EX,SX,t=>{var{evaluate:e}=t;function r(n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var n=this.doc||{},a=`
`;if(n.name&&(a+="Name: "+n.name+`

`),n.category&&(a+="Category: "+n.category+`

`),n.description&&(a+=`Description:
    `+n.description+`

`),n.syntax&&(a+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){a+=`Examples:
`;for(var i=!1,s=e("config()"),u={config:f=>(i=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<n.examples.length;l++){var o=n.examples[l];a+="    "+o+`
`;var c=void 0;try{c=e(o,u)}catch(f){c=f}c!==void 0&&!P3(c)&&(a+="        "+pt(c,{precision:14})+`
`)}a+=`
`,i&&e("config(originalConfig)",{originalConfig:s})}return n.mayThrow&&n.mayThrow.length&&(a+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(a+="See also: "+n.seealso.join(", ")+`
`),a},r.prototype.toJSON=function(){var n=nt(this.doc);return n.mathjs="Help",n},r.fromJSON=function(n){var a={};return Object.keys(n).filter(i=>i!=="mathjs").forEach(i=>{a[i]=n[i]}),new r(a)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),DX="Chain",CX=["?on","math","typed"],TX=W(DX,CX,t=>{var{on:e,math:r,typed:n}=t;function a(o){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");O3(o)?this.value=o.value:this.value=o}a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return pt(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(o){return new a(o.value)};function i(o,c){typeof c=="function"&&(a.prototype[o]=u(c))}function s(o,c){bk(a.prototype,o,function(){var d=c();if(typeof d=="function")return u(d)})}function u(o){return function(){if(arguments.length===0)return new a(o(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(n.isTypedFunction(o)){var d=n.resolve(o,c);if(d.params.length===1)throw new Error("chain function "+o.name+" cannot match rest parameter between chain value and additional arguments.");return new a(d.implementation.apply(o,c))}return new a(o.apply(o,c))}}a.createProxy=function(o,c){if(typeof o=="string")i(o,c);else{var f=function(h){He(o,h)&&l[h]===void 0&&s(h,()=>o[h])};for(var d in o)f(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return a.createProxy(r),e&&e("import",function(o,c,f){f||s(o,c)}),a},{isClass:!0}),sS={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},MX={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},IX={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},PX={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},FX={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},RX={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},OX={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},BX={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},jX={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},kX={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},$X={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},oS={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},LX={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},zX={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},VX={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},UX={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},qX={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},HX={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},GX={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},WX={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},QX={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},XX={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},KX={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},JX={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},YX={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},ZX={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},eK={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},tK={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},rK={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},nK={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},aK={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},iK={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},sK={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},oK={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},uK={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},lK={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},cK={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},fK={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},dK={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},mK={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},hK={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},pK={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},vK={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},gK={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},yK={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},xK={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},bK={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},wK={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},NK={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},_K={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},EK={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},SK={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},AK={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},DK={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},CK={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},TK={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},MK={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},IK={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},PK={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},FK={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},RK={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},OK={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},BK={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},jK={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},kK={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},$K={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},LK={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},zK={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},VK={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},UK={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},qK={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},HK={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},GK={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},WK={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},QK={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},XK={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},KK={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},JK={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},YK={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},ZK={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},eJ={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},tJ={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},rJ={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},nJ={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},aJ={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},iJ={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},sJ={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},oJ={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},uJ={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},lJ={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},cJ={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},fJ={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},dJ={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},mJ={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},hJ={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},pJ={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},vJ={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},gJ={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},yJ={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},xJ={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},bJ={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},wJ={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},NJ={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},_J={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},EJ={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},SJ={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},AJ={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},DJ={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},CJ={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},TJ={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},MJ={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},IJ={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},PJ={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},FJ={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},RJ={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},OJ={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},BJ={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},jJ={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},kJ={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},$J={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},LJ={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},zJ={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},VJ={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},UJ={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},qJ={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},HJ={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},GJ={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},WJ={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},QJ={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},XJ={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},KJ={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},JJ={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},YJ={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},ZJ={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},eY={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},tY={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},rY={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},nY={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},aY={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},iY={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},sY={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},oY={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},uY={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},lY={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},cY={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},fY={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},dY={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},mY={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},hY={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},pY={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},vY={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},gY={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},yY={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},xY={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},bY={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},wY={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},NY={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},_Y={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},EY={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},SY={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},AY={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},DY={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},CY={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},TY={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},MY={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},IY={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},PY={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},FY={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},RY={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},OY={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},BY={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},jY={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},kY={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},$Y={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},LY={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},zY={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},VY={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},UY={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},qY={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},HY={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},GY={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},WY={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},QY={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},XY={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},KY={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},JY={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},YY={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},ZY={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},eZ={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},tZ={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},rZ={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},nZ={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},aZ={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},iZ={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},sZ={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},oZ={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},uZ={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},lZ={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},cZ={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},fZ={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},dZ={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},mZ={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},hZ={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},pZ={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},vZ={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},gZ={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},yZ={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},xZ={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},bZ={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},wZ={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},NZ={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},_Z={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},EZ={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},SZ={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},AZ={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},DZ={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},CZ={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},TZ={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},MZ={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},IZ={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},PZ={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},FZ={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},RZ={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},OZ={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},BZ={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},jZ={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},kZ={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},$Z={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},LZ={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},zZ={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},VZ={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},UZ={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},qZ={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},HZ={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},GZ={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},WZ={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},QZ={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},XZ={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},KZ={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},JZ={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},YZ={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},ZZ={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},eee={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},tee={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},ree={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},nee={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},aee={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},iee={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},see={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},oee={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},uee={bignumber:HX,bigint:GX,boolean:WX,complex:QX,createUnit:XX,fraction:KX,index:JX,matrix:YX,number:ZX,sparse:eK,splitUnit:tK,string:rK,unit:nK,e:sS,E:sS,false:MX,i:IX,Infinity:PX,LN2:RX,LN10:FX,LOG2E:BX,LOG10E:OX,NaN:jX,null:kX,pi:oS,PI:oS,phi:$X,SQRT1_2:LX,SQRT2:zX,tau:VX,true:UX,version:qX,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:oK,lsolve:lK,lsolveAll:cK,lup:fK,lusolve:dK,leafCount:uK,polynomialRoot:mK,resolve:vK,simplify:gK,simplifyConstant:yK,simplifyCore:xK,symbolicEqual:wK,rationalize:pK,slu:bK,usolve:NK,usolveAll:_K,qr:hK,abs:EK,add:SK,cbrt:AK,ceil:DK,cube:CK,divide:TK,dotDivide:MK,dotMultiply:IK,dotPow:PK,exp:FK,expm:RK,expm1:OK,fix:BK,floor:jK,gcd:kK,hypot:$K,lcm:zK,log:VK,log2:HK,log1p:qK,log10:UK,mod:GK,multiply:WK,norm:QK,nthRoot:XK,nthRoots:KK,pow:JK,round:YK,sign:ZK,sqrt:eJ,sqrtm:tJ,square:iJ,subtract:sJ,unaryMinus:oJ,unaryPlus:uJ,xgcd:lJ,invmod:LK,bitAnd:cJ,bitNot:fJ,bitOr:dJ,bitXor:mJ,leftShift:hJ,rightArithShift:pJ,rightLogShift:vJ,bellNumbers:gJ,catalan:yJ,composition:xJ,stirlingS2:bJ,config:aK,import:iK,typed:sK,arg:wJ,conj:NJ,re:EJ,im:_J,evaluate:SJ,help:TJ,parse:DJ,parser:AJ,compile:CJ,distance:MJ,intersect:IJ,and:PJ,not:FJ,nullish:RJ,or:OJ,xor:BJ,mapSlices:jJ,concat:$J,count:LJ,cross:zJ,column:kJ,ctranspose:VJ,det:UJ,diag:qJ,diff:HJ,dot:GJ,getMatrixDataType:JJ,identity:YJ,filter:QJ,flatten:XJ,forEach:KJ,inv:ZJ,pinv:eY,eigs:WJ,kron:tY,matrixFromFunction:aY,matrixFromRows:iY,matrixFromColumns:nY,map:rY,ones:sY,partitionSelect:oY,range:uY,resize:cY,reshape:lY,rotate:fY,rotationMatrix:dY,row:mY,size:hY,sort:pY,squeeze:vY,subset:gY,trace:yY,transpose:xY,zeros:bY,fft:wY,ifft:NY,sylvester:rJ,schur:nJ,lyap:aJ,solveODE:oee,combinations:_Y,combinationsWithRep:EY,factorial:SY,gamma:AY,kldivergence:CY,lgamma:DY,multinomial:TY,permutations:MY,pickRandom:IY,random:PY,randomInt:FY,compare:RY,compareNatural:OY,compareText:BY,deepEqual:jY,equal:kY,equalText:$Y,larger:LY,largerEq:zY,smaller:VY,smallerEq:UY,unequal:qY,setCartesian:HY,setDifference:GY,setDistinct:WY,setIntersect:QY,setIsSubset:XY,setMultiplicity:KY,setPowerset:JY,setSize:YY,setSymDifference:ZY,setUnion:eZ,zpk2tf:tZ,freqz:rZ,erf:nZ,zeta:aZ,cumsum:hZ,mad:iZ,max:sZ,mean:oZ,median:uZ,min:lZ,mode:cZ,prod:fZ,quantileSeq:dZ,std:mZ,sum:pZ,variance:vZ,corr:gZ,acos:yZ,acosh:xZ,acot:bZ,acoth:wZ,acsc:NZ,acsch:_Z,asec:EZ,asech:SZ,asin:AZ,asinh:DZ,atan:CZ,atanh:MZ,atan2:TZ,cos:IZ,cosh:PZ,cot:FZ,coth:RZ,csc:OZ,csch:BZ,sec:jZ,sech:kZ,sin:$Z,sinh:LZ,tan:zZ,tanh:VZ,to:UZ,toBest:qZ,clone:GZ,format:WZ,bin:HZ,oct:aee,hex:XZ,isNaN:JZ,isInteger:KZ,isNegative:YZ,isNumeric:ZZ,hasNumericValue:QZ,isPositive:eee,isPrime:tee,isZero:ree,print:iee,typeOf:see,numeric:nee},uS="help",lee=["typed","mathWithTransform","Help"],cee=W(uS,lee,t=>{var{typed:e,mathWithTransform:r,Help:n}=t;return e(uS,{any:function(i){var s,u=i;if(typeof i!="string"){for(s in r)if(He(r,s)&&i===r[s]){u=s;break}}var l=En(uee,u);if(!l){var o=typeof u=="function"?u.name:u;throw new Error('No documentation found on "'+o+'"')}return new n(l)}})}),lS="chain",fee=["typed","Chain"],dee=W(lS,fee,t=>{var{typed:e,Chain:r}=t;return e(lS,{"":function(){return new r},any:function(a){return new r(a)}})}),cS="det",mee=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],hee=W(cS,mee,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:a,divideScalar:i,isZero:s,unaryMinus:u}=t;return e(cS,{any:function(c){return nt(c)},"Array | Matrix":function(c){var f;switch(Ye(c)?f=c.size():Array.isArray(c)?(c=r(c),f=c.size()):f=[],f.length){case 0:return nt(c);case 1:if(f[0]===1)return nt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+pt(f)+")");case 2:{var d=f[0],m=f[1];if(d===m)return l(c.clone().valueOf(),d);if(m===0)return 1;throw new RangeError("Matrix must be square (size: "+pt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(f)+")")}}});function l(o,c,f){if(c===1)return nt(o[0][0]);if(c===2)return n(a(o[0][0],o[1][1]),a(o[1][0],o[0][1]));for(var d=!1,m=new Array(c).fill(0).map((w,g)=>g),h=0;h<c;h++){var v=m[h];if(s(o[v][h])){var T=void 0;for(T=h+1;T<c;T++)if(!s(o[m[T]][h])){v=m[T],m[T]=m[h],m[h]=v,d=!d;break}if(T===c)return o[v][h]}for(var S=o[v][h],C=h===0?1:o[m[h-1]][h-1],_=h+1;_<c;_++)for(var M=m[_],y=h+1;y<c;y++)o[M][y]=i(n(a(o[M][y],S),a(o[M][h],o[v][y])),C)}var x=o[m[c-1]][c-1];return d?u(x):x}}),fS="inv",pee=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],vee=W(fS,pee,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:a,multiply:i,unaryMinus:s,det:u,identity:l,abs:o}=t;return e(fS,{"Array | Matrix":function(d){var m=Ye(d)?d.size():at(d);switch(m.length){case 1:if(m[0]===1)return Ye(d)?r([n(1,d.valueOf()[0])]):[n(1,d[0])];throw new RangeError("Matrix must be square (size: "+pt(m)+")");case 2:{var h=m[0],v=m[1];if(h===v)return Ye(d)?r(c(d.valueOf(),h,v),d.storage()):c(d,h,v);throw new RangeError("Matrix must be square (size: "+pt(m)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(m)+")")}},any:function(d){return n(1,d)}});function c(f,d,m){var h,v,T,S,C;if(d===1){if(S=f[0][0],S===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,S)]]}else if(d===2){var _=u(f);if(_===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],_),n(s(f[0][1]),_)],[n(s(f[1][0]),_),n(f[0][0],_)]]}else{var M=f.concat();for(h=0;h<d;h++)M[h]=M[h].concat();for(var y=l(d).valueOf(),x=0;x<m;x++){var w=o(M[x][x]),g=x;for(h=x+1;h<d;)o(M[h][x])>w&&(w=o(M[h][x]),g=h),h++;if(w===0)throw Error("Cannot calculate inverse, determinant is zero");h=g,h!==x&&(C=M[x],M[x]=M[h],M[h]=C,C=y[x],y[x]=y[h],y[h]=C);var N=M[x],E=y[x];for(h=0;h<d;h++){var b=M[h],D=y[h];if(h!==x){if(b[x]!==0){for(T=n(s(b[x]),N[x]),v=x;v<m;v++)b[v]=a(b[v],i(T,N[v]));for(v=0;v<m;v++)D[v]=a(D[v],i(T,E[v]))}}else{for(T=N[x],v=x;v<m;v++)b[v]=n(b[v],T);for(v=0;v<m;v++)D[v]=n(D[v],T)}}}return y}}}),dS="pinv",gee=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],yee=W(dS,gee,t=>{var{typed:e,matrix:r,inv:n,deepEqual:a,equal:i,dotDivide:s,dot:u,ctranspose:l,divideScalar:o,multiply:c,add:f,Complex:d}=t;return e(dS,{"Array | Matrix":function(_){var M=Ye(_)?_.size():at(_);switch(M.length){case 1:return S(_)?l(_):M[0]===1?n(_):s(l(_),u(_,_));case 2:{if(S(_))return l(_);var y=M[0],x=M[1];if(y===x)try{return n(_)}catch(w){if(!(w instanceof Error&&w.message.match(/Cannot calculate inverse, determinant is zero/)))throw w}return Ye(_)?r(m(_.valueOf(),y,x),_.storage()):m(_,y,x)}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(M)+")")}},any:function(_){return i(_,0)?nt(_):o(1,_)}});function m(C,_,M){var{C:y,F:x}=v(C,_,M),w=c(n(c(l(y),y)),l(y)),g=c(l(x),n(c(x,l(x))));return c(g,w)}function h(C,_,M){for(var y=nt(C),x=0,w=0;w<_;w++){if(M<=x)return y;for(var g=w;T(y[g][x]);)if(g++,_===g&&(g=w,x++,M===x))return y;[y[g],y[w]]=[y[w],y[g]];for(var N=y[w][x],E=0;E<M;E++)y[w][E]=s(y[w][E],N);for(var b=0;b<_;b++)if(b!==w){N=y[b][x];for(var D=0;D<M;D++)y[b][D]=f(y[b][D],c(-1,c(N,y[w][D])))}x++}return y}function v(C,_,M){var y=h(C,_,M),x=C.map((g,N)=>g.filter((E,b)=>b<_&&!T(u(y[b],y[b])))),w=y.filter((g,N)=>!T(u(y[N],y[N])));return{C:x,F:w}}function T(C){return i(f(C,d(1,1)),f(0,d(1,1)))}function S(C){return a(f(C,d(1,1)),f(c(C,0),d(1,1)))}});function xee(t){var{addScalar:e,subtract:r,flatten:n,multiply:a,multiplyScalar:i,divideScalar:s,sqrt:u,abs:l,bignumber:o,diag:c,size:f,reshape:d,inv:m,qr:h,usolve:v,usolveAll:T,equal:S,complex:C,larger:_,smaller:M,matrixFromColumns:y,dot:x}=t;function w(j,K,V,pe){var ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,fe=g(j,K,V,pe,ue);N(j,K,V,pe,ue,fe);var{values:H,C:J}=E(j,K,V,pe,ue);if(ue){var ee=b(j,K,J,fe,H,V,pe);return{values:H,eigenvectors:ee}}return{values:H}}function g(j,K,V,pe,ue){var fe=pe==="BigNumber",H=pe==="Complex",J=fe?o(0):0,ee=fe?o(1):H?C(1):1,ie=fe?o(1):1,oe=fe?o(10):2,ve=i(oe,oe),me;ue&&(me=Array(K).fill(ee));for(var Te=!1;!Te;){Te=!0;for(var ke=0;ke<K;ke++){for(var ze=J,Oe=J,$e=0;$e<K;$e++)ke!==$e&&(ze=e(ze,l(j[$e][ke])),Oe=e(Oe,l(j[ke][$e])));if(!S(ze,0)&&!S(Oe,0)){for(var Q=ie,te=ze,ce=s(Oe,oe),U=i(Oe,oe);M(te,ce);)te=i(te,ve),Q=i(Q,oe);for(;_(te,U);)te=s(te,ve),Q=s(Q,oe);var Y=M(s(e(te,Oe),Q),i(e(ze,Oe),.95));if(Y){Te=!1;for(var re=s(1,Q),se=0;se<K;se++)ke!==se&&(j[ke][se]=i(j[ke][se],re),j[se][ke]=i(j[se][ke],Q));ue&&(me[ke]=i(me[ke],re))}}}}return ue?c(me):null}function N(j,K,V,pe,ue,fe){var H=pe==="BigNumber",J=pe==="Complex",ee=H?o(0):J?C(0):0;H&&(V=o(V));for(var ie=0;ie<K-2;ie++){for(var oe=0,ve=ee,me=ie+1;me<K;me++){var Te=j[me][ie];M(l(ve),l(Te))&&(ve=Te,oe=me)}if(!M(l(ve),V)){if(oe!==ie+1){var ke=j[oe];j[oe]=j[ie+1],j[ie+1]=ke;for(var ze=0;ze<K;ze++){var Oe=j[ze][oe];j[ze][oe]=j[ze][ie+1],j[ze][ie+1]=Oe}if(ue){var $e=fe[oe];fe[oe]=fe[ie+1],fe[ie+1]=$e}}for(var Q=ie+2;Q<K;Q++){var te=s(j[Q][ie],ve);if(te!==0){for(var ce=0;ce<K;ce++)j[Q][ce]=r(j[Q][ce],i(te,j[ie+1][ce]));for(var U=0;U<K;U++)j[U][ie+1]=e(j[U][ie+1],i(te,j[U][Q]));if(ue)for(var Y=0;Y<K;Y++)fe[Q][Y]=r(fe[Q][Y],i(te,fe[ie+1][Y]))}}}}return fe}function E(j,K,V,pe,ue){var fe=pe==="BigNumber",H=pe==="Complex",J=fe?o(1):H?C(1):1;fe&&(V=o(V));for(var ee=nt(j),ie=[],oe=K,ve=[],me=ue?c(Array(K).fill(J)):void 0,Te=ue?c(Array(oe).fill(J)):void 0,ke=0;ke<=100;){ke+=1;for(var ze=ee[oe-1][oe-1],Oe=0;Oe<oe;Oe++)ee[Oe][Oe]=r(ee[Oe][Oe],ze);var{Q:$e,R:Q}=h(ee);ee=a(Q,$e);for(var te=0;te<oe;te++)ee[te][te]=e(ee[te][te],ze);if(ue&&(Te=a(Te,$e)),oe===1||M(l(ee[oe-1][oe-2]),V)){ke=0,ie.push(ee[oe-1][oe-1]),ue&&(ve.unshift([[1]]),F(Te,K),me=a(me,Te),oe>1&&(Te=c(Array(oe-1).fill(J)))),oe-=1,ee.pop();for(var ce=0;ce<oe;ce++)ee[ce].pop()}else if(oe===2||M(l(ee[oe-2][oe-3]),V)){ke=0;var U=D(ee[oe-2][oe-2],ee[oe-2][oe-1],ee[oe-1][oe-2],ee[oe-1][oe-1]);ie.push(...U),ue&&(ve.unshift(I(ee[oe-2][oe-2],ee[oe-2][oe-1],ee[oe-1][oe-2],ee[oe-1][oe-1],U[0],U[1],V,pe)),F(Te,K),me=a(me,Te),oe>2&&(Te=c(Array(oe-2).fill(J)))),oe-=2,ee.pop(),ee.pop();for(var Y=0;Y<oe;Y++)ee[Y].pop(),ee[Y].pop()}if(oe===0)break}if(ie.sort((le,ge)=>+r(l(le),l(ge))),ke>100){var re=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ie.join(", "));throw re.values=ie,re.vectors=[],re}var se=ue?a(me,O(ve,K)):void 0;return{values:ie,C:se}}function b(j,K,V,pe,ue,fe,H){var J=m(V),ee=a(J,j,V),ie=H==="BigNumber",oe=H==="Complex",ve=ie?o(0):oe?C(0):0,me=ie?o(1):oe?C(1):1,Te=[],ke=[];for(var ze of ue){var Oe=P(Te,ze,S);Oe===-1?(Te.push(ze),ke.push(1)):ke[Oe]+=1}for(var $e=[],Q=Te.length,te=Array(K).fill(ve),ce=c(Array(K).fill(me)),U=function(){var se=Te[Y],le=r(ee,a(se,ce)),ge=T(le,te);for(ge.shift();ge.length<ke[Y];){var _e=z(le,K,ge,fe,H);if(_e===null)break;ge.push(_e)}var Se=a(m(pe),V);ge=ge.map(Me=>a(Se,Me)),$e.push(...ge.map(Me=>({value:se,vector:n(Me)})))},Y=0;Y<Q;Y++)U();return $e}function D(j,K,V,pe){var ue=e(j,pe),fe=r(i(j,pe),i(K,V)),H=i(ue,.5),J=i(u(r(i(ue,ue),i(4,fe))),.5);return[e(H,J),r(H,J)]}function I(j,K,V,pe,ue,fe,H,J){var ee=J==="BigNumber",ie=J==="Complex",oe=ee?o(0):ie?C(0):0,ve=ee?o(1):ie?C(1):1;if(M(l(V),H))return[[ve,oe],[oe,ve]];if(_(l(r(ue,fe)),H))return[[r(ue,pe),r(fe,pe)],[V,V]];var me=r(j,ue),Te=r(pe,ue);return M(l(K),H)&&M(l(Te),H)?[[me,ve],[V,oe]]:[[K,oe],[Te,ve]]}function F(j,K){for(var V=0;V<j.length;V++)j[V].push(...Array(K-j[V].length).fill(0));for(var pe=j.length;pe<K;pe++)j.push(Array(K).fill(0)),j[pe][pe]=1;return j}function O(j,K){for(var V=[],pe=0;pe<K;pe++)V[pe]=Array(K).fill(0);var ue=0;for(var fe of j){for(var H=fe.length,J=0;J<H;J++)for(var ee=0;ee<H;ee++)V[ue+J][ue+ee]=fe[J][ee];ue+=H}return V}function P(j,K,V){for(var pe=0;pe<j.length;pe++)if(V(j[pe],K))return pe;return-1}function z(j,K,V,pe,ue){for(var fe=ue==="BigNumber"?o(1e3):1e3,H,J=0;J<5;++J){H=$(K,V,ue);try{H=v(j,H)}catch{continue}if(_(q(H),fe))break}if(J>=5)return null;for(J=0;;){var ee=v(j,H);if(M(q(L(H,[ee])),pe))break;if(++J>=10)return null;H=ae(ee)}return H}function $(j,K,V){var pe=V==="BigNumber",ue=V==="Complex",fe=Array(j).fill(0).map(H=>2*Math.random()-1);return pe&&(fe=fe.map(H=>o(H))),ue&&(fe=fe.map(H=>C(H))),fe=L(fe,K),ae(fe,V)}function L(j,K){var V=f(j);for(var pe of K)pe=d(pe,V),j=r(j,a(s(x(pe,j),x(pe,pe)),pe));return j}function q(j){return l(u(x(j,j)))}function ae(j,K){var V=K==="BigNumber",pe=K==="Complex",ue=V?o(1):pe?C(1):1;return a(s(ue,q(j)),j)}return w}function bee(t){var{config:e,addScalar:r,subtract:n,abs:a,atan:i,cos:s,sin:u,multiplyScalar:l,inv:o,bignumber:c,multiply:f,add:d}=t;function m(N,E){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,D=arguments.length>3?arguments[3]:void 0,I=arguments.length>4?arguments[4]:void 0;if(D==="number")return h(N,b,I);if(D==="BigNumber")return v(N,b,I);throw TypeError("Unsupported data type: "+D)}function h(N,E,b){var D=N.length,I=Math.abs(E/D),F,O;if(b){O=new Array(D);for(var P=0;P<D;P++)O[P]=Array(D).fill(0),O[P][P]=1}for(var z=x(N);Math.abs(z[1])>=Math.abs(I);){var $=z[0][0],L=z[0][1];F=T(N[$][$],N[L][L],N[$][L]),N=y(N,F,$,L),b&&(O=C(O,F,$,L)),z=x(N)}for(var q=Array(D).fill(0),ae=0;ae<D;ae++)q[ae]=N[ae][ae];return g(nt(q),O,b)}function v(N,E,b){var D=N.length,I=a(E/D),F,O;if(b){O=new Array(D);for(var P=0;P<D;P++)O[P]=Array(D).fill(0),O[P][P]=1}for(var z=w(N);a(z[1])>=a(I);){var $=z[0][0],L=z[0][1];F=S(N[$][$],N[L][L],N[$][L]),N=M(N,F,$,L),b&&(O=_(O,F,$,L)),z=w(N)}for(var q=Array(D).fill(0),ae=0;ae<D;ae++)q[ae]=N[ae][ae];return g(nt(q),O,b)}function T(N,E,b){var D=E-N;return Math.abs(D)<=e.relTol?Math.PI/4:.5*Math.atan(2*b/(E-N))}function S(N,E,b){var D=n(E,N);return a(D)<=e.relTol?c(-1).acos().div(4):l(.5,i(f(2,b,o(D))))}function C(N,E,b,D){for(var I=N.length,F=Math.cos(E),O=Math.sin(E),P=Array(I).fill(0),z=Array(I).fill(0),$=0;$<I;$++)P[$]=F*N[$][b]-O*N[$][D],z[$]=O*N[$][b]+F*N[$][D];for(var L=0;L<I;L++)N[L][b]=P[L],N[L][D]=z[L];return N}function _(N,E,b,D){for(var I=N.length,F=s(E),O=u(E),P=Array(I).fill(c(0)),z=Array(I).fill(c(0)),$=0;$<I;$++)P[$]=n(l(F,N[$][b]),l(O,N[$][D])),z[$]=r(l(O,N[$][b]),l(F,N[$][D]));for(var L=0;L<I;L++)N[L][b]=P[L],N[L][D]=z[L];return N}function M(N,E,b,D){for(var I=N.length,F=c(s(E)),O=c(u(E)),P=l(F,F),z=l(O,O),$=Array(I).fill(c(0)),L=Array(I).fill(c(0)),q=f(c(2),F,O,N[b][D]),ae=r(n(l(P,N[b][b]),q),l(z,N[D][D])),j=d(l(z,N[b][b]),q,l(P,N[D][D])),K=0;K<I;K++)$[K]=n(l(F,N[b][K]),l(O,N[D][K])),L[K]=r(l(O,N[b][K]),l(F,N[D][K]));N[b][b]=ae,N[D][D]=j,N[b][D]=c(0),N[D][b]=c(0);for(var V=0;V<I;V++)V!==b&&V!==D&&(N[b][V]=$[V],N[V][b]=$[V],N[D][V]=L[V],N[V][D]=L[V]);return N}function y(N,E,b,D){for(var I=N.length,F=Math.cos(E),O=Math.sin(E),P=F*F,z=O*O,$=Array(I).fill(0),L=Array(I).fill(0),q=P*N[b][b]-2*F*O*N[b][D]+z*N[D][D],ae=z*N[b][b]+2*F*O*N[b][D]+P*N[D][D],j=0;j<I;j++)$[j]=F*N[b][j]-O*N[D][j],L[j]=O*N[b][j]+F*N[D][j];N[b][b]=q,N[D][D]=ae,N[b][D]=0,N[D][b]=0;for(var K=0;K<I;K++)K!==b&&K!==D&&(N[b][K]=$[K],N[K][b]=$[K],N[D][K]=L[K],N[K][D]=L[K]);return N}function x(N){for(var E=N.length,b=0,D=[0,1],I=0;I<E;I++)for(var F=I+1;F<E;F++)Math.abs(b)<Math.abs(N[I][F])&&(b=Math.abs(N[I][F]),D=[I,F]);return[D,b]}function w(N){for(var E=N.length,b=0,D=[0,1],I=0;I<E;I++)for(var F=I+1;F<E;F++)a(b)<a(N[I][F])&&(b=a(N[I][F]),D=[I,F]);return[D,b]}function g(N,E,b){var D=N.length,I=Array(D),F;if(b){F=Array(D);for(var O=0;O<D;O++)F[O]=Array(D)}for(var P=0;P<D;P++){for(var z=0,$=N[0],L=0;L<N.length;L++)a(N[L])<a($)&&(z=L,$=N[z]);if(I[P]=N.splice(z,1)[0],b)for(var q=0;q<D;q++)F[P][q]=E[q][z],E[q].splice(z,1)}if(!b)return{values:I};var ae=F.map((j,K)=>({value:I[K],vector:j}));return{values:I,eigenvectors:ae}}return m}var wee="eigs",Nee=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],_ee=W(wee,Nee,t=>{var{config:e,typed:r,matrix:n,addScalar:a,subtract:i,equal:s,abs:u,atan:l,cos:o,sin:c,multiplyScalar:f,divideScalar:d,inv:m,bignumber:h,multiply:v,add:T,larger:S,column:C,flatten:_,number:M,complex:y,sqrt:x,diag:w,size:g,reshape:N,qr:E,usolve:b,usolveAll:D,im:I,re:F,smaller:O,matrixFromColumns:P,dot:z}=t,$=bee({config:e,addScalar:a,subtract:i,abs:u,atan:l,cos:o,sin:c,multiplyScalar:f,inv:m,bignumber:h,multiply:v,add:T}),L=xee({addScalar:a,subtract:i,multiply:v,multiplyScalar:f,flatten:_,divideScalar:d,sqrt:x,abs:u,bignumber:h,diag:w,size:g,reshape:N,qr:E,inv:m,usolve:b,usolveAll:D,equal:s,complex:y,larger:S,smaller:O,matrixFromColumns:P,dot:z});return r("eigs",{Array:function(fe){return q(n(fe))},"Array, number|BigNumber":function(fe,H){return q(n(fe),{precision:H})},"Array, Object"(ue,fe){return q(n(ue),fe)},Matrix:function(fe){return q(fe,{matricize:!0})},"Matrix, number|BigNumber":function(fe,H){return q(fe,{precision:H,matricize:!0})},"Matrix, Object":function(fe,H){var J={matricize:!0};return Nr(J,H),q(fe,J)}});function q(ue){var fe,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J="eigenvectors"in H?H.eigenvectors:!0,ee=(fe=H.precision)!==null&&fe!==void 0?fe:e.relTol,ie=ae(ue,ee,J);return H.matricize&&(ie.values=n(ie.values),J&&(ie.eigenvectors=ie.eigenvectors.map(oe=>{var{value:ve,vector:me}=oe;return{value:ve,vector:n(me)}}))),J&&Object.defineProperty(ie,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),ie}function ae(ue,fe,H){var J=ue.toArray(),ee=ue.size();if(ee.length!==2||ee[0]!==ee[1])throw new RangeError("Matrix must be square (size: ".concat(pt(ee),")"));var ie=ee[0];if(K(J,ie,fe)&&(V(J,ie),j(J,ie,fe))){var oe=pe(ue,J,ie);return $(J,ie,fe,oe,H)}var ve=pe(ue,J,ie);return L(J,ie,fe,ve,H)}function j(ue,fe,H){for(var J=0;J<fe;J++)for(var ee=J;ee<fe;ee++)if(S(h(u(i(ue[J][ee],ue[ee][J]))),H))return!1;return!0}function K(ue,fe,H){for(var J=0;J<fe;J++)for(var ee=0;ee<fe;ee++)if(S(h(u(I(ue[J][ee]))),H))return!1;return!0}function V(ue,fe){for(var H=0;H<fe;H++)for(var J=0;J<fe;J++)ue[H][J]=F(ue[H][J])}function pe(ue,fe,H){var J=ue.datatype();if(J==="number"||J==="BigNumber"||J==="Complex")return J;for(var ee=!1,ie=!1,oe=!1,ve=0;ve<H;ve++)for(var me=0;me<H;me++){var Te=fe[ve][me];if(Xe(Te)||tf(Te))ee=!0;else if(ut(Te))ie=!0;else if(hi(Te))oe=!0;else throw TypeError("Unsupported type in Matrix: "+Xt(Te))}if(ie&&oe&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),oe){for(var ke=0;ke<H;ke++)for(var ze=0;ze<H;ze++)fe[ke][ze]=y(fe[ke][ze]);return"Complex"}if(ie){for(var Oe=0;Oe<H;Oe++)for(var $e=0;$e<H;$e++)fe[Oe][$e]=h(fe[Oe][$e]);return"BigNumber"}if(ee){for(var Q=0;Q<H;Q++)for(var te=0;te<H;te++)fe[Q][te]=M(fe[Q][te]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),mS="expm",Eee=["typed","abs","add","identity","inv","multiply"],See=W(mS,Eee,t=>{var{typed:e,abs:r,add:n,identity:a,inv:i,multiply:s}=t;return e(mS,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+pt(d)+")");for(var m=d[0],h=1e-15,v=u(f),T=l(v,h),S=T.q,C=T.j,_=s(f,Math.pow(2,-C)),M=a(m),y=a(m),x=1,w=_,g=-1,N=1;N<=S;N++)N>1&&(w=s(w,_),g=-g),x=x*(S-N+1)/((2*S-N+1)*N),M=n(M,s(x,w)),y=n(y,s(x*g,w));for(var E=s(i(y),M),b=0;b<C;b++)E=s(E,E);return Js(f)?f.createSparseMatrix(E):E}});function u(c){for(var f=c.size()[0],d=0,m=0;m<f;m++){for(var h=0,v=0;v<f;v++)h+=r(c.get([m,v]));d=Math.max(h,d)}return d}function l(c,f){for(var d=30,m=0;m<d;m++)for(var h=0;h<=m;h++){var v=m-h;if(o(c,h,v)<f)return{q:h,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function o(c,f,d){for(var m=1,h=2;h<=f;h++)m*=h;for(var v=m,T=f+1;T<=2*f;T++)v*=T;var S=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*m*m/(v*S)}}),hS="sqrtm",Aee=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Dee=W(hS,Aee,t=>{var{typed:e,abs:r,add:n,multiply:a,map:i,sqrt:s,subtract:u,inv:l,size:o,max:c,identity:f}=t,d=1e3,m=1e-6;function h(v){var T,S=0,C=v,_=f(o(v));do{var M=C;if(C=a(.5,n(M,l(_))),_=a(.5,n(_,l(M))),T=c(r(u(C,M))),T>m&&++S>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(T>m);return C}return e(hS,{"Array | Matrix":function(T){var S=Ye(T)?T.size():at(T);switch(S.length){case 1:if(S[0]===1)return i(T,s);throw new RangeError("Matrix must be square (size: "+pt(S)+")");case 2:{var C=S[0],_=S[1];if(C===_)return h(T);throw new RangeError("Matrix must be square (size: "+pt(S)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+pt(S)+")")}}})}),pS="sylvester",Cee=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Tee=W(pS,Cee,t=>{var{typed:e,schur:r,matrixFromColumns:n,matrix:a,multiply:i,range:s,concat:u,transpose:l,index:o,subset:c,add:f,subtract:d,identity:m,lusolve:h,abs:v,config:T}=t;return e(pS,{"Matrix, Matrix, Matrix":S,"Array, Matrix, Matrix":function(_,M,y){return S(a(_),M,y)},"Array, Array, Matrix":function(_,M,y){return S(a(_),a(M),y)},"Array, Matrix, Array":function(_,M,y){return S(a(_),M,a(y))},"Matrix, Array, Matrix":function(_,M,y){return S(_,a(M),y)},"Matrix, Array, Array":function(_,M,y){return S(_,a(M),a(y))},"Matrix, Matrix, Array":function(_,M,y){return S(_,M,a(y))},"Array, Array, Array":function(_,M,y){return S(a(_),a(M),a(y)).toArray()}});function S(C,_,M){for(var y=_.size()[0],x=C.size()[0],w=r(C),g=w.T,N=w.U,E=r(i(-1,_)),b=E.T,D=E.U,I=i(i(l(N),M),D),F=s(0,x),O=[],P=(ve,me)=>u(ve,me,1),z=(ve,me)=>u(ve,me,0),$=0;$<y;$++)if($<y-1&&v(c(b,o($+1,$)))>1e-5){for(var L=z(c(I,o(F,[$])),c(I,o(F,[$+1]))),q=0;q<$;q++)L=f(L,z(i(O[q],c(b,o(q,$))),i(O[q],c(b,o(q,$+1)))));var ae=i(m(x),i(-1,c(b,o($,$)))),j=i(m(x),i(-1,c(b,o($+1,$)))),K=i(m(x),i(-1,c(b,o($,$+1)))),V=i(m(x),i(-1,c(b,o($+1,$+1)))),pe=z(P(f(g,ae),j),P(K,f(g,V))),ue=h(pe,L);O[$]=ue.subset(o(s(0,x),[0])),O[$+1]=ue.subset(o(s(x,2*x),[0])),$++}else{for(var fe=c(I,o(F,[$])),H=0;H<$;H++)fe=f(fe,i(O[H],c(b,o(H,$))));var J=c(b,o($,$)),ee=d(g,i(J,m(x)));O[$]=h(ee,fe)}var ie=a(n(...O)),oe=i(N,i(ie,l(D)));return oe}}),vS="schur",Mee=["typed","matrix","identity","multiply","qr","norm","subtract"],Iee=W(vS,Mee,t=>{var{typed:e,matrix:r,identity:n,multiply:a,qr:i,norm:s,subtract:u}=t;return e(vS,{Array:function(c){var f=l(r(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(o){var c=o.size()[0],f=o,d=n(c),m=0,h;do{h=f;var v=i(f),T=v.Q,S=v.R;if(f=a(S,T),d=a(d,T),m++>100)break}while(s(u(f,h))>1e-4);return{U:d,T:f}}}),gS="lyap",Pee=["typed","matrix","sylvester","multiply","transpose"],Fee=W(gS,Pee,t=>{var{typed:e,matrix:r,sylvester:n,multiply:a,transpose:i}=t;return e(gS,{"Matrix, Matrix":function(u,l){return n(u,i(u),a(-1,l))},"Array, Matrix":function(u,l){return n(r(u),i(r(u)),a(-1,l))},"Matrix, Array":function(u,l){return n(u,i(r(u)),r(a(-1,l)))},"Array, Array":function(u,l){return n(r(u),i(r(u)),r(a(-1,l))).toArray()}})}),Ree="divide",Oee=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Bee=W(Ree,Oee,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:a,divideScalar:i,inv:s}=t,u=on({typed:e,equalScalar:a}),l=va({typed:e});return e("divide",B3({"Array | Matrix, Array | Matrix":function(c,f){return n(c,s(f))},"DenseMatrix, any":function(c,f){return l(c,f,i,!1)},"SparseMatrix, any":function(c,f){return u(c,f,i,!1)},"Array, any":function(c,f){return l(r(c),f,i,!1).valueOf()},"any, Array | Matrix":function(c,f){return n(c,s(f))}},i.signatures))}),yS="distance",jee=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],kee=W(yS,jee,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:a,divideScalar:i,deepEqual:s,sqrt:u,abs:l}=t;return e(yS,{"Array, Array, Array":function(y,x,w){if(y.length===2&&x.length===2&&w.length===2){if(!c(y))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(x,w))throw new TypeError("LinePoint1 should not be same with LinePoint2");var g=n(w[1],x[1]),N=n(x[0],w[0]),E=n(a(w[0],x[1]),a(x[0],w[1]));return T(y[0],y[1],g,N,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(y,x,w){if(Object.keys(y).length===2&&Object.keys(x).length===2&&Object.keys(w).length===2){if(!c(y))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(w))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(h(x),h(w)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in y&&"pointY"in y&&"lineOnePtX"in x&&"lineOnePtY"in x&&"lineTwoPtX"in w&&"lineTwoPtY"in w){var g=n(w.lineTwoPtY,x.lineOnePtY),N=n(x.lineOnePtX,w.lineTwoPtX),E=n(a(w.lineTwoPtX,x.lineOnePtY),a(x.lineOnePtX,w.lineTwoPtY));return T(y.pointX,y.pointY,g,N,E)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(y,x){if(y.length===2&&x.length===3){if(!c(y))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return T(y[0],y[1],x[0],x[1],x[2])}else if(y.length===3&&x.length===6){if(!f(y))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(x))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return S(y[0],y[1],y[2],x[0],x[1],x[2],x[3],x[4],x[5])}else if(y.length===x.length&&y.length>0){if(!d(y))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");return C(y,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(y,x){if(Object.keys(y).length===2&&Object.keys(x).length===3){if(!c(y))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in y&&"pointY"in y&&"xCoeffLine"in x&&"yCoeffLine"in x&&"constant"in x)return T(y.pointX,y.pointY,x.xCoeffLine,x.yCoeffLine,x.constant);throw new TypeError("Key names do not match")}else if(Object.keys(y).length===3&&Object.keys(x).length===6){if(!f(y))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!m(x))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in y&&"pointY"in y&&"x0"in x&&"y0"in x&&"z0"in x&&"a"in x&&"b"in x&&"c"in x)return S(y.pointX,y.pointY,y.pointZ,x.x0,x.y0,x.z0,x.a,x.b,x.c);throw new TypeError("Key names do not match")}else if(Object.keys(y).length===2&&Object.keys(x).length===2){if(!c(y))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in y&&"pointOneY"in y&&"pointTwoX"in x&&"pointTwoY"in x)return C([y.pointOneX,y.pointOneY],[x.pointTwoX,x.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(y).length===3&&Object.keys(x).length===3){if(!f(y))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in y&&"pointOneY"in y&&"pointOneZ"in y&&"pointTwoX"in x&&"pointTwoY"in x&&"pointTwoZ"in x)return C([y.pointOneX,y.pointOneY,y.pointOneZ],[x.pointTwoX,x.pointTwoY,x.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(y){if(!v(y))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return _(y)}});function o(M){return typeof M=="number"||ut(M)}function c(M){return M.constructor!==Array&&(M=h(M)),o(M[0])&&o(M[1])}function f(M){return M.constructor!==Array&&(M=h(M)),o(M[0])&&o(M[1])&&o(M[2])}function d(M){return Array.isArray(M)||(M=h(M)),M.every(o)}function m(M){return M.constructor!==Array&&(M=h(M)),o(M[0])&&o(M[1])&&o(M[2])&&o(M[3])&&o(M[4])&&o(M[5])}function h(M){for(var y=Object.keys(M),x=[],w=0;w<y.length;w++)x.push(M[y[w]]);return x}function v(M){if(M[0].length===2&&o(M[0][0])&&o(M[0][1])){if(M.some(y=>y.length!==2||!o(y[0])||!o(y[1])))return!1}else if(M[0].length===3&&o(M[0][0])&&o(M[0][1])&&o(M[0][2])){if(M.some(y=>y.length!==3||!o(y[0])||!o(y[1])||!o(y[2])))return!1}else return!1;return!0}function T(M,y,x,w,g){var N=l(r(r(a(x,M),a(w,y)),g)),E=u(r(a(x,x),a(w,w)));return i(N,E)}function S(M,y,x,w,g,N,E,b,D){var I=[n(a(n(g,y),D),a(n(N,x),b)),n(a(n(N,x),E),a(n(w,M),D)),n(a(n(w,M),b),a(n(g,y),E))];I=u(r(r(a(I[0],I[0]),a(I[1],I[1])),a(I[2],I[2])));var F=u(r(r(a(E,E),a(b,b)),a(D,D)));return i(I,F)}function C(M,y){for(var x=M.length,w=0,g=0,N=0;N<x;N++)g=n(M[N],y[N]),w=r(a(g,g),w);return u(w)}function _(M){for(var y=[],x=[],w=[],g=0;g<M.length-1;g++)for(var N=g+1;N<M.length;N++)M[0].length===2?(x=[M[g][0],M[g][1]],w=[M[N][0],M[N][1]]):M[0].length===3&&(x=[M[g][0],M[g][1],M[g][2]],w=[M[N][0],M[N][1],M[N][2]]),y.push(C(x,w));return y}}),$ee="intersect",Lee=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],zee=W($ee,Lee,t=>{var{typed:e,config:r,abs:n,add:a,addScalar:i,matrix:s,multiply:u,multiplyScalar:l,divideScalar:o,subtract:c,smaller:f,equalScalar:d,flatten:m,isZero:h,isNumeric:v}=t;return e("intersect",{"Array, Array, Array":T,"Array, Array, Array, Array":S,"Matrix, Matrix, Matrix":function(b,D,I){var F=T(b.valueOf(),D.valueOf(),I.valueOf());return F===null?null:s(F)},"Matrix, Matrix, Matrix, Matrix":function(b,D,I,F){var O=S(b.valueOf(),D.valueOf(),I.valueOf(),F.valueOf());return O===null?null:s(O)}});function T(E,b,D){if(E=C(E),b=C(b),D=C(D),!M(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!M(b))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!y(D))throw new TypeError("Array with 4 numbers expected as third argument");return N(E[0],E[1],E[2],b[0],b[1],b[2],D[0],D[1],D[2],D[3])}function S(E,b,D,I){if(E=C(E),b=C(b),D=C(D),I=C(I),E.length===2){if(!_(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!_(b))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!_(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!_(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return x(E,b,D,I)}else if(E.length===3){if(!M(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!M(b))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!M(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!M(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return g(E[0],E[1],E[2],b[0],b[1],b[2],D[0],D[1],D[2],I[0],I[1],I[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function C(E){return E.length===1?E[0]:E.length>1&&Array.isArray(E[0])&&E.every(b=>Array.isArray(b)&&b.length===1)?m(E):E}function _(E){return E.length===2&&v(E[0])&&v(E[1])}function M(E){return E.length===3&&v(E[0])&&v(E[1])&&v(E[2])}function y(E){return E.length===4&&v(E[0])&&v(E[1])&&v(E[2])&&v(E[3])}function x(E,b,D,I){var F=E,O=D,P=c(F,b),z=c(O,I),$=c(l(P[0],z[1]),l(z[0],P[1]));if(h($)||f(n($),r.relTol))return null;var L=l(z[0],F[1]),q=l(z[1],F[0]),ae=l(z[0],O[1]),j=l(z[1],O[0]),K=o(i(c(c(L,q),ae),j),$);return a(u(P,K),F)}function w(E,b,D,I,F,O,P,z,$,L,q,ae){var j=l(c(E,b),c(D,I)),K=l(c(F,O),c(P,z)),V=l(c($,L),c(q,ae));return i(i(j,K),V)}function g(E,b,D,I,F,O,P,z,$,L,q,ae){var j=w(E,P,L,P,b,z,q,z,D,$,ae,$),K=w(L,P,I,E,q,z,F,b,ae,$,O,D),V=w(E,P,I,E,b,z,F,b,D,$,O,D),pe=w(L,P,L,P,q,z,q,z,ae,$,ae,$),ue=w(I,E,I,E,F,b,F,b,O,D,O,D),fe=c(l(j,K),l(V,pe)),H=c(l(ue,pe),l(K,K));if(h(H))return null;var J=o(fe,H),ee=o(i(j,l(J,K)),pe),ie=i(E,l(J,c(I,E))),oe=i(b,l(J,c(F,b))),ve=i(D,l(J,c(O,D))),me=i(P,l(ee,c(L,P))),Te=i(z,l(ee,c(q,z))),ke=i($,l(ee,c(ae,$)));return d(ie,me)&&d(oe,Te)&&d(ve,ke)?[ie,oe,ve]:null}function N(E,b,D,I,F,O,P,z,$,L){var q=l(E,P),ae=l(I,P),j=l(b,z),K=l(F,z),V=l(D,$),pe=l(O,$),ue=c(c(c(L,q),j),V),fe=c(c(c(i(i(ae,K),pe),q),j),V),H=o(ue,fe),J=i(E,l(H,c(I,E))),ee=i(b,l(H,c(F,b))),ie=i(D,l(H,c(O,D)));return[J,ee,ie]}}),xS="sum",Vee=["typed","config","add","numeric"],C4=W(xS,Vee,t=>{var{typed:e,config:r,add:n,numeric:a}=t;return e(xS,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":s,"...":function(l){if(nl(l))throw new TypeError("Scalar values expected in function sum");return i(l)}});function i(u){var l;return Ns(u,function(o){try{l=l===void 0?o:n(l,o)}catch(c){throw Dn(c,"sum",o)}}),l===void 0&&(l=a(0,r.number)),typeof l=="string"&&(l=a(l,As(l,r))),l}function s(u,l){try{var o=jh(u,l,n);return o}catch(c){throw Dn(c,"sum")}}}),gd="cumsum",Uee=["typed","add","unaryPlus"],T4=W(gd,Uee,t=>{var{typed:e,add:r,unaryPlus:n}=t;return e(gd,{Array:a,Matrix:function(o){return o.create(a(o.valueOf(),o.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(o,c){return o.create(s(o.valueOf(),c),o.datatype())},"...":function(o){if(nl(o))throw new TypeError("All values expected to be scalar in function cumsum");return a(o)}});function a(l){try{return i(l)}catch(o){throw Dn(o,gd)}}function i(l){if(l.length===0)return[];for(var o=[n(l[0])],c=1;c<l.length;++c)o.push(r(o[c-1],l[c]));return o}function s(l,o){var c=at(l);if(o<0||o>=c.length)throw new Ia(o,c.length);try{return u(l,o)}catch(f){throw Dn(f,gd)}}function u(l,o){var c,f,d;if(o<=0){var m=l[0][0];if(Array.isArray(m)){for(d=cM(l),f=[],c=0;c<d.length;c++)f[c]=u(d[c],o-1);return f}else return i(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=u(l[c],o-1);return f}}}),bS="mean",qee=["typed","add","divide"],M4=W(bS,qee,t=>{var{typed:e,add:r,divide:n}=t;return e(bS,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":a,"...":function(u){if(nl(u))throw new TypeError("Scalar values expected in function mean");return i(u)}});function a(s,u){try{var l=jh(s,u,r),o=Array.isArray(s)?at(s):s.size();return n(l,o[u])}catch(c){throw Dn(c,"mean")}}function i(s){var u,l=0;if(Ns(s,function(o){try{u=u===void 0?o:r(u,o),l++}catch(c){throw Dn(c,"mean",o)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(u,l)}}),wS="median",Hee=["typed","add","divide","compare","partitionSelect"],Gee=W(wS,Hee,t=>{var{typed:e,add:r,divide:n,compare:a,partitionSelect:i}=t;function s(o){try{o=Ct(o.valueOf());var c=o.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=i(o,f+1),m=o[f],h=0;h<f;++h)a(o[h],m)>0&&(m=o[h]);return l(m,d)}else{var v=i(o,(c-1)/2);return u(v)}}catch(T){throw Dn(T,"median")}}var u=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return n(r(c,f),2)}});return e(wS,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(nl(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),NS="mad",Wee=["typed","abs","map","median","subtract"],Qee=W(NS,Wee,t=>{var{typed:e,abs:r,map:n,median:a,subtract:i}=t;return e(NS,{"Array | Matrix":s,"...":function(l){return s(l)}});function s(u){if(u=Ct(u.valueOf()),u.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=a(u);return a(n(u,function(o){return r(i(o,l))}))}catch(o){throw o instanceof TypeError&&o.message.includes("median")?new TypeError(o.message.replace("median","mad")):Dn(o,"mad")}}}),tv="unbiased",_S="variance",Xee=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],I4=W(_S,Xee,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:u}=t;return e(_S,{"Array | Matrix":function(f){return l(f,tv)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,d){return o(f,d,tv)},"Array | Matrix, number | BigNumber, string":o,"...":function(f){return l(f,tv)}});function l(c,f){var d,m=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Ns(c,function(T){try{d=d===void 0?T:r(d,T),m++}catch(S){throw Dn(S,"variance",T)}}),m===0)throw new Error("Cannot calculate variance of an empty array");var h=i(d,m);if(d=void 0,Ns(c,function(T){var S=n(T,h);d=d===void 0?a(S,S):r(d,a(S,S))}),u(d))return d;switch(f){case"uncorrected":return i(d,m);case"biased":return i(d,m+1);case"unbiased":{var v=ut(d)?d.mul(0):0;return m===1?v:i(d,m-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function o(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,m=>l(m,d))}catch(m){throw Dn(m,"variance")}}}),ES="quantileSeq",Kee=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],P4=W(ES,Kee,t=>{var{typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:u,compare:l,isInteger:o,smaller:c,smallerEq:f,larger:d,mapSlices:m}=t;return e(ES,{"Array | Matrix, number | BigNumber":(C,_)=>v(C,_,!1),"Array | Matrix, number | BigNumber, number":(C,_,M)=>h(C,_,!1,M,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(C,_,M,y)=>h(C,_,M,y,v),"Array | Matrix, Array | Matrix":(C,_)=>T(C,_,!1),"Array | Matrix, Array | Matrix, number":(C,_,M)=>h(C,_,!1,M,T),"Array | Matrix, Array | Matrix, boolean":T,"Array | Matrix, Array | Matrix, boolean, number":(C,_,M,y)=>h(C,_,M,y,T)});function h(C,_,M,y,x){return m(C,y,w=>x(w,_,M))}function v(C,_,M){var y,x=C.valueOf();if(c(_,0))throw new Error("N/prob must be non-negative");if(f(_,1))return Xe(_)?S(x,_,M):r(S(x,_,M));if(d(_,1)){if(!o(_))throw new Error("N must be a positive integer");if(d(_,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var w=n(_,1);y=[];for(var g=0;c(g,_);g++){var N=i(g+1,w);y.push(S(x,N,M))}return Xe(_)?y:r(y)}}function T(C,_,M){for(var y=C.valueOf(),x=_.valueOf(),w=[],g=0;g<x.length;++g)w.push(S(y,x[g],M));return w}function S(C,_,M){var y=Ct(C),x=y.length;if(x===0)throw new Error("Cannot calculate quantile of an empty sequence");var w=Xe(_)?_*(x-1):_.times(x-1),g=Xe(_)?Math.floor(w):w.floor().toNumber(),N=Xe(_)?w%1:w.minus(g);if(o(w))return M?y[w]:u(y,Xe(_)?w:w.valueOf());var E,b;if(M)E=y[g],b=y[g+1];else{b=u(y,g+1),E=y[g];for(var D=0;D<g;++D)l(y[D],E)>0&&(E=y[D])}return n(s(E,a(1,N)),s(b,N))}}),SS="std",Jee=["typed","map","sqrt","variance"],F4=W(SS,Jee,t=>{var{typed:e,map:r,sqrt:n,variance:a}=t;return e(SS,{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(u){return i(u)}});function i(s,u){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=a.apply(null,arguments);return Kn(l)?r(l,n):n(l)}catch(o){throw o instanceof TypeError&&o.message.includes(" variance")?new TypeError(o.message.replace(" variance"," std")):o}}}),AS="corr",Yee=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],Zee=W(AS,Yee,t=>{var{typed:e,matrix:r,sqrt:n,sum:a,add:i,subtract:s,multiply:u,pow:l,divide:o}=t;return e(AS,{"Array, Array":function(m,h){return c(m,h)},"Matrix, Matrix":function(m,h){var v=c(m.toArray(),h.toArray());return Array.isArray(v)?r(v):v}});function c(d,m){var h=[];if(Array.isArray(d[0])&&Array.isArray(m[0])){if(d.length!==m.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==m[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");h.push(f(d[v],m[v]))}return h}else{if(d.length!==m.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,m)}}function f(d,m){var h=d.length,v=a(d),T=a(m),S=d.reduce((x,w,g)=>i(x,u(w,m[g])),0),C=a(d.map(x=>l(x,2))),_=a(m.map(x=>l(x,2))),M=s(u(h,S),u(v,T)),y=n(u(s(u(h,C),l(v,2)),s(u(h,_),l(T,2))));return o(M,y)}}),DS="combinations",ete=["typed"],tte=W(DS,ete,t=>{var{typed:e}=t;return e(DS,{"number, number":IM,"BigNumber, BigNumber":function(n,a){var i=n.constructor,s,u,l=n.minus(a),o=new i(1);if(!CS(n)||!CS(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=o,a.lt(l))for(u=o;u.lte(l);u=u.plus(o))s=s.times(a.plus(u)).dividedBy(u);else for(u=o;u.lte(a);u=u.plus(o))s=s.times(l.plus(u)).dividedBy(u);return s}})});function CS(t){return t.isInteger()&&t.gte(0)}var TS="combinationsWithRep",rte=["typed"],nte=W(TS,rte,t=>{var{typed:e}=t;return e(TS,{"number, number":function(n,a){if(!We(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!We(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<n-1){var i=di(n,n+a-1);return i/di(1,a)}var s=di(a+1,n+a-1);return s/di(1,n-1)},"BigNumber, BigNumber":function(n,a){var i=n.constructor,s,u,l=new i(1),o=n.minus(l);if(!MS(n)||!MS(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=l,a.lt(o))for(u=l;u.lte(o);u=u.plus(l))s=s.times(a.plus(u)).dividedBy(u);else for(u=l;u.lte(a);u=u.plus(l))s=s.times(o.plus(u)).dividedBy(u);return s}})});function MS(t){return t.isInteger()&&t.gte(0)}var IS="gamma",ate=["typed","config","multiplyScalar","pow","BigNumber","Complex"],ite=W(IS,ate,t=>{var{typed:e,config:r,multiplyScalar:n,pow:a,BigNumber:i,Complex:s}=t;function u(o){if(o.im===0)return Bm(o.re);if(o.re<.5){var c=new s(1-o.re,-o.im),f=new s(Math.PI*o.re,Math.PI*o.im);return new s(Math.PI).div(f.sin()).div(u(c))}o=new s(o.re-1,o.im);for(var d=new s(_u[0],0),m=1;m<_u.length;++m){var h=new s(_u[m],0);d=d.add(h.div(o.add(m)))}var v=new s(o.re+FM+.5,o.im),T=Math.sqrt(2*Math.PI),S=v.pow(o.add(.5)),C=v.neg().exp();return d.mul(T).mul(S).mul(C)}return e(IS,{number:Bm,Complex:u,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new i(1/0):l(c.minus(1));if(!c.isFinite())return new i(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(o){if(o<8)return new i([1,1,2,6,24,120,720,5040][o]);var c=r.precision+(Math.log(o.toNumber())|0),f=i.clone({precision:c});if(o%2===1)return o.times(l(new i(o-1)));for(var d=o,m=new f(o),h=o.toNumber();d>2;)d-=2,h+=d,m=m.times(h);return new i(m.toPrecision(i.precision))}}),PS="lgamma",ste=["Complex","typed"],ote=W(PS,ste,t=>{var{Complex:e,typed:r}=t,n=7,a=7,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(PS,{number:jm,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(o){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(o.isNaN())return new e(NaN,NaN);if(o.im===0)return new e(jm(o.re),0);if(o.re>=n||Math.abs(o.im)>=a)return u(o);if(o.re<=d){var m=zk(c,o.im)*Math.floor(.5*o.re+.25),h=o.mul(Math.PI).sin().log(),v=s(new e(1-o.re,-o.im));return new e(f,m).sub(h).sub(v)}else return o.im>=0?l(o):l(o.conjugate()).conjugate()}function u(o){for(var c=o.sub(.5).mul(o.log()).sub(o).add(RM),f=new e(1,0).div(o),d=f.div(o),m=i[0],h=i[1],v=2*d.re,T=d.re*d.re+d.im*d.im,S=2;S<8;S++){var C=h;h=-T*m+i[S],m=v*m+C}var _=f.mul(d.mul(m).add(h));return c.add(_)}function l(o){var c=0,f=0,d=o;for(o=o.add(1);o.re<=n;){d=d.mul(o);var m=d.im<0?1:0;m!==0&&f===0&&c++,f=m,o=o.add(1)}return u(o).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),FS="factorial",ute=["typed","gamma"],lte=W(FS,ute,t=>{var{typed:e,gamma:r}=t;return e(FS,{number:function(a){if(a<0)throw new Error("Value must be non-negative");return r(a+1)},BigNumber:function(a){if(a.isNegative())throw new Error("Value must be non-negative");return r(a.plus(1))},"Array | Matrix":e.referToSelf(n=>a=>lt(a,n))})}),RS="kldivergence",cte=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],fte=W(RS,cte,t=>{var{typed:e,matrix:r,divide:n,sum:a,multiply:i,map:s,dotDivide:u,log:l,isNumeric:o}=t;return e(RS,{"Array, Array":function(d,m){return c(r(d),r(m))},"Matrix, Array":function(d,m){return c(d,r(m))},"Array, Matrix":function(d,m){return c(r(d),m)},"Matrix, Matrix":function(d,m){return c(d,m)}});function c(f,d){var m=d.size().length,h=f.size().length;if(m>1)throw new Error("first object must be one dimensional");if(h>1)throw new Error("second object must be one dimensional");if(m!==h)throw new Error("Length of two vectors must be equal");var v=a(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var T=a(d);if(T===0)throw new Error("Sum of elements in second object must be non zero");var S=n(f,a(f)),C=n(d,a(d)),_=a(i(S,s(u(S,C),M=>l(M))));return o(_)?_:Number.NaN}}),OS="multinomial",dte=["typed","add","divide","multiply","factorial","isInteger","isPositive"],mte=W(OS,dte,t=>{var{typed:e,add:r,divide:n,multiply:a,factorial:i,isInteger:s,isPositive:u}=t;return e(OS,{"Array | Matrix":function(o){var c=0,f=1;return Ns(o,function(d){if(!s(d)||!u(d))throw new TypeError("Positive integer value expected in function multinomial");c=r(c,d),f=a(f,i(d))}),n(i(c),f)}})}),BS="permutations",hte=["typed","factorial"],pte=W(BS,hte,t=>{var{typed:e,factorial:r}=t;return e(BS,{"number | BigNumber":r,"number, number":function(a,i){if(!We(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!We(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(i>a)throw new TypeError("second argument k must be less than or equal to first argument n");return di(a-i+1,a)},"BigNumber, BigNumber":function(a,i){var s,u;if(!jS(a)||!jS(i))throw new TypeError("Positive integer value expected in function permutations");if(i.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var l=a.mul(0).add(1);for(s=l,u=a.minus(i).plus(1);u.lte(a);u=u.plus(1))s=s.times(u);return s}})});function jS(t){return t.isInteger()&&t.gte(0)}var Vy={exports:{}};Vy.exports;(function(t){(function(e,r,n){function a(l){var o=this,c=u();o.next=function(){var f=2091639*o.s0+o.c*23283064365386963e-26;return o.s0=o.s1,o.s1=o.s2,o.s2=f-(o.c=f|0)},o.c=1,o.s0=c(" "),o.s1=c(" "),o.s2=c(" "),o.s0-=c(l),o.s0<0&&(o.s0+=1),o.s1-=c(l),o.s1<0&&(o.s1+=1),o.s2-=c(l),o.s2<0&&(o.s2+=1),c=null}function i(l,o){return o.c=l.c,o.s0=l.s0,o.s1=l.s1,o.s2=l.s2,o}function s(l,o){var c=new a(l),f=o&&o.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function u(){var l=4022871197,o=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return o}r&&r.exports?r.exports=s:this.alea=s})(mo,t)})(Vy);var vte=Vy.exports,Uy={exports:{}};Uy.exports;(function(t){(function(e,r,n){function a(u){var l=this,o="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},u===(u|0)?l.x=u:o+=u;for(var c=0;c<o.length+64;c++)l.x^=o.charCodeAt(c)|0,l.next()}function i(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l}function s(u,l){var o=new a(u),c=l&&l.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,h=(d+m)/(1<<21);while(h===0);return h},f.int32=o.next,f.quick=f,c&&(typeof c=="object"&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xor128=s})(mo,t)})(Uy);var gte=Uy.exports,qy={exports:{}};qy.exports;(function(t){(function(e,r,n){function a(u){var l=this,o="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,u===(u|0)?l.x=u:o+=u;for(var c=0;c<o.length+64;c++)l.x^=o.charCodeAt(c)|0,c==o.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l.v=u.v,l.d=u.d,l}function s(u,l){var o=new a(u),c=l&&l.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,h=(d+m)/(1<<21);while(h===0);return h},f.int32=o.next,f.quick=f,c&&(typeof c=="object"&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xorwow=s})(mo,t)})(qy);var yte=qy.exports,Hy={exports:{}};Hy.exports;(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var c=l.x,f=l.i,d,m;return d=c[f],d^=d>>>7,m=d^d<<24,d=c[f+1&7],m^=d^d>>>10,d=c[f+3&7],m^=d^d>>>3,d=c[f+4&7],m^=d^d<<7,d=c[f+7&7],d=d^d<<13,m^=d^d<<9,c[f]=m,l.i=f+1&7,m};function o(c,f){var d,m=[];if(f===(f|0))m[0]=f;else for(f=""+f,d=0;d<f.length;++d)m[d&7]=m[d&7]<<15^f.charCodeAt(d)+m[d+1&7]<<13;for(;m.length<8;)m.push(0);for(d=0;d<8&&m[d]===0;++d);for(d==8?m[7]=-1:m[d],c.x=m,c.i=0,d=256;d>0;--d)c.next()}o(l,u)}function i(u,l){return l.x=u.x.slice(),l.i=u.i,l}function s(u,l){u==null&&(u=+new Date);var o=new a(u),c=l&&l.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,h=(d+m)/(1<<21);while(h===0);return h},f.int32=o.next,f.quick=f,c&&(c.x&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xorshift7=s})(mo,t)})(Hy);var xte=Hy.exports,Gy={exports:{}};Gy.exports;(function(t){(function(e,r,n){function a(u){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,m,h;return l.w=c=c+1640531527|0,h=f[d+34&127],m=f[d=d+1&127],h^=h<<13,m^=m<<17,h^=h>>>15,m^=m>>>12,h=f[d]=h^m,l.i=d,h+(c^c>>>16)|0};function o(c,f){var d,m,h,v,T,S=[],C=128;for(f===(f|0)?(m=f,f=null):(f=f+"\0",m=0,C=Math.max(C,f.length)),h=0,v=-32;v<C;++v)f&&(m^=f.charCodeAt((v+32)%f.length)),v===0&&(T=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,v>=0&&(T=T+1640531527|0,d=S[v&127]^=m+T,h=d==0?h+1:0);for(h>=128&&(S[(f&&f.length||0)&127]=-1),h=127,v=4*128;v>0;--v)m=S[h+34&127],d=S[h=h+1&127],m^=m<<13,d^=d<<17,m^=m>>>15,d^=d>>>12,S[h]=m^d;c.w=T,c.X=S,c.i=h}o(l,u)}function i(u,l){return l.i=u.i,l.w=u.w,l.X=u.X.slice(),l}function s(u,l){u==null&&(u=+new Date);var o=new a(u),c=l&&l.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,h=(d+m)/(1<<21);while(h===0);return h},f.int32=o.next,f.quick=f,c&&(c.X&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xor4096=s})(mo,t)})(Gy);var bte=Gy.exports,Wy={exports:{}};Wy.exports;(function(t){(function(e,r,n){function a(u){var l=this,o="";l.next=function(){var f=l.b,d=l.c,m=l.d,h=l.a;return f=f<<25^f>>>7^d,d=d-m|0,m=m<<24^m>>>8^h,h=h-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-m|0,l.d=m<<16^d>>>16^h,l.a=h-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,u===Math.floor(u)?(l.a=u/4294967296|0,l.b=u|0):o+=u;for(var c=0;c<o.length+20;c++)l.b^=o.charCodeAt(c)|0,l.next()}function i(u,l){return l.a=u.a,l.b=u.b,l.c=u.c,l.d=u.d,l}function s(u,l){var o=new a(u),c=l&&l.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,h=(d+m)/(1<<21);while(h===0);return h},f.int32=o.next,f.quick=f,c&&(typeof c=="object"&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.tychei=s})(mo,t)})(Wy);var wte=Wy.exports,R4={exports:{}};const Nte={},_te=Object.freeze(Object.defineProperty({__proto__:null,default:Nte},Symbol.toStringTag,{value:"Module"})),Ete=aF(_te);(function(t){(function(e,r,n){var a=256,i=6,s=52,u="random",l=n.pow(a,i),o=n.pow(2,s),c=o*2,f=a-1,d;function m(M,y,x){var w=[];y=y==!0?{entropy:!0}:y||{};var g=S(T(y.entropy?[M,_(r)]:M??C(),3),w),N=new h(w),E=function(){for(var b=N.g(i),D=l,I=0;b<o;)b=(b+I)*a,D*=a,I=N.g(1);for(;b>=c;)b/=2,D/=2,I>>>=1;return(b+I)/D};return E.int32=function(){return N.g(4)|0},E.quick=function(){return N.g(4)/4294967296},E.double=E,S(_(N.S),r),(y.pass||x||function(b,D,I,F){return F&&(F.S&&v(F,N),b.state=function(){return v(N,{})}),I?(n[u]=b,D):b})(E,g,"global"in y?y.global:this==n,y.state)}function h(M){var y,x=M.length,w=this,g=0,N=w.i=w.j=0,E=w.S=[];for(x||(M=[x++]);g<a;)E[g]=g++;for(g=0;g<a;g++)E[g]=E[N=f&N+M[g%x]+(y=E[g])],E[N]=y;(w.g=function(b){for(var D,I=0,F=w.i,O=w.j,P=w.S;b--;)D=P[F=f&F+1],I=I*a+P[f&(P[F]=P[O=f&O+D])+(P[O]=D)];return w.i=F,w.j=O,I})(a)}function v(M,y){return y.i=M.i,y.j=M.j,y.S=M.S.slice(),y}function T(M,y){var x=[],w=typeof M,g;if(y&&w=="object")for(g in M)try{x.push(T(M[g],y-1))}catch{}return x.length?x:w=="string"?M:M+"\0"}function S(M,y){for(var x=M+"",w,g=0;g<x.length;)y[f&g]=f&(w^=y[f&g]*19)+x.charCodeAt(g++);return _(y)}function C(){try{var M;return d&&(M=d.randomBytes)?M=M(a):(M=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(M)),_(M)}catch{var y=e.navigator,x=y&&y.plugins;return[+new Date,e,x,e.screen,_(r)]}}function _(M){return String.fromCharCode.apply(0,M)}if(S(n.random(),r),t.exports){t.exports=m;try{d=Ete}catch{}}else n["seed"+u]=m})(typeof self<"u"?self:mo,[],Math)})(R4);var Ste=R4.exports,Ate=vte,Dte=gte,Cte=yte,Tte=xte,Mte=bte,Ite=wte,So=Ste;So.alea=Ate;So.xor128=Dte;So.xorwow=Cte;So.xorshift7=Tte;So.xor4096=Mte;So.tychei=Ite;var Pte=So;const O4=Xm(Pte);var Fte=O4(Date.now());function Uu(t){var e;function r(a){e=a===null?Fte:O4(String(a))}r(t);function n(){return e()}return n}var kS="pickRandom",Rte=["typed","config","?on"],Ote=W(kS,Rte,t=>{var{typed:e,config:r,on:n}=t,a=Uu(r.randomSeed);return n&&n("config",function(s,u){s.randomSeed!==u.randomSeed&&(a=Uu(s.randomSeed))}),e(kS,{"Array | Matrix":function(u){return i(u,{})},"Array | Matrix, Object":function(u,l){return i(u,l)},"Array | Matrix, number":function(u,l){return i(u,{number:l})},"Array | Matrix, Array | Matrix":function(u,l){return i(u,{weights:l})},"Array | Matrix, Array | Matrix, number":function(u,l,o){return i(u,{number:o,weights:l})},"Array | Matrix, number, Array | Matrix":function(u,l,o){return i(u,{number:l,weights:o})}});function i(s,u){var{number:l,weights:o,elementWise:c=!0}=u,f=typeof l>"u";f&&(l=1);var d=Ye(s)?s.create:Ye(o)?o.create:null;s=s.valueOf(),o&&(o=o.valueOf()),c===!0&&(s=Ct(s),o=Ct(o));var m=0;if(typeof o<"u"){if(o.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var h=0,v=o.length;h<v;h++){if(!Xe(o[h])||o[h]<0)throw new Error("Weights must be an array of positive numbers");m+=o[h]}}for(var T=s.length,S=[],C;S.length<l;){if(typeof o>"u")C=s[Math.floor(a()*T)];else for(var _=a()*m,M=0,y=s.length;M<y;M++)if(_-=o[M],_<0){C=s[M];break}S.push(C)}return f?S[0]:d?d(S):S}});function Qy(t,e){var r=[];if(t=t.slice(0),t.length>1)for(var n=0,a=t.shift();n<a;n++)r.push(Qy(t,e));else for(var i=0,s=t.shift();i<s;i++)r.push(e());return r}var $S="random",Bte=["typed","config","?on"],jte=W($S,Bte,t=>{var{typed:e,config:r,on:n}=t,a=Uu(r.randomSeed);return n&&n("config",function(u,l){u.randomSeed!==l.randomSeed&&(a=Uu(u.randomSeed))}),e($S,{"":()=>s(0,1),number:u=>s(0,u),"number, number":(u,l)=>s(u,l),"Array | Matrix":u=>i(u,0,1),"Array | Matrix, number":(u,l)=>i(u,0,l),"Array | Matrix, number, number":(u,l,o)=>i(u,l,o)});function i(u,l,o){var c=Qy(u.valueOf(),()=>s(l,o));return Ye(u)?u.create(c,"number"):c}function s(u,l){return u+a()*(l-u)}}),LS="randomInt",kte=["typed","config","log2","?on"],$te=W(LS,kte,t=>{var{typed:e,config:r,log2:n,on:a}=t,i=Uu(r.randomSeed);return a&&a("config",function(o,c){o.randomSeed!==c.randomSeed&&(i=Uu(o.randomSeed))}),e(LS,{"":()=>u(0,2),number:o=>u(0,o),"number, number":(o,c)=>u(o,c),bigint:o=>l(0n,o),"bigint, bigint":l,"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,c)=>s(o,0,c),"Array | Matrix, number, number":(o,c,f)=>s(o,c,f)});function s(o,c,f){var d=Qy(o.valueOf(),()=>u(c,f));return Ye(o)?o.create(d,"number"):d}function u(o,c){return Math.floor(o+i()*(c-o))}function l(o,c){var f=2n**30n,d=c-o;if(d<=f)return o+BigInt(u(0,Number(d)));for(var m=n(d),h=d;h>=d;){h=0n;for(var v=0;v<m;++v)h=2n*h+(i()<.5?0n:1n)}return o+h}}),zS="stirlingS2",Lte=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],zte=W(zS,Lte,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:a,divideScalar:i,pow:s,factorial:u,combinations:l,isNegative:o,isInteger:c,number:f,bignumber:d,larger:m}=t,h=[],v=[];return e(zS,{"number | BigNumber, number | BigNumber":function(S,C){if(!c(S)||o(S)||!c(C)||o(C))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(m(C,S))throw new TypeError("k must be less than or equal to n in function stirlingS2");var _=!(Xe(S)&&Xe(C)),M=_?v:h,y=_?d:f,x=f(S),w=f(C);if(M[x]&&M[x].length>w)return M[x][w];for(var g=0;g<=x;++g)if(M[g]||(M[g]=[y(g===0?1:0)]),g!==0)for(var N=M[g],E=M[g-1],b=N.length;b<=g&&b<=w;++b)b===g?N[b]=1:N[b]=r(a(y(b),E[b]),E[b-1]);return M[x][w]}})}),VS="bellNumbers",Vte=["typed","addScalar","isNegative","isInteger","stirlingS2"],Ute=W(VS,Vte,t=>{var{typed:e,addScalar:r,isNegative:n,isInteger:a,stirlingS2:i}=t;return e(VS,{"number | BigNumber":function(u){if(!a(u)||n(u))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,o=0;o<=u;o++)l=r(l,i(u,o));return l}})}),US="catalan",qte=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],Hte=W(US,qte,t=>{var{typed:e,addScalar:r,divideScalar:n,multiplyScalar:a,combinations:i,isNegative:s,isInteger:u}=t;return e(US,{"number | BigNumber":function(o){if(!u(o)||s(o))throw new TypeError("Non-negative integer value expected in function catalan");return n(i(a(o,2),o),r(o,1))}})}),qS="composition",Gte=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],Wte=W(qS,Gte,t=>{var{typed:e,addScalar:r,combinations:n,isPositive:a,isNegative:i,isInteger:s,larger:u}=t;return e(qS,{"number | BigNumber, number | BigNumber":function(o,c){if(!s(o)||!a(o)||!s(c)||!a(c))throw new TypeError("Positive integer value expected in function composition");if(u(c,o))throw new TypeError("k must be less than or equal to n in function composition");return n(r(o,-1),r(c,-1))}})}),HS="leafCount",Qte=["parse","typed"],Xte=W(HS,Qte,t=>{var{parse:e,typed:r}=t;function n(a){var i=0;return a.forEach(s=>{i+=n(s)}),i||1}return r(HS,{Node:function(i){return n(i)}})});function GS(t){return Nt(t)||br(t)&&t.isUnary()&&Nt(t.args[0])}function Wm(t){return!!(Nt(t)||(xs(t)||br(t))&&t.args.every(Wm)||_i(t)&&Wm(t.content))}function WS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WS(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Kte="simplifyUtil",Jte=["FunctionNode","OperatorNode","SymbolNode"],Xy=W(Kte,Jte,t=>{var{FunctionNode:e,OperatorNode:r,SymbolNode:n}=t,a=!0,i=!1,s="defaultF",u={add:{trivial:a,total:a,commutative:a,associative:a},unaryPlus:{trivial:a,total:a,commutative:a,associative:a},subtract:{trivial:i,total:a,commutative:i,associative:i},multiply:{trivial:a,total:a,commutative:a,associative:a},divide:{trivial:i,total:a,commutative:i,associative:i},paren:{trivial:a,total:a,commutative:a,associative:i},defaultF:{trivial:i,total:a,commutative:i,associative:i}},l={divide:{total:i},log:{total:i}},o={subtract:{total:i},abs:{trivial:a},log:{total:a}};function c(_,M){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u,x=s;if(typeof _=="string"?x=_:br(_)?x=_.fn.toString():xs(_)?x=_.name:_i(_)&&(x="paren"),He(y,x)){var w=y[x];if(He(w,M))return w[M];if(He(u,x))return u[x][M]}if(He(y,s)){var g=y[s];return He(g,M)?g[M]:u[s][M]}if(He(u,x)){var N=u[x];if(He(N,M))return N[M]}return u[s][M]}function f(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;return c(_,"commutative",M)}function d(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;return c(_,"associative",M)}function m(_,M){var y=rv({},_);for(var x in M)He(_,x)?y[x]=rv(rv({},M[x]),_[x]):y[x]=M[x];return y}function h(_,M){if(!_.args||_.args.length===0)return _;_.args=v(_,M);for(var y=0;y<_.args.length;y++)h(_.args[y],M)}function v(_,M){var y,x=[],w=function(N){for(var E=0;E<N.args.length;E++){var b=N.args[E];br(b)&&y===b.op?w(b):x.push(b)}};return d(_,M)?(y=_.op,w(_),x):_.args}function T(_,M){if(!(!_.args||_.args.length===0)){for(var y=C(_),x=_.args.length,w=0;w<x;w++)T(_.args[w],M);if(x>2&&d(_,M)){for(var g=_.args.pop();_.args.length>0;)g=y([_.args.pop(),g]);_.args=g.args}}}function S(_,M){if(!(!_.args||_.args.length===0)){for(var y=C(_),x=_.args.length,w=0;w<x;w++)S(_.args[w],M);if(x>2&&d(_,M)){for(var g=_.args.shift();_.args.length>0;)g=y([g,_.args.shift()]);_.args=g.args}}}function C(_){return br(_)?function(M){try{return new r(_.op,_.fn,M,_.implicit)}catch(y){return console.error(y),[]}}:function(M){return new e(new n(_.name),M)}}return{createMakeNodeFunction:C,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:m,flatten:h,allChildren:v,unflattenr:T,unflattenl:S,defaultContext:u,realContext:l,positiveContext:o}}),Yte="simplify",Zte=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],ere=W(Yte,Zte,t=>{var{typed:e,parse:r,equal:n,resolve:a,simplifyConstant:i,simplifyCore:s,AccessorNode:u,ArrayNode:l,ConstantNode:o,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:m,ParenthesisNode:h,SymbolNode:v,replacer:T}=t,{hasProperty:S,isCommutative:C,isAssociative:_,mergeContext:M,flatten:y,unflattenr:x,unflattenl:w,createMakeNodeFunction:g,defaultContext:N,realContext:E,positiveContext:b}=Xy({FunctionNode:c,OperatorNode:m,SymbolNode:v});e.addConversion({from:"Object",to:"Map",convert:wu});var D=e("simplify",{Node:L,"Node, Map":(H,J)=>L(H,!1,J),"Node, Map, Object":(H,J,ee)=>L(H,!1,J,ee),"Node, Array":L,"Node, Array, Map":L,"Node, Array, Map, Object":L});e.removeConversion({from:"Object",to:"Map",convert:wu}),D.defaultContext=N,D.realContext=E,D.positiveContext=b;function I(H){return H.transform(function(J){return _i(J)?I(J.content):J})}var F={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};D.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},i,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},i,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function O(H,J){var ee={};if(H.s){var ie=H.s.split("->");if(ie.length===2)ee.l=ie[0],ee.r=ie[1];else throw SyntaxError("Could not parse rule: "+H.s)}else ee.l=H.l,ee.r=H.r;ee.l=I(r(ee.l)),ee.r=I(r(ee.r));for(var oe of["imposeContext","repeat","assuming"])oe in H&&(ee[oe]=H[oe]);if(H.evaluate&&(ee.evaluate=r(H.evaluate)),_(ee.l,J)){var ve=!C(ee.l,J),me;ve&&(me=$());var Te=g(ee.l),ke=$();ee.expanded={},ee.expanded.l=Te([ee.l,ke]),y(ee.expanded.l,J),x(ee.expanded.l,J),ee.expanded.r=Te([ee.r,ke]),ve&&(ee.expandedNC1={},ee.expandedNC1.l=Te([me,ee.l]),ee.expandedNC1.r=Te([me,ee.r]),ee.expandedNC2={},ee.expandedNC2.l=Te([me,ee.expanded.l]),ee.expandedNC2.r=Te([me,ee.expanded.r]))}return ee}function P(H,J){for(var ee=[],ie=0;ie<H.length;ie++){var oe=H[ie],ve=void 0,me=typeof oe;switch(me){case"string":oe={s:oe};case"object":ve=O(oe,J);break;case"function":ve=oe;break;default:throw TypeError("Unsupported type of rule: "+me)}ee.push(ve)}return ee}var z=0;function $(){return new v("_p"+z++)}function L(H,J){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c(),ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},oe=ie.consoleDebug;J=P(J||D.rules,ie.context);var ve=a(H,ee);ve=I(ve);for(var me={},Te=ve.toString({parenthesis:"all"});!me[Te];){me[Te]=!0,z=0;var ke=Te;oe&&console.log("Working on: ",Te);for(var ze=0;ze<J.length;ze++){var Oe="";if(typeof J[ze]=="function"?(ve=J[ze](ve,ie),oe&&(Oe=J[ze].name)):(y(ve,ie.context),ve=ae(ve,J[ze],ie.context),oe&&(Oe="".concat(J[ze].l.toString()," -> ").concat(J[ze].r.toString()))),oe){var $e=ve.toString({parenthesis:"all"});$e!==ke&&(console.log("Applying",Oe,"produced",$e),ke=$e)}w(ve,ie.context)}Te=ve.toString({parenthesis:"all"})}return ve}function q(H,J,ee){var ie=H;if(H)for(var oe=0;oe<H.length;++oe){var ve=ae(H[oe],J,ee);ve!==H[oe]&&(ie===H&&(ie=H.slice()),ie[oe]=ve)}return ie}function ae(H,J,ee){if(J.assuming){for(var ie in J.assuming)for(var oe in J.assuming[ie])if(S(ie,oe,ee)!==J.assuming[ie][oe])return H}var ve=M(J.imposeContext,ee),me=H;if(me instanceof m||me instanceof c){var Te=q(me.args,J,ee);Te!==me.args&&(me=me.clone(),me.args=Te)}else if(me instanceof h){if(me.content){var ke=ae(me.content,J,ee);ke!==me.content&&(me=new h(ke))}}else if(me instanceof l){var ze=q(me.items,J,ee);ze!==me.items&&(me=new l(ze))}else if(me instanceof u){var Oe=me.object;me.object&&(Oe=ae(me.object,J,ee));var $e=me.index;me.index&&($e=ae(me.index,J,ee)),(Oe!==me.object||$e!==me.index)&&(me=new u(Oe,$e))}else if(me instanceof f){var Q=q(me.dimensions,J,ee);Q!==me.dimensions&&(me=new f(Q))}else if(me instanceof d){var te=!1,ce={};for(var U in me.properties)ce[U]=ae(me.properties[U],J,ee),ce[U]!==me.properties[U]&&(te=!0);te&&(me=new d(ce))}var Y=J.r,re=ue(J.l,me,ve)[0];if(!re&&J.expanded&&(Y=J.expanded.r,re=ue(J.expanded.l,me,ve)[0]),!re&&J.expandedNC1&&(Y=J.expandedNC1.r,re=ue(J.expandedNC1.l,me,ve)[0],re||(Y=J.expandedNC2.r,re=ue(J.expandedNC2.l,me,ve)[0])),re){var se=me.implicit;me=Y.clone(),se&&"implicit"in Y&&(me.implicit=!0),me=me.transform(function(le){return le.isSymbolNode&&He(re.placeholders,le.name)?re.placeholders[le.name].clone():le})}return J.repeat&&me!==H&&(me=ae(me,J,ee)),me}function j(H,J){var ee=[],ie,oe,ve=g(H);if(C(H,J))for(var me=0;me<H.args.length;me++)oe=H.args.slice(0),oe.splice(me,1),ie=oe.length===1?oe[0]:ve(oe),ee.push(ve([H.args[me],ie]));else for(var Te=1;Te<H.args.length;Te++){var ke=H.args[0];Te>1&&(ke=ve(H.args.slice(0,Te))),oe=H.args.slice(Te),ie=oe.length===1?oe[0]:ve(oe),ee.push(ve([ke,ie]))}return ee}function K(H,J){var ee={placeholders:{}};if(!H.placeholders&&!J.placeholders)return ee;if(H.placeholders){if(!J.placeholders)return H}else return J;for(var ie in H.placeholders)if(He(H.placeholders,ie)&&(ee.placeholders[ie]=H.placeholders[ie],He(J.placeholders,ie)&&!fe(H.placeholders[ie],J.placeholders[ie])))return null;for(var oe in J.placeholders)He(J.placeholders,oe)&&(ee.placeholders[oe]=J.placeholders[oe]);return ee}function V(H,J){var ee=[];if(H.length===0||J.length===0)return ee;for(var ie,oe=0;oe<H.length;oe++)for(var ve=0;ve<J.length;ve++)ie=K(H[oe],J[ve]),ie&&ee.push(ie);return ee}function pe(H){if(H.length===0)return H;for(var J=H.reduce(V),ee=[],ie={},oe=0;oe<J.length;oe++){var ve=JSON.stringify(J[oe],T);ie[ve]||(ie[ve]=!0,ee.push(J[oe]))}return ee}function ue(H,J,ee,ie){var oe=[{placeholders:{}}];if(H instanceof m&&J instanceof m||H instanceof c&&J instanceof c){if(H instanceof m){if(H.op!==J.op||H.fn!==J.fn)return[]}else if(H instanceof c&&H.name!==J.name)return[];if(J.args.length===1&&H.args.length===1||!_(J,ee)&&J.args.length===H.args.length||ie){for(var ve=[],me=0;me<H.args.length;me++){var Te=ue(H.args[me],J.args[me],ee);if(Te.length===0)break;ve.push(Te)}if(ve.length!==H.args.length){if(!C(J,ee)||H.args.length===1)return[];if(H.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var ke=ue(H.args[0],J.args[1],ee);if(ke.length===0)return[];var ze=ue(H.args[1],J.args[0],ee);if(ze.length===0)return[];ve=[ke,ze]}oe=pe(ve)}else if(J.args.length>=2&&H.args.length===2){for(var Oe=j(J,ee),$e=[],Q=0;Q<Oe.length;Q++){var te=ue(H,Oe[Q],ee,!0);$e=$e.concat(te)}return $e}else{if(H.args.length>2)throw Error("Unexpected non-binary associative function: "+H.toString());return[]}}else if(H instanceof v){if(H.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(F[H.name]){if(H.name!==J.name)return[]}else switch(H.name[1]>="a"&&H.name[1]<="z"?H.name.substring(0,2):H.name[0]){case"n":case"_p":oe[0].placeholders[H.name]=J;break;case"c":case"cl":if(Nt(J))oe[0].placeholders[H.name]=J;else return[];break;case"v":if(!Nt(J))oe[0].placeholders[H.name]=J;else return[];break;case"vl":if(Qr(J))oe[0].placeholders[H.name]=J;else return[];break;case"cd":if(GS(J))oe[0].placeholders[H.name]=J;else return[];break;case"vd":if(!GS(J))oe[0].placeholders[H.name]=J;else return[];break;case"ce":if(Wm(J))oe[0].placeholders[H.name]=J;else return[];break;case"ve":if(!Wm(J))oe[0].placeholders[H.name]=J;else return[];break;default:throw new Error("Invalid symbol in rule: "+H.name)}}else if(H instanceof o){if(!n(H.value,J.value))return[]}else return[];return oe}function fe(H,J){if(H instanceof o&&J instanceof o){if(!n(H.value,J.value))return!1}else if(H instanceof v&&J instanceof v){if(H.name!==J.name)return!1}else if(H instanceof m&&J instanceof m||H instanceof c&&J instanceof c){if(H instanceof m){if(H.op!==J.op||H.fn!==J.fn)return!1}else if(H instanceof c&&H.name!==J.name)return!1;if(H.args.length!==J.args.length)return!1;for(var ee=0;ee<H.args.length;ee++)if(!fe(H.args[ee],J.args[ee]))return!1}else return!1;return!0}return D}),tre="simplifyConstant",rre=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],nre=W(tre,rre,t=>{var{typed:e,config:r,mathWithTransform:n,matrix:a,fraction:i,bignumber:s,AccessorNode:u,ArrayNode:l,ConstantNode:o,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:m,SymbolNode:h}=t,{isCommutative:v,isAssociative:T,allChildren:S,createMakeNodeFunction:C}=Xy({FunctionNode:c,OperatorNode:m,SymbolNode:h}),_=e("simplifyConstant",{Node:O=>w(F(O,{})),"Node, Object":function(P,z){return w(F(P,z))}});function M(O){return tf(O)?O.valueOf():O instanceof Array?O.map(M):Ye(O)?a(M(O.valueOf())):O}function y(O,P,z){try{return n[O].apply(null,P)}catch{return P=P.map(M),N(n[O].apply(null,P),z)}}var x=e({Fraction:b,number:function(P){return P<0?E(new o(-P)):new o(P)},BigNumber:function(P){return P<0?E(new o(-P)):new o(P)},bigint:function(P){return P<0n?E(new o(-P)):new o(P)},Complex:function(P){throw new Error("Cannot convert Complex number to Node")},string:function(P){return new o(P)},Matrix:function(P){return new l(P.valueOf().map(z=>x(z)))}});function w(O){return Ht(O)?O:x(O)}function g(O,P){var z=P&&P.exactFractions!==!1;if(z&&isFinite(O)&&i){var $=i(O),L=P&&typeof P.fractionsLimit=="number"?P.fractionsLimit:1/0;if($.valueOf()===O&&$.n<L&&$.d<L)return $}return O}var N=e({"string, Object":function(P,z){var $=As(P,r);if($==="BigNumber")return s===void 0&&ky(),s(P);if($==="bigint")return BigInt(P);if($==="Fraction")return i===void 0&&h4(),i(P);var L=parseFloat(P);return g(L,z)},"Fraction, Object":function(P,z){return P},"BigNumber, Object":function(P,z){return P},"number, Object":function(P,z){return g(P,z)},"bigint, Object":function(P,z){return P},"Complex, Object":function(P,z){return P.im!==0?P:g(P.re,z)},"Matrix, Object":function(P,z){return a(g(P.valueOf()))},"Array, Object":function(P,z){return P.map(g)}});function E(O){return new m("-","unaryMinus",[O])}function b(O){var P=L=>r.number==="BigNumber"&&s?s(L):Number(L),z=O.s*O.n,$=z<0n?new m("-","unaryMinus",[new o(-P(z))]):new o(P(z));return O.d===1n?$:new m("/","divide",[$,new o(P(O.d))])}function D(O,P,z){if(!rl(P))return new u(w(O),w(P));if(aa(O)||Ye(O)){for(var $=Array.from(P.dimensions);$.length>0;)if(Nt($[0])&&typeof $[0].value!="string"){var L=N($.shift().value,z);aa(O)?O=O.items[L-1]:(O=O.valueOf()[L-1],O instanceof Array&&(O=a(O)))}else if($.length>1&&Nt($[1])&&typeof $[1].value!="string"){var q=N($[1].value,z),ae=[],j=aa(O)?O.items:O.valueOf();for(var K of j)if(aa(K))ae.push(K.items[q-1]);else if(Ye(O))ae.push(K[q-1]);else break;if(ae.length===j.length)aa(O)?O=new l(ae):O=a(ae),$.splice(1,1);else break}else break;return $.length===P.dimensions.length?new u(w(O),P):$.length>0?(P=new f($),new u(w(O),P)):O}if(Ih(O)&&P.dimensions.length===1&&Nt(P.dimensions[0])){var V=P.dimensions[0].value;return V in O.properties?O.properties[V]:new o}return new u(w(O),P)}function I(O,P,z,$){var L=P.shift(),q=P.reduce((ae,j)=>{if(!Ht(j)){var K=ae.pop();if(Ht(K))return[K,j];try{return ae.push(y(O,[K,j],$)),ae}catch{ae.push(K)}}ae.push(w(ae.pop()));var V=ae.length===1?ae[0]:z(ae);return[z([V,w(j)])]},[L]);return q.length===1?q[0]:z([q[0],x(q[1])])}function F(O,P){switch(O.type){case"SymbolNode":return O;case"ConstantNode":switch(typeof O.value){case"number":return N(O.value,P);case"bigint":return N(O.value,P);case"string":return O.value;default:if(!isNaN(O.value))return N(O.value,P)}return O;case"FunctionNode":if(n[O.name]&&n[O.name].rawArgs)return O;{var z=["add","multiply"];if(!z.includes(O.name)){var $=O.args.map(ie=>F(ie,P));if(!$.some(Ht))try{return y(O.name,$,P)}catch{}if(O.name==="size"&&$.length===1&&aa($[0])){for(var L=[],q=$[0];aa(q);)L.push(q.items.length),q=q.items[0];return a(L)}return new c(O.name,$.map(w))}}case"OperatorNode":{var ae=O.fn.toString(),j,K,V=C(O);if(br(O)&&O.isUnary())j=[F(O.args[0],P)],Ht(j[0])?K=V(j):K=y(ae,j,P);else if(T(O,P.context))if(j=S(O,P.context),j=j.map(ie=>F(ie,P)),v(ae,P.context)){for(var pe=[],ue=[],fe=0;fe<j.length;fe++)Ht(j[fe])?ue.push(j[fe]):pe.push(j[fe]);pe.length>1?(K=I(ae,pe,V,P),ue.unshift(K),K=I(ae,ue,V,P)):K=I(ae,j,V,P)}else K=I(ae,j,V,P);else j=O.args.map(ie=>F(ie,P)),K=I(ae,j,V,P);return K}case"ParenthesisNode":return F(O.content,P);case"AccessorNode":return D(F(O.object,P),F(O.index,P),P);case"ArrayNode":{var H=O.items.map(ie=>F(ie,P));return H.some(Ht)?new l(H.map(w)):a(H)}case"IndexNode":return new f(O.dimensions.map(ie=>_(ie,P)));case"ObjectNode":{var J={};for(var ee in O.properties)J[ee]=_(O.properties[ee],P);return new d(J)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(O.type))}}return _}),QS="simplifyCore",are=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],ire=W(QS,are,t=>{var{typed:e,parse:r,equal:n,isZero:a,add:i,subtract:s,multiply:u,divide:l,pow:o,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:m,IndexNode:h,ObjectNode:v,OperatorNode:T,ParenthesisNode:S,SymbolNode:C}=t,_=new d(0),M=new d(1),y=new d(!0),x=new d(!1);function w(b){return br(b)&&["and","not","or"].includes(b.op)}var{hasProperty:g,isCommutative:N}=Xy({FunctionNode:m,OperatorNode:T,SymbolNode:C});function E(b){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=D?D.context:void 0;if(g(b,"trivial",I)){if(xs(b)&&b.args.length===1)return E(b.args[0],D);var F=!1,O=0;if(b.forEach(ue=>{++O,O===1&&(F=E(ue,D))}),O===1)return F}var P=b;if(xs(P)){var z=eQ(P.name);if(z){if(P.args.length>2&&g(P,"associative",I))for(;P.args.length>2;){var $=P.args.pop(),L=P.args.pop();P.args.push(new T(z,P.name,[$,L]))}P=new T(z,P.name,P.args)}else return new m(E(P.fn),P.args.map(ue=>E(ue,D)))}if(br(P)&&P.isUnary()){var q=E(P.args[0],D);if(P.op==="~"&&br(q)&&q.isUnary()&&q.op==="~"||P.op==="not"&&br(q)&&q.isUnary()&&q.op==="not"&&w(q.args[0]))return q.args[0];var ae=!0;if(P.op==="-"&&br(q)&&(q.isBinary()&&q.fn==="subtract"&&(P=new T("-","subtract",[q.args[1],q.args[0]]),ae=!1),q.isUnary()&&q.op==="-"))return q.args[0];if(ae)return new T(P.op,P.fn,[q])}if(br(P)&&P.isBinary()){var j=E(P.args[0],D),K=E(P.args[1],D);if(P.op==="+"){if(Nt(j)&&a(j.value))return K;if(Nt(K)&&a(K.value))return j;br(K)&&K.isUnary()&&K.op==="-"&&(K=K.args[0],P=new T("-","subtract",[j,K]))}if(P.op==="-")return br(K)&&K.isUnary()&&K.op==="-"?E(new T("+","add",[j,K.args[0]]),D):Nt(j)&&a(j.value)?E(new T("-","unaryMinus",[K])):Nt(K)&&a(K.value)?j:new T(P.op,P.fn,[j,K]);if(P.op==="*"){if(Nt(j)){if(a(j.value))return _;if(n(j.value,1))return K}if(Nt(K)){if(a(K.value))return _;if(n(K.value,1))return j;if(N(P,I))return new T(P.op,P.fn,[K,j],P.implicit)}return new T(P.op,P.fn,[j,K],P.implicit)}if(P.op==="/")return Nt(j)&&a(j.value)?_:Nt(K)&&n(K.value,1)?j:new T(P.op,P.fn,[j,K]);if(P.op==="^"&&Nt(K)){if(a(K.value))return M;if(n(K.value,1))return j}if(P.op==="and"){if(Nt(j))if(j.value){if(w(K))return K;if(Nt(K))return K.value?y:x}else return x;if(Nt(K))if(K.value){if(w(j))return j}else return x}if(P.op==="or"){if(Nt(j)){if(j.value)return y;if(w(K))return K}if(Nt(K)){if(K.value)return y;if(w(j))return j}}return new T(P.op,P.fn,[j,K])}if(br(P))return new T(P.op,P.fn,P.args.map(ue=>E(ue,D)));if(aa(P))return new f(P.items.map(ue=>E(ue,D)));if(co(P))return new c(E(P.object,D),E(P.index,D));if(rl(P))return new h(P.dimensions.map(ue=>E(ue,D)));if(Ih(P)){var V={};for(var pe in P.properties)V[pe]=E(P.properties[pe],D);return new v(V)}return P}return e(QS,{Node:E,"Node,Object":E})}),sre="resolve",ore=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],ure=W(sre,ore,t=>{var{typed:e,parse:r,ConstantNode:n,FunctionNode:a,OperatorNode:i,ParenthesisNode:s}=t;function u(l,o){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!o)return l;if(Qr(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=o.get(l.name);if(Ht(d)){var m=new Set(c);return m.add(l.name),u(d,o,m)}else return typeof d=="number"?r(String(d)):d!==void 0?new n(d):l}else if(br(l)){var h=l.args.map(function(T){return u(T,o,c)});return new i(l.op,l.fn,h,l.implicit)}else{if(_i(l))return new s(u(l.content,o,c));if(xs(l)){var v=l.args.map(function(T){return u(T,o,c)});return new a(l.name,v)}}return l.map(T=>u(T,o,c))}return e("resolve",{Node:u,"Node, Map | null | undefined":u,"Node, Object":(l,o)=>u(l,wu(o)),"Array | Matrix":e.referToSelf(l=>o=>o.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>o=>o.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(o,c)=>l(o,wu(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(o,c)=>l(o,wu(c))),"Array | Matrix, Map":e.referToSelf(l=>(o,c)=>o.map(f=>l(f,c)))})}),XS="symbolicEqual",lre=["parse","simplify","typed","OperatorNode"],cre=W(XS,lre,t=>{var{parse:e,simplify:r,typed:n,OperatorNode:a}=t;function i(s,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=new a("-","subtract",[s,u]),c=r(o,{},l);return Nt(c)&&!c.value}return n(XS,{"Node, Node":i,"Node, Node, Object":i})}),KS="derivative",fre=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],dre=W(KS,fre,t=>{var{typed:e,config:r,parse:n,simplify:a,equal:i,isZero:s,numeric:u,ConstantNode:l,FunctionNode:o,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function m(M,y){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},w=new Map,g=y.name;function N(b){var D=w.get(b);if(D!==void 0)return D;var I=S(N,b,g);return w.set(b,I),I}var E=C(M,N);return x.simplify?a(E):E}function h(M){var y=n(M);if(!y.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(M)," into a variable in function derivative"));return y}var v=e(KS,{"Node, SymbolNode":m,"Node, SymbolNode, Object":m,"Node, string":(M,y)=>m(M,h(y)),"Node, string, Object":(M,y,x)=>m(M,h(y),x)});v._simplify=!0,v.toTex=function(M){return T.apply(null,M.args)};var T=e("_derivTex",{"Node, SymbolNode":function(y,x){return Nt(y)&&Xt(y.value)==="string"?T(n(y.value).toString(),x.toString(),1):T(y.toTex(),x.toString(),1)},"Node, ConstantNode":function(y,x){if(Xt(x.value)==="string")return T(y,n(x.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(y,x,w){return T(y.toString(),x.name,w.value)},"string, string, number":function(y,x,w){var g;return w===1?g="{d\\over d"+x+"}":g="{d^{"+w+"}\\over d"+x+"^{"+w+"}}",g+"\\left[".concat(y,"\\right]")}}),S=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(y,x,w){return x.name!==w},"function, ParenthesisNode, string":function(y,x,w){return y(x.content,w)},"function, FunctionAssignmentNode, string":function(y,x,w){return x.params.includes(w)?y(x.expr,w):!0},"function, FunctionNode | OperatorNode, string":function(y,x,w){return x.args.every(g=>y(g,w))}}),C=e("_derivative",{"ConstantNode, function":function(){return _(0)},"SymbolNode, function":function(y,x){return x(y)?_(0):_(1)},"ParenthesisNode, function":function(y,x){return new f(C(y.content,x))},"FunctionAssignmentNode, function":function(y,x){return x(y)?_(0):C(y.expr,x)},"FunctionNode, function":function(y,x){if(x(y))return _(0);var w=y.args[0],g,N=!1,E=!1,b;switch(y.name){case"cbrt":N=!0,b=new c("*","multiply",[_(3),new c("^","pow",[w,new c("/","divide",[_(2),_(3)])])]);break;case"sqrt":case"nthRoot":if(y.args.length===1)N=!0,b=new c("*","multiply",[_(2),new o("sqrt",[w])]);else if(y.args.length===2)return g=new c("/","divide",[_(1),y.args[1]]),C(new c("^","pow",[w,g]),x);break;case"log10":g=_(10);case"log":if(!g&&y.args.length===1)b=w.clone(),N=!0;else if(y.args.length===1&&g||y.args.length===2&&x(y.args[1]))b=new c("*","multiply",[w.clone(),new o("log",[g||y.args[1]])]),N=!0;else if(y.args.length===2)return C(new c("/","divide",[new o("log",[w]),new o("log",[y.args[1]])]),x);break;case"pow":if(y.args.length===2)return C(new c("^","pow",[w,y.args[1]]),x);break;case"exp":b=new o("exp",[w.clone()]);break;case"sin":b=new o("cos",[w.clone()]);break;case"cos":b=new c("-","unaryMinus",[new o("sin",[w.clone()])]);break;case"tan":b=new c("^","pow",[new o("sec",[w.clone()]),_(2)]);break;case"sec":b=new c("*","multiply",[y,new o("tan",[w.clone()])]);break;case"csc":E=!0,b=new c("*","multiply",[y,new o("cot",[w.clone()])]);break;case"cot":E=!0,b=new c("^","pow",[new o("csc",[w.clone()]),_(2)]);break;case"asin":N=!0,b=new o("sqrt",[new c("-","subtract",[_(1),new c("^","pow",[w.clone(),_(2)])])]);break;case"acos":N=!0,E=!0,b=new o("sqrt",[new c("-","subtract",[_(1),new c("^","pow",[w.clone(),_(2)])])]);break;case"atan":N=!0,b=new c("+","add",[new c("^","pow",[w.clone(),_(2)]),_(1)]);break;case"asec":N=!0,b=new c("*","multiply",[new o("abs",[w.clone()]),new o("sqrt",[new c("-","subtract",[new c("^","pow",[w.clone(),_(2)]),_(1)])])]);break;case"acsc":N=!0,E=!0,b=new c("*","multiply",[new o("abs",[w.clone()]),new o("sqrt",[new c("-","subtract",[new c("^","pow",[w.clone(),_(2)]),_(1)])])]);break;case"acot":N=!0,E=!0,b=new c("+","add",[new c("^","pow",[w.clone(),_(2)]),_(1)]);break;case"sinh":b=new o("cosh",[w.clone()]);break;case"cosh":b=new o("sinh",[w.clone()]);break;case"tanh":b=new c("^","pow",[new o("sech",[w.clone()]),_(2)]);break;case"sech":E=!0,b=new c("*","multiply",[y,new o("tanh",[w.clone()])]);break;case"csch":E=!0,b=new c("*","multiply",[y,new o("coth",[w.clone()])]);break;case"coth":E=!0,b=new c("^","pow",[new o("csch",[w.clone()]),_(2)]);break;case"asinh":N=!0,b=new o("sqrt",[new c("+","add",[new c("^","pow",[w.clone(),_(2)]),_(1)])]);break;case"acosh":N=!0,b=new o("sqrt",[new c("-","subtract",[new c("^","pow",[w.clone(),_(2)]),_(1)])]);break;case"atanh":N=!0,b=new c("-","subtract",[_(1),new c("^","pow",[w.clone(),_(2)])]);break;case"asech":N=!0,E=!0,b=new c("*","multiply",[w.clone(),new o("sqrt",[new c("-","subtract",[_(1),new c("^","pow",[w.clone(),_(2)])])])]);break;case"acsch":N=!0,E=!0,b=new c("*","multiply",[new o("abs",[w.clone()]),new o("sqrt",[new c("+","add",[new c("^","pow",[w.clone(),_(2)]),_(1)])])]);break;case"acoth":N=!0,E=!0,b=new c("-","subtract",[_(1),new c("^","pow",[w.clone(),_(2)])]);break;case"abs":b=new c("/","divide",[new o(new d("abs"),[w.clone()]),w.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+y.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var D,I;N?(D="/",I="divide"):(D="*",I="multiply");var F=C(w,x);return E&&(F=new c("-","unaryMinus",[F])),new c(D,I,[F,b])},"OperatorNode, function":function(y,x){if(x(y))return _(0);if(y.op==="+")return new c(y.op,y.fn,y.args.map(function(P){return C(P,x)}));if(y.op==="-"){if(y.isUnary())return new c(y.op,y.fn,[C(y.args[0],x)]);if(y.isBinary())return new c(y.op,y.fn,[C(y.args[0],x),C(y.args[1],x)])}if(y.op==="*"){var w=y.args.filter(function(P){return x(P)});if(w.length>0){var g=y.args.filter(function(P){return!x(P)}),N=g.length===1?g[0]:new c("*","multiply",g),E=w.concat(C(N,x));return new c("*","multiply",E)}return new c("+","add",y.args.map(function(P){return new c("*","multiply",y.args.map(function(z){return z===P?C(z,x):z.clone()}))}))}if(y.op==="/"&&y.isBinary()){var b=y.args[0],D=y.args[1];return x(D)?new c("/","divide",[C(b,x),D]):x(b)?new c("*","multiply",[new c("-","unaryMinus",[b]),new c("/","divide",[C(D,x),new c("^","pow",[D.clone(),_(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[C(b,x),D.clone()]),new c("*","multiply",[b.clone(),C(D,x)])]),new c("^","pow",[D.clone(),_(2)])])}if(y.op==="^"&&y.isBinary()){var I=y.args[0],F=y.args[1];if(x(I))return Nt(I)&&(s(I.value)||i(I.value,1))?_(0):new c("*","multiply",[y,new c("*","multiply",[new o("log",[I.clone()]),C(F.clone(),x)])]);if(x(F)){if(Nt(F)){if(s(F.value))return _(0);if(i(F.value,1))return C(I,x)}var O=new c("^","pow",[I.clone(),new c("-","subtract",[F,_(1)])]);return new c("*","multiply",[F.clone(),new c("*","multiply",[C(I,x),O])])}return new c("*","multiply",[new c("^","pow",[I.clone(),F.clone()]),new c("+","add",[new c("*","multiply",[C(I,x),new c("/","divide",[F.clone(),I.clone()])]),new c("*","multiply",[C(F,x),new o("log",[I.clone()])])])])}throw new Error('Cannot process operator "'+y.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function _(M,y){return new l(u(M,As(String(M),r)))}return v}),JS="rationalize",mre=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],hre=W(JS,mre,t=>{var{config:e,typed:r,equal:n,isZero:a,add:i,subtract:s,multiply:u,divide:l,pow:o,parse:c,simplifyConstant:f,simplifyCore:d,simplify:m,fraction:h,bignumber:v,mathWithTransform:T,matrix:S,AccessorNode:C,ArrayNode:_,ConstantNode:M,FunctionNode:y,IndexNode:x,ObjectNode:w,OperatorNode:g,SymbolNode:N,ParenthesisNode:E}=t;function b(P){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=I(),q=D(P,z,!0,L.firstRules),ae=q.variables.length,j={exactFractions:!1},K={exactFractions:!0};if(P=q.expression,ae>=1){P=F(P);var V,pe,ue=!0,fe=!1;P=m(P,L.firstRules,{},j);for(var H;pe=ue?L.distrDivRules:L.sucDivRules,P=m(P,pe,{},K),ue=!ue,H=P.toString(),H!==V;)fe=!0,V=H;fe&&(P=m(P,L.firstRulesAgain,{},j)),P=m(P,L.finalRules,{},j)}var J=[],ee={};return P.type==="OperatorNode"&&P.isBinary()&&P.op==="/"?(ae===1&&(P.args[0]=O(P.args[0],J),P.args[1]=O(P.args[1])),$&&(ee.numerator=P.args[0],ee.denominator=P.args[1])):(ae===1&&(P=O(P,J)),$&&(ee.numerator=P,ee.denominator=null)),$?(ee.coefficients=J,ee.variables=q.variables,ee.expression=P,ee):P}return r(JS,{Node:b,"Node, boolean":(P,z)=>b(P,{},z),"Node, Object":b,"Node, Object, boolean":b});function D(P,z,$,L){var q=[],ae=m(P,L,z,{exactFractions:!1});$=!!$;var j="+-*"+($?"/":"");V(ae);var K={};return K.expression=ae,K.variables=q,K;function V(pe){var ue=pe.type;if(ue==="FunctionNode")throw new Error("There is an unsolved function call");if(ue==="OperatorNode")if(pe.op==="^"){if(pe.args[1].type!=="ConstantNode"||!We(parseFloat(pe.args[1].value)))throw new Error("There is a non-integer exponent");V(pe.args[0])}else{if(!j.includes(pe.op))throw new Error("Operator "+pe.op+" invalid in polynomial expression");for(var fe=0;fe<pe.args.length;fe++)V(pe.args[fe])}else if(ue==="SymbolNode"){var H=pe.name,J=q.indexOf(H);J===-1&&q.push(H)}else if(ue==="ParenthesisNode")V(pe.content);else if(ue!=="ConstantNode")throw new Error("type "+ue+" is not allowed in polynomial expression")}}function I(){var P=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],z=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],$=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],L=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],q={};return q.firstRules=P.concat(z,L),q.distrDivRules=$,q.sucDivRules=L,q.firstRulesAgain=P.concat(z),q.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],q}function F(P,z,$){var L=P.type,q=arguments.length>1;if(L==="OperatorNode"&&P.isBinary()){var ae=!1,j;if(P.op==="^"&&(P.args[0].type==="ParenthesisNode"||P.args[0].type==="OperatorNode")&&P.args[1].type==="ConstantNode"&&(j=parseFloat(P.args[1].value),ae=j>=2&&We(j)),ae){if(j>2){var K=P.args[0],V=new g("^","pow",[P.args[0].cloneDeep(),new M(j-1)]);P=new g("*","multiply",[K,V])}else P=new g("*","multiply",[P.args[0],P.args[0].cloneDeep()]);q&&($==="content"?z.content=P:z.args[$]=P)}}if(L==="ParenthesisNode")F(P.content,P,"content");else if(L!=="ConstantNode"&&L!=="SymbolNode")for(var pe=0;pe<P.args.length;pe++)F(P.args[pe],P,pe);if(!q)return P}function O(P,z){z===void 0&&(z=[]),z[0]=0;var $={};$.cte=1,$.oper="+",$.fire="";var L=0,q="";H(P,null,$),L=z.length-1;for(var ae=!0,j,K=L;K>=0;K--)if(z[K]!==0){var V=new M(ae?z[K]:Math.abs(z[K])),pe=z[K]<0?"-":"+";if(K>0){var ue=new N(q);if(K>1){var fe=new M(K);ue=new g("^","pow",[ue,fe])}z[K]===-1&&ae?V=new g("-","unaryMinus",[ue]):Math.abs(z[K])===1?V=ue:V=new g("*","multiply",[V,ue])}ae?j=V:pe==="+"?j=new g("+","add",[j,V]):j=new g("-","subtract",[j,V]),ae=!1}if(ae)return new M(0);return j;function H(J,ee,ie){var oe=J.type;if(oe==="FunctionNode")throw new Error("There is an unsolved function call");if(oe==="OperatorNode"){if(!"+-*^".includes(J.op))throw new Error("Operator "+J.op+" invalid");if(ee!==null){if((J.fn==="unaryMinus"||J.fn==="pow")&&ee.fn!=="add"&&ee.fn!=="subtract"&&ee.fn!=="multiply")throw new Error("Invalid "+J.op+" placing");if((J.fn==="subtract"||J.fn==="add"||J.fn==="multiply")&&ee.fn!=="add"&&ee.fn!=="subtract")throw new Error("Invalid "+J.op+" placing");if((J.fn==="subtract"||J.fn==="add"||J.fn==="unaryMinus")&&ie.noFil!==0)throw new Error("Invalid "+J.op+" placing")}(J.op==="^"||J.op==="*")&&(ie.fire=J.op);for(var ve=0;ve<J.args.length;ve++)J.fn==="unaryMinus"&&(ie.oper="-"),(J.op==="+"||J.fn==="subtract")&&(ie.fire="",ie.cte=1,ie.oper=ve===0?"+":J.op),ie.noFil=ve,H(J.args[ve],J,ie)}else if(oe==="SymbolNode"){if(J.name!==q&&q!=="")throw new Error("There is more than one variable");if(q=J.name,ee===null){z[1]=1;return}if(ee.op==="^"&&ie.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ee.op==="*"&&ie.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(ie.fire===""||ie.fire==="*")&&(L<1&&(z[1]=0),z[1]+=ie.cte*(ie.oper==="+"?1:-1),L=Math.max(1,L))}else if(oe==="ConstantNode"){var me=parseFloat(J.value);if(ee===null){z[0]=me;return}if(ee.op==="^"){if(ie.noFil!==1)throw new Error("Constant cannot be powered");if(!We(me)||me<=0)throw new Error("Non-integer exponent is not allowed");for(var Te=L+1;Te<me;Te++)z[Te]=0;me>L&&(z[me]=0),z[me]+=ie.cte*(ie.oper==="+"?1:-1),L=Math.max(me,L);return}ie.cte=me,ie.fire===""&&(z[0]+=ie.cte*(ie.oper==="+"?1:-1))}else throw new Error("Type "+oe+" is not allowed")}}}),YS="zpk2tf",pre=["typed","add","multiply","Complex","number"],vre=W(YS,pre,t=>{var{typed:e,add:r,multiply:n,Complex:a,number:i}=t;return e(YS,{"Array,Array,number":function(o,c,f){return s(o,c,f)},"Array,Array":function(o,c){return s(o,c,1)},"Matrix,Matrix,number":function(o,c,f){return s(o.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(o,c){return s(o.valueOf(),c.valueOf(),1)}});function s(l,o,c){l.some(C=>C.type==="BigNumber")&&(l=l.map(C=>i(C))),o.some(C=>C.type==="BigNumber")&&(o=o.map(C=>i(C)));for(var f=[a(1,0)],d=[a(1,0)],m=0;m<l.length;m++){var h=l[m];typeof h=="number"&&(h=a(h,0)),f=u(f,[a(1,0),a(-h.re,-h.im)])}for(var v=0;v<o.length;v++){var T=o[v];typeof T=="number"&&(T=a(T,0)),d=u(d,[a(1,0),a(-T.re,-T.im)])}for(var S=0;S<f.length;S++)f[S]=n(f[S],c);return[f,d]}function u(l,o){for(var c=[],f=0;f<l.length+o.length-1;f++){c[f]=a(0,0);for(var d=0;d<l.length;d++)f-d>=0&&f-d<o.length&&(c[f]=r(c[f],n(l[d],o[f-d])))}return c}}),ZS="freqz",gre=["typed","add","multiply","Complex","divide","matrix"],yre=W(ZS,gre,t=>{var{typed:e,add:r,multiply:n,Complex:a,divide:i,matrix:s}=t;return e(ZS,{"Array, Array":function(c,f){var d=l(512);return u(c,f,d)},"Array, Array, Array":function(c,f,d){return u(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var m=l(d);return u(c,f,m)},"Matrix, Matrix":function(c,f){var d=l(512),{w:m,h}=u(c.valueOf(),f.valueOf(),d);return{w:s(m),h:s(h)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h:m}=u(c.valueOf(),f.valueOf(),d.valueOf());return{h:s(m),w:s(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var m=l(d),{h}=u(c.valueOf(),f.valueOf(),m);return{h:s(h),w:s(m)}}});function u(o,c,f){for(var d=[],m=[],h=0;h<f.length;h++){for(var v=a(0,0),T=a(0,0),S=0;S<o.length;S++)v=r(v,n(o[S],a(Math.cos(-S*f[h]),Math.sin(-S*f[h]))));for(var C=0;C<c.length;C++)T=r(T,n(c[C],a(Math.cos(-C*f[h]),Math.sin(-C*f[h]))));d.push(v),m.push(T)}for(var _=[],M=0;M<d.length;M++)_.push(i(d[M],m[M]));return{h:_,w:f}}function l(o){for(var c=[],f=0;f<o;f++)c.push(f/o*Math.PI);return c}}),xre="reviver",bre=["classes"],wre=W(xre,bre,t=>{var{classes:e}=t;return function(n,a){var i=e[a&&a.mathjs];return i&&typeof i.fromJSON=="function"?i.fromJSON(a):a}}),Nre="replacer",_re=[],Ere=W(Nre,_re,()=>function(e,r){return typeof r=="number"&&(!isFinite(r)||isNaN(r))?{mathjs:"number",value:String(r)}:typeof r=="bigint"?{mathjs:"bigint",value:String(r)}:r}),Sre="15.0.0",Are=W("true",[],()=>!0),Dre=W("false",[],()=>!1),Cre=W("null",[],()=>null),Tre=Zn("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1/0):1/0}),Mre=Zn("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(NaN):NaN}),Ire=Zn("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?zy(r):M$}),Pre=Zn("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?aG(r):I$}),Fre=Zn("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?rG(r):P$}),Rre=Zn("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?nG(r):F$}),Ore=Zn("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).ln():Math.LN2}),Bre=Zn("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(10).ln():Math.LN10}),jre=Zn("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(2).ln()):Math.LOG2E}),kre=Zn("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(10).ln()):Math.LOG10E}),$re=Zn("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r("0.5").sqrt():Math.SQRT1_2}),Lre=Zn("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).sqrt():Math.SQRT2}),zre=Zn("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),Vre=W("version",[],()=>Sre);function Zn(t,e,r){return W(t,e,r,{recreateOnConfigChange:!0})}var Ure=it("speedOfLight","299792458","m s^-1"),qre=it("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Hre=it("planckConstant","6.62607015e-34","J s"),Gre=it("reducedPlanckConstant","1.0545718176461565e-34","J s"),Wre=it("magneticConstant","1.25663706212e-6","N A^-2"),Qre=it("electricConstant","8.8541878128e-12","F m^-1"),Xre=it("vacuumImpedance","376.730313667","ohm"),Kre=it("coulomb","8.987551792261171e9","N m^2 C^-2"),Jre=it("coulombConstant","8.987551792261171e9","N m^2 C^-2"),Yre=it("elementaryCharge","1.602176634e-19","C"),Zre=it("bohrMagneton","9.2740100783e-24","J T^-1"),ene=it("conductanceQuantum","7.748091729863649e-5","S"),tne=it("inverseConductanceQuantum","12906.403729652257","ohm"),rne=it("magneticFluxQuantum","2.0678338484619295e-15","Wb"),nne=it("nuclearMagneton","5.0507837461e-27","J T^-1"),ane=it("klitzing","25812.807459304513","ohm"),ine=it("bohrRadius","5.29177210903e-11","m"),sne=it("classicalElectronRadius","2.8179403262e-15","m"),one=it("electronMass","9.1093837015e-31","kg"),une=it("fermiCoupling","1.1663787e-5","GeV^-2"),lne=zh("fineStructure",.0072973525693),cne=it("hartreeEnergy","4.3597447222071e-18","J"),fne=it("protonMass","1.67262192369e-27","kg"),dne=it("deuteronMass","3.3435830926e-27","kg"),mne=it("neutronMass","1.6749271613e-27","kg"),hne=it("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),pne=it("rydberg","10973731.568160","m^-1"),vne=it("thomsonCrossSection","6.6524587321e-29","m^2"),gne=zh("weakMixingAngle",.2229),yne=zh("efimovFactor",22.7),xne=it("atomicMass","1.66053906660e-27","kg"),bne=it("avogadro","6.02214076e23","mol^-1"),wne=it("boltzmann","1.380649e-23","J K^-1"),Nne=it("faraday","96485.33212331001","C mol^-1"),_ne=it("firstRadiation","3.7417718521927573e-16","W m^2"),Ene=it("loschmidt","2.686780111798444e25","m^-3"),Sne=it("gasConstant","8.31446261815324","J K^-1 mol^-1"),Ane=it("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Dne=it("molarVolume","0.022413969545014137","m^3 mol^-1"),Cne=zh("sackurTetrode",-1.16487052358),Tne=it("secondRadiation","0.014387768775039337","m K"),Mne=it("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Ine=it("wienDisplacement","2.897771955e-3","m K"),Pne=it("molarMass","0.99999999965e-3","kg mol^-1"),Fne=it("molarMassC12","11.9999999958e-3","kg mol^-1"),Rne=it("gravity","9.80665","m s^-2"),One=it("planckLength","1.616255e-35","m"),Bne=it("planckMass","2.176435e-8","kg"),jne=it("planckTime","5.391245e-44","s"),kne=it("planckCharge","1.87554603778e-18","C"),$ne=it("planckTemperature","1.416785e+32","K");function it(t,e,r){var n=["config","Unit","BigNumber"];return W(t,n,a=>{var{config:i,Unit:s,BigNumber:u}=a,l=i.number==="BigNumber"?new u(e):parseFloat(e),o=new s(l,r);return o.fixPrefix=!0,o})}function zh(t,e){var r=["config","BigNumber"];return W(t,r,n=>{var{config:a,BigNumber:i}=n;return a.number==="BigNumber"?new i(e):e})}function eA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eA(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var zne="mapSlices",Vne=["typed","isInteger"],Une=W(zne,Vne,t=>{var{typed:e,isInteger:r}=t,n=Fg({typed:e,isInteger:r});return e("mapSlices",{"...any":function(i){var s=i[1];Xe(s)?i[1]=s-1:ut(s)&&(i[1]=s.minus(1));try{return n.apply(null,i)}catch(u){throw Mn(u)}}})},Lne({isTransformFunction:!0},Fg.meta)),qne="column",Hne=["typed","Index","matrix","range"],Gne=W(qne,Hne,t=>{var{typed:e,Index:r,matrix:n,range:a}=t,i=l4({typed:e,Index:r,matrix:n,range:a});return e("column",{"...any":function(u){var l=u.length-1,o=u[l];Xe(o)&&(u[l]=o-1);try{return i.apply(null,u)}catch(c){throw Mn(c)}}})},{isTransformFunction:!0});function Ky(t,e,r){var n=t.filter(function(l){return Qr(l)&&!(l.name in e)&&!r.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var a=n.name,i=new Map,s=new M3(r,i,new Set([a])),u=t.compile();return function(o){return i.set(a,o),u.evaluate(s)}}var Wne="transformCallback",Qne=["typed"],Jy=W(Wne,Qne,t=>{var{typed:e}=t;return function(n,a){return e.isTypedFunction(n)?r(n,a):tA(n,n.length,a)};function r(n,a){var i=Object.fromEntries(Object.entries(n.signatures).map(s=>{var[u,l]=s,o=u.split(",").length;return e.isTypedFunction(l)?[u,r(l,a)]:[u,tA(l,o,a)]}));return typeof n.name=="string"?e(n.name,i):e(i)}});function tA(t,e,r){return e===r?t:e===r+1?function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.slice(0,r),u=rA(a[r]);return t(...s,u)}:e>r+1?function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.slice(0,r),u=rA(a[r]),l=a.slice(r+1);return t(...s,u,...l)}:t}function rA(t){return t.map(e=>e+1)}var Xne="filter",Kne=["typed"],Jne=W(Xne,Kne,t=>{var{typed:e}=t;function r(a,i,s){var u=c4({typed:e}),l=Jy({typed:e});if(a.length===0)return u();var o=a[0];if(a.length===1)return u(o);var c=a.length-1,f=a[c];return o&&(o=n(o,s)),f&&(Qr(f)||rf(f)?f=n(f,s):f=Ky(f,i,s)),u(o,l(f,c))}r.rawArgs=!0;function n(a,i){return a.compile().evaluate(i)}return r},{isTransformFunction:!0}),Yne="forEach",Zne=["typed"],eae=W(Yne,Zne,t=>{var{typed:e}=t,r=f4({typed:e}),n=Jy({typed:e});function a(s,u,l){if(s.length===0)return r();var o=s[0];if(s.length===1)return r(o);var c=s.length-1,f=s[c];return o&&(o=i(o,l)),f&&(Qr(f)||rf(f)?f=i(f,l):f=Ky(f,u,l)),r(o,n(f,c))}a.rawArgs=!0;function i(s,u){return s.compile().evaluate(u)}return a},{isTransformFunction:!0}),tae="index",rae=["Index","getMatrixDataType"],nae=W(tae,rae,t=>{var{Index:e,getMatrixDataType:r}=t;return function(){for(var a=[],i=0,s=arguments.length;i<s;i++){var u=arguments[i];if(Cy(u))u.start--,u.end-=u.step>0?0:2;else if(u&&u.isSet===!0)u=u.map(function(o){return o-1});else if(Wt(u)||Ye(u))r(u)!=="boolean"&&(u=u.map(function(o){return o-1}));else if(Xe(u)||oc(u))u--;else if(ut(u))u=u.toNumber()-1;else if(typeof u!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");a[i]=u}var l=new e;return e.apply(l,a),l}},{isTransformFunction:!0}),aae="map",iae=["typed"],sae=W(aae,iae,t=>{var{typed:e}=t,r=d4({typed:e}),n=Jy({typed:e});function a(i,s,u){if(i.length===0)return r();if(i.length===1)return r(i[0]);var l=i.length-1,o=i.slice(0,l),c=i[l];return o=o.map(d=>f(d,u)),c&&(Qr(c)||rf(c)?c=f(c,u):c=Ky(c,s,u)),r(...o,n(c,l));function f(d,m){return d.compile().evaluate(m)}}return a.rawArgs=!0,a},{isTransformFunction:!0});function oae(t){return Xe(t)?t-1:ut(t)?t.minus(1):t}function uae(t){return Xe(t)||ut(t)}function Ts(t){if(t.length===2&&Kn(t[0])){t=t.slice();var e=t[1];uae(e)&&(t[1]=oae(e))}return t}var lae="max",cae=["typed","config","numeric","larger","isNaN"],fae=W(lae,cae,t=>{var{typed:e,config:r,numeric:n,larger:a,isNaN:i}=t,s=w4({typed:e,config:r,numeric:n,larger:a,isNaN:i});return e("max",{"...any":function(l){l=Ts(l);try{return s.apply(null,l)}catch(o){throw Mn(o)}}})},{isTransformFunction:!0}),dae="mean",mae=["typed","add","divide"],hae=W(dae,mae,t=>{var{typed:e,add:r,divide:n}=t,a=M4({typed:e,add:r,divide:n});return e("mean",{"...any":function(s){s=Ts(s);try{return a.apply(null,s)}catch(u){throw Mn(u)}}})},{isTransformFunction:!0}),pae="min",vae=["typed","config","numeric","smaller","isNaN"],gae=W(pae,vae,t=>{var{typed:e,config:r,numeric:n,smaller:a,isNaN:i}=t,s=N4({typed:e,config:r,numeric:n,smaller:a,isNaN:i});return e("min",{"...any":function(l){l=Ts(l);try{return s.apply(null,l)}catch(o){throw Mn(o)}}})},{isTransformFunction:!0}),yae="range",xae=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],bae=W(yae,xae,t=>{var{typed:e,config:r,matrix:n,bignumber:a,equal:i,smaller:s,smallerEq:u,larger:l,largerEq:o,add:c,isZero:f,isPositive:d}=t,m=p4({typed:e,config:r,matrix:n,bignumber:a,equal:i,smaller:s,smallerEq:u,larger:l,largerEq:o,add:c,isZero:f,isPositive:d});return e("range",{"...any":function(v){var T=v.length-1,S=v[T];return typeof S!="boolean"&&v.push(!0),m.apply(null,v)}})},{isTransformFunction:!0}),wae="row",Nae=["typed","Index","matrix","range"],_ae=W(wae,Nae,t=>{var{typed:e,Index:r,matrix:n,range:a}=t,i=v4({typed:e,Index:r,matrix:n,range:a});return e("row",{"...any":function(u){var l=u.length-1,o=u[l];Xe(o)&&(u[l]=o-1);try{return i.apply(null,u)}catch(c){throw Mn(c)}}})},{isTransformFunction:!0}),Eae="subset",Sae=["typed","matrix","zeros","add"],Aae=W(Eae,Sae,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t,i=g4({typed:e,matrix:r,zeros:n,add:a});return e("subset",{"...any":function(u){try{return i.apply(null,u)}catch(l){throw Mn(l)}}})},{isTransformFunction:!0}),Dae="concat",Cae=["typed","matrix","isInteger"],Tae=W(Dae,Cae,t=>{var{typed:e,matrix:r,isInteger:n}=t,a=u4({typed:e,matrix:r,isInteger:n});return e("concat",{"...any":function(s){var u=s.length-1,l=s[u];Xe(l)?s[u]=l-1:ut(l)&&(s[u]=l.minus(1));try{return a.apply(null,s)}catch(o){throw Mn(o)}}})},{isTransformFunction:!0}),nA="diff",Mae=["typed","matrix","subtract","number","bignumber"],Iae=W(nA,Mae,t=>{var{typed:e,matrix:r,subtract:n,number:a,bignumber:i}=t,s=m4({typed:e,matrix:r,subtract:n,number:a,bignumber:i});return e(nA,{"...any":function(l){l=Ts(l);try{return s.apply(null,l)}catch(o){throw Mn(o)}}})},{isTransformFunction:!0}),Pae="std",Fae=["typed","map","sqrt","variance"],Rae=W(Pae,Fae,t=>{var{typed:e,map:r,sqrt:n,variance:a}=t,i=F4({typed:e,map:r,sqrt:n,variance:a});return e("std",{"...any":function(u){u=Ts(u);try{return i.apply(null,u)}catch(l){throw Mn(l)}}})},{isTransformFunction:!0}),aA="sum",Oae=["typed","config","add","numeric"],Bae=W(aA,Oae,t=>{var{typed:e,config:r,add:n,numeric:a}=t,i=C4({typed:e,config:r,add:n,numeric:a});return e(aA,{"...any":function(u){u=Ts(u);try{return i.apply(null,u)}catch(l){throw Mn(l)}}})},{isTransformFunction:!0}),jae="quantileSeq",kae=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],$ae=W(jae,kae,t=>{var{typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:u,compare:l,isInteger:o,smaller:c,smallerEq:f,larger:d,mapSlices:m}=t,h=P4({typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:u,compare:l,isInteger:o,smaller:c,smallerEq:f,larger:d,mapSlices:m});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(T,S,C)=>h(T,S,v(C)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(T,S,C,_)=>h(T,S,C,v(_)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(T,S,C)=>h(T,S,v(C)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(T,S,C,_)=>h(T,S,C,v(_))});function v(T){return Ts([[],T])[1]}},{isTransformFunction:!0}),iA="cumsum",Lae=["typed","add","unaryPlus"],zae=W(iA,Lae,t=>{var{typed:e,add:r,unaryPlus:n}=t,a=T4({typed:e,add:r,unaryPlus:n});return e(iA,{"...any":function(s){if(s.length===2&&Kn(s[0])){var u=s[1];Xe(u)?s[1]=u-1:ut(u)&&(s[1]=u.minus(1))}try{return a.apply(null,s)}catch(l){throw Mn(l)}}})},{isTransformFunction:!0}),sA="variance",Vae=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Uae=W(sA,Vae,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:u}=t,l=I4({typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:u});return e(sA,{"...any":function(c){c=Ts(c);try{return l.apply(null,c)}catch(f){throw Mn(f)}}})},{isTransformFunction:!0}),oA="print",qae=["typed","matrix","zeros","add"],Hae=W(oA,qae,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t,i=x4({typed:e,matrix:r,zeros:n,add:a});return e(oA,{"string, Object | Array":function(l,o){return i(s(l),o)},"string, Object | Array, number | Object":function(l,o,c){return i(s(l),o,c)}});function s(u){return u.replace(y4,l=>{var o=l.slice(1).split("."),c=o.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),Gae="and",Wae=["typed","matrix","zeros","add","equalScalar","not","concat"],Qae=W(Gae,Wae,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,u=b4({typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s});function l(o,c,f){var d=o[0].compile().evaluate(f);if(!Kn(d)&&!u(d,!0))return!1;var m=o[1].compile().evaluate(f);return u(d,m)}return l.rawArgs=!0,l},{isTransformFunction:!0}),Xae="or",Kae=["typed","matrix","equalScalar","DenseMatrix","concat"],Jae=W(Xae,Kae,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=o4({typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i});function u(l,o,c){var f=l[0].compile().evaluate(c);if(!Kn(f)&&s(f,!1))return!0;var d=l[1].compile().evaluate(c);return s(f,d)}return u.rawArgs=!0,u},{isTransformFunction:!0}),Yae="nullish",Zae=["typed","matrix","size","flatten","deepEqual"],eie=W(Yae,Zae,t=>{var{typed:e,matrix:r,size:n,flatten:a,deepEqual:i}=t,s=s4({typed:e,matrix:r,size:n,flatten:a,deepEqual:i});function u(l,o,c){var f=l[0].compile().evaluate(c);if(!Kn(f)&&f!=null&&f!==void 0)return f;var d=l[1].compile().evaluate(c);return s(f,d)}return u.rawArgs=!0,u},{isTransformFunction:!0}),tie="bitAnd",rie=["typed","matrix","zeros","add","equalScalar","not","concat"],nie=W(tie,rie,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,u=a4({typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s});function l(o,c,f){var d=o[0].compile().evaluate(f);if(!Kn(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var m=o[1].compile().evaluate(f);return u(d,m)}return l.rawArgs=!0,l},{isTransformFunction:!0}),aie="bitOr",iie=["typed","matrix","equalScalar","DenseMatrix","concat"],sie=W(aie,iie,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=i4({typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i});function u(l,o,c){var f=l[0].compile().evaluate(c);if(!Kn(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=l[1].compile().evaluate(c);return s(f,d)}return u.rawArgs=!0,u},{isTransformFunction:!0}),Pe=U7({config:be}),Jt=Q7({}),uA=Fre({BigNumber:Pe,config:be}),oie=Dre({}),uie=lne({BigNumber:Pe,config:be}),Ao=r$({}),B4=zre({Complex:Jt}),lie=Tre({BigNumber:Pe,config:be}),cie=Bre({BigNumber:Pe,config:be}),fie=kre({BigNumber:Pe,config:be}),Vh=u$({}),die=Mre({BigNumber:Pe,config:be}),mie=Cre({}),hie=Rre({BigNumber:Pe,config:be}),pie=i$({}),j4=Wk({}),vie=$re({BigNumber:Pe,config:be}),gie=Cne({BigNumber:Pe,config:be}),k4=Pre({BigNumber:Pe,config:be}),yie=Are({}),xie=Vre({}),ft=E$({Matrix:Vh,config:be}),bie=yne({BigNumber:Pe,config:be}),wie=Ore({BigNumber:Pe,config:be}),Vg=Ire({BigNumber:Pe,config:be}),$4=Ere({}),Nie=Lre({BigNumber:Pe,config:be}),Z=Uk({BigNumber:Pe,Complex:Jt,DenseMatrix:ft,Fraction:Ao}),_ie=gne({BigNumber:Pe,config:be}),In=$L({typed:Z}),Eie=pG({Complex:Jt,config:be,typed:Z}),Sie=xG({BigNumber:Pe,typed:Z}),Aie=_G({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),kr=UL({typed:Z}),Die=MV({typed:Z}),Cie=TG({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),Tie=RG({typed:Z}),L4=jG({typed:Z}),Mie=zG({Complex:Jt,config:be,typed:Z}),Iie=cL({typed:Z}),Pie=_V({typed:Z}),Fie=hL({typed:Z}),Rie=A$({typed:Z}),Uh=tte({typed:Z}),qh=bL({Complex:Jt,typed:Z}),Do=PV({typed:Z}),Yy=UG({typed:Z}),Oie=WG({BigNumber:Pe,typed:Z}),Bie=JG({BigNumber:Pe,typed:Z}),jie=iz({typed:Z}),vt=Z$({config:be,typed:Z}),kie=YU({typed:Z}),z4=oz({typed:Z}),$ie=lz({Complex:Jt,typed:Z}),Lie=c4({typed:Z}),Co=eU({typed:Z}),zie=f4({typed:Z}),of=lq({typed:Z}),Zy=aU({typed:Z}),Vie=pq({format:of,typed:Z}),ex=RV({typed:Z}),$n=C$({typed:Z}),Ms=k$({config:be,typed:Z}),To=q$({config:be,typed:Z}),ga=G$({equalScalar:vt,typed:Z}),Uie=jre({BigNumber:Pe,config:be}),qie=ote({Complex:Jt,typed:Z}),Hie=Uz({Complex:Jt,config:be,typed:Z}),tx=Hz({Complex:Jt,config:be,typed:Z}),Mo=d4({typed:Z}),xr=Qz({typed:Z}),Qm=kV({typed:Z}),Ai=oL({typed:Z}),Gie=mq({format:of,typed:Z}),Wie=Ote({config:be,typed:Z}),Qie=x4({typed:Z}),Xie=jte({config:be,typed:Z}),rx=BV({typed:Z}),Kie=tW({BigNumber:Pe,typed:Z}),V4=eV({BigNumber:Pe,Fraction:Ao,complex:qh,typed:Z}),Hh=iW({typed:Z}),$r=DU({typed:Z}),Lr=rL({Matrix:Vh,equalScalar:vt,typed:Z}),Jie=FL({typed:Z}),Yie=iV({typed:Z}),Zie=dL({typed:Z}),ya=HL({typed:Z}),ese=lW({typed:Z}),U4=bq({typed:Z}),nx=K$({typed:Z}),tse=gG({Complex:Jt,config:be,typed:Z}),rse=SG({BigNumber:Pe,typed:Z}),nse=DG({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),Ln=gL({BigNumber:Pe,typed:Z}),ase=nte({typed:Z}),ise=HG({typed:Z}),sse=ZG({BigNumber:Pe,typed:Z}),Gh=LW({addScalar:kr,conj:Do,multiplyScalar:xr,size:$r,typed:Z}),pi=Q$({typed:Z}),ose=Nq({typed:Z}),Uc=Fg({isInteger:$n,typed:Z}),Ie=SL({DenseMatrix:ft,Matrix:Vh,SparseMatrix:Lr,typed:Z}),use=DL({isZero:ga,matrix:Ie,typed:Z}),qt=Kz({addScalar:kr,dot:Gh,equalScalar:vt,matrix:Ie,multiplyScalar:xr,typed:Z}),lse=mU({BigNumber:Pe,config:be,matrix:Ie,typed:Z}),cse=$te({config:be,log2:tx,typed:Z}),q4=gU({isInteger:$n,matrix:Ie,typed:Z}),fse=nW({BigNumber:Pe,typed:Z}),dse=oW({typed:Z}),mse=fG({SparseMatrix:Lr,typed:Z}),Ra=nV({Complex:Jt,config:be,typed:Z}),hse=TU({typed:Z}),pse=dW({typed:Z}),uf=OU({matrix:Ie,typed:Z}),H4=lV({BigNumber:Pe,config:be,matrix:Ie,typed:Z}),tn=$U({BigNumber:Pe,config:be,matrix:Ie,typed:Z}),vse=wG({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),gse=IG({Complex:Jt,config:be,typed:Z}),yse=fq({format:of,typed:Z}),At=u4({isInteger:$n,matrix:Ie,typed:Z}),xse=XG({BigNumber:Pe,typed:Z}),ax=jU({conj:Do,transpose:uf,typed:Z}),G4=KV({DenseMatrix:ft,SparseMatrix:Lr,matrix:Ie,typed:Z}),bse=pV({concat:At,equalScalar:vt,matrix:Ie,multiplyScalar:xr,typed:Z}),Vn=vH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),lf=_L({Fraction:Ao,typed:Z}),Is=sU({BigNumber:Pe,DenseMatrix:ft,SparseMatrix:Lr,config:be,matrix:Ie,typed:Z}),Io=L$({typed:Z}),wse=uU({matrix:Ie,multiplyScalar:xr,typed:Z}),Wh=MH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,config:be,matrix:Ie,typed:Z}),Nse=eH({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),_se=TL({flatten:Co,matrix:Ie,size:$r,typed:Z}),Ese=iq({isNaN:pi,isNumeric:Io,typed:Z}),Sse=Yz({BigNumber:Pe,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),da=Sq({bignumber:Ln,fraction:lf,number:Ai}),W4=oq({config:be,multiplyScalar:xr,numeric:da,typed:Z}),Ase=bU({config:be,matrix:Ie}),Dse=rH({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),ul=Iq({BigNumber:Pe,DenseMatrix:ft,config:be,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),Sn=wH({DenseMatrix:ft,SparseMatrix:Lr,bignumber:Ln,concat:At,config:be,matrix:Ie,typed:Z}),Cse=yq({concat:At,matrix:Ie,typed:Z}),ri=OL({typed:Z}),Tse=OH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,config:be,equalScalar:vt,matrix:Ie,typed:Z}),Mse=VV({DenseMatrix:ft,SparseMatrix:Lr,concat:At,matrix:Ie,typed:Z}),bt=RW({DenseMatrix:ft,SparseMatrix:Lr,addScalar:kr,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Ise=$G({BigNumber:Pe,DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Pse=a4({concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Fse=i4({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Rse=CV({DenseMatrix:ft,SparseMatrix:Lr,concat:At,matrix:Ie,typed:Z}),Q4=WL({BigNumber:Pe,Complex:Jt,Fraction:Ao,config:be,isNegative:Ms,matrix:Ie,typed:Z,unaryMinus:ri}),Po=oH({BigNumber:Pe,DenseMatrix:ft,Fraction:Ao,concat:At,config:be,equalScalar:vt,matrix:Ie,typed:Z}),X4=hH({concat:At,matrix:Ie,typed:Z}),Ose=GV({prod:W4,size:$r,typed:Z}),cf=FH({equal:Vn,typed:Z}),fr=Dq({numeric:da,typed:Z}),Bse=xH({compareText:X4,isZero:ga,typed:Z}),K4=e4({DenseMatrix:ft,config:be,equalScalar:vt,matrix:Ie,round:ul,typed:Z,zeros:tn}),jse=Bz({BigNumber:Pe,DenseMatrix:ft,concat:At,config:be,equalScalar:vt,matrix:Ie,round:ul,typed:Z,zeros:tn}),kse=V$({isNumeric:Io,typed:Z}),$se=BW({abs:In,addScalar:kr,divideScalar:fr,isPositive:To,multiplyScalar:xr,smaller:Sn,sqrt:Ra,typed:Z}),J4=HH({DenseMatrix:ft,smaller:Sn}),vn=QH({ImmutableDenseMatrix:J4,getMatrixDataType:Zy}),An=DH({DenseMatrix:ft,SparseMatrix:Lr,bignumber:Ln,concat:At,config:be,matrix:Ie,typed:Z}),ix=Rq({Complex:Jt,config:be,divideScalar:fr,typeOf:nx,typed:Z}),Y4=qq({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:ya,typed:Z}),sx=IL({flatten:Co,matrix:Ie,size:$r,typed:Z}),Lse=N4({config:be,isNaN:pi,numeric:da,smaller:Sn,typed:Z}),Z4=r4({DenseMatrix:ft,concat:At,config:be,equalScalar:vt,matrix:Ie,round:ul,typed:Z,zeros:tn}),zse=kq({Complex:Jt,config:be,divideScalar:fr,typed:Z}),Vse=s4({deepEqual:cf,flatten:Co,matrix:Ie,size:$r,typed:Z}),Use=o4({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Qh=kH({compare:Po,isNaN:pi,isNumeric:Io,typed:Z}),ox=XQ({addScalar:kr,complex:qh,conj:Do,divideScalar:fr,equal:Vn,identity:Is,isZero:ga,matrix:Ie,multiplyScalar:xr,sign:V4,sqrt:Ra,subtractScalar:ya,typed:Z,unaryMinus:ri,zeros:tn}),qse=aH({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),qu=EH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,config:be,matrix:Ie,typed:Z}),ea=g4({add:bt,matrix:Ie,typed:Z,zeros:tn}),Er=oV({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,subtractScalar:ya,typed:Z,unaryMinus:ri}),Hse=UW({add:bt,matrix:Ie,typed:Z}),ux=Gq({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:ya,typed:Z}),Gse=vre({Complex:Jt,add:bt,multiply:qt,number:Ai,typed:Z}),Wse=Hte({addScalar:kr,combinations:Uh,divideScalar:fr,isInteger:$n,isNegative:Ms,multiplyScalar:xr,typed:Z}),ni=fH({compare:Po,typed:Z}),Qse=Wte({addScalar:kr,combinations:Uh,isInteger:$n,isNegative:Ms,isPositive:To,larger:An,typed:Z}),Xse=QV({matrix:Ie,multiply:qt,subtract:Er,typed:Z}),eI=hee({divideScalar:fr,isZero:ga,matrix:Ie,multiply:qt,subtractScalar:ya,typed:Z,unaryMinus:ri}),Kse=m4({matrix:Ie,number:Ai,subtract:Er,typed:Z}),Jse=kee({abs:In,addScalar:kr,deepEqual:cf,divideScalar:fr,multiplyScalar:xr,sqrt:Ra,subtractScalar:ya,typed:Z}),ff=Vq({DenseMatrix:ft,SparseMatrix:Lr,concat:At,divideScalar:fr,equalScalar:vt,matrix:Ie,typed:Z}),tI=JH({larger:An,smaller:Sn}),rI=HW({Index:vn,typed:Z}),Yse=zee({abs:In,add:bt,addScalar:kr,config:be,divideScalar:fr,equalScalar:vt,flatten:Co,isNumeric:Io,isZero:ga,matrix:Ie,multiply:qt,multiplyScalar:xr,smaller:Sn,subtract:Er,typed:Z}),Zse=fV({BigNumber:Pe,add:bt,config:be,equal:Vn,isInteger:$n,mod:Z4,smaller:Sn,typed:Z,xgcd:H4}),eoe=Lz({concat:At,equalScalar:vt,matrix:Ie,typed:Z}),toe=Bq({Complex:Jt,config:be,divideScalar:fr,log:ix,typed:Z}),roe=Qq({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:ya,typed:Z}),lx=w4({config:be,isNaN:pi,larger:An,numeric:da,typed:Z}),Hu=p4({bignumber:Ln,matrix:Ie,add:bt,config:be,equal:Vn,isPositive:To,isZero:ga,larger:An,largerEq:Wh,smaller:Sn,smallerEq:qu,typed:Z}),noe=v4({Index:vn,matrix:Ie,range:Hu,typed:Z}),aoe=hW({DenseMatrix:ft,Index:vn,compareNatural:ni,size:$r,subset:ea,typed:Z}),ioe=yW({DenseMatrix:ft,Index:vn,compareNatural:ni,size:$r,subset:ea,typed:Z}),soe=NW({Index:vn,compareNatural:ni,size:$r,subset:ea,typed:Z}),ooe=AW({Index:vn,compareNatural:ni,size:$r,subset:ea,typed:Z}),nI=xX({SparseMatrix:Lr,abs:In,add:bt,divideScalar:fr,larger:An,largerEq:Wh,multiply:qt,subtract:Er,transpose:uf,typed:Z}),uoe=LH({compare:Po,compareNatural:ni,matrix:Ie,typed:Z}),cx=jL({config:be,numeric:da,typed:Z}),aI=Kq({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:ya,typed:Z}),loe=b4({concat:At,equalScalar:vt,matrix:Ie,not:Qm,typed:Z,zeros:tn}),fx=nz({DenseMatrix:ft,config:be,equalScalar:vt,matrix:Ie,round:ul,typed:Z,zeros:tn}),iI=l4({Index:vn,matrix:Ie,range:Hu,typed:Z}),coe=T4({add:bt,typed:Z,unaryPlus:cx}),sI=dz({Complex:Jt,DenseMatrix:ft,ceil:fx,equalScalar:vt,floor:K4,matrix:Ie,typed:Z,zeros:tn}),oI=vW({DenseMatrix:ft,Index:vn,compareNatural:ni,size:$r,subset:ea,typed:Z}),foe=EW({Index:vn,compareNatural:ni,size:$r,subset:ea,typed:Z}),uI=MW({Index:vn,concat:At,setDifference:oI,size:$r,subset:ea,typed:Z}),lI=eG({FibonacciHeap:tI,addScalar:kr,equalScalar:vt}),dx=C4({add:bt,config:be,numeric:da,typed:Z}),Fo=vee({abs:In,addScalar:kr,det:eI,divideScalar:fr,identity:Is,matrix:Ie,multiply:qt,typed:Z,unaryMinus:ri}),cI=WQ({DenseMatrix:ft,Spa:lI,SparseMatrix:Lr,abs:In,addScalar:kr,divideScalar:fr,equalScalar:vt,larger:An,matrix:Ie,multiplyScalar:xr,subtractScalar:ya,typed:Z,unaryMinus:ri}),doe=yee({Complex:Jt,add:bt,ctranspose:ax,deepEqual:cf,divideScalar:fr,dot:Gh,dotDivide:ff,equal:Vn,inv:Fo,matrix:Ie,multiply:qt,typed:Z}),Oa=Tq({Complex:Jt,config:be,fraction:lf,identity:Is,inv:Fo,matrix:Ie,multiply:qt,number:Ai,typed:Z}),fI=bW({DenseMatrix:ft,Index:vn,compareNatural:ni,size:$r,subset:ea,typed:Z}),moe=PW({Index:vn,concat:At,setIntersect:fI,setSymDifference:uI,size:$r,subset:ea,typed:Z}),hoe=Dee({abs:In,add:bt,identity:Is,inv:Fo,map:Mo,max:lx,multiply:qt,size:$r,sqrt:Ra,subtract:Er,typed:Z}),tt=oG({BigNumber:Pe,Complex:Jt,Fraction:Ao,abs:In,addScalar:kr,config:be,divideScalar:fr,equal:Vn,fix:sI,format:of,isNumeric:Io,multiplyScalar:xr,number:Ai,pow:Oa,round:ul,subtractScalar:ya,toBest:U4}),poe=Xre({BigNumber:Pe,Unit:tt,config:be}),voe=Ine({BigNumber:Pe,Unit:tt,config:be}),goe=xne({BigNumber:Pe,Unit:tt,config:be}),yoe=Zre({BigNumber:Pe,Unit:tt,config:be}),xoe=wne({BigNumber:Pe,Unit:tt,config:be}),boe=ene({BigNumber:Pe,Unit:tt,config:be}),woe=Kre({BigNumber:Pe,Unit:tt,config:be}),Noe=mG({Unit:tt,typed:Z}),_oe=dne({BigNumber:Pe,Unit:tt,config:be}),Eoe=Lq({DenseMatrix:ft,SparseMatrix:Lr,concat:At,equalScalar:vt,matrix:Ie,pow:Oa,typed:Z}),Soe=Qre({BigNumber:Pe,Unit:tt,config:be}),Aoe=Yre({BigNumber:Pe,Unit:tt,config:be}),Doe=See({abs:In,add:bt,identity:Is,inv:Fo,multiply:qt,typed:Z}),Coe=Nne({BigNumber:Pe,Unit:tt,config:be}),dI=zU({addScalar:kr,ceil:fx,conj:Do,divideScalar:fr,dotDivide:ff,exp:z4,i:B4,log2:tx,matrix:Ie,multiplyScalar:xr,pow:Oa,tau:k4,typed:Z}),mx=ite({BigNumber:Pe,Complex:Jt,config:be,multiplyScalar:xr,pow:Oa,typed:Z}),Toe=qre({BigNumber:Pe,Unit:tt,config:be}),Moe=cne({BigNumber:Pe,Unit:tt,config:be}),Ioe=UU({conj:Do,dotDivide:ff,fft:dI,typed:Z}),Poe=ane({BigNumber:Pe,Unit:tt,config:be}),Foe=Ene({BigNumber:Pe,Unit:tt,config:be}),Roe=Wre({BigNumber:Pe,Unit:tt,config:be}),Ooe=Pne({BigNumber:Pe,Unit:tt,config:be}),Boe=Ane({BigNumber:Pe,Unit:tt,config:be}),joe=mne({BigNumber:Pe,Unit:tt,config:be}),koe=nne({BigNumber:Pe,Unit:tt,config:be}),$oe=kne({BigNumber:Pe,Unit:tt,config:be}),Loe=One({BigNumber:Pe,Unit:tt,config:be}),zoe=$ne({BigNumber:Pe,Unit:tt,config:be}),Voe=fne({BigNumber:Pe,Unit:tt,config:be}),Uoe=hne({BigNumber:Pe,Unit:tt,config:be}),qoe=Gre({BigNumber:Pe,Unit:tt,config:be}),Hoe=pne({BigNumber:Pe,Unit:tt,config:be}),Goe=Tne({BigNumber:Pe,Unit:tt,config:be}),Woe=Ure({BigNumber:Pe,Unit:tt,config:be}),Qoe=Mne({BigNumber:Pe,Unit:tt,config:be}),Xoe=vne({BigNumber:Pe,Unit:tt,config:be}),Koe=bne({BigNumber:Pe,Unit:tt,config:be}),Joe=ine({BigNumber:Pe,Unit:tt,config:be}),Yoe=Jre({BigNumber:Pe,Unit:tt,config:be}),nn=Bee({divideScalar:fr,equalScalar:vt,inv:Fo,matrix:Ie,multiply:qt,typed:Z}),Zoe=one({BigNumber:Pe,Unit:tt,config:be}),ei=lte({gamma:mx,typed:Z}),eue=_ne({BigNumber:Pe,Unit:tt,config:be}),tue=Rne({BigNumber:Pe,Unit:tt,config:be}),rue=tne({BigNumber:Pe,Unit:tt,config:be}),mI=wX({DenseMatrix:ft,lsolve:Y4,lup:cI,matrix:Ie,slu:nI,typed:Z,usolve:ux}),nue=rne({BigNumber:Pe,Unit:tt,config:be}),aue=Fne({BigNumber:Pe,Unit:tt,config:be}),iue=mte({add:bt,divide:nn,factorial:ei,isInteger:$n,isPositive:To,multiply:qt,typed:Z}),sue=pte({factorial:ei,typed:Z}),oue=Bne({BigNumber:Pe,Unit:tt,config:be}),uue=_X({add:bt,cbrt:Q4,divide:nn,equalScalar:vt,im:ex,isZero:ga,multiply:qt,re:rx,sqrt:Ra,subtract:Er,typeOf:nx,typed:Z,unaryMinus:ri}),lue=CW({compareNatural:ni,typed:Z}),cue=XU({abs:In,add:bt,bignumber:Ln,divide:nn,isNegative:Ms,isPositive:To,larger:An,map:Mo,matrix:Ie,max:lx,multiply:qt,smaller:Sn,subtract:Er,typed:Z,unaryMinus:ri}),hI=zte({bignumber:Ln,addScalar:kr,combinations:Uh,divideScalar:fr,factorial:ei,isInteger:$n,isNegative:Ms,larger:An,multiplyScalar:xr,number:Ai,pow:Oa,subtractScalar:ya,typed:Z}),fue=lG({Unit:tt,typed:Z}),due=Ute({addScalar:kr,isInteger:$n,isNegative:Ms,stirlingS2:hI,typed:Z}),pI=_ee({abs:In,add:bt,addScalar:kr,atan:L4,bignumber:Ln,column:iI,complex:qh,config:be,cos:Yy,diag:G4,divideScalar:fr,dot:Gh,equal:Vn,flatten:Co,im:ex,inv:Fo,larger:An,matrix:Ie,matrixFromColumns:sx,multiply:qt,multiplyScalar:xr,number:Ai,qr:ox,re:rx,reshape:q4,sin:Hh,size:$r,smaller:Sn,sqrt:Ra,subtract:Er,typed:Z,usolve:ux,usolveAll:aI}),mue=une({BigNumber:Pe,Unit:tt,config:be}),hue=Sne({BigNumber:Pe,Unit:tt,config:be}),pue=fte({divide:nn,dotDivide:ff,isNumeric:Io,log:ix,map:Mo,matrix:Ie,multiply:qt,sum:dx,typed:Z}),vI=M4({add:bt,divide:nn,typed:Z}),vue=Dne({BigNumber:Pe,Unit:tt,config:be}),gue=Hre({BigNumber:Pe,Unit:tt,config:be}),yue=P4({bignumber:Ln,add:bt,compare:Po,divide:nn,isInteger:$n,larger:An,mapSlices:Uc,multiply:qt,partitionSelect:Qh,smaller:Sn,smallerEq:qu,subtract:Er,typed:Z}),hx=I4({add:bt,divide:nn,isNaN:pi,mapSlices:Uc,multiply:qt,subtract:Er,typed:Z}),xue=sne({BigNumber:Pe,Unit:tt,config:be}),gI=Gee({add:bt,compare:Po,divide:nn,partitionSelect:Qh,typed:Z}),bue=Zee({add:bt,divide:nn,matrix:Ie,mean:vI,multiply:qt,pow:Oa,sqrt:Ra,subtract:Er,sum:dx,typed:Z}),wue=yre({Complex:Jt,add:bt,divide:nn,matrix:Ie,multiply:qt,typed:Z}),Nue=Qee({abs:In,map:Mo,median:gI,subtract:Er,typed:Z}),_ue=F4({map:Mo,sqrt:Ra,typed:Z,variance:hx}),Eue=nq({BigNumber:Pe,Complex:Jt,add:bt,config:be,divide:nn,equal:Vn,factorial:ei,gamma:mx,isNegative:Ms,multiply:qt,pi:Vg,pow:Oa,sin:Hh,smallerEq:qu,subtract:Er,typed:Z}),px=kW({abs:In,add:bt,conj:Do,ctranspose:ax,eigs:pI,equalScalar:vt,larger:An,matrix:Ie,multiply:qt,pow:Oa,smaller:Sn,sqrt:Ra,typed:Z}),yI=EU({BigNumber:Pe,DenseMatrix:ft,SparseMatrix:Lr,addScalar:kr,config:be,cos:Yy,matrix:Ie,multiplyScalar:xr,norm:px,sin:Hh,typed:Z,unaryMinus:ri}),Sue=jne({BigNumber:Pe,Unit:tt,config:be}),xI=Iee({identity:Is,matrix:Ie,multiply:qt,norm:px,qr:ox,subtract:Er,typed:Z}),Aue=NU({multiply:qt,rotationMatrix:yI,typed:Z}),bI=Tee({abs:In,add:bt,concat:At,identity:Is,index:rI,lusolve:mI,matrix:Ie,matrixFromColumns:sx,multiply:qt,range:Hu,schur:xI,subset:ea,subtract:Er,transpose:uf,typed:Z}),Due=Fee({matrix:Ie,multiply:qt,sylvester:bI,transpose:uf,typed:Z}),ll={},df={},wI={},wn=QW({mathWithTransform:df}),cl=bQ({Node:wn}),Di=NQ({Node:wn}),Ro=EQ({Node:wn}),NI=CQ({Node:wn}),fl=YW({Node:wn}),_I=aQ({Node:wn,ResultSet:j4}),EI=sQ({Node:wn}),Ps=hQ({Node:wn}),SI=AQ({Node:wn}),Cue=wre({classes:wI}),vx=TX({math:ll,typed:Z}),AI=vQ({Node:wn,typed:Z}),Tue=dee({Chain:vx,typed:Z}),dl=yQ({Node:wn,size:$r}),ml=KW({Node:wn,subset:ea}),DI=rQ({matrix:Ie,Node:wn,subset:ea}),Fs=IQ({Unit:tt,Node:wn,math:ll}),Rs=FQ({Node:wn,SymbolNode:Fs,math:ll}),Ba=OQ({AccessorNode:ml,ArrayNode:fl,AssignmentNode:DI,BlockNode:_I,ConditionalNode:EI,ConstantNode:Ps,FunctionAssignmentNode:AI,FunctionNode:Rs,IndexNode:dl,ObjectNode:cl,OperatorNode:Di,ParenthesisNode:Ro,RangeNode:SI,RelationalNode:NI,SymbolNode:Fs,config:be,numeric:da,typed:Z}),CI=ure({ConstantNode:Ps,FunctionNode:Rs,OperatorNode:Di,ParenthesisNode:Ro,parse:Ba,typed:Z}),gx=nre({bignumber:Ln,fraction:lf,AccessorNode:ml,ArrayNode:fl,ConstantNode:Ps,FunctionNode:Rs,IndexNode:dl,ObjectNode:cl,OperatorNode:Di,SymbolNode:Fs,config:be,mathWithTransform:df,matrix:Ie,typed:Z}),Mue=jQ({parse:Ba,typed:Z}),yx=ire({AccessorNode:ml,ArrayNode:fl,ConstantNode:Ps,FunctionNode:Rs,IndexNode:dl,ObjectNode:cl,OperatorNode:Di,ParenthesisNode:Ro,SymbolNode:Fs,add:bt,divide:nn,equal:Vn,isZero:ga,multiply:qt,parse:Ba,pow:Oa,subtract:Er,typed:Z}),Os=$Q({parse:Ba,typed:Z}),TI=AX({evaluate:Os}),MI=VQ({evaluate:Os,parse:Ba}),Xh=ere({AccessorNode:ml,ArrayNode:fl,ConstantNode:Ps,FunctionNode:Rs,IndexNode:dl,ObjectNode:cl,OperatorNode:Di,ParenthesisNode:Ro,SymbolNode:Fs,equal:Vn,parse:Ba,replacer:$4,resolve:CI,simplifyConstant:gx,simplifyCore:yx,typed:Z}),Iue=cre({OperatorNode:Di,parse:Ba,simplify:Xh,typed:Z}),Pue=Xte({parse:Ba,typed:Z}),Fue=HQ({Parser:MI,typed:Z}),Rue=hre({bignumber:Ln,fraction:lf,AccessorNode:ml,ArrayNode:fl,ConstantNode:Ps,FunctionNode:Rs,IndexNode:dl,ObjectNode:cl,OperatorNode:Di,ParenthesisNode:Ro,SymbolNode:Fs,add:bt,config:be,divide:nn,equal:Vn,isZero:ga,mathWithTransform:df,matrix:Ie,multiply:qt,parse:Ba,pow:Oa,simplify:Xh,simplifyConstant:gx,simplifyCore:yx,subtract:Er,typed:Z}),II=dre({ConstantNode:Ps,FunctionNode:Rs,OperatorNode:Di,ParenthesisNode:Ro,SymbolNode:Fs,config:be,equal:Vn,isZero:ga,numeric:da,parse:Ba,simplify:Xh,typed:Z}),Oue=cee({Help:TI,mathWithTransform:df,typed:Z});Nr(ll,{e:uA,false:oie,fineStructure:uie,i:B4,Infinity:lie,LN10:cie,LOG10E:fie,NaN:die,null:mie,phi:hie,SQRT1_2:vie,sackurTetrode:gie,tau:k4,true:yie,E:uA,version:xie,efimovFactor:bie,LN2:wie,pi:Vg,replacer:$4,reviver:Cue,SQRT2:Nie,typed:Z,PI:Vg,weakMixingAngle:_ie,abs:In,acos:Eie,acot:Sie,acsc:Aie,addScalar:kr,arg:Die,asech:Cie,asinh:Tie,atan:L4,atanh:Mie,bigint:Iie,bitNot:Pie,boolean:Fie,clone:Rie,combinations:Uh,complex:qh,conj:Do,cos:Yy,cot:Oie,csc:Bie,cube:jie,equalScalar:vt,erf:kie,exp:z4,expm1:$ie,filter:Lie,flatten:Co,forEach:zie,format:of,getMatrixDataType:Zy,hex:Vie,im:ex,isInteger:$n,isNegative:Ms,isPositive:To,isZero:ga,LOG2E:Uie,lgamma:qie,log10:Hie,log2:tx,map:Mo,multiplyScalar:xr,not:Qm,number:Ai,oct:Gie,pickRandom:Wie,print:Qie,random:Xie,re:rx,sec:Kie,sign:V4,sin:Hh,size:$r,splitUnit:Jie,square:Yie,string:Zie,subtractScalar:ya,tan:ese,toBest:U4,typeOf:nx,acosh:tse,acsch:rse,asec:nse,bignumber:Ln,chain:Tue,combinationsWithRep:ase,cosh:ise,csch:sse,dot:Gh,isNaN:pi,isPrime:ose,mapSlices:Uc,matrix:Ie,matrixFromFunction:use,multiply:qt,ones:lse,randomInt:cse,reshape:q4,sech:fse,sinh:dse,sparse:mse,sqrt:Ra,squeeze:hse,tanh:pse,transpose:uf,xgcd:H4,zeros:tn,acoth:vse,asin:gse,bin:yse,concat:At,coth:xse,ctranspose:ax,diag:G4,dotMultiply:bse,equal:Vn,fraction:lf,identity:Is,isNumeric:Io,kron:wse,largerEq:Wh,leftShift:Nse,matrixFromRows:_se,mode:Ese,nthRoot:Sse,numeric:da,prod:W4,resize:Ase,rightArithShift:Dse,round:ul,smaller:Sn,to:Cse,unaryMinus:ri,unequal:Tse,xor:Mse,add:bt,atan2:Ise,bitAnd:Pse,bitOr:Fse,bitXor:Rse,cbrt:Q4,compare:Po,compareText:X4,count:Ose,deepEqual:cf,divideScalar:fr,equalText:Bse,floor:K4,gcd:jse,hasNumericValue:kse,hypot:$se,larger:An,log:ix,lsolve:Y4,matrixFromColumns:sx,min:Lse,mod:Z4,nthRoots:zse,nullish:Vse,or:Use,partitionSelect:Qh,qr:ox,rightLogShift:qse,smallerEq:qu,subset:ea,subtract:Er,trace:Hse,usolve:ux,zpk2tf:Gse,catalan:Wse,compareNatural:ni,composition:Qse,cross:Xse,det:eI,diff:Kse,distance:Jse,dotDivide:ff,index:rI,intersect:Yse,invmod:Zse,lcm:eoe,log1p:toe,lsolveAll:roe,max:lx,range:Hu,row:noe,setCartesian:aoe,setDistinct:ioe,setIsSubset:soe,setPowerset:ooe,slu:nI,sort:uoe,unaryPlus:cx,usolveAll:aI,and:loe,ceil:fx,column:iI,cumsum:coe,fix:sI,setDifference:oI,setMultiplicity:foe,setSymDifference:uI,sum:dx,inv:Fo,lup:cI,pinv:doe,pow:Oa,setIntersect:fI,setUnion:moe,sqrtm:hoe,vacuumImpedance:poe,wienDisplacement:voe,atomicMass:goe,bohrMagneton:yoe,boltzmann:xoe,conductanceQuantum:boe,coulomb:woe,createUnit:Noe,deuteronMass:_oe,dotPow:Eoe,electricConstant:Soe,elementaryCharge:Aoe,expm:Doe,faraday:Coe,fft:dI,gamma:mx,gravitationConstant:Toe,hartreeEnergy:Moe,ifft:Ioe,klitzing:Poe,loschmidt:Foe,magneticConstant:Roe,molarMass:Ooe,molarPlanckConstant:Boe,neutronMass:joe,nuclearMagneton:koe,planckCharge:$oe,planckLength:Loe,planckTemperature:zoe,protonMass:Voe,quantumOfCirculation:Uoe,reducedPlanckConstant:qoe,rydberg:Hoe,secondRadiation:Goe,speedOfLight:Woe,stefanBoltzmann:Qoe,thomsonCrossSection:Xoe,avogadro:Koe,bohrRadius:Joe,coulombConstant:Yoe,divide:nn,electronMass:Zoe,factorial:ei,firstRadiation:eue,gravity:tue,inverseConductanceQuantum:rue,lusolve:mI,magneticFluxQuantum:nue,molarMassC12:aue,multinomial:iue,parse:Ba,permutations:sue,planckMass:oue,polynomialRoot:uue,resolve:CI,setSize:lue,simplifyConstant:gx,solveODE:cue,stirlingS2:hI,unit:fue,bellNumbers:due,compile:Mue,eigs:pI,fermiCoupling:mue,gasConstant:hue,kldivergence:pue,mean:vI,molarVolume:vue,planckConstant:gue,quantileSeq:yue,simplifyCore:yx,variance:hx,classicalElectronRadius:xue,evaluate:Os,median:gI,simplify:Xh,symbolicEqual:Iue,corr:bue,freqz:wue,leafCount:Pue,mad:Nue,parser:Fue,rationalize:Rue,std:_ue,zeta:Eue,derivative:II,norm:px,rotationMatrix:yI,help:Oue,planckTime:Sue,schur:xI,rotate:Aue,sylvester:bI,lyap:Due,config:be});Nr(df,ll,{mapSlices:Une({isInteger:$n,typed:Z}),filter:Jne({typed:Z}),forEach:eae({typed:Z}),map:sae({typed:Z}),or:Jae({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),and:Qae({add:bt,concat:At,equalScalar:vt,matrix:Ie,not:Qm,typed:Z,zeros:tn}),concat:Tae({isInteger:$n,matrix:Ie,typed:Z}),max:fae({config:be,isNaN:pi,larger:An,numeric:da,typed:Z}),print:Hae({add:bt,matrix:Ie,typed:Z,zeros:tn}),sum:Bae({add:bt,config:be,numeric:da,typed:Z}),bitAnd:nie({add:bt,concat:At,equalScalar:vt,matrix:Ie,not:Qm,typed:Z,zeros:tn}),min:gae({config:be,isNaN:pi,numeric:da,smaller:Sn,typed:Z}),nullish:eie({deepEqual:cf,flatten:Co,matrix:Ie,size:$r,typed:Z}),subset:Aae({add:bt,matrix:Ie,typed:Z,zeros:tn}),bitOr:sie({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),diff:Iae({bignumber:Ln,matrix:Ie,number:Ai,subtract:Er,typed:Z}),index:nae({Index:vn,getMatrixDataType:Zy}),range:bae({bignumber:Ln,matrix:Ie,add:bt,config:be,equal:Vn,isPositive:To,isZero:ga,larger:An,largerEq:Wh,smaller:Sn,smallerEq:qu,typed:Z}),row:_ae({Index:vn,matrix:Ie,range:Hu,typed:Z}),column:Gne({Index:vn,matrix:Ie,range:Hu,typed:Z}),cumsum:zae({add:bt,typed:Z,unaryPlus:cx}),mean:hae({add:bt,divide:nn,typed:Z}),quantileSeq:$ae({add:bt,bignumber:Ln,compare:Po,divide:nn,isInteger:$n,larger:An,mapSlices:Uc,multiply:qt,partitionSelect:Qh,smaller:Sn,smallerEq:qu,subtract:Er,typed:Z}),variance:Uae({add:bt,divide:nn,isNaN:pi,mapSlices:Uc,multiply:qt,subtract:Er,typed:Z}),std:Rae({map:Mo,sqrt:Ra,typed:Z,variance:hx})});Nr(wI,{BigNumber:Pe,Complex:Jt,Fraction:Ao,Matrix:Vh,Node:wn,ObjectNode:cl,OperatorNode:Di,ParenthesisNode:Ro,Range:pie,RelationalNode:NI,ResultSet:j4,ArrayNode:fl,BlockNode:_I,ConditionalNode:EI,ConstantNode:Ps,DenseMatrix:ft,RangeNode:SI,Chain:vx,FunctionAssignmentNode:AI,SparseMatrix:Lr,IndexNode:dl,ImmutableDenseMatrix:J4,Index:vn,AccessorNode:ml,AssignmentNode:DI,FibonacciHeap:tI,Spa:lI,Unit:tt,SymbolNode:Fs,FunctionNode:Rs,Help:TI,Parser:MI});vx.createProxy(ll);function Bue(){const[t,e]=G.useState("e^x"),[r,n]=G.useState(0),[a,i]=G.useState(1),[s,u]=G.useState(3),[l,o]=G.useState("-"),[c,f]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=G.useState([]),{problems:h,removingIds:v,refresh:T,saveProblem:S,deleteProblem:C}=$t(rk);G.useEffect(()=>{T().catch(console.error)},[T]);const _=(N,E,b,D)=>{const I=[];let F=0,O=N;for(let P=0;P<=D;P++){const z=Os(O,{x:E}),$=z*Math.pow(b-E,P)/ei(P);F+=$,I.push({i:P,fx0:z,term:$}),O=II(O,"x").toString()}return{result:F,terms:I}},M=()=>{try{const{result:N,terms:E}=_(t,r,a,s);o(N),m(E),f("สถานะ: คำนวณสำเร็จ")}catch(N){console.error(N),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),o("-"),m([])}},y=()=>{e("e^x"),n(0),i(1),u(3),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},x=async()=>{try{await S({expr:t,x0:r,x:a,n:s,method:"taylor"}),alert("บันทึกแล้ว!")}catch(N){alert("บันทึกไม่สำเร็จ: "+((N==null?void 0:N.message)||String(N)))}},w=N=>{e(N.expr),n(N.x0),i(N.x),u(N.n)},g=N=>{confirm("ลบโจทย์นี้ไหม?")&&C(N.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Taylor Series Approximation",subtitle:"การประมาณค่า f(x) ด้วยอนุพันธ์หลายลำดับ (Taylor Series)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),p.jsx("input",{type:"text",value:t,onChange:N=>e(N.target.value),placeholder:"เช่น e^x, sin(x), x^3 + 2x",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),p.jsx("input",{type:"number",value:r,onChange:N=>n(parseFloat(N.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x"}),p.jsx("input",{type:"number",value:a,onChange:N=>i(parseFloat(N.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนเทอม (n)"}),p.jsx("input",{type:"number",value:s,onChange:N=>u(parseInt(N.target.value)||1),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:M,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:y,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:c}),p.jsx(Lt,{problems:h,onLoad:w,onDelete:g,removingIds:v})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Taylor Series:",p.jsx("br",{}),"f(x) ≈ f(x₀) + f'(x₀)(x−x₀) + f''(x₀)(x−x₀)²/2! + …"]}),d.length>0&&p.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:p.jsxs("table",{className:"min-w-full border border-slate-700",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700",children:[p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f⁽ⁱ⁾(x₀)"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"เทอมที่ i"})]})}),p.jsx("tbody",{children:d.map(N=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-2 py-1 border border-slate-700 text-center",children:N.i}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(N.fx0)}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(N.term)})]},N.i))})]})}),l!=="-"&&p.jsx("div",{className:"text-sm text-gray-300",children:p.jsxs("p",{children:["f(",a,") ≈ ",p.jsx("b",{children:Re(l)})]})})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function jue(t,e,r,n=1e-6,a=50){try{const i=[];let s=e;for(let u=0;u<=a;u++){let l=t(s);if(!isFinite(l))return{error:"f(x) คำนวณไม่ได้",iterations:i,converged:!1};const o=1e-8,c=(t(s+o)-t(s-o))/(2*o);if(!isFinite(c)||c===0)return{error:"อนุพันธ์เป็นศูนย์หรือคำนวณไม่ได้",iterations:i,converged:!1};const f=s-l/c,d=Math.abs(f-s)/(Math.abs(f)>1e-12?Math.abs(f):1);if(i.push({iter:u,x:s,fx:l,dfx:c,x1:f,error:d}),d<=n)return{root:f,iterations:i,converged:!0};s=f}return{root:s,iterations:i,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}const xx="problems_newtonraphson";async function bx(){const t=Ft(Ue(Ce,xx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function wx(t){return jt(Ue(Ce,xx),{...t,method:"newton",createdAt:kt()})}async function Nx(t){return Bt(Tt(Ce,xx,t))}async function PI(){return bx()}async function FI(t){return wx(t)}async function RI(t){return Nx(t)}const kue={getNewtonProblems:bx,saveNewtonProblem:wx,deleteNewtonProblem:Nx,getProblems:PI,save:FI,remove:RI},$ue=Object.freeze(Object.defineProperty({__proto__:null,default:kue,deleteNewtonProblem:Nx,getNewtonProblems:bx,getProblems:PI,remove:RI,save:FI,saveNewtonProblem:wx},Symbol.toStringTag,{value:"Module"}));function OI({iterations:t=[]}){return!t||t.length===0?null:p.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:p.jsxs("table",{className:"w-full text-sm border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[p.jsx("th",{className:"p-2 text-right",children:"iter"}),p.jsx("th",{className:"p-2 text-right",children:"x"}),p.jsx("th",{className:"p-2 text-right",children:"f(x)"}),p.jsx("th",{className:"p-2 text-right",children:"error"})]})}),p.jsx("tbody",{children:t.map(e=>p.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[p.jsx("td",{className:"p-2 text-right",children:e.iter}),p.jsx("td",{className:"p-2 text-right",children:Re(e.x)}),p.jsx("td",{className:"p-2 text-right",children:Re(e.fx)}),p.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":Re(e.error)})]},e.iter))})]})})}function Lue(){const[t,e]=G.useState(""),[r,n]=G.useState(""),[a,i]=G.useState(""),[s,u]=G.useState(""),[l,o]=G.useState([]),[c,f]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=G.useState("-"),[h,v]=G.useState("-"),T=G.useRef(null),{problems:S,removingIds:C,refresh:_,saveProblem:M,deleteProblem:y}=$t($ue),x=async()=>{if(!t||!r||!a||!s){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await M({expr:t,x0:r,tol:a,maxIter:s}),alert("บันทึกแล้ว!")}catch(b){console.error("บันทึกโจทย์ผิดพลาด:",b),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},w=b=>{e(b.expr??""),n(b.x0??""),i(b.tol??""),u(b.maxIter??"")},g=b=>{if(confirm(`ลบโจทย์นี้ไหม?
${b.expr}`))try{y(b.id)}catch(D){console.error("ลบโจทย์ผิดพลาด:",D),alert("ลบไม่สำเร็จ")}},N=()=>{const b=ys(t);if(!b){f("สถานะ: สมการไม่ถูกต้อง");return}const D=parseFloat(r),I=parseFloat(a),F=parseInt(s,10);if(isNaN(D)){f("สถานะ: x0 ไม่ถูกต้อง");return}if(!isFinite(I)||I<=0){f("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(F)||F<=0){f("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const O=jue(b,D,I,F);if(O.error){f("สถานะ: "+O.error);return}o(O.iterations),f("สถานะ: เสร็จสิ้น "+(O.converged?"(converged)":"(ไม่ converged)")),v(O.iterations.length),m(Re(O.root)),to(T.current,b,D-5,D+5,O.iterations)},E=()=>{e(""),n(""),i(""),u(""),o([]),f("สถานะ: รีเซ็ตแล้ว"),v("-"),m("-"),to(T.current,()=>0,-5,5,[])};return G.useEffect(()=>{to(T.current,()=>0,-5,5,[])},[]),G.useEffect(()=>{_().catch(console.error)},[_]),p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Newton-Raphson Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),p.jsx("input",{type:"text",value:t,onChange:b=>e(b.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),p.jsx("input",{type:"number",value:r,onChange:b=>n(b.target.value),placeholder:"เช่น 1.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),p.jsx("input",{type:"text",value:a,onChange:b=>i(b.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:s,onChange:b=>u(b.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-4",children:[p.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:E,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("div",{children:c}),p.jsxs("div",{children:["Iterations: ",h]}),p.jsxs("div",{children:["Root: ",d]})]}),p.jsx(Lt,{problems:S,onLoad:w,onDelete:g,removingIds:C})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Iterations"}),p.jsx("canvas",{ref:T,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),p.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["จุดส้ม = ค่าที่ได้ในแต่ละ iteration, จุดส้มใหญ่ = ค่าสุดท้าย เส้นเขียว = เส้นสัมผัส f(x) ที่ x",p.jsx("sub",{children:"i"}),", Label = x0, x1, x2 …"]})]})]}),p.jsx("div",{className:"mt-6",children:p.jsx(OI,{iterations:l})})]})}function zue(t,e,r,n=1e-6,a=50){try{const i=[];let s=e,u=r,l=t(s),o=t(u);if(!isFinite(l)||!isFinite(o))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};for(let c=0;c<=a;c++){if(o-l===0)return{error:"หารศูนย์ในสูตร Secant",iterations:i,converged:!1};const f=u-o*(u-s)/(o-l),d=t(f),m=Math.abs((f-u)/(Math.abs(f)>1e-12?Math.abs(f):1));if(i.push({iter:c,x0:s,x1:u,x2:f,fx2:d,error:m}),!isFinite(d))return{error:"f(x) คำนวณไม่ได้",iterations:i,converged:!1};if(m<=n)return{root:f,iterations:i,converged:!0};s=u,l=o,u=f,o=d}return{root:u,iterations:i,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}const _x="problems_secant";async function Ex(){const t=Ft(Ue(Ce,_x),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function Sx(t){return jt(Ue(Ce,_x),{...t,method:"secant",createdAt:kt()})}async function Ax(t){return Bt(Tt(Ce,_x,t))}async function BI(){return Ex()}async function jI(t){return Sx(t)}async function kI(t){return Ax(t)}const Vue={getSecantProblems:Ex,saveSecantProblem:Sx,deleteSecantProblem:Ax,getProblems:BI,save:jI,remove:kI},Uue=Object.freeze(Object.defineProperty({__proto__:null,default:Vue,deleteSecantProblem:Ax,getProblems:BI,getSecantProblems:Ex,remove:kI,save:jI,saveSecantProblem:Sx},Symbol.toStringTag,{value:"Module"}));function que(){const[t,e]=G.useState(""),[r,n]=G.useState(""),[a,i]=G.useState(""),[s,u]=G.useState(""),[l,o]=G.useState(""),[c,f]=G.useState([]),[d,m]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[h,v]=G.useState("-"),[T,S]=G.useState("-"),C=G.useRef(null),{problems:_,removingIds:M,refresh:y,saveProblem:x,deleteProblem:w}=$t(Uue),g=async()=>{if(!t||!r||!a||!s||!l){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await x({expr:t,x0:r,x1:a,tol:s,maxIter:l}),alert("บันทึกแล้ว!")}catch(I){console.error("บันทึกโจทย์ผิดพลาด:",I),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},N=I=>{e(I.expr??""),n(I.x0??""),i(I.x1??""),u(I.tol??""),o(I.maxIter??"")},E=I=>{if(confirm(`ลบโจทย์นี้ไหม?
${I.expr}`))try{w(I.id)}catch(F){console.error("ลบโจทย์ผิดพลาด:",F),alert("ลบไม่สำเร็จ")}},b=()=>{const I=ys(t);if(!I){m("สถานะ: สมการไม่ถูกต้อง");return}const F=parseFloat(r),O=parseFloat(a),P=parseFloat(s),z=parseInt(l,10);if(isNaN(F)||isNaN(O)){m("สถานะ: x0/x1 ไม่ถูกต้อง");return}if(!isFinite(P)||P<=0){m("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(z)||z<=0){m("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const $=zue(I,F,O,P,z);if($.error){m("สถานะ: "+$.error);return}f($.iterations),m("สถานะ: เสร็จสิ้น "+($.converged?"(converged)":"(ไม่ converged)")),S($.iterations.length),v(Re($.root)),to(C.current,I,F-5,O+5,$.iterations)},D=()=>{e(""),n(""),i(""),u(""),o(""),f([]),m("สถานะ: รีเซ็ตแล้ว"),S("-"),v("-"),to(C.current,()=>0,-5,5,[])};return G.useEffect(()=>{to(C.current,()=>0,-5,5,[])},[]),G.useEffect(()=>{y().catch(console.error)},[y]),p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Secant Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),p.jsx("input",{type:"text",value:t,onChange:I=>e(I.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),p.jsx("input",{type:"number",value:r,onChange:I=>n(I.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x1"}),p.jsx("input",{type:"number",value:a,onChange:I=>i(I.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),p.jsx("input",{type:"text",value:s,onChange:I=>u(I.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:l,onChange:I=>o(I.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-4",children:[p.jsx("button",{onClick:b,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:D,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("div",{children:d}),p.jsxs("div",{children:["Iterations: ",T]}),p.jsxs("div",{children:["Root: ",h]})]}),p.jsx(Lt,{problems:_,onLoad:N,onDelete:E,removingIds:M})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Secant"}),p.jsx("canvas",{ref:C,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),p.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เส้นเขียว = เส้น secant ระหว่างแต่ละจุด, จุดส้ม = ค่าที่ได้, จุดส้มใหญ่ = ค่าสุดท้าย Label = x0, x1, x2 …"})]})]}),p.jsx("div",{className:"mt-6",children:p.jsx(OI,{iterations:c})})]})}const Dx="problems_cramer";async function $I(){const t=Ft(Ue(Ce,Dx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function LI(t){return jt(Ue(Ce,Dx),{...t,method:"cramer",createdAt:kt()})}async function Cx(t){return Bt(Tt(Ce,Dx,t))}const Hue=$I,Gue=LI,Wue=Cx,Que=Cx,Xue=Object.freeze(Object.defineProperty({__proto__:null,del:Que,deleteCramerProblem:Cx,getCramerProblems:$I,getProblems:Hue,remove:Wue,save:Gue,saveCramerProblem:LI},Symbol.toStringTag,{value:"Module"}));function Kue(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([]),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(Xue);G.useEffect(()=>{d().catch(console.error)},[d]);const v=x=>{const w=x.length;if(w===1)return x[0][0];if(w===2)return x[0][0]*x[1][1]-x[0][1]*x[1][0];let g=0;for(let N=0;N<w;N++){const E=x.slice(1).map(b=>b.filter((D,I)=>I!==N));g+=x[0][N]*v(E)*(N%2===0?1:-1)}return g},T=(x,w)=>{const g=v(x);if(Math.abs(g)<1e-12)return{error:"Determinant = 0 (ไม่มีคำตอบหรือมีหลายคำตอบ)"};const N=x.length,E=[];for(let b=0;b<N;b++){const D=x.map((I,F)=>I.map((O,P)=>P===b?w[F]:O));E.push(v(D)/g)}return{detA:g,results:E}},S=()=>{try{const x=T(r,a);if(x.error){o("สถานะ: "+x.error),u([]);return}u(x.results),o("สถานะ: เสร็จสิ้น (detA = "+Re(x.detA)+")")}catch(x){console.error(x),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{const x={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("Cramer: saving problem (serialized)",x),await m(x),alert("บันทึกแล้ว!")}catch(x){console.error("save problem failed:",x),alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},M=x=>{try{const w=typeof x.A=="string"?JSON.parse(x.A):x.A||[],g=typeof x.b=="string"?JSON.parse(x.b):x.b||[];n(w),i(g),w&&Array.isArray(w)&&e(w.length)}catch(w){console.error("failed to parse saved problem",w,x),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},y=x=>{confirm("ลบโจทย์นี้ไหม?")&&h(x.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Cramer's Rule",subtitle:"หาคำตอบระบบสมการเชิงเส้นโดยใช้ Determinant"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:x=>{const w=Math.max(1,parseInt(x.target.value)||1);e(w),n(Array(w).fill().map(()=>Array(w).fill(0))),i(Array(w).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((x,w)=>p.jsx("tr",{children:x.map((g,N)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:g,onChange:E=>{const b=r.map(D=>[...D]);b[w][N]=parseFloat(E.target.value)||0,n(b)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},N))},w))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((x,w)=>p.jsx("input",{type:"number",value:x,onChange:g=>{const N=[...a];N[w]=parseFloat(g.target.value)||0,i(N)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},w))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:S,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:l})}),p.jsx(Lt,{problems:c,onLoad:M,onDelete:y,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:`ใส่เมทริกซ์ A และเวกเตอร์ b แล้วกด "คำนวณ" โปรแกรมจะคำนวณโดยใช้ Cramer's Rule หาก det(A) = 0 จะถือว่าไม่มีคำตอบหรือมีคำตอบไม่เป็นเอกเทศ`}),s.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:s.map((x,w)=>p.jsxs("li",{children:["x",w+1," = ",Re(x)]},w))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Tx="problems_gaussian";async function zI(){const t=Ft(Ue(Ce,Tx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function VI(t){return jt(Ue(Ce,Tx),{...t,method:"gaussian",createdAt:kt()})}async function Mx(t){return Bt(Tt(Ce,Tx,t))}const Jue=zI,Yue=VI,Zue=Mx,ele=Mx,tle=Object.freeze(Object.defineProperty({__proto__:null,del:ele,deleteGaussianProblem:Mx,getGaussianProblems:zI,getProblems:Jue,remove:Zue,save:Yue,saveGaussianProblem:VI},Symbol.toStringTag,{value:"Module"}));function rle(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([]),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(tle);G.useEffect(()=>{d().catch(console.error)},[d]);const v=(y,x)=>{const w=y.length,g=y.map(b=>[...b]),N=[...x];for(let b=0;b<w-1;b++){if(Math.abs(g[b][b])<1e-12)return{error:"Pivot = 0 (ควรใช้ Partial Pivoting)"};for(let D=b+1;D<w;D++){const I=g[D][b]/g[b][b];for(let F=b;F<w;F++)g[D][F]-=I*g[b][F];N[D]-=I*N[b]}}const E=Array(w).fill(0);for(let b=w-1;b>=0;b--){let D=0;for(let I=b+1;I<w;I++)D+=g[b][I]*E[I];if(Math.abs(g[b][b])<1e-12)return{error:"Pivot = 0 ทำให้หารไม่ได้"};E[b]=(N[b]-D)/g[b][b]}return{solution:E}},T=()=>{try{const y=v(r,a);if(y.error){o("สถานะ: "+y.error),u([]);return}u(y.solution),o("สถานะ: เสร็จสิ้น (คำนวณสำเร็จ)")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},C=async()=>{try{const y={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("Gaussian: saving problem (serialized)",y),await m(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.A=="string"?JSON.parse(y.A):y.A||[],w=typeof y.b=="string"?JSON.parse(y.b):y.b||[];n(x),i(w),x&&Array.isArray(x)&&e(x.length)}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&h(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Gaussian Elimination",subtitle:"การกำจัดแบบเกาส์ (Forward Elimination + Back Substitution)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:y=>{const x=Math.max(1,parseInt(y.target.value)||1);e(x),n(Array(x).fill().map(()=>Array(x).fill(0))),i(Array(x).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((y,x)=>p.jsx("tr",{children:y.map((w,g)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:w,onChange:N=>{const E=r.map(b=>[...b]);E[x][g]=parseFloat(N.target.value)||0,n(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},g))},x))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((y,x)=>p.jsx("input",{type:"number",value:y,onChange:w=>{const g=[...a];g[x]=parseFloat(w.target.value)||0,i(g)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},x))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:T,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:l})}),p.jsx(Lt,{problems:c,onLoad:_,onDelete:M,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:'ใส่เมทริกซ์ A และเวกเตอร์ b แล้วกด "คำนวณ" โปรแกรมจะใช้ขั้นตอนของ Gaussian Elimination เพื่อแปลงระบบสมการให้อยู่ในรูปสามเหลี่ยมบน จากนั้นทำ Back Substitution เพื่อหาคำตอบของ x₁, x₂, ..., xₙ'}),s.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:s.map((y,x)=>p.jsxs("li",{children:["x",x+1," = ",Re(y)]},x))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ix="problems_gaussjordan";async function UI(){const t=Ft(Ue(Ce,Ix),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function qI(t){return jt(Ue(Ce,Ix),{...t,method:"gaussjordan",createdAt:kt()})}async function Px(t){return Bt(Tt(Ce,Ix,t))}const nle=UI,ale=qI,ile=Px,sle=Px,ole=Object.freeze(Object.defineProperty({__proto__:null,del:sle,deleteGaussJordanProblem:Px,getGaussJordanProblems:UI,getProblems:nle,remove:ile,save:ale,saveGaussJordanProblem:qI},Symbol.toStringTag,{value:"Module"}));function ule(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([]),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(ole);G.useEffect(()=>{d().catch(console.error)},[d]);const v=(y,x)=>{const w=y.length,g=y.map((E,b)=>[...E,x[b]]);for(let E=0;E<w;E++){if(Math.abs(g[E][E])<1e-12)return{error:"Pivot = 0 (ควรใช้ Partial Pivoting)"};const b=g[E][E];for(let D=0;D<=w;D++)g[E][D]/=b;for(let D=0;D<w;D++){if(D===E)continue;const I=g[D][E];for(let F=0;F<=w;F++)g[D][F]-=I*g[E][F]}}return{solution:g.map(E=>E[w]),matrix:g}},T=()=>{try{const y=v(r,a);if(y.error){o("สถานะ: "+y.error),u([]);return}u(y.solution),o("สถานะ: เสร็จสิ้น (Reduced Row-Echelon Form สำเร็จ)")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},C=async()=>{try{const y={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("GaussJordan: saving problem (serialized)",y),await m(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.A=="string"?JSON.parse(y.A):y.A||[],w=typeof y.b=="string"?JSON.parse(y.b):y.b||[];n(x),i(w),x&&Array.isArray(x)&&e(x.length)}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&h(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Gauss–Jordan Elimination",subtitle:"วิธีการกำจัดแบบเกาส์–จอร์แดน (Reduced Row-Echelon Form)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:y=>{const x=Math.max(1,parseInt(y.target.value)||1);e(x),n(Array(x).fill().map(()=>Array(x).fill(0))),i(Array(x).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((y,x)=>p.jsx("tr",{children:y.map((w,g)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:w,onChange:N=>{const E=r.map(b=>[...b]);E[x][g]=parseFloat(N.target.value)||0,n(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},g))},x))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((y,x)=>p.jsx("input",{type:"number",value:y,onChange:w=>{const g=[...a];g[x]=parseFloat(w.target.value)||0,i(g)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},x))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:T,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:l})}),p.jsx(Lt,{problems:c,onLoad:_,onDelete:M,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:'ใส่เมทริกซ์ A และเวกเตอร์ b แล้วกด "คำนวณ" โปรแกรมจะทำการกำจัดแบบเกาส์–จอร์แดน (ทำให้ได้เมทริกซ์ Reduced Row-Echelon Form) จากนั้นผลลัพธ์ของตัวแปร x₁, x₂, ..., xₙ จะปรากฏในคอลัมน์สุดท้ายของเมทริกซ์'}),s.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:s.map((y,x)=>p.jsxs("li",{children:["x",x+1," = ",Re(y)]},x))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Fx="problems_matrixinversion";async function HI(){const t=Ft(Ue(Ce,Fx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function GI(t){return jt(Ue(Ce,Fx),{...t,method:"matrixinversion",createdAt:kt()})}async function Rx(t){return Bt(Tt(Ce,Fx,t))}const lle=HI,cle=GI,fle=Rx,dle=Rx,mle=Object.freeze(Object.defineProperty({__proto__:null,del:dle,deleteMatrixInversionProblem:Rx,getMatrixInversionProblems:HI,getProblems:lle,remove:fle,save:cle,saveMatrixInversionProblem:GI},Symbol.toStringTag,{value:"Module"}));function hle(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([]),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(mle);G.useEffect(()=>{d().catch(console.error)},[d]);const v=g=>Array.from({length:g},(N,E)=>Array.from({length:g},(b,D)=>E===D?1:0)),T=g=>{const N=g.length,E=g.map((D,I)=>[...D,...v(N)[I]]);for(let D=0;D<N;D++){let I=E[D][D];if(Math.abs(I)<1e-12)return{error:"Pivot = 0 (ไม่สามารถหา Inverse ได้)"};for(let F=0;F<2*N;F++)E[D][F]/=I;for(let F=0;F<N;F++){if(F===D)continue;const O=E[F][D];for(let P=0;P<2*N;P++)E[F][P]-=O*E[D][P]}}return{inverse:E.map(D=>D.slice(N))}},S=(g,N)=>{const E=g.length,b=Array(E).fill(0);for(let D=0;D<E;D++)for(let I=0;I<E;I++)b[D]+=g[D][I]*N[I];return b},C=(g,N)=>{const E=T(g);return E.error?{error:E.error}:{solution:S(E.inverse,N),inverse:E.inverse}},_=()=>{try{const g=C(r,a);if(g.error){o("สถานะ: "+g.error),u([]);return}u(g.solution),o("สถานะ: เสร็จสิ้น (คำนวณ Inverse สำเร็จ)")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},M=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},y=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("MatrixInversion: saving problem (serialized)",g),await m(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},x=g=>{try{const N=typeof g.A=="string"?JSON.parse(g.A):g.A||[],E=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(N),i(E),N&&Array.isArray(N)&&e(N.length)}catch(N){console.error("failed to parse saved problem",N,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},w=g=>{confirm("ลบโจทย์นี้ไหม?")&&h(g.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Matrix Inversion Method",subtitle:"แก้ระบบสมการเชิงเส้นโดยใช้เมทริกซ์ผกผัน (A⁻¹b)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:g=>{const N=Math.max(1,parseInt(g.target.value)||1);e(N),n(Array(N).fill().map(()=>Array(N).fill(0))),i(Array(N).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((g,N)=>p.jsx("tr",{children:g.map((E,b)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:E,onChange:D=>{const I=r.map(F=>[...F]);I[N][b]=parseFloat(D.target.value)||0,n(I)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},b))},N))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((g,N)=>p.jsx("input",{type:"number",value:g,onChange:E=>{const b=[...a];b[N]=parseFloat(E.target.value)||0,i(b)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},N))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:_,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:M,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:l})}),p.jsx(Lt,{problems:c,onLoad:x,onDelete:w,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:"โปรแกรมจะคำนวณเมทริกซ์ผกผัน A⁻¹ โดยใช้ Gauss–Jordan บน [A | I] จากนั้นนำไปคูณกับเวกเตอร์ b เพื่อหาคำตอบของระบบสมการเชิงเส้น"}),s.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:s.map((g,N)=>p.jsxs("li",{children:["x",N+1," = ",Re(g)]},N))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ox="problems_lu";async function WI(){const t=Ft(Ue(Ce,Ox),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function QI(t){return jt(Ue(Ce,Ox),{...t,method:"lu",createdAt:kt()})}async function Bx(t){return Bt(Tt(Ce,Ox,t))}const ple=WI,vle=QI,gle=Bx,yle=Bx,xle=Object.freeze(Object.defineProperty({__proto__:null,del:yle,deleteLUProblem:Bx,getLUProblems:WI,getProblems:ple,remove:gle,save:vle,saveLUProblem:QI},Symbol.toStringTag,{value:"Module"}));function ble(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([]),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(xle);G.useEffect(()=>{d().catch(console.error)},[d]);const v=(y,x)=>{const w=y.length,g=Array.from({length:w},()=>Array(w).fill(0)),N=Array.from({length:w},()=>Array(w).fill(0));for(let D=0;D<w;D++){for(let I=D;I<w;I++){let F=0;for(let O=0;O<D;O++)F+=g[D][O]*N[O][I];N[D][I]=y[D][I]-F}for(let I=D;I<w;I++)if(D===I)g[D][D]=1;else{let F=0;for(let O=0;O<D;O++)F+=g[I][O]*N[O][D];if(Math.abs(N[D][D])<1e-12)return{error:"Pivot = 0 (ไม่สามารถแยก LU ได้)"};g[I][D]=(y[I][D]-F)/N[D][D]}}const E=Array(w).fill(0);for(let D=0;D<w;D++){let I=0;for(let F=0;F<D;F++)I+=g[D][F]*E[F];E[D]=x[D]-I}const b=Array(w).fill(0);for(let D=w-1;D>=0;D--){let I=0;for(let F=D+1;F<w;F++)I+=N[D][F]*b[F];if(Math.abs(N[D][D])<1e-12)return{error:"Pivot = 0 (หารไม่ได้)"};b[D]=(E[D]-I)/N[D][D]}return{L:g,U:N,solution:b}},T=()=>{try{const y=v(r,a);if(y.error){o("สถานะ: "+y.error),u([]);return}u(y.solution),o("สถานะ: เสร็จสิ้น (LU Decomposition สำเร็จ)")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},C=async()=>{try{const y={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("LUDecomposition: saving problem (serialized)",y),await m(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.A=="string"?JSON.parse(y.A):y.A||[],w=typeof y.b=="string"?JSON.parse(y.b):y.b||[];n(x),i(w),x&&Array.isArray(x)&&e(x.length)}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&h(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"LU Decomposition Method",subtitle:"การแยกเมทริกซ์เป็น L และ U เพื่อแก้ระบบสมการเชิงเส้น"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:y=>{const x=Math.max(1,parseInt(y.target.value)||1);e(x),n(Array(x).fill().map(()=>Array(x).fill(0))),i(Array(x).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((y,x)=>p.jsx("tr",{children:y.map((w,g)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:w,onChange:N=>{const E=r.map(b=>[...b]);E[x][g]=parseFloat(N.target.value)||0,n(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},g))},x))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((y,x)=>p.jsx("input",{type:"number",value:y,onChange:w=>{const g=[...a];g[x]=parseFloat(w.target.value)||0,i(g)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},x))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:T,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:l})}),p.jsx(Lt,{problems:c,onLoad:_,onDelete:M,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:"วิธี LU Decomposition จะแยกเมทริกซ์ A เป็น L (Lower Triangular) และ U (Upper Triangular) จากนั้นแก้สมการ L·y = b และ U·x = y เพื่อหาคำตอบของ x₁, x₂, ..., xₙ"}),s.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:s.map((y,x)=>p.jsxs("li",{children:["x",x+1," = ",Re(y)]},x))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const jx="problems_cholesky";async function XI(){const t=Ft(Ue(Ce,jx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function KI(t){return jt(Ue(Ce,jx),{...t,method:"cholesky",createdAt:kt()})}async function kx(t){return Bt(Tt(Ce,jx,t))}const wle=XI,Nle=KI,_le=kx,Ele=kx,Sle=Object.freeze(Object.defineProperty({__proto__:null,del:Ele,deleteCholeskyProblem:kx,getCholeskyProblems:XI,getProblems:wle,remove:_le,save:Nle,saveCholeskyProblem:KI},Symbol.toStringTag,{value:"Module"}));function Ale(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([]),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(Sle);G.useEffect(()=>{d().catch(console.error)},[d]);const v=(y,x)=>{const w=y.length,g=Array.from({length:w},()=>Array(w).fill(0));try{for(let b=0;b<w;b++)for(let D=0;D<=b;D++){let I=0;for(let F=0;F<D;F++)I+=g[b][F]*g[D][F];if(b===D){const F=y[b][b]-I;if(F<=0)return{error:"A ไม่เป็นบวกกำหนดแน่นอน (Positive Definite)"};g[b][D]=Math.sqrt(F)}else g[b][D]=(y[b][D]-I)/g[D][D]}const N=Array(w).fill(0);for(let b=0;b<w;b++){let D=0;for(let I=0;I<b;I++)D+=g[b][I]*N[I];N[b]=(x[b]-D)/g[b][b]}const E=Array(w).fill(0);for(let b=w-1;b>=0;b--){let D=0;for(let I=b+1;I<w;I++)D+=g[I][b]*E[I];E[b]=(N[b]-D)/g[b][b]}return{L:g,solution:E}}catch{return{error:"เกิดข้อผิดพลาดในการคำนวณ"}}},T=()=>{try{const y=v(r,a);if(y.error){o("สถานะ: "+y.error),u([]);return}u(y.solution),o("สถานะ: เสร็จสิ้น (Cholesky Decomposition สำเร็จ)")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u([]),o("สถานะ: รีเซ็ตแล้ว")},C=async()=>{try{const y={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`};console.log("Cholesky: saving problem (serialized)",y),await m(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.A=="string"?JSON.parse(y.A):y.A||[],w=typeof y.b=="string"?JSON.parse(y.b):y.b||[];n(x),i(w),x&&Array.isArray(x)&&e(x.length)}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&h(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Cholesky Decomposition Method",subtitle:"การแยกเมทริกซ์สมมาตรบวกกำหนดแน่นอน A = L·Lᵀ"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:y=>{const x=Math.max(1,parseInt(y.target.value)||1);e(x),n(Array(x).fill().map(()=>Array(x).fill(0))),i(Array(x).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((y,x)=>p.jsx("tr",{children:y.map((w,g)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:w,onChange:N=>{const E=r.map(b=>[...b]);E[x][g]=parseFloat(N.target.value)||0,n(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},g))},x))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((y,x)=>p.jsx("input",{type:"number",value:y,onChange:w=>{const g=[...a];g[x]=parseFloat(w.target.value)||0,i(g)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},x))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:T,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:l})}),p.jsx(Lt,{problems:c,onLoad:_,onDelete:M,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Cholesky Decomposition ใช้สำหรับเมทริกซ์สมมาตรบวกกำหนดแน่นอน โดยแยก A = L·Lᵀ จากนั้นแก้สมการ L·y = b และ Lᵀ·x = y เพื่อหาคำตอบของตัวแปร x₁, x₂, ..., xₙ"}),s.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:s.map((y,x)=>p.jsxs("li",{children:["x",x+1," = ",Re(y)]},x))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const $x="problems_jacobi";async function JI(){const t=Ft(Ue(Ce,$x),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function YI(t){return jt(Ue(Ce,$x),{...t,method:"jacobi",createdAt:kt()})}async function Lx(t){return Bt(Tt(Ce,$x,t))}const Dle=JI,Cle=YI,Tle=Lx,Mle=Lx,Ile=Object.freeze(Object.defineProperty({__proto__:null,del:Mle,deleteJacobiProblem:Lx,getJacobiProblems:JI,getProblems:Dle,remove:Tle,save:Cle,saveJacobiProblem:YI},Symbol.toStringTag,{value:"Module"}));function Ple(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([0,0,0]),[l,o]=G.useState(1e-6),[c,f]=G.useState(50),[d,m]=G.useState([]),[h,v]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:T,removingIds:S,refresh:C,saveProblem:_,deleteProblem:M}=$t(Ile);G.useEffect(()=>{C().catch(console.error)},[C]);const y=(b,D,I,F,O)=>{const P=b.length;let z=[...I],$=Array(P).fill(0);const L=[];for(let q=1;q<=O;q++){for(let j=0;j<P;j++){let K=0;for(let V=0;V<P;V++)j!==V&&(K+=b[j][V]*z[V]);if(Math.abs(b[j][j])<1e-12)return{error:"Pivot = 0 ที่แถว "+(j+1)};$[j]=(D[j]-K)/b[j][j]}const ae=Math.max(...$.map((j,K)=>Math.abs((j-z[K])/(j||1))));if(L.push({iter:q,values:[...$],error:ae}),ae<F)return{solution:$,iterations:L,converged:!0};z=[...$]}return{solution:$,iterations:L,converged:!1}},x=()=>{try{const b=y(r,a,s,parseFloat(l),parseInt(c));if(b.error){v("สถานะ: "+b.error),m([]);return}m(b.solution),v("สถานะ: เสร็จสิ้น "+(b.converged?"(Converged)":"(ไม่ Converged)"))}catch(b){console.error(b),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},w=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u(Array(t).fill(0)),m([]),v("สถานะ: รีเซ็ตแล้ว")},g=async()=>{try{const b={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:l,maxIter:c,size:t,expr:`Matrix ${t}x${t}`};console.log("Jacobi: saving problem (serialized)",b),await _(b),alert("บันทึกแล้ว!")}catch(b){console.error("save problem failed:",b),alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},N=b=>{try{const D=typeof b.A=="string"?JSON.parse(b.A):b.A||[],I=typeof b.b=="string"?JSON.parse(b.b):b.b||[],F=typeof b.x0=="string"?JSON.parse(b.x0):b.x0||[];n(D),i(I),u(F),D&&Array.isArray(D)&&e(D.length),b.tol&&o(b.tol),b.maxIter&&f(b.maxIter)}catch(D){console.error("failed to parse saved problem",D,b),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},E=b=>{confirm("ลบโจทย์นี้ไหม?")&&M(b.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Jacobi Iteration Method",subtitle:"วิธีการหาคำตอบแบบทำซ้ำ (Iterative Method)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:b=>{const D=Math.max(1,parseInt(b.target.value)||1);e(D),n(Array(D).fill().map(()=>Array(D).fill(0))),i(Array(D).fill(0)),u(Array(D).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((b,D)=>p.jsx("tr",{children:b.map((I,F)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:I,onChange:O=>{const P=r.map(z=>[...z]);P[D][F]=parseFloat(O.target.value)||0,n(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},F))},D))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((b,D)=>p.jsx("input",{type:"number",value:b,onChange:I=>{const F=[...a];F[D]=parseFloat(I.target.value)||0,i(F)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},D))})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),p.jsx("div",{className:"flex gap-2",children:s.map((b,D)=>p.jsx("input",{type:"number",value:b,onChange:I=>{const F=[...s];F[D]=parseFloat(I.target.value)||0,u(F)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},D))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),p.jsx("input",{type:"text",value:l,onChange:b=>o(b.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:c,onChange:b=>f(b.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:w,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:h})}),p.jsx(Lt,{problems:T,onLoad:N,onDelete:E,removingIds:S})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Jacobi ใช้การทำซ้ำเพื่อหาคำตอบของระบบสมการเชิงเส้น โดยเริ่มจากค่าประมาณเริ่มต้น x₀ แล้วคำนวณซ้ำจนค่าความคลาดเคลื่อนน้อยกว่าที่กำหนด"}),d.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:d.map((b,D)=>p.jsxs("li",{children:["x",D+1," = ",Re(b)]},D))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const zx="problems_gaussseidel";async function ZI(){const t=Ft(Ue(Ce,zx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function eP(t){return jt(Ue(Ce,zx),{...t,method:"gaussseidel",createdAt:kt()})}async function Vx(t){return Bt(Tt(Ce,zx,t))}const Fle=ZI,Rle=eP,Ole=Vx,Ble=Vx,jle=Object.freeze(Object.defineProperty({__proto__:null,del:Ble,deleteGaussSeidelProblem:Vx,getGaussSeidelProblems:ZI,getProblems:Fle,remove:Ole,save:Rle,saveGaussSeidelProblem:eP},Symbol.toStringTag,{value:"Module"}));function kle(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([0,0,0]),[l,o]=G.useState(1e-6),[c,f]=G.useState(50),[d,m]=G.useState([]),[h,v]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:T,removingIds:S,refresh:C,saveProblem:_,deleteProblem:M}=$t(jle);G.useEffect(()=>{C().catch(console.error)},[C]);const y=(b,D,I,F,O)=>{const P=b.length,z=[...I],$=[];for(let L=1;L<=O;L++){const q=[...z];for(let j=0;j<P;j++){let K=0;for(let V=0;V<P;V++)j!==V&&(K+=b[j][V]*z[V]);if(Math.abs(b[j][j])<1e-12)return{error:"Pivot = 0 ที่แถว "+(j+1)};z[j]=(D[j]-K)/b[j][j]}const ae=Math.max(...z.map((j,K)=>Math.abs((j-q[K])/(j||1))));if($.push({iter:L,values:[...z],error:ae}),ae<F)return{solution:z,iterations:$,converged:!0}}return{solution:z,iterations:$,converged:!1}},x=()=>{try{const b=y(r,a,s,parseFloat(l),parseInt(c));if(b.error){v("สถานะ: "+b.error),m([]);return}m(b.solution),v("สถานะ: เสร็จสิ้น "+(b.converged?"(Converged)":"(ไม่ Converged)"))}catch(b){console.error(b),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},w=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u(Array(t).fill(0)),m([]),v("สถานะ: รีเซ็ตแล้ว")},g=async()=>{try{const b={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:l,maxIter:c,size:t,expr:`Matrix ${t}x${t}`};console.log("GaussSeidel: saving problem (serialized)",b),await _(b),alert("บันทึกแล้ว!")}catch(b){console.error("save problem failed:",b),alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},N=b=>{try{const D=typeof b.A=="string"?JSON.parse(b.A):b.A||[],I=typeof b.b=="string"?JSON.parse(b.b):b.b||[],F=typeof b.x0=="string"?JSON.parse(b.x0):b.x0||[];n(D),i(I),u(F),D&&Array.isArray(D)&&e(D.length),b.tol&&o(b.tol),b.maxIter&&f(b.maxIter)}catch(D){console.error("failed to parse saved problem",D,b),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},E=b=>{confirm("ลบโจทย์นี้ไหม?")&&M(b.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Gauss–Seidel Iteration Method",subtitle:"วิธีการหาคำตอบแบบทำซ้ำ (ใช้ค่าใหม่ในแต่ละรอบทันที)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:b=>{const D=Math.max(1,parseInt(b.target.value)||1);e(D),n(Array(D).fill().map(()=>Array(D).fill(0))),i(Array(D).fill(0)),u(Array(D).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((b,D)=>p.jsx("tr",{children:b.map((I,F)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:I,onChange:O=>{const P=r.map(z=>[...z]);P[D][F]=parseFloat(O.target.value)||0,n(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},F))},D))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((b,D)=>p.jsx("input",{type:"number",value:b,onChange:I=>{const F=[...a];F[D]=parseFloat(I.target.value)||0,i(F)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},D))})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),p.jsx("div",{className:"flex gap-2",children:s.map((b,D)=>p.jsx("input",{type:"number",value:b,onChange:I=>{const F=[...s];F[D]=parseFloat(I.target.value)||0,u(F)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},D))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),p.jsx("input",{type:"text",value:l,onChange:b=>o(b.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:c,onChange:b=>f(b.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:w,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:h})}),p.jsx(Lt,{problems:T,onLoad:N,onDelete:E,removingIds:S})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Gauss–Seidel ใช้การทำซ้ำแบบอัปเดตค่าทันทีในแต่ละรอบ ทำให้มัก converge เร็วกว่าวิธี Jacobi เหมาะกับระบบสมการที่มีเมทริกซ์แนวทแยงเด่นชัด (Diagonally Dominant)"}),d.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:d.map((b,D)=>p.jsxs("li",{children:["x",D+1," = ",Re(b)]},D))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Ux="problems_conjugategradient";async function tP(){const t=Ft(Ue(Ce,Ux),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function rP(t){return jt(Ue(Ce,Ux),{...t,method:"conjugategradient",createdAt:kt()})}async function qx(t){return Bt(Tt(Ce,Ux,t))}const $le=tP,Lle=rP,zle=qx,Vle=qx,Ule=Object.freeze(Object.defineProperty({__proto__:null,del:Vle,deleteConjugateGradientProblem:qx,getConjugateGradientProblems:tP,getProblems:$le,remove:zle,save:Lle,saveConjugateGradientProblem:rP},Symbol.toStringTag,{value:"Module"}));function qle(){const[t,e]=G.useState(3),[r,n]=G.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=G.useState([0,0,0]),[s,u]=G.useState([0,0,0]),[l,o]=G.useState(1e-6),[c,f]=G.useState(50),[d,m]=G.useState([]),[h,v]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:T,removingIds:S,refresh:C,saveProblem:_,deleteProblem:M}=$t(Ule);G.useEffect(()=>{C().catch(console.error)},[C]);const y=(b,D,I,F,O)=>{const P=b.length;let z=[...I],$=Array(P).fill(0),L=Array(P).fill(0);const q=[];for(let j=0;j<P;j++){let K=0;for(let V=0;V<P;V++)K+=b[j][V]*I[V];$[j]=D[j]-K,L[j]=$[j]}let ae=$.reduce((j,K)=>j+K*K,0);for(let j=1;j<=O;j++){const K=Array(P).fill(0);for(let H=0;H<P;H++)for(let J=0;J<P;J++)K[H]+=b[H][J]*L[J];const V=ae/L.reduce((H,J,ee)=>H+J*K[ee],0);for(let H=0;H<P;H++)z[H]+=V*L[H];for(let H=0;H<P;H++)$[H]-=V*K[H];const pe=$.reduce((H,J)=>H+J*J,0),ue=Math.sqrt(pe);if(q.push({iter:j,x:[...z],error:ue}),Math.sqrt(pe)<F)return{solution:z,iterations:q,converged:!0};const fe=pe/ae;for(let H=0;H<P;H++)L[H]=$[H]+fe*L[H];ae=pe}return{solution:z,iterations:q,converged:!1}},x=()=>{try{const b=y(r,a,s,parseFloat(l),parseInt(c));if(b.error){v("สถานะ: "+b.error),m([]);return}m(b.solution),v("สถานะ: เสร็จสิ้น "+(b.converged?"(Converged)":"(ไม่ Converged)"))}catch(b){console.error(b),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},w=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),u(Array(t).fill(0)),m([]),v("สถานะ: รีเซ็ตแล้ว")},g=async()=>{try{const b={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:l,maxIter:c,size:t,expr:`Matrix ${t}x${t}`};console.log("ConjugateGradient: saving problem (serialized)",b),await _(b),alert("บันทึกแล้ว!")}catch(b){console.error("save problem failed:",b),alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},N=b=>{try{const D=typeof b.A=="string"?JSON.parse(b.A):b.A||[],I=typeof b.b=="string"?JSON.parse(b.b):b.b||[],F=typeof b.x0=="string"?JSON.parse(b.x0):b.x0||[];n(D),i(I),u(F),D&&Array.isArray(D)&&e(D.length),b.tol&&o(b.tol),b.maxIter&&f(b.maxIter)}catch(D){console.error("failed to parse saved problem",D,b),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},E=b=>{confirm("ลบโจทย์นี้ไหม?")&&M(b.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Conjugate Gradient Method",subtitle:"วิธีการหาคำตอบของระบบสมการเชิงเส้น (สำหรับเมทริกซ์สมมาตรบวกกำหนดแน่นอน)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n x n)"}),p.jsx("input",{type:"number",value:t,onChange:b=>{const D=Math.max(1,parseInt(b.target.value)||1);e(D),n(Array(D).fill().map(()=>Array(D).fill(0))),i(Array(D).fill(0)),u(Array(D).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),p.jsx("table",{className:"text-sm border-collapse",children:p.jsx("tbody",{children:r.map((b,D)=>p.jsx("tr",{children:b.map((I,F)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:I,onChange:O=>{const P=r.map(z=>[...z]);P[D][F]=parseFloat(O.target.value)||0,n(P)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},F))},D))})})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),p.jsx("div",{className:"flex gap-2",children:a.map((b,D)=>p.jsx("input",{type:"number",value:b,onChange:I=>{const F=[...a];F[D]=parseFloat(I.target.value)||0,i(F)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},D))})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),p.jsx("div",{className:"flex gap-2",children:s.map((b,D)=>p.jsx("input",{type:"number",value:b,onChange:I=>{const F=[...s];F[D]=parseFloat(I.target.value)||0,u(F)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},D))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),p.jsx("input",{type:"text",value:l,onChange:b=>o(b.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),p.jsx("input",{type:"number",value:c,onChange:b=>f(b.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:w,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:p.jsx("div",{children:h})}),p.jsx(Lt,{problems:T,onLoad:N,onDelete:E,removingIds:S})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsx("div",{className:"text-sm text-gray-400",children:"วิธี Conjugate Gradient ใช้สำหรับเมทริกซ์สมมาตรบวกกำหนดแน่นอน (SPD) โดยหาคำตอบด้วยการเคลื่อนที่ในทิศทางที่สอดคล้อง (Conjugate) เพื่อลด residual อย่างรวดเร็ว"}),d.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),p.jsx("ul",{children:d.map((b,D)=>p.jsxs("li",{children:["x",D+1," = ",Re(b)]},D))})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Hx="problems_lagrange";async function nP(){const t=Ft(Ue(Ce,Hx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function aP(t){return jt(Ue(Ce,Hx),{...t,method:"lagrange",createdAt:kt()})}async function Gx(t){return Bt(Tt(Ce,Hx,t))}const Hle=nP,Gle=aP,Wle=Gx,Qle=Gx,Xle=Object.freeze(Object.defineProperty({__proto__:null,del:Qle,deleteLagrangeProblem:Gx,getLagrangeProblems:nP,getProblems:Hle,remove:Wle,save:Gle,saveLagrangeProblem:aP},Symbol.toStringTag,{value:"Module"}));function Kle(){const[t,e]=G.useState(["","",""]),[r,n]=G.useState(["","",""]),[a,i]=G.useState(""),[s,u]=G.useState(null),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=G.useState([]),{problems:d,removingIds:m,refresh:h,saveProblem:v,deleteProblem:T}=$t(Xle);G.useEffect(()=>{h().catch(console.error)},[h]);const S=(w,g,N)=>{const E=w.length;let b=0,D=[];for(let I=0;I<E;I++){let F=1,O=`L${I}(x) = `;for(let z=0;z<E;z++)I!==z&&(F*=(N-w[z])/(w[I]-w[z]),O+=`((x - ${w[z]})/(${w[I]} - ${w[z]})) `);const P=g[I]*F;b+=P,D.push({i:I,Li:F,term:P,LiStr:O})}return{fx:b,detail:D}},C=()=>{try{const w=t.map(D=>parseFloat(D)),g=r.map(D=>parseFloat(D)),N=parseFloat(a);if(w.some(isNaN)||g.some(isNaN)||isNaN(N)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(w.length!==g.length){o("สถานะ: จำนวนค่า x และ y ต้องเท่ากัน");return}const{fx:E,detail:b}=S(w,g,N);u(E),f(b),o("สถานะ: คำนวณเสร็จสิ้น")}catch(w){console.error(w),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},_=()=>{e(["","",""]),n(["","",""]),i(""),u(null),f([]),o("สถานะ: รีเซ็ตแล้ว")},M=async()=>{try{const w={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Lagrange(${t.join(",")})`};await v(w),alert("บันทึกแล้ว!")}catch(w){console.error("save problem failed:",w),alert("บันทึกไม่สำเร็จ: "+((w==null?void 0:w.message)||String(w)))}},y=w=>{try{const g=typeof w.xValues=="string"?JSON.parse(w.xValues):w.xValues||[],N=typeof w.yValues=="string"?JSON.parse(w.yValues):w.yValues||[];e(g),n(N),i(w.xTarget||"")}catch(g){console.error("failed to parse saved problem",g,w),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},x=w=>{confirm("ลบโจทย์นี้ไหม?")&&T(w.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Lagrange Interpolation",subtitle:"หาค่า f(x) โดยใช้ลากร็องจ์อินเตอร์โพเลชัน"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),p.jsx("input",{type:"number",value:t.length,onChange:w=>{const g=Math.max(2,parseInt(w.target.value)||2);e(Array(g).fill("")),n(Array(g).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),p.jsxs("table",{className:"text-sm border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-gray-400",children:[p.jsx("th",{className:"p-1",children:"xᵢ"}),p.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),p.jsx("tbody",{children:t.map((w,g)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:t[g],onChange:N=>{const E=[...t];E[g]=N.target.value,e(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:r[g],onChange:N=>{const E=[...r];E[g]=N.target.value,n(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},g))})]})]}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),p.jsx("input",{type:"number",value:a,onChange:w=>i(w.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:C,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:M,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),p.jsx(Lt,{problems:d,onLoad:y,onDelete:x,removingIds:m})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s!==null?p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsxs("div",{children:["f(",a,") ≈ ",p.jsx("b",{children:Re(s)})]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"mb-1 font-semibold text-gray-300",children:"ขั้นตอนการคำนวณ:"}),c.map(w=>p.jsxs("div",{className:"mb-1",children:["L",w.i,"(x): ",w.Li.toFixed(6)," → y",w.i,"·L",w.i,"(x) = ",w.term.toFixed(6)]},w.i))]})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Wx="problems_linear";async function iP(){const t=Ft(Ue(Ce,Wx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function sP(t){return jt(Ue(Ce,Wx),{...t,method:"linear",createdAt:kt()})}async function Qx(t){return Bt(Tt(Ce,Wx,t))}const Jle=iP,Yle=sP,Zle=Qx,ece=Qx,tce=Object.freeze(Object.defineProperty({__proto__:null,del:ece,deleteLinearProblem:Qx,getLinearProblems:iP,getProblems:Jle,remove:Zle,save:Yle,saveLinearProblem:sP},Symbol.toStringTag,{value:"Module"}));function rce(){const[t,e]=G.useState(""),[r,n]=G.useState(""),[a,i]=G.useState(""),[s,u]=G.useState(""),[l,o]=G.useState(""),[c,f]=G.useState(null),[d,m]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:h,removingIds:v,refresh:T,saveProblem:S,deleteProblem:C}=$t(tce);G.useEffect(()=>{T().catch(console.error)},[T]);const _=(N,E,b,D,I)=>E+(D-E)/(b-N)*(I-N),M=()=>{try{const N=parseFloat(t),E=parseFloat(r),b=parseFloat(a),D=parseFloat(s),I=parseFloat(l);if([N,E,b,D,I].some(isNaN)){m("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(N===b){m("สถานะ: ค่า x1 และ x2 ต้องไม่เท่ากัน");return}const F=_(N,E,b,D,I);f(F),m("สถานะ: คำนวณเสร็จสิ้น")}catch(N){console.error(N),m("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},y=()=>{e(""),n(""),i(""),u(""),o(""),f(null),m("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const N={x1:t,y1:r,x2:a,y2:s,xTarget:l,expr:`Linear(${t},${a})`};await S(N),alert("บันทึกแล้ว!")}catch(N){console.error("save problem failed:",N),alert("บันทึกไม่สำเร็จ: "+((N==null?void 0:N.message)||String(N)))}},w=N=>{e(N.x1||""),n(N.y1||""),i(N.x2||""),u(N.y2||""),o(N.xTarget||"")},g=N=>{confirm("ลบโจทย์นี้ไหม?")&&C(N.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Linear Interpolation",subtitle:"คำนวณค่า f(x) โดยใช้การประมาณเชิงเส้น"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-gray-400",children:"x₁"}),p.jsx("input",{type:"number",value:t,onChange:N=>e(N.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-gray-400",children:"f(x₁)"}),p.jsx("input",{type:"number",value:r,onChange:N=>n(N.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-gray-400",children:"x₂"}),p.jsx("input",{type:"number",value:a,onChange:N=>i(N.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-gray-400",children:"f(x₂)"}),p.jsx("input",{type:"number",value:s,onChange:N=>u(N.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"หาค่า f(x) เมื่อ x = "}),p.jsx("input",{type:"number",value:l,onChange:N=>o(N.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:M,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:y,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2 text-gray-400",children:d}),p.jsx(Lt,{problems:h,onLoad:w,onDelete:g,removingIds:v})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),c!==null?p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsxs("div",{children:["f(",l,") ≈ ",p.jsx("b",{children:Re(c)})]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"font-semibold text-gray-300",children:"สูตรที่ใช้:"}),p.jsx("code",{children:"f(x) = f(x₁) + [(f(x₂) - f(x₁)) / (x₂ - x₁)] · (x - x₁)"})]})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Xx="problems_quadratic";async function oP(){const t=Ft(Ue(Ce,Xx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function uP(t){return jt(Ue(Ce,Xx),{...t,method:"quadratic",createdAt:kt()})}async function Kx(t){return Bt(Tt(Ce,Xx,t))}const nce=oP,ace=uP,ice=Kx,sce=Kx,oce=Object.freeze(Object.defineProperty({__proto__:null,del:sce,deleteQuadraticProblem:Kx,getProblems:nce,getQuadraticProblems:oP,remove:ice,save:ace,saveQuadraticProblem:uP},Symbol.toStringTag,{value:"Module"}));function uce(){const[t,e]=G.useState(["","",""]),[r,n]=G.useState(["","",""]),[a,i]=G.useState(""),[s,u]=G.useState(null),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(oce);G.useEffect(()=>{d().catch(console.error)},[d]);const v=(y,x,w)=>{if(y.length!==3||x.length!==3)throw new Error("ต้องมีข้อมูล 3 จุดเท่านั้น");const[g,N,E]=y,[b,D,I]=x,F=(w-N)*(w-E)/((g-N)*(g-E)),O=(w-g)*(w-E)/((N-g)*(N-E)),P=(w-g)*(w-N)/((E-g)*(E-N));return{fx:b*F+D*O+I*P,L0:F,L1:O,L2:P}},T=()=>{try{const y=t.map(D=>parseFloat(D)),x=r.map(D=>parseFloat(D)),w=parseFloat(a);if(y.some(isNaN)||x.some(isNaN)||isNaN(w)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}const{fx:g,L0:N,L1:E,L2:b}=v(y,x,w);u({fx:g,L0:N,L1:E,L2:b}),o("สถานะ: คำนวณเสร็จสิ้น")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{e(["","",""]),n(["","",""]),i(""),u(null),o("สถานะ: รีเซ็ตแล้ว")},C=async()=>{try{const y={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Quadratic(${t.join(",")})`};await m(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.xValues=="string"?JSON.parse(y.xValues):y.xValues||[],w=typeof y.yValues=="string"?JSON.parse(y.yValues):y.yValues||[];e(x),n(w),i(y.xTarget||"")}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&h(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Quadratic Interpolation",subtitle:"คำนวณค่า f(x) โดยใช้การอินเตอร์โพเลชันกำลังสอง (ผ่าน 3 จุด)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),p.jsxs("table",{className:"text-sm border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-gray-400",children:[p.jsx("th",{className:"p-1",children:"xᵢ"}),p.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),p.jsx("tbody",{children:t.map((y,x)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:t[x],onChange:w=>{const g=[...t];g[x]=w.target.value,e(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:r[x],onChange:w=>{const g=[...r];g[x]=w.target.value,n(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},x))})]})]}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),p.jsx("input",{type:"number",value:a,onChange:y=>i(y.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:T,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),p.jsx(Lt,{problems:c,onLoad:_,onDelete:M,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s?p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsxs("div",{children:["f(",a,") ≈ ",p.jsx("b",{children:Re(s.fx)})]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"ค่า Lᵢ(x):"}),p.jsxs("div",{children:["L₀(x) = ",Re(s.L0)]}),p.jsxs("div",{children:["L₁(x) = ",Re(s.L1)]}),p.jsxs("div",{children:["L₂(x) = ",Re(s.L2)]})]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"font-semibold text-gray-300",children:"สูตรที่ใช้:"}),p.jsx("code",{children:"f(x) = y₀L₀(x) + y₁L₁(x) + y₂L₂(x)"})]})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Jx="problems_polynomial";async function lP(){const t=Ft(Ue(Ce,Jx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function cP(t){return jt(Ue(Ce,Jx),{...t,method:"polynomial",createdAt:kt()})}async function Yx(t){return Bt(Tt(Ce,Jx,t))}const lce=lP,cce=cP,fce=Yx,dce=Yx,mce=Object.freeze(Object.defineProperty({__proto__:null,del:dce,deletePolynomialProblem:Yx,getPolynomialProblems:lP,getProblems:lce,remove:fce,save:cce,savePolynomialProblem:cP},Symbol.toStringTag,{value:"Module"}));function hce(){const[t,e]=G.useState(["","","",""]),[r,n]=G.useState(["","","",""]),[a,i]=G.useState(""),[s,u]=G.useState(null),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=G.useState([]),{problems:d,removingIds:m,refresh:h,saveProblem:v,deleteProblem:T}=$t(mce);G.useEffect(()=>{h().catch(console.error)},[h]);const S=(g,N)=>{const E=g.length,b=Array.from({length:E},()=>Array(E).fill(0));for(let D=0;D<E;D++)b[D][0]=N[D];for(let D=1;D<E;D++)for(let I=0;I<E-D;I++)b[I][D]=(b[I+1][D-1]-b[I][D-1])/(g[I+D]-g[I]);return b},C=(g,N,E)=>{const b=g.length;let D=N[0][0];for(let I=1;I<b;I++){let F=N[0][I];for(let O=0;O<I;O++)F*=E-g[O];D+=F}return D},_=()=>{try{const g=t.map(I=>parseFloat(I)),N=r.map(I=>parseFloat(I)),E=parseFloat(a);if(g.some(isNaN)||N.some(isNaN)||isNaN(E)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}const b=S(g,N),D=C(g,b,E);u(D),f(b),o("สถานะ: คำนวณเสร็จสิ้น")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},M=()=>{e(["","","",""]),n(["","","",""]),i(""),u(null),f([]),o("สถานะ: รีเซ็ตแล้ว")},y=async()=>{try{const g={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Polynomial(${t.join(",")})`};await v(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},x=g=>{try{const N=typeof g.xValues=="string"?JSON.parse(g.xValues):g.xValues||[],E=typeof g.yValues=="string"?JSON.parse(g.yValues):g.yValues||[];e(N),n(E),i(g.xTarget||"")}catch(N){console.error("failed to parse saved problem",N,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},w=g=>{confirm("ลบโจทย์นี้ไหม?")&&T(g.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Polynomial Interpolation",subtitle:"คำนวณค่า f(x) โดยใช้ Newton’s Divided Difference Polynomial"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),p.jsx("input",{type:"number",value:t.length,onChange:g=>{const N=Math.max(2,parseInt(g.target.value)||2);e(Array(N).fill("")),n(Array(N).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),p.jsxs("table",{className:"text-sm border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-gray-400",children:[p.jsx("th",{className:"p-1",children:"xᵢ"}),p.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),p.jsx("tbody",{children:t.map((g,N)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:t[N],onChange:E=>{const b=[...t];b[N]=E.target.value,e(b)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:r[N],onChange:E=>{const b=[...r];b[N]=E.target.value,n(b)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},N))})]})]}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),p.jsx("input",{type:"number",value:a,onChange:g=>i(g.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:_,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:M,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),p.jsx(Lt,{problems:d,onLoad:x,onDelete:w,removingIds:m})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s!==null?p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsxs("div",{children:["f(",a,") ≈ ",p.jsx("b",{children:Re(s)})]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"ตาราง Newton’s Divided Difference:"}),p.jsx("table",{className:"text-xs border-collapse border border-slate-600",children:p.jsx("tbody",{children:c.map((g,N)=>p.jsx("tr",{children:g.map((E,b)=>b<c.length-N?p.jsx("td",{className:"border border-slate-700 p-1 text-center",children:Re(E)},b):null)},N))})})]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"font-semibold text-gray-300",children:"สูตรทั่วไป:"}),p.jsx("code",{children:"f(x) = f(x₀) + f[x₀,x₁](x - x₀) + f[x₀,x₁,x₂](x - x₀)(x - x₁) + ..."})]})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Zx="problems_linearspline";async function fP(){const t=Ft(Ue(Ce,Zx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function dP(t){return jt(Ue(Ce,Zx),{...t,method:"linearspline",createdAt:kt()})}async function e1(t){return Bt(Tt(Ce,Zx,t))}const pce=fP,vce=dP,gce=e1,yce=e1,xce=Object.freeze(Object.defineProperty({__proto__:null,del:yce,deleteLinearSplineProblem:e1,getLinearSplineProblems:fP,getProblems:pce,remove:gce,save:vce,saveLinearSplineProblem:dP},Symbol.toStringTag,{value:"Module"}));function bce(){const[t,e]=G.useState(["","",""]),[r,n]=G.useState(["","",""]),[a,i]=G.useState(""),[s,u]=G.useState(null),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=G.useState([]),{problems:d,removingIds:m,refresh:h,saveProblem:v,deleteProblem:T}=$t(xce);G.useEffect(()=>{h().catch(console.error)},[h]);const S=(w,g,N)=>{const E=w.length;let b=[];for(let F=0;F<E-1;F++){const O=(g[F+1]-g[F])/(w[F+1]-w[F]),P=g[F]-O*w[F];b.push({i:F,x1:w[F],x2:w[F+1],slope:O,intercept:P})}let D=b.find(F=>N>=F.x1&&N<=F.x2);if(!D)throw new Error("ค่า x อยู่นอกขอบเขตข้อมูล");return{fx:D.slope*N+D.intercept,segs:b,found:D}},C=()=>{try{const w=t.map(I=>parseFloat(I)),g=r.map(I=>parseFloat(I)),N=parseFloat(a);if(w.some(isNaN)||g.some(isNaN)||isNaN(N)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(w.length<2){o("สถานะ: ต้องมีอย่างน้อย 2 จุดข้อมูล");return}const{fx:E,segs:b,found:D}=S(w,g,N);u({fx:E,found:D}),f(b),o("สถานะ: คำนวณเสร็จสิ้น")}catch(w){console.error(w),o("สถานะ: "+(w.message||"เกิดข้อผิดพลาดในการคำนวณ"))}},_=()=>{e(["","",""]),n(["","",""]),i(""),u(null),f([]),o("สถานะ: รีเซ็ตแล้ว")},M=async()=>{try{const w={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`LinearSpline(${t.join(",")})`};await v(w),alert("บันทึกแล้ว!")}catch(w){console.error("save problem failed:",w),alert("บันทึกไม่สำเร็จ: "+((w==null?void 0:w.message)||String(w)))}},y=w=>{try{const g=typeof w.xValues=="string"?JSON.parse(w.xValues):w.xValues||[],N=typeof w.yValues=="string"?JSON.parse(w.yValues):w.yValues||[];e(g),n(N),i(w.xTarget||"")}catch(g){console.error("failed to parse saved problem",g,w),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},x=w=>{confirm("ลบโจทย์นี้ไหม?")&&T(w.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Linear Spline Interpolation",subtitle:"การประมาณค่า f(x) ด้วยเส้นตรงระหว่างจุดข้อมูลที่ต่อเนื่องกัน"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),p.jsx("input",{type:"number",value:t.length,onChange:w=>{const g=Math.max(2,parseInt(w.target.value)||2);e(Array(g).fill("")),n(Array(g).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"overflow-x-auto mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),p.jsxs("table",{className:"text-sm border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-gray-400",children:[p.jsx("th",{className:"p-1",children:"xᵢ"}),p.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),p.jsx("tbody",{children:t.map((w,g)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:t[g],onChange:N=>{const E=[...t];E[g]=N.target.value,e(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:r[g],onChange:N=>{const E=[...r];E[g]=N.target.value,n(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},g))})]})]}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),p.jsx("input",{type:"number",value:a,onChange:w=>i(w.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:C,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:M,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2 text-gray-400",children:l}),p.jsx(Lt,{problems:d,onLoad:y,onDelete:x,removingIds:m})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s?p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsxs("div",{children:["f(",a,") ≈ ",p.jsx("b",{children:Re(s.fx)})]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"สมการเส้นตรงแต่ละช่วง:"}),c.map(w=>p.jsxs("div",{children:["ช่วง [",w.x1,", ",w.x2,"]: y = ",Re(w.slope),"x + ",Re(w.intercept)]},w.i))]}),p.jsxs("div",{className:"mt-3 text-gray-400",children:[p.jsx("div",{className:"font-semibold text-gray-300",children:"ช่วงที่ใช้คำนวณ:"}),p.jsxs("div",{children:["x ∈ [",s.found.x1,", ",s.found.x2,"] → y = ",Re(s.found.slope),"x + ",Re(s.found.intercept)]})]})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const t1="problems_quadraticspline";async function mP(){const t=Ft(Ue(Ce,t1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function hP(t){return jt(Ue(Ce,t1),{...t,method:"quadratic_spline",createdAt:kt()})}async function r1(t){return Bt(Tt(Ce,t1,t))}const wce=mP,Nce=hP,_ce=r1,Ece=r1,Sce=Object.freeze(Object.defineProperty({__proto__:null,del:Ece,deleteQuadraticSplineProblem:r1,getProblems:wce,getQuadraticSplineProblems:mP,remove:_ce,save:Nce,saveQuadraticSplineProblem:hP},Symbol.toStringTag,{value:"Module"}));function Ace(){const[t,e]=G.useState([{x:0,y:0},{x:1,y:1},{x:2,y:4}]),[r,n]=G.useState(""),[a,i]=G.useState(null),[s,u]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:l,removingIds:o,refresh:c,saveProblem:f,deleteProblem:d}=$t(Sce);G.useEffect(()=>{c().catch(console.error)},[c]);const m=(y,x)=>{if(y.length<3)return{error:"ต้องมีจุดอย่างน้อย 3 จุด"};const w=y.length-1,g=[],N=[],E=[];for(let F=0;F<w;F++){const O=y[F].x,P=y[F+1].x,z=y[F].y,$=y[F+1].y,L=P-O;if(L===0)return{error:"ค่าของ x ซ้ำกัน"};g[F]=z,N[F]=($-z)/L,E[F]=0}let b=0;for(let F=0;F<w;F++)if(x>=y[F].x&&x<=y[F+1].x){b=F;break}const D=x-y[b].x,I=g[b]+N[b]*D+E[b]*D*D;return{a:g,b:N,c:E,y:I}},h=()=>{try{const y=parseFloat(r);if(isNaN(y)){u("กรุณากรอกค่า x ให้ถูกต้อง");return}const x=m(t,y);if(x.error){u("สถานะ: "+x.error),i(null);return}i(x.y),u("สถานะ: คำนวณสำเร็จ")}catch(y){console.error(y),u("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},v=()=>{e([{x:0,y:0},{x:1,y:1},{x:2,y:4}]),n(""),i(null),u("สถานะ: รีเซ็ตแล้ว")},T=()=>{e([...t,{x:0,y:0}])},S=y=>{if(t.length<=3)return alert("ต้องมีอย่างน้อย 3 จุด");e(t.filter((x,w)=>w!==y))},C=async()=>{try{const y={points:JSON.stringify(t),xValue:r,expr:`Quadratic Spline (${t.length} points)`};await f(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.points=="string"?JSON.parse(y.points):y.points||[];e(x),n(y.xValue||"")}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&d(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Quadratic Spline",subtitle:"ประมาณค่า y ด้วย Quadratic Spline Interpolation"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),p.jsx("table",{className:"text-sm border-collapse mb-3",children:p.jsx("tbody",{children:t.map((y,x)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:y.x,onChange:w=>{const g=[...t];g[x].x=parseFloat(w.target.value)||0,e(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:y.y,onChange:w=>{const g=[...t];g[x].y=parseFloat(w.target.value)||0,e(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("button",{onClick:()=>S(x),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},x))})}),p.jsx("button",{onClick:T,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการหาค่า y"}),p.jsx("input",{type:"number",value:r,onChange:y=>n(y.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:v,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:s}),p.jsx(Lt,{problems:l,onLoad:_,onDelete:M,removingIds:o})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),a!==null?p.jsxs("div",{className:"text-sm text-gray-300",children:["y(",r,") = ",p.jsx("span",{className:"font-semibold",children:Re(a)})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีผลลัพธ์"}),p.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Quadratic Spline ใช้สำหรับประมาณค่าฟังก์ชันโดยใช้โพลิโนเมียลดีกรี 2 ระหว่างจุดข้อมูล"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const n1="problems_cubicspline";async function pP(){const t=Ft(Ue(Ce,n1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function vP(t){return jt(Ue(Ce,n1),{...t,method:"cubic_spline",createdAt:kt()})}async function a1(t){return Bt(Tt(Ce,n1,t))}const Dce=pP,Cce=vP,Tce=a1,Mce=a1,Ice=Object.freeze(Object.defineProperty({__proto__:null,del:Mce,deleteCubicSplineProblem:a1,getCubicSplineProblems:pP,getProblems:Dce,remove:Tce,save:Cce,saveCubicSplineProblem:vP},Symbol.toStringTag,{value:"Module"}));function Pce(){const[t,e]=G.useState([{x:0,y:0},{x:1,y:1},{x:2,y:4},{x:3,y:9}]),[r,n]=G.useState(""),[a,i]=G.useState(null),[s,u]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:l,removingIds:o,refresh:c,saveProblem:f,deleteProblem:d}=$t(Ice);G.useEffect(()=>{c().catch(console.error)},[c]);const m=(y,x)=>{const w=y.length;if(w<3)return{error:"ต้องมีจุดอย่างน้อย 3 จุด"};const g=[],N=[],E=[],b=[],D=[],I=[],F=[],O=[],P=[];for(let q=0;q<w;q++)I[q]=y[q].y;for(let q=0;q<w-1;q++)g[q]=y[q+1].x-y[q].x;if(g.some(q=>q===0))return{error:"ค่าของ x ซ้ำกัน"};for(let q=1;q<w-1;q++)N[q]=3/g[q]*(I[q+1]-I[q])-3/g[q-1]*(I[q]-I[q-1]);E[0]=1,b[0]=0,D[0]=0;for(let q=1;q<w-1;q++)E[q]=2*(y[q+1].x-y[q-1].x)-g[q-1]*b[q-1],b[q]=g[q]/E[q],D[q]=(N[q]-g[q-1]*D[q-1])/E[q];E[w-1]=1,D[w-1]=0,O[w-1]=0;for(let q=w-2;q>=0;q--)O[q]=D[q]-b[q]*O[q+1],F[q]=(I[q+1]-I[q])/g[q]-g[q]*(O[q+1]+2*O[q])/3,P[q]=(O[q+1]-O[q])/(3*g[q]);let z=w-2;for(let q=0;q<w-1;q++)if(x>=y[q].x&&x<=y[q+1].x){z=q;break}const $=x-y[z].x,L=I[z]+F[z]*$+O[z]*$**2+P[z]*$**3;return{a:I,b:F,c:O,d:P,y:L}},h=()=>{try{const y=parseFloat(r);if(isNaN(y)){u("กรุณากรอกค่า x ให้ถูกต้อง");return}const x=m(t,y);if(x.error){u("สถานะ: "+x.error),i(null);return}i(x.y),u("สถานะ: คำนวณสำเร็จ")}catch(y){console.error(y),u("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},v=()=>{e([{x:0,y:0},{x:1,y:1},{x:2,y:4},{x:3,y:9}]),n(""),i(null),u("สถานะ: รีเซ็ตแล้ว")},T=()=>{e([...t,{x:0,y:0}])},S=y=>{if(t.length<=3)return alert("ต้องมีอย่างน้อย 3 จุด");e(t.filter((x,w)=>w!==y))},C=async()=>{try{const y={points:JSON.stringify(t),xValue:r,expr:`Cubic Spline (${t.length} points)`};await f(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.points=="string"?JSON.parse(y.points):y.points||[];e(x),n(y.xValue||"")}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&d(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Cubic Spline",subtitle:"ประมาณค่า y ด้วย Cubic Spline Interpolation"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),p.jsx("table",{className:"text-sm border-collapse mb-3",children:p.jsx("tbody",{children:t.map((y,x)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:y.x,onChange:w=>{const g=[...t];g[x].x=parseFloat(w.target.value)||0,e(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:y.y,onChange:w=>{const g=[...t];g[x].y=parseFloat(w.target.value)||0,e(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("button",{onClick:()=>S(x),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},x))})}),p.jsx("button",{onClick:T,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการหาค่า y"}),p.jsx("input",{type:"number",value:r,onChange:y=>n(y.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:v,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:s}),p.jsx(Lt,{problems:l,onLoad:_,onDelete:M,removingIds:o})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),a!==null?p.jsxs("div",{className:"text-sm text-gray-300",children:["y(",r,") = ",p.jsx("span",{className:"font-semibold",children:Re(a)})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีผลลัพธ์"}),p.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Cubic Spline ใช้สมการกำลังสามแต่ละช่วง เพื่อให้เส้นต่อเนื่องทั้งค่าฟังก์ชันและอนุพันธ์"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const i1="problems_singlelinear";async function gP(){const t=Ft(Ue(Ce,i1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function yP(t){return jt(Ue(Ce,i1),{...t,method:"single_linear",createdAt:kt()})}async function s1(t){return Bt(Tt(Ce,i1,t))}const Fce=gP,Rce=yP,Oce=s1,Bce=s1,jce=Object.freeze(Object.defineProperty({__proto__:null,del:Bce,deleteSingleLinearProblem:s1,getProblems:Fce,getSingleLinearProblems:gP,remove:Oce,save:Rce,saveSingleLinearProblem:yP},Symbol.toStringTag,{value:"Module"}));function kce(){const[t,e]=G.useState([{x:1,y:1},{x:2,y:2},{x:3,y:2.5}]),[r,n]=G.useState(""),[a,i]=G.useState(null),[s,u]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:l,removingIds:o,refresh:c,saveProblem:f,deleteProblem:d}=$t(jce);G.useEffect(()=>{c().catch(console.error)},[c]);const m=(y,x)=>{const w=y.length;if(w<2)return{error:"ต้องมีข้อมูลอย่างน้อย 2 จุด"};const g=y.reduce((O,P)=>O+P.x,0),N=y.reduce((O,P)=>O+P.y,0),E=y.reduce((O,P)=>O+P.x*P.y,0),b=y.reduce((O,P)=>O+P.x*P.x,0),D=(w*E-g*N)/(w*b-g**2),I=(N-D*g)/w,F=I+D*x;return{a:I,b:D,yPred:F}},h=()=>{try{const y=parseFloat(r);if(isNaN(y)){u("กรุณากรอกค่า x ที่ต้องการทำนาย");return}const x=m(t,y);if(x.error){u("สถานะ: "+x.error),i(null);return}i(x),u("สถานะ: คำนวณสำเร็จ")}catch(y){console.error(y),u("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},v=()=>{e([{x:1,y:1},{x:2,y:2},{x:3,y:2.5}]),n(""),i(null),u("สถานะ: รีเซ็ตแล้ว")},T=()=>{e([...t,{x:0,y:0}])},S=y=>{if(t.length<=2)return alert("ต้องมีอย่างน้อย 2 จุด");e(t.filter((x,w)=>w!==y))},C=async()=>{try{const y={points:JSON.stringify(t),xPredict:r,expr:`Single Linear Regression (${t.length} points)`};await f(y),alert("บันทึกแล้ว!")}catch(y){console.error("save problem failed:",y),alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{const x=typeof y.points=="string"?JSON.parse(y.points):y.points||[];e(x),n(y.xPredict||"")}catch(x){console.error("failed to parse saved problem",x,y),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&d(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Single Linear Regression",subtitle:"การหาสมการเส้นตรงที่เหมาะสมกับข้อมูล (y = a + bx)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),p.jsx("table",{className:"text-sm border-collapse mb-3",children:p.jsx("tbody",{children:t.map((y,x)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:y.x,onChange:w=>{const g=[...t];g[x].x=parseFloat(w.target.value)||0,e(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:y.y,onChange:w=>{const g=[...t];g[x].y=parseFloat(w.target.value)||0,e(g)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("button",{onClick:()=>S(x),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},x))})}),p.jsx("button",{onClick:T,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการทำนาย (xₚ)"}),p.jsx("input",{type:"number",value:r,onChange:y=>n(y.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:v,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:s}),p.jsx(Lt,{problems:l,onLoad:_,onDelete:M,removingIds:o})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),a?p.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[p.jsxs("div",{children:["a = ",Re(a.a)]}),p.jsxs("div",{children:["b = ",Re(a.b)]}),p.jsxs("div",{children:["สมการ: y = ",Re(a.a)," + ",Re(a.b),"x"]}),p.jsxs("div",{children:["y(",r,") ="," ",p.jsx("span",{className:"font-semibold",children:Re(a.yPred)})]})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีผลลัพธ์"}),p.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"การถดถอยเชิงเส้น (Single Linear Regression) ใช้หาความสัมพันธ์ระหว่าง x และ y ด้วยเส้นตรง y = a + bx ที่ทำให้ผลรวมของความคลาดเคลื่อนยกกำลังสองน้อยที่สุด"})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const o1="problems_multiplelinear";async function xP(){const t=Ft(Ue(Ce,o1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function bP(t){return jt(Ue(Ce,o1),{...t,method:"multiple_linear",createdAt:kt()})}async function u1(t){return Bt(Tt(Ce,o1,t))}const $ce=xP,Lce=bP,zce=u1,Vce=u1,Uce=Object.freeze(Object.defineProperty({__proto__:null,del:Vce,deleteMultipleLinearProblem:u1,getMultipleLinearProblems:xP,getProblems:$ce,remove:zce,save:Lce,saveMultipleLinearProblem:bP},Symbol.toStringTag,{value:"Module"}));function qce(t,e){const r=t.length,n=t.map(s=>s.slice()),a=e.slice();for(let s=0;s<r;s++){let u=s,l=Math.abs(n[s][s]);for(let o=s+1;o<r;o++){const c=Math.abs(n[o][s]);c>l&&(l=c,u=o)}if(l<1e-15)throw new Error("Matrix is singular or ill-conditioned.");u!==s&&([n[s],n[u]]=[n[u],n[s]],[a[s],a[u]]=[a[u],a[s]]);for(let o=s+1;o<r;o++){const c=n[o][s]/n[s][s];n[o][s]=0;for(let f=s+1;f<r;f++)n[o][f]-=c*n[s][f];a[o]-=c*a[s]}}const i=Array(r).fill(0);for(let s=r-1;s>=0;s--){let u=a[s];for(let l=s+1;l<r;l++)u-=n[s][l]*i[l];i[s]=u/n[s][s]}return i}function Hce(t){const e=t.length,r=t[0].length,n=Array.from({length:r},()=>Array(e).fill(0));for(let a=0;a<e;a++)for(let i=0;i<r;i++)n[i][a]=t[a][i];return n}function lA(t,e){const r=t.length,n=t[0].length,a=e[0].length,i=Array.from({length:r},()=>Array(a).fill(0));for(let s=0;s<r;s++)for(let u=0;u<a;u++){let l=0;for(let o=0;o<n;o++)l+=t[s][o]*e[o][u];i[s][u]=l}return i}function Gce(t){const e=t.length;if(e<2)return{error:"ต้องมีข้อมูลอย่างน้อย 2 แถว"};t[0].x.length;const r=t.map(h=>[1,...h.x]),n=t.map(h=>[h.y]),a=Hce(r),i=lA(a,r),s=lA(a,n).map(h=>h[0]),u=qce(i,s),l=r.map(h=>h.reduce((v,T,S)=>v+T*u[S],0)),o=n.map(h=>h[0]),c=o.reduce((h,v)=>h+v,0)/e,f=o.reduce((h,v)=>h+(v-c)**2,0),d=o.reduce((h,v,T)=>h+(v-l[T])**2,0),m=f>0?1-d/f:1;return{coef:u,r2:m,yHat:l}}function cA(t,e){return t[0]+e.reduce((r,n,a)=>r+t[a+1]*n,0)}function Wce(){const[t,e]=G.useState(2),[r,n]=G.useState([{x:[1,2],y:5},{x:[2,0],y:4},{x:[3,1],y:7}]),[a,i]=G.useState(Array(2).fill(0)),[s,u]=G.useState(null),[l,o]=G.useState(null),[c,f]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:h,saveProblem:v,deleteProblem:T}=$t(Uce);G.useEffect(()=>{h().catch(console.error)},[h]);const S=b=>{n(D=>D.map(I=>{const F=I.x.slice(0,b);for(;F.length<b;)F.push(0);return{...I,x:F}})),i(D=>{const I=D.slice(0,b);for(;I.length<b;)I.push(0);return I})},C=b=>{const D=Math.max(1,Math.min(8,parseInt(b)||1));e(D),S(D)},_=()=>{n([...r,{x:Array(t).fill(0),y:0}])},M=b=>{if(r.length<=2)return alert("ต้องมีอย่างน้อย 2 แถว");n(r.filter((D,I)=>I!==b))},y=()=>{try{const b=Gce(r);if(b.error){u(null),o(null),f("สถานะ: "+b.error);return}u(b),f("สถานะ: คำนวณโมเดลสำเร็จ (R² = "+Re(b.r2)+")"),a.every(D=>Number.isFinite(parseFloat(D)))&&o(cA(b.coef,a.map(D=>parseFloat(D))))}catch(b){console.error(b),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},x=()=>{if(!(s!=null&&s.coef))return alert("โปรดคำนวณโมเดลก่อน");const b=a.map(D=>parseFloat(D)||0);o(cA(s.coef,b))},w=()=>{e(2),n([{x:[1,2],y:5},{x:[2,0],y:4},{x:[3,1],y:7}]),i([0,0]),u(null),o(null),f("สถานะ: รีเซ็ตแล้ว")},g=async()=>{try{const b={features:t,rows:JSON.stringify(r),xPredict:JSON.stringify(a),expr:`Multiple Linear (${t} features, ${r.length} rows)`};await v(b),alert("บันทึกแล้ว!")}catch(b){console.error("save problem failed:",b),alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},N=b=>{try{const D=b.features||1,I=typeof b.rows=="string"?JSON.parse(b.rows):b.rows||[],F=typeof b.xPredict=="string"?JSON.parse(b.xPredict):b.xPredict||[];e(D),n(I),i(F&&Array.isArray(F)?F:Array(D).fill(0)),u(null),o(null),f("สถานะ: โหลดโจทย์แล้ว (โปรดกดคำนวณ)"),S(D)}catch(D){console.error("failed to parse saved problem",D,b),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},E=b=>{confirm("ลบโจทย์นี้ไหม?")&&T(b.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Multiple Linear Regression",subtitle:"การถดถอยเชิงเส้นพหุคูณ: y = a + b₁x₁ + ... + b_m x_m"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนตัวแปรอิสระ (m)"}),p.jsx("input",{type:"number",value:t,onChange:b=>C(b.target.value),className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ตารางข้อมูล"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"text-sm border-collapse mb-3",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[Array.from({length:t},(b,D)=>p.jsxs("th",{className:"px-2 py-1 text-left text-gray-400",children:["x",D+1]},D)),p.jsx("th",{className:"px-2 py-1 text-left text-gray-400",children:"y"}),p.jsx("th",{})]})}),p.jsx("tbody",{children:r.map((b,D)=>p.jsxs("tr",{children:[b.x.map((I,F)=>p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:I,onChange:O=>{const P=r.map(z=>({...z,x:[...z.x]}));P[D].x[F]=parseFloat(O.target.value)||0,n(P)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},F)),p.jsx("td",{className:"p-1",children:p.jsx("input",{type:"number",value:b.y,onChange:I=>{const F=r.map(O=>({...O,x:[...O.x]}));F[D].y=parseFloat(I.target.value)||0,n(F)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),p.jsx("td",{className:"p-1",children:p.jsx("button",{onClick:()=>M(D),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},D))})]})}),p.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มแถวข้อมูล"}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการทำนาย (xₚ1..xₚm)"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((b,D)=>p.jsx("input",{type:"number",value:b,onChange:I=>{const F=a.slice();F[D]=parseFloat(I.target.value)||0,i(F)},className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"},D))})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณโมเดล"}),p.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"ทำนายค่า yₚ"}),p.jsx("button",{onClick:w,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:c}),p.jsx(Lt,{problems:d,onLoad:N,onDelete:E,removingIds:m})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s!=null&&s.coef?p.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[p.jsxs("div",{children:["Intercept (a) = ",Re(s.coef[0])]}),s.coef.slice(1).map((b,D)=>p.jsxs("div",{children:["b",D+1," = ",Re(b)]},D)),p.jsxs("div",{children:["R² = ",p.jsx("span",{className:"font-semibold",children:Re(s.r2)})]}),l!==null&&p.jsxs("div",{className:"mt-2",children:["yₚ = ",p.jsx("span",{className:"font-semibold",children:Re(l)})]})]}):p.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีโมเดล"}),p.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Multiple Linear Regression แก้ด้วย Normal Equation: (XᵀX)w = Xᵀy แล้วคำนวณสัมประสิทธิ์ w = [a, b₁, …, b_m]."})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const l1="problems_polynomialreg";async function wP(){const t=Ft(Ue(Ce,l1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function NP(t){return jt(Ue(Ce,l1),{...t,method:"polynomialreg",createdAt:kt()})}async function c1(t){return Bt(Tt(Ce,l1,t))}const Qce=wP,Xce=NP,Kce=c1,Jce=c1,Yce=Object.freeze(Object.defineProperty({__proto__:null,del:Jce,deletePolynomialRegProblem:c1,getPolynomialRegProblems:wP,getProblems:Qce,remove:Kce,save:Xce,savePolynomialRegProblem:NP},Symbol.toStringTag,{value:"Module"}));function Zce(){const[t,e]=G.useState([1,2,3,4]),[r,n]=G.useState([2.2,2.8,3.6,4.5]),[a,i]=G.useState(2),[s,u]=G.useState([]),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(Yce);G.useEffect(()=>{d().catch(console.error)},[d]);const v=(y,x,w)=>{y.length;const g=Array.from({length:w+1},(b,D)=>Array.from({length:w+1},(I,F)=>y.reduce((O,P)=>O+Math.pow(P,D+F),0))),N=Array.from({length:w+1},(b,D)=>x.reduce((I,F,O)=>I+F*Math.pow(y[O],D),0)),E=g.map((b,D)=>[...b,N[D]]);for(let b=0;b<=w;b++){let D=b;for(let F=b+1;F<=w;F++)Math.abs(E[F][b])>Math.abs(E[D][b])&&(D=F);[E[b],E[D]]=[E[D],E[b]];const I=E[b][b];if(Math.abs(I)<1e-12)throw new Error("Pivot เป็นศูนย์ — ไม่สามารถแก้สมการได้");for(let F=b;F<=w+1;F++)E[b][F]/=I;for(let F=0;F<=w;F++)if(F!==b){const O=E[F][b];for(let P=b;P<=w+1;P++)E[F][P]-=O*E[b][P]}}return E.map(b=>b[w+1])},T=()=>{try{const y=v(t,r,a);u(y),o("สถานะ: คำนวณเสร็จสิ้น")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u([])}},S=()=>{e([1,2,3,4]),n([2.2,2.8,3.6,4.5]),i(2),u([]),o("สถานะ: รีเซ็ตแล้ว")},C=async()=>{try{const y={x:JSON.stringify(t),y:JSON.stringify(r),degree:a,expr:`Polynomial Regression (deg=${a})`};await m(y),alert("บันทึกแล้ว!")}catch(y){alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},_=y=>{try{e(JSON.parse(y.x)),n(JSON.parse(y.y)),i(y.degree)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},M=y=>{confirm("ลบโจทย์นี้ไหม?")&&h(y.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Polynomial Regression",subtitle:"ประมาณค่าเชิงเส้นแบบพหุนาม (Polynomial Least Squares)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ลำดับพหุนาม"}),p.jsx("input",{type:"number",value:a,onChange:y=>i(Math.max(1,parseInt(y.target.value)||1)),className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x"}),p.jsx("textarea",{value:t.join(", "),onChange:y=>e(y.target.value.split(",").map(x=>parseFloat(x.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า y"}),p.jsx("textarea",{value:r.join(", "),onChange:y=>n(y.target.value.split(",").map(x=>parseFloat(x.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:T,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:C,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:l}),p.jsx(Lt,{problems:c,onLoad:_,onDelete:M,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ข้อมูล"}),p.jsxs("div",{className:"text-sm text-gray-400",children:["Polynomial Regression ใช้ประมาณค่าแนวโค้งเชิงเส้นลำดับ",p.jsx("b",{children:" m "})," ที่สอดคล้องกับข้อมูล (x, y) โดยหาค่าสัมประสิทธิ์จากสมการ Normal Equation"]}),s.length>0&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"สมการพหุนาม:"}),p.jsxs("div",{children:["y ="," ",s.map((y,x)=>`${Re(y)}${x===0?"":`x^${x}`}`).join(" + ")]})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const f1="problems_nonlinearreg";async function _P(){const t=Ft(Ue(Ce,f1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function EP(t){return jt(Ue(Ce,f1),{...t,method:"nonlinearreg",createdAt:kt()})}async function d1(t){return Bt(Tt(Ce,f1,t))}const efe=_P,tfe=EP,rfe=d1,nfe=d1,afe=Object.freeze(Object.defineProperty({__proto__:null,del:nfe,deleteNonlinearRegProblem:d1,getNonlinearRegProblems:_P,getProblems:efe,remove:rfe,save:tfe,saveNonlinearRegProblem:EP},Symbol.toStringTag,{value:"Module"}));function ife(){const[t,e]=G.useState([1,2,3,4,5]),[r,n]=G.useState([2.7,7.4,20.1,54.6,148.4]),[a,i]=G.useState("exponential"),[s,u]=G.useState(null),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(afe);G.useEffect(()=>{d().catch(console.error)},[d]);const v=(x,w)=>{const g=x.length,N=x.reduce((O,P)=>O+P,0),E=w.reduce((O,P)=>O+P,0),b=x.reduce((O,P,z)=>O+P*w[z],0),D=x.reduce((O,P)=>O+P*P,0),I=(g*b-N*E)/(g*D-N**2);return{a:(E-I*N)/g,b:I}},T=(x,w,g)=>{if(x.length<2)throw new Error("ต้องมีข้อมูลอย่างน้อย 2 จุด");let E=[],b=[];if(g==="exponential")E=x,b=w.map(P=>Math.log(P));else if(g==="power")E=x.map(P=>Math.log(P)),b=w.map(P=>Math.log(P));else throw new Error("ไม่รู้จักโมเดลที่เลือก");const{a:D,b:I}=v(E,b);return{a:Math.exp(D),b:I}},S=()=>{try{const x=T(t,r,a);u(x),o("สถานะ: คำนวณเสร็จสิ้น")}catch(x){console.error(x),u(null),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},C=()=>{e([1,2,3,4,5]),n([2.7,7.4,20.1,54.6,148.4]),i("exponential"),u(null),o("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{const x={x:JSON.stringify(t),y:JSON.stringify(r),model:a,expr:`Nonlinear Regression (${a})`};await m(x),alert("บันทึกแล้ว!")}catch(x){alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},M=x=>{try{e(JSON.parse(x.x)),n(JSON.parse(x.y)),i(x.model||"exponential")}catch{alert("ไม่สามารถโหลดโจทย์ได้")}},y=x=>{confirm("ลบโจทย์นี้ไหม?")&&h(x.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Nonlinear Regression",subtitle:"การประมาณค่าแบบไม่เชิงเส้น (Exponential / Power Model)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"เลือกโมเดล"}),p.jsxs("select",{value:a,onChange:x=>i(x.target.value),className:"w-full mb-3 px-2 py-1 rounded bg-slate-900 border border-slate-700",children:[p.jsx("option",{value:"exponential",children:"Exponential (y = a·e^(b·x))"}),p.jsx("option",{value:"power",children:"Power (y = a·x^b)"})]}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x"}),p.jsx("textarea",{value:t.join(", "),onChange:x=>e(x.target.value.split(",").map(w=>parseFloat(w.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า y"}),p.jsx("textarea",{value:r.join(", "),onChange:x=>n(x.target.value.split(",").map(w=>parseFloat(w.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:S,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:l}),p.jsx(Lt,{problems:c,onLoad:M,onDelete:y,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsx("div",{className:"text-sm text-gray-400",children:"โมเดลนี้จะประมาณค่าพารามิเตอร์ a และ b โดยใช้การแปลงลอการิทึมเพื่อลดรูปเป็นเชิงเส้น"}),s&&p.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[p.jsx("div",{className:"mb-2",children:"สมการที่ได้:"}),a==="exponential"?p.jsxs("div",{children:["y = ",Re(s.a)," · e^(",Re(s.b),"x)"]}):p.jsxs("div",{children:["y = ",Re(s.a)," · x^",Re(s.b)]})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const m1="problems_single_trapezoidal";async function SP(){const t=Ft(Ue(Ce,m1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function AP(t){return jt(Ue(Ce,m1),{...t,method:"single_trapezoidal",createdAt:kt()})}async function h1(t){return Bt(Tt(Ce,m1,t))}const sfe=SP,ofe=AP,ufe=h1,lfe=h1,cfe=Object.freeze(Object.defineProperty({__proto__:null,del:lfe,deleteSingleTrapezoidalProblem:h1,getProblems:sfe,getSingleTrapezoidalProblems:SP,remove:ufe,save:ofe,saveSingleTrapezoidalProblem:AP},Symbol.toStringTag,{value:"Module"}));function ffe(){const[t,e]=G.useState("x^2 + 1"),[r,n]=G.useState(0),[a,i]=G.useState(2),[s,u]=G.useState("-"),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:h}=$t(cfe);G.useEffect(()=>{d().catch(console.error)},[d]);const v=x=>{try{return Os(t,{x})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},T=(x,w,g)=>(w-x)/2*(g(x)+g(w)),S=()=>{try{const x=T(r,a,v);u(x),o("สถานะ: คำนวณสำเร็จ")}catch(x){console.error(x),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u("-")}},C=()=>{e("x^2 + 1"),n(0),i(2),u("-"),o("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{await m({expr:t,a:r,b:a,method:"single_trapezoidal"}),alert("บันทึกแล้ว!")}catch(x){alert("บันทึกไม่สำเร็จ: "+((x==null?void 0:x.message)||String(x)))}},M=x=>{e(x.expr),n(x.a),i(x.b)},y=x=>{confirm("ลบโจทย์นี้ไหม?")&&h(x.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Single Trapezoidal Rule",subtitle:"หาค่าประมาณเชิงตัวเลขของการอินทิเกรตแบบ Trapezoidal (หนึ่งช่วง)"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),p.jsx("input",{type:"text",value:t,onChange:x=>e(x.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),p.jsx("input",{type:"number",value:r,onChange:x=>n(parseFloat(x.target.value)),className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),p.jsx("input",{type:"number",value:a,onChange:x=>i(parseFloat(x.target.value)),className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:S,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:C,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:l}),p.jsx(Lt,{problems:c,onLoad:M,onDelete:y,removingIds:f})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"ใช้สูตร: I = (h / 2) [f(a) + f(b)], โดย h = b - a"}),s!=="-"&&p.jsxs("div",{className:"text-gray-300 text-sm",children:[p.jsxs("p",{children:["h = ",Re(a-r)]}),p.jsxs("p",{children:["f(a) = ",Re(v(r)),", f(b) = ",Re(v(a))]}),p.jsxs("p",{className:"mt-2",children:["ค่าประมาณของ I ≈ ",p.jsx("b",{children:Re(s)})]})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const p1="problems_composite_trapezoidal";async function DP(){const t=Ft(Ue(Ce,p1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function CP(t){return jt(Ue(Ce,p1),{...t,method:"composite_trapezoidal",createdAt:kt()})}async function v1(t){return Bt(Tt(Ce,p1,t))}const dfe=DP,mfe=CP,hfe=v1,pfe=v1,vfe=Object.freeze(Object.defineProperty({__proto__:null,del:pfe,deleteCompositeTrapezoidalProblem:v1,getCompositeTrapezoidalProblems:DP,getProblems:dfe,remove:hfe,save:mfe,saveCompositeTrapezoidalProblem:CP},Symbol.toStringTag,{value:"Module"}));function gfe(){const[t,e]=G.useState("x^2 + 1"),[r,n]=G.useState(0),[a,i]=G.useState(2),[s,u]=G.useState(4),[l,o]=G.useState("-"),[c,f]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=G.useState([]),{problems:h,removingIds:v,refresh:T,saveProblem:S,deleteProblem:C}=$t(vfe);G.useEffect(()=>{T().catch(console.error)},[T]);const _=E=>{try{return Os(t,{x:E})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},M=(E,b,D,I)=>{const F=(b-E)/D;let O=I(E)+I(b);const P=[{i:0,x:E,fx:I(E)}];for(let $=1;$<D;$++){const L=E+$*F;O+=2*I(L),P.push({i:$,x:L,fx:I(L)})}return P.push({i:D,x:b,fx:I(b)}),{I:F/2*O,h:F,rows:P}},y=()=>{try{const{I:E,h:b,rows:D}=M(r,a,s,_);o(E),m(D),f(`สถานะ: คำนวณสำเร็จ (h = ${Re(b)})`)}catch(E){console.error(E),o("-"),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),m([])}},x=()=>{e("x^2 + 1"),n(0),i(2),u(4),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},w=async()=>{try{await S({expr:t,a:r,b:a,n:s,method:"composite_trapezoidal"}),alert("บันทึกแล้ว!")}catch(E){alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},g=E=>{e(E.expr),n(E.a),i(E.b),u(E.n)},N=E=>{confirm("ลบโจทย์นี้ไหม?")&&C(E.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Composite Trapezoidal Rule",subtitle:"การอินทิเกรตเชิงตัวเลขด้วย Trapezoidal หลายช่วงย่อย"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),p.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),p.jsx("input",{type:"number",value:r,onChange:E=>n(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),p.jsx("input",{type:"number",value:a,onChange:E=>i(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n"}),p.jsx("input",{type:"number",value:s,onChange:E=>u(Math.max(1,parseInt(E.target.value)||1)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:c}),p.jsx(Lt,{problems:h,onLoad:g,onDelete:N,removingIds:v})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"ใช้สูตร: I = (h/2)[f(x₀) + 2∑f(xᵢ) + f(xₙ)], โดย h = (b - a)/n"}),d.length>0&&p.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:p.jsxs("table",{className:"min-w-full border border-slate-700",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700",children:[p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"i"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"xᵢ"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f(xᵢ)"})]})}),p.jsx("tbody",{children:d.map(E=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:E.i}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(E.x)}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(E.fx)})]},E.i))})]})}),l!=="-"&&p.jsx("div",{className:"text-sm text-gray-300",children:p.jsxs("p",{children:["ค่าประมาณของ I ≈ ",p.jsx("b",{children:Re(l)})]})})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const g1="problems_simpson";async function TP(){const t=Ft(Ue(Ce,g1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function MP(t){return jt(Ue(Ce,g1),{...t,method:"simpson",createdAt:kt()})}async function y1(t){return Bt(Tt(Ce,g1,t))}const yfe=TP,xfe=MP,bfe=y1,wfe=y1,Nfe=Object.freeze(Object.defineProperty({__proto__:null,del:wfe,deleteSimpsonProblem:y1,getProblems:yfe,getSimpsonProblems:TP,remove:bfe,save:xfe,saveSimpsonProblem:MP},Symbol.toStringTag,{value:"Module"}));function _fe(){const[t,e]=G.useState("x^2 + 1"),[r,n]=G.useState(0),[a,i]=G.useState(2),[s,u]=G.useState(4),[l,o]=G.useState("-"),[c,f]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=G.useState([]),{problems:h,removingIds:v,refresh:T,saveProblem:S,deleteProblem:C}=$t(Nfe);G.useEffect(()=>{T().catch(console.error)},[T]);const _=E=>{try{return Os(t,{x:E})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},M=(E,b,D,I)=>{if(D%2!==0)throw new Error("n ต้องเป็นจำนวนคู่เท่านั้น");const F=(b-E)/D;let O=I(E)+I(b);const P=[{i:0,x:E,fx:I(E)}];for(let $=1;$<D;$++){const L=E+$*F,q=I(L);O+=$%2===0?2*q:4*q,P.push({i:$,x:L,fx:q})}return P.push({i:D,x:b,fx:I(b)}),{I:F/3*O,h:F,rows:P}},y=()=>{try{const{I:E,h:b,rows:D}=M(r,a,s,_);o(E),m(D),f(`สถานะ: คำนวณสำเร็จ (h = ${Re(b)})`)}catch(E){console.error(E),o("-"),f("สถานะ: "+(E.message||"เกิดข้อผิดพลาดในการคำนวณ")),m([])}},x=()=>{e("x^2 + 1"),n(0),i(2),u(4),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},w=async()=>{try{await S({expr:t,a:r,b:a,n:s,method:"simpson"}),alert("บันทึกแล้ว!")}catch(E){alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},g=E=>{e(E.expr),n(E.a),i(E.b),u(E.n)},N=E=>{confirm("ลบโจทย์นี้ไหม?")&&C(E.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Simpson's Rule (1/3)",subtitle:"การอินทิเกรตเชิงตัวเลขด้วย Simpson’s Composite Rule"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),p.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),p.jsx("input",{type:"number",value:r,onChange:E=>n(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),p.jsx("input",{type:"number",value:a,onChange:E=>i(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n (คู่)"}),p.jsx("input",{type:"number",value:s,onChange:E=>u(Math.max(2,parseInt(E.target.value)||2)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:c}),p.jsx(Lt,{problems:h,onLoad:g,onDelete:N,removingIds:v})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Simpson’s 1/3 Rule:",p.jsx("br",{}),"I = (h / 3) [f(x₀) + 4∑f(xᵢ_คี่) + 2∑f(xᵢ_คู่) + f(xₙ)]"]}),d.length>0&&p.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:p.jsxs("table",{className:"min-w-full border border-slate-700",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700",children:[p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"i"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"xᵢ"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f(xᵢ)"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"Weight"})]})}),p.jsx("tbody",{children:d.map(E=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:E.i}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(E.x)}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(E.fx)}),p.jsx("td",{className:"px-2 py-1 border border-slate-700 text-center",children:E.i===0||E.i===d.length-1?"1":E.i%2===0?"2":"4"})]},E.i))})]})}),l!=="-"&&p.jsx("div",{className:"text-sm text-gray-300",children:p.jsxs("p",{children:["ค่าประมาณของ I ≈ ",p.jsx("b",{children:Re(l)})]})})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const x1="problems_composite_simpson";async function IP(){const t=Ft(Ue(Ce,x1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function PP(t){return jt(Ue(Ce,x1),{...t,method:"composite_simpson",createdAt:kt()})}async function b1(t){return Bt(Tt(Ce,x1,t))}const Efe=IP,Sfe=PP,Afe=b1,Dfe=b1,Cfe=Object.freeze(Object.defineProperty({__proto__:null,del:Dfe,deleteCompositeSimpsonProblem:b1,getCompositeSimpsonProblems:IP,getProblems:Efe,remove:Afe,save:Sfe,saveCompositeSimpsonProblem:PP},Symbol.toStringTag,{value:"Module"}));function Tfe(){const[t,e]=G.useState("x^2 + 1"),[r,n]=G.useState(0),[a,i]=G.useState(2),[s,u]=G.useState(4),[l,o]=G.useState("-"),[c,f]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=G.useState([]),{problems:h,removingIds:v,refresh:T,saveProblem:S,deleteProblem:C}=$t(Cfe);G.useEffect(()=>{T().catch(console.error)},[T]);const _=E=>{try{return Os(t,{x:E})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},M=(E,b,D,I)=>{if(D%2!==0)throw new Error("n ต้องเป็นจำนวนคู่เท่านั้น");const F=(b-E)/D;let O=I(E)+I(b);const P=[{i:0,x:E,fx:I(E)}];for(let $=1;$<D;$++){const L=E+$*F,q=I(L);O+=$%2===0?2*q:4*q,P.push({i:$,x:L,fx:q})}return P.push({i:D,x:b,fx:I(b)}),{I:F/3*O,h:F,rows:P}},y=()=>{try{const{I:E,h:b,rows:D}=M(r,a,s,_);o(E),m(D),f(`สถานะ: คำนวณสำเร็จ (h = ${Re(b)})`)}catch(E){console.error(E),o("-"),f("สถานะ: "+(E.message||"เกิดข้อผิดพลาดในการคำนวณ")),m([])}},x=()=>{e("x^2 + 1"),n(0),i(2),u(4),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},w=async()=>{try{await S({expr:t,a:r,b:a,n:s,method:"composite_simpson"}),alert("บันทึกแล้ว!")}catch(E){alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},g=E=>{e(E.expr),n(E.a),i(E.b),u(E.n)},N=E=>{confirm("ลบโจทย์นี้ไหม?")&&C(E.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Composite Simpson’s Rule (1/3)",subtitle:"การอินทิเกรตเชิงตัวเลขแบบหลายช่วงด้วย Simpson’s Rule"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),p.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),p.jsx("input",{type:"number",value:r,onChange:E=>n(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),p.jsx("input",{type:"number",value:a,onChange:E=>i(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n (คู่)"}),p.jsx("input",{type:"number",value:s,onChange:E=>u(Math.max(2,parseInt(E.target.value)||2)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:c}),p.jsx(Lt,{problems:h,onLoad:g,onDelete:N,removingIds:v})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"สูตร: I = (h/3) [f(x₀) + 4∑f(xᵢ_คี่) + 2∑f(xᵢ_คู่) + f(xₙ)] โดย h = (b - a)/n, n ต้องเป็นจำนวนคู่"}),d.length>0&&p.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:p.jsxs("table",{className:"min-w-full border border-slate-700",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700",children:[p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"i"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"xᵢ"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"f(xᵢ)"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"Weight"})]})}),p.jsx("tbody",{children:d.map(E=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:E.i}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(E.x)}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(E.fx)}),p.jsx("td",{className:"px-2 py-1 border border-slate-700 text-center",children:E.i===0||E.i===d.length-1?"1":E.i%2===0?"2":"4"})]},E.i))})]})}),l!=="-"&&p.jsx("div",{className:"text-sm text-gray-300",children:p.jsxs("p",{children:["ค่าประมาณของ I ≈ ",p.jsx("b",{children:Re(l)})]})})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const w1="problems_first_divided";async function FP(){const t=Ft(Ue(Ce,w1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function RP(t){return jt(Ue(Ce,w1),{...t,method:"first_divided",createdAt:kt()})}async function N1(t){return Bt(Tt(Ce,w1,t))}const Mfe=FP,Ife=RP,Pfe=N1,Ffe=N1,Rfe=Object.freeze(Object.defineProperty({__proto__:null,del:Ffe,deleteFirstDividedProblem:N1,getFirstDividedProblems:FP,getProblems:Mfe,remove:Pfe,save:Ife,saveFirstDividedProblem:RP},Symbol.toStringTag,{value:"Module"}));function Ofe(){const[t,e]=G.useState(1),[r,n]=G.useState(2),[a,i]=G.useState(2),[s,u]=G.useState(5),[l,o]=G.useState(1.5),[c,f]=G.useState("-"),[d,m]=G.useState("-"),[h,v]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:T,removingIds:S,refresh:C,saveProblem:_,deleteProblem:M}=$t(Rfe);G.useEffect(()=>{C().catch(console.error)},[C]);const y=(b,D,I,F,O)=>{const P=(F-I)/(D-b),z=I+P*(O-b);return{f01:P,Px:z}},x=()=>{try{const{f01:b,Px:D}=y(t,r,a,s,l);m(b),f(D),v("สถานะ: คำนวณเสร็จสิ้น")}catch(b){console.error(b),v("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},w=()=>{e(1),n(2),i(2),u(5),o(1.5),f("-"),m("-"),v("สถานะ: รีเซ็ตแล้ว")},g=async()=>{try{await _({x0:t,x1:r,fx0:a,fx1:s,x:l,method:"first_divided"}),alert("บันทึกแล้ว!")}catch(b){alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},N=b=>{e(b.x0),n(b.x1),i(b.fx0),u(b.fx1),o(b.x)},E=b=>{confirm("ลบโจทย์นี้ไหม?")&&M(b.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"First Divided-Difference",subtitle:"การประมาณเชิงเส้นด้วย Newton’s First Divided-Difference"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),p.jsx("input",{type:"number",value:t,onChange:b=>e(parseFloat(b.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x₀)"}),p.jsx("input",{type:"number",value:a,onChange:b=>i(parseFloat(b.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₁"}),p.jsx("input",{type:"number",value:r,onChange:b=>n(parseFloat(b.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x₁)"}),p.jsx("input",{type:"number",value:s,onChange:b=>u(parseFloat(b.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),p.jsx("input",{type:"number",value:l,onChange:b=>o(parseFloat(b.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:w,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:h}),p.jsx(Lt,{problems:T,onLoad:N,onDelete:E,removingIds:S})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร: f[x₀, x₁] = (f(x₁) - f(x₀)) / (x₁ - x₀)",p.jsx("br",{}),"P₁(x) = f(x₀) + f[x₀, x₁](x - x₀)"]}),d!=="-"&&p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsxs("p",{children:["f[x₀, x₁] = ",Re(d)]}),p.jsxs("p",{className:"mt-1",children:["f(",l,") ≈ ",p.jsx("b",{children:Re(c)})]})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const _1="problems_second_divided";async function OP(){const t=Ft(Ue(Ce,_1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function BP(t){return jt(Ue(Ce,_1),{...t,method:"second_divided",createdAt:kt()})}async function E1(t){return Bt(Tt(Ce,_1,t))}const Bfe=OP,jfe=BP,kfe=E1,$fe=E1,Lfe=Object.freeze(Object.defineProperty({__proto__:null,del:$fe,deleteSecondDividedProblem:E1,getProblems:Bfe,getSecondDividedProblems:OP,remove:kfe,save:jfe,saveSecondDividedProblem:BP},Symbol.toStringTag,{value:"Module"}));function zfe(){const[t,e]=G.useState(1),[r,n]=G.useState(2),[a,i]=G.useState(3),[s,u]=G.useState(2),[l,o]=G.useState(5),[c,f]=G.useState(10),[d,m]=G.useState(2.5),[h,v]=G.useState("-"),[T,S]=G.useState("-"),[C,_]=G.useState("-"),[M,y]=G.useState("-"),[x,w]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:g,removingIds:N,refresh:E,saveProblem:b,deleteProblem:D}=$t(Lfe);G.useEffect(()=>{E().catch(console.error)},[E]);const I=(L,q,ae,j,K,V,pe)=>{const ue=(K-j)/(q-L),fe=(V-K)/(ae-q),H=(fe-ue)/(ae-L),J=j+ue*(pe-L)+H*(pe-L)*(pe-q);return{f01:ue,f12:fe,f012:H,Px:J}},F=()=>{try{const{f01:L,f12:q,f012:ae,Px:j}=I(t,r,a,s,l,c,d);v(L),S(q),_(ae),y(j),w("สถานะ: คำนวณสำเร็จ")}catch(L){console.error(L),w("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},O=()=>{e(1),n(2),i(3),u(2),o(5),f(10),m(2.5),y("-"),v("-"),S("-"),_("-"),w("สถานะ: รีเซ็ตแล้ว")},P=async()=>{try{await b({x0:t,x1:r,x2:a,fx0:s,fx1:l,fx2:c,x:d,method:"second_divided"}),alert("บันทึกแล้ว!")}catch(L){alert("บันทึกไม่สำเร็จ: "+((L==null?void 0:L.message)||String(L)))}},z=L=>{e(L.x0),n(L.x1),i(L.x2),u(L.fx0),o(L.fx1),f(L.fx2),m(L.x)},$=L=>{confirm("ลบโจทย์นี้ไหม?")&&D(L.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Second Divided-Difference",subtitle:"การประมาณเชิงกำลังสองด้วย Newton’s Second Divided-Difference"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),p.jsx("input",{type:"number",value:t,onChange:L=>e(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1 mt-1",children:"f(x₀)"}),p.jsx("input",{type:"number",value:s,onChange:L=>u(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₁"}),p.jsx("input",{type:"number",value:r,onChange:L=>n(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1 mt-1",children:"f(x₁)"}),p.jsx("input",{type:"number",value:l,onChange:L=>o(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₂"}),p.jsx("input",{type:"number",value:a,onChange:L=>i(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1 mt-1",children:"f(x₂)"}),p.jsx("input",{type:"number",value:c,onChange:L=>f(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),p.jsx("input",{type:"number",value:d,onChange:L=>m(parseFloat(L.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:F,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:O,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:P,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:x}),p.jsx(Lt,{problems:g,onLoad:z,onDelete:$,removingIds:N})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร:",p.jsx("br",{}),"f[x₀, x₁] = (f₁ - f₀) / (x₁ - x₀)",p.jsx("br",{}),"f[x₁, x₂] = (f₂ - f₁) / (x₂ - x₁)",p.jsx("br",{}),"f[x₀, x₁, x₂] = (f[x₁, x₂] - f[x₀, x₁]) / (x₂ - x₀)",p.jsx("br",{}),"P₂(x) = f₀ + f[x₀,x₁](x-x₀) + f[x₀,x₁,x₂](x-x₀)(x-x₁)"]}),C!=="-"&&p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsxs("p",{children:["f[x₀, x₁] = ",Re(h)]}),p.jsxs("p",{children:["f[x₁, x₂] = ",Re(T)]}),p.jsxs("p",{children:["f[x₀, x₁, x₂] = ",Re(C)]}),p.jsxs("p",{className:"mt-2",children:["f(",d,") ≈ ",p.jsx("b",{children:Re(M)})]})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const S1="problems_forward_divided";async function jP(){const t=Ft(Ue(Ce,S1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function kP(t){return jt(Ue(Ce,S1),{...t,method:"forward_divided",createdAt:kt()})}async function A1(t){return Bt(Tt(Ce,S1,t))}const Vfe=jP,Ufe=kP,qfe=A1,Hfe=A1,Gfe=Object.freeze(Object.defineProperty({__proto__:null,del:Hfe,deleteForwardDividedProblem:A1,getForwardDividedProblems:jP,getProblems:Vfe,remove:qfe,save:Ufe,saveForwardDividedProblem:kP},Symbol.toStringTag,{value:"Module"}));function Wfe(){const[t,e]=G.useState([1,2,3,4]),[r,n]=G.useState([1,8,27,64]),[a,i]=G.useState(2.5),[s,u]=G.useState("-"),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=G.useState([]),{problems:d,removingIds:m,refresh:h,saveProblem:v,deleteProblem:T}=$t(Gfe);G.useEffect(()=>{h().catch(console.error)},[h]);const S=g=>{const N=g.length,E=[g.slice()];for(let b=1;b<N;b++){const D=E[b-1],I=[];for(let F=0;F<D.length-1;F++)I.push(D[F+1]-D[F]);E.push(I)}return E},C=(g,N,E)=>{const b=g.length,D=g[1]-g[0],I=S(N),F=(E-g[0])/D;let O=N[0];for(let P=1;P<b;P++){let z=I[P][0];for(let $=0;$<P;$++)z*=F-$;O+=z/ei(P)}return{result:O,table:I}},_=()=>{try{const{result:g,table:N}=C(t,r,a);u(g),f(N),o("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u("-"),f([])}},M=()=>{e([1,2,3,4]),n([1,8,27,64]),i(2.5),u("-"),o("สถานะ: รีเซ็ตแล้ว"),f([])},y=async()=>{try{const g={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"forward_divided"};await v(g),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},x=g=>{try{e(JSON.parse(g.x)),n(JSON.parse(g.y)),i(g.xFind)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},w=g=>{confirm("ลบโจทย์นี้ไหม?")&&T(g.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Forward Divided-Difference",subtitle:"Newton’s Forward Difference Interpolation"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),p.jsx("textarea",{value:t.join(", "),onChange:g=>e(g.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),p.jsx("textarea",{value:r.join(", "),onChange:g=>n(g.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),p.jsx("input",{type:"number",value:a,onChange:g=>i(parseFloat(g.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:_,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:M,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:l}),p.jsx(Lt,{problems:d,onLoad:x,onDelete:w,removingIds:m})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Newton’s Forward Difference:",p.jsx("br",{}),"P(x) = f₀ + uΔf₀ + (u(u−1)/2!)Δ²f₀ + (u(u−1)(u−2)/3!)Δ³f₀ + ...",p.jsx("br",{}),"โดย u = (x - x₀)/h"]}),c.length>0&&p.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:p.jsxs("table",{className:"min-w-full border border-slate-700",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700",children:[p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"Δⁿ f₀"})]})}),p.jsx("tbody",{children:c.map((g,N)=>p.jsxs("tr",{children:[p.jsxs("td",{className:"px-2 py-1 border border-slate-700 text-center",children:["Δ",N===0?"⁰":N]}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:g[0]!==void 0?Re(g[0]):"-"})]},N))})]})}),s!=="-"&&p.jsxs("div",{className:"text-sm text-gray-300",children:["f(",a,") ≈ ",p.jsx("b",{children:Re(s)})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const D1="problems_backward_divided";async function $P(){const t=Ft(Ue(Ce,D1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function LP(t){return jt(Ue(Ce,D1),{...t,method:"backward_divided",createdAt:kt()})}async function C1(t){return Bt(Tt(Ce,D1,t))}const Qfe=$P,Xfe=LP,Kfe=C1,Jfe=C1,Yfe=Object.freeze(Object.defineProperty({__proto__:null,del:Jfe,deleteBackwardDividedProblem:C1,getBackwardDividedProblems:$P,getProblems:Qfe,remove:Kfe,save:Xfe,saveBackwardDividedProblem:LP},Symbol.toStringTag,{value:"Module"}));function Zfe(){const[t,e]=G.useState([1,2,3,4]),[r,n]=G.useState([1,8,27,64]),[a,i]=G.useState(3.5),[s,u]=G.useState("-"),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=G.useState([]),{problems:d,removingIds:m,refresh:h,saveProblem:v,deleteProblem:T}=$t(Yfe);G.useEffect(()=>{h().catch(console.error)},[h]);const S=g=>{const N=g.length,E=[g.slice()];for(let b=1;b<N;b++){const D=E[b-1],I=[];for(let F=1;F<D.length;F++)I.push(D[F]-D[F-1]);E.push(I)}return E},C=(g,N,E)=>{const b=g.length,D=g[1]-g[0],I=S(N),F=(E-g[b-1])/D;let O=N[b-1];for(let P=1;P<b;P++){let z=I[P][I[P].length-1];for(let $=0;$<P;$++)z*=F+$;O+=z/ei(P)}return{result:O,table:I}},_=()=>{try{const{result:g,table:N}=C(t,r,a);u(g),f(N),o("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),u("-"),f([])}},M=()=>{e([1,2,3,4]),n([1,8,27,64]),i(3.5),u("-"),o("สถานะ: รีเซ็ตแล้ว"),f([])},y=async()=>{try{const g={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"backward_divided"};await v(g),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},x=g=>{try{e(JSON.parse(g.x)),n(JSON.parse(g.y)),i(g.xFind)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},w=g=>{confirm("ลบโจทย์นี้ไหม?")&&T(g.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Backward Divided-Difference",subtitle:"Newton’s Backward Difference Interpolation"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),p.jsx("textarea",{value:t.join(", "),onChange:g=>e(g.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),p.jsx("textarea",{value:r.join(", "),onChange:g=>n(g.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),p.jsx("input",{type:"number",value:a,onChange:g=>i(parseFloat(g.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:_,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:M,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:l}),p.jsx(Lt,{problems:d,onLoad:x,onDelete:w,removingIds:m})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Newton’s Backward Difference:",p.jsx("br",{}),"P(x) = fₙ + u∇fₙ + (u(u+1)/2!)∇²fₙ + (u(u+1)(u+2)/3!)∇³fₙ + ...",p.jsx("br",{}),"โดย u = (x - xₙ)/h"]}),c.length>0&&p.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:p.jsxs("table",{className:"min-w-full border border-slate-700",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700",children:[p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"∇ⁿ fₙ"})]})}),p.jsx("tbody",{children:c.map((g,N)=>p.jsxs("tr",{children:[p.jsxs("td",{className:"px-2 py-1 border border-slate-700 text-center",children:["∇",N===0?"⁰":N]}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:g[g.length-1]!==void 0?Re(g[g.length-1]):"-"})]},N))})]})}),s!=="-"&&p.jsxs("div",{className:"text-sm text-gray-300",children:["f(",a,") ≈ ",p.jsx("b",{children:Re(s)})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const T1="problems_central_divided";async function zP(){const t=Ft(Ue(Ce,T1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function VP(t){return jt(Ue(Ce,T1),{...t,method:"central_divided",createdAt:kt()})}async function M1(t){return Bt(Tt(Ce,T1,t))}const ede=zP,tde=VP,rde=M1,nde=M1,ade=Object.freeze(Object.defineProperty({__proto__:null,del:nde,deleteCentralDividedProblem:M1,getCentralDividedProblems:zP,getProblems:ede,remove:rde,save:tde,saveCentralDividedProblem:VP},Symbol.toStringTag,{value:"Module"}));function ide(){const[t,e]=G.useState([1,2,3,4,5]),[r,n]=G.useState([1,8,27,64,125]),[a,i]=G.useState(3),[s,u]=G.useState("-"),[l,o]=G.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=G.useState([]),{problems:d,removingIds:m,refresh:h,saveProblem:v,deleteProblem:T}=$t(ade);G.useEffect(()=>{h().catch(console.error)},[h]);const S=g=>{const N=g.length,E=[g.slice()];for(let b=1;b<N;b++){const D=E[b-1],I=[];for(let F=0;F<D.length-1;F++)I.push(D[F+1]-D[F]);E.push(I)}return E},C=(g,N,E)=>{const b=g.length;if(b<3)throw new Error("ต้องมีข้อมูลอย่างน้อย 3 จุด");const D=g[1]-g[0],I=Math.floor(b/2),F=(E-g[I])/D,O=S(N);let P=N[I];for(let z=1;z<b&&z<6;z++)if(z%2!==0){const $=Math.floor(z/2);let L=F;for(let q=1;q<z;q++)L*=(F*F-q*q)/(2*q+1);L*=O[z][I-$],P+=L/ei(z)}else{const $=z/2;let L=1;for(let q=0;q<$;q++)L*=F*F-q*q;L*=O[z][I-$],P+=L/ei(z)}return{result:P,table:O,u:F,h:D,m:I}},_=()=>{try{const{result:g,table:N}=C(t,r,a);u(g),f(N),o("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),o("สถานะ: "+(g.message||"เกิดข้อผิดพลาดในการคำนวณ")),u("-"),f([])}},M=()=>{e([1,2,3,4,5]),n([1,8,27,64,125]),i(3),u("-"),o("สถานะ: รีเซ็ตแล้ว"),f([])},y=async()=>{try{const g={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"central_divided"};await v(g),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},x=g=>{try{e(JSON.parse(g.x)),n(JSON.parse(g.y)),i(g.xFind)}catch{alert("ไม่สามารถโหลดโจทย์ได้")}},w=g=>{confirm("ลบโจทย์นี้ไหม?")&&T(g.id)};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsx(Mt,{title:"Central Divided-Difference",subtitle:"Newton’s Central Difference Interpolation"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),p.jsx("textarea",{value:t.join(", "),onChange:g=>e(g.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),p.jsx("textarea",{value:r.join(", "),onChange:g=>n(g.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),p.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),p.jsx("input",{type:"number",value:a,onChange:g=>i(parseFloat(g.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),p.jsxs("div",{className:"flex gap-3 mb-3",children:[p.jsx("button",{onClick:_,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),p.jsx("button",{onClick:M,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),p.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),p.jsx("div",{className:"text-sm mb-2",children:l}),p.jsx(Lt,{problems:d,onLoad:x,onDelete:w,removingIds:m})]}),p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[p.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),p.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["สูตร Newton’s Central Difference:",p.jsx("br",{}),"P(x) = fₘ + uδfₘ + (u(u−1)/2!)δ²fₘ + (u(u−1)(u+1)/3!)δ³fₘ + …",p.jsx("br",{}),"โดย u = (x − xₘ)/h"]}),c.length>0&&p.jsx("div",{className:"overflow-x-auto mb-3 text-sm text-gray-300",children:p.jsxs("table",{className:"min-w-full border border-slate-700",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-700",children:[p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"ลำดับ"}),p.jsx("th",{className:"px-2 py-1 border border-slate-600",children:"δⁿ fₘ"})]})}),p.jsx("tbody",{children:c.map((g,N)=>p.jsxs("tr",{children:[p.jsxs("td",{className:"px-2 py-1 border border-slate-700 text-center",children:["δ",N===0?"⁰":N]}),p.jsx("td",{className:"px-2 py-1 border border-slate-700",children:Re(g[Math.floor(g.length/2)])})]},N))})]})}),s!=="-"&&p.jsxs("div",{className:"text-sm text-gray-300",children:["f(",a,") ≈ ",p.jsx("b",{children:Re(s)})]})]})]}),p.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function sde(){return p.jsx(I6,{basename:"/Numerical-web",children:p.jsxs(E6,{children:[p.jsx(wt,{path:"/",element:p.jsx(B6,{})}),p.jsx(wt,{path:"/bisection",element:p.jsx(G8,{})}),p.jsx(wt,{path:"/falseposition",element:p.jsx(K8,{})}),p.jsx(wt,{path:"/onepoint",element:p.jsx(J8,{})}),p.jsx(wt,{path:"/taylor",element:p.jsx(Bue,{})}),p.jsx(wt,{path:"/newtonraphson",element:p.jsx(Lue,{})}),p.jsx(wt,{path:"/secant",element:p.jsx(que,{})}),p.jsx(wt,{path:"/cramer",element:p.jsx(Kue,{})}),p.jsx(wt,{path:"/gaussian",element:p.jsx(rle,{})}),p.jsx(wt,{path:"/gaussjordan",element:p.jsx(ule,{})}),p.jsx(wt,{path:"/matrixinversion",element:p.jsx(hle,{})}),p.jsx(wt,{path:"/ludecomposition",element:p.jsx(ble,{})}),p.jsx(wt,{path:"/cholesky",element:p.jsx(Ale,{})}),p.jsx(wt,{path:"/jacobi",element:p.jsx(Ple,{})}),p.jsx(wt,{path:"/gaussseidel",element:p.jsx(kle,{})}),p.jsx(wt,{path:"/conjugategradient",element:p.jsx(qle,{})}),p.jsx(wt,{path:"/lagrangeinterp",element:p.jsx(Kle,{})}),p.jsx(wt,{path:"/linearinterp",element:p.jsx(rce,{})}),p.jsx(wt,{path:"/quadraticinterp",element:p.jsx(uce,{})}),p.jsx(wt,{path:"/polynomialinterp",element:p.jsx(hce,{})}),p.jsx(wt,{path:"/linearspline",element:p.jsx(bce,{})}),p.jsx(wt,{path:"/quadraticspline",element:p.jsx(Ace,{})}),p.jsx(wt,{path:"/cubicspline",element:p.jsx(Pce,{})}),p.jsx(wt,{path:"/singlelinear",element:p.jsx(kce,{})}),p.jsx(wt,{path:"/multiplelinear",element:p.jsx(Wce,{})}),p.jsx(wt,{path:"/polynomialreg",element:p.jsx(Zce,{})}),p.jsx(wt,{path:"/nonlinearreg",element:p.jsx(ife,{})}),p.jsx(wt,{path:"/singletrapezoidal",element:p.jsx(ffe,{})}),p.jsx(wt,{path:"/compositetrapezoidal",element:p.jsx(gfe,{})}),p.jsx(wt,{path:"/simpsonsrule",element:p.jsx(_fe,{})}),p.jsx(wt,{path:"/compositesimpson",element:p.jsx(Tfe,{})}),p.jsx(wt,{path:"/firstdivided",element:p.jsx(Ofe,{})}),p.jsx(wt,{path:"/seconddivided",element:p.jsx(zfe,{})}),p.jsx(wt,{path:"/forwarddivided",element:p.jsx(Wfe,{})}),p.jsx(wt,{path:"/backwarddivided",element:p.jsx(Zfe,{})}),p.jsx(wt,{path:"/centraldivided",element:p.jsx(ide,{})})]})})}_C(document.getElementById("root")).render(p.jsx(G.StrictMode,{children:p.jsx(sde,{})}));
