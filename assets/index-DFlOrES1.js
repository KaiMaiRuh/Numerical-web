function IE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function SE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pg={exports:{}},yl={},Ng={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=Symbol.for("react.element"),AE=Symbol.for("react.portal"),CE=Symbol.for("react.fragment"),RE=Symbol.for("react.strict_mode"),PE=Symbol.for("react.profiler"),NE=Symbol.for("react.provider"),kE=Symbol.for("react.context"),VE=Symbol.for("react.forward_ref"),DE=Symbol.for("react.suspense"),bE=Symbol.for("react.memo"),ME=Symbol.for("react.lazy"),np=Symbol.iterator;function OE(t){return t===null||typeof t!="object"?null:(t=np&&t[np]||t["@@iterator"],typeof t=="function"?t:null)}var kg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vg=Object.assign,Dg={};function zs(t,e,n){this.props=t,this.context=e,this.refs=Dg,this.updater=n||kg}zs.prototype.isReactComponent={};zs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bg(){}bg.prototype=zs.prototype;function vh(t,e,n){this.props=t,this.context=e,this.refs=Dg,this.updater=n||kg}var _h=vh.prototype=new bg;_h.constructor=vh;Vg(_h,zs.prototype);_h.isPureReactComponent=!0;var rp=Array.isArray,Mg=Object.prototype.hasOwnProperty,Eh={current:null},Og={key:!0,ref:!0,__self:!0,__source:!0};function Lg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Mg.call(e,r)&&!Og.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Eo,type:t,key:i,ref:o,props:s,_owner:Eh.current}}function LE(t,e){return{$$typeof:Eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eo}function FE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sp=/\/+/g;function _u(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FE(""+t.key):e.toString(36)}function da(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Eo:case AE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+_u(o,0):r,rp(s)?(n="",t!=null&&(n=t.replace(sp,"$&/")+"/"),da(s,e,n,"",function(h){return h})):s!=null&&(wh(s)&&(s=LE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",rp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+_u(i,l);o+=da(i,e,n,u,s)}else if(u=OE(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+_u(i,l++),o+=da(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qo(t,e,n){if(t==null)return t;var r=[],s=0;return da(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},pa={transition:null},UE={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:pa,ReactCurrentOwner:Eh};function Fg(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:qo,forEach:function(t,e,n){qo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qo(t,function(){e++}),e},toArray:function(t){return qo(t,function(e){return e})||[]},only:function(t){if(!wh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=zs;oe.Fragment=CE;oe.Profiler=PE;oe.PureComponent=vh;oe.StrictMode=RE;oe.Suspense=DE;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;oe.act=Fg;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Eh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Mg.call(e,u)&&!Og.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Eo,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:kE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NE,_context:t},t.Consumer=t};oe.createElement=Lg;oe.createFactory=function(t){var e=Lg.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:VE,render:t}};oe.isValidElement=wh;oe.lazy=function(t){return{$$typeof:ME,_payload:{_status:-1,_result:t},_init:jE}};oe.memo=function(t,e){return{$$typeof:bE,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=pa.transition;pa.transition={};try{t()}finally{pa.transition=e}};oe.unstable_act=Fg;oe.useCallback=function(t,e){return pt.current.useCallback(t,e)};oe.useContext=function(t){return pt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return pt.current.useEffect(t,e)};oe.useId=function(){return pt.current.useId()};oe.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return pt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};oe.useRef=function(t){return pt.current.useRef(t)};oe.useState=function(t){return pt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return pt.current.useTransition()};oe.version="18.3.1";Ng.exports=oe;var M=Ng.exports;const BE=SE(M),zE=IE({__proto__:null,default:BE},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=M,qE=Symbol.for("react.element"),HE=Symbol.for("react.fragment"),WE=Object.prototype.hasOwnProperty,QE=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GE={key:!0,ref:!0,__self:!0,__source:!0};function jg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WE.call(e,r)&&!GE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qE,type:t,key:i,ref:o,props:s,_owner:QE.current}}yl.Fragment=HE;yl.jsx=jg;yl.jsxs=jg;Pg.exports=yl;var E=Pg.exports,Ug={exports:{}},Pt={},Bg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var z=O.length;O.push(F);e:for(;0<z;){var J=z-1>>>1,ee=O[J];if(0<s(ee,F))O[J]=F,O[z]=ee,z=J;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],z=O.pop();if(z!==F){O[0]=z;e:for(var J=0,ee=O.length,Ve=ee>>>1;J<Ve;){var me=2*(J+1)-1,Se=O[me],ge=me+1,Ae=O[ge];if(0>s(Se,z))ge<ee&&0>s(Ae,Se)?(O[J]=Ae,O[ge]=z,J=ge):(O[J]=Se,O[me]=z,J=me);else if(ge<ee&&0>s(Ae,z))O[J]=Ae,O[ge]=z,J=ge;else break e}}return F}function s(O,F){var z=O.sortIndex-F.sortIndex;return z!==0?z:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,p=null,m=3,w=!1,N=!1,P=!1,V=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(O){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=O)r(h),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(h)}}function b(O){if(P=!1,R(O),!N)if(n(u)!==null)N=!0,H(U);else{var F=n(h);F!==null&&B(b,F.startTime-O)}}function U(O,F){N=!1,P&&(P=!1,A(y),y=-1),w=!0;var z=m;try{for(R(F),p=n(u);p!==null&&(!(p.expirationTime>F)||O&&!I());){var J=p.callback;if(typeof J=="function"){p.callback=null,m=p.priorityLevel;var ee=J(p.expirationTime<=F);F=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(u)&&r(u),R(F)}else r(u);p=n(u)}if(p!==null)var Ve=!0;else{var me=n(h);me!==null&&B(b,me.startTime-F),Ve=!1}return Ve}finally{p=null,m=z,w=!1}}var q=!1,T=null,y=-1,S=5,C=-1;function I(){return!(t.unstable_now()-C<S)}function x(){if(T!==null){var O=t.unstable_now();C=O;var F=!0;try{F=T(!0,O)}finally{F?_():(q=!1,T=null)}}else q=!1}var _;if(typeof v=="function")_=function(){v(x)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,se=Q.port2;Q.port1.onmessage=x,_=function(){se.postMessage(null)}}else _=function(){V(x,0)};function H(O){T=O,q||(q=!0,_())}function B(O,F){y=V(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,H(U))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var z=m;m=F;try{return O()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=m;m=O;try{return F()}finally{m=z}},t.unstable_scheduleCallback=function(O,F,z){var J=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?J+z:J):z=J,O){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=z+ee,O={id:d++,callback:F,priorityLevel:O,startTime:z,expirationTime:ee,sortIndex:-1},z>J?(O.sortIndex=z,e(h,O),n(u)===null&&O===n(h)&&(P?(A(y),y=-1):P=!0,B(b,z-J))):(O.sortIndex=ee,e(u,O),N||w||(N=!0,H(U))),O},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(O){var F=m;return function(){var z=m;m=F;try{return O.apply(this,arguments)}finally{m=z}}}})(zg);Bg.exports=zg;var KE=Bg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE=M,Rt=KE;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $g=new Set,$i={};function $r(t,e){Rs(t,e),Rs(t+"Capture",e)}function Rs(t,e){for($i[t]=e,t=0;t<e.length;t++)$g.add(e[t])}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tc=Object.prototype.hasOwnProperty,YE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ip={},op={};function JE(t){return tc.call(op,t)?!0:tc.call(ip,t)?!1:YE.test(t)?op[t]=!0:(ip[t]=!0,!1)}function ZE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ew(t,e,n,r){if(e===null||typeof e>"u"||ZE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Th=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Th,xh);nt[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Th,xh);nt[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Th,xh);nt[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ih(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ew(e,n,s,r)&&(n=null),r||s===null?JE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nn=XE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ho=Symbol.for("react.element"),os=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),nc=Symbol.for("react.profiler"),qg=Symbol.for("react.provider"),Hg=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),rc=Symbol.for("react.suspense"),sc=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Wg=Symbol.for("react.offscreen"),ap=Symbol.iterator;function pi(t){return t===null||typeof t!="object"?null:(t=ap&&t[ap]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Eu;function Ti(t){if(Eu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eu=e&&e[1]||""}return`
`+Eu+t}var wu=!1;function Tu(t,e){if(!t||wu)return"";wu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{wu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ti(t):""}function tw(t){switch(t.tag){case 5:return Ti(t.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 2:case 15:return t=Tu(t.type,!1),t;case 11:return t=Tu(t.type.render,!1),t;case 1:return t=Tu(t.type,!0),t;default:return""}}function ic(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case as:return"Fragment";case os:return"Portal";case nc:return"Profiler";case Sh:return"StrictMode";case rc:return"Suspense";case sc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hg:return(t.displayName||"Context")+".Consumer";case qg:return(t._context.displayName||"Context")+".Provider";case Ah:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ch:return e=t.displayName||null,e!==null?e:ic(t.type)||"Memo";case Un:e=t._payload,t=t._init;try{return ic(t(e))}catch{}}return null}function nw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ic(e);case 8:return e===Sh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rw(t){var e=Qg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wo(t){t._valueTracker||(t._valueTracker=rw(t))}function Gg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ka(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oc(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kg(t,e){e=e.checked,e!=null&&Ih(t,"checked",e,!1)}function ac(t,e){Kg(t,e);var n=lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lc(t,e.type,n):e.hasOwnProperty("defaultValue")&&lc(t,e.type,lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function up(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lc(t,e,n){(e!=="number"||ka(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xi=Array.isArray;function vs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(xi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lr(n)}}function Xg(t,e){var n=lr(e.value),r=lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qo,Jg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qo=Qo||document.createElement("div"),Qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sw=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(t){sw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pi[e]=Pi[t]})});function Zg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pi.hasOwnProperty(t)&&Pi[t]?(""+e).trim():e+"px"}function ey(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Zg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var iw=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hc(t,e){if(e){if(iw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pc=null,_s=null,Es=null;function fp(t){if(t=xo(t)){if(typeof pc!="function")throw Error($(280));var e=t.stateNode;e&&(e=Tl(e),pc(t.stateNode,t.type,e))}}function ty(t){_s?Es?Es.push(t):Es=[t]:_s=t}function ny(){if(_s){var t=_s,e=Es;if(Es=_s=null,fp(t),e)for(t=0;t<e.length;t++)fp(e[t])}}function ry(t,e){return t(e)}function sy(){}var xu=!1;function iy(t,e,n){if(xu)return t(e,n);xu=!0;try{return ry(t,e,n)}finally{xu=!1,(_s!==null||Es!==null)&&(sy(),ny())}}function Hi(t,e){var n=t.stateNode;if(n===null)return null;var r=Tl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var mc=!1;if(xn)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){mc=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{mc=!1}function ow(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var Ni=!1,Va=null,Da=!1,gc=null,aw={onError:function(t){Ni=!0,Va=t}};function lw(t,e,n,r,s,i,o,l,u){Ni=!1,Va=null,ow.apply(aw,arguments)}function uw(t,e,n,r,s,i,o,l,u){if(lw.apply(this,arguments),Ni){if(Ni){var h=Va;Ni=!1,Va=null}else throw Error($(198));Da||(Da=!0,gc=h)}}function qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dp(t){if(qr(t)!==t)throw Error($(188))}function cw(t){var e=t.alternate;if(!e){if(e=qr(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dp(s),t;if(i===r)return dp(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function ay(t){return t=cw(t),t!==null?ly(t):null}function ly(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ly(t);if(e!==null)return e;t=t.sibling}return null}var uy=Rt.unstable_scheduleCallback,pp=Rt.unstable_cancelCallback,hw=Rt.unstable_shouldYield,fw=Rt.unstable_requestPaint,Oe=Rt.unstable_now,dw=Rt.unstable_getCurrentPriorityLevel,Ph=Rt.unstable_ImmediatePriority,cy=Rt.unstable_UserBlockingPriority,ba=Rt.unstable_NormalPriority,pw=Rt.unstable_LowPriority,hy=Rt.unstable_IdlePriority,vl=null,cn=null;function mw(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(vl,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:vw,gw=Math.log,yw=Math.LN2;function vw(t){return t>>>=0,t===0?32:31-(gw(t)/yw|0)|0}var Go=64,Ko=4194304;function Ii(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ma(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ii(l):(i&=o,i!==0&&(r=Ii(i)))}else o=n&~s,o!==0?r=Ii(o):i!==0&&(r=Ii(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gt(e),s=1<<n,r|=t[n],e&=~s;return r}function _w(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ew(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=_w(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function yc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fy(){var t=Go;return Go<<=1,!(Go&4194240)&&(Go=64),t}function Iu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gt(e),t[e]=n}function ww(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function dy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var py,kh,my,gy,yy,vc=!1,Xo=[],Gn=null,Kn=null,Xn=null,Wi=new Map,Qi=new Map,zn=[],Tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mp(t,e){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(e.pointerId)}}function gi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xo(e),e!==null&&kh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xw(t,e,n,r,s){switch(e){case"focusin":return Gn=gi(Gn,t,e,n,r,s),!0;case"dragenter":return Kn=gi(Kn,t,e,n,r,s),!0;case"mouseover":return Xn=gi(Xn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wi.set(i,gi(Wi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qi.set(i,gi(Qi.get(i)||null,t,e,n,r,s)),!0}return!1}function vy(t){var e=Nr(t.target);if(e!==null){var n=qr(e);if(n!==null){if(e=n.tag,e===13){if(e=oy(n),e!==null){t.blockedOn=e,yy(t.priority,function(){my(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ma(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_c(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dc=r,n.target.dispatchEvent(r),dc=null}else return e=xo(n),e!==null&&kh(e),t.blockedOn=n,!1;e.shift()}return!0}function gp(t,e,n){ma(t)&&n.delete(e)}function Iw(){vc=!1,Gn!==null&&ma(Gn)&&(Gn=null),Kn!==null&&ma(Kn)&&(Kn=null),Xn!==null&&ma(Xn)&&(Xn=null),Wi.forEach(gp),Qi.forEach(gp)}function yi(t,e){t.blockedOn===e&&(t.blockedOn=null,vc||(vc=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,Iw)))}function Gi(t){function e(s){return yi(s,t)}if(0<Xo.length){yi(Xo[0],t);for(var n=1;n<Xo.length;n++){var r=Xo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gn!==null&&yi(Gn,t),Kn!==null&&yi(Kn,t),Xn!==null&&yi(Xn,t),Wi.forEach(e),Qi.forEach(e),n=0;n<zn.length;n++)r=zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zn.length&&(n=zn[0],n.blockedOn===null);)vy(n),n.blockedOn===null&&zn.shift()}var ws=Nn.ReactCurrentBatchConfig,Oa=!0;function Sw(t,e,n,r){var s=pe,i=ws.transition;ws.transition=null;try{pe=1,Vh(t,e,n,r)}finally{pe=s,ws.transition=i}}function Aw(t,e,n,r){var s=pe,i=ws.transition;ws.transition=null;try{pe=4,Vh(t,e,n,r)}finally{pe=s,ws.transition=i}}function Vh(t,e,n,r){if(Oa){var s=_c(t,e,n,r);if(s===null)bu(t,e,r,La,n),mp(t,r);else if(xw(s,t,e,n,r))r.stopPropagation();else if(mp(t,r),e&4&&-1<Tw.indexOf(t)){for(;s!==null;){var i=xo(s);if(i!==null&&py(i),i=_c(t,e,n,r),i===null&&bu(t,e,r,La,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bu(t,e,r,null,n)}}var La=null;function _c(t,e,n,r){if(La=null,t=Rh(r),t=Nr(t),t!==null)if(e=qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return La=t,null}function _y(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dw()){case Ph:return 1;case cy:return 4;case ba:case pw:return 16;case hy:return 536870912;default:return 16}default:return 16}}var qn=null,Dh=null,ga=null;function Ey(){if(ga)return ga;var t,e=Dh,n=e.length,r,s="value"in qn?qn.value:qn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ga=s.slice(t,1<r?1-r:void 0)}function ya(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yo(){return!0}function yp(){return!1}function Nt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yo:yp,this.isPropagationStopped=yp,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),e}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=Nt($s),To=Ne({},$s,{view:0,detail:0}),Cw=Nt(To),Su,Au,vi,_l=Ne({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vi&&(vi&&t.type==="mousemove"?(Su=t.screenX-vi.screenX,Au=t.screenY-vi.screenY):Au=Su=0,vi=t),Su)},movementY:function(t){return"movementY"in t?t.movementY:Au}}),vp=Nt(_l),Rw=Ne({},_l,{dataTransfer:0}),Pw=Nt(Rw),Nw=Ne({},To,{relatedTarget:0}),Cu=Nt(Nw),kw=Ne({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Vw=Nt(kw),Dw=Ne({},$s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bw=Nt(Dw),Mw=Ne({},$s,{data:0}),_p=Nt(Mw),Ow={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fw[t])?!!e[t]:!1}function Mh(){return jw}var Uw=Ne({},To,{key:function(t){if(t.key){var e=Ow[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mh,charCode:function(t){return t.type==="keypress"?ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bw=Nt(Uw),zw=Ne({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ep=Nt(zw),$w=Ne({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mh}),qw=Nt($w),Hw=Ne({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ww=Nt(Hw),Qw=Ne({},_l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gw=Nt(Qw),Kw=[9,13,27,32],Oh=xn&&"CompositionEvent"in window,ki=null;xn&&"documentMode"in document&&(ki=document.documentMode);var Xw=xn&&"TextEvent"in window&&!ki,wy=xn&&(!Oh||ki&&8<ki&&11>=ki),wp=" ",Tp=!1;function Ty(t,e){switch(t){case"keyup":return Kw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ls=!1;function Yw(t,e){switch(t){case"compositionend":return xy(e);case"keypress":return e.which!==32?null:(Tp=!0,wp);case"textInput":return t=e.data,t===wp&&Tp?null:t;default:return null}}function Jw(t,e){if(ls)return t==="compositionend"||!Oh&&Ty(t,e)?(t=Ey(),ga=Dh=qn=null,ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wy&&e.locale!=="ko"?null:e.data;default:return null}}var Zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zw[t.type]:e==="textarea"}function Iy(t,e,n,r){ty(r),e=Fa(e,"onChange"),0<e.length&&(n=new bh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vi=null,Ki=null;function e1(t){My(t,0)}function El(t){var e=hs(t);if(Gg(e))return t}function t1(t,e){if(t==="change")return e}var Sy=!1;if(xn){var Ru;if(xn){var Pu="oninput"in document;if(!Pu){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),Pu=typeof Ip.oninput=="function"}Ru=Pu}else Ru=!1;Sy=Ru&&(!document.documentMode||9<document.documentMode)}function Sp(){Vi&&(Vi.detachEvent("onpropertychange",Ay),Ki=Vi=null)}function Ay(t){if(t.propertyName==="value"&&El(Ki)){var e=[];Iy(e,Ki,t,Rh(t)),iy(e1,e)}}function n1(t,e,n){t==="focusin"?(Sp(),Vi=e,Ki=n,Vi.attachEvent("onpropertychange",Ay)):t==="focusout"&&Sp()}function r1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return El(Ki)}function s1(t,e){if(t==="click")return El(e)}function i1(t,e){if(t==="input"||t==="change")return El(e)}function o1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:o1;function Xi(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!tc.call(e,s)||!Xt(t[s],e[s]))return!1}return!0}function Ap(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cp(t,e){var n=Ap(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ap(n)}}function Cy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ry(){for(var t=window,e=ka();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ka(t.document)}return e}function Lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function a1(t){var e=Ry(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cy(n.ownerDocument.documentElement,n)){if(r!==null&&Lh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Cp(n,i);var o=Cp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l1=xn&&"documentMode"in document&&11>=document.documentMode,us=null,Ec=null,Di=null,wc=!1;function Rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wc||us==null||us!==ka(r)||(r=us,"selectionStart"in r&&Lh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Di&&Xi(Di,r)||(Di=r,r=Fa(Ec,"onSelect"),0<r.length&&(e=new bh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=us)))}function Jo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cs={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionend:Jo("Transition","TransitionEnd")},Nu={},Py={};xn&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function wl(t){if(Nu[t])return Nu[t];if(!cs[t])return t;var e=cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Py)return Nu[t]=e[n];return t}var Ny=wl("animationend"),ky=wl("animationiteration"),Vy=wl("animationstart"),Dy=wl("transitionend"),by=new Map,Pp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){by.set(t,e),$r(e,[t])}for(var ku=0;ku<Pp.length;ku++){var Vu=Pp[ku],u1=Vu.toLowerCase(),c1=Vu[0].toUpperCase()+Vu.slice(1);gr(u1,"on"+c1)}gr(Ny,"onAnimationEnd");gr(ky,"onAnimationIteration");gr(Vy,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(Dy,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Si));function Np(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uw(r,e,void 0,t),t.currentTarget=null}function My(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Np(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Np(s,l,h),i=u}}}if(Da)throw t=gc,Da=!1,gc=null,t}function Te(t,e){var n=e[Ac];n===void 0&&(n=e[Ac]=new Set);var r=t+"__bubble";n.has(r)||(Oy(e,t,2,!1),n.add(r))}function Du(t,e,n){var r=0;e&&(r|=4),Oy(n,t,r,e)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Yi(t){if(!t[Zo]){t[Zo]=!0,$g.forEach(function(n){n!=="selectionchange"&&(h1.has(n)||Du(n,!1,t),Du(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zo]||(e[Zo]=!0,Du("selectionchange",!1,e))}}function Oy(t,e,n,r){switch(_y(e)){case 1:var s=Sw;break;case 4:s=Aw;break;default:s=Vh}n=s.bind(null,e,n,t),s=void 0,!mc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Nr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}iy(function(){var h=i,d=Rh(n),p=[];e:{var m=by.get(t);if(m!==void 0){var w=bh,N=t;switch(t){case"keypress":if(ya(n)===0)break e;case"keydown":case"keyup":w=Bw;break;case"focusin":N="focus",w=Cu;break;case"focusout":N="blur",w=Cu;break;case"beforeblur":case"afterblur":w=Cu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Pw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=qw;break;case Ny:case ky:case Vy:w=Vw;break;case Dy:w=Ww;break;case"scroll":w=Cw;break;case"wheel":w=Gw;break;case"copy":case"cut":case"paste":w=bw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ep}var P=(e&4)!==0,V=!P&&t==="scroll",A=P?m!==null?m+"Capture":null:m;P=[];for(var v=h,R;v!==null;){R=v;var b=R.stateNode;if(R.tag===5&&b!==null&&(R=b,A!==null&&(b=Hi(v,A),b!=null&&P.push(Ji(v,b,R)))),V)break;v=v.return}0<P.length&&(m=new w(m,N,null,n,d),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==dc&&(N=n.relatedTarget||n.fromElement)&&(Nr(N)||N[In]))break e;if((w||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,w?(N=n.relatedTarget||n.toElement,w=h,N=N?Nr(N):null,N!==null&&(V=qr(N),N!==V||N.tag!==5&&N.tag!==6)&&(N=null)):(w=null,N=h),w!==N)){if(P=vp,b="onMouseLeave",A="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(P=Ep,b="onPointerLeave",A="onPointerEnter",v="pointer"),V=w==null?m:hs(w),R=N==null?m:hs(N),m=new P(b,v+"leave",w,n,d),m.target=V,m.relatedTarget=R,b=null,Nr(d)===h&&(P=new P(A,v+"enter",N,n,d),P.target=R,P.relatedTarget=V,b=P),V=b,w&&N)t:{for(P=w,A=N,v=0,R=P;R;R=ts(R))v++;for(R=0,b=A;b;b=ts(b))R++;for(;0<v-R;)P=ts(P),v--;for(;0<R-v;)A=ts(A),R--;for(;v--;){if(P===A||A!==null&&P===A.alternate)break t;P=ts(P),A=ts(A)}P=null}else P=null;w!==null&&kp(p,m,w,P,!1),N!==null&&V!==null&&kp(p,V,N,P,!0)}}e:{if(m=h?hs(h):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var U=t1;else if(xp(m))if(Sy)U=i1;else{U=r1;var q=n1}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=s1);if(U&&(U=U(t,h))){Iy(p,U,n,d);break e}q&&q(t,m,h),t==="focusout"&&(q=m._wrapperState)&&q.controlled&&m.type==="number"&&lc(m,"number",m.value)}switch(q=h?hs(h):window,t){case"focusin":(xp(q)||q.contentEditable==="true")&&(us=q,Ec=h,Di=null);break;case"focusout":Di=Ec=us=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Rp(p,n,d);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":Rp(p,n,d)}var T;if(Oh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ls?Ty(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(wy&&n.locale!=="ko"&&(ls||y!=="onCompositionStart"?y==="onCompositionEnd"&&ls&&(T=Ey()):(qn=d,Dh="value"in qn?qn.value:qn.textContent,ls=!0)),q=Fa(h,y),0<q.length&&(y=new _p(y,t,null,n,d),p.push({event:y,listeners:q}),T?y.data=T:(T=xy(n),T!==null&&(y.data=T)))),(T=Xw?Yw(t,n):Jw(t,n))&&(h=Fa(h,"onBeforeInput"),0<h.length&&(d=new _p("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=T))}My(p,e)})}function Ji(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hi(t,n),i!=null&&r.unshift(Ji(t,i,s)),i=Hi(t,e),i!=null&&r.push(Ji(t,i,s))),t=t.return}return r}function ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Hi(n,i),u!=null&&o.unshift(Ji(n,u,l))):s||(u=Hi(n,i),u!=null&&o.push(Ji(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var f1=/\r\n?/g,d1=/\u0000|\uFFFD/g;function Vp(t){return(typeof t=="string"?t:""+t).replace(f1,`
`).replace(d1,"")}function ea(t,e,n){if(e=Vp(e),Vp(t)!==e&&n)throw Error($(425))}function ja(){}var Tc=null,xc=null;function Ic(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,p1=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,m1=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(t){return Dp.resolve(null).then(t).catch(g1)}:Sc;function g1(t){setTimeout(function(){throw t})}function Mu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Gi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gi(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qs=Math.random().toString(36).slice(2),un="__reactFiber$"+qs,Zi="__reactProps$"+qs,In="__reactContainer$"+qs,Ac="__reactEvents$"+qs,y1="__reactListeners$"+qs,v1="__reactHandles$"+qs;function Nr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bp(t);t!==null;){if(n=t[un])return n;t=bp(t)}return e}t=n,n=t.parentNode}return null}function xo(t){return t=t[un]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Tl(t){return t[Zi]||null}var Cc=[],fs=-1;function yr(t){return{current:t}}function Ie(t){0>fs||(t.current=Cc[fs],Cc[fs]=null,fs--)}function Ee(t,e){fs++,Cc[fs]=t.current,t.current=e}var ur={},ct=yr(ur),_t=yr(!1),Or=ur;function Ps(t,e){var n=t.type.contextTypes;if(!n)return ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function Ua(){Ie(_t),Ie(ct)}function Mp(t,e,n){if(ct.current!==ur)throw Error($(168));Ee(ct,e),Ee(_t,n)}function Ly(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,nw(t)||"Unknown",s));return Ne({},n,r)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ur,Or=ct.current,Ee(ct,t),Ee(_t,_t.current),!0}function Op(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Ly(t,e,Or),r.__reactInternalMemoizedMergedChildContext=t,Ie(_t),Ie(ct),Ee(ct,t)):Ie(_t),Ee(_t,n)}var _n=null,xl=!1,Ou=!1;function Fy(t){_n===null?_n=[t]:_n.push(t)}function _1(t){xl=!0,Fy(t)}function vr(){if(!Ou&&_n!==null){Ou=!0;var t=0,e=pe;try{var n=_n;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_n=null,xl=!1}catch(s){throw _n!==null&&(_n=_n.slice(t+1)),uy(Ph,vr),s}finally{pe=e,Ou=!1}}return null}var ds=[],ps=0,za=null,$a=0,Dt=[],bt=0,Lr=null,En=1,wn="";function Ar(t,e){ds[ps++]=$a,ds[ps++]=za,za=t,$a=e}function jy(t,e,n){Dt[bt++]=En,Dt[bt++]=wn,Dt[bt++]=Lr,Lr=t;var r=En;t=wn;var s=32-Gt(r)-1;r&=~(1<<s),n+=1;var i=32-Gt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,En=1<<32-Gt(e)+s|n<<s|r,wn=i+t}else En=1<<i|n<<s|r,wn=t}function Fh(t){t.return!==null&&(Ar(t,1),jy(t,1,0))}function jh(t){for(;t===za;)za=ds[--ps],ds[ps]=null,$a=ds[--ps],ds[ps]=null;for(;t===Lr;)Lr=Dt[--bt],Dt[bt]=null,wn=Dt[--bt],Dt[bt]=null,En=Dt[--bt],Dt[bt]=null}var Ct=null,At=null,Ce=!1,Ht=null;function Uy(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,At=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Lr!==null?{id:En,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,At=null,!0):!1;default:return!1}}function Rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pc(t){if(Ce){var e=At;if(e){var n=e;if(!Lp(t,e)){if(Rc(t))throw Error($(418));e=Yn(n.nextSibling);var r=Ct;e&&Lp(t,e)?Uy(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Ct=t)}}else{if(Rc(t))throw Error($(418));t.flags=t.flags&-4097|2,Ce=!1,Ct=t}}}function Fp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function ta(t){if(t!==Ct)return!1;if(!Ce)return Fp(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ic(t.type,t.memoizedProps)),e&&(e=At)){if(Rc(t))throw By(),Error($(418));for(;e;)Uy(t,e),e=Yn(e.nextSibling)}if(Fp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){At=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}At=null}}else At=Ct?Yn(t.stateNode.nextSibling):null;return!0}function By(){for(var t=At;t;)t=Yn(t.nextSibling)}function Ns(){At=Ct=null,Ce=!1}function Uh(t){Ht===null?Ht=[t]:Ht.push(t)}var E1=Nn.ReactCurrentBatchConfig;function _i(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function na(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jp(t){var e=t._init;return e(t._payload)}function zy(t){function e(A,v){if(t){var R=A.deletions;R===null?(A.deletions=[v],A.flags|=16):R.push(v)}}function n(A,v){if(!t)return null;for(;v!==null;)e(A,v),v=v.sibling;return null}function r(A,v){for(A=new Map;v!==null;)v.key!==null?A.set(v.key,v):A.set(v.index,v),v=v.sibling;return A}function s(A,v){return A=tr(A,v),A.index=0,A.sibling=null,A}function i(A,v,R){return A.index=R,t?(R=A.alternate,R!==null?(R=R.index,R<v?(A.flags|=2,v):R):(A.flags|=2,v)):(A.flags|=1048576,v)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,v,R,b){return v===null||v.tag!==6?(v=$u(R,A.mode,b),v.return=A,v):(v=s(v,R),v.return=A,v)}function u(A,v,R,b){var U=R.type;return U===as?d(A,v,R.props.children,b,R.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Un&&jp(U)===v.type)?(b=s(v,R.props),b.ref=_i(A,v,R),b.return=A,b):(b=Ia(R.type,R.key,R.props,null,A.mode,b),b.ref=_i(A,v,R),b.return=A,b)}function h(A,v,R,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=qu(R,A.mode,b),v.return=A,v):(v=s(v,R.children||[]),v.return=A,v)}function d(A,v,R,b,U){return v===null||v.tag!==7?(v=Mr(R,A.mode,b,U),v.return=A,v):(v=s(v,R),v.return=A,v)}function p(A,v,R){if(typeof v=="string"&&v!==""||typeof v=="number")return v=$u(""+v,A.mode,R),v.return=A,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ho:return R=Ia(v.type,v.key,v.props,null,A.mode,R),R.ref=_i(A,null,v),R.return=A,R;case os:return v=qu(v,A.mode,R),v.return=A,v;case Un:var b=v._init;return p(A,b(v._payload),R)}if(xi(v)||pi(v))return v=Mr(v,A.mode,R,null),v.return=A,v;na(A,v)}return null}function m(A,v,R,b){var U=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return U!==null?null:l(A,v,""+R,b);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ho:return R.key===U?u(A,v,R,b):null;case os:return R.key===U?h(A,v,R,b):null;case Un:return U=R._init,m(A,v,U(R._payload),b)}if(xi(R)||pi(R))return U!==null?null:d(A,v,R,b,null);na(A,R)}return null}function w(A,v,R,b,U){if(typeof b=="string"&&b!==""||typeof b=="number")return A=A.get(R)||null,l(v,A,""+b,U);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ho:return A=A.get(b.key===null?R:b.key)||null,u(v,A,b,U);case os:return A=A.get(b.key===null?R:b.key)||null,h(v,A,b,U);case Un:var q=b._init;return w(A,v,R,q(b._payload),U)}if(xi(b)||pi(b))return A=A.get(R)||null,d(v,A,b,U,null);na(v,b)}return null}function N(A,v,R,b){for(var U=null,q=null,T=v,y=v=0,S=null;T!==null&&y<R.length;y++){T.index>y?(S=T,T=null):S=T.sibling;var C=m(A,T,R[y],b);if(C===null){T===null&&(T=S);break}t&&T&&C.alternate===null&&e(A,T),v=i(C,v,y),q===null?U=C:q.sibling=C,q=C,T=S}if(y===R.length)return n(A,T),Ce&&Ar(A,y),U;if(T===null){for(;y<R.length;y++)T=p(A,R[y],b),T!==null&&(v=i(T,v,y),q===null?U=T:q.sibling=T,q=T);return Ce&&Ar(A,y),U}for(T=r(A,T);y<R.length;y++)S=w(T,A,y,R[y],b),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?y:S.key),v=i(S,v,y),q===null?U=S:q.sibling=S,q=S);return t&&T.forEach(function(I){return e(A,I)}),Ce&&Ar(A,y),U}function P(A,v,R,b){var U=pi(R);if(typeof U!="function")throw Error($(150));if(R=U.call(R),R==null)throw Error($(151));for(var q=U=null,T=v,y=v=0,S=null,C=R.next();T!==null&&!C.done;y++,C=R.next()){T.index>y?(S=T,T=null):S=T.sibling;var I=m(A,T,C.value,b);if(I===null){T===null&&(T=S);break}t&&T&&I.alternate===null&&e(A,T),v=i(I,v,y),q===null?U=I:q.sibling=I,q=I,T=S}if(C.done)return n(A,T),Ce&&Ar(A,y),U;if(T===null){for(;!C.done;y++,C=R.next())C=p(A,C.value,b),C!==null&&(v=i(C,v,y),q===null?U=C:q.sibling=C,q=C);return Ce&&Ar(A,y),U}for(T=r(A,T);!C.done;y++,C=R.next())C=w(T,A,y,C.value,b),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?y:C.key),v=i(C,v,y),q===null?U=C:q.sibling=C,q=C);return t&&T.forEach(function(x){return e(A,x)}),Ce&&Ar(A,y),U}function V(A,v,R,b){if(typeof R=="object"&&R!==null&&R.type===as&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ho:e:{for(var U=R.key,q=v;q!==null;){if(q.key===U){if(U=R.type,U===as){if(q.tag===7){n(A,q.sibling),v=s(q,R.props.children),v.return=A,A=v;break e}}else if(q.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Un&&jp(U)===q.type){n(A,q.sibling),v=s(q,R.props),v.ref=_i(A,q,R),v.return=A,A=v;break e}n(A,q);break}else e(A,q);q=q.sibling}R.type===as?(v=Mr(R.props.children,A.mode,b,R.key),v.return=A,A=v):(b=Ia(R.type,R.key,R.props,null,A.mode,b),b.ref=_i(A,v,R),b.return=A,A=b)}return o(A);case os:e:{for(q=R.key;v!==null;){if(v.key===q)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){n(A,v.sibling),v=s(v,R.children||[]),v.return=A,A=v;break e}else{n(A,v);break}else e(A,v);v=v.sibling}v=qu(R,A.mode,b),v.return=A,A=v}return o(A);case Un:return q=R._init,V(A,v,q(R._payload),b)}if(xi(R))return N(A,v,R,b);if(pi(R))return P(A,v,R,b);na(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,v!==null&&v.tag===6?(n(A,v.sibling),v=s(v,R),v.return=A,A=v):(n(A,v),v=$u(R,A.mode,b),v.return=A,A=v),o(A)):n(A,v)}return V}var ks=zy(!0),$y=zy(!1),qa=yr(null),Ha=null,ms=null,Bh=null;function zh(){Bh=ms=Ha=null}function $h(t){var e=qa.current;Ie(qa),t._currentValue=e}function Nc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ts(t,e){Ha=t,Bh=ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vt=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(Bh!==t)if(t={context:t,memoizedValue:e,next:null},ms===null){if(Ha===null)throw Error($(308));ms=t,Ha.dependencies={lanes:0,firstContext:t}}else ms=ms.next=t;return e}var kr=null;function qh(t){kr===null?kr=[t]:kr.push(t)}function qy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sn(t,r)}function Sn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sn(t,n)}return s=r.interleaved,s===null?(e.next=e,qh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sn(t,n)}function va(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nh(t,n)}}function Up(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wa(t,e,n,r){var s=t.updateQueue;Bn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,d=h=u=null,l=i;do{var m=l.lane,w=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,P=l;switch(m=e,w=n,P.tag){case 1:if(N=P.payload,typeof N=="function"){p=N.call(w,p,m);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=P.payload,m=typeof N=="function"?N.call(w,p,m):N,m==null)break e;p=Ne({},p,m);break e;case 2:Bn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else w={eventTime:w,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=w,u=p):d=d.next=w,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(u=p),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);jr|=o,t.lanes=o,t.memoizedState=p}}function Bp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Io={},hn=yr(Io),eo=yr(Io),to=yr(Io);function Vr(t){if(t===Io)throw Error($(174));return t}function Wh(t,e){switch(Ee(to,e),Ee(eo,t),Ee(hn,Io),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cc(e,t)}Ie(hn),Ee(hn,e)}function Vs(){Ie(hn),Ie(eo),Ie(to)}function Wy(t){Vr(to.current);var e=Vr(hn.current),n=cc(e,t.type);e!==n&&(Ee(eo,t),Ee(hn,n))}function Qh(t){eo.current===t&&(Ie(hn),Ie(eo))}var Re=yr(0);function Qa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lu=[];function Gh(){for(var t=0;t<Lu.length;t++)Lu[t]._workInProgressVersionPrimary=null;Lu.length=0}var _a=Nn.ReactCurrentDispatcher,Fu=Nn.ReactCurrentBatchConfig,Fr=0,Pe=null,qe=null,Ke=null,Ga=!1,bi=!1,no=0,w1=0;function st(){throw Error($(321))}function Kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function Xh(t,e,n,r,s,i){if(Fr=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_a.current=t===null||t.memoizedState===null?S1:A1,t=n(r,s),bi){i=0;do{if(bi=!1,no=0,25<=i)throw Error($(301));i+=1,Ke=qe=null,e.updateQueue=null,_a.current=C1,t=n(r,s)}while(bi)}if(_a.current=Ka,e=qe!==null&&qe.next!==null,Fr=0,Ke=qe=Pe=null,Ga=!1,e)throw Error($(300));return t}function Yh(){var t=no!==0;return no=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Pe.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Ut(){if(qe===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ke===null?Pe.memoizedState:Ke.next;if(e!==null)Ke=e,qe=t;else{if(t===null)throw Error($(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ke===null?Pe.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function ro(t,e){return typeof e=="function"?e(t):e}function ju(t){var e=Ut(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var d=h.lane;if((Fr&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Pe.lanes|=d,jr|=d}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Xt(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,jr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uu(t){var e=Ut(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Xt(i,e.memoizedState)||(vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Qy(){}function Gy(t,e){var n=Pe,r=Ut(),s=e(),i=!Xt(r.memoizedState,s);if(i&&(r.memoizedState=s,vt=!0),r=r.queue,Jh(Yy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,so(9,Xy.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error($(349));Fr&30||Ky(n,e,s)}return s}function Ky(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xy(t,e,n,r){e.value=n,e.getSnapshot=r,Jy(e)&&Zy(t)}function Yy(t,e,n){return n(function(){Jy(e)&&Zy(t)})}function Jy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function Zy(t){var e=Sn(t,1);e!==null&&Kt(e,t,1,-1)}function zp(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:t},e.queue=t,t=t.dispatch=I1.bind(null,Pe,t),[e.memoizedState,t]}function so(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ev(){return Ut().memoizedState}function Ea(t,e,n,r){var s=an();Pe.flags|=t,s.memoizedState=so(1|e,n,void 0,r===void 0?null:r)}function Il(t,e,n,r){var s=Ut();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Kh(r,o.deps)){s.memoizedState=so(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=so(1|e,n,i,r)}function $p(t,e){return Ea(8390656,8,t,e)}function Jh(t,e){return Il(2048,8,t,e)}function tv(t,e){return Il(4,2,t,e)}function nv(t,e){return Il(4,4,t,e)}function rv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sv(t,e,n){return n=n!=null?n.concat([t]):null,Il(4,4,rv.bind(null,e,t),n)}function Zh(){}function iv(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ov(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function av(t,e,n){return Fr&21?(Xt(n,e)||(n=fy(),Pe.lanes|=n,jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=n)}function T1(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=Fu.transition;Fu.transition={};try{t(!1),e()}finally{pe=n,Fu.transition=r}}function lv(){return Ut().memoizedState}function x1(t,e,n){var r=er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uv(t))cv(e,n);else if(n=qy(t,e,n,r),n!==null){var s=dt();Kt(n,t,r,s),hv(n,e,r)}}function I1(t,e,n){var r=er(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uv(t))cv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Xt(l,o)){var u=e.interleaved;u===null?(s.next=s,qh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=qy(t,e,s,r),n!==null&&(s=dt(),Kt(n,t,r,s),hv(n,e,r))}}function uv(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function cv(t,e){bi=Ga=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nh(t,n)}}var Ka={readContext:jt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},S1={readContext:jt,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:$p,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ea(4194308,4,rv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ea(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ea(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=x1.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:zp,useDebugValue:Zh,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=zp(!1),e=t[0];return t=T1.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=an();if(Ce){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ye===null)throw Error($(349));Fr&30||Ky(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$p(Yy.bind(null,r,i,t),[t]),r.flags|=2048,so(9,Xy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=an(),e=Ye.identifierPrefix;if(Ce){var n=wn,r=En;n=(r&~(1<<32-Gt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=no++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=w1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A1={readContext:jt,useCallback:iv,useContext:jt,useEffect:Jh,useImperativeHandle:sv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:ov,useReducer:ju,useRef:ev,useState:function(){return ju(ro)},useDebugValue:Zh,useDeferredValue:function(t){var e=Ut();return av(e,qe.memoizedState,t)},useTransition:function(){var t=ju(ro)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:Qy,useSyncExternalStore:Gy,useId:lv,unstable_isNewReconciler:!1},C1={readContext:jt,useCallback:iv,useContext:jt,useEffect:Jh,useImperativeHandle:sv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:ov,useReducer:Uu,useRef:ev,useState:function(){return Uu(ro)},useDebugValue:Zh,useDeferredValue:function(t){var e=Ut();return qe===null?e.memoizedState=t:av(e,qe.memoizedState,t)},useTransition:function(){var t=Uu(ro)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:Qy,useSyncExternalStore:Gy,useId:lv,unstable_isNewReconciler:!1};function $t(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sl={isMounted:function(t){return(t=t._reactInternals)?qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dt(),s=er(t),i=Tn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,s),e!==null&&(Kt(e,t,s,r),va(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dt(),s=er(t),i=Tn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,s),e!==null&&(Kt(e,t,s,r),va(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),r=er(t),s=Tn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Jn(t,s,r),e!==null&&(Kt(e,t,r,n),va(e,t,r))}};function qp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Xi(n,r)||!Xi(s,i):!0}function fv(t,e,n){var r=!1,s=ur,i=e.contextType;return typeof i=="object"&&i!==null?i=jt(i):(s=Et(e)?Or:ct.current,r=e.contextTypes,i=(r=r!=null)?Ps(t,s):ur),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sl.enqueueReplaceState(e,e.state,null)}function Vc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jt(i):(i=Et(e)?Or:ct.current,s.context=Ps(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sl.enqueueReplaceState(s,s.state,null),Wa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var n="",r=e;do n+=tw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R1=typeof WeakMap=="function"?WeakMap:Map;function dv(t,e,n){n=Tn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ya||(Ya=!0,$c=r),Dc(t,e)},n}function pv(t,e,n){n=Tn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dc(t,e),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=z1.bind(null,t,e,n),e.then(t,t))}function Qp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tn(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var P1=Nn.ReactCurrentOwner,vt=!1;function ft(t,e,n,r){e.child=t===null?$y(e,null,n,r):ks(e,t.child,n,r)}function Kp(t,e,n,r,s){n=n.render;var i=e.ref;return Ts(e,s),r=Xh(t,e,n,r,i,s),n=Yh(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(Ce&&n&&Fh(e),e.flags|=1,ft(t,e,r,s),e.child)}function Xp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!lf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mv(t,e,i,r,s)):(t=Ia(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xi,n(o,r)&&t.ref===e.ref)return An(t,e,s)}return e.flags|=1,t=tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function mv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xi(i,r)&&t.ref===e.ref)if(vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,An(t,e,s)}return bc(t,e,n,r,s)}function gv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(ys,St),St|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(ys,St),St|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(ys,St),St|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(ys,St),St|=r;return ft(t,e,s,n),e.child}function yv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bc(t,e,n,r,s){var i=Et(n)?Or:ct.current;return i=Ps(e,i),Ts(e,s),n=Xh(t,e,n,r,i,s),r=Yh(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(Ce&&r&&Fh(e),e.flags|=1,ft(t,e,n,s),e.child)}function Yp(t,e,n,r,s){if(Et(n)){var i=!0;Ba(e)}else i=!1;if(Ts(e,s),e.stateNode===null)wa(t,e),fv(e,n,r),Vc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=jt(h):(h=Et(n)?Or:ct.current,h=Ps(e,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Hp(e,o,r,h),Bn=!1;var m=e.memoizedState;o.state=m,Wa(e,r,o,s),u=e.memoizedState,l!==r||m!==u||_t.current||Bn?(typeof d=="function"&&(kc(e,n,d,r),u=e.memoizedState),(l=Bn||qp(e,n,l,r,m,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:$t(e.type,l),o.props=h,p=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=jt(u):(u=Et(n)?Or:ct.current,u=Ps(e,u));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==u)&&Hp(e,o,r,u),Bn=!1,m=e.memoizedState,o.state=m,Wa(e,r,o,s);var N=e.memoizedState;l!==p||m!==N||_t.current||Bn?(typeof w=="function"&&(kc(e,n,w,r),N=e.memoizedState),(h=Bn||qp(e,n,h,r,m,N,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Mc(t,e,n,r,i,s)}function Mc(t,e,n,r,s,i){yv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Op(e,n,!1),An(t,e,i);r=e.stateNode,P1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ks(e,t.child,null,i),e.child=ks(e,null,l,i)):ft(t,e,l,i),e.memoizedState=r.state,s&&Op(e,n,!0),e.child}function vv(t){var e=t.stateNode;e.pendingContext?Mp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mp(t,e.context,!1),Wh(t,e.containerInfo)}function Jp(t,e,n,r,s){return Ns(),Uh(s),e.flags|=256,ft(t,e,n,r),e.child}var Oc={dehydrated:null,treeContext:null,retryLane:0};function Lc(t){return{baseLanes:t,cachePool:null,transitions:null}}function _v(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Re,s&1),t===null)return Pc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Rl(o,r,0,null),t=Mr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Lc(n),e.memoizedState=Oc,t):ef(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return N1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=tr(l,i):(i=Mr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Lc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Oc,r}return i=t.child,t=i.sibling,r=tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ef(t,e){return e=Rl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ra(t,e,n,r){return r!==null&&Uh(r),ks(e,t.child,null,n),t=ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Bu(Error($(422))),ra(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Rl({mode:"visible",children:r.children},s,0,null),i=Mr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ks(e,t.child,null,o),e.child.memoizedState=Lc(o),e.memoizedState=Oc,i);if(!(e.mode&1))return ra(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Bu(i,r,void 0),ra(t,e,o,r)}if(l=(o&t.childLanes)!==0,vt||l){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sn(t,s),Kt(r,t,s,-1))}return af(),r=Bu(Error($(421))),ra(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,At=Yn(s.nextSibling),Ct=e,Ce=!0,Ht=null,t!==null&&(Dt[bt++]=En,Dt[bt++]=wn,Dt[bt++]=Lr,En=t.id,wn=t.overflow,Lr=e),e=ef(e,r.children),e.flags|=4096,e)}function Zp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nc(t.return,e,n)}function zu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ev(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zp(t,n,e);else if(t.tag===19)Zp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zu(e,!0,n,null,i);break;case"together":zu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function k1(t,e,n){switch(e.tag){case 3:vv(e),Ns();break;case 5:Wy(e);break;case 1:Et(e.type)&&Ba(e);break;case 4:Wh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(qa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?_v(t,e,n):(Ee(Re,Re.current&1),t=An(t,e,n),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ev(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,gv(t,e,n)}return An(t,e,n)}var wv,Fc,Tv,xv;wv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fc=function(){};Tv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vr(hn.current);var i=null;switch(n){case"input":s=oc(t,s),r=oc(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=uc(t,s),r=uc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ja)}hc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&($i.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&($i.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Te("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};xv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ei(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function V1(t,e,n){var r=e.pendingProps;switch(jh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return Et(e.type)&&Ua(),it(e),null;case 3:return r=e.stateNode,Vs(),Ie(_t),Ie(ct),Gh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ta(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(Wc(Ht),Ht=null))),Fc(t,e),it(e),null;case 5:Qh(e);var s=Vr(to.current);if(n=e.type,t!==null&&e.stateNode!=null)Tv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return it(e),null}if(t=Vr(hn.current),ta(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[un]=e,r[Zi]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Si.length;s++)Te(Si[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":lp(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":cp(r,i),Te("invalid",r)}hc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ea(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ea(r.textContent,l,t),s=["children",""+l]):$i.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Wo(r),up(r,i,!0);break;case"textarea":Wo(r),hp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ja)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[un]=e,t[Zi]=r,wv(t,e,!1,!1),e.stateNode=t;e:{switch(o=fc(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<Si.length;s++)Te(Si[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":lp(t,r),s=oc(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),Te("invalid",t);break;case"textarea":cp(t,r),s=uc(t,r),Te("invalid",t);break;default:s=r}hc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?ey(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Jg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&qi(t,u):typeof u=="number"&&qi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($i.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",t):u!=null&&Ih(t,i,u,o))}switch(n){case"input":Wo(t),up(t,r,!1);break;case"textarea":Wo(t),hp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?vs(t,!!r.multiple,i,!1):r.defaultValue!=null&&vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ja)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)xv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Vr(to.current),Vr(hn.current),ta(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(i=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:ea(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ea(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return it(e),null;case 13:if(Ie(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&At!==null&&e.mode&1&&!(e.flags&128))By(),Ns(),e.flags|=98560,i=!1;else if(i=ta(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[un]=e}else Ns(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Ht!==null&&(Wc(Ht),Ht=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?He===0&&(He=3):af())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return Vs(),Fc(t,e),t===null&&Yi(e.stateNode.containerInfo),it(e),null;case 10:return $h(e.type._context),it(e),null;case 17:return Et(e.type)&&Ua(),it(e),null;case 19:if(Ie(Re),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ei(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qa(t),o!==null){for(e.flags|=128,Ei(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>bs&&(e.flags|=128,r=!0,Ei(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qa(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return it(e),null}else 2*Oe()-i.renderingStartTime>bs&&n!==1073741824&&(e.flags|=128,r=!0,Ei(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,n=Re.current,Ee(Re,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?St&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function D1(t,e){switch(jh(e),e.tag){case 1:return Et(e.type)&&Ua(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vs(),Ie(_t),Ie(ct),Gh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qh(e),null;case 13:if(Ie(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ns()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Re),null;case 4:return Vs(),null;case 10:return $h(e.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var sa=!1,lt=!1,b1=typeof WeakSet=="function"?WeakSet:Set,X=null;function gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function jc(t,e,n){try{n()}catch(r){be(t,e,r)}}var em=!1;function M1(t,e){if(Tc=Oa,t=Ry(),Lh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,d=0,p=t,m=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)m=p,p=w;for(;;){if(p===t)break t;if(m===n&&++h===s&&(l=o),m===i&&++d===r&&(u=o),(w=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xc={focusedElem:t,selectionRange:n},Oa=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var P=N.memoizedProps,V=N.memoizedState,A=e.stateNode,v=A.getSnapshotBeforeUpdate(e.elementType===e.type?P:$t(e.type,P),V);A.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(b){be(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return N=em,em=!1,N}function Mi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&jc(e,n,i)}s=s.next}while(s!==r)}}function Al(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Iv(t){var e=t.alternate;e!==null&&(t.alternate=null,Iv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[Zi],delete e[Ac],delete e[y1],delete e[v1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sv(t){return t.tag===5||t.tag===3||t.tag===4}function tm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ja));else if(r!==4&&(t=t.child,t!==null))for(Bc(t,e,n),t=t.sibling;t!==null;)Bc(t,e,n),t=t.sibling}function zc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zc(t,e,n),t=t.sibling;t!==null;)zc(t,e,n),t=t.sibling}var Je=null,qt=!1;function jn(t,e,n){for(n=n.child;n!==null;)Av(t,e,n),n=n.sibling}function Av(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:lt||gs(n,e);case 6:var r=Je,s=qt;Je=null,jn(t,e,n),Je=r,qt=s,Je!==null&&(qt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(qt?(t=Je,n=n.stateNode,t.nodeType===8?Mu(t.parentNode,n):t.nodeType===1&&Mu(t,n),Gi(t)):Mu(Je,n.stateNode));break;case 4:r=Je,s=qt,Je=n.stateNode.containerInfo,qt=!0,jn(t,e,n),Je=r,qt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jc(n,e,o),s=s.next}while(s!==r)}jn(t,e,n);break;case 1:if(!lt&&(gs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}jn(t,e,n);break;case 21:jn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,jn(t,e,n),lt=r):jn(t,e,n);break;default:jn(t,e,n)}}function nm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b1),e.forEach(function(r){var s=q1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,qt=!1;break e;case 3:Je=l.stateNode.containerInfo,qt=!0;break e;case 4:Je=l.stateNode.containerInfo,qt=!0;break e}l=l.return}if(Je===null)throw Error($(160));Av(i,o,s),Je=null,qt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){be(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cv(e,t),e=e.sibling}function Cv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(e,t),on(t),r&4){try{Mi(3,t,t.return),Al(3,t)}catch(P){be(t,t.return,P)}try{Mi(5,t,t.return)}catch(P){be(t,t.return,P)}}break;case 1:zt(e,t),on(t),r&512&&n!==null&&gs(n,n.return);break;case 5:if(zt(e,t),on(t),r&512&&n!==null&&gs(n,n.return),t.flags&32){var s=t.stateNode;try{qi(s,"")}catch(P){be(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Kg(s,i),fc(l,o);var h=fc(l,i);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?ey(s,p):d==="dangerouslySetInnerHTML"?Jg(s,p):d==="children"?qi(s,p):Ih(s,d,p,h)}switch(l){case"input":ac(s,i);break;case"textarea":Xg(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?vs(s,!!i.multiple,w,!1):m!==!!i.multiple&&(i.defaultValue!=null?vs(s,!!i.multiple,i.defaultValue,!0):vs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zi]=i}catch(P){be(t,t.return,P)}}break;case 6:if(zt(e,t),on(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){be(t,t.return,P)}}break;case 3:if(zt(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gi(e.containerInfo)}catch(P){be(t,t.return,P)}break;case 4:zt(e,t),on(t);break;case 13:zt(e,t),on(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rf=Oe())),r&4&&nm(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(h=lt)||d,zt(e,t),lt=h):zt(e,t),on(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(p=X=d;X!==null;){switch(m=X,w=m.child,m.tag){case 0:case 11:case 14:case 15:Mi(4,m,m.return);break;case 1:gs(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(P){be(r,n,P)}}break;case 5:gs(m,m.return);break;case 22:if(m.memoizedState!==null){sm(p);continue}}w!==null?(w.return=m,X=w):sm(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Zg("display",o))}catch(P){be(t,t.return,P)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(P){be(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:zt(e,t),on(t),r&4&&nm(t);break;case 21:break;default:zt(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qi(s,""),r.flags&=-33);var i=tm(t);zc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=tm(t);Bc(t,l,o);break;default:throw Error($(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O1(t,e,n){X=t,Rv(t)}function Rv(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||sa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=sa;var h=lt;if(sa=o,(lt=u)&&!h)for(X=s;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?im(s):u!==null?(u.return=o,X=u):im(s);for(;i!==null;)X=i,Rv(i),i=i.sibling;X=s,sa=l,lt=h}rm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):rm(t)}}function rm(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Al(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$t(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Gi(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}lt||e.flags&512&&Uc(e)}catch(m){be(e,e.return,m)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function sm(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function im(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Al(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){be(e,s,u)}}var i=e.return;try{Uc(e)}catch(u){be(e,i,u)}break;case 5:var o=e.return;try{Uc(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var L1=Math.ceil,Xa=Nn.ReactCurrentDispatcher,tf=Nn.ReactCurrentOwner,Ft=Nn.ReactCurrentBatchConfig,fe=0,Ye=null,je=null,tt=0,St=0,ys=yr(0),He=0,io=null,jr=0,Cl=0,nf=0,Oi=null,yt=null,rf=0,bs=1/0,vn=null,Ya=!1,$c=null,Zn=null,ia=!1,Hn=null,Ja=0,Li=0,qc=null,Ta=-1,xa=0;function dt(){return fe&6?Oe():Ta!==-1?Ta:Ta=Oe()}function er(t){return t.mode&1?fe&2&&tt!==0?tt&-tt:E1.transition!==null?(xa===0&&(xa=fy()),xa):(t=pe,t!==0||(t=window.event,t=t===void 0?16:_y(t.type)),t):1}function Kt(t,e,n,r){if(50<Li)throw Li=0,qc=null,Error($(185));wo(t,n,r),(!(fe&2)||t!==Ye)&&(t===Ye&&(!(fe&2)&&(Cl|=n),He===4&&$n(t,tt)),wt(t,r),n===1&&fe===0&&!(e.mode&1)&&(bs=Oe()+500,xl&&vr()))}function wt(t,e){var n=t.callbackNode;Ew(t,e);var r=Ma(t,t===Ye?tt:0);if(r===0)n!==null&&pp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pp(n),e===1)t.tag===0?_1(om.bind(null,t)):Fy(om.bind(null,t)),m1(function(){!(fe&6)&&vr()}),n=null;else{switch(dy(r)){case 1:n=Ph;break;case 4:n=cy;break;case 16:n=ba;break;case 536870912:n=hy;break;default:n=ba}n=Ov(n,Pv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Pv(t,e){if(Ta=-1,xa=0,fe&6)throw Error($(327));var n=t.callbackNode;if(xs()&&t.callbackNode!==n)return null;var r=Ma(t,t===Ye?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Za(t,r);else{e=r;var s=fe;fe|=2;var i=kv();(Ye!==t||tt!==e)&&(vn=null,bs=Oe()+500,br(t,e));do try{U1();break}catch(l){Nv(t,l)}while(!0);zh(),Xa.current=i,fe=s,je!==null?e=0:(Ye=null,tt=0,e=He)}if(e!==0){if(e===2&&(s=yc(t),s!==0&&(r=s,e=Hc(t,s))),e===1)throw n=io,br(t,0),$n(t,r),wt(t,Oe()),n;if(e===6)$n(t,r);else{if(s=t.current.alternate,!(r&30)&&!F1(s)&&(e=Za(t,r),e===2&&(i=yc(t),i!==0&&(r=i,e=Hc(t,i))),e===1))throw n=io,br(t,0),$n(t,r),wt(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Cr(t,yt,vn);break;case 3:if($n(t,r),(r&130023424)===r&&(e=rf+500-Oe(),10<e)){if(Ma(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sc(Cr.bind(null,t,yt,vn),e);break}Cr(t,yt,vn);break;case 4:if($n(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*L1(r/1960))-r,10<r){t.timeoutHandle=Sc(Cr.bind(null,t,yt,vn),r);break}Cr(t,yt,vn);break;case 5:Cr(t,yt,vn);break;default:throw Error($(329))}}}return wt(t,Oe()),t.callbackNode===n?Pv.bind(null,t):null}function Hc(t,e){var n=Oi;return t.current.memoizedState.isDehydrated&&(br(t,e).flags|=256),t=Za(t,e),t!==2&&(e=yt,yt=n,e!==null&&Wc(e)),t}function Wc(t){yt===null?yt=t:yt.push.apply(yt,t)}function F1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~nf,e&=~Cl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gt(e),r=1<<n;t[n]=-1,e&=~r}}function om(t){if(fe&6)throw Error($(327));xs();var e=Ma(t,0);if(!(e&1))return wt(t,Oe()),null;var n=Za(t,e);if(t.tag!==0&&n===2){var r=yc(t);r!==0&&(e=r,n=Hc(t,r))}if(n===1)throw n=io,br(t,0),$n(t,e),wt(t,Oe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cr(t,yt,vn),wt(t,Oe()),null}function sf(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(bs=Oe()+500,xl&&vr())}}function Ur(t){Hn!==null&&Hn.tag===0&&!(fe&6)&&xs();var e=fe;fe|=1;var n=Ft.transition,r=pe;try{if(Ft.transition=null,pe=1,t)return t()}finally{pe=r,Ft.transition=n,fe=e,!(fe&6)&&vr()}}function of(){St=ys.current,Ie(ys)}function br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,p1(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(jh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ua();break;case 3:Vs(),Ie(_t),Ie(ct),Gh();break;case 5:Qh(r);break;case 4:Vs();break;case 13:Ie(Re);break;case 19:Ie(Re);break;case 10:$h(r.type._context);break;case 22:case 23:of()}n=n.return}if(Ye=t,je=t=tr(t.current,null),tt=St=e,He=0,io=null,nf=Cl=jr=0,yt=Oi=null,kr!==null){for(e=0;e<kr.length;e++)if(n=kr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}kr=null}return t}function Nv(t,e){do{var n=je;try{if(zh(),_a.current=Ka,Ga){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ga=!1}if(Fr=0,Ke=qe=Pe=null,bi=!1,no=0,tf.current=null,n===null||n.return===null){He=1,io=e,je=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=tt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Qp(o);if(w!==null){w.flags&=-257,Gp(w,o,l,i,e),w.mode&1&&Wp(i,h,e),e=w,u=h;var N=e.updateQueue;if(N===null){var P=new Set;P.add(u),e.updateQueue=P}else N.add(u);break e}else{if(!(e&1)){Wp(i,h,e),af();break e}u=Error($(426))}}else if(Ce&&l.mode&1){var V=Qp(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Gp(V,o,l,i,e),Uh(Ds(u,l));break e}}i=u=Ds(u,l),He!==4&&(He=2),Oi===null?Oi=[i]:Oi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=dv(i,u,e);Up(i,A);break e;case 1:l=u;var v=i.type,R=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Zn===null||!Zn.has(R)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=pv(i,l,e);Up(i,b);break e}}i=i.return}while(i!==null)}Dv(n)}catch(U){e=U,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function kv(){var t=Xa.current;return Xa.current=Ka,t===null?Ka:t}function af(){(He===0||He===3||He===2)&&(He=4),Ye===null||!(jr&268435455)&&!(Cl&268435455)||$n(Ye,tt)}function Za(t,e){var n=fe;fe|=2;var r=kv();(Ye!==t||tt!==e)&&(vn=null,br(t,e));do try{j1();break}catch(s){Nv(t,s)}while(!0);if(zh(),fe=n,Xa.current=r,je!==null)throw Error($(261));return Ye=null,tt=0,He}function j1(){for(;je!==null;)Vv(je)}function U1(){for(;je!==null&&!hw();)Vv(je)}function Vv(t){var e=Mv(t.alternate,t,St);t.memoizedProps=t.pendingProps,e===null?Dv(t):je=e,tf.current=null}function Dv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=D1(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,je=null;return}}else if(n=V1(n,e,St),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);He===0&&(He=5)}function Cr(t,e,n){var r=pe,s=Ft.transition;try{Ft.transition=null,pe=1,B1(t,e,n,r)}finally{Ft.transition=s,pe=r}return null}function B1(t,e,n,r){do xs();while(Hn!==null);if(fe&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ww(t,i),t===Ye&&(je=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ia||(ia=!0,Ov(ba,function(){return xs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ft.transition,Ft.transition=null;var o=pe;pe=1;var l=fe;fe|=4,tf.current=null,M1(t,n),Cv(n,t),a1(xc),Oa=!!Tc,xc=Tc=null,t.current=n,O1(n),fw(),fe=l,pe=o,Ft.transition=i}else t.current=n;if(ia&&(ia=!1,Hn=t,Ja=s),i=t.pendingLanes,i===0&&(Zn=null),mw(n.stateNode),wt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ya)throw Ya=!1,t=$c,$c=null,t;return Ja&1&&t.tag!==0&&xs(),i=t.pendingLanes,i&1?t===qc?Li++:(Li=0,qc=t):Li=0,vr(),null}function xs(){if(Hn!==null){var t=dy(Ja),e=Ft.transition,n=pe;try{if(Ft.transition=null,pe=16>t?16:t,Hn===null)var r=!1;else{if(t=Hn,Hn=null,Ja=0,fe&6)throw Error($(331));var s=fe;for(fe|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(X=h;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:Mi(8,d,i)}var p=d.child;if(p!==null)p.return=d,X=p;else for(;X!==null;){d=X;var m=d.sibling,w=d.return;if(Iv(d),d===h){X=null;break}if(m!==null){m.return=w,X=m;break}X=w}}}var N=i.alternate;if(N!==null){var P=N.child;if(P!==null){N.child=null;do{var V=P.sibling;P.sibling=null,P=V}while(P!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mi(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,X=A;break e}X=i.return}}var v=t.current;for(X=v;X!==null;){o=X;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,X=R;else e:for(o=v;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Al(9,l)}}catch(U){be(l,l.return,U)}if(l===o){X=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,X=b;break e}X=l.return}}if(fe=s,vr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(vl,t)}catch{}r=!0}return r}finally{pe=n,Ft.transition=e}}return!1}function am(t,e,n){e=Ds(n,e),e=dv(t,e,1),t=Jn(t,e,1),e=dt(),t!==null&&(wo(t,1,e),wt(t,e))}function be(t,e,n){if(t.tag===3)am(t,t,n);else for(;e!==null;){if(e.tag===3){am(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){t=Ds(n,t),t=pv(e,t,1),e=Jn(e,t,1),t=dt(),e!==null&&(wo(e,1,t),wt(e,t));break}}e=e.return}}function z1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(tt&n)===n&&(He===4||He===3&&(tt&130023424)===tt&&500>Oe()-rf?br(t,0):nf|=n),wt(t,e)}function bv(t,e){e===0&&(t.mode&1?(e=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):e=1);var n=dt();t=Sn(t,e),t!==null&&(wo(t,e,n),wt(t,n))}function $1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bv(t,n)}function q1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),bv(t,n)}var Mv;Mv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_t.current)vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vt=!1,k1(t,e,n);vt=!!(t.flags&131072)}else vt=!1,Ce&&e.flags&1048576&&jy(e,$a,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wa(t,e),t=e.pendingProps;var s=Ps(e,ct.current);Ts(e,n),s=Xh(null,e,r,t,s,n);var i=Yh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,Ba(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hh(e),s.updater=Sl,e.stateNode=s,s._reactInternals=e,Vc(e,r,t,n),e=Mc(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Fh(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=W1(r),t=$t(r,t),s){case 0:e=bc(null,e,r,t,n);break e;case 1:e=Yp(null,e,r,t,n);break e;case 11:e=Kp(null,e,r,t,n);break e;case 14:e=Xp(null,e,r,$t(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),bc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),Yp(t,e,r,s,n);case 3:e:{if(vv(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Hy(t,e),Wa(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ds(Error($(423)),e),e=Jp(t,e,r,n,s);break e}else if(r!==s){s=Ds(Error($(424)),e),e=Jp(t,e,r,n,s);break e}else for(At=Yn(e.stateNode.containerInfo.firstChild),Ct=e,Ce=!0,Ht=null,n=$y(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ns(),r===s){e=An(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return Wy(e),t===null&&Pc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ic(r,s)?o=null:i!==null&&Ic(r,i)&&(e.flags|=32),yv(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Pc(e),null;case 13:return _v(t,e,n);case 4:return Wh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ks(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),Kp(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(qa,r._currentValue),r._currentValue=o,i!==null)if(Xt(i.value,o)){if(i.children===s.children&&!_t.current){e=An(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Tn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ts(e,n),s=jt(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=$t(r,e.pendingProps),s=$t(r.type,s),Xp(t,e,r,s,n);case 15:return mv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$t(r,s),wa(t,e),e.tag=1,Et(r)?(t=!0,Ba(e)):t=!1,Ts(e,n),fv(e,r,s),Vc(e,r,s,n),Mc(null,e,r,!0,t,n);case 19:return Ev(t,e,n);case 22:return gv(t,e,n)}throw Error($(156,e.tag))};function Ov(t,e){return uy(t,e)}function H1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new H1(t,e,n,r)}function lf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W1(t){if(typeof t=="function")return lf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ah)return 11;if(t===Ch)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ia(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")lf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case as:return Mr(n.children,s,i,e);case Sh:o=8,s|=8;break;case nc:return t=Lt(12,n,e,s|2),t.elementType=nc,t.lanes=i,t;case rc:return t=Lt(13,n,e,s),t.elementType=rc,t.lanes=i,t;case sc:return t=Lt(19,n,e,s),t.elementType=sc,t.lanes=i,t;case Wg:return Rl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qg:o=10;break e;case Hg:o=9;break e;case Ah:o=11;break e;case Ch:o=14;break e;case Un:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Mr(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function Rl(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=Wg,t.lanes=n,t.stateNode={isHidden:!1},t}function $u(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function qu(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uf(t,e,n,r,s,i,o,l,u){return t=new Q1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hh(i),t}function G1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Lv(t){if(!t)return ur;t=t._reactInternals;e:{if(qr(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Et(n))return Ly(t,n,e)}return e}function Fv(t,e,n,r,s,i,o,l,u){return t=uf(n,r,!0,t,s,i,o,l,u),t.context=Lv(null),n=t.current,r=dt(),s=er(n),i=Tn(r,s),i.callback=e??null,Jn(n,i,s),t.current.lanes=s,wo(t,s,r),wt(t,r),t}function Pl(t,e,n,r){var s=e.current,i=dt(),o=er(s);return n=Lv(n),e.context===null?e.context=n:e.pendingContext=n,e=Tn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jn(s,e,o),t!==null&&(Kt(t,s,o,i),va(t,s,o)),o}function el(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cf(t,e){lm(t,e),(t=t.alternate)&&lm(t,e)}function K1(){return null}var jv=typeof reportError=="function"?reportError:function(t){console.error(t)};function hf(t){this._internalRoot=t}Nl.prototype.render=hf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Pl(t,e,null,null)};Nl.prototype.unmount=hf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ur(function(){Pl(null,t,null,null)}),e[In]=null}};function Nl(t){this._internalRoot=t}Nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=gy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zn.length&&e!==0&&e<zn[n].priority;n++);zn.splice(n,0,t),n===0&&vy(t)}};function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function um(){}function X1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=el(o);i.call(h)}}var o=Fv(e,r,t,0,null,!1,!1,"",um);return t._reactRootContainer=o,t[In]=o.current,Yi(t.nodeType===8?t.parentNode:t),Ur(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=el(u);l.call(h)}}var u=uf(t,0,!1,null,null,!1,!1,"",um);return t._reactRootContainer=u,t[In]=u.current,Yi(t.nodeType===8?t.parentNode:t),Ur(function(){Pl(e,u,n,r)}),u}function Vl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=el(o);l.call(u)}}Pl(e,o,t,s)}else o=X1(n,e,t,s,r);return el(o)}py=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ii(e.pendingLanes);n!==0&&(Nh(e,n|1),wt(e,Oe()),!(fe&6)&&(bs=Oe()+500,vr()))}break;case 13:Ur(function(){var r=Sn(t,1);if(r!==null){var s=dt();Kt(r,t,1,s)}}),cf(t,1)}};kh=function(t){if(t.tag===13){var e=Sn(t,134217728);if(e!==null){var n=dt();Kt(e,t,134217728,n)}cf(t,134217728)}};my=function(t){if(t.tag===13){var e=er(t),n=Sn(t,e);if(n!==null){var r=dt();Kt(n,t,e,r)}cf(t,e)}};gy=function(){return pe};yy=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};pc=function(t,e,n){switch(e){case"input":if(ac(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tl(r);if(!s)throw Error($(90));Gg(r),ac(r,s)}}}break;case"textarea":Xg(t,n);break;case"select":e=n.value,e!=null&&vs(t,!!n.multiple,e,!1)}};ry=sf;sy=Ur;var Y1={usingClientEntryPoint:!1,Events:[xo,hs,Tl,ty,ny,sf]},wi={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J1={bundleType:wi.bundleType,version:wi.version,rendererPackageName:wi.rendererPackageName,rendererConfig:wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ay(t),t===null?null:t.stateNode},findFiberByHostInstance:wi.findFiberByHostInstance||K1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{vl=oa.inject(J1),cn=oa}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y1;Pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ff(e))throw Error($(200));return G1(t,e,null,n)};Pt.createRoot=function(t,e){if(!ff(t))throw Error($(299));var n=!1,r="",s=jv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=uf(t,1,!1,null,null,n,!1,r,s),t[In]=e.current,Yi(t.nodeType===8?t.parentNode:t),new hf(e)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=ay(e),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return Ur(t)};Pt.hydrate=function(t,e,n){if(!kl(e))throw Error($(200));return Vl(null,t,e,!0,n)};Pt.hydrateRoot=function(t,e,n){if(!ff(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Fv(e,null,t,1,n??null,s,!1,i,o),t[In]=e.current,Yi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nl(e)};Pt.render=function(t,e,n){if(!kl(e))throw Error($(200));return Vl(null,t,e,!1,n)};Pt.unmountComponentAtNode=function(t){if(!kl(t))throw Error($(40));return t._reactRootContainer?(Ur(function(){Vl(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};Pt.unstable_batchedUpdates=sf;Pt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kl(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Vl(t,e,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function Uv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uv)}catch(t){console.error(t)}}Uv(),Ug.exports=Pt;var Z1=Ug.exports,Bv,cm=Z1;Bv=cm.createRoot,cm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oo.apply(this,arguments)}var Wn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wn||(Wn={}));const hm="popstate";function eT(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Qc("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:tl(s)}return nT(e,n,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tT(){return Math.random().toString(36).substr(2,8)}function fm(t,e){return{usr:t.state,key:t.key,idx:e}}function Qc(t,e,n,r){return n===void 0&&(n=null),oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hs(e):e,{state:n,key:e&&e.key||r||tT()})}function tl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Wn.Pop,u=null,h=d();h==null&&(h=0,o.replaceState(oo({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function p(){l=Wn.Pop;let V=d(),A=V==null?null:V-h;h=V,u&&u({action:l,location:P.location,delta:A})}function m(V,A){l=Wn.Push;let v=Qc(P.location,V,A);h=d()+1;let R=fm(v,h),b=P.createHref(v);try{o.pushState(R,"",b)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(b)}i&&u&&u({action:l,location:P.location,delta:1})}function w(V,A){l=Wn.Replace;let v=Qc(P.location,V,A);h=d();let R=fm(v,h),b=P.createHref(v);o.replaceState(R,"",b),i&&u&&u({action:l,location:P.location,delta:0})}function N(V){let A=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof V=="string"?V:tl(V);return v=v.replace(/ $/,"%20"),ze(A,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,A)}let P={get action(){return l},get location(){return t(s,o)},listen(V){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(hm,p),u=V,()=>{s.removeEventListener(hm,p),u=null}},createHref(V){return e(s,V)},createURL:N,encodeLocation(V){let A=N(V);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:w,go(V){return o.go(V)}};return P}var dm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dm||(dm={}));function rT(t,e,n){return n===void 0&&(n="/"),sT(t,e,n)}function sT(t,e,n,r){let s=typeof e=="string"?Hs(e):e,i=df(s.pathname||"/",n);if(i==null)return null;let o=$v(t);iT(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=yT(i);l=pT(o[u],h)}return l}function $v(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(ze(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=nr([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),$v(i.children,e,d,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:fT(h,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of qv(i.path))s(i,o,u)}),e}function qv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=qv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function iT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oT=/^:[\w-]+$/,aT=3,lT=2,uT=1,cT=10,hT=-2,pm=t=>t==="*";function fT(t,e){let n=t.split("/"),r=n.length;return n.some(pm)&&(r+=hT),e&&(r+=lT),n.filter(s=>!pm(s)).reduce((s,i)=>s+(oT.test(i)?aT:i===""?uT:cT),r)}function dT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function pT(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=mT({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),m=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:nr([i,p.pathname]),pathnameBase:wT(nr([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=nr([i,p.pathnameBase]))}return o}function mT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=gT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,d,p)=>{let{paramName:m,isOptional:w}=d;if(m==="*"){let P=l[p]||"";o=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const N=l[p];return w&&!N?h[m]=void 0:h[m]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function gT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function yT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function df(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hs(t):t;return{pathname:n?n.startsWith("/")?n:_T(n,e):e,search:TT(r),hash:xT(s)}}function _T(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ET(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hv(t,e){let n=ET(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Hs(t):(s=oo({},t),ze(!s.pathname||!s.pathname.includes("?"),Hu("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),Hu("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),Hu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=vT(s,l),h=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}const nr=t=>t.join("/").replace(/\/\/+/g,"/"),wT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function IT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qv=["post","put","patch","delete"];new Set(Qv);const ST=["get",...Qv];new Set(ST);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ao.apply(this,arguments)}const pf=M.createContext(null),AT=M.createContext(null),Hr=M.createContext(null),Dl=M.createContext(null),Wr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Gv=M.createContext(null);function CT(t,e){let{relative:n}=e===void 0?{}:e;So()||ze(!1);let{basename:r,navigator:s}=M.useContext(Hr),{hash:i,pathname:o,search:l}=Xv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:nr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function So(){return M.useContext(Dl)!=null}function bl(){return So()||ze(!1),M.useContext(Dl).location}function Kv(t){M.useContext(Hr).static||M.useLayoutEffect(t)}function RT(){let{isDataRoute:t}=M.useContext(Wr);return t?BT():PT()}function PT(){So()||ze(!1);let t=M.useContext(pf),{basename:e,future:n,navigator:r}=M.useContext(Hr),{matches:s}=M.useContext(Wr),{pathname:i}=bl(),o=JSON.stringify(Hv(s,n.v7_relativeSplatPath)),l=M.useRef(!1);return Kv(()=>{l.current=!0}),M.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let p=Wv(h,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:nr([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,i,t])}function Xv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Hr),{matches:s}=M.useContext(Wr),{pathname:i}=bl(),o=JSON.stringify(Hv(s,r.v7_relativeSplatPath));return M.useMemo(()=>Wv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function NT(t,e){return kT(t,e)}function kT(t,e,n,r){So()||ze(!1);let{navigator:s}=M.useContext(Hr),{matches:i}=M.useContext(Wr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=bl(),d;if(e){var p;let V=typeof e=="string"?Hs(e):e;u==="/"||(p=V.pathname)!=null&&p.startsWith(u)||ze(!1),d=V}else d=h;let m=d.pathname||"/",w=m;if(u!=="/"){let V=u.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(V.length).join("/")}let N=rT(t,{pathname:w}),P=OT(N&&N.map(V=>Object.assign({},V,{params:Object.assign({},l,V.params),pathname:nr([u,s.encodeLocation?s.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?u:nr([u,s.encodeLocation?s.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),i,n,r);return e&&P?M.createElement(Dl.Provider,{value:{location:ao({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Wn.Pop}},P):P}function VT(){let t=UT(),e=IT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const DT=M.createElement(VT,null);class bT extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Wr.Provider,{value:this.props.routeContext},M.createElement(Gv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MT(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(pf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Wr.Provider,{value:e},r)}function OT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);d>=0||ze(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:m,errors:w}=n,N=p.route.loader&&m[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||N){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let w,N=!1,P=null,V=null;n&&(w=l&&p.route.id?l[p.route.id]:void 0,P=p.route.errorElement||DT,u&&(h<0&&m===0?(zT("route-fallback"),N=!0,V=null):h===m&&(N=!0,V=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,m+1)),v=()=>{let R;return w?R=P:N?R=V:p.route.Component?R=M.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=d,M.createElement(MT,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?M.createElement(bT,{location:n.location,revalidation:n.revalidation,component:P,error:w,children:v(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):v()},null)}var Yv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Yv||{}),Jv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Jv||{});function LT(t){let e=M.useContext(pf);return e||ze(!1),e}function FT(t){let e=M.useContext(AT);return e||ze(!1),e}function jT(t){let e=M.useContext(Wr);return e||ze(!1),e}function Zv(t){let e=jT(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function UT(){var t;let e=M.useContext(Gv),n=FT(),r=Zv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function BT(){let{router:t}=LT(Yv.UseNavigateStable),e=Zv(Jv.UseNavigateStable),n=M.useRef(!1);return Kv(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ao({fromRouteId:e},i)))},[t,e])}const mm={};function zT(t,e,n){mm[t]||(mm[t]=!0)}function $T(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Rr(t){ze(!1)}function qT(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Wn.Pop,navigator:i,static:o=!1,future:l}=t;So()&&ze(!1);let u=e.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:i,static:o,future:ao({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Hs(r));let{pathname:d="/",search:p="",hash:m="",state:w=null,key:N="default"}=r,P=M.useMemo(()=>{let V=df(d,u);return V==null?null:{location:{pathname:V,search:p,hash:m,state:w,key:N},navigationType:s}},[u,d,p,m,w,N,s]);return P==null?null:M.createElement(Hr.Provider,{value:h},M.createElement(Dl.Provider,{children:n,value:P}))}function HT(t){let{children:e,location:n}=t;return NT(Gc(e),n)}new Promise(()=>{});function Gc(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Gc(r.props.children,i));return}r.type!==Rr&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kc(){return Kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kc.apply(this,arguments)}function WT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function QT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GT(t,e){return t.button===0&&(!e||e==="_self")&&!QT(t)}const KT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XT="6";try{window.__reactRouterVersion=XT}catch{}const YT="startTransition",gm=zE[YT];function JT(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=eT({window:s,v5Compat:!0}));let o=i.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},d=M.useCallback(p=>{h&&gm?gm(()=>u(p)):u(p)},[u,h]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.useEffect(()=>$T(r),[r]),M.createElement(qT,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const ZT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ex=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tx=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:p}=e,m=WT(e,KT),{basename:w}=M.useContext(Hr),N,P=!1;if(typeof h=="string"&&ex.test(h)&&(N=h,ZT))try{let R=new URL(window.location.href),b=h.startsWith("//")?new URL(R.protocol+h):new URL(h),U=df(b.pathname,w);b.origin===R.origin&&U!=null?h=U+b.search+b.hash:P=!0}catch{}let V=CT(h,{relative:s}),A=nx(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:p});function v(R){r&&r(R),R.defaultPrevented||A(R)}return M.createElement("a",Kc({},m,{href:N||V,onClick:P||i?r:v,ref:n,target:u}))});var ym;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ym||(ym={}));var vm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vm||(vm={}));function nx(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=RT(),h=bl(),d=Xv(t,{relative:o});return M.useCallback(p=>{if(GT(p,n)){p.preventDefault();let m=r!==void 0?r:tl(h)===tl(d);u(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[h,u,d,r,s,n,t,i,o,l])}function rx(){const t=[{title:"1. Root of Equation",topics:[{id:"bisection",name:"Bisection Method",path:"/bisection"},{id:"falsepo",name:"False-Position Method",path:"/falsepo"},{id:"onepoint",name:"One-Point Method",path:"/onepoint"},{id:"newtonrap",name:"Newton Raphson Method",path:"/newtonrap"},{id:"secant",name:"Secant Method",path:"/secant"}]},{title:"2. Linear System",topics:[{id:"gauss-elim",name:"Gauss Elimination",path:"/gauss-elim"},{id:"gauss-jordan",name:"Gauss-Jordan",path:"/gauss-jordan"},{id:"lu",name:"LU Decomposition",path:"/lu"}]},{title:"3. Interpolation",topics:[{id:"lagrange",name:"Lagrange",path:"/lagrange"},{id:"newton-interp",name:"Newton Interpolation",path:"/newton-interp"}]},{title:"4. Regression",topics:[{id:"linear-reg",name:"Linear Regression",path:"/linear-reg"},{id:"poly-reg",name:"Polynomial Regression",path:"/poly-reg"}]},{title:"5. Integration",topics:[{id:"trapezoidal",name:"Trapezoidal Rule",path:"/trapezoidal"},{id:"simpson",name:"Simpson’s Rule",path:"/simpson"}]},{title:"6. Differentiation",topics:[{id:"forward-diff",name:"Forward Difference",path:"/forward-diff"},{id:"backward-diff",name:"Backward Difference",path:"/backward-diff"},{id:"central-diff",name:"Central Difference",path:"/central-diff"}]}];return E.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center p-6 bg-slate-900",children:[E.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-8 text-center fade-in",children:"Numerical Methods"}),E.jsx("div",{className:"flex justify-center items-center w-full",children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:t.map(e=>E.jsxs("div",{className:`bg-slate-800 rounded-xl p-5 shadow-lg border border-cyan-700 w-72\r
                         transform transition-all duration-300 fade-in-delay1\r
                         hover:scale-105 hover:shadow-2xl glow-btn`,children:[E.jsx("h2",{className:"text-lg font-semibold text-cyan-300 mb-3 text-center",children:e.title}),E.jsx("ul",{className:"space-y-2",children:e.topics.map(n=>E.jsx("li",{className:"bg-slate-700 p-2 rounded-md hover:bg-slate-600 transition-colors",children:E.jsx(tx,{to:n.path,className:"block text-center",children:n.name})},n.id))})]},e.title))})})]})}const sx=()=>{};var _m={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ix=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},t_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,w=h&63;u||(w=64,o||(m=64)),r.push(n[d],n[p],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(e_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ix(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new ox;const m=i<<2|l>>4;if(r.push(m),h!==64){const w=l<<4&240|h>>2;if(r.push(w),p!==64){const N=h<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ox extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ax=function(t){const e=e_(t);return t_.encodeByteArray(e,!0)},nl=function(t){return ax(t).replace(/\./g,"")},lx=function(t){try{return t_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=()=>ux().__FIREBASE_DEFAULTS__,hx=()=>{if(typeof process>"u"||typeof _m>"u")return;const t=_m.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lx(t[1]);return e&&JSON.parse(e)},mf=()=>{try{return sx()||cx()||hx()||fx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dx=t=>{var e,n;return(n=(e=mf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},px=t=>{const e=dx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},n_=()=>{var t;return(t=mf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nl(JSON.stringify(n)),nl(JSON.stringify(o)),""].join(".")}const Fi={};function vx(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fi))Fi[e]?t.emulator.push(e):t.prod.push(e);return t}function _x(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Em=!1;function Ex(t,e){if(typeof window>"u"||typeof document>"u"||!gf(window.location.host)||Fi[t]===e||Fi[t]||Em)return;Fi[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=vx().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Em=!0,o()},m}function d(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=_x(r),w=n("text"),N=document.getElementById(w)||document.createElement("span"),P=n("learnmore"),V=document.getElementById(P)||document.createElement("a"),A=n("preprendIcon"),v=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),d(V,P);const b=h();u(v,A),R.append(v,N,V,b),document.body.appendChild(R)}i?(N.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tx(){var e;const t=(e=mf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xx(){return!Tx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ix(){try{return typeof indexedDB=="object"}catch{return!1}}function Sx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="FirebaseError";class Ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ax,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,r_.prototype.create)}}class r_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Cx(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ws(s,l,r)}}function Cx(t,e){return t.replace(Rx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Rx=/\{\$([^}]+)}/g;function rl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(wm(i)&&wm(o)){if(!rl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t){return t&&t._delegate?t._delegate:t}class lo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kx(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Nx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nx(t){return t===Pr?void 0:t}function kx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Px(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const Dx={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},bx=he.INFO,Mx={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},Ox=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Mx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s_{constructor(e){this.name=e,this._logLevel=bx,this._logHandler=Ox,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const Lx=(t,e)=>e.some(n=>t instanceof n);let Tm,xm;function Fx(){return Tm||(Tm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jx(){return xm||(xm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i_=new WeakMap,Xc=new WeakMap,o_=new WeakMap,Wu=new WeakMap,yf=new WeakMap;function Ux(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(rr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&i_.set(n,t)}).catch(()=>{}),yf.set(e,t),e}function Bx(t){if(Xc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xc.set(t,e)}let Yc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||o_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zx(t){Yc=t(Yc)}function $x(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qu(this),e,...n);return o_.set(r,e.sort?e.sort():[e]),rr(r)}:jx().includes(t)?function(...e){return t.apply(Qu(this),e),rr(i_.get(this))}:function(...e){return rr(t.apply(Qu(this),e))}}function qx(t){return typeof t=="function"?$x(t):(t instanceof IDBTransaction&&Bx(t),Lx(t,Fx())?new Proxy(t,Yc):t)}function rr(t){if(t instanceof IDBRequest)return Ux(t);if(Wu.has(t))return Wu.get(t);const e=qx(t);return e!==t&&(Wu.set(t,e),yf.set(e,t)),e}const Qu=t=>yf.get(t);function Hx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=rr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(rr(o.result),u.oldVersion,u.newVersion,rr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Wx=["get","getKey","getAll","getAllKeys","count"],Qx=["put","add","delete","clear"],Gu=new Map;function Im(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gu.get(e))return Gu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Qx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Wx.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Gu.set(e,i),i}zx(t=>({...t,get:(e,n,r)=>Im(e,n)||t.get(e,n,r),has:(e,n)=>!!Im(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Kx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jc="@firebase/app",Sm="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new s_("@firebase/app"),Xx="@firebase/app-compat",Yx="@firebase/analytics-compat",Jx="@firebase/analytics",Zx="@firebase/app-check-compat",eI="@firebase/app-check",tI="@firebase/auth",nI="@firebase/auth-compat",rI="@firebase/database",sI="@firebase/data-connect",iI="@firebase/database-compat",oI="@firebase/functions",aI="@firebase/functions-compat",lI="@firebase/installations",uI="@firebase/installations-compat",cI="@firebase/messaging",hI="@firebase/messaging-compat",fI="@firebase/performance",dI="@firebase/performance-compat",pI="@firebase/remote-config",mI="@firebase/remote-config-compat",gI="@firebase/storage",yI="@firebase/storage-compat",vI="@firebase/firestore",_I="@firebase/ai",EI="@firebase/firestore-compat",wI="firebase",TI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="[DEFAULT]",xI={[Jc]:"fire-core",[Xx]:"fire-core-compat",[Jx]:"fire-analytics",[Yx]:"fire-analytics-compat",[eI]:"fire-app-check",[Zx]:"fire-app-check-compat",[tI]:"fire-auth",[nI]:"fire-auth-compat",[rI]:"fire-rtdb",[sI]:"fire-data-connect",[iI]:"fire-rtdb-compat",[oI]:"fire-fn",[aI]:"fire-fn-compat",[lI]:"fire-iid",[uI]:"fire-iid-compat",[cI]:"fire-fcm",[hI]:"fire-fcm-compat",[fI]:"fire-perf",[dI]:"fire-perf-compat",[pI]:"fire-rc",[mI]:"fire-rc-compat",[gI]:"fire-gcs",[yI]:"fire-gcs-compat",[vI]:"fire-fst",[EI]:"fire-fst-compat",[_I]:"fire-vertex","fire-js":"fire-js",[wI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Map,II=new Map,eh=new Map;function Am(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function il(t){const e=t.name;if(eh.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,t);for(const n of sl.values())Am(n,t);for(const n of II.values())Am(n,t);return!0}function SI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function AI(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new r_("app","Firebase",CI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=TI;function a_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Zc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw sr.create("bad-app-name",{appName:String(s)});if(n||(n=n_()),!n)throw sr.create("no-options");const i=sl.get(s);if(i){if(rl(n,i.options)&&rl(r,i.config))return i;throw sr.create("duplicate-app",{appName:s})}const o=new Vx(s);for(const u of eh.values())o.addComponent(u);const l=new RI(n,r,o);return sl.set(s,l),l}function NI(t=Zc){const e=sl.get(t);if(!e&&t===Zc&&n_())return a_();if(!e)throw sr.create("no-app",{appName:t});return e}function Is(t,e,n){let r=xI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(o.join(" "));return}il(new lo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebase-heartbeat-database",VI=1,uo="firebase-heartbeat-store";let Ku=null;function l_(){return Ku||(Ku=Hx(kI,VI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),Ku}async function DI(t){try{const n=(await l_()).transaction(uo),r=await n.objectStore(uo).get(u_(t));return await n.done,r}catch(e){if(e instanceof Ws)Cn.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(n.message)}}}async function Cm(t,e){try{const r=(await l_()).transaction(uo,"readwrite");await r.objectStore(uo).put(e,u_(t)),await r.done}catch(n){if(n instanceof Ws)Cn.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(r.message)}}}function u_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1024,MI=30;class OI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>MI){const o=jI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rm(),{heartbeatsToSend:r,unsentEntries:s}=LI(this._heartbeatsCache.heartbeats),i=nl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Cn.warn(n),""}}}function Rm(){return new Date().toISOString().substring(0,10)}function LI(t,e=bI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Pm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Pm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ix()?Sx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Pm(t){return nl(JSON.stringify({version:2,heartbeats:t})).length}function jI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){il(new lo("platform-logger",e=>new Gx(e),"PRIVATE")),il(new lo("heartbeat",e=>new OI(e),"PRIVATE")),Is(Jc,Sm,t),Is(Jc,Sm,"esm2020"),Is("fire-js","")}UI("");var BI="firebase",zI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(BI,zI,"app");var Nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,c_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function S(){}S.prototype=y.prototype,T.F=y.prototype,T.prototype=new S,T.prototype.constructor=T,T.D=function(C,I,x){for(var _=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)_[Q-2]=arguments[Q];return y.prototype[I].apply(C,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,S){S||(S=0);const C=Array(16);if(typeof y=="string")for(var I=0;I<16;++I)C[I]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(I=0;I<16;++I)C[I]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=T.g[0],S=T.g[1],I=T.g[2];let x=T.g[3],_;_=y+(x^S&(I^x))+C[0]+3614090360&4294967295,y=S+(_<<7&4294967295|_>>>25),_=x+(I^y&(S^I))+C[1]+3905402710&4294967295,x=y+(_<<12&4294967295|_>>>20),_=I+(S^x&(y^S))+C[2]+606105819&4294967295,I=x+(_<<17&4294967295|_>>>15),_=S+(y^I&(x^y))+C[3]+3250441966&4294967295,S=I+(_<<22&4294967295|_>>>10),_=y+(x^S&(I^x))+C[4]+4118548399&4294967295,y=S+(_<<7&4294967295|_>>>25),_=x+(I^y&(S^I))+C[5]+1200080426&4294967295,x=y+(_<<12&4294967295|_>>>20),_=I+(S^x&(y^S))+C[6]+2821735955&4294967295,I=x+(_<<17&4294967295|_>>>15),_=S+(y^I&(x^y))+C[7]+4249261313&4294967295,S=I+(_<<22&4294967295|_>>>10),_=y+(x^S&(I^x))+C[8]+1770035416&4294967295,y=S+(_<<7&4294967295|_>>>25),_=x+(I^y&(S^I))+C[9]+2336552879&4294967295,x=y+(_<<12&4294967295|_>>>20),_=I+(S^x&(y^S))+C[10]+4294925233&4294967295,I=x+(_<<17&4294967295|_>>>15),_=S+(y^I&(x^y))+C[11]+2304563134&4294967295,S=I+(_<<22&4294967295|_>>>10),_=y+(x^S&(I^x))+C[12]+1804603682&4294967295,y=S+(_<<7&4294967295|_>>>25),_=x+(I^y&(S^I))+C[13]+4254626195&4294967295,x=y+(_<<12&4294967295|_>>>20),_=I+(S^x&(y^S))+C[14]+2792965006&4294967295,I=x+(_<<17&4294967295|_>>>15),_=S+(y^I&(x^y))+C[15]+1236535329&4294967295,S=I+(_<<22&4294967295|_>>>10),_=y+(I^x&(S^I))+C[1]+4129170786&4294967295,y=S+(_<<5&4294967295|_>>>27),_=x+(S^I&(y^S))+C[6]+3225465664&4294967295,x=y+(_<<9&4294967295|_>>>23),_=I+(y^S&(x^y))+C[11]+643717713&4294967295,I=x+(_<<14&4294967295|_>>>18),_=S+(x^y&(I^x))+C[0]+3921069994&4294967295,S=I+(_<<20&4294967295|_>>>12),_=y+(I^x&(S^I))+C[5]+3593408605&4294967295,y=S+(_<<5&4294967295|_>>>27),_=x+(S^I&(y^S))+C[10]+38016083&4294967295,x=y+(_<<9&4294967295|_>>>23),_=I+(y^S&(x^y))+C[15]+3634488961&4294967295,I=x+(_<<14&4294967295|_>>>18),_=S+(x^y&(I^x))+C[4]+3889429448&4294967295,S=I+(_<<20&4294967295|_>>>12),_=y+(I^x&(S^I))+C[9]+568446438&4294967295,y=S+(_<<5&4294967295|_>>>27),_=x+(S^I&(y^S))+C[14]+3275163606&4294967295,x=y+(_<<9&4294967295|_>>>23),_=I+(y^S&(x^y))+C[3]+4107603335&4294967295,I=x+(_<<14&4294967295|_>>>18),_=S+(x^y&(I^x))+C[8]+1163531501&4294967295,S=I+(_<<20&4294967295|_>>>12),_=y+(I^x&(S^I))+C[13]+2850285829&4294967295,y=S+(_<<5&4294967295|_>>>27),_=x+(S^I&(y^S))+C[2]+4243563512&4294967295,x=y+(_<<9&4294967295|_>>>23),_=I+(y^S&(x^y))+C[7]+1735328473&4294967295,I=x+(_<<14&4294967295|_>>>18),_=S+(x^y&(I^x))+C[12]+2368359562&4294967295,S=I+(_<<20&4294967295|_>>>12),_=y+(S^I^x)+C[5]+4294588738&4294967295,y=S+(_<<4&4294967295|_>>>28),_=x+(y^S^I)+C[8]+2272392833&4294967295,x=y+(_<<11&4294967295|_>>>21),_=I+(x^y^S)+C[11]+1839030562&4294967295,I=x+(_<<16&4294967295|_>>>16),_=S+(I^x^y)+C[14]+4259657740&4294967295,S=I+(_<<23&4294967295|_>>>9),_=y+(S^I^x)+C[1]+2763975236&4294967295,y=S+(_<<4&4294967295|_>>>28),_=x+(y^S^I)+C[4]+1272893353&4294967295,x=y+(_<<11&4294967295|_>>>21),_=I+(x^y^S)+C[7]+4139469664&4294967295,I=x+(_<<16&4294967295|_>>>16),_=S+(I^x^y)+C[10]+3200236656&4294967295,S=I+(_<<23&4294967295|_>>>9),_=y+(S^I^x)+C[13]+681279174&4294967295,y=S+(_<<4&4294967295|_>>>28),_=x+(y^S^I)+C[0]+3936430074&4294967295,x=y+(_<<11&4294967295|_>>>21),_=I+(x^y^S)+C[3]+3572445317&4294967295,I=x+(_<<16&4294967295|_>>>16),_=S+(I^x^y)+C[6]+76029189&4294967295,S=I+(_<<23&4294967295|_>>>9),_=y+(S^I^x)+C[9]+3654602809&4294967295,y=S+(_<<4&4294967295|_>>>28),_=x+(y^S^I)+C[12]+3873151461&4294967295,x=y+(_<<11&4294967295|_>>>21),_=I+(x^y^S)+C[15]+530742520&4294967295,I=x+(_<<16&4294967295|_>>>16),_=S+(I^x^y)+C[2]+3299628645&4294967295,S=I+(_<<23&4294967295|_>>>9),_=y+(I^(S|~x))+C[0]+4096336452&4294967295,y=S+(_<<6&4294967295|_>>>26),_=x+(S^(y|~I))+C[7]+1126891415&4294967295,x=y+(_<<10&4294967295|_>>>22),_=I+(y^(x|~S))+C[14]+2878612391&4294967295,I=x+(_<<15&4294967295|_>>>17),_=S+(x^(I|~y))+C[5]+4237533241&4294967295,S=I+(_<<21&4294967295|_>>>11),_=y+(I^(S|~x))+C[12]+1700485571&4294967295,y=S+(_<<6&4294967295|_>>>26),_=x+(S^(y|~I))+C[3]+2399980690&4294967295,x=y+(_<<10&4294967295|_>>>22),_=I+(y^(x|~S))+C[10]+4293915773&4294967295,I=x+(_<<15&4294967295|_>>>17),_=S+(x^(I|~y))+C[1]+2240044497&4294967295,S=I+(_<<21&4294967295|_>>>11),_=y+(I^(S|~x))+C[8]+1873313359&4294967295,y=S+(_<<6&4294967295|_>>>26),_=x+(S^(y|~I))+C[15]+4264355552&4294967295,x=y+(_<<10&4294967295|_>>>22),_=I+(y^(x|~S))+C[6]+2734768916&4294967295,I=x+(_<<15&4294967295|_>>>17),_=S+(x^(I|~y))+C[13]+1309151649&4294967295,S=I+(_<<21&4294967295|_>>>11),_=y+(I^(S|~x))+C[4]+4149444226&4294967295,y=S+(_<<6&4294967295|_>>>26),_=x+(S^(y|~I))+C[11]+3174756917&4294967295,x=y+(_<<10&4294967295|_>>>22),_=I+(y^(x|~S))+C[2]+718787259&4294967295,I=x+(_<<15&4294967295|_>>>17),_=S+(x^(I|~y))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+x&4294967295}r.prototype.v=function(T,y){y===void 0&&(y=T.length);const S=y-this.blockSize,C=this.C;let I=this.h,x=0;for(;x<y;){if(I==0)for(;x<=S;)s(this,T,x),x+=this.blockSize;if(typeof T=="string"){for(;x<y;)if(C[I++]=T.charCodeAt(x++),I==this.blockSize){s(this,C),I=0;break}}else for(;x<y;)if(C[I++]=T[x++],I==this.blockSize){s(this,C),I=0;break}}this.h=I,this.o+=y},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;y=this.o*8;for(var S=T.length-8;S<T.length;++S)T[S]=y&255,y/=256;for(this.v(T),T=Array(16),y=0,S=0;S<4;++S)for(let C=0;C<32;C+=8)T[y++]=this.g[S]>>>C&255;return T};function i(T,y){var S=l;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=y(T)}function o(T,y){this.h=y;const S=[];let C=!0;for(let I=T.length-1;I>=0;I--){const x=T[I]|0;C&&x==y||(S[I]=x,C=!1)}this.g=S}var l={};function u(T){return-128<=T&&T<128?i(T,function(y){return new o([y|0],y<0?-1:0)}):new o([T|0],T<0?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return V(h(-T));const y=[];let S=1;for(let C=0;T>=S;C++)y[C]=T/S|0,S*=4294967296;return new o(y,0)}function d(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return V(d(T.substring(1),y));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=h(Math.pow(y,8));let C=p;for(let x=0;x<T.length;x+=8){var I=Math.min(8,T.length-x);const _=parseInt(T.substring(x,x+I),y);I<8?(I=h(Math.pow(y,I)),C=C.j(I).add(h(_))):(C=C.j(S),C=C.add(h(_)))}return C}var p=u(0),m=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-V(this).m();let T=0,y=1;for(let S=0;S<this.g.length;S++){const C=this.i(S);T+=(C>=0?C:4294967296+C)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(N(this))return"0";if(P(this))return"-"+V(this).toString(T);const y=h(Math.pow(T,6));var S=this;let C="";for(;;){const I=b(S,y).g;S=A(S,I.j(y));let x=((S.g.length>0?S.g[0]:S.h)>>>0).toString(T);if(S=I,N(S))return x+C;for(;x.length<6;)x="0"+x;C=x+C}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function N(T){if(T.h!=0)return!1;for(let y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=A(this,T),P(T)?-1:N(T)?0:1};function V(T){const y=T.g.length,S=[];for(let C=0;C<y;C++)S[C]=~T.g[C];return new o(S,~T.h).add(m)}t.abs=function(){return P(this)?V(this):this},t.add=function(T){const y=Math.max(this.g.length,T.g.length),S=[];let C=0;for(let I=0;I<=y;I++){let x=C+(this.i(I)&65535)+(T.i(I)&65535),_=(x>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);C=_>>>16,x&=65535,_&=65535,S[I]=_<<16|x}return new o(S,S[S.length-1]&-2147483648?-1:0)};function A(T,y){return T.add(V(y))}t.j=function(T){if(N(this)||N(T))return p;if(P(this))return P(T)?V(this).j(V(T)):V(V(this).j(T));if(P(T))return V(this.j(V(T)));if(this.l(w)<0&&T.l(w)<0)return h(this.m()*T.m());const y=this.g.length+T.g.length,S=[];for(var C=0;C<2*y;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(let I=0;I<T.g.length;I++){const x=this.i(C)>>>16,_=this.i(C)&65535,Q=T.i(I)>>>16,se=T.i(I)&65535;S[2*C+2*I]+=_*se,v(S,2*C+2*I),S[2*C+2*I+1]+=x*se,v(S,2*C+2*I+1),S[2*C+2*I+1]+=_*Q,v(S,2*C+2*I+1),S[2*C+2*I+2]+=x*Q,v(S,2*C+2*I+2)}for(T=0;T<y;T++)S[T]=S[2*T+1]<<16|S[2*T];for(T=y;T<2*y;T++)S[T]=0;return new o(S,0)};function v(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function R(T,y){this.g=T,this.h=y}function b(T,y){if(N(y))throw Error("division by zero");if(N(T))return new R(p,p);if(P(T))return y=b(V(T),y),new R(V(y.g),V(y.h));if(P(y))return y=b(T,V(y)),new R(V(y.g),y.h);if(T.g.length>30){if(P(T)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var S=m,C=y;C.l(T)<=0;)S=U(S),C=U(C);var I=q(S,1),x=q(C,1);for(C=q(C,2),S=q(S,2);!N(C);){var _=x.add(C);_.l(T)<=0&&(I=I.add(S),x=_),C=q(C,1),S=q(S,1)}return y=A(T,I.j(y)),new R(I,y)}for(I=p;T.l(y)>=0;){for(S=Math.max(1,Math.floor(T.m()/y.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),x=h(S),_=x.j(y);P(_)||_.l(T)>0;)S-=C,x=h(S),_=x.j(y);N(x)&&(x=m),I=I.add(x),T=A(T,_)}return new R(I,T)}t.B=function(T){return b(this,T).h},t.and=function(T){const y=Math.max(this.g.length,T.g.length),S=[];for(let C=0;C<y;C++)S[C]=this.i(C)&T.i(C);return new o(S,this.h&T.h)},t.or=function(T){const y=Math.max(this.g.length,T.g.length),S=[];for(let C=0;C<y;C++)S[C]=this.i(C)|T.i(C);return new o(S,this.h|T.h)},t.xor=function(T){const y=Math.max(this.g.length,T.g.length),S=[];for(let C=0;C<y;C++)S[C]=this.i(C)^T.i(C);return new o(S,this.h^T.h)};function U(T){const y=T.g.length+1,S=[];for(let C=0;C<y;C++)S[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(S,T.h)}function q(T,y){const S=y>>5;y%=32;const C=T.g.length-S,I=[];for(let x=0;x<C;x++)I[x]=y>0?T.i(x+S)>>>y|T.i(x+S+1)<<32-y:T.i(x+S);return new o(I,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,c_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,ir=o}).apply(typeof Nm<"u"?Nm:typeof self<"u"?self:typeof window<"u"?window:{});var aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h_,Ai,f_,Sa,th,d_,p_,m_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof aa=="object"&&aa];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in f))break e;f=f[k]}a=a[a.length-1],g=f[a],c=c(g),c!=g&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(c){var f=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&f.push([g,c[g]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function d(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,k,D){for(var W=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)W[ie-2]=arguments[ie];return c.prototype[k].apply(g,W)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const c=a.length;if(c>0){const f=Array(c);for(let g=0;g<c;g++)f[g]=a[g];return f}return[]}function N(a,c){for(let g=1;g<arguments.length;g++){const k=arguments[g];var f=typeof k;if(f=f!="object"?f:k?Array.isArray(k)?"array":f:"null",f=="array"||f=="object"&&typeof k.length=="number"){f=a.length||0;const D=k.length||0;a.length=f+D;for(let W=0;W<D;W++)a[f+W]=k[W]}else a.push(k)}}class P{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function V(a){o.setTimeout(()=>{throw a},0)}function A(){var a=T;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class v{constructor(){this.h=this.g=null}add(c,f){const g=R.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var R=new P(()=>new b,a=>a.reset());class b{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let U,q=!1,T=new v,y=()=>{const a=Promise.resolve(void 0);U=()=>{a.then(S)}};function S(){for(var a;a=A();){try{a.h.call(a.g)}catch(f){V(f)}var c=R;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}q=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var x=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function _(a){return/^[\s\xa0]*$/.test(a)}function Q(a,c){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}p(Q,I),Q.prototype.init=function(a,c){const f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Q.Z.h.call(this)},Q.prototype.h=function(){Q.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),H=0;function B(a,c,f,g,k){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=k,this.key=++H,this.da=this.fa=!1}function O(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function F(a,c,f){for(const g in a)c.call(f,a[g],g,a)}function z(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function J(a){const c={};for(const f in a)c[f]=a[f];return c}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ve(a,c){let f,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(f in g)a[f]=g[f];for(let D=0;D<ee.length;D++)f=ee[D],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function me(a){this.src=a,this.g={},this.h=0}me.prototype.add=function(a,c,f,g,k){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const W=ge(a,c,g,k);return W>-1?(c=a[W],f||(c.fa=!1)):(c=new B(c,this.src,D,!!g,k),c.fa=f,a.push(c)),c};function Se(a,c){const f=c.type;if(f in a.g){var g=a.g[f],k=Array.prototype.indexOf.call(g,c,void 0),D;(D=k>=0)&&Array.prototype.splice.call(g,k,1),D&&(O(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ge(a,c,f,g){for(let k=0;k<a.length;++k){const D=a[k];if(!D.da&&D.listener==c&&D.capture==!!f&&D.ha==g)return k}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Tt={};function kn(a,c,f,g,k){if(Array.isArray(c)){for(let D=0;D<c.length;D++)kn(a,c[D],f,g,k);return null}return f=ye(f),a&&a[se]?a.J(c,f,l(g)?!!g.capture:!1,k):Er(a,c,f,!1,g,k)}function Er(a,c,f,g,k,D){if(!c)throw Error("Invalid event type");const W=l(k)?!!k.capture:!!k;let ie=kt(a);if(ie||(a[Ae]=ie=new me(a)),f=ie.add(c,f,g,W,D),f.proxy)return f;if(g=Jt(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)x||(k=W),k===void 0&&(k=!1),a.addEventListener(c.toString(),g,k);else if(a.attachEvent)a.attachEvent(tn(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Jt(){function a(f){return c.call(a.src,a.listener,f)}const c=xt;return a}function Zt(a,c,f,g,k){if(Array.isArray(c))for(var D=0;D<c.length;D++)Zt(a,c[D],f,g,k);else g=l(g)?!!g.capture:!!g,f=ye(f),a&&a[se]?(a=a.i,D=String(c).toString(),D in a.g&&(c=a.g[D],f=ge(c,f,g,k),f>-1&&(O(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[D],a.h--)))):a&&(a=kt(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ge(c,f,g,k)),(f=a>-1?c[a]:null)&&en(f))}function en(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[se])Se(c.i,a);else{var f=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(f,g,a.capture):c.detachEvent?c.detachEvent(tn(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=kt(c))?(Se(f,a),f.h==0&&(f.src=null,c[Ae]=null)):O(a)}}}function tn(a){return a in Tt?Tt[a]:Tt[a]="on"+a}function xt(a,c){if(a.da)a=!0;else{c=new Q(c,this);const f=a.listener,g=a.ha||a.src;a.fa&&en(a),a=f.call(g,c)}return a}function kt(a){return a=a[Ae],a instanceof me?a:null}var nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function ye(a){return typeof a=="function"?a:(a[nn]||(a[nn]=function(c){return a.handleEvent(c)}),a[nn])}function te(){C.call(this),this.i=new me(this),this.M=this,this.G=null}p(te,C),te.prototype[se]=!0,te.prototype.removeEventListener=function(a,c,f,g){Zt(this,a,c,f,g)};function ue(a,c){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new I(c,a);else if(c instanceof I)c.target=c.target||a;else{var k=c;c=new I(g,a),Ve(c,k)}k=!0;let D,W;if(f)for(W=f.length-1;W>=0;W--)D=c.g=f[W],k=Le(D,g,!0,c)&&k;if(D=c.g=a,k=Le(D,g,!0,c)&&k,k=Le(D,g,!1,c)&&k,f)for(W=0;W<f.length;W++)D=c.g=f[W],k=Le(D,g,!1,c)&&k}te.prototype.N=function(){if(te.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let g=0;g<f.length;g++)O(f[g]);delete a.g[c],a.h--}}this.G=null},te.prototype.J=function(a,c,f,g){return this.i.add(String(a),c,!1,f,g)},te.prototype.K=function(a,c,f,g){return this.i.add(String(a),c,!0,f,g)};function Le(a,c,f,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let k=!0;for(let D=0;D<c.length;++D){const W=c[D];if(W&&!W.da&&W.capture==f){const ie=W.listener,$e=W.ha||W.src;W.fa&&Se(a.i,W),k=ie.call($e,g)!==!1&&k}}return k&&!g.defaultPrevented}function Vt(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Vn(a){a.g=Vt(()=>{a.g=null,a.i&&(a.i=!1,Vn(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Z0 extends C{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(a){C.call(this),this.h=a,this.g={}}p(Js,C);var ud=[];function cd(a){F(a.g,function(c,f){this.g.hasOwnProperty(f)&&en(c)},a),a.g={}}Js.prototype.N=function(){Js.Z.N.call(this),cd(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nu=o.JSON.stringify,eE=o.JSON.parse,tE=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function hd(){}function fd(){}var Zs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ru(){I.call(this,"d")}p(ru,I);function su(){I.call(this,"c")}p(su,I);var wr={},dd=null;function Do(){return dd=dd||new te}wr.Ia="serverreachability";function pd(a){I.call(this,wr.Ia,a)}p(pd,I);function ei(a){const c=Do();ue(c,new pd(c))}wr.STAT_EVENT="statevent";function md(a,c){I.call(this,wr.STAT_EVENT,a),this.stat=c}p(md,I);function ht(a){const c=Do();ue(c,new md(c,a))}wr.Ja="timingevent";function gd(a,c){I.call(this,wr.Ja,a),this.size=c}p(gd,I);function ti(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function nE(a,c,f,g,k,D){a.info(function(){if(a.g)if(D){var W="",ie=D.split("&");for(let ve=0;ve<ie.length;ve++){var $e=ie[ve].split("=");if($e.length>1){const Qe=$e[0];$e=$e[1];const sn=Qe.split("_");W=sn.length>=2&&sn[1]=="type"?W+(Qe+"="+$e+"&"):W+(Qe+"=redacted&")}}}else W=null;else W=D;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+c+`
`+f+`
`+W})}function rE(a,c,f,g,k,D,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+c+`
`+f+`
`+D+" "+W})}function Jr(a,c,f,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+iE(a,f)+(g?" "+g:"")})}function sE(a,c){a.info(function(){return"TIMEOUT: "+c})}ni.prototype.info=function(){};function iE(a,c){if(!a.g)return c;if(!c)return null;try{const D=JSON.parse(c);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var f=D[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var k=g[0];if(k!="noop"&&k!="stop"&&k!="close")for(let W=1;W<g.length;W++)g[W]=""}}}}return nu(D)}catch{return c}}var bo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vd;function iu(){}p(iu,hd),iu.prototype.g=function(){return new XMLHttpRequest},vd=new iu;function ri(a){return encodeURIComponent(String(a))}function oE(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function Dn(a,c,f,g){this.j=a,this.i=c,this.l=f,this.S=g||1,this.V=new Js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _d}function _d(){this.i=null,this.g="",this.h=!1}var Ed={},ou={};function au(a,c,f){a.M=1,a.A=Oo(rn(c)),a.u=f,a.R=!0,wd(a,null)}function wd(a,c){a.F=Date.now(),Mo(a),a.B=rn(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),bd(f.i,"t",g),a.C=0,f=a.j.L,a.h=new _d,a.g=Jd(a.j,f?c:null,!a.u),a.P>0&&(a.O=new Z0(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,g=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(ud[0]=k.toString()),k=ud);for(let D=0;D<k.length;D++){const W=kn(f,k[D],g||c.handleEvent,!1,c.h||c);if(!W)break;c.g[W.key]=W}c=a.J?J(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),ei(),nE(a.i,a.v,a.B,a.l,a.S,a.u)}Dn.prototype.ba=function(a){a=a.target;const c=this.O;c&&On(a)==3?c.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)e:{const ie=On(this.g),$e=this.g.ya(),ve=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Bd(this.g)))){this.K||ie!=4||$e==7||($e==8||ve<=0?ei(3):ei(2)),lu(this);var c=this.g.ca();this.X=c;var f=aE(this);if(this.o=c==200,rE(this.i,this.v,this.B,this.l,this.S,ie,c),this.o){if(this.U&&!this.L){t:{if(this.g){var g,k=this.g;if((g=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var D=g;break t}}D=null}if(a=D)Jr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,uu(this,a);else{this.o=!1,this.m=3,ht(12),Tr(this),si(this);break e}}if(this.R){a=!0;let Qe;for(;!this.K&&this.C<f.length;)if(Qe=lE(this,f),Qe==ou){ie==4&&(this.m=4,ht(14),a=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==Ed){this.m=4,ht(15),Jr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Jr(this.i,this.l,Qe,null),uu(this,Qe);if(Td(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||f.length!=0||this.h.h||(this.m=1,ht(16),a=!1),this.o=this.o&&a,!a)Jr(this.i,this.l,f,"[Invalid Chunked Response]"),Tr(this),si(this);else if(f.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),yu(W),W.P=!0,ht(11))}}else Jr(this.i,this.l,f,null),uu(this,f);ie==4&&Tr(this),this.o&&!this.K&&(ie==4?Gd(this.j,this):(this.o=!1,Mo(this)))}else TE(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Tr(this),si(this)}}}catch{}finally{}};function aE(a){if(!Td(a))return a.g.la();const c=Bd(a.g);if(c==="")return"";let f="";const g=c.length,k=On(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Tr(a),si(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<g;D++)a.h.h=!0,f+=a.h.i.decode(c[D],{stream:!(k&&D==g-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function Td(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function lE(a,c){var f=a.C,g=c.indexOf(`
`,f);return g==-1?ou:(f=Number(c.substring(f,g)),isNaN(f)?Ed:(g+=1,g+f>c.length?ou:(c=c.slice(g,g+f),a.C=g+f,c)))}Dn.prototype.cancel=function(){this.K=!0,Tr(this)};function Mo(a){a.T=Date.now()+a.H,xd(a,a.H)}function xd(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ti(h(a.aa,a),c)}function lu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Dn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(sE(this.i,this.B),this.M!=2&&(ei(),ht(17)),Tr(this),this.m=2,si(this)):xd(this,this.T-a)};function si(a){a.j.I==0||a.K||Gd(a.j,a)}function Tr(a){lu(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,cd(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function uu(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||cu(f.h,a))){if(!a.L&&cu(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Bo(f),jo(f);else break e;gu(f),ht(18)}}else f.xa=k[1],0<f.xa-f.K&&k[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ti(h(f.Va,f),6e3));Ad(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ir(f,11)}else if((a.L||f.g==a)&&Bo(f),!_(c))for(k=f.Ba.g.parse(c),c=0;c<k.length;c++){let ve=k[c];const Qe=ve[0];if(!(Qe<=f.K))if(f.K=Qe,ve=ve[1],f.I==2)if(ve[0]=="c"){f.M=ve[1],f.ba=ve[2];const sn=ve[3];sn!=null&&(f.ka=sn,f.j.info("VER="+f.ka));const Sr=ve[4];Sr!=null&&(f.za=Sr,f.j.info("SVER="+f.za));const Ln=ve[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(g=1.5*Ln,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Fn=a.g;if(Fn){const $o=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var D=g.h;D.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(hu(D,D.h),D.h=null))}if(g.G){const vu=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;vu&&(g.wa=vu,we(g.J,g.G,vu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var W=a;if(g.na=Yd(g,g.L?g.ba:null,g.W),W.L){Cd(g.h,W);var ie=W,$e=g.O;$e&&(ie.H=$e),ie.D&&(lu(ie),Mo(ie)),g.g=W}else Wd(g);f.i.length>0&&Uo(f)}else ve[0]!="stop"&&ve[0]!="close"||Ir(f,7);else f.I==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Ir(f,7):mu(f):ve[0]!="noop"&&f.l&&f.l.qa(ve),f.A=0)}}ei(4)}catch{}}var uE=class{constructor(a,c){this.g=a,this.map=c}};function Id(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sd(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ad(a){return a.h?1:a.g?a.g.size:0}function cu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function hu(a,c){a.g?a.g.add(c):a.h=c}function Cd(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Id.prototype.cancel=function(){if(this.i=Rd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Rd(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return w(a.i)}var Pd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cE(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const g=a[f].indexOf("=");let k,D=null;g>=0?(k=a[f].substring(0,g),D=a[f].substring(g+1)):k=a[f],c(k,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function bn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof bn?(this.l=a.l,ii(this,a.j),this.o=a.o,this.g=a.g,oi(this,a.u),this.h=a.h,fu(this,Md(a.i)),this.m=a.m):a&&(c=String(a).match(Pd))?(this.l=!1,ii(this,c[1]||"",!0),this.o=ai(c[2]||""),this.g=ai(c[3]||"",!0),oi(this,c[4]),this.h=ai(c[5]||"",!0),fu(this,c[6]||"",!0),this.m=ai(c[7]||"")):(this.l=!1,this.i=new ui(null,this.l))}bn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(li(c,Nd,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(li(c,Nd,!0),"@"),a.push(ri(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(li(f,f.charAt(0)=="/"?dE:fE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",li(f,mE)),a.join("")},bn.prototype.resolve=function(a){const c=rn(this);let f=!!a.j;f?ii(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var g=a.h;if(f)oi(c,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var k=c.h.lastIndexOf("/");k!=-1&&(g=c.h.slice(0,k+1)+g)}if(k=g,k==".."||k==".")g="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){g=k.lastIndexOf("/",0)==0,k=k.split("/");const D=[];for(let W=0;W<k.length;){const ie=k[W++];ie=="."?g&&W==k.length&&D.push(""):ie==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),g&&W==k.length&&D.push("")):(D.push(ie),g=!0)}g=D.join("/")}else g=k}return f?c.h=g:f=a.i.toString()!=="",f?fu(c,Md(a.i)):f=!!a.m,f&&(c.m=a.m),c};function rn(a){return new bn(a)}function ii(a,c,f){a.j=f?ai(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function oi(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function fu(a,c,f){c instanceof ui?(a.i=c,gE(a.i,a.l)):(f||(c=li(c,pE)),a.i=new ui(c,a.l))}function we(a,c,f){a.i.set(c,f)}function Oo(a){return we(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ai(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function li(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,hE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function hE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Nd=/[#\/\?@]/g,fE=/[#\?:]/g,dE=/[#\?]/g,pE=/[#\?@]/g,mE=/#/g;function ui(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function xr(a){a.g||(a.g=new Map,a.h=0,a.i&&cE(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=ui.prototype,t.add=function(a,c){xr(this),this.i=null,a=Zr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function kd(a,c){xr(a),c=Zr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Vd(a,c){return xr(a),c=Zr(a,c),a.g.has(c)}t.forEach=function(a,c){xr(this),this.g.forEach(function(f,g){f.forEach(function(k){a.call(c,k,g,this)},this)},this)};function Dd(a,c){xr(a);let f=[];if(typeof c=="string")Vd(a,c)&&(f=f.concat(a.g.get(Zr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return xr(this),this.i=null,a=Zr(this,a),Vd(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=Dd(this,a),a.length>0?String(a[0]):c):c};function bd(a,c,f){kd(a,c),f.length>0&&(a.i=null,a.g.set(Zr(a,c),w(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var f=c[g];const k=ri(f);f=Dd(this,f);for(let D=0;D<f.length;D++){let W=k;f[D]!==""&&(W+="="+ri(f[D])),a.push(W)}}return this.i=a.join("&")};function Md(a){const c=new ui;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function Zr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function gE(a,c){c&&!a.j&&(xr(a),a.i=null,a.g.forEach(function(f,g){const k=g.toLowerCase();g!=k&&(kd(this,g),bd(this,k,f))},a)),a.j=c}function yE(a,c){const f=new ni;if(o.Image){const g=new Image;g.onload=d(Mn,f,"TestLoadImage: loaded",!0,c,g),g.onerror=d(Mn,f,"TestLoadImage: error",!1,c,g),g.onabort=d(Mn,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=d(Mn,f,"TestLoadImage: timeout",!1,c,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function vE(a,c){const f=new ni,g=new AbortController,k=setTimeout(()=>{g.abort(),Mn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(k),D.ok?Mn(f,"TestPingServer: ok",!0,c):Mn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),Mn(f,"TestPingServer: error",!1,c)})}function Mn(a,c,f,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(f)}catch{}}function _E(){this.g=new tE}function du(a){this.i=a.Sb||null,this.h=a.ab||!1}p(du,hd),du.prototype.g=function(){return new Lo(this.i,this.h)};function Lo(a,c){te.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Lo,te),t=Lo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,hi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Od(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Od(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?ci(this):hi(this),this.readyState==3&&Od(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ci(this))},t.Na=function(a){this.g&&(this.response=a,ci(this))},t.ga=function(){this.g&&ci(this)};function ci(a){a.readyState=4,a.l=null,a.j=null,a.B=null,hi(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function hi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ld(a){let c="";return F(a,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function pu(a,c,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Ld(f),typeof a=="string"?f!=null&&ri(f):we(a,c,f))}function De(a){te.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(De,te);var EE=/^https?$/i,wE=["POST","PUT"];t=De.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vd.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(D){Fd(this,D);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)f.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())f.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(wE,c,void 0)>=0)||g||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,W]of f)this.g.setRequestHeader(D,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Fd(this,D)}};function Fd(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,jd(a),Fo(a)}function jd(a){a.A||(a.A=!0,ue(a,"complete"),ue(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ue(this,"complete"),ue(this,"abort"),Fo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fo(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ud(this):this.Xa())},t.Xa=function(){Ud(this)};function Ud(a){if(a.h&&typeof i<"u"){if(a.v&&On(a)==4)setTimeout(a.Ca.bind(a),0);else if(ue(a,"readystatechange"),On(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var g;if(g=D===0){let W=String(a.D).match(Pd)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),g=!EE.test(W?W.toLowerCase():"")}f=g}if(f)ue(a,"complete"),ue(a,"success");else{a.o=6;try{var k=On(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",jd(a)}}finally{Fo(a)}}}}function Fo(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||ue(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}t.ca=function(){try{return On(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),eE(c)}};function Bd(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function TE(a){const c={};a=(a.g&&On(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var f=oE(a[g]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=c[k]||[];c[k]=D,D.push(f)}z(c,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function zd(a){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fi("baseRetryDelayMs",5e3,a),this.Za=fi("retryDelaySeedMs",1e4,a),this.Ta=fi("forwardChannelMaxRetries",2,a),this.va=fi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Id(a&&a.concurrentRequestLimit),this.Ba=new _E,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=zd.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,g){ht(0),this.W=a,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=Yd(this,null,this.W),Uo(this)};function mu(a){if($d(a),a.I==3){var c=a.V++,f=rn(a.J);if(we(f,"SID",a.M),we(f,"RID",c),we(f,"TYPE","terminate"),di(a,f),c=new Dn(a,a.j,c),c.M=2,c.A=Oo(rn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Jd(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Mo(c)}Xd(a)}function jo(a){a.g&&(yu(a),a.g.cancel(),a.g=null)}function $d(a){jo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Bo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Uo(a){if(!Sd(a.h)&&!a.m){a.m=!0;var c=a.Ea;U||y(),q||(U(),q=!0),T.add(c,a),a.D=0}}function xE(a,c){return Ad(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ti(h(a.Ea,a,c),Kd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new Dn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=J(D),Ve(D,this.U)):D=this.U),this.u!==null||this.R||(k.J=D,D=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Hd(this,k,c),f=rn(this.J),we(f,"RID",a),we(f,"CVER",22),this.G&&we(f,"X-HTTP-Session-Id",this.G),di(this,f),D&&(this.R?c="headers="+ri(Ld(D))+"&"+c:this.u&&pu(f,this.u,D)),hu(this.h,k),this.Ra&&we(f,"TYPE","init"),this.S?(we(f,"$req",c),we(f,"SID","null"),k.U=!0,au(k,f,null)):au(k,f,c),this.I=2}}else this.I==3&&(a?qd(this,a):this.i.length==0||Sd(this.h)||qd(this))};function qd(a,c){var f;c?f=c.l:f=a.V++;const g=rn(a.J);we(g,"SID",a.M),we(g,"RID",f),we(g,"AID",a.K),di(a,g),a.u&&a.o&&pu(g,a.u,a.o),f=new Dn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Hd(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),hu(a.h,f),au(f,g,c)}function di(a,c){a.H&&F(a.H,function(f,g){we(c,g,f)}),a.l&&F({},function(f,g){we(c,g,f)})}function Hd(a,c,f){f=Math.min(a.i.length,f);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var k=a.i;let ie=-1;for(;;){const $e=["count="+f];ie==-1?f>0?(ie=k[0].g,$e.push("ofs="+ie)):ie=0:$e.push("ofs="+ie);let ve=!0;for(let Qe=0;Qe<f;Qe++){var D=k[Qe].g;const sn=k[Qe].map;if(D-=ie,D<0)ie=Math.max(0,k[Qe].g-100),ve=!1;else try{D="req"+D+"_"||"";try{var W=sn instanceof Map?sn:Object.entries(sn);for(const[Sr,Ln]of W){let Fn=Ln;l(Ln)&&(Fn=nu(Ln)),$e.push(D+Sr+"="+encodeURIComponent(Fn))}}catch(Sr){throw $e.push(D+"type="+encodeURIComponent("_badmap")),Sr}}catch{g&&g(sn)}}if(ve){W=$e.join("&");break e}}W=void 0}return a=a.i.splice(0,f),c.G=a,W}function Wd(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;U||y(),q||(U(),q=!0),T.add(c,a),a.A=0}}function gu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ti(h(a.Da,a),Kd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Qd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ti(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),jo(this),Qd(this))};function yu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Qd(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=rn(a.na);we(c,"RID","rpc"),we(c,"SID",a.M),we(c,"AID",a.K),we(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&we(c,"TO",a.ia),we(c,"TYPE","xmlhttp"),di(a,c),a.u&&a.o&&pu(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Oo(rn(c)),f.u=null,f.R=!0,wd(f,a)}t.Va=function(){this.C!=null&&(this.C=null,jo(this),gu(this),ht(19))};function Bo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Gd(a,c){var f=null;if(a.g==c){Bo(a),yu(a),a.g=null;var g=2}else if(cu(a.h,c))f=c.G,Cd(a.h,c),g=1;else return;if(a.I!=0){if(c.o)if(g==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var k=a.D;g=Do(),ue(g,new gd(g,f)),Uo(a)}else Wd(a);else if(k=c.m,k==3||k==0&&c.X>0||!(g==1&&xE(a,c)||g==2&&gu(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),k){case 1:Ir(a,5);break;case 4:Ir(a,10);break;case 3:Ir(a,6);break;default:Ir(a,2)}}}function Kd(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function Ir(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),g=a.Ua;const k=!g;g=new bn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ii(g,"https"),Oo(g),k?yE(g.toString(),f):vE(g.toString(),f)}else ht(2);a.I=0,a.l&&a.l.pa(c),Xd(a),$d(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Xd(a){if(a.I=0,a.ja=[],a.l){const c=Rd(a.h);(c.length!=0||a.i.length!=0)&&(N(a.ja,c),N(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function Yd(a,c,f){var g=f instanceof bn?rn(f):new bn(f);if(g.g!="")c&&(g.g=c+"."+g.g),oi(g,g.u);else{var k=o.location;g=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;const D=new bn(null);g&&ii(D,g),c&&(D.g=c),k&&oi(D,k),f&&(D.h=f),g=D}return f=a.G,c=a.wa,f&&c&&we(g,f,c),we(g,"VER",a.ka),di(a,g),g}function Jd(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new De(new du({ab:f})):new De(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zd(){}t=Zd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zo(){}zo.prototype.g=function(a,c){return new It(a,c)};function It(a,c){te.call(this),this.g=new zd(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!_(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new es(this)}p(It,te),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){mu(this.g)},It.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=nu(a),a=f);c.i.push(new uE(c.Ya++,a)),c.I==3&&Uo(c)},It.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,It.Z.N.call(this)};function ep(a){ru.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}p(ep,ru);function tp(){su.call(this),this.status=1}p(tp,su);function es(a){this.g=a}p(es,Zd),es.prototype.ra=function(){ue(this.g,"a")},es.prototype.qa=function(a){ue(this.g,new ep(a))},es.prototype.pa=function(a){ue(this.g,new tp)},es.prototype.oa=function(){ue(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,m_=function(){return new zo},p_=function(){return Do()},d_=wr,th={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bo.NO_ERROR=0,bo.TIMEOUT=8,bo.HTTP_ERROR=6,Sa=bo,yd.COMPLETE="complete",f_=yd,fd.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",te.prototype.listen=te.prototype.J,Ai=fd,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,h_=De}).apply(typeof aa<"u"?aa:typeof self<"u"?self:typeof window<"u"?window:{});const km="@firebase/firestore",Vm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new s_("@firebase/firestore");function ns(){return Br.logLevel}function K(t,...e){if(Br.logLevel<=he.DEBUG){const n=e.map(vf);Br.debug(`Firestore (${Qs}): ${t}`,...n)}}function Rn(t,...e){if(Br.logLevel<=he.ERROR){const n=e.map(vf);Br.error(`Firestore (${Qs}): ${t}`,...n)}}function Os(t,...e){if(Br.logLevel<=he.WARN){const n=e.map(vf);Br.warn(`Firestore (${Qs}): ${t}`,...n)}}function vf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,g_(t,r,n)}function g_(t,e,n){let r=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rn(r),new Error(r)}function de(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||g_(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class qI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HI{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new y_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class WI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,AI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=KI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function nh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Xu(s)===Xu(i)?ae(s,i):Xu(s)?1:-1}return ae(t.length,e.length)}const XI=55296,YI=57343;function Xu(t){const e=t.charCodeAt(0);return e>=XI&&e<=YI}function Ls(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="__name__";class ln{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ln?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ln.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=ln.isNumericId(e),s=ln.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ln.extractNumericId(e).compare(ln.extractNumericId(n)):nh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class _e extends ln{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends ln{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return JI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bm}static keyField(){return new et([bm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new G(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new G(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(_e.fromString(e))}static fromName(e){return new Y(_e.fromString(e).popFirst(5))}static empty(){return new Y(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new _e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e,n){if(!n)throw new G(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZI(t,e,n,r){if(e===!0&&r===!0)throw new G(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mm(t){if(!Y.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Om(t){if(Y.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ml(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function co(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ml(t);throw new G(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!__(t))throw new G(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=-62135596800,Fm=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Fm);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lm)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fm}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Be("string",xe._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new xe(0,0))}static max(){return new ne(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=-1;function eS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new cr(s,Y.empty(),e)}function tS(t){return new cr(t.readTime,t.key,ho)}class cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cr(ne.min(),Y.empty(),ho)}static max(){return new cr(ne.max(),Y.empty(),ho)}}function nS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==rS)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function iS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ks(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ol.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=-1;function Ll(t){return t==null}function ol(t){return t===0&&1/t==-1/0}function oS(t){return typeof t=="number"&&Number.isInteger(t)&&!ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="";function aS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jm(e)),e=lS(t.get(n),e);return jm(e)}function lS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case E_:n+="";break;default:n+=i}}return n}function jm(t){return t+E_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new la(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new la(this.root,e,this.comparator,!1)}getReverseIterator(){return new la(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new la(this.root,e,this.comparator,!0)}}class la{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bm(this.data.getIterator())}getIteratorFrom(e){return new Bm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new We(this.comparator);return n.data=e,n}}class Bm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new We(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ls(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T_("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const uS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=uS.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="server_timestamp",I_="__type__",S_="__previous_value__",A_="__local_write_time__";function wf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[I_])==null?void 0:r.stringValue)===x_}function Fl(t){const e=t.mapValue.fields[S_];return wf(e)?Fl(e):e}function fo(t){const e=hr(t.mapValue.fields[A_].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r,s,i,o,l,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const al="(default)";class po{constructor(e,n){this.projectId=e,this.database=n||al}static empty(){return new po("","")}get isDefaultDatabase(){return this.database===al}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="__type__",hS="__max__",ua={mapValue:{}},R_="__vector__",ll="value";function dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wf(t)?4:dS(t)?9007199254740991:fS(t)?10:11:Z(28295,{value:t})}function yn(t,e){if(t===e)return!0;const n=dr(t);if(n!==dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=hr(s.timestampValue),l=hr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return fr(s.bytesValue).isEqual(fr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),l=Me(i.doubleValue);return o===l?ol(o)===ol(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ls(t.arrayValue.values||[],e.arrayValue.values||[],yn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Um(o)!==Um(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!yn(o[u],l[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function mo(t,e){return(t.values||[]).find(n=>yn(n,e))!==void 0}function Fs(t,e){if(t===e)return 0;const n=dr(t),r=dr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Me(i.integerValue||i.doubleValue),u=Me(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return zm(t.timestampValue,e.timestampValue);case 4:return zm(fo(t),fo(e));case 5:return nh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=fr(i),u=fr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ae(l[h],u[h]);if(d!==0)return d}return ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ae(Me(i.latitude),Me(o.latitude));return l!==0?l:ae(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $m(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,w,N,P;const l=i.fields||{},u=o.fields||{},h=(m=l[ll])==null?void 0:m.arrayValue,d=(w=u[ll])==null?void 0:w.arrayValue,p=ae(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((P=d==null?void 0:d.values)==null?void 0:P.length)||0);return p!==0?p:$m(h,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ua.mapValue&&o===ua.mapValue)return 0;if(i===ua.mapValue)return 1;if(o===ua.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=nh(u[p],d[p]);if(m!==0)return m;const w=Fs(l[u[p]],h[d[p]]);if(w!==0)return w}return ae(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function zm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=hr(t),r=hr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function $m(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fs(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function js(t){return rh(t)}function rh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${rh(n.fields[o])}`;return s+"}"}(t.mapValue):Z(61005,{value:t})}function Aa(t){switch(dr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fl(t);return e?16+Aa(e):16;case 5:return 2*t.stringValue.length;case 6:return fr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Aa(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Qr(r.fields,(i,o)=>{s+=i.length+Aa(o)}),s}(t.mapValue);default:throw Z(13486,{value:t})}}function qm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sh(t){return!!t&&"integerValue"in t}function Tf(t){return!!t&&"arrayValue"in t}function Hm(t){return!!t&&"nullValue"in t}function Wm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ca(t){return!!t&&"mapValue"in t}function fS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[C_])==null?void 0:r.stringValue)===R_}function ji(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ji(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ji(t.arrayValue.values[n]);return e}return{...t}}function dS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ca(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ji(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ji(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ca(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ca(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mt(ji(this.value))}}function P_(t){const e=[];return Qr(t.fields,(n,r)=>{const s=new et([n]);if(Ca(r)){const i=P_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ne.min(),ne.min(),ne.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,ne.min(),ne.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ne.min(),ne.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n){this.position=e,this.inclusive=n}}function Qm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Fs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n="asc"){this.field=e,this.dir=n}}function pS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class Ue extends N_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gS(e,n,r):n==="array-contains"?new _S(e,r):n==="in"?new ES(e,r):n==="not-in"?new wS(e,r):n==="array-contains-any"?new TS(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yS(e,r):new vS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fs(n,this.value)):n!==null&&dr(this.value)===dr(n)&&this.matchesComparison(Fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends N_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yt(e,n)}matches(e){return k_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function k_(t){return t.op==="and"}function V_(t){return mS(t)&&k_(t)}function mS(t){for(const e of t.filters)if(e instanceof Yt)return!1;return!0}function ih(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+js(t.value);if(V_(t))return t.filters.map(e=>ih(e)).join(",");{const e=t.filters.map(n=>ih(n)).join(",");return`${t.op}(${e})`}}function D_(t,e){return t instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&yn(r.value,s.value)}(t,e):t instanceof Yt?function(r,s){return s instanceof Yt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&D_(o,s.filters[l]),!0):!1}(t,e):void Z(19439)}function b_(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${js(n.value)}`}(t):t instanceof Yt?function(n){return n.op.toString()+" {"+n.getFilters().map(b_).join(" ,")+"}"}(t):"Filter"}class gS extends Ue{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class yS extends Ue{constructor(e,n){super(e,"in",n),this.keys=M_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vS extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=M_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function M_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class _S extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tf(n)&&mo(n.arrayValue,this.value)}}class ES extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class wS extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mo(this.value.arrayValue,n)}}class TS extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Km(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xS(t,e,n,r,s,i,o)}function xf(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ih(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>js(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>js(r)).join(",")),e.Te=n}return e.Te}function If(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!D_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gm(t.startAt,e.startAt)&&Gm(t.endAt,e.endAt)}function oh(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IS(t,e,n,r,s,i,o,l){return new Xs(t,e,n,r,s,i,o,l)}function O_(t){return new Xs(t)}function Xm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function L_(t){return t.collectionGroup!==null}function Ui(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new We(et.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new go(i,r))}),n.has(et.keyField().canonicalString())||e.Ie.push(new go(et.keyField(),r))}return e.Ie}function fn(t){const e=re(t);return e.Ee||(e.Ee=SS(e,Ui(t))),e.Ee}function SS(t,e){if(t.limitType==="F")return Km(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new go(s.field,i)});const n=t.endAt?new ul(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ul(t.startAt.position,t.startAt.inclusive):null;return Km(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ah(t,e){const n=t.filters.concat([e]);return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lh(t,e,n){return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jl(t,e){return If(fn(t),fn(e))&&t.limitType===e.limitType}function F_(t){return`${xf(fn(t))}|lt:${t.limitType}`}function rs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>b_(s)).join(", ")}]`),Ll(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>js(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>js(s)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Ul(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ui(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Qm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Ui(r),s)||r.endAt&&!function(o,l,u){const h=Qm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Ui(r),s))}(t,e)}function AS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j_(t){return(e,n)=>{let r=!1;for(const s of Ui(t)){const i=CS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function CS(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Fs(u,h):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return w_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new ke(Y.comparator);function Pn(){return RS}const U_=new ke(Y.comparator);function Ci(...t){let e=U_;for(const n of t)e=e.insert(n.key,n);return e}function B_(t){let e=U_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dr(){return Bi()}function z_(){return Bi()}function Bi(){return new Gr(t=>t.toString(),(t,e)=>t.isEqual(e))}const PS=new ke(Y.comparator),NS=new We(Y.comparator);function le(...t){let e=NS;for(const n of t)e=e.add(n);return e}const kS=new We(ae);function VS(){return kS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ol(e)?"-0":e}}function $_(t){return{integerValue:""+t}}function DS(t,e){return oS(e)?$_(e):Sf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this._=void 0}}function bS(t,e,n){return t instanceof yo?function(s,i){const o={fields:{[I_]:{stringValue:x_},[A_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wf(i)&&(i=Fl(i)),i&&(o.fields[S_]=i),{mapValue:o}}(n,e):t instanceof vo?H_(t,e):t instanceof _o?W_(t,e):function(s,i){const o=q_(s,i),l=Ym(o)+Ym(s.Ae);return sh(o)&&sh(s.Ae)?$_(l):Sf(s.serializer,l)}(t,e)}function MS(t,e,n){return t instanceof vo?H_(t,e):t instanceof _o?W_(t,e):n}function q_(t,e){return t instanceof cl?function(r){return sh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yo extends Bl{}class vo extends Bl{constructor(e){super(),this.elements=e}}function H_(t,e){const n=Q_(e);for(const r of t.elements)n.some(s=>yn(s,r))||n.push(r);return{arrayValue:{values:n}}}class _o extends Bl{constructor(e){super(),this.elements=e}}function W_(t,e){let n=Q_(e);for(const r of t.elements)n=n.filter(s=>!yn(s,r));return{arrayValue:{values:n}}}class cl extends Bl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ym(t){return Me(t.integerValue||t.doubleValue)}function Q_(t){return Tf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.field=e,this.transform=n}}function LS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vo&&s instanceof vo||r instanceof _o&&s instanceof _o?Ls(r.elements,s.elements,yn):r instanceof cl&&s instanceof cl?yn(r.Ae,s.Ae):r instanceof yo&&s instanceof yo}(t.transform,e.transform)}class FS{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ra(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zl{}function G_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Af(t.key,dn.none()):new Co(t.key,t.data,dn.none());{const n=t.data,r=Mt.empty();let s=new We(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Kr(t.key,r,new Qt(s.toArray()),dn.none())}}function jS(t,e,n){t instanceof Co?function(s,i,o){const l=s.value.clone(),u=Zm(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Kr?function(s,i,o){if(!Ra(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Zm(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(K_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zi(t,e,n,r){return t instanceof Co?function(i,o,l,u){if(!Ra(i.precondition,o))return l;const h=i.value.clone(),d=eg(i.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kr?function(i,o,l,u){if(!Ra(i.precondition,o))return l;const h=eg(i.fieldTransforms,u,o),d=o.data;return d.setAll(K_(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Ra(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function US(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=q_(r.transform,s||null);i!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,i))}return n||null}function Jm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ls(r,s,(i,o)=>LS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Co extends zl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Kr extends zl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function K_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Zm(t,e,n){const r=new Map;de(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,MS(o,l,n[s]))}return r}function eg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bS(i,o,e))}return r}class Af extends zl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BS extends zl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=z_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=G_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Ls(this.mutations,e.mutations,(n,r)=>Jm(n,r))&&Ls(this.baseMutations,e.baseMutations,(n,r)=>Jm(n,r))}}class Cf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return PS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ce;function HS(t){switch(t){case L.OK:return Z(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function X_(t){if(t===void 0)return Rn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Fe.OK:return L.OK;case Fe.CANCELLED:return L.CANCELLED;case Fe.UNKNOWN:return L.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return L.INTERNAL;case Fe.UNAVAILABLE:return L.UNAVAILABLE;case Fe.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Fe.NOT_FOUND:return L.NOT_FOUND;case Fe.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Fe.ABORTED:return L.ABORTED;case Fe.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Fe.DATA_LOSS:return L.DATA_LOSS;default:return Z(39323,{code:t})}}(ce=Fe||(Fe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new ir([4294967295,4294967295],0);function tg(t){const e=WS().encode(t),n=new c_;return n.update(e),new Uint8Array(n.digest())}function ng(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ir([n,r],0),new ir([s,i],0)]}class Rf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ri(`Invalid padding: ${n}`);if(r<0)throw new Ri(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ri(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ri(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ir.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ir.fromNumber(r)));return s.compare(QS)===1&&(s=new ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tg(e),[r,s]=ng(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Rf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=tg(e),[r,s]=ng(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ri extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ro.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $l(ne.min(),s,new ke(ae),Pn(),le())}}class Ro{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ro(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Y_{constructor(e,n){this.targetId=e,this.Ce=n}}class J_{constructor(e,n,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class rg{constructor(){this.ve=0,this.Fe=sg(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z(38017,{changeType:i})}}),new Ro(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=sg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.Je=ca(),this.He=ca(),this.Ye=new ke(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(oh(i))if(r===0){const o=new Y(i.path);this.et(n,o,ut.newNoDocument(o,ne.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=fr(r).toUint8Array()}catch(u){if(u instanceof T_)return Os("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Rf(o,s,i)}catch(u){return Os(u instanceof Ri?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&oh(l.target)){const u=new Y(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ut.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=le();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new $l(e,n,this.Ye,this.je,r);return this.je=Pn(),this.Je=ca(),this.He=ca(),this.Ye=new ke(ae),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new We(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new We(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ca(){return new ke(Y.comparator)}function sg(){return new ke(Y.comparator)}const KS={asc:"ASCENDING",desc:"DESCENDING"},XS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YS={and:"AND",or:"OR"};class JS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uh(t,e){return t.useProto3Json||Ll(e)?e:{value:e}}function hl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZS(t,e){return hl(t,e.toTimestamp())}function pn(t){return de(!!t,49232),ne.fromTimestamp(function(n){const r=hr(n);return new xe(r.seconds,r.nanos)}(t))}function Pf(t,e){return ch(t,e).canonicalString()}function ch(t,e){const n=function(s){return new _e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function e0(t){const e=_e.fromString(t);return de(i0(e),10190,{key:e.toString()}),e}function hh(t,e){return Pf(t.databaseId,e.path)}function Yu(t,e){const n=e0(e);if(n.get(1)!==t.databaseId.projectId)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(n0(n))}function t0(t,e){return Pf(t.databaseId,e)}function eA(t){const e=e0(t);return e.length===4?_e.emptyPath():n0(e)}function fh(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function n0(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ig(t,e,n){return{name:hh(t,e),fields:n.value.mapValue.fields}}function tA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(de(d===void 0||typeof d=="string",58123),rt.fromBase64String(d||"")):(de(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?L.UNKNOWN:X_(h.code);return new G(d,h.message||"")}(o);n=new J_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yu(t,r.document.name),i=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):ne.min(),l=new Mt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(s,i,o,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Pa(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yu(t,r.document),i=r.readTime?pn(r.readTime):ne.min(),o=ut.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Pa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yu(t,r.document),i=r.removedTargetIds||[];n=new Pa([],i,s,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new qS(s,i),l=r.targetId;n=new Y_(l,o)}}return n}function nA(t,e){let n;if(e instanceof Co)n={update:ig(t,e.key,e.value)};else if(e instanceof Af)n={delete:hh(t,e.key)};else if(e instanceof Kr)n={update:ig(t,e.key,e.data),updateMask:hA(e.fieldMask)};else{if(!(e instanceof BS))return Z(16599,{Vt:e.type});n={verify:hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof yo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ZS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z(27497)}(t,e.precondition)),n}function rA(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?pn(s.updateTime):pn(i);return o.isEqual(ne.min())&&(o=pn(i)),new FS(o,s.transformResults||[])}(n,e))):[]}function sA(t,e){return{documents:[t0(t,e.path)]}}function iA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=t0(t,s);const i=function(h){if(h.length!==0)return s0(Yt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:ss(m.field),direction:lA(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=uh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function oA(t){let e=eA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=r0(p);return m instanceof Yt&&V_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(N){return new go(is(N.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Ll(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,w=p.values||[];return new ul(w,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,w=p.values||[];return new ul(w,m)}(n.endAt)),IS(e,s,o,i,l,"F",u,h)}function aA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function r0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=is(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=is(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=is(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=is(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(is(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yt.create(n.compositeFilter.filters.map(r=>r0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function lA(t){return KS[t]}function uA(t){return XS[t]}function cA(t){return YS[t]}function ss(t){return{fieldPath:t.canonicalString()}}function is(t){return et.fromServerFormat(t.fieldPath)}function s0(t){return t instanceof Ue?function(n){if(n.op==="=="){if(Wm(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NAN"}};if(Hm(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wm(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NAN"}};if(Hm(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(n.field),op:uA(n.op),value:n.value}}}(t):t instanceof Yt?function(n){const r=n.getFilters().map(s=>s0(s));return r.length===1?r[0]:{compositeFilter:{op:cA(n.op),filters:r}}}(t):Z(54877,{filter:t})}function hA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function i0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r,s,i=ne.min(),o=ne.min(),l=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.yt=e}}function dA(t){const e=oA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Cn=new mA}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(cr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class mA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new We(_e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new We(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o0=41943040;class gt{static withCacheSize(e){return new gt(e,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(o0,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Us(0)}static cr(){return new Us(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="LruGarbageCollector",gA=1048576;function lg([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class yA{constructor(e){this.Ir=e,this.buffer=new We(lg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();lg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(ag,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?K(ag,"Ignoring IndexedDB error during garbage collection: ",n):await Gs(n)}await this.Vr(3e5)})}}class _A{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Ol.ce);const r=new yA(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(og)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),og):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),ns()<=he.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function EA(t,e){return new _A(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.changes=new Gr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&zi(r.mutation,s,Qt.empty(),xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=Dr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ci();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Dr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Pn();const o=Bi(),l=function(){return Bi()}();return n.forEach((u,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof Kr)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),zi(d.mutation,h,d.mutation.getFieldMask(),xe.now())):o.set(h.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>l.set(h,new TA(d,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Bi();let s=new ke((o,l)=>o-l),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||Qt.empty();d=l.applyToLocalView(h,d),r.set(u,d);const p=(s.get(l.batchId)||le()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=z_();d.forEach(m=>{if(!i.has(m)){const w=G_(n.get(m),r.get(m));w!==null&&p.set(m,w),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):L_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(Dr());let l=ho,u=i;return o.next(h=>j.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,le())).next(d=>({batchId:l,changes:B_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Ci();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ci();return this.indexManager.getCollectionParents(e,i).next(l=>j.forEach(l,u=>{const h=function(p,m){return new Xs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,ut.newInvalidDocument(d)))});let l=Ci();return o.forEach((u,h)=>{const d=i.get(u);d!==void 0&&zi(d.mutation,h,Qt.empty(),xe.now()),Ul(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pn(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:dA(s.bundledQuery),readTime:pn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.overlays=new ke(Y.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dr();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=Dr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=Dr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Dr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return j.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $S(n,r));let i=this.qr.get(n);i===void 0&&(i=le(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this.Qr=new We(Ge.$r),this.Ur=new We(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new _e([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new _e([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=le();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new We(Ge.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zS(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ef:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(ae);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new Y(i),0);let l=new We(ae);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},o),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.ri=e,this.docs=function(){return new ke(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Pn();const o=n.path,l=new Y(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||nS(tS(d),r)<=0||(s.has(d.key)||Ul(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z(9500)}ii(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PA(this)}getSize(e){return j.resolve(this.size)}}class PA extends wA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.persistence=e,this.si=new Gr(n=>xf(n),If),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Nf,this.targetCount=0,this.ai=Us.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ol(0),this.li=!1,this.li=!0,this.hi=new AA,this.referenceDelegate=e(this),this.Pi=new NA(this),this.indexManager=new pA,this.remoteDocumentCache=function(s){return new RA(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new fA(n),this.Ii=new IA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new CA(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new kA(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class kA extends sS{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Ri=new Nf,this.Vi=null}static mi(e){return new kf(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const s=Y.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class fl{constructor(e,n){this.persistence=e,this.pi=new Gr(r=>aS(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=EA(this,n)}static mi(e,n){return new fl(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?j.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Aa(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xx()?8:iS(wx())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new VA;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ns()<=he.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(ns()<=he.DEBUG&&K("QueryEngine","Query:",rs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ns()<=he.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):j.resolve())}ys(e,n){if(Xm(n))return j.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=lh(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=le(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,lh(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,s){return Xm(n)||s.isEqual(ne.min())?j.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?j.resolve(null):(ns()<=he.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rs(n)),this.vs(e,o,n,eS(s,ho)).next(l=>l))})}Ds(e,n){let r=new We(j_(e));return n.forEach((s,i)=>{Ul(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ns()<=he.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",rs(n)),this.ps.getDocumentsMatchingQuery(e,n,cr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="LocalStore",bA=3e8;class MA{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ke(ae),this.xs=new Gr(i=>xf(i),If),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function OA(t,e,n,r){return new MA(t,e,n,r)}async function l0(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=le();for(const h of s){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function LA(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let w=j.resolve();return m.forEach(N=>{w=w.next(()=>d.getEntry(u,N)).next(P=>{const V=h.docVersions.get(N);de(V!==null,48541),P.version.compareTo(V)<0&&(p.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),d.addEntry(P)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=le();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function u0(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function FA(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,p)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(rt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),s=s.insert(p,w),function(P,V,A){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=bA?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,w,d)&&l.push(n.Pi.updateTargetData(i,w))});let u=Pn(),h=le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(jA(i,o,e.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!r.isEqual(ne.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return j.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=s,i))}function jA(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Pn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K(Df,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:s}})}function UA(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ef),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BA(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function dh(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ks(o))throw o;K(Df,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ug(t,e,n){const r=re(t);let s=ne.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const p=re(u),m=p.xs.get(d);return m!==void 0?j.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,d)}(r,o,fn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:le())).next(l=>(zA(r,AS(e),l),{documents:l,Qs:i})))}function zA(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class cg{constructor(){this.activeTargetIds=VS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $A{constructor(){this.Mo=new cg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="ConnectivityMonitor";class fg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(hg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(hg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha=null;function ph(){return ha===null?ha=function(){return 268435456+Math.round(2147483648*Math.random())}():ha++,"0x"+ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="RestConnection",HA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===al?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=ph(),l=this.zo(e,n.toUriEncodedString());K(Ju,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(l),d=gf(h);return this.Jo(e,l,u,r,d).then(p=>(K(Ju,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Os(Ju,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=HA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class GA extends WA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=ph();return new Promise((l,u)=>{const h=new h_;h.setWithCredentials(!0),h.listenOnce(f_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Sa.NO_ERROR:const p=h.getResponseJson();K(ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Sa.TIMEOUT:K(ot,`RPC '${e}' ${o} timed out`),u(new G(L.DEADLINE_EXCEEDED,"Request time out"));break;case Sa.HTTP_ERROR:const m=h.getStatus();if(K(ot,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const P=function(A){const v=A.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(N.status);u(new G(P,N.message))}else u(new G(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new G(L.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{K(ot,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);K(ot,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",d,r,15)})}T_(e,n,r){const s=ph(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=m_(),l=p_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");K(ot,`Creating RPC '${e}' stream ${s}: ${d}`,u);const p=o.createWebChannel(d,u);this.I_(p);let m=!1,w=!1;const N=new QA({Yo:V=>{w?K(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(m||(K(ot,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),K(ot,`RPC '${e}' stream ${s} sending:`,V),p.send(V))},Zo:()=>p.close()}),P=(V,A,v)=>{V.listen(A,R=>{try{v(R)}catch(b){setTimeout(()=>{throw b},0)}})};return P(p,Ai.EventType.OPEN,()=>{w||(K(ot,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),P(p,Ai.EventType.CLOSE,()=>{w||(w=!0,K(ot,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(p))}),P(p,Ai.EventType.ERROR,V=>{w||(w=!0,Os(ot,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),N.a_(new G(L.UNAVAILABLE,"The operation could not be completed")))}),P(p,Ai.EventType.MESSAGE,V=>{var A;if(!w){const v=V.data[0];de(!!v,16349);const R=v,b=(R==null?void 0:R.error)||((A=R[0])==null?void 0:A.error);if(b){K(ot,`RPC '${e}' stream ${s} received error:`,b);const U=b.status;let q=function(S){const C=Fe[S];if(C!==void 0)return X_(C)}(U),T=b.message;q===void 0&&(q=L.INTERNAL,T="Unknown error status: "+U+" with message "+b.message),w=!0,N.a_(new G(q,T)),p.close()}else K(ot,`RPC '${e}' stream ${s} received:`,v),N.u_(v)}}),P(l,d_.STAT_EVENT,V=>{V.stat===th.PROXY?K(ot,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===th.NOPROXY&&K(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){return new JS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="PersistentStream";class h0{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new c0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Rn(n.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new G(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(dg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(dg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KA extends h0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tA(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?pn(o.readTime):ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=fh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=oh(u)?{documents:sA(i,u)}:{query:iA(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Z_(i,o.resumeToken);const h=uh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=hl(i,o.snapshotVersion.toTimestamp());const h=uh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=aA(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=fh(this.serializer),n.removeTarget=e,this.q_(n)}}class XA extends h0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rA(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=fh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nA(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{}class JA extends YA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,ch(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(L.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,ch(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ZA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rn(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="RemoteStore";class eC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Xr(this)&&(K(zr,"Restarting streams for network reachability change."),await async function(u){const h=re(u);h.Ea.add(4),await Po(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Hl(h)}(this))})}),this.Ra=new ZA(r,s)}}async function Hl(t){if(Xr(t))for(const e of t.da)await e(!0)}async function Po(t){for(const e of t.da)await e(!1)}function f0(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Lf(n)?Of(n):Ys(n).O_()&&Mf(n,e))}function bf(t,e){const n=re(t),r=Ys(n);n.Ia.delete(e),r.O_()&&d0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Xr(n)&&n.Ra.set("Unknown"))}function Mf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).Y_(e)}function d0(t,e){t.Va.Ue(e),Ys(t).Z_(e)}function Of(t){t.Va=new GS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.Ra.ua()}function Lf(t){return Xr(t)&&!Ys(t).x_()&&t.Ia.size>0}function Xr(t){return re(t).Ea.size===0}function p0(t){t.Va=void 0}async function tC(t){t.Ra.set("Online")}async function nC(t){t.Ia.forEach((e,n)=>{Mf(t,e)})}async function rC(t,e){p0(t),Lf(t)?(t.Ra.ha(e),Of(t)):t.Ra.set("Unknown")}async function sC(t,e,n){if(t.Ra.set("Online"),e instanceof J_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){K(zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dl(t,r)}else if(e instanceof Pa?t.Va.Ze(e):e instanceof Y_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{const r=await u0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(rt.EMPTY_BYTE_STRING,d.snapshotVersion)),d0(i,u);const p=new Qn(d.target,u,h,d.sequenceNumber);Mf(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(zr,"Failed to raise snapshot:",r),await dl(t,r)}}async function dl(t,e,n){if(!Ks(e))throw e;t.Ea.add(1),await Po(t),t.Ra.set("Offline"),n||(n=()=>u0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(zr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hl(t)})}function m0(t,e){return e().catch(n=>dl(t,n,e))}async function Wl(t){const e=re(t),n=pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ef;for(;iC(e);)try{const s=await UA(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,oC(e,s)}catch(s){await dl(e,s)}g0(e)&&y0(e)}function iC(t){return Xr(t)&&t.Ta.length<10}function oC(t,e){t.Ta.push(e);const n=pr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function g0(t){return Xr(t)&&!pr(t).x_()&&t.Ta.length>0}function y0(t){pr(t).start()}async function aC(t){pr(t).ra()}async function lC(t){const e=pr(t);for(const n of t.Ta)e.ea(n.mutations)}async function uC(t,e,n){const r=t.Ta.shift(),s=Cf.from(r,e,n);await m0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wl(t)}async function cC(t,e){e&&pr(t).X_&&await async function(r,s){if(function(o){return HS(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();pr(r).B_(),await m0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wl(r)}}(t,e),g0(t)&&y0(t)}async function pg(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),K(zr,"RemoteStore received new credentials");const r=Xr(n);n.Ea.add(3),await Po(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hl(n)}async function hC(t,e){const n=re(t);e?(n.Ea.delete(2),await Hl(n)):e||(n.Ea.add(2),await Po(n),n.Ra.set("Unknown"))}function Ys(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new KA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:tC.bind(null,t),t_:nC.bind(null,t),r_:rC.bind(null,t),H_:sC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Lf(t)?Of(t):t.Ra.set("Unknown")):(await t.ma.stop(),p0(t))})),t.ma}function pr(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new XA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:aC.bind(null,t),r_:cC.bind(null,t),ta:lC.bind(null,t),na:uC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wl(t)):(await t.fa.stop(),t.Ta.length>0&&(K(zr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Ff(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jf(t,e){if(Rn("AsyncQueue",`${e}: ${t}`),Ks(t))return new G(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{static emptySet(e){return new Ss(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Ci(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.ga=new ke(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bs{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Bs(e,n,Ss.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dC{constructor(){this.queries=gg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=gg(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new G(L.ABORTED,"Firestore shutting down"))}}function gg(){return new Gr(t=>F_(t),jl)}async function pC(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new fC,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=jf(o,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Uf(n)}async function mC(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gC(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Uf(n)}function yC(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Uf(t){t.Ca.forEach(e=>{e.next()})}var mh,yg;(yg=mh||(mh={})).Ma="default",yg.Cache="cache";class vC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.key=e}}class _0{constructor(e){this.key=e}}class _C{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=j_(e),this.tu=new Ss(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new mg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),w=Ul(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;m&&w?m.data.isEqual(w.data)?N!==P&&(r.track({type:3,doc:w}),V=!0):this.su(m,w)||(r.track({type:2,doc:w}),V=!0,(u&&this.eu(w,u)>0||h&&this.eu(w,h)<0)&&(l=!0)):!m&&w?(r.track({type:0,doc:w}),V=!0):m&&!w&&(r.track({type:1,doc:m}),V=!0,(u||h)&&(l=!0)),V&&(w?(o=o.add(w),i=P?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(w,N){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:V})}};return P(w)-P(N)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Bs(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new _0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new v0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bf="SyncEngine";class EC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wC{constructor(e){this.key=e,this.hu=!1}}class TC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gr(l=>F_(l),jl),this.Iu=new Map,this.Eu=new Set,this.du=new ke(Y.comparator),this.Au=new Map,this.Ru=new Nf,this.Vu={},this.mu=new Map,this.fu=Us.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xC(t,e,n=!0){const r=S0(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await E0(r,e,n,!0),s}async function IC(t,e){const n=S0(t);await E0(n,e,!0,!1)}async function E0(t,e,n,r){const s=await BA(t.localStore,fn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await SC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&f0(t.remoteStore,s),l}async function SC(t,e,n,r,s){t.pu=(p,m,w)=>async function(P,V,A,v){let R=V.view.ru(A);R.Cs&&(R=await ug(P.localStore,V.query,!1).then(({documents:T})=>V.view.ru(T,R)));const b=v&&v.targetChanges.get(V.targetId),U=v&&v.targetMismatches.get(V.targetId)!=null,q=V.view.applyChanges(R,P.isPrimaryClient,b,U);return _g(P,V.targetId,q.au),q.snapshot}(t,p,m,w);const i=await ug(t.localStore,e,!0),o=new _C(e,i.Qs),l=o.ru(i.documents),u=Ro.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);_g(t,n,h.au);const d=new EC(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function AC(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!jl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&bf(r.remoteStore,s.targetId),gh(r,s.targetId)}).catch(Gs)):(gh(r,s.targetId),await dh(r.localStore,s.targetId,!0))}async function CC(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bf(n.remoteStore,r.targetId))}async function RC(t,e,n){const r=MC(t);try{const s=await function(o,l){const u=re(o),h=xe.now(),d=l.reduce((w,N)=>w.add(N.key),le());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=Pn(),P=le();return u.Ns.getEntries(w,d).next(V=>{N=V,N.forEach((A,v)=>{v.isValidDocument()||(P=P.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,N)).next(V=>{p=V;const A=[];for(const v of l){const R=US(v,p.get(v.key).overlayedDocument);R!=null&&A.push(new Kr(v.key,R,P_(R.value.mapValue),dn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,A,l)}).next(V=>{m=V;const A=V.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(w,V.batchId,A)})}).then(()=>({batchId:m.batchId,changes:B_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new ke(ae)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await No(r,s.changes),await Wl(r.remoteStore)}catch(s){const i=jf(s,"Failed to persist write");n.reject(i)}}async function w0(t,e){const n=re(t);try{const r=await FA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?de(o.hu,14607):s.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await No(n,r,e)}catch(r){await Gs(r)}}function vg(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&Uf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PC(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ke(Y.comparator);o=o.insert(i,ut.newNoDocument(i,ne.min()));const l=le().add(i),u=new $l(ne.min(),new Map,new ke(ae),o,l);await w0(r,u),r.du=r.du.remove(i),r.Au.delete(e),zf(r)}else await dh(r.localStore,e,!1).then(()=>gh(r,e,n)).catch(Gs)}async function NC(t,e){const n=re(t),r=e.batch.batchId;try{const s=await LA(n.localStore,e);x0(n,r,null),T0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await No(n,s)}catch(s){await Gs(s)}}async function kC(t,e,n){const r=re(t);try{const s=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(de(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);x0(r,e,n),T0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await No(r,s)}catch(s){await Gs(s)}}function T0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function x0(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function gh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||I0(t,r)})}function I0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zf(t))}function _g(t,e,n){for(const r of n)r instanceof v0?(t.Ru.addReference(r.key,e),VC(t,r)):r instanceof _0?(K(Bf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||I0(t,r.key)):Z(19791,{wu:r})}function VC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(Bf,"New document in limbo: "+n),t.Eu.add(r),zf(t))}function zf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(_e.fromString(e)),r=t.fu.next();t.Au.set(r,new wC(n)),t.du=t.du.insert(n,r),f0(t.remoteStore,new Qn(fn(O_(n.path)),r,"TargetPurposeLimboResolution",Ol.ce))}}async function No(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Vf.As(u.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,h){const d=re(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>j.forEach(h,m=>j.forEach(m.Es,w=>d.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>j.forEach(m.ds,w=>d.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!Ks(p))throw p;K(Df,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const w=d.Ms.get(m),N=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(m,P)}}}(r.localStore,i))}async function DC(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){K(Bf,"User change. New user:",e.toKey());const r=await l0(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new G(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await No(n,r.Ls)}}function bC(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let s=le();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function S0(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=w0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PC.bind(null,e),e.Pu.H_=gC.bind(null,e.eventManager),e.Pu.yu=yC.bind(null,e.eventManager),e}function MC(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kC.bind(null,e),e}class pl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ql(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return OA(this.persistence,new DA,e.initialUser,this.serializer)}Cu(e){return new a0(kf.mi,this.serializer)}Du(e){return new $A}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pl.provider={build:()=>new pl};class OC extends pl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof fl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vA(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gt.withCacheSize(this.cacheSizeBytes):gt.DEFAULT;return new a0(r=>fl.mi(r,n),this.serializer)}}class yh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DC.bind(null,this.syncEngine),await hC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dC}()}createDatastore(e){const n=ql(e.databaseInfo.databaseId),r=function(i){return new GA(i)}(e.databaseInfo);return function(i,o,l,u){return new JA(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new eC(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>vg(this.syncEngine,n,0),function(){return fg.v()?new fg:new qA}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,d){const p=new TC(s,i,o,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);K(zr,"RemoteStore shutting down."),i.Ea.add(5),await Po(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}yh.provider={build:()=>new yh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="FirestoreClient";class FC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=_f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(mr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ec(t,e){t.asyncQueue.verifyOperationInProgress(),K(mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await l0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Eg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jC(t);K(mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>pg(e.remoteStore,s)),t._onlineComponents=e}async function jC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(mr,"Using user provided OfflineComponentProvider");try{await ec(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),await ec(t,new pl)}}else K(mr,"Using default OfflineComponentProvider"),await ec(t,new OC(void 0));return t._offlineComponents}async function A0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(mr,"Using user provided OnlineComponentProvider"),await Eg(t,t._uninitializedComponentsProvider._online)):(K(mr,"Using default OnlineComponentProvider"),await Eg(t,new yh))),t._onlineComponents}function UC(t){return A0(t).then(e=>e.syncEngine)}async function BC(t){const e=await A0(t),n=e.eventManager;return n.onListen=xC.bind(null,e.syncEngine),n.onUnlisten=AC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CC.bind(null,e.syncEngine),n}function zC(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const d=new LC({next:m=>{d.Nu(),o.enqueueAndForget(()=>mC(i,p)),m.fromCache&&u.source==="server"?h.reject(new G(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new vC(l,d,{includeMetadataChanges:!0,qa:!0});return pC(i,p)}(await BC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firestore.googleapis.com",Tg=!0;class xg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R0,this.ssl=Tg}else this.host=e.host,this.ssl=e.ssl??Tg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gA)throw new G(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ql{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $I;switch(r.type){case"firstParty":return new QI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wg.get(n);r&&(K("ComponentProvider","Removing Datastore"),wg.delete(n),r.terminate())}(this),Promise.resolve()}}function $C(t,e,n,r={}){var h;t=co(t,Ql);const s=gf(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(gx(`https://${l}`),Ex("Firestore",!0)),i.host!==R0&&i.host!==l&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!rl(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=at.MOCK_USER;else{d=yx(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new G(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new at(m)}t._authCredentials=new qI(new y_(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yr(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,Xe._jsonSchema))return new Xe(e,r||null,new Y(_e.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:Be("string",Xe._jsonSchemaVersion),referencePath:Be("string")};class ar extends Yr{constructor(e,n,r){super(e,n,O_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new Y(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function _r(t,e,...n){if(t=Ms(t),v_("collection","path",e),t instanceof Ql){const r=_e.fromString(e,...n);return Om(r),new ar(t,null,r)}{if(!(t instanceof Xe||t instanceof ar))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return Om(r),new ar(t.firestore,null,r)}}function ko(t,e,...n){if(t=Ms(t),arguments.length===1&&(e=_f.newId()),v_("doc","path",e),t instanceof Ql){const r=_e.fromString(e,...n);return Mm(r),new Xe(t,null,new Y(r))}{if(!(t instanceof Xe||t instanceof ar))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return Mm(r),new Xe(t.firestore,t instanceof ar?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="AsyncQueue";class Sg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new c0(this,"async_queue_retry"),this._c=()=>{const r=Zu();r&&K(Ig,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Zu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new or;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ks(e))throw e;K(Ig,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Rn("INTERNAL UNHANDLED ERROR: ",Ag(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Ff.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Z(47125,{Pc:Ag(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ag(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Gl extends Ql{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Sg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sg(e),this._firestoreClient=void 0,await e}}}function qC(t,e){const n=typeof t=="object"?t:NI(),r=typeof t=="string"?t:al,s=SI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=px("firestore");i&&$C(s,...i)}return s}function P0(t){if(t._terminated)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HC(t),t._firestoreClient}function HC(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,h,d){return new cS(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,C0(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ot(rt.fromBase64String(e))}catch(n){throw new G(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ot(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ot._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,Ot._jsonSchema))return Ot.fromBase64String(e.bytes)}}Ot._jsonSchemaVersion="firestore/bytes/1.0",Ot._jsonSchema={type:Be("string",Ot._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mn._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,mn._jsonSchema))return new mn(e.latitude,e.longitude)}}mn._jsonSchemaVersion="firestore/geoPoint/1.0",mn._jsonSchema={type:Be("string",mn._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gn(e.vectorValues);throw new G(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gn._jsonSchemaVersion="firestore/vectorValue/1.0",gn._jsonSchema={type:Be("string",gn._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^__.*__$/;class QC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Co(e,this.data,n,this.fieldTransforms)}}function N0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Hf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ml(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(N0(this.Ac)&&WC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ql(e)}Cc(e,n,r,s=!1){return new Hf({Ac:e,methodName:n,Dc:r,path:et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function k0(t){const e=t._freezeSettings(),n=ql(t._databaseId);return new GC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KC(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);b0("Data must be an object, but it was:",o,r);const l=V0(r,o);let u,h;if(i.merge)u=new Qt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=YC(e,p,n);if(!o.contains(m))throw new G(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ZC(d,m)||d.push(m)}u=new Qt(d),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new QC(new Mt(l),u,h)}class Wf extends qf{_toFieldTransform(e){return new OS(e.path,new yo)}isEqual(e){return e instanceof Wf}}function XC(t,e,n,r=!1){return Qf(n,t.Cc(r?4:3,e))}function Qf(t,e){if(D0(t=Ms(t)))return b0("Unsupported field value:",e,t),V0(t,e);if(t instanceof qf)return function(r,s){if(!N0(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Qf(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ms(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:hl(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hl(s.serializer,i)}}if(r instanceof mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ot)return{bytesValue:Z_(s.serializer,r._byteString)};if(r instanceof Xe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gn)return function(o,l){return{mapValue:{fields:{[C_]:{stringValue:R_},[ll]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Sf(l.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Ml(r)}`)}(t,e)}function V0(t,e){const n={};return w_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(t,(r,s)=>{const i=Qf(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function D0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof mn||t instanceof Ot||t instanceof Xe||t instanceof qf||t instanceof gn)}function b0(t,e,n){if(!D0(n)||!__(n)){const r=Ml(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function YC(t,e,n){if((e=Ms(e))instanceof $f)return e._internalPath;if(typeof e=="string")return M0(t,e);throw ml("Field path arguments must be of type string or ",t,!1,void 0,n)}const JC=new RegExp("[~\\*/\\[\\]]");function M0(t,e,n){if(e.search(JC)>=0)throw ml(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $f(...e.split("."))._internalPath}catch{throw ml(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ml(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(L.INVALID_ARGUMENT,l+t+u)}function ZC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eR extends O0{data(){return super.data()}}function Gf(t,e){return typeof e=="string"?M0(t,e):e instanceof $f?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kf{}class L0 extends Kf{}function Kl(t,e,...n){let r=[];e instanceof Kf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Yf).length,l=i.filter(u=>u instanceof Xf).length;if(o>1||o>0&&l>0)throw new G(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Xf extends L0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xf(e,n,r)}_apply(e){const n=this._parse(e);return F0(e._query,n),new Yr(e.firestore,e.converter,ah(e._query,n))}_parse(e){const n=k0(e.firestore);return function(i,o,l,u,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Rg(p,d);const N=[];for(const P of p)N.push(Cg(u,i,P));m={arrayValue:{values:N}}}else m=Cg(u,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Rg(p,d),m=XC(l,o,p,d==="in"||d==="not-in");return Ue.create(h,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Yf extends Kf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)F0(o,u),o=ah(o,u)}(e._query,n),new Yr(e.firestore,e.converter,ah(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jf extends L0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(i,o)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Xl(t,e="asc"){const n=e,r=Gf("orderBy",t);return Jf._create(r,n)}function Cg(t,e,n){if(typeof(n=Ms(n))=="string"){if(n==="")throw new G(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L_(e)&&n.indexOf("/")!==-1)throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!Y.isDocumentKey(r))throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qm(t,new Y(r))}if(n instanceof Xe)return qm(t,n._key);throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ml(n)}.`)}function Rg(t,e){if(!Array.isArray(t)||t.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F0(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nR{convertValue(e,n="none"){switch(dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ll].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Me(o.doubleValue));return new gn(n)}convertGeoPoint(e){return new mn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=hr(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);de(i0(r),9688,{name:e});const s=new po(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class As extends O0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=As._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}As._jsonSchemaVersion="firestore/documentSnapshot/1.0",As._jsonSchema={type:Be("string",As._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class Na extends As{data(e={}){return super.data(e)}}class Cs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Na(this._firestore,this._userDataWriter,r.key,r,new fa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Na(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Na(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:sR(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}Cs._jsonSchemaVersion="firestore/querySnapshot/1.0",Cs._jsonSchema={type:Be("string",Cs._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class iR extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ot(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function Yl(t){t=co(t,Yr);const e=co(t.firestore,Gl),n=P0(e),r=new iR(e);return tR(t._query),zC(n,t._query).then(s=>new Cs(e,r,t,s))}function Jl(t){return j0(co(t.firestore,Gl),[new Af(t._key,dn.none())])}function Zl(t,e){const n=co(t.firestore,Gl),r=ko(t),s=rR(t.converter,e);return j0(n,[KC(k0(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function j0(t,e){return function(r,s){const i=new or;return r.asyncQueue.enqueueAndForget(async()=>RC(await UC(r),s,i)),i.promise}(P0(t),e)}function eu(){return new Wf("serverTimestamp")}(function(e,n=!0){(function(s){Qs=s})(PI),il(new lo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Gl(new HI(r.getProvider("auth-internal")),new GI(o,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(h.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Is(km,Vm,e),Is(km,Vm,"esm2020")})();const oR={apiKey:"AIzaSyBUabFVbZsdvJxSNLz9E6uooOHmHAYztMQ",authDomain:"numerical-web-fe12a.firebaseapp.com",projectId:"numerical-web-fe12a",storageBucket:"numerical-web-fe12a.appspot.com",messagingSenderId:"450601861029",appId:"1:450601861029:web:8ad42bf62f220abb7a324c"},aR=a_(oR),Bt=qC(aR),Zf="problems_bisection";async function lR(){const t=Kl(_r(Bt,Zf),Xl("createdAt","desc"));return(await Yl(t)).docs.map(n=>({id:n.id,...n.data()}))}async function uR(t){return Zl(_r(Bt,Zf),{...t,method:"bisection",createdAt:eu()})}async function cR(t){return Jl(ko(Bt,Zf,t))}const hR=Object.freeze(Object.defineProperty({__proto__:null,deleteBisectionProblem:cR,getBisectionProblems:lR,saveBisectionProblem:uR},Symbol.toStringTag,{value:"Module"}));function tu(t){const[e,n]=M.useState([]),[r,s]=M.useState(new Set),i=M.useCallback(async()=>{if(!t||typeof t.get!="function"){const d=(t==null?void 0:t.getBisectionProblems)||(t==null?void 0:t.getFalsePositionProblems)||(t==null?void 0:t.getProblems)||(t==null?void 0:t.get);if(!d)return;const p=await d();n(p);return}const h=await t.get();n(h)},[t]),o=M.useCallback(async h=>{if(!t)throw new Error("service required");const d=t.saveBisectionProblem||t.saveFalsePositionProblem||t.save||t.add;if(!d)throw new Error("save method not found on service");await d(h),await i()},[t,i]),l=M.useCallback(async h=>{if(!t)throw new Error("service required");const d=t.deleteBisectionProblem||t.deleteFalsePositionProblem||t.delete||t.remove;if(!d)throw new Error("delete method not found on service");await d(h),await i()},[t,i]),u=M.useCallback((h,d=480)=>{s(p=>new Set(p).add(h)),setTimeout(async()=>{try{await l(h)}finally{s(p=>{const m=new Set(p);return m.delete(h),m})}},d)},[l]);return{problems:e,removingIds:r,refresh:i,saveProblem:o,deleteProblem:u}}function Wt(t){return t===null||Number.isNaN(t)?"-":isFinite(t)?Number(t).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(t)}function gl(t){if(!t||!t.trim())return null;let e=t.replace(/\^/g,"**");e=e.replace(/\bln\s*\(/gi,"log("),e=e.replace(/\bpi\b/gi,"PI"),e=e.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+e+"); }")}catch{return null}}function fR(t,e,n,r=1e-6,s=50){try{let i=t(e),o=t(n);if(!isFinite(i)||!isFinite(o))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*o>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const l=[];let u=null;for(let h=0;h<=s;h++){const d=(e+n)/2,p=t(d);if(!isFinite(p))return{error:"f(x1) คำนวณไม่ได้",iterations:l,converged:!1};let m=null;if(u!==null){const w=Math.abs(d)>1e-12?Math.abs(d):1;m=Math.abs(d-u)/w}if(l.push({iter:h,xl:e,xr:n,x1:d,fx1:p,error:m}),Math.abs(p)===0||m!==null&&m<=r)return{root:d,iterations:l,converged:!0};i*p<0?(n=d,o=p):(e=d,i=p),u=d}return{root:(e+n)/2,iterations:l,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function dR(t,e,n=-5,r=5,s=[],i={}){if(!t)return;const{width:o=800,height:l=320,bg:u="#061022",curveColor:h="#8ab4ff",axesColor:d="rgba(255,255,255,0.08)",pointColor:p="#f97316",lastPointColor:m="#fb923c"}=i,w=t.getContext("2d"),N=t.width=o,P=t.height=l;w.clearRect(0,0,N,P),w.fillStyle=u,w.fillRect(0,0,N,P);const V=e||(Q=>Q),A=(r-n)*.2||1,v=n-A,R=r+A,b=500;let U=[],q=[],T=1/0,y=-1/0;for(let Q=0;Q<b;Q++){const se=v+(R-v)*Q/(b-1);let H;try{H=V(se)}catch{H=NaN}U.push(se),q.push(H),isFinite(H)&&(H<T&&(T=H),H>y&&(y=H))}T===1/0&&(T=-1,y=1);const S=(y-T)*.2||1;T-=S,y+=S;const C=Q=>(Q-v)/(R-v)*N,I=Q=>P-(Q-T)/(y-T)*P;if(w.strokeStyle=d,T<0&&y>0){const Q=I(0);w.beginPath(),w.moveTo(0,Q),w.lineTo(N,Q),w.stroke()}if(v<0&&R>0){const Q=C(0);w.beginPath(),w.moveTo(Q,0),w.lineTo(Q,P),w.stroke()}w.beginPath(),w.lineWidth=2,w.strokeStyle=h;let x=!1;for(let Q=0;Q<b;Q++){const se=U[Q],H=q[Q];if(!isFinite(H)){x=!1;continue}const B=C(se),O=I(H);x?w.lineTo(B,O):(w.moveTo(B,O),x=!0)}w.stroke(),s.forEach(Q=>{const se=C(Q.x1),H=I(Q.fx1);w.beginPath(),w.arc(se,H,3,0,2*Math.PI),w.fillStyle=p,w.fill()});const _=(Q,se,H)=>{const B=C(Q);w.beginPath(),w.moveTo(B,0),w.lineTo(B,P),w.strokeStyle=se,w.stroke(),w.fillStyle=se,w.font="12px sans-serif",w.fillText(H+"="+Wt(Q),B+6,18)};if(_(n,"#22c55e","XL"),_(r,"#ef4444","XR"),s.length){const Q=s[s.length-1],se=C(Q.x1),H=I(Q.fx1);w.beginPath(),w.arc(se,H,6,0,2*Math.PI),w.fillStyle=m,w.fill()}}function U0({func:t,xl:e=-5,xr:n=5,iterations:r=[],width:s=800,height:i=320,className:o=""}){const l=M.useRef(null);return M.useEffect(()=>{const u=l.current;dR(u,t,e,n,r,{width:s,height:i})},[t,e,n,r,s,i]),E.jsx("canvas",{ref:l,width:s,height:i,className:o})}function B0({iterations:t=[]}){return!t||t.length===0?null:E.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"xl"}),E.jsx("th",{className:"p-2 text-right",children:"xr"}),E.jsx("th",{className:"p-2 text-right",children:"x1"}),E.jsx("th",{className:"p-2 text-right",children:"f(x1)"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:t.map(e=>E.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[E.jsx("td",{className:"p-2 text-right",children:e.iter}),E.jsx("td",{className:"p-2 text-right",children:Wt(e.xl)}),E.jsx("td",{className:"p-2 text-right",children:Wt(e.xr)}),E.jsx("td",{className:"p-2 text-right",children:Wt(e.x1)}),E.jsx("td",{className:"p-2 text-right",children:Wt(e.fx1)}),E.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":Wt(e.error)})]},e.iter))})]})})}function z0({problems:t=[],onLoad:e=()=>{},onDelete:n=()=>{},removingIds:r=new Set}){return!t||t.length===0?null:E.jsxs("div",{className:"mt-2",children:[E.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"โจทย์ที่บันทึกไว้:"}),E.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:t.map(s=>E.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${r.has(s.id)?"fade-out":""}`,children:[E.jsx("span",{className:"truncate",children:s.expr}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>e(s),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),E.jsx("button",{onClick:()=>n(s),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},s.id))})]})}function Vo({title:t,subtitle:e}){return E.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[E.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:t}),e&&E.jsx("div",{className:"text-sm text-gray-400",children:e})]})}function pR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[m,w]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,A]=M.useState("-"),{problems:v,removingIds:R,refresh:b,saveProblem:U,deleteProblem:q}=tu(hR);M.useEffect(()=>{b().catch(console.error)},[b]);const T=async()=>{if(!t||!n||!s||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await U({expr:t,xl:n,xr:s,tol:o,maxIter:u}),alert("บันทึกแล้ว!")}catch(x){console.error("บันทึกโจทย์ผิดพลาด:",x),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},y=x=>{e(x.expr??""),r(x.xl??""),i(x.xr??""),l(x.tol??""),h(x.maxIter??"")},S=x=>{if(confirm(`ลบโจทย์นี้ไหม?
${x.expr}`))try{q(x.id)}catch(_){console.error("ลบโจทย์ผิดพลาด:",_),alert("ลบไม่สำเร็จ")}},C=()=>{const x=gl(t);if(!x){w("สถานะ: สมการไม่ถูกต้อง");return}const _=parseFloat(n),Q=parseFloat(s),se=parseFloat(o),H=parseInt(u,10);if(isNaN(_)||isNaN(Q)){w("สถานะ: XL/XR ไม่ถูกต้อง");return}if(_>=Q){w("สถานะ: ต้องมี XL < XR");return}if(!isFinite(se)||se<=0){w("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(H)||H<=0){w("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const B=fR(x,_,Q,se,H);if(B.error){w("สถานะ: "+B.error);return}p(B.iterations),w("สถานะ: เสร็จสิ้น "+(B.converged?"(converged)":"(ไม่ converged)")),A(Math.max(0,B.iterations.length-1)),P(Wt(B.root))},I=()=>{e(""),r(""),i(""),l(""),h(""),p([]),w("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-")};return E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsx(Vo,{title:"Bisection Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:x=>e(x.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),E.jsx("input",{type:"number",value:n,onChange:x=>r(x.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),E.jsx("input",{type:"number",value:s,onChange:x=>i(x.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),E.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:u,onChange:x=>h(x.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:C,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),E.jsx("button",{onClick:I,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),E.jsx("button",{onClick:T,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),E.jsxs("div",{className:"text-sm mb-2",children:[E.jsx("div",{children:m}),E.jsxs("div",{children:["Iterations: ",V]}),E.jsxs("div",{children:["Root: ",N]})]}),v.length>0&&E.jsxs("div",{className:"mt-2",children:[E.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"โจทย์ที่บันทึกไว้:"}),E.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:v.map(x=>E.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${R.has(x.id)?"fade-out":""}`,children:[E.jsx("span",{className:"truncate",children:x.expr}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>y(x),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),E.jsx("button",{onClick:()=>S(x),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},x.id))})]})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),E.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:E.jsx(U0,{func:gl(t)||(x=>x),xl:parseFloat(n)||-5,xr:parseFloat(s)||5,iterations:d,className:"w-full h-72 rounded"})}),E.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = x1 ทุก iteration (วงใหญ่ = x1 สุดท้าย)"})]})]}),E.jsx(B0,{iterations:d}),E.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const ed="problems_falseposition";async function $0(){const t=Kl(_r(Bt,ed),Xl("createdAt","desc"));return(await Yl(t)).docs.map(n=>({id:n.id,...n.data()}))}async function q0(t){return Zl(_r(Bt,ed),{...t,method:"falseposition",createdAt:eu()})}async function H0(t){return Jl(ko(Bt,ed,t))}const mR={getFalsePositionProblems:$0,saveFalsePositionProblem:q0,deleteFalsePositionProblem:H0},gR=Object.freeze(Object.defineProperty({__proto__:null,default:mR,deleteFalsePositionProblem:H0,getFalsePositionProblems:$0,saveFalsePositionProblem:q0},Symbol.toStringTag,{value:"Module"}));function yR(t,e,n,r=1e-6,s=50){try{let i=t(e),o=t(n);if(!isFinite(i)||!isFinite(o))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*o>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const l=[];let u=null,h=null;for(let d=0;d<=s;d++){u=(e*o-n*i)/(o-i);const p=t(u);if(!isFinite(p))return{error:"f(x1) คำนวณไม่ได้",iterations:l,converged:!1};const m=h===null?null:Math.abs((u-h)/(Math.abs(u)>1e-12?Math.abs(u):1));if(l.push({iter:d,xl:e,xr:n,x1:u,fx1:p,error:m}),Math.abs(p)===0||m!==null&&m<=r)return{root:u,iterations:l,converged:!0};i*p<0?(n=u,o=p):(e=u,i=p),h=u}return{root:u,iterations:l,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function vR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[m,w]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,A]=M.useState("-"),{problems:v,removingIds:R,refresh:b,saveProblem:U,deleteProblem:q}=tu(gR);M.useEffect(()=>{b().catch(console.error)},[b]);const T=async()=>{if(!t||!n||!s||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await U({expr:t,xl:n,xr:s,tol:o,maxIter:u}),alert("บันทึกแล้ว!")}catch(x){console.error("บันทึกโจทย์ผิดพลาด:",x),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},y=x=>{e(x.expr??""),r(x.xl??""),i(x.xr??""),l(x.tol??""),h(x.maxIter??"")},S=x=>{if(confirm(`ลบโจทย์นี้ไหม?
${x.expr}`))try{q(x.id)}catch(_){console.error("ลบโจทย์ผิดพลาด:",_),alert("ลบไม่สำเร็จ")}},C=()=>{const x=gl(t);if(!x){w("สถานะ: สมการไม่ถูกต้อง");return}const _=parseFloat(n),Q=parseFloat(s),se=parseFloat(o),H=parseInt(u,10);if(isNaN(_)||isNaN(Q)){w("สถานะ: XL/XR ไม่ถูกต้อง");return}if(_>=Q){w("สถานะ: ต้องมี XL < XR");return}if(!isFinite(se)||se<=0){w("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(H)||H<=0){w("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const B=yR(x,_,Q,se,H);if(B.error){w("สถานะ: "+B.error);return}p(B.iterations),w("สถานะ: เสร็จสิ้น "+(B.converged?"(converged)":"(ไม่ converged)")),A(Math.max(0,B.iterations.length-1)),P(Wt(B.root))},I=()=>{e(""),r(""),i(""),l(""),h(""),p([]),w("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-")};return E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsx(Vo,{title:"False Position Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:x=>e(x.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),E.jsx("input",{type:"number",value:n,onChange:x=>r(x.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),E.jsx("input",{type:"number",value:s,onChange:x=>i(x.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),E.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:u,onChange:x=>h(x.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:C,className:"btn-primary glow-btn flex-1 py-2 rounded font-semibold",children:"คำนวณ"}),E.jsx("button",{onClick:I,className:"btn-danger flex-1 border border-[#30363d] py-2 rounded",children:"รีเซ็ต"})]}),E.jsx("button",{onClick:T,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์นี้"}),E.jsxs("div",{className:"text-sm mb-2",children:[E.jsx("div",{children:m}),E.jsxs("div",{children:["Iterations: ",V]}),E.jsxs("div",{children:["Root: ",N]})]}),v.length>0&&E.jsxs("div",{className:"mt-2",children:[E.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"โจทย์ที่บันทึกไว้:"}),E.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto border border-slate-700",children:v.map(x=>E.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-[#30363d] py-1 ${R.has(x.id)?"fade-out":""}`,children:[E.jsx("span",{className:"truncate",children:x.expr}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>y(x),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),E.jsx("button",{onClick:()=>S(x),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},x.id))})]})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),E.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:E.jsx(U0,{func:gl(t)||(x=>x),xl:parseFloat(n)||-5,xr:parseFloat(s)||5,iterations:d,className:"w-full h-72 rounded"})}),E.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = X1 ทุก iteration (วงใหญ่ = X1 สุดท้าย)"})]})]}),E.jsx(B0,{iterations:d}),E.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function _R(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState([]),[d,p]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,w]=M.useState("-"),[N,P]=M.useState("-"),[V,A]=M.useState(null),[v,R]=M.useState("");function b(I){if(!I||!I.trim())return null;let x=I.replace(/\^/g,"**");x=x.replace(/\bln\s*\(/gi,"log("),x=x.replace(/\bpi\b/gi,"PI"),x=x.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+x+"); }")}catch{return null}}function U(I){return I===null?"-":isFinite(I)?Number(I).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(I)}function q(I,x){const _=Math.cbrt(Number.EPSILON)*(Math.abs(x)+1),Q=I(x+_),se=I(x-_);return(Q-se)/(2*_)}function T(I,x){try{const _=q(I,x);return!isFinite(_)||_===0?.5:1/Math.max(1,Math.abs(_))}catch{return .5}}function y(I,x,_,Q,se){let H=[],B=x;H.push({iter:0,x:B,error:null});for(let O=1;O<=Q;O++){const F=B-se*I(B),z=Math.abs((F-B)/F);if(H.push({iter:O,x:F,error:z}),!isFinite(F))return{error:"ค่า x ไม่เป็นจำนวนจำกัด (อาจ Diverge)"};if(z<=_)return{root:F,iterations:H,converged:!0,lambda:se};B=F}return{root:H[H.length-1].x,iterations:H,converged:!1,lambda:se}}M.useEffect(()=>{const I=b(t),x=parseFloat(n);if(!I||!isFinite(x)){A(null),R("");return}const _=T(I,x);A(_);const Q=t.replace(/\s+/g," ").trim();R(`f2(x) = x - (${_.toPrecision(6)}) * [ ${Q||"f(x)"} ]`)},[t,n]);const S=()=>{const I=b(t);if(!I){p("สถานะ: f(x) ไม่ถูกต้อง");return}const x=parseFloat(n),_=parseFloat(s),Q=parseInt(o,10);if(!isFinite(x)){p("สถานะ: ค่าเริ่มต้น x0 ไม่ถูกต้อง");return}if(!isFinite(_)||_<=0){p("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(Q)||Q<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const se=T(I,x),H=y(I,x,_,Q,se);if(H.error){p("สถานะ: "+H.error),h([]),P("-"),w("-");return}h(H.iterations),p("สถานะ: เสร็จสิ้น "+(H.converged?"(converged)":"(ไม่ converged)")),P(H.iterations.length),w(U(H.root)),A(H.lambda);const B=t.replace(/\s+/g," ").trim();R(`f2(x) = x - (${H.lambda.toPrecision(6)}) * [ ${B||"f(x)"} ]`)},C=()=>{e(""),r(""),i(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),w("-"),A(null),R("")};return E.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[E.jsx(Vo,{title:"One-Point Iteration",subtitle:"แปลง f(x) → f2(x) อัตโนมัติ"}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x)"}),E.jsx("input",{type:"text",value:t,onChange:I=>e(I.target.value),placeholder:"เช่น x^3 + x - 1,  sin(x) - x/2,  ln(x) - 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x0"}),E.jsx("input",{type:"number",value:n,onChange:I=>r(I.target.value),placeholder:"เช่น 0.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),E.jsx("input",{type:"text",value:s,onChange:I=>i(I.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:o,onChange:I=>l(I.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"rounded-md bg-slate-900 border border-slate-700 p-3 text-sm text-gray-300 mb-4",children:[E.jsx("div",{className:"font-semibold text-cyan-300 mb-1",children:"f2(x) ที่ใช้ในการคำนวณ"}),E.jsx("div",{className:"break-words",children:v||"— (กรอก f(x) และ x0 เพื่อดู f2(x))"}),V!==null&&E.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["λ (อัตโนมัติ) = ",U(V)]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:S,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),E.jsx("button",{onClick:C,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),E.jsxs("div",{className:"text-sm mb-3",children:[E.jsx("div",{children:d}),E.jsxs("div",{children:["Iterations: ",N]}),E.jsxs("div",{children:["Root: ",m]})]}),u.length>0&&E.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"x"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:u.map(I=>E.jsxs("tr",{className:"border-b border-slate-700",children:[E.jsx("td",{className:"p-2 text-right",children:I.iter}),E.jsx("td",{className:"p-2 text-right",children:U(I.x)}),E.jsx("td",{className:"p-2 text-right",children:I.error===null?"-":U(I.error)})]},I.iter))})]})}),E.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:[E.jsx("div",{children:"หมายเหตุ: ใช้หน่วยเรเดียนสำหรับ sin/cos/tan; เขียนคูณให้ชัด เช่น 2*x (ไม่ใช่ 2x)"}),E.jsx("div",{children:"ตัวอย่าง f(x): x^3 + x - 1,  e^(-x) - x,  ln(x) - 1,  sin(x) - x/2"})]})]})]})}const td="problems_newtonraphson";async function nd(){const t=Kl(_r(Bt,td),Xl("createdAt","desc"));return(await Yl(t)).docs.map(n=>({id:n.id,...n.data()}))}async function rd(t){return Zl(_r(Bt,td),{...t,method:"newton",createdAt:eu()})}async function sd(t){return Jl(ko(Bt,td,t))}async function W0(){return nd()}async function Q0(t){return rd(t)}async function G0(t){return sd(t)}const ER={getNewtonProblems:nd,saveNewtonProblem:rd,deleteNewtonProblem:sd,getProblems:W0,save:Q0,remove:G0},wR=Object.freeze(Object.defineProperty({__proto__:null,default:ER,deleteNewtonProblem:sd,getNewtonProblems:nd,getProblems:W0,remove:G0,save:Q0,saveNewtonProblem:rd},Symbol.toStringTag,{value:"Module"}));function K0({iterations:t=[]}){return!t||t.length===0?null:E.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"x"}),E.jsx("th",{className:"p-2 text-right",children:"f(x)"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:t.map(e=>E.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[E.jsx("td",{className:"p-2 text-right",children:e.iter}),E.jsx("td",{className:"p-2 text-right",children:Wt(e.x)}),E.jsx("td",{className:"p-2 text-right",children:Wt(e.fx)}),E.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":Wt(e.error)})]},e.iter))})]})})}function TR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState([]),[d,p]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[m,w]=M.useState("-"),[N,P]=M.useState("-"),V=M.useRef(null),{problems:A,removingIds:v,refresh:R,saveProblem:b,deleteProblem:U}=tu(wR),q=async()=>{if(!t||!n||!s||!o){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await b({expr:t,x0:n,tol:s,maxIter:o}),alert("บันทึกแล้ว!")}catch(H){console.error("บันทึกโจทย์ผิดพลาด:",H),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},T=H=>{e(H.expr??""),r(H.x0??""),i(H.tol??""),l(H.maxIter??"")},y=H=>{if(confirm(`ลบโจทย์นี้ไหม?
${H.expr}`))try{U(H.id)}catch(B){console.error("ลบโจทย์ผิดพลาด:",B),alert("ลบไม่สำเร็จ")}};function S(H){if(!H||!H.trim())return null;let B=H.replace(/\^/g,"**");B=B.replace(/\bln\s*\(/gi,"log("),B=B.replace(/\bpi\b/gi,"PI"),B=B.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+B+"); }")}catch{return null}}function C(H,B){return(H(B+1e-6)-H(B-1e-6))/(2*1e-6)}function I(H,B,O,F){let z=[],J=B,ee=H(J);z.push({iter:0,x:J,fx:ee,error:null});for(let Ve=1;Ve<=F;Ve++){let me=C(H,J);if(me===0)return{error:"f'(x) = 0 หารด้วยศูนย์ไม่ได้"};let Se=J-ee/me,ge=H(Se),Ae=Math.abs(Se-J)/Math.abs(Se);if(z.push({iter:Ve,x:Se,fx:ge,error:Ae}),Math.abs(ge)<O||Ae<O)return{root:Se,iterations:z,converged:!0};J=Se,ee=ge}return{root:J,iterations:z,converged:!1}}function x(H){return H===null?"-":isFinite(H)?Number(H).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(H)}function _(H,B){const O=V.current,F=O.getContext("2d"),z=O.width,J=O.height;if(F.clearRect(0,0,z,J),F.fillStyle="#061022",F.fillRect(0,0,z,J),B.length===0)return;const ee=B.map(ye=>ye.x),Ve=B.map(ye=>ye.fx),me=Math.min(...ee),Se=Math.max(...ee),ge=(Se-me)*.3||1,Ae=me-ge,Tt=Se+ge,kn=Math.min(...Ve),Er=Math.max(...Ve),Jt=(Er-kn)*.3||1,Zt=kn-Jt,en=Er+Jt,tn=ye=>(ye-Ae)/(Tt-Ae)*z,xt=ye=>J-(ye-Zt)/(en-Zt)*J;if(F.strokeStyle="rgba(255,255,255,0.1)",Zt<0&&en>0){const ye=xt(0);F.beginPath(),F.moveTo(0,ye),F.lineTo(z,ye),F.stroke()}if(Ae<0&&Tt>0){const ye=tn(0);F.beginPath(),F.moveTo(ye,0),F.lineTo(ye,J),F.stroke()}F.beginPath(),F.lineWidth=2,F.strokeStyle="#8ab4ff";const kt=500;let nn=!1;for(let ye=0;ye<kt;ye++){const te=Ae+(Tt-Ae)*ye/(kt-1);let ue;try{ue=H(te)}catch{ue=NaN}if(!isFinite(ue)){nn=!1;continue}const Le=tn(te),Vt=xt(ue);nn?F.lineTo(Le,Vt):(F.moveTo(Le,Vt),nn=!0)}F.stroke(),B.forEach((ye,te)=>{const ue=tn(ye.x),Le=xt(ye.fx);if(te<B.length-1){const Vt=B[te+1].x;F.beginPath(),F.moveTo(ue,Le),F.lineTo(tn(Vt),xt(0)),F.strokeStyle="#22c55e",F.setLineDash([4,4]),F.stroke(),F.setLineDash([])}F.beginPath(),F.moveTo(ue,Le),F.lineTo(ue,xt(0)),F.strokeStyle="rgba(255,255,255,0.2)",F.stroke(),F.fillStyle="#e2e8f0",F.font="12px sans-serif",F.fillText("x"+te,ue-10,xt(0)+14),F.beginPath(),F.arc(ue,Le,te===B.length-1?6:3,0,2*Math.PI),F.fillStyle=te===B.length-1?"#fb923c":"#f97316",F.fill()})}const Q=()=>{const H=S(t);if(!H){p("สถานะ: สมการไม่ถูกต้อง");return}const B=parseFloat(n),O=parseFloat(s),F=parseInt(o,10);if(isNaN(B)){p("สถานะ: x0 ไม่ถูกต้อง");return}if(!isFinite(O)||O<=0){p("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(F)||F<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const z=I(H,B,O,F);if(z.error){p("สถานะ: "+z.error);return}h(z.iterations),p("สถานะ: เสร็จสิ้น "+(z.converged?"(converged)":"(ไม่ converged)")),P(z.iterations.length),w(x(z.root)),_(H,z.iterations)},se=()=>{e(""),r(""),i(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),w("-"),_(()=>0,[])};return M.useEffect(()=>{_(()=>0,[])},[]),M.useEffect(()=>{R().catch(console.error)},[R]),E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsx(Vo,{title:"Newton-Raphson Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:H=>e(H.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"mb-3",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),E.jsx("input",{type:"number",value:n,onChange:H=>r(H.target.value),placeholder:"เช่น 1.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),E.jsx("input",{type:"text",value:s,onChange:H=>i(H.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:o,onChange:H=>l(H.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:Q,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),E.jsx("button",{onClick:se,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),E.jsx("button",{onClick:q,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),E.jsxs("div",{className:"text-sm",children:[E.jsx("div",{children:d}),E.jsxs("div",{children:["Iterations: ",N]}),E.jsxs("div",{children:["Root: ",m]})]}),E.jsx(z0,{problems:A,onLoad:T,onDelete:y,removingIds:v})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Iterations"}),E.jsx("canvas",{ref:V,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),E.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["จุดส้ม = ค่าที่ได้ในแต่ละ iteration, จุดส้มใหญ่ = ค่าสุดท้าย เส้นเขียว = เส้นสัมผัส f(x) ที่ x",E.jsx("sub",{children:"i"}),", Label = x0, x1, x2 …"]})]})]}),E.jsx("div",{className:"mt-6",children:E.jsx(K0,{iterations:u})})]})}const id="problems_secant";async function od(){const t=Kl(_r(Bt,id),Xl("createdAt","desc"));return(await Yl(t)).docs.map(n=>({id:n.id,...n.data()}))}async function ad(t){return Zl(_r(Bt,id),{...t,method:"secant",createdAt:eu()})}async function ld(t){return Jl(ko(Bt,id,t))}async function X0(){return od()}async function Y0(t){return ad(t)}async function J0(t){return ld(t)}const xR={getSecantProblems:od,saveSecantProblem:ad,deleteSecantProblem:ld,getProblems:X0,save:Y0,remove:J0},IR=Object.freeze(Object.defineProperty({__proto__:null,default:xR,deleteSecantProblem:ld,getProblems:X0,getSecantProblems:od,remove:J0,save:Y0,saveSecantProblem:ad},Symbol.toStringTag,{value:"Module"}));function SR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[m,w]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,A]=M.useState("-"),v=M.useRef(null),{problems:R,removingIds:b,refresh:U,saveProblem:q,deleteProblem:T}=tu(IR),y=async()=>{if(!t||!n||!s||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await q({expr:t,x0:n,x1:s,tol:o,maxIter:u}),alert("บันทึกแล้ว!")}catch(B){console.error("บันทึกโจทย์ผิดพลาด:",B),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},S=B=>{e(B.expr??""),r(B.x0??""),i(B.x1??""),l(B.tol??""),h(B.maxIter??"")},C=B=>{if(confirm(`ลบโจทย์นี้ไหม?
${B.expr}`))try{T(B.id)}catch(O){console.error("ลบโจทย์ผิดพลาด:",O),alert("ลบไม่สำเร็จ")}};function I(B){if(!B||!B.trim())return null;let O=B.replace(/\^/g,"**");O=O.replace(/\bln\s*\(/gi,"log("),O=O.replace(/\bpi\b/gi,"PI"),O=O.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+O+"); }")}catch{return null}}function x(B,O,F,z,J){let ee=[],Ve=B(O),me=B(F);ee.push({iter:0,x:O,fx:Ve,error:null}),ee.push({iter:1,x:F,fx:me,error:null});for(let Se=2;Se<=J;Se++){if(me-Ve===0)return{error:"หารด้วยศูนย์ (f1 - f0 = 0)"};let ge=F-me*(F-O)/(me-Ve),Ae=B(ge),Tt=Math.abs(ge-F)/Math.abs(ge);if(ee.push({iter:Se,x:ge,fx:Ae,error:Tt}),Math.abs(Ae)<z||Tt<z)return{root:ge,iterations:ee,converged:!0};O=F,Ve=me,F=ge,me=Ae}return{root:F,iterations:ee,converged:!1}}function _(B){return B===null?"-":isFinite(B)?Number(B).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(B)}function Q(B,O){const F=v.current,z=F.getContext("2d"),J=F.width,ee=F.height;if(z.clearRect(0,0,J,ee),z.fillStyle="#061022",z.fillRect(0,0,J,ee),O.length===0)return;const Ve=O.map(te=>te.x),me=O.map(te=>te.fx),Se=Math.min(...Ve),ge=Math.max(...Ve),Ae=Math.min(...me),Tt=Math.max(...me),kn=(ge-Se)*.3||1,Er=(Tt-Ae)*.3||1,Jt=Se-kn,Zt=ge+kn,en=Ae-Er,tn=Tt+Er,xt=te=>(te-Jt)/(Zt-Jt)*J,kt=te=>ee-(te-en)/(tn-en)*ee;if(z.strokeStyle="rgba(255,255,255,0.1)",en<0&&tn>0){const te=kt(0);z.beginPath(),z.moveTo(0,te),z.lineTo(J,te),z.stroke()}if(Jt<0&&Zt>0){const te=xt(0);z.beginPath(),z.moveTo(te,0),z.lineTo(te,ee),z.stroke()}z.beginPath(),z.lineWidth=2,z.strokeStyle="#8ab4ff";const nn=500;let ye=!1;for(let te=0;te<nn;te++){const ue=Jt+(Zt-Jt)*te/(nn-1);let Le;try{Le=B(ue)}catch{Le=NaN}if(!isFinite(Le)){ye=!1;continue}const Vt=xt(ue),Vn=kt(Le);ye?z.lineTo(Vt,Vn):(z.moveTo(Vt,Vn),ye=!0)}z.stroke(),O.forEach((te,ue)=>{const Le=xt(te.x),Vt=kt(te.fx);if(ue>0){const Vn=O[ue-1];z.beginPath(),z.moveTo(xt(Vn.x),kt(Vn.fx)),z.lineTo(Le,Vt),z.strokeStyle="#22c55e",z.setLineDash([4,4]),z.stroke(),z.setLineDash([])}z.beginPath(),z.arc(Le,Vt,ue===O.length-1?6:3,0,2*Math.PI),z.fillStyle=ue===O.length-1?"#fb923c":"#f97316",z.fill(),z.fillStyle="#e2e8f0",z.font="12px sans-serif",z.fillText("x"+ue,Le-10,kt(0)+14)})}const se=()=>{const B=I(t);if(!B){w("สถานะ: สมการไม่ถูกต้อง");return}const O=parseFloat(n),F=parseFloat(s),z=parseFloat(o),J=parseInt(u,10);if(isNaN(O)||isNaN(F)){w("สถานะ: x0/x1 ไม่ถูกต้อง");return}if(!isFinite(z)||z<=0){w("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(J)||J<=0){w("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const ee=x(B,O,F,z,J);if(ee.error){w("สถานะ: "+ee.error);return}p(ee.iterations),w("สถานะ: เสร็จสิ้น "+(ee.converged?"(converged)":"(ไม่ converged)")),A(ee.iterations.length),P(_(ee.root)),Q(B,ee.iterations)},H=()=>{e(""),r(""),i(""),l(""),h(""),p([]),w("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-"),Q(()=>0,[])};return M.useEffect(()=>{Q(()=>0,[])},[]),M.useEffect(()=>{U().catch(console.error)},[U]),E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsx(Vo,{title:"Secant Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:B=>e(B.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),E.jsx("input",{type:"number",value:n,onChange:B=>r(B.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x1"}),E.jsx("input",{type:"number",value:s,onChange:B=>i(B.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),E.jsx("input",{type:"text",value:o,onChange:B=>l(B.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:u,onChange:B=>h(B.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:se,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),E.jsx("button",{onClick:H,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),E.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),E.jsxs("div",{className:"text-sm",children:[E.jsx("div",{children:m}),E.jsxs("div",{children:["Iterations: ",V]}),E.jsxs("div",{children:["Root: ",N]})]}),E.jsx(z0,{problems:R,onLoad:S,onDelete:C,removingIds:b})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Secant"}),E.jsx("canvas",{ref:v,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),E.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เส้นเขียว = เส้น secant ระหว่างแต่ละจุด, จุดส้ม = ค่าที่ได้, จุดส้มใหญ่ = ค่าสุดท้าย Label = x0, x1, x2 …"})]})]}),E.jsx("div",{className:"mt-6",children:E.jsx(K0,{iterations:d})})]})}function AR(){return E.jsx(JT,{basename:"/Numerical-web",children:E.jsxs(HT,{children:[E.jsx(Rr,{path:"/",element:E.jsx(rx,{})}),E.jsx(Rr,{path:"/bisection",element:E.jsx(pR,{})}),E.jsx(Rr,{path:"/falsepo",element:E.jsx(vR,{})}),E.jsx(Rr,{path:"/onepoint",element:E.jsx(_R,{})}),E.jsx(Rr,{path:"/newtonrap",element:E.jsx(TR,{})}),E.jsx(Rr,{path:"/secant",element:E.jsx(SR,{})})]})})}Bv(document.getElementById("root")).render(E.jsx(M.StrictMode,{children:E.jsx(AR,{})}));
