function rE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function sE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fg={exports:{}},ul={},dg={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=Symbol.for("react.element"),iE=Symbol.for("react.portal"),oE=Symbol.for("react.fragment"),aE=Symbol.for("react.strict_mode"),lE=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),cE=Symbol.for("react.context"),hE=Symbol.for("react.forward_ref"),fE=Symbol.for("react.suspense"),dE=Symbol.for("react.memo"),pE=Symbol.for("react.lazy"),Fd=Symbol.iterator;function mE(t){return t===null||typeof t!="object"?null:(t=Fd&&t[Fd]||t["@@iterator"],typeof t=="function"?t:null)}var pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mg=Object.assign,gg={};function Ms(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||pg}Ms.prototype.isReactComponent={};Ms.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ms.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yg(){}yg.prototype=Ms.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||pg}var ah=oh.prototype=new yg;ah.constructor=oh;mg(ah,Ms.prototype);ah.isPureReactComponent=!0;var Ud=Array.isArray,vg=Object.prototype.hasOwnProperty,lh={current:null},_g={key:!0,ref:!0,__self:!0,__source:!0};function Eg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vg.call(e,r)&&!_g.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:po,type:t,key:i,ref:o,props:s,_owner:lh.current}}function gE(t,e){return{$$typeof:po,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===po}function yE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bd=/\/+/g;function au(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yE(""+t.key):e.toString(36)}function oa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case po:case iE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+au(o,0):r,Ud(s)?(n="",t!=null&&(n=t.replace(Bd,"$&/")+"/"),oa(s,e,n,"",function(h){return h})):s!=null&&(uh(s)&&(s=gE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Bd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ud(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+au(i,l);o+=oa(i,e,n,u,s)}else if(u=mE(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+au(i,l++),o+=oa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lo(t,e,n){if(t==null)return t;var r=[],s=0;return oa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function vE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},aa={transition:null},_E={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:aa,ReactCurrentOwner:lh};function wg(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Lo,forEach:function(t,e,n){Lo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lo(t,function(){e++}),e},toArray:function(t){return Lo(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Ms;se.Fragment=oE;se.Profiler=lE;se.PureComponent=oh;se.StrictMode=aE;se.Suspense=fE;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_E;se.act=wg;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=lh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vg.call(e,u)&&!_g.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:po,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:cE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uE,_context:t},t.Consumer=t};se.createElement=Eg;se.createFactory=function(t){var e=Eg.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:hE,render:t}};se.isValidElement=uh;se.lazy=function(t){return{$$typeof:pE,_payload:{_status:-1,_result:t},_init:vE}};se.memo=function(t,e){return{$$typeof:dE,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=aa.transition;aa.transition={};try{t()}finally{aa.transition=e}};se.unstable_act=wg;se.useCallback=function(t,e){return gt.current.useCallback(t,e)};se.useContext=function(t){return gt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};se.useEffect=function(t,e){return gt.current.useEffect(t,e)};se.useId=function(){return gt.current.useId()};se.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return gt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};se.useRef=function(t){return gt.current.useRef(t)};se.useState=function(t){return gt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return gt.current.useTransition()};se.version="18.3.1";dg.exports=se;var M=dg.exports;const EE=sE(M),wE=rE({__proto__:null,default:EE},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE=M,xE=Symbol.for("react.element"),IE=Symbol.for("react.fragment"),SE=Object.prototype.hasOwnProperty,AE=TE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CE={key:!0,ref:!0,__self:!0,__source:!0};function Tg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SE.call(e,r)&&!CE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:xE,type:t,key:i,ref:o,props:s,_owner:AE.current}}ul.Fragment=IE;ul.jsx=Tg;ul.jsxs=Tg;fg.exports=ul;var T=fg.exports,xg={exports:{}},Nt={},Ig={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,$){var K=O.length;O.push($);e:for(;0<K;){var re=K-1>>>1,le=O[re];if(0<s(le,$))O[re]=$,O[K]=le,K=re;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],K=O.pop();if(K!==$){O[0]=K;e:for(var re=0,le=O.length,ie=le>>>1;re<ie;){var ue=2*(re+1)-1,Ie=O[ue],Ae=ue+1,Oe=O[Ae];if(0>s(Ie,K))Ae<le&&0>s(Oe,Ie)?(O[re]=Oe,O[Ae]=K,re=Ae):(O[re]=Ie,O[ue]=K,re=ue);else if(Ae<le&&0>s(Oe,K))O[re]=Oe,O[Ae]=K,re=Ae;else break e}}return $}function s(O,$){var K=O.sortIndex-$.sortIndex;return K!==0?K:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,p=null,_=3,R=!1,N=!1,P=!1,V=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var $=n(h);$!==null;){if($.callback===null)r(h);else if($.startTime<=O)r(h),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(h)}}function D(O){if(P=!1,C(O),!N)if(n(u)!==null)N=!0,X(F);else{var $=n(h);$!==null&&te(D,$.startTime-O)}}function F(O,$){N=!1,P&&(P=!1,A(g),g=-1),R=!0;var K=_;try{for(C($),p=n(u);p!==null&&(!(p.expirationTime>$)||O&&!y());){var re=p.callback;if(typeof re=="function"){p.callback=null,_=p.priorityLevel;var le=re(p.expirationTime<=$);$=t.unstable_now(),typeof le=="function"?p.callback=le:p===n(u)&&r(u),C($)}else r(u);p=n(u)}if(p!==null)var ie=!0;else{var ue=n(h);ue!==null&&te(D,ue.startTime-$),ie=!1}return ie}finally{p=null,_=K,R=!1}}var U=!1,S=null,g=-1,E=5,w=-1;function y(){return!(t.unstable_now()-w<E)}function x(){if(S!==null){var O=t.unstable_now();w=O;var $=!0;try{$=S(!0,O)}finally{$?m():(U=!1,S=null)}}else U=!1}var m;if(typeof I=="function")m=function(){I(x)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=x,m=function(){G.postMessage(null)}}else m=function(){V(x,0)};function X(O){S=O,U||(U=!0,m())}function te(O,$){g=V(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){N||R||(N=!0,X(F))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(_){case 1:case 2:case 3:var $=3;break;default:$=_}var K=_;_=$;try{return O()}finally{_=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=_;_=O;try{return $()}finally{_=K}},t.unstable_scheduleCallback=function(O,$,K){var re=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?re+K:re):K=re,O){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=K+le,O={id:d++,callback:$,priorityLevel:O,startTime:K,expirationTime:le,sortIndex:-1},K>re?(O.sortIndex=K,e(h,O),n(u)===null&&O===n(h)&&(P?(A(g),g=-1):P=!0,te(D,K-re))):(O.sortIndex=le,e(u,O),N||R||(N=!0,X(F))),O},t.unstable_shouldYield=y,t.unstable_wrapCallback=function(O){var $=_;return function(){var K=_;_=$;try{return O.apply(this,arguments)}finally{_=K}}}})(Sg);Ig.exports=Sg;var RE=Ig.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE=M,Pt=RE;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ag=new Set,Li={};function Mr(t,e){ws(t,e),ws(t+"Capture",e)}function ws(t,e){for(Li[t]=e,t=0;t<e.length;t++)Ag.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=Object.prototype.hasOwnProperty,NE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zd={},$d={};function kE(t){return $u.call($d,t)?!0:$u.call(zd,t)?!1:NE.test(t)?$d[t]=!0:(zd[t]=!0,!1)}function VE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DE(t,e,n,r){if(e===null||typeof e>"u"||VE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,hh);nt[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,hh);nt[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,hh);nt[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fh(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DE(e,n,s,r)&&(n=null),r||s===null?kE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var In=PE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),Rg=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),Wu=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),Pg=Symbol.for("react.offscreen"),qd=Symbol.iterator;function li(t){return t===null||typeof t!="object"?null:(t=qd&&t[qd]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,lu;function gi(t){if(lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lu=e&&e[1]||""}return`
`+lu+t}var uu=!1;function cu(t,e){if(!t||uu)return"";uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{uu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gi(t):""}function bE(t){switch(t.tag){case 5:return gi(t.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 2:case 15:return t=cu(t.type,!1),t;case 11:return t=cu(t.type.render,!1),t;case 1:return t=cu(t.type,!0),t;default:return""}}function Qu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zr:return"Fragment";case Jr:return"Portal";case qu:return"Profiler";case dh:return"StrictMode";case Hu:return"Suspense";case Wu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rg:return(t.displayName||"Context")+".Consumer";case Cg:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:Qu(t.type)||"Memo";case Vn:e=t._payload,t=t._init;try{return Qu(t(e))}catch{}}return null}function ME(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qu(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ng(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OE(t){var e=Ng(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fo(t){t._valueTracker||(t._valueTracker=OE(t))}function kg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ng(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ia(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gu(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vg(t,e){e=e.checked,e!=null&&fh(t,"checked",e,!1)}function Ku(t,e){Vg(t,e);var n=tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xu(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xu(t,e,n){(e!=="number"||Ia(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yi=Array.isArray;function cs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Yu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(yi(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function Dg(t,e){var n=tr(e.value),r=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uo,Mg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ji(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LE=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(t){LE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xi[e]=xi[t]})});function Og(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xi.hasOwnProperty(t)&&xi[t]?(""+e).trim():e+"px"}function Lg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Og(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var jE=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zu(t,e){if(e){if(jE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nc=null,hs=null,fs=null;function Kd(t){if(t=yo(t)){if(typeof nc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=pl(e),nc(t.stateNode,t.type,e))}}function jg(t){hs?fs?fs.push(t):fs=[t]:hs=t}function Fg(){if(hs){var t=hs,e=fs;if(fs=hs=null,Kd(t),e)for(t=0;t<e.length;t++)Kd(e[t])}}function Ug(t,e){return t(e)}function Bg(){}var hu=!1;function zg(t,e,n){if(hu)return t(e,n);hu=!0;try{return Ug(t,e,n)}finally{hu=!1,(hs!==null||fs!==null)&&(Bg(),Fg())}}function Fi(t,e){var n=t.stateNode;if(n===null)return null;var r=pl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var rc=!1;if(yn)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){rc=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{rc=!1}function FE(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var Ii=!1,Sa=null,Aa=!1,sc=null,UE={onError:function(t){Ii=!0,Sa=t}};function BE(t,e,n,r,s,i,o,l,u){Ii=!1,Sa=null,FE.apply(UE,arguments)}function zE(t,e,n,r,s,i,o,l,u){if(BE.apply(this,arguments),Ii){if(Ii){var h=Sa;Ii=!1,Sa=null}else throw Error(B(198));Aa||(Aa=!0,sc=h)}}function Or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $g(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xd(t){if(Or(t)!==t)throw Error(B(188))}function $E(t){var e=t.alternate;if(!e){if(e=Or(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xd(s),t;if(i===r)return Xd(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function qg(t){return t=$E(t),t!==null?Hg(t):null}function Hg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hg(t);if(e!==null)return e;t=t.sibling}return null}var Wg=Pt.unstable_scheduleCallback,Yd=Pt.unstable_cancelCallback,qE=Pt.unstable_shouldYield,HE=Pt.unstable_requestPaint,Me=Pt.unstable_now,WE=Pt.unstable_getCurrentPriorityLevel,yh=Pt.unstable_ImmediatePriority,Qg=Pt.unstable_UserBlockingPriority,Ca=Pt.unstable_NormalPriority,QE=Pt.unstable_LowPriority,Gg=Pt.unstable_IdlePriority,cl=null,nn=null;function GE(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(cl,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:YE,KE=Math.log,XE=Math.LN2;function YE(t){return t>>>=0,t===0?32:31-(KE(t)/XE|0)|0}var Bo=64,zo=4194304;function vi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ra(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=vi(l):(i&=o,i!==0&&(r=vi(i)))}else o=n&~s,o!==0?r=vi(o):i!==0&&(r=vi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),s=1<<n,r|=t[n],e&=~s;return r}function JE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Wt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=JE(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kg(){var t=Bo;return Bo<<=1,!(Bo&4194240)&&(Bo=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function ew(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function Xg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yg,_h,Jg,Zg,ey,oc=!1,$o=[],Bn=null,zn=null,$n=null,Ui=new Map,Bi=new Map,bn=[],tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jd(t,e){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Ui.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(e.pointerId)}}function ci(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yo(e),e!==null&&_h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function nw(t,e,n,r,s){switch(e){case"focusin":return Bn=ci(Bn,t,e,n,r,s),!0;case"dragenter":return zn=ci(zn,t,e,n,r,s),!0;case"mouseover":return $n=ci($n,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ui.set(i,ci(Ui.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Bi.set(i,ci(Bi.get(i)||null,t,e,n,r,s)),!0}return!1}function ty(t){var e=Tr(t.target);if(e!==null){var n=Or(e);if(n!==null){if(e=n.tag,e===13){if(e=$g(n),e!==null){t.blockedOn=e,ey(t.priority,function(){Jg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function la(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tc=r,n.target.dispatchEvent(r),tc=null}else return e=yo(n),e!==null&&_h(e),t.blockedOn=n,!1;e.shift()}return!0}function Zd(t,e,n){la(t)&&n.delete(e)}function rw(){oc=!1,Bn!==null&&la(Bn)&&(Bn=null),zn!==null&&la(zn)&&(zn=null),$n!==null&&la($n)&&($n=null),Ui.forEach(Zd),Bi.forEach(Zd)}function hi(t,e){t.blockedOn===e&&(t.blockedOn=null,oc||(oc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,rw)))}function zi(t){function e(s){return hi(s,t)}if(0<$o.length){hi($o[0],t);for(var n=1;n<$o.length;n++){var r=$o[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bn!==null&&hi(Bn,t),zn!==null&&hi(zn,t),$n!==null&&hi($n,t),Ui.forEach(e),Bi.forEach(e),n=0;n<bn.length;n++)r=bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bn.length&&(n=bn[0],n.blockedOn===null);)ty(n),n.blockedOn===null&&bn.shift()}var ds=In.ReactCurrentBatchConfig,Pa=!0;function sw(t,e,n,r){var s=me,i=ds.transition;ds.transition=null;try{me=1,Eh(t,e,n,r)}finally{me=s,ds.transition=i}}function iw(t,e,n,r){var s=me,i=ds.transition;ds.transition=null;try{me=4,Eh(t,e,n,r)}finally{me=s,ds.transition=i}}function Eh(t,e,n,r){if(Pa){var s=ac(t,e,n,r);if(s===null)Tu(t,e,r,Na,n),Jd(t,r);else if(nw(s,t,e,n,r))r.stopPropagation();else if(Jd(t,r),e&4&&-1<tw.indexOf(t)){for(;s!==null;){var i=yo(s);if(i!==null&&Yg(i),i=ac(t,e,n,r),i===null&&Tu(t,e,r,Na,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Tu(t,e,r,null,n)}}var Na=null;function ac(t,e,n,r){if(Na=null,t=gh(r),t=Tr(t),t!==null)if(e=Or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$g(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Na=t,null}function ny(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WE()){case yh:return 1;case Qg:return 4;case Ca:case QE:return 16;case Gg:return 536870912;default:return 16}default:return 16}}var Ln=null,wh=null,ua=null;function ry(){if(ua)return ua;var t,e=wh,n=e.length,r,s="value"in Ln?Ln.value:Ln.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ua=s.slice(t,1<r?1-r:void 0)}function ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function ep(){return!1}function kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qo:ep,this.isPropagationStopped=ep,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),e}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Th=kt(Os),go=Pe({},Os,{view:0,detail:0}),ow=kt(go),du,pu,fi,hl=Pe({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fi&&(fi&&t.type==="mousemove"?(du=t.screenX-fi.screenX,pu=t.screenY-fi.screenY):pu=du=0,fi=t),du)},movementY:function(t){return"movementY"in t?t.movementY:pu}}),tp=kt(hl),aw=Pe({},hl,{dataTransfer:0}),lw=kt(aw),uw=Pe({},go,{relatedTarget:0}),mu=kt(uw),cw=Pe({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),hw=kt(cw),fw=Pe({},Os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dw=kt(fw),pw=Pe({},Os,{data:0}),np=kt(pw),mw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yw[t])?!!e[t]:!1}function xh(){return vw}var _w=Pe({},go,{key:function(t){if(t.key){var e=mw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xh,charCode:function(t){return t.type==="keypress"?ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ew=kt(_w),ww=Pe({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=kt(ww),Tw=Pe({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xh}),xw=kt(Tw),Iw=Pe({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sw=kt(Iw),Aw=Pe({},hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cw=kt(Aw),Rw=[9,13,27,32],Ih=yn&&"CompositionEvent"in window,Si=null;yn&&"documentMode"in document&&(Si=document.documentMode);var Pw=yn&&"TextEvent"in window&&!Si,sy=yn&&(!Ih||Si&&8<Si&&11>=Si),sp=" ",ip=!1;function iy(t,e){switch(t){case"keyup":return Rw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function Nw(t,e){switch(t){case"compositionend":return oy(e);case"keypress":return e.which!==32?null:(ip=!0,sp);case"textInput":return t=e.data,t===sp&&ip?null:t;default:return null}}function kw(t,e){if(es)return t==="compositionend"||!Ih&&iy(t,e)?(t=ry(),ua=wh=Ln=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sy&&e.locale!=="ko"?null:e.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vw[t.type]:e==="textarea"}function ay(t,e,n,r){jg(r),e=ka(e,"onChange"),0<e.length&&(n=new Th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ai=null,$i=null;function Dw(t){vy(t,0)}function fl(t){var e=rs(t);if(kg(e))return t}function bw(t,e){if(t==="change")return e}var ly=!1;if(yn){var gu;if(yn){var yu="oninput"in document;if(!yu){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),yu=typeof ap.oninput=="function"}gu=yu}else gu=!1;ly=gu&&(!document.documentMode||9<document.documentMode)}function lp(){Ai&&(Ai.detachEvent("onpropertychange",uy),$i=Ai=null)}function uy(t){if(t.propertyName==="value"&&fl($i)){var e=[];ay(e,$i,t,gh(t)),zg(Dw,e)}}function Mw(t,e,n){t==="focusin"?(lp(),Ai=e,$i=n,Ai.attachEvent("onpropertychange",uy)):t==="focusout"&&lp()}function Ow(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fl($i)}function Lw(t,e){if(t==="click")return fl(e)}function jw(t,e){if(t==="input"||t==="change")return fl(e)}function Fw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:Fw;function qi(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$u.call(e,s)||!Gt(t[s],e[s]))return!1}return!0}function up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cp(t,e){var n=up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=up(n)}}function cy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hy(){for(var t=window,e=Ia();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ia(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uw(t){var e=hy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cy(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cp(n,i);var o=cp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bw=yn&&"documentMode"in document&&11>=document.documentMode,ts=null,lc=null,Ci=null,uc=!1;function hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uc||ts==null||ts!==Ia(r)||(r=ts,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ci&&qi(Ci,r)||(Ci=r,r=ka(lc,"onSelect"),0<r.length&&(e=new Th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ts)))}function Ho(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionend:Ho("Transition","TransitionEnd")},vu={},fy={};yn&&(fy=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function dl(t){if(vu[t])return vu[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fy)return vu[t]=e[n];return t}var dy=dl("animationend"),py=dl("animationiteration"),my=dl("animationstart"),gy=dl("transitionend"),yy=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){yy.set(t,e),Mr(e,[t])}for(var _u=0;_u<fp.length;_u++){var Eu=fp[_u],zw=Eu.toLowerCase(),$w=Eu[0].toUpperCase()+Eu.slice(1);ur(zw,"on"+$w)}ur(dy,"onAnimationEnd");ur(py,"onAnimationIteration");ur(my,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(gy,"onTransitionEnd");ws("onMouseEnter",["mouseout","mouseover"]);ws("onMouseLeave",["mouseout","mouseover"]);ws("onPointerEnter",["pointerout","pointerover"]);ws("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(_i));function dp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zE(r,e,void 0,t),t.currentTarget=null}function vy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}}}if(Aa)throw t=sc,Aa=!1,sc=null,t}function we(t,e){var n=e[pc];n===void 0&&(n=e[pc]=new Set);var r=t+"__bubble";n.has(r)||(_y(e,t,2,!1),n.add(r))}function wu(t,e,n){var r=0;e&&(r|=4),_y(n,t,r,e)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[Wo]){t[Wo]=!0,Ag.forEach(function(n){n!=="selectionchange"&&(qw.has(n)||wu(n,!1,t),wu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wo]||(e[Wo]=!0,wu("selectionchange",!1,e))}}function _y(t,e,n,r){switch(ny(e)){case 1:var s=sw;break;case 4:s=iw;break;default:s=Eh}n=s.bind(null,e,n,t),s=void 0,!rc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Tu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Tr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}zg(function(){var h=i,d=gh(n),p=[];e:{var _=yy.get(t);if(_!==void 0){var R=Th,N=t;switch(t){case"keypress":if(ca(n)===0)break e;case"keydown":case"keyup":R=Ew;break;case"focusin":N="focus",R=mu;break;case"focusout":N="blur",R=mu;break;case"beforeblur":case"afterblur":R=mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=lw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=xw;break;case dy:case py:case my:R=hw;break;case gy:R=Sw;break;case"scroll":R=ow;break;case"wheel":R=Cw;break;case"copy":case"cut":case"paste":R=dw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=rp}var P=(e&4)!==0,V=!P&&t==="scroll",A=P?_!==null?_+"Capture":null:_;P=[];for(var I=h,C;I!==null;){C=I;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,A!==null&&(D=Fi(I,A),D!=null&&P.push(Wi(I,D,C)))),V)break;I=I.return}0<P.length&&(_=new R(_,N,null,n,d),p.push({event:_,listeners:P}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==tc&&(N=n.relatedTarget||n.fromElement)&&(Tr(N)||N[vn]))break e;if((R||_)&&(_=d.window===d?d:(_=d.ownerDocument)?_.defaultView||_.parentWindow:window,R?(N=n.relatedTarget||n.toElement,R=h,N=N?Tr(N):null,N!==null&&(V=Or(N),N!==V||N.tag!==5&&N.tag!==6)&&(N=null)):(R=null,N=h),R!==N)){if(P=tp,D="onMouseLeave",A="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(P=rp,D="onPointerLeave",A="onPointerEnter",I="pointer"),V=R==null?_:rs(R),C=N==null?_:rs(N),_=new P(D,I+"leave",R,n,d),_.target=V,_.relatedTarget=C,D=null,Tr(d)===h&&(P=new P(A,I+"enter",N,n,d),P.target=C,P.relatedTarget=V,D=P),V=D,R&&N)t:{for(P=R,A=N,I=0,C=P;C;C=Qr(C))I++;for(C=0,D=A;D;D=Qr(D))C++;for(;0<I-C;)P=Qr(P),I--;for(;0<C-I;)A=Qr(A),C--;for(;I--;){if(P===A||A!==null&&P===A.alternate)break t;P=Qr(P),A=Qr(A)}P=null}else P=null;R!==null&&pp(p,_,R,P,!1),N!==null&&V!==null&&pp(p,V,N,P,!0)}}e:{if(_=h?rs(h):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var F=bw;else if(op(_))if(ly)F=jw;else{F=Ow;var U=Mw}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(F=Lw);if(F&&(F=F(t,h))){ay(p,F,n,d);break e}U&&U(t,_,h),t==="focusout"&&(U=_._wrapperState)&&U.controlled&&_.type==="number"&&Xu(_,"number",_.value)}switch(U=h?rs(h):window,t){case"focusin":(op(U)||U.contentEditable==="true")&&(ts=U,lc=h,Ci=null);break;case"focusout":Ci=lc=ts=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,hp(p,n,d);break;case"selectionchange":if(Bw)break;case"keydown":case"keyup":hp(p,n,d)}var S;if(Ih)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else es?iy(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(sy&&n.locale!=="ko"&&(es||g!=="onCompositionStart"?g==="onCompositionEnd"&&es&&(S=ry()):(Ln=d,wh="value"in Ln?Ln.value:Ln.textContent,es=!0)),U=ka(h,g),0<U.length&&(g=new np(g,t,null,n,d),p.push({event:g,listeners:U}),S?g.data=S:(S=oy(n),S!==null&&(g.data=S)))),(S=Pw?Nw(t,n):kw(t,n))&&(h=ka(h,"onBeforeInput"),0<h.length&&(d=new np("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=S))}vy(p,e)})}function Wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ka(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fi(t,n),i!=null&&r.unshift(Wi(t,i,s)),i=Fi(t,e),i!=null&&r.push(Wi(t,i,s))),t=t.return}return r}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Fi(n,i),u!=null&&o.unshift(Wi(n,u,l))):s||(u=Fi(n,i),u!=null&&o.push(Wi(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Hw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function mp(t){return(typeof t=="string"?t:""+t).replace(Hw,`
`).replace(Ww,"")}function Qo(t,e,n){if(e=mp(e),mp(t)!==e&&n)throw Error(B(425))}function Va(){}var cc=null,hc=null;function fc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(t){return gp.resolve(null).then(t).catch(Kw)}:dc;function Kw(t){setTimeout(function(){throw t})}function xu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),zi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);zi(e)}function qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),tn="__reactFiber$"+Ls,Qi="__reactProps$"+Ls,vn="__reactContainer$"+Ls,pc="__reactEvents$"+Ls,Xw="__reactListeners$"+Ls,Yw="__reactHandles$"+Ls;function Tr(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yp(t);t!==null;){if(n=t[tn])return n;t=yp(t)}return e}t=n,n=t.parentNode}return null}function yo(t){return t=t[tn]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function pl(t){return t[Qi]||null}var mc=[],ss=-1;function cr(t){return{current:t}}function xe(t){0>ss||(t.current=mc[ss],mc[ss]=null,ss--)}function _e(t,e){ss++,mc[ss]=t.current,t.current=e}var nr={},ht=cr(nr),wt=cr(!1),Rr=nr;function Ts(t,e){var n=t.type.contextTypes;if(!n)return nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tt(t){return t=t.childContextTypes,t!=null}function Da(){xe(wt),xe(ht)}function vp(t,e,n){if(ht.current!==nr)throw Error(B(168));_e(ht,e),_e(wt,n)}function Ey(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,ME(t)||"Unknown",s));return Pe({},n,r)}function ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nr,Rr=ht.current,_e(ht,t),_e(wt,wt.current),!0}function _p(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Ey(t,e,Rr),r.__reactInternalMemoizedMergedChildContext=t,xe(wt),xe(ht),_e(ht,t)):xe(wt),_e(wt,n)}var dn=null,ml=!1,Iu=!1;function wy(t){dn===null?dn=[t]:dn.push(t)}function Jw(t){ml=!0,wy(t)}function hr(){if(!Iu&&dn!==null){Iu=!0;var t=0,e=me;try{var n=dn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dn=null,ml=!1}catch(s){throw dn!==null&&(dn=dn.slice(t+1)),Wg(yh,hr),s}finally{me=e,Iu=!1}}return null}var is=[],os=0,Ma=null,Oa=0,Dt=[],bt=0,Pr=null,pn=1,mn="";function vr(t,e){is[os++]=Oa,is[os++]=Ma,Ma=t,Oa=e}function Ty(t,e,n){Dt[bt++]=pn,Dt[bt++]=mn,Dt[bt++]=Pr,Pr=t;var r=pn;t=mn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var i=32-Wt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pn=1<<32-Wt(e)+s|n<<s|r,mn=i+t}else pn=1<<i|n<<s|r,mn=t}function Ah(t){t.return!==null&&(vr(t,1),Ty(t,1,0))}function Ch(t){for(;t===Ma;)Ma=is[--os],is[os]=null,Oa=is[--os],is[os]=null;for(;t===Pr;)Pr=Dt[--bt],Dt[bt]=null,mn=Dt[--bt],Dt[bt]=null,pn=Dt[--bt],Dt[bt]=null}var Rt=null,Ct=null,Se=!1,qt=null;function xy(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ep(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Ct=qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,Ct=null,!0):!1;default:return!1}}function gc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yc(t){if(Se){var e=Ct;if(e){var n=e;if(!Ep(t,e)){if(gc(t))throw Error(B(418));e=qn(n.nextSibling);var r=Rt;e&&Ep(t,e)?xy(r,n):(t.flags=t.flags&-4097|2,Se=!1,Rt=t)}}else{if(gc(t))throw Error(B(418));t.flags=t.flags&-4097|2,Se=!1,Rt=t}}}function wp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function Go(t){if(t!==Rt)return!1;if(!Se)return wp(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fc(t.type,t.memoizedProps)),e&&(e=Ct)){if(gc(t))throw Iy(),Error(B(418));for(;e;)xy(t,e),e=qn(e.nextSibling)}if(wp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Rt?qn(t.stateNode.nextSibling):null;return!0}function Iy(){for(var t=Ct;t;)t=qn(t.nextSibling)}function xs(){Ct=Rt=null,Se=!1}function Rh(t){qt===null?qt=[t]:qt.push(t)}var Zw=In.ReactCurrentBatchConfig;function di(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ko(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tp(t){var e=t._init;return e(t._payload)}function Sy(t){function e(A,I){if(t){var C=A.deletions;C===null?(A.deletions=[I],A.flags|=16):C.push(I)}}function n(A,I){if(!t)return null;for(;I!==null;)e(A,I),I=I.sibling;return null}function r(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function s(A,I){return A=Gn(A,I),A.index=0,A.sibling=null,A}function i(A,I,C){return A.index=C,t?(C=A.alternate,C!==null?(C=C.index,C<I?(A.flags|=2,I):C):(A.flags|=2,I)):(A.flags|=1048576,I)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,I,C,D){return I===null||I.tag!==6?(I=ku(C,A.mode,D),I.return=A,I):(I=s(I,C),I.return=A,I)}function u(A,I,C,D){var F=C.type;return F===Zr?d(A,I,C.props.children,D,C.key):I!==null&&(I.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Vn&&Tp(F)===I.type)?(D=s(I,C.props),D.ref=di(A,I,C),D.return=A,D):(D=ya(C.type,C.key,C.props,null,A.mode,D),D.ref=di(A,I,C),D.return=A,D)}function h(A,I,C,D){return I===null||I.tag!==4||I.stateNode.containerInfo!==C.containerInfo||I.stateNode.implementation!==C.implementation?(I=Vu(C,A.mode,D),I.return=A,I):(I=s(I,C.children||[]),I.return=A,I)}function d(A,I,C,D,F){return I===null||I.tag!==7?(I=Cr(C,A.mode,D,F),I.return=A,I):(I=s(I,C),I.return=A,I)}function p(A,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return I=ku(""+I,A.mode,C),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case jo:return C=ya(I.type,I.key,I.props,null,A.mode,C),C.ref=di(A,null,I),C.return=A,C;case Jr:return I=Vu(I,A.mode,C),I.return=A,I;case Vn:var D=I._init;return p(A,D(I._payload),C)}if(yi(I)||li(I))return I=Cr(I,A.mode,C,null),I.return=A,I;Ko(A,I)}return null}function _(A,I,C,D){var F=I!==null?I.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:l(A,I,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case jo:return C.key===F?u(A,I,C,D):null;case Jr:return C.key===F?h(A,I,C,D):null;case Vn:return F=C._init,_(A,I,F(C._payload),D)}if(yi(C)||li(C))return F!==null?null:d(A,I,C,D,null);Ko(A,C)}return null}function R(A,I,C,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(C)||null,l(I,A,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case jo:return A=A.get(D.key===null?C:D.key)||null,u(I,A,D,F);case Jr:return A=A.get(D.key===null?C:D.key)||null,h(I,A,D,F);case Vn:var U=D._init;return R(A,I,C,U(D._payload),F)}if(yi(D)||li(D))return A=A.get(C)||null,d(I,A,D,F,null);Ko(I,D)}return null}function N(A,I,C,D){for(var F=null,U=null,S=I,g=I=0,E=null;S!==null&&g<C.length;g++){S.index>g?(E=S,S=null):E=S.sibling;var w=_(A,S,C[g],D);if(w===null){S===null&&(S=E);break}t&&S&&w.alternate===null&&e(A,S),I=i(w,I,g),U===null?F=w:U.sibling=w,U=w,S=E}if(g===C.length)return n(A,S),Se&&vr(A,g),F;if(S===null){for(;g<C.length;g++)S=p(A,C[g],D),S!==null&&(I=i(S,I,g),U===null?F=S:U.sibling=S,U=S);return Se&&vr(A,g),F}for(S=r(A,S);g<C.length;g++)E=R(S,A,g,C[g],D),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?g:E.key),I=i(E,I,g),U===null?F=E:U.sibling=E,U=E);return t&&S.forEach(function(y){return e(A,y)}),Se&&vr(A,g),F}function P(A,I,C,D){var F=li(C);if(typeof F!="function")throw Error(B(150));if(C=F.call(C),C==null)throw Error(B(151));for(var U=F=null,S=I,g=I=0,E=null,w=C.next();S!==null&&!w.done;g++,w=C.next()){S.index>g?(E=S,S=null):E=S.sibling;var y=_(A,S,w.value,D);if(y===null){S===null&&(S=E);break}t&&S&&y.alternate===null&&e(A,S),I=i(y,I,g),U===null?F=y:U.sibling=y,U=y,S=E}if(w.done)return n(A,S),Se&&vr(A,g),F;if(S===null){for(;!w.done;g++,w=C.next())w=p(A,w.value,D),w!==null&&(I=i(w,I,g),U===null?F=w:U.sibling=w,U=w);return Se&&vr(A,g),F}for(S=r(A,S);!w.done;g++,w=C.next())w=R(S,A,g,w.value,D),w!==null&&(t&&w.alternate!==null&&S.delete(w.key===null?g:w.key),I=i(w,I,g),U===null?F=w:U.sibling=w,U=w);return t&&S.forEach(function(x){return e(A,x)}),Se&&vr(A,g),F}function V(A,I,C,D){if(typeof C=="object"&&C!==null&&C.type===Zr&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case jo:e:{for(var F=C.key,U=I;U!==null;){if(U.key===F){if(F=C.type,F===Zr){if(U.tag===7){n(A,U.sibling),I=s(U,C.props.children),I.return=A,A=I;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Vn&&Tp(F)===U.type){n(A,U.sibling),I=s(U,C.props),I.ref=di(A,U,C),I.return=A,A=I;break e}n(A,U);break}else e(A,U);U=U.sibling}C.type===Zr?(I=Cr(C.props.children,A.mode,D,C.key),I.return=A,A=I):(D=ya(C.type,C.key,C.props,null,A.mode,D),D.ref=di(A,I,C),D.return=A,A=D)}return o(A);case Jr:e:{for(U=C.key;I!==null;){if(I.key===U)if(I.tag===4&&I.stateNode.containerInfo===C.containerInfo&&I.stateNode.implementation===C.implementation){n(A,I.sibling),I=s(I,C.children||[]),I.return=A,A=I;break e}else{n(A,I);break}else e(A,I);I=I.sibling}I=Vu(C,A.mode,D),I.return=A,A=I}return o(A);case Vn:return U=C._init,V(A,I,U(C._payload),D)}if(yi(C))return N(A,I,C,D);if(li(C))return P(A,I,C,D);Ko(A,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,I!==null&&I.tag===6?(n(A,I.sibling),I=s(I,C),I.return=A,A=I):(n(A,I),I=ku(C,A.mode,D),I.return=A,A=I),o(A)):n(A,I)}return V}var Is=Sy(!0),Ay=Sy(!1),La=cr(null),ja=null,as=null,Ph=null;function Nh(){Ph=as=ja=null}function kh(t){var e=La.current;xe(La),t._currentValue=e}function vc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ps(t,e){ja=t,Ph=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Ft(t){var e=t._currentValue;if(Ph!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(ja===null)throw Error(B(308));as=t,ja.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var xr=null;function Vh(t){xr===null?xr=[t]:xr.push(t)}function Cy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vh(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,Vh(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function ha(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}function xp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fa(t,e,n,r){var s=t.updateQueue;Dn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,d=h=u=null,l=i;do{var _=l.lane,R=l.eventTime;if((r&_)===_){d!==null&&(d=d.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,P=l;switch(_=e,R=n,P.tag){case 1:if(N=P.payload,typeof N=="function"){p=N.call(R,p,_);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=P.payload,_=typeof N=="function"?N.call(R,p,_):N,_==null)break e;p=Pe({},p,_);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=R,u=p):d=d.next=R,o|=_;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(d===null&&(u=p),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);kr|=o,t.lanes=o,t.memoizedState=p}}function Ip(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var vo={},rn=cr(vo),Gi=cr(vo),Ki=cr(vo);function Ir(t){if(t===vo)throw Error(B(174));return t}function bh(t,e){switch(_e(Ki,e),_e(Gi,t),_e(rn,vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ju(e,t)}xe(rn),_e(rn,e)}function Ss(){xe(rn),xe(Gi),xe(Ki)}function Py(t){Ir(Ki.current);var e=Ir(rn.current),n=Ju(e,t.type);e!==n&&(_e(Gi,t),_e(rn,n))}function Mh(t){Gi.current===t&&(xe(rn),xe(Gi))}var Ce=cr(0);function Ua(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function Oh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var fa=In.ReactCurrentDispatcher,Au=In.ReactCurrentBatchConfig,Nr=0,Re=null,qe=null,Ke=null,Ba=!1,Ri=!1,Xi=0,e1=0;function it(){throw Error(B(321))}function Lh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,s,i){if(Nr=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fa.current=t===null||t.memoizedState===null?s1:i1,t=n(r,s),Ri){i=0;do{if(Ri=!1,Xi=0,25<=i)throw Error(B(301));i+=1,Ke=qe=null,e.updateQueue=null,fa.current=o1,t=n(r,s)}while(Ri)}if(fa.current=za,e=qe!==null&&qe.next!==null,Nr=0,Ke=qe=Re=null,Ba=!1,e)throw Error(B(300));return t}function Fh(){var t=Xi!==0;return Xi=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Re.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Ut(){if(qe===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ke===null?Re.memoizedState:Ke.next;if(e!==null)Ke=e,qe=t;else{if(t===null)throw Error(B(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ke===null?Re.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function Yi(t,e){return typeof e=="function"?e(t):e}function Cu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var d=h.lane;if((Nr&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Re.lanes|=d,kr|=d}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Gt(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,kr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ru(t){var e=Ut(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gt(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ny(){}function ky(t,e){var n=Re,r=Ut(),s=e(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Uh(by.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Ji(9,Dy.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error(B(349));Nr&30||Vy(n,e,s)}return s}function Vy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dy(t,e,n,r){e.value=n,e.getSnapshot=r,My(e)&&Oy(t)}function by(t,e,n){return n(function(){My(e)&&Oy(t)})}function My(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function Oy(t){var e=_n(t,1);e!==null&&Qt(e,t,1,-1)}function Sp(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},e.queue=t,t=t.dispatch=r1.bind(null,Re,t),[e.memoizedState,t]}function Ji(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ly(){return Ut().memoizedState}function da(t,e,n,r){var s=Zt();Re.flags|=t,s.memoizedState=Ji(1|e,n,void 0,r===void 0?null:r)}function gl(t,e,n,r){var s=Ut();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Lh(r,o.deps)){s.memoizedState=Ji(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Ji(1|e,n,i,r)}function Ap(t,e){return da(8390656,8,t,e)}function Uh(t,e){return gl(2048,8,t,e)}function jy(t,e){return gl(4,2,t,e)}function Fy(t,e){return gl(4,4,t,e)}function Uy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function By(t,e,n){return n=n!=null?n.concat([t]):null,gl(4,4,Uy.bind(null,e,t),n)}function Bh(){}function zy(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $y(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qy(t,e,n){return Nr&21?(Gt(n,e)||(n=Kg(),Re.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function t1(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=Au.transition;Au.transition={};try{t(!1),e()}finally{me=n,Au.transition=r}}function Hy(){return Ut().memoizedState}function n1(t,e,n){var r=Qn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wy(t))Qy(e,n);else if(n=Cy(t,e,n,r),n!==null){var s=mt();Qt(n,t,r,s),Gy(n,e,r)}}function r1(t,e,n){var r=Qn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wy(t))Qy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Gt(l,o)){var u=e.interleaved;u===null?(s.next=s,Vh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Cy(t,e,s,r),n!==null&&(s=mt(),Qt(n,t,r,s),Gy(n,e,r))}}function Wy(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function Qy(t,e){Ri=Ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}var za={readContext:Ft,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},s1={readContext:Ft,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:Ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,da(4194308,4,Uy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return da(4194308,4,t,e)},useInsertionEffect:function(t,e){return da(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=n1.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:Sp,useDebugValue:Bh,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=Sp(!1),e=t[0];return t=t1.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=Zt();if(Se){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Ye===null)throw Error(B(349));Nr&30||Vy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ap(by.bind(null,r,i,t),[t]),r.flags|=2048,Ji(9,Dy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Zt(),e=Ye.identifierPrefix;if(Se){var n=mn,r=pn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=e1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},i1={readContext:Ft,useCallback:zy,useContext:Ft,useEffect:Uh,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Fy,useMemo:$y,useReducer:Cu,useRef:Ly,useState:function(){return Cu(Yi)},useDebugValue:Bh,useDeferredValue:function(t){var e=Ut();return qy(e,qe.memoizedState,t)},useTransition:function(){var t=Cu(Yi)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:ky,useId:Hy,unstable_isNewReconciler:!1},o1={readContext:Ft,useCallback:zy,useContext:Ft,useEffect:Uh,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Fy,useMemo:$y,useReducer:Ru,useRef:Ly,useState:function(){return Ru(Yi)},useDebugValue:Bh,useDeferredValue:function(t){var e=Ut();return qe===null?e.memoizedState=t:qy(e,qe.memoizedState,t)},useTransition:function(){var t=Ru(Yi)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:ky,useId:Hy,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _c(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yl={isMounted:function(t){return(t=t._reactInternals)?Or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Qn(t),i=gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hn(t,i,s),e!==null&&(Qt(e,t,s,r),ha(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Qn(t),i=gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hn(t,i,s),e!==null&&(Qt(e,t,s,r),ha(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=Qn(t),s=gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hn(t,s,r),e!==null&&(Qt(e,t,r,n),ha(e,t,r))}};function Cp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!qi(n,r)||!qi(s,i):!0}function Ky(t,e,n){var r=!1,s=nr,i=e.contextType;return typeof i=="object"&&i!==null?i=Ft(i):(s=Tt(e)?Rr:ht.current,r=e.contextTypes,i=(r=r!=null)?Ts(t,s):nr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yl.enqueueReplaceState(e,e.state,null)}function Ec(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Dh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ft(i):(i=Tt(e)?Rr:ht.current,s.context=Ts(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_c(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yl.enqueueReplaceState(s,s.state,null),Fa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function As(t,e){try{var n="",r=e;do n+=bE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var a1=typeof WeakMap=="function"?WeakMap:Map;function Xy(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qa||(qa=!0,kc=r),wc(t,e)},n}function Yy(t,e,n){n=gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wc(t,e),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Pp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new a1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=w1.bind(null,t,e,n),e.then(t,t))}function Np(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var l1=In.ReactCurrentOwner,Et=!1;function pt(t,e,n,r){e.child=t===null?Ay(e,null,n,r):Is(e,t.child,n,r)}function Vp(t,e,n,r,s){n=n.render;var i=e.ref;return ps(e,s),r=jh(t,e,n,r,i,s),n=Fh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(Se&&n&&Ah(e),e.flags|=1,pt(t,e,r,s),e.child)}function Dp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Kh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jy(t,e,i,r,s)):(t=ya(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:qi,n(o,r)&&t.ref===e.ref)return En(t,e,s)}return e.flags|=1,t=Gn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qi(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,En(t,e,s)}return Tc(t,e,n,r,s)}function Zy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(us,At),At|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(us,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(us,At),At|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(us,At),At|=r;return pt(t,e,s,n),e.child}function ev(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tc(t,e,n,r,s){var i=Tt(n)?Rr:ht.current;return i=Ts(e,i),ps(e,s),n=jh(t,e,n,r,i,s),r=Fh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,En(t,e,s)):(Se&&r&&Ah(e),e.flags|=1,pt(t,e,n,s),e.child)}function bp(t,e,n,r,s){if(Tt(n)){var i=!0;ba(e)}else i=!1;if(ps(e,s),e.stateNode===null)pa(t,e),Ky(e,n,r),Ec(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ft(h):(h=Tt(n)?Rr:ht.current,h=Ts(e,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Rp(e,o,r,h),Dn=!1;var _=e.memoizedState;o.state=_,Fa(e,r,o,s),u=e.memoizedState,l!==r||_!==u||wt.current||Dn?(typeof d=="function"&&(_c(e,n,d,r),u=e.memoizedState),(l=Dn||Cp(e,n,l,r,_,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ry(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:zt(e.type,l),o.props=h,p=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=Tt(n)?Rr:ht.current,u=Ts(e,u));var R=n.getDerivedStateFromProps;(d=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||_!==u)&&Rp(e,o,r,u),Dn=!1,_=e.memoizedState,o.state=_,Fa(e,r,o,s);var N=e.memoizedState;l!==p||_!==N||wt.current||Dn?(typeof R=="function"&&(_c(e,n,R,r),N=e.memoizedState),(h=Dn||Cp(e,n,h,r,_,N,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return xc(t,e,n,r,i,s)}function xc(t,e,n,r,s,i){ev(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&_p(e,n,!1),En(t,e,i);r=e.stateNode,l1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Is(e,t.child,null,i),e.child=Is(e,null,l,i)):pt(t,e,l,i),e.memoizedState=r.state,s&&_p(e,n,!0),e.child}function tv(t){var e=t.stateNode;e.pendingContext?vp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vp(t,e.context,!1),bh(t,e.containerInfo)}function Mp(t,e,n,r,s){return xs(),Rh(s),e.flags|=256,pt(t,e,n,r),e.child}var Ic={dehydrated:null,treeContext:null,retryLane:0};function Sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function nv(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ce,s&1),t===null)return yc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=El(o,r,0,null),t=Cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sc(n),e.memoizedState=Ic,t):zh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return u1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Gn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Gn(l,i):(i=Cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Sc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ic,r}return i=t.child,t=i.sibling,r=Gn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=El({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xo(t,e,n,r){return r!==null&&Rh(r),Is(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function u1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Pu(Error(B(422))),Xo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=El({mode:"visible",children:r.children},s,0,null),i=Cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Is(e,t.child,null,o),e.child.memoizedState=Sc(o),e.memoizedState=Ic,i);if(!(e.mode&1))return Xo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=Pu(i,r,void 0),Xo(t,e,o,r)}if(l=(o&t.childLanes)!==0,Et||l){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),Qt(r,t,s,-1))}return Gh(),r=Pu(Error(B(421))),Xo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=T1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ct=qn(s.nextSibling),Rt=e,Se=!0,qt=null,t!==null&&(Dt[bt++]=pn,Dt[bt++]=mn,Dt[bt++]=Pr,pn=t.id,mn=t.overflow,Pr=e),e=zh(e,r.children),e.flags|=4096,e)}function Op(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vc(t.return,e,n)}function Nu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function rv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,e);else if(t.tag===19)Op(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ua(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ua(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nu(e,!0,n,null,i);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function c1(t,e,n){switch(e.tag){case 3:tv(e),xs();break;case 5:Py(e);break;case 1:Tt(e.type)&&ba(e);break;case 4:bh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(La,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?nv(t,e,n):(_e(Ce,Ce.current&1),t=En(t,e,n),t!==null?t.sibling:null);_e(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Zy(t,e,n)}return En(t,e,n)}var sv,Ac,iv,ov;sv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ac=function(){};iv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ir(rn.current);var i=null;switch(n){case"input":s=Gu(t,s),r=Gu(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=Yu(t,s),r=Yu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Va)}Zu(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Li.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Li.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&we("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};ov=function(t,e,n,r){n!==r&&(e.flags|=4)};function pi(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function h1(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Tt(e.type)&&Da(),ot(e),null;case 3:return r=e.stateNode,Ss(),xe(wt),xe(ht),Oh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Go(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qt!==null&&(bc(qt),qt=null))),Ac(t,e),ot(e),null;case 5:Mh(e);var s=Ir(Ki.current);if(n=e.type,t!==null&&e.stateNode!=null)iv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ot(e),null}if(t=Ir(rn.current),Go(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[tn]=e,r[Qi]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<_i.length;s++)we(_i[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Hd(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":Qd(r,i),we("invalid",r)}Zu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Qo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Qo(r.textContent,l,t),s=["children",""+l]):Li.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":Fo(r),Wd(r,i,!0);break;case"textarea":Fo(r),Gd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Va)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tn]=e,t[Qi]=r,sv(t,e,!1,!1),e.stateNode=t;e:{switch(o=ec(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<_i.length;s++)we(_i[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":Hd(t,r),s=Gu(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),we("invalid",t);break;case"textarea":Qd(t,r),s=Yu(t,r),we("invalid",t);break;default:s=r}Zu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Lg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ji(t,u):typeof u=="number"&&ji(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Li.hasOwnProperty(i)?u!=null&&i==="onScroll"&&we("scroll",t):u!=null&&fh(t,i,u,o))}switch(n){case"input":Fo(t),Wd(t,r,!1);break;case"textarea":Fo(t),Gd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?cs(t,!!r.multiple,i,!1):r.defaultValue!=null&&cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)ov(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Ir(Ki.current),Ir(rn.current),Go(e)){if(r=e.stateNode,n=e.memoizedProps,r[tn]=e,(i=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Qo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return ot(e),null;case 13:if(xe(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Ct!==null&&e.mode&1&&!(e.flags&128))Iy(),xs(),e.flags|=98560,i=!1;else if(i=Go(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[tn]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else qt!==null&&(bc(qt),qt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?He===0&&(He=3):Gh())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Ss(),Ac(t,e),t===null&&Hi(e.stateNode.containerInfo),ot(e),null;case 10:return kh(e.type._context),ot(e),null;case 17:return Tt(e.type)&&Da(),ot(e),null;case 19:if(xe(Ce),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)pi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ua(t),o!==null){for(e.flags|=128,pi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Cs&&(e.flags|=128,r=!0,pi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ua(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Se)return ot(e),null}else 2*Me()-i.renderingStartTime>Cs&&n!==1073741824&&(e.flags|=128,r=!0,pi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Ce.current,_e(Ce,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Qh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function f1(t,e){switch(Ch(e),e.tag){case 1:return Tt(e.type)&&Da(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ss(),xe(wt),xe(ht),Oh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mh(e),null;case 13:if(xe(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Ce),null;case 4:return Ss(),null;case 10:return kh(e.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var Yo=!1,ut=!1,d1=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Cc(t,e,n){try{n()}catch(r){De(t,e,r)}}var Lp=!1;function p1(t,e){if(cc=Pa,t=hy(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,d=0,p=t,_=null;t:for(;;){for(var R;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(R=p.firstChild)!==null;)_=p,p=R;for(;;){if(p===t)break t;if(_===n&&++h===s&&(l=o),_===i&&++d===r&&(u=o),(R=p.nextSibling)!==null)break;p=_,_=p.parentNode}p=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hc={focusedElem:t,selectionRange:n},Pa=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var P=N.memoizedProps,V=N.memoizedState,A=e.stateNode,I=A.getSnapshotBeforeUpdate(e.elementType===e.type?P:zt(e.type,P),V);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){De(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return N=Lp,Lp=!1,N}function Pi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cc(e,n,i)}s=s.next}while(s!==r)}}function vl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function av(t){var e=t.alternate;e!==null&&(t.alternate=null,av(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[Qi],delete e[pc],delete e[Xw],delete e[Yw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lv(t){return t.tag===5||t.tag===3||t.tag===4}function jp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Va));else if(r!==4&&(t=t.child,t!==null))for(Pc(t,e,n),t=t.sibling;t!==null;)Pc(t,e,n),t=t.sibling}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}var Je=null,$t=!1;function kn(t,e,n){for(n=n.child;n!==null;)uv(t,e,n),n=n.sibling}function uv(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:ut||ls(n,e);case 6:var r=Je,s=$t;Je=null,kn(t,e,n),Je=r,$t=s,Je!==null&&($t?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&($t?(t=Je,n=n.stateNode,t.nodeType===8?xu(t.parentNode,n):t.nodeType===1&&xu(t,n),zi(t)):xu(Je,n.stateNode));break;case 4:r=Je,s=$t,Je=n.stateNode.containerInfo,$t=!0,kn(t,e,n),Je=r,$t=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cc(n,e,o),s=s.next}while(s!==r)}kn(t,e,n);break;case 1:if(!ut&&(ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}kn(t,e,n);break;case 21:kn(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,kn(t,e,n),ut=r):kn(t,e,n);break;default:kn(t,e,n)}}function Fp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new d1),e.forEach(function(r){var s=x1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,$t=!1;break e;case 3:Je=l.stateNode.containerInfo,$t=!0;break e;case 4:Je=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if(Je===null)throw Error(B(160));uv(i,o,s),Je=null,$t=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){De(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cv(e,t),e=e.sibling}function cv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),Jt(t),r&4){try{Pi(3,t,t.return),vl(3,t)}catch(P){De(t,t.return,P)}try{Pi(5,t,t.return)}catch(P){De(t,t.return,P)}}break;case 1:Bt(e,t),Jt(t),r&512&&n!==null&&ls(n,n.return);break;case 5:if(Bt(e,t),Jt(t),r&512&&n!==null&&ls(n,n.return),t.flags&32){var s=t.stateNode;try{ji(s,"")}catch(P){De(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vg(s,i),ec(l,o);var h=ec(l,i);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?Lg(s,p):d==="dangerouslySetInnerHTML"?Mg(s,p):d==="children"?ji(s,p):fh(s,d,p,h)}switch(l){case"input":Ku(s,i);break;case"textarea":Dg(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var R=i.value;R!=null?cs(s,!!i.multiple,R,!1):_!==!!i.multiple&&(i.defaultValue!=null?cs(s,!!i.multiple,i.defaultValue,!0):cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qi]=i}catch(P){De(t,t.return,P)}}break;case 6:if(Bt(e,t),Jt(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){De(t,t.return,P)}}break;case 3:if(Bt(e,t),Jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zi(e.containerInfo)}catch(P){De(t,t.return,P)}break;case 4:Bt(e,t),Jt(t);break;case 13:Bt(e,t),Jt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hh=Me())),r&4&&Fp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(h=ut)||d,Bt(e,t),ut=h):Bt(e,t),Jt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(p=Q=d;Q!==null;){switch(_=Q,R=_.child,_.tag){case 0:case 11:case 14:case 15:Pi(4,_,_.return);break;case 1:ls(_,_.return);var N=_.stateNode;if(typeof N.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(P){De(r,n,P)}}break;case 5:ls(_,_.return);break;case 22:if(_.memoizedState!==null){Bp(p);continue}}R!==null?(R.return=_,Q=R):Bp(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Og("display",o))}catch(P){De(t,t.return,P)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(P){De(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Bt(e,t),Jt(t),r&4&&Fp(t);break;case 21:break;default:Bt(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ji(s,""),r.flags&=-33);var i=jp(t);Nc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=jp(t);Pc(t,l,o);break;default:throw Error(B(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function m1(t,e,n){Q=t,hv(t)}function hv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Yo;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ut;l=Yo;var h=ut;if(Yo=o,(ut=u)&&!h)for(Q=s;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?zp(s):u!==null?(u.return=o,Q=u):zp(s);for(;i!==null;)Q=i,hv(i),i=i.sibling;Q=s,Yo=l,ut=h}Up(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Up(t)}}function Up(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||vl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ip(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ip(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&zi(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ut||e.flags&512&&Rc(e)}catch(_){De(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Bp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function zp(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vl(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var i=e.return;try{Rc(e)}catch(u){De(e,i,u)}break;case 5:var o=e.return;try{Rc(e)}catch(u){De(e,o,u)}}}catch(u){De(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var g1=Math.ceil,$a=In.ReactCurrentDispatcher,$h=In.ReactCurrentOwner,jt=In.ReactCurrentBatchConfig,fe=0,Ye=null,je=null,tt=0,At=0,us=cr(0),He=0,Zi=null,kr=0,_l=0,qh=0,Ni=null,_t=null,Hh=0,Cs=1/0,fn=null,qa=!1,kc=null,Wn=null,Jo=!1,jn=null,Ha=0,ki=0,Vc=null,ma=-1,ga=0;function mt(){return fe&6?Me():ma!==-1?ma:ma=Me()}function Qn(t){return t.mode&1?fe&2&&tt!==0?tt&-tt:Zw.transition!==null?(ga===0&&(ga=Kg()),ga):(t=me,t!==0||(t=window.event,t=t===void 0?16:ny(t.type)),t):1}function Qt(t,e,n,r){if(50<ki)throw ki=0,Vc=null,Error(B(185));mo(t,n,r),(!(fe&2)||t!==Ye)&&(t===Ye&&(!(fe&2)&&(_l|=n),He===4&&Mn(t,tt)),xt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Cs=Me()+500,ml&&hr()))}function xt(t,e){var n=t.callbackNode;ZE(t,e);var r=Ra(t,t===Ye?tt:0);if(r===0)n!==null&&Yd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yd(n),e===1)t.tag===0?Jw($p.bind(null,t)):wy($p.bind(null,t)),Gw(function(){!(fe&6)&&hr()}),n=null;else{switch(Xg(r)){case 1:n=yh;break;case 4:n=Qg;break;case 16:n=Ca;break;case 536870912:n=Gg;break;default:n=Ca}n=_v(n,fv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fv(t,e){if(ma=-1,ga=0,fe&6)throw Error(B(327));var n=t.callbackNode;if(ms()&&t.callbackNode!==n)return null;var r=Ra(t,t===Ye?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wa(t,r);else{e=r;var s=fe;fe|=2;var i=pv();(Ye!==t||tt!==e)&&(fn=null,Cs=Me()+500,Ar(t,e));do try{_1();break}catch(l){dv(t,l)}while(!0);Nh(),$a.current=i,fe=s,je!==null?e=0:(Ye=null,tt=0,e=He)}if(e!==0){if(e===2&&(s=ic(t),s!==0&&(r=s,e=Dc(t,s))),e===1)throw n=Zi,Ar(t,0),Mn(t,r),xt(t,Me()),n;if(e===6)Mn(t,r);else{if(s=t.current.alternate,!(r&30)&&!y1(s)&&(e=Wa(t,r),e===2&&(i=ic(t),i!==0&&(r=i,e=Dc(t,i))),e===1))throw n=Zi,Ar(t,0),Mn(t,r),xt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:_r(t,_t,fn);break;case 3:if(Mn(t,r),(r&130023424)===r&&(e=Hh+500-Me(),10<e)){if(Ra(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dc(_r.bind(null,t,_t,fn),e);break}_r(t,_t,fn);break;case 4:if(Mn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Wt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g1(r/1960))-r,10<r){t.timeoutHandle=dc(_r.bind(null,t,_t,fn),r);break}_r(t,_t,fn);break;case 5:_r(t,_t,fn);break;default:throw Error(B(329))}}}return xt(t,Me()),t.callbackNode===n?fv.bind(null,t):null}function Dc(t,e){var n=Ni;return t.current.memoizedState.isDehydrated&&(Ar(t,e).flags|=256),t=Wa(t,e),t!==2&&(e=_t,_t=n,e!==null&&bc(e)),t}function bc(t){_t===null?_t=t:_t.push.apply(_t,t)}function y1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e){for(e&=~qh,e&=~_l,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function $p(t){if(fe&6)throw Error(B(327));ms();var e=Ra(t,0);if(!(e&1))return xt(t,Me()),null;var n=Wa(t,e);if(t.tag!==0&&n===2){var r=ic(t);r!==0&&(e=r,n=Dc(t,r))}if(n===1)throw n=Zi,Ar(t,0),Mn(t,e),xt(t,Me()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,_t,fn),xt(t,Me()),null}function Wh(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Cs=Me()+500,ml&&hr())}}function Vr(t){jn!==null&&jn.tag===0&&!(fe&6)&&ms();var e=fe;fe|=1;var n=jt.transition,r=me;try{if(jt.transition=null,me=1,t)return t()}finally{me=r,jt.transition=n,fe=e,!(fe&6)&&hr()}}function Qh(){At=us.current,xe(us)}function Ar(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Qw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Da();break;case 3:Ss(),xe(wt),xe(ht),Oh();break;case 5:Mh(r);break;case 4:Ss();break;case 13:xe(Ce);break;case 19:xe(Ce);break;case 10:kh(r.type._context);break;case 22:case 23:Qh()}n=n.return}if(Ye=t,je=t=Gn(t.current,null),tt=At=e,He=0,Zi=null,qh=_l=kr=0,_t=Ni=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xr=null}return t}function dv(t,e){do{var n=je;try{if(Nh(),fa.current=za,Ba){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ba=!1}if(Nr=0,Ke=qe=Re=null,Ri=!1,Xi=0,$h.current=null,n===null||n.return===null){He=1,Zi=e,je=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=tt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var _=d.alternate;_?(d.updateQueue=_.updateQueue,d.memoizedState=_.memoizedState,d.lanes=_.lanes):(d.updateQueue=null,d.memoizedState=null)}var R=Np(o);if(R!==null){R.flags&=-257,kp(R,o,l,i,e),R.mode&1&&Pp(i,h,e),e=R,u=h;var N=e.updateQueue;if(N===null){var P=new Set;P.add(u),e.updateQueue=P}else N.add(u);break e}else{if(!(e&1)){Pp(i,h,e),Gh();break e}u=Error(B(426))}}else if(Se&&l.mode&1){var V=Np(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),kp(V,o,l,i,e),Rh(As(u,l));break e}}i=u=As(u,l),He!==4&&(He=2),Ni===null?Ni=[i]:Ni.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=Xy(i,u,e);xp(i,A);break e;case 1:l=u;var I=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Wn===null||!Wn.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Yy(i,l,e);xp(i,D);break e}}i=i.return}while(i!==null)}gv(n)}catch(F){e=F,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function pv(){var t=$a.current;return $a.current=za,t===null?za:t}function Gh(){(He===0||He===3||He===2)&&(He=4),Ye===null||!(kr&268435455)&&!(_l&268435455)||Mn(Ye,tt)}function Wa(t,e){var n=fe;fe|=2;var r=pv();(Ye!==t||tt!==e)&&(fn=null,Ar(t,e));do try{v1();break}catch(s){dv(t,s)}while(!0);if(Nh(),fe=n,$a.current=r,je!==null)throw Error(B(261));return Ye=null,tt=0,He}function v1(){for(;je!==null;)mv(je)}function _1(){for(;je!==null&&!qE();)mv(je)}function mv(t){var e=vv(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?gv(t):je=e,$h.current=null}function gv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=f1(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,je=null;return}}else if(n=h1(n,e,At),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);He===0&&(He=5)}function _r(t,e,n){var r=me,s=jt.transition;try{jt.transition=null,me=1,E1(t,e,n,r)}finally{jt.transition=s,me=r}return null}function E1(t,e,n,r){do ms();while(jn!==null);if(fe&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ew(t,i),t===Ye&&(je=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jo||(Jo=!0,_v(Ca,function(){return ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=me;me=1;var l=fe;fe|=4,$h.current=null,p1(t,n),cv(n,t),Uw(hc),Pa=!!cc,hc=cc=null,t.current=n,m1(n),HE(),fe=l,me=o,jt.transition=i}else t.current=n;if(Jo&&(Jo=!1,jn=t,Ha=s),i=t.pendingLanes,i===0&&(Wn=null),GE(n.stateNode),xt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qa)throw qa=!1,t=kc,kc=null,t;return Ha&1&&t.tag!==0&&ms(),i=t.pendingLanes,i&1?t===Vc?ki++:(ki=0,Vc=t):ki=0,hr(),null}function ms(){if(jn!==null){var t=Xg(Ha),e=jt.transition,n=me;try{if(jt.transition=null,me=16>t?16:t,jn===null)var r=!1;else{if(t=jn,jn=null,Ha=0,fe&6)throw Error(B(331));var s=fe;for(fe|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:Pi(8,d,i)}var p=d.child;if(p!==null)p.return=d,Q=p;else for(;Q!==null;){d=Q;var _=d.sibling,R=d.return;if(av(d),d===h){Q=null;break}if(_!==null){_.return=R,Q=_;break}Q=R}}}var N=i.alternate;if(N!==null){var P=N.child;if(P!==null){N.child=null;do{var V=P.sibling;P.sibling=null,P=V}while(P!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pi(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,Q=A;break e}Q=i.return}}var I=t.current;for(Q=I;Q!==null;){o=Q;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Q=C;else e:for(o=I;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vl(9,l)}}catch(F){De(l,l.return,F)}if(l===o){Q=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,Q=D;break e}Q=l.return}}if(fe=s,hr(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(cl,t)}catch{}r=!0}return r}finally{me=n,jt.transition=e}}return!1}function qp(t,e,n){e=As(n,e),e=Xy(t,e,1),t=Hn(t,e,1),e=mt(),t!==null&&(mo(t,1,e),xt(t,e))}function De(t,e,n){if(t.tag===3)qp(t,t,n);else for(;e!==null;){if(e.tag===3){qp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){t=As(n,t),t=Yy(e,t,1),e=Hn(e,t,1),t=mt(),e!==null&&(mo(e,1,t),xt(e,t));break}}e=e.return}}function w1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(tt&n)===n&&(He===4||He===3&&(tt&130023424)===tt&&500>Me()-Hh?Ar(t,0):qh|=n),xt(t,e)}function yv(t,e){e===0&&(t.mode&1?(e=zo,zo<<=1,!(zo&130023424)&&(zo=4194304)):e=1);var n=mt();t=_n(t,e),t!==null&&(mo(t,e,n),xt(t,n))}function T1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yv(t,n)}function x1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),yv(t,n)}var vv;vv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,c1(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Se&&e.flags&1048576&&Ty(e,Oa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pa(t,e),t=e.pendingProps;var s=Ts(e,ht.current);ps(e,n),s=jh(null,e,r,t,s,n);var i=Fh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(i=!0,ba(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dh(e),s.updater=yl,e.stateNode=s,s._reactInternals=e,Ec(e,r,t,n),e=xc(null,e,r,!0,i,n)):(e.tag=0,Se&&i&&Ah(e),pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=S1(r),t=zt(r,t),s){case 0:e=Tc(null,e,r,t,n);break e;case 1:e=bp(null,e,r,t,n);break e;case 11:e=Vp(null,e,r,t,n);break e;case 14:e=Dp(null,e,r,zt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),Tc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),bp(t,e,r,s,n);case 3:e:{if(tv(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ry(t,e),Fa(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=As(Error(B(423)),e),e=Mp(t,e,r,n,s);break e}else if(r!==s){s=As(Error(B(424)),e),e=Mp(t,e,r,n,s);break e}else for(Ct=qn(e.stateNode.containerInfo.firstChild),Rt=e,Se=!0,qt=null,n=Ay(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===s){e=En(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 5:return Py(e),t===null&&yc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,fc(r,s)?o=null:i!==null&&fc(r,i)&&(e.flags|=32),ev(t,e),pt(t,e,o,n),e.child;case 6:return t===null&&yc(e),null;case 13:return nv(t,e,n);case 4:return bh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Is(e,null,r,n):pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),Vp(t,e,r,s,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(La,r._currentValue),r._currentValue=o,i!==null)if(Gt(i.value,o)){if(i.children===s.children&&!wt.current){e=En(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=gn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),vc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),vc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ps(e,n),s=Ft(s),r=r(s),e.flags|=1,pt(t,e,r,n),e.child;case 14:return r=e.type,s=zt(r,e.pendingProps),s=zt(r.type,s),Dp(t,e,r,s,n);case 15:return Jy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),pa(t,e),e.tag=1,Tt(r)?(t=!0,ba(e)):t=!1,ps(e,n),Ky(e,r,s),Ec(e,r,s,n),xc(null,e,r,!0,t,n);case 19:return rv(t,e,n);case 22:return Zy(t,e,n)}throw Error(B(156,e.tag))};function _v(t,e){return Wg(t,e)}function I1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new I1(t,e,n,r)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function S1(t){if(typeof t=="function")return Kh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function Gn(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ya(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Kh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zr:return Cr(n.children,s,i,e);case dh:o=8,s|=8;break;case qu:return t=Lt(12,n,e,s|2),t.elementType=qu,t.lanes=i,t;case Hu:return t=Lt(13,n,e,s),t.elementType=Hu,t.lanes=i,t;case Wu:return t=Lt(19,n,e,s),t.elementType=Wu,t.lanes=i,t;case Pg:return El(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cg:o=10;break e;case Rg:o=9;break e;case ph:o=11;break e;case mh:o=14;break e;case Vn:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cr(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function El(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=Pg,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function Vu(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function A1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xh(t,e,n,r,s,i,o,l,u){return t=new A1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(i),t}function C1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ev(t){if(!t)return nr;t=t._reactInternals;e:{if(Or(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Tt(n))return Ey(t,n,e)}return e}function wv(t,e,n,r,s,i,o,l,u){return t=Xh(n,r,!0,t,s,i,o,l,u),t.context=Ev(null),n=t.current,r=mt(),s=Qn(n),i=gn(r,s),i.callback=e??null,Hn(n,i,s),t.current.lanes=s,mo(t,s,r),xt(t,r),t}function wl(t,e,n,r){var s=e.current,i=mt(),o=Qn(s);return n=Ev(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(s,e,o),t!==null&&(Qt(t,s,o,i),ha(t,s,o)),o}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){Hp(t,e),(t=t.alternate)&&Hp(t,e)}function R1(){return null}var Tv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jh(t){this._internalRoot=t}Tl.prototype.render=Jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));wl(t,e,null,null)};Tl.prototype.unmount=Jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vr(function(){wl(null,t,null,null)}),e[vn]=null}};function Tl(t){this._internalRoot=t}Tl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bn.length&&e!==0&&e<bn[n].priority;n++);bn.splice(n,0,t),n===0&&ty(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wp(){}function P1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Qa(o);i.call(h)}}var o=wv(e,r,t,0,null,!1,!1,"",Wp);return t._reactRootContainer=o,t[vn]=o.current,Hi(t.nodeType===8?t.parentNode:t),Vr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Qa(u);l.call(h)}}var u=Xh(t,0,!1,null,null,!1,!1,"",Wp);return t._reactRootContainer=u,t[vn]=u.current,Hi(t.nodeType===8?t.parentNode:t),Vr(function(){wl(e,u,n,r)}),u}function Il(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Qa(o);l.call(u)}}wl(e,o,t,s)}else o=P1(n,e,t,s,r);return Qa(o)}Yg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vi(e.pendingLanes);n!==0&&(vh(e,n|1),xt(e,Me()),!(fe&6)&&(Cs=Me()+500,hr()))}break;case 13:Vr(function(){var r=_n(t,1);if(r!==null){var s=mt();Qt(r,t,1,s)}}),Yh(t,1)}};_h=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=mt();Qt(e,t,134217728,n)}Yh(t,134217728)}};Jg=function(t){if(t.tag===13){var e=Qn(t),n=_n(t,e);if(n!==null){var r=mt();Qt(n,t,e,r)}Yh(t,e)}};Zg=function(){return me};ey=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};nc=function(t,e,n){switch(e){case"input":if(Ku(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pl(r);if(!s)throw Error(B(90));kg(r),Ku(r,s)}}}break;case"textarea":Dg(t,n);break;case"select":e=n.value,e!=null&&cs(t,!!n.multiple,e,!1)}};Ug=Wh;Bg=Vr;var N1={usingClientEntryPoint:!1,Events:[yo,rs,pl,jg,Fg,Wh]},mi={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k1={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qg(t),t===null?null:t.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||R1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{cl=Zo.inject(k1),nn=Zo}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(B(200));return C1(t,e,null,n)};Nt.createRoot=function(t,e){if(!Zh(t))throw Error(B(299));var n=!1,r="",s=Tv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Xh(t,1,!1,null,null,n,!1,r,s),t[vn]=e.current,Hi(t.nodeType===8?t.parentNode:t),new Jh(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=qg(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Vr(t)};Nt.hydrate=function(t,e,n){if(!xl(e))throw Error(B(200));return Il(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Tv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wv(e,null,t,1,n??null,s,!1,i,o),t[vn]=e.current,Hi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tl(e)};Nt.render=function(t,e,n){if(!xl(e))throw Error(B(200));return Il(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!xl(t))throw Error(B(40));return t._reactRootContainer?(Vr(function(){Il(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};Nt.unstable_batchedUpdates=Wh;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xl(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Il(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xv)}catch(t){console.error(t)}}xv(),xg.exports=Nt;var V1=xg.exports,Iv,Qp=V1;Iv=Qp.createRoot,Qp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eo(){return eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eo.apply(this,arguments)}var Fn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fn||(Fn={}));const Gp="popstate";function D1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Mc("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ga(s)}return M1(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function b1(){return Math.random().toString(36).substr(2,8)}function Kp(t,e){return{usr:t.state,key:t.key,idx:e}}function Mc(t,e,n,r){return n===void 0&&(n=null),eo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?js(e):e,{state:n,key:e&&e.key||r||b1()})}function Ga(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function js(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function M1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Fn.Pop,u=null,h=d();h==null&&(h=0,o.replaceState(eo({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function p(){l=Fn.Pop;let V=d(),A=V==null?null:V-h;h=V,u&&u({action:l,location:P.location,delta:A})}function _(V,A){l=Fn.Push;let I=Mc(P.location,V,A);h=d()+1;let C=Kp(I,h),D=P.createHref(I);try{o.pushState(C,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(D)}i&&u&&u({action:l,location:P.location,delta:1})}function R(V,A){l=Fn.Replace;let I=Mc(P.location,V,A);h=d();let C=Kp(I,h),D=P.createHref(I);o.replaceState(C,"",D),i&&u&&u({action:l,location:P.location,delta:0})}function N(V){let A=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof V=="string"?V:Ga(V);return I=I.replace(/ $/,"%20"),Be(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let P={get action(){return l},get location(){return t(s,o)},listen(V){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Gp,p),u=V,()=>{s.removeEventListener(Gp,p),u=null}},createHref(V){return e(s,V)},createURL:N,encodeLocation(V){let A=N(V);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:_,replace:R,go(V){return o.go(V)}};return P}var Xp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xp||(Xp={}));function O1(t,e,n){return n===void 0&&(n="/"),L1(t,e,n)}function L1(t,e,n,r){let s=typeof e=="string"?js(e):e,i=ef(s.pathname||"/",n);if(i==null)return null;let o=Av(t);j1(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=X1(i);l=Q1(o[u],h)}return l}function Av(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Kn([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Av(i.children,e,d,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:H1(h,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Cv(i.path))s(i,o,u)}),e}function Cv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Cv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function j1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:W1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const F1=/^:[\w-]+$/,U1=3,B1=2,z1=1,$1=10,q1=-2,Yp=t=>t==="*";function H1(t,e){let n=t.split("/"),r=n.length;return n.some(Yp)&&(r+=q1),e&&(r+=B1),n.filter(s=>!Yp(s)).reduce((s,i)=>s+(F1.test(i)?U1:i===""?z1:$1),r)}function W1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Q1(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=G1({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),_=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Kn([i,p.pathname]),pathnameBase:eT(Kn([i,p.pathnameBase])),route:_}),p.pathnameBase!=="/"&&(i=Kn([i,p.pathnameBase]))}return o}function G1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=K1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,d,p)=>{let{paramName:_,isOptional:R}=d;if(_==="*"){let P=l[p]||"";o=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const N=l[p];return R&&!N?h[_]=void 0:h[_]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function K1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Sv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function X1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ef(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Y1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?js(t):t;return{pathname:n?n.startsWith("/")?n:J1(n,e):e,search:tT(r),hash:nT(s)}}function J1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Du(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rv(t,e){let n=Z1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=js(t):(s=eo({},t),Be(!s.pathname||!s.pathname.includes("?"),Du("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),Du("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),Du("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),p-=1;s.pathname=_.join("/")}l=p>=0?e[p]:"/"}let u=Y1(s,l),h=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}const Kn=t=>t.join("/").replace(/\/\/+/g,"/"),eT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Nv=["post","put","patch","delete"];new Set(Nv);const sT=["get",...Nv];new Set(sT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function to(){return to=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},to.apply(this,arguments)}const tf=M.createContext(null),iT=M.createContext(null),Lr=M.createContext(null),Sl=M.createContext(null),jr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),kv=M.createContext(null);function oT(t,e){let{relative:n}=e===void 0?{}:e;_o()||Be(!1);let{basename:r,navigator:s}=M.useContext(Lr),{hash:i,pathname:o,search:l}=Dv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Kn([r,o])),s.createHref({pathname:u,search:l,hash:i})}function _o(){return M.useContext(Sl)!=null}function Al(){return _o()||Be(!1),M.useContext(Sl).location}function Vv(t){M.useContext(Lr).static||M.useLayoutEffect(t)}function aT(){let{isDataRoute:t}=M.useContext(jr);return t?ET():lT()}function lT(){_o()||Be(!1);let t=M.useContext(tf),{basename:e,future:n,navigator:r}=M.useContext(Lr),{matches:s}=M.useContext(jr),{pathname:i}=Al(),o=JSON.stringify(Rv(s,n.v7_relativeSplatPath)),l=M.useRef(!1);return Vv(()=>{l.current=!0}),M.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let p=Pv(h,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Kn([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,i,t])}function Dv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Lr),{matches:s}=M.useContext(jr),{pathname:i}=Al(),o=JSON.stringify(Rv(s,r.v7_relativeSplatPath));return M.useMemo(()=>Pv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function uT(t,e){return cT(t,e)}function cT(t,e,n,r){_o()||Be(!1);let{navigator:s}=M.useContext(Lr),{matches:i}=M.useContext(jr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Al(),d;if(e){var p;let V=typeof e=="string"?js(e):e;u==="/"||(p=V.pathname)!=null&&p.startsWith(u)||Be(!1),d=V}else d=h;let _=d.pathname||"/",R=_;if(u!=="/"){let V=u.replace(/^\//,"").split("/");R="/"+_.replace(/^\//,"").split("/").slice(V.length).join("/")}let N=O1(t,{pathname:R}),P=mT(N&&N.map(V=>Object.assign({},V,{params:Object.assign({},l,V.params),pathname:Kn([u,s.encodeLocation?s.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?u:Kn([u,s.encodeLocation?s.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),i,n,r);return e&&P?M.createElement(Sl.Provider,{value:{location:to({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Fn.Pop}},P):P}function hT(){let t=_T(),e=rT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const fT=M.createElement(hT,null);class dT extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(jr.Provider,{value:this.props.routeContext},M.createElement(kv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pT(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(tf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(jr.Provider,{value:e},r)}function mT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);d>=0||Be(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:_,errors:R}=n,N=p.route.loader&&_[p.route.id]===void 0&&(!R||R[p.route.id]===void 0);if(p.route.lazy||N){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,p,_)=>{let R,N=!1,P=null,V=null;n&&(R=l&&p.route.id?l[p.route.id]:void 0,P=p.route.errorElement||fT,u&&(h<0&&_===0?(wT("route-fallback"),N=!0,V=null):h===_&&(N=!0,V=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,_+1)),I=()=>{let C;return R?C=P:N?C=V:p.route.Component?C=M.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=d,M.createElement(pT,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?M.createElement(dT,{location:n.location,revalidation:n.revalidation,component:P,error:R,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var bv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bv||{}),Mv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mv||{});function gT(t){let e=M.useContext(tf);return e||Be(!1),e}function yT(t){let e=M.useContext(iT);return e||Be(!1),e}function vT(t){let e=M.useContext(jr);return e||Be(!1),e}function Ov(t){let e=vT(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function _T(){var t;let e=M.useContext(kv),n=yT(),r=Ov();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ET(){let{router:t}=gT(bv.UseNavigateStable),e=Ov(Mv.UseNavigateStable),n=M.useRef(!1);return Vv(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,to({fromRouteId:e},i)))},[t,e])}const Jp={};function wT(t,e,n){Jp[t]||(Jp[t]=!0)}function TT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Er(t){Be(!1)}function xT(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Fn.Pop,navigator:i,static:o=!1,future:l}=t;_o()&&Be(!1);let u=e.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:i,static:o,future:to({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=js(r));let{pathname:d="/",search:p="",hash:_="",state:R=null,key:N="default"}=r,P=M.useMemo(()=>{let V=ef(d,u);return V==null?null:{location:{pathname:V,search:p,hash:_,state:R,key:N},navigationType:s}},[u,d,p,_,R,N,s]);return P==null?null:M.createElement(Lr.Provider,{value:h},M.createElement(Sl.Provider,{children:n,value:P}))}function IT(t){let{children:e,location:n}=t;return uT(Oc(e),n)}new Promise(()=>{});function Oc(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Oc(r.props.children,i));return}r.type!==Er&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Oc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lc(){return Lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lc.apply(this,arguments)}function ST(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function AT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CT(t,e){return t.button===0&&(!e||e==="_self")&&!AT(t)}const RT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PT="6";try{window.__reactRouterVersion=PT}catch{}const NT="startTransition",Zp=wE[NT];function kT(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=D1({window:s,v5Compat:!0}));let o=i.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},d=M.useCallback(p=>{h&&Zp?Zp(()=>u(p)):u(p)},[u,h]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.useEffect(()=>TT(r),[r]),M.createElement(xT,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const VT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bT=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:p}=e,_=ST(e,RT),{basename:R}=M.useContext(Lr),N,P=!1;if(typeof h=="string"&&DT.test(h)&&(N=h,VT))try{let C=new URL(window.location.href),D=h.startsWith("//")?new URL(C.protocol+h):new URL(h),F=ef(D.pathname,R);D.origin===C.origin&&F!=null?h=F+D.search+D.hash:P=!0}catch{}let V=oT(h,{relative:s}),A=MT(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:p});function I(C){r&&r(C),C.defaultPrevented||A(C)}return M.createElement("a",Lc({},_,{href:N||V,onClick:P||i?r:I,ref:n,target:u}))});var em;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(em||(em={}));var tm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tm||(tm={}));function MT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=aT(),h=Al(),d=Dv(t,{relative:o});return M.useCallback(p=>{if(CT(p,n)){p.preventDefault();let _=r!==void 0?r:Ga(h)===Ga(d);u(t,{replace:_,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[h,u,d,r,s,n,t,i,o,l])}function OT(){const t=[{title:"1. Root of Equation",topics:[{id:"bisection",name:"Bisection Method",path:"/bisection"},{id:"falsepo",name:"False-Position Method",path:"/falsepo"},{id:"onepoint",name:"One-Point Method",path:"/onepoint"},{id:"newtonrap",name:"Newton Raphson Method",path:"/newtonrap"},{id:"secant",name:"Secant Method",path:"/secant"}]},{title:"2. Linear System",topics:[{id:"gauss-elim",name:"Gauss Elimination",path:"/gauss-elim"},{id:"gauss-jordan",name:"Gauss-Jordan",path:"/gauss-jordan"},{id:"lu",name:"LU Decomposition",path:"/lu"}]},{title:"3. Interpolation",topics:[{id:"lagrange",name:"Lagrange",path:"/lagrange"},{id:"newton-interp",name:"Newton Interpolation",path:"/newton-interp"}]},{title:"4. Regression",topics:[{id:"linear-reg",name:"Linear Regression",path:"/linear-reg"},{id:"poly-reg",name:"Polynomial Regression",path:"/poly-reg"}]},{title:"5. Integration",topics:[{id:"trapezoidal",name:"Trapezoidal Rule",path:"/trapezoidal"},{id:"simpson",name:"Simpson’s Rule",path:"/simpson"}]},{title:"6. Differentiation",topics:[{id:"forward-diff",name:"Forward Difference",path:"/forward-diff"},{id:"backward-diff",name:"Backward Difference",path:"/backward-diff"},{id:"central-diff",name:"Central Difference",path:"/central-diff"}]}];return T.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center p-6 bg-slate-900",children:[T.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-8 text-center fade-in",children:"Numerical Methods"}),T.jsx("div",{className:"flex justify-center items-center w-full",children:T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:t.map(e=>T.jsxs("div",{className:`bg-slate-800 rounded-xl p-5 shadow-lg border border-cyan-700 w-72\r
                         transform transition-all duration-300 fade-in-delay1\r
                         hover:scale-105 hover:shadow-2xl glow-btn`,children:[T.jsx("h2",{className:"text-lg font-semibold text-cyan-300 mb-3 text-center",children:e.title}),T.jsx("ul",{className:"space-y-2",children:e.topics.map(n=>T.jsx("li",{className:"bg-slate-700 p-2 rounded-md hover:bg-slate-600 transition-colors",children:T.jsx(bT,{to:n.path,className:"block text-center",children:n.name})},n.id))})]},e.title))})})]})}const LT=()=>{};var nm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let _=(l&15)<<2|h>>6,R=h&63;u||(R=64,o||(_=64)),r.push(n[d],n[p],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new FT;const _=i<<2|l>>4;if(r.push(_),h!==64){const R=l<<4&240|h>>2;if(r.push(R),p!==64){const N=h<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UT=function(t){const e=Lv(t);return jv.encodeByteArray(e,!0)},Ka=function(t){return UT(t).replace(/\./g,"")},BT=function(t){try{return jv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=()=>zT().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof nm>"u")return;const t=nm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BT(t[1]);return e&&JSON.parse(e)},nf=()=>{try{return LT()||$T()||qT()||HT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WT=t=>{var e,n;return(n=(e=nf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QT=t=>{const e=WT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fv=()=>{var t;return(t=nf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ka(JSON.stringify(n)),Ka(JSON.stringify(o)),""].join(".")}const Vi={};function YT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vi))Vi[e]?t.emulator.push(e):t.prod.push(e);return t}function JT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rm=!1;function ZT(t,e){if(typeof window>"u"||typeof document>"u"||!rf(window.location.host)||Vi[t]===e||Vi[t]||rm)return;Vi[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",i=YT().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{rm=!0,o()},_}function d(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){const _=JT(r),R=n("text"),N=document.getElementById(R)||document.createElement("span"),P=n("learnmore"),V=document.getElementById(P)||document.createElement("a"),A=n("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;l(C),d(V,P);const D=h();u(I,A),C.append(I,N,V,D),document.body.appendChild(C)}i?(N.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tx(){var e;const t=(e=nf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nx(){return!tx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rx(){try{return typeof indexedDB=="object"}catch{return!1}}function sx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="FirebaseError";class Fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ix,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uv.prototype.create)}}class Uv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ox(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Fs(s,l,r)}}function ox(t,e){return t.replace(ax,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ax=/\{\$([^}]+)}/g;function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(sm(i)&&sm(o)){if(!Xa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function sm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t){return t&&t._delegate?t._delegate:t}class no{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cx(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ux(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ux(t){return t===wr?void 0:t}function cx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const fx={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},dx=he.INFO,px={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},mx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=px[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bv{constructor(e){this.name=e,this._logLevel=dx,this._logHandler=mx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const gx=(t,e)=>e.some(n=>t instanceof n);let im,om;function yx(){return im||(im=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vx(){return om||(om=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zv=new WeakMap,jc=new WeakMap,$v=new WeakMap,bu=new WeakMap,sf=new WeakMap;function _x(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zv.set(n,t)}).catch(()=>{}),sf.set(e,t),e}function Ex(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$v.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wx(t){Fc=t(Fc)}function Tx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mu(this),e,...n);return $v.set(r,e.sort?e.sort():[e]),Xn(r)}:vx().includes(t)?function(...e){return t.apply(Mu(this),e),Xn(zv.get(this))}:function(...e){return Xn(t.apply(Mu(this),e))}}function xx(t){return typeof t=="function"?Tx(t):(t instanceof IDBTransaction&&Ex(t),gx(t,yx())?new Proxy(t,Fc):t)}function Xn(t){if(t instanceof IDBRequest)return _x(t);if(bu.has(t))return bu.get(t);const e=xx(t);return e!==t&&(bu.set(t,e),sf.set(e,t)),e}const Mu=t=>sf.get(t);function Ix(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Xn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Xn(o.result),u.oldVersion,u.newVersion,Xn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Sx=["get","getKey","getAll","getAllKeys","count"],Ax=["put","add","delete","clear"],Ou=new Map;function am(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ou.get(e))return Ou.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Ax.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Sx.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Ou.set(e,i),i}wx(t=>({...t,get:(e,n,r)=>am(e,n)||t.get(e,n,r),has:(e,n)=>!!am(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Rx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Rx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",lm="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new Bv("@firebase/app"),Px="@firebase/app-compat",Nx="@firebase/analytics-compat",kx="@firebase/analytics",Vx="@firebase/app-check-compat",Dx="@firebase/app-check",bx="@firebase/auth",Mx="@firebase/auth-compat",Ox="@firebase/database",Lx="@firebase/data-connect",jx="@firebase/database-compat",Fx="@firebase/functions",Ux="@firebase/functions-compat",Bx="@firebase/installations",zx="@firebase/installations-compat",$x="@firebase/messaging",qx="@firebase/messaging-compat",Hx="@firebase/performance",Wx="@firebase/performance-compat",Qx="@firebase/remote-config",Gx="@firebase/remote-config-compat",Kx="@firebase/storage",Xx="@firebase/storage-compat",Yx="@firebase/firestore",Jx="@firebase/ai",Zx="@firebase/firestore-compat",eI="firebase",tI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="[DEFAULT]",nI={[Uc]:"fire-core",[Px]:"fire-core-compat",[kx]:"fire-analytics",[Nx]:"fire-analytics-compat",[Dx]:"fire-app-check",[Vx]:"fire-app-check-compat",[bx]:"fire-auth",[Mx]:"fire-auth-compat",[Ox]:"fire-rtdb",[Lx]:"fire-data-connect",[jx]:"fire-rtdb-compat",[Fx]:"fire-fn",[Ux]:"fire-fn-compat",[Bx]:"fire-iid",[zx]:"fire-iid-compat",[$x]:"fire-fcm",[qx]:"fire-fcm-compat",[Hx]:"fire-perf",[Wx]:"fire-perf-compat",[Qx]:"fire-rc",[Gx]:"fire-rc-compat",[Kx]:"fire-gcs",[Xx]:"fire-gcs-compat",[Yx]:"fire-fst",[Zx]:"fire-fst-compat",[Jx]:"fire-vertex","fire-js":"fire-js",[eI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new Map,rI=new Map,zc=new Map;function um(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if(zc.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;zc.set(e,t);for(const n of Ya.values())um(n,t);for(const n of rI.values())um(n,t);return!0}function sI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function iI(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new Uv("app","Firebase",oI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=tI;function qv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Bc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Yn.create("bad-app-name",{appName:String(s)});if(n||(n=Fv()),!n)throw Yn.create("no-options");const i=Ya.get(s);if(i){if(Xa(n,i.options)&&Xa(r,i.config))return i;throw Yn.create("duplicate-app",{appName:s})}const o=new hx(s);for(const u of zc.values())o.addComponent(u);const l=new aI(n,r,o);return Ya.set(s,l),l}function uI(t=Bc){const e=Ya.get(t);if(!e&&t===Bc&&Fv())return qv();if(!e)throw Yn.create("no-app",{appName:t});return e}function gs(t,e,n){let r=nI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(o.join(" "));return}Ja(new no(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firebase-heartbeat-database",hI=1,ro="firebase-heartbeat-store";let Lu=null;function Hv(){return Lu||(Lu=Ix(cI,hI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yn.create("idb-open",{originalErrorMessage:t.message})})),Lu}async function fI(t){try{const n=(await Hv()).transaction(ro),r=await n.objectStore(ro).get(Wv(t));return await n.done,r}catch(e){if(e instanceof Fs)wn.warn(e.message);else{const n=Yn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function cm(t,e){try{const r=(await Hv()).transaction(ro,"readwrite");await r.objectStore(ro).put(e,Wv(t)),await r.done}catch(n){if(n instanceof Fs)wn.warn(n.message);else{const r=Yn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function Wv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=1024,pI=30;class mI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=hm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>pI){const o=vI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hm(),{heartbeatsToSend:r,unsentEntries:s}=gI(this._heartbeatsCache.heartbeats),i=Ka(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return wn.warn(n),""}}}function hm(){return new Date().toISOString().substring(0,10)}function gI(t,e=dI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),fm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),fm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rx()?sx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function fm(t){return Ka(JSON.stringify({version:2,heartbeats:t})).length}function vI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){Ja(new no("platform-logger",e=>new Cx(e),"PRIVATE")),Ja(new no("heartbeat",e=>new mI(e),"PRIVATE")),gs(Uc,lm,t),gs(Uc,lm,"esm2020"),gs("fire-js","")}_I("");var EI="firebase",wI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(EI,wI,"app");var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jn,Qv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,g){function E(){}E.prototype=g.prototype,S.F=g.prototype,S.prototype=new E,S.prototype.constructor=S,S.D=function(w,y,x){for(var m=Array(arguments.length-2),z=2;z<arguments.length;z++)m[z-2]=arguments[z];return g.prototype[y].apply(w,m)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,g,E){E||(E=0);const w=Array(16);if(typeof g=="string")for(var y=0;y<16;++y)w[y]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(y=0;y<16;++y)w[y]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=S.g[0],E=S.g[1],y=S.g[2];let x=S.g[3],m;m=g+(x^E&(y^x))+w[0]+3614090360&4294967295,g=E+(m<<7&4294967295|m>>>25),m=x+(y^g&(E^y))+w[1]+3905402710&4294967295,x=g+(m<<12&4294967295|m>>>20),m=y+(E^x&(g^E))+w[2]+606105819&4294967295,y=x+(m<<17&4294967295|m>>>15),m=E+(g^y&(x^g))+w[3]+3250441966&4294967295,E=y+(m<<22&4294967295|m>>>10),m=g+(x^E&(y^x))+w[4]+4118548399&4294967295,g=E+(m<<7&4294967295|m>>>25),m=x+(y^g&(E^y))+w[5]+1200080426&4294967295,x=g+(m<<12&4294967295|m>>>20),m=y+(E^x&(g^E))+w[6]+2821735955&4294967295,y=x+(m<<17&4294967295|m>>>15),m=E+(g^y&(x^g))+w[7]+4249261313&4294967295,E=y+(m<<22&4294967295|m>>>10),m=g+(x^E&(y^x))+w[8]+1770035416&4294967295,g=E+(m<<7&4294967295|m>>>25),m=x+(y^g&(E^y))+w[9]+2336552879&4294967295,x=g+(m<<12&4294967295|m>>>20),m=y+(E^x&(g^E))+w[10]+4294925233&4294967295,y=x+(m<<17&4294967295|m>>>15),m=E+(g^y&(x^g))+w[11]+2304563134&4294967295,E=y+(m<<22&4294967295|m>>>10),m=g+(x^E&(y^x))+w[12]+1804603682&4294967295,g=E+(m<<7&4294967295|m>>>25),m=x+(y^g&(E^y))+w[13]+4254626195&4294967295,x=g+(m<<12&4294967295|m>>>20),m=y+(E^x&(g^E))+w[14]+2792965006&4294967295,y=x+(m<<17&4294967295|m>>>15),m=E+(g^y&(x^g))+w[15]+1236535329&4294967295,E=y+(m<<22&4294967295|m>>>10),m=g+(y^x&(E^y))+w[1]+4129170786&4294967295,g=E+(m<<5&4294967295|m>>>27),m=x+(E^y&(g^E))+w[6]+3225465664&4294967295,x=g+(m<<9&4294967295|m>>>23),m=y+(g^E&(x^g))+w[11]+643717713&4294967295,y=x+(m<<14&4294967295|m>>>18),m=E+(x^g&(y^x))+w[0]+3921069994&4294967295,E=y+(m<<20&4294967295|m>>>12),m=g+(y^x&(E^y))+w[5]+3593408605&4294967295,g=E+(m<<5&4294967295|m>>>27),m=x+(E^y&(g^E))+w[10]+38016083&4294967295,x=g+(m<<9&4294967295|m>>>23),m=y+(g^E&(x^g))+w[15]+3634488961&4294967295,y=x+(m<<14&4294967295|m>>>18),m=E+(x^g&(y^x))+w[4]+3889429448&4294967295,E=y+(m<<20&4294967295|m>>>12),m=g+(y^x&(E^y))+w[9]+568446438&4294967295,g=E+(m<<5&4294967295|m>>>27),m=x+(E^y&(g^E))+w[14]+3275163606&4294967295,x=g+(m<<9&4294967295|m>>>23),m=y+(g^E&(x^g))+w[3]+4107603335&4294967295,y=x+(m<<14&4294967295|m>>>18),m=E+(x^g&(y^x))+w[8]+1163531501&4294967295,E=y+(m<<20&4294967295|m>>>12),m=g+(y^x&(E^y))+w[13]+2850285829&4294967295,g=E+(m<<5&4294967295|m>>>27),m=x+(E^y&(g^E))+w[2]+4243563512&4294967295,x=g+(m<<9&4294967295|m>>>23),m=y+(g^E&(x^g))+w[7]+1735328473&4294967295,y=x+(m<<14&4294967295|m>>>18),m=E+(x^g&(y^x))+w[12]+2368359562&4294967295,E=y+(m<<20&4294967295|m>>>12),m=g+(E^y^x)+w[5]+4294588738&4294967295,g=E+(m<<4&4294967295|m>>>28),m=x+(g^E^y)+w[8]+2272392833&4294967295,x=g+(m<<11&4294967295|m>>>21),m=y+(x^g^E)+w[11]+1839030562&4294967295,y=x+(m<<16&4294967295|m>>>16),m=E+(y^x^g)+w[14]+4259657740&4294967295,E=y+(m<<23&4294967295|m>>>9),m=g+(E^y^x)+w[1]+2763975236&4294967295,g=E+(m<<4&4294967295|m>>>28),m=x+(g^E^y)+w[4]+1272893353&4294967295,x=g+(m<<11&4294967295|m>>>21),m=y+(x^g^E)+w[7]+4139469664&4294967295,y=x+(m<<16&4294967295|m>>>16),m=E+(y^x^g)+w[10]+3200236656&4294967295,E=y+(m<<23&4294967295|m>>>9),m=g+(E^y^x)+w[13]+681279174&4294967295,g=E+(m<<4&4294967295|m>>>28),m=x+(g^E^y)+w[0]+3936430074&4294967295,x=g+(m<<11&4294967295|m>>>21),m=y+(x^g^E)+w[3]+3572445317&4294967295,y=x+(m<<16&4294967295|m>>>16),m=E+(y^x^g)+w[6]+76029189&4294967295,E=y+(m<<23&4294967295|m>>>9),m=g+(E^y^x)+w[9]+3654602809&4294967295,g=E+(m<<4&4294967295|m>>>28),m=x+(g^E^y)+w[12]+3873151461&4294967295,x=g+(m<<11&4294967295|m>>>21),m=y+(x^g^E)+w[15]+530742520&4294967295,y=x+(m<<16&4294967295|m>>>16),m=E+(y^x^g)+w[2]+3299628645&4294967295,E=y+(m<<23&4294967295|m>>>9),m=g+(y^(E|~x))+w[0]+4096336452&4294967295,g=E+(m<<6&4294967295|m>>>26),m=x+(E^(g|~y))+w[7]+1126891415&4294967295,x=g+(m<<10&4294967295|m>>>22),m=y+(g^(x|~E))+w[14]+2878612391&4294967295,y=x+(m<<15&4294967295|m>>>17),m=E+(x^(y|~g))+w[5]+4237533241&4294967295,E=y+(m<<21&4294967295|m>>>11),m=g+(y^(E|~x))+w[12]+1700485571&4294967295,g=E+(m<<6&4294967295|m>>>26),m=x+(E^(g|~y))+w[3]+2399980690&4294967295,x=g+(m<<10&4294967295|m>>>22),m=y+(g^(x|~E))+w[10]+4293915773&4294967295,y=x+(m<<15&4294967295|m>>>17),m=E+(x^(y|~g))+w[1]+2240044497&4294967295,E=y+(m<<21&4294967295|m>>>11),m=g+(y^(E|~x))+w[8]+1873313359&4294967295,g=E+(m<<6&4294967295|m>>>26),m=x+(E^(g|~y))+w[15]+4264355552&4294967295,x=g+(m<<10&4294967295|m>>>22),m=y+(g^(x|~E))+w[6]+2734768916&4294967295,y=x+(m<<15&4294967295|m>>>17),m=E+(x^(y|~g))+w[13]+1309151649&4294967295,E=y+(m<<21&4294967295|m>>>11),m=g+(y^(E|~x))+w[4]+4149444226&4294967295,g=E+(m<<6&4294967295|m>>>26),m=x+(E^(g|~y))+w[11]+3174756917&4294967295,x=g+(m<<10&4294967295|m>>>22),m=y+(g^(x|~E))+w[2]+718787259&4294967295,y=x+(m<<15&4294967295|m>>>17),m=E+(x^(y|~g))+w[9]+3951481745&4294967295,S.g[0]=S.g[0]+g&4294967295,S.g[1]=S.g[1]+(y+(m<<21&4294967295|m>>>11))&4294967295,S.g[2]=S.g[2]+y&4294967295,S.g[3]=S.g[3]+x&4294967295}r.prototype.v=function(S,g){g===void 0&&(g=S.length);const E=g-this.blockSize,w=this.C;let y=this.h,x=0;for(;x<g;){if(y==0)for(;x<=E;)s(this,S,x),x+=this.blockSize;if(typeof S=="string"){for(;x<g;)if(w[y++]=S.charCodeAt(x++),y==this.blockSize){s(this,w),y=0;break}}else for(;x<g;)if(w[y++]=S[x++],y==this.blockSize){s(this,w),y=0;break}}this.h=y,this.o+=g},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var g=1;g<S.length-8;++g)S[g]=0;g=this.o*8;for(var E=S.length-8;E<S.length;++E)S[E]=g&255,g/=256;for(this.v(S),S=Array(16),g=0,E=0;E<4;++E)for(let w=0;w<32;w+=8)S[g++]=this.g[E]>>>w&255;return S};function i(S,g){var E=l;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=g(S)}function o(S,g){this.h=g;const E=[];let w=!0;for(let y=S.length-1;y>=0;y--){const x=S[y]|0;w&&x==g||(E[y]=x,w=!1)}this.g=E}var l={};function u(S){return-128<=S&&S<128?i(S,function(g){return new o([g|0],g<0?-1:0)}):new o([S|0],S<0?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return p;if(S<0)return V(h(-S));const g=[];let E=1;for(let w=0;S>=E;w++)g[w]=S/E|0,E*=4294967296;return new o(g,0)}function d(S,g){if(S.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(S.charAt(0)=="-")return V(d(S.substring(1),g));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=h(Math.pow(g,8));let w=p;for(let x=0;x<S.length;x+=8){var y=Math.min(8,S.length-x);const m=parseInt(S.substring(x,x+y),g);y<8?(y=h(Math.pow(g,y)),w=w.j(y).add(h(m))):(w=w.j(E),w=w.add(h(m)))}return w}var p=u(0),_=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-V(this).m();let S=0,g=1;for(let E=0;E<this.g.length;E++){const w=this.i(E);S+=(w>=0?w:4294967296+w)*g,g*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(P(this))return"-"+V(this).toString(S);const g=h(Math.pow(S,6));var E=this;let w="";for(;;){const y=D(E,g).g;E=A(E,y.j(g));let x=((E.g.length>0?E.g[0]:E.h)>>>0).toString(S);if(E=y,N(E))return x+w;for(;x.length<6;)x="0"+x;w=x+w}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(let g=0;g<S.g.length;g++)if(S.g[g]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=A(this,S),P(S)?-1:N(S)?0:1};function V(S){const g=S.g.length,E=[];for(let w=0;w<g;w++)E[w]=~S.g[w];return new o(E,~S.h).add(_)}t.abs=function(){return P(this)?V(this):this},t.add=function(S){const g=Math.max(this.g.length,S.g.length),E=[];let w=0;for(let y=0;y<=g;y++){let x=w+(this.i(y)&65535)+(S.i(y)&65535),m=(x>>>16)+(this.i(y)>>>16)+(S.i(y)>>>16);w=m>>>16,x&=65535,m&=65535,E[y]=m<<16|x}return new o(E,E[E.length-1]&-2147483648?-1:0)};function A(S,g){return S.add(V(g))}t.j=function(S){if(N(this)||N(S))return p;if(P(this))return P(S)?V(this).j(V(S)):V(V(this).j(S));if(P(S))return V(this.j(V(S)));if(this.l(R)<0&&S.l(R)<0)return h(this.m()*S.m());const g=this.g.length+S.g.length,E=[];for(var w=0;w<2*g;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(let y=0;y<S.g.length;y++){const x=this.i(w)>>>16,m=this.i(w)&65535,z=S.i(y)>>>16,G=S.i(y)&65535;E[2*w+2*y]+=m*G,I(E,2*w+2*y),E[2*w+2*y+1]+=x*G,I(E,2*w+2*y+1),E[2*w+2*y+1]+=m*z,I(E,2*w+2*y+1),E[2*w+2*y+2]+=x*z,I(E,2*w+2*y+2)}for(S=0;S<g;S++)E[S]=E[2*S+1]<<16|E[2*S];for(S=g;S<2*g;S++)E[S]=0;return new o(E,0)};function I(S,g){for(;(S[g]&65535)!=S[g];)S[g+1]+=S[g]>>>16,S[g]&=65535,g++}function C(S,g){this.g=S,this.h=g}function D(S,g){if(N(g))throw Error("division by zero");if(N(S))return new C(p,p);if(P(S))return g=D(V(S),g),new C(V(g.g),V(g.h));if(P(g))return g=D(S,V(g)),new C(V(g.g),g.h);if(S.g.length>30){if(P(S)||P(g))throw Error("slowDivide_ only works with positive integers.");for(var E=_,w=g;w.l(S)<=0;)E=F(E),w=F(w);var y=U(E,1),x=U(w,1);for(w=U(w,2),E=U(E,2);!N(w);){var m=x.add(w);m.l(S)<=0&&(y=y.add(E),x=m),w=U(w,1),E=U(E,1)}return g=A(S,y.j(g)),new C(y,g)}for(y=p;S.l(g)>=0;){for(E=Math.max(1,Math.floor(S.m()/g.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),x=h(E),m=x.j(g);P(m)||m.l(S)>0;)E-=w,x=h(E),m=x.j(g);N(x)&&(x=_),y=y.add(x),S=A(S,m)}return new C(y,S)}t.B=function(S){return D(this,S).h},t.and=function(S){const g=Math.max(this.g.length,S.g.length),E=[];for(let w=0;w<g;w++)E[w]=this.i(w)&S.i(w);return new o(E,this.h&S.h)},t.or=function(S){const g=Math.max(this.g.length,S.g.length),E=[];for(let w=0;w<g;w++)E[w]=this.i(w)|S.i(w);return new o(E,this.h|S.h)},t.xor=function(S){const g=Math.max(this.g.length,S.g.length),E=[];for(let w=0;w<g;w++)E[w]=this.i(w)^S.i(w);return new o(E,this.h^S.h)};function F(S){const g=S.g.length+1,E=[];for(let w=0;w<g;w++)E[w]=S.i(w)<<1|S.i(w-1)>>>31;return new o(E,S.h)}function U(S,g){const E=g>>5;g%=32;const w=S.g.length-E,y=[];for(let x=0;x<w;x++)y[x]=g>0?S.i(x+E)>>>g|S.i(x+E+1)<<32-g:S.i(x+E);return new o(y,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Qv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Jn=o}).apply(typeof dm<"u"?dm:typeof self<"u"?self:typeof window<"u"?window:{});var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gv,Ei,Kv,va,$c,Xv,Yv,Jv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ea=="object"&&ea];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var k=a[v];if(!(k in f))break e;f=f[k]}a=a[a.length-1],v=f[a],c=c(v),c!=v&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(c){var f=[],v;for(v in c)Object.prototype.hasOwnProperty.call(c,v)&&f.push([v,c[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function d(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,k,b){for(var q=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)q[ne-2]=arguments[ne];return c.prototype[k].apply(v,q)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function R(a){const c=a.length;if(c>0){const f=Array(c);for(let v=0;v<c;v++)f[v]=a[v];return f}return[]}function N(a,c){for(let v=1;v<arguments.length;v++){const k=arguments[v];var f=typeof k;if(f=f!="object"?f:k?Array.isArray(k)?"array":f:"null",f=="array"||f=="object"&&typeof k.length=="number"){f=a.length||0;const b=k.length||0;a.length=f+b;for(let q=0;q<b;q++)a[f+q]=k[q]}else a.push(k)}}class P{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function V(a){o.setTimeout(()=>{throw a},0)}function A(){var a=S;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class I{constructor(){this.h=this.g=null}add(c,f){const v=C.get();v.set(c,f),this.h?this.h.next=v:this.g=v,this.h=v}}var C=new P(()=>new D,a=>a.reset());class D{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,S=new I,g=()=>{const a=Promise.resolve(void 0);F=()=>{a.then(E)}};function E(){for(var a;a=A();){try{a.h.call(a.g)}catch(f){V(f)}var c=C;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}U=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function y(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}y.prototype.h=function(){this.defaultPrevented=!0};var x=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function m(a){return/^[\s\xa0]*$/.test(a)}function z(a,c){y.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}p(z,y),z.prototype.init=function(a,c){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),X=0;function te(a,c,f,v,k){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!v,this.ha=k,this.key=++X,this.da=this.fa=!1}function O(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $(a,c,f){for(const v in a)c.call(f,a[v],v,a)}function K(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function re(a){const c={};for(const f in a)c[f]=a[f];return c}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(a,c){let f,v;for(let k=1;k<arguments.length;k++){v=arguments[k];for(f in v)a[f]=v[f];for(let b=0;b<le.length;b++)f=le[b],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function ue(a){this.src=a,this.g={},this.h=0}ue.prototype.add=function(a,c,f,v,k){const b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);const q=Ae(a,c,v,k);return q>-1?(c=a[q],f||(c.fa=!1)):(c=new te(c,this.src,b,!!v,k),c.fa=f,a.push(c)),c};function Ie(a,c){const f=c.type;if(f in a.g){var v=a.g[f],k=Array.prototype.indexOf.call(v,c,void 0),b;(b=k>=0)&&Array.prototype.splice.call(v,k,1),b&&(O(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Ae(a,c,f,v){for(let k=0;k<a.length;++k){const b=a[k];if(!b.da&&b.listener==c&&b.capture==!!f&&b.ha==v)return k}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Vt={};function hn(a,c,f,v,k){if(Array.isArray(c)){for(let b=0;b<c.length;b++)hn(a,c[b],f,v,k);return null}return f=qf(f),a&&a[G]?a.J(c,f,l(v)?!!v.capture:!1,k):ye(a,c,f,!1,v,k)}function ye(a,c,f,v,k,b){if(!c)throw Error("Invalid event type");const q=l(k)?!!k.capture:!!k;let ne=zl(a);if(ne||(a[Oe]=ne=new ue(a)),f=ne.add(c,f,v,q,b),f.proxy)return f;if(v=de(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)x||(k=q),k===void 0&&(k=!1),a.addEventListener(c.toString(),v,k);else if(a.attachEvent)a.attachEvent(It(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function de(){function a(f){return c.call(a.src,a.listener,f)}const c=fr;return a}function ke(a,c,f,v,k){if(Array.isArray(c))for(var b=0;b<c.length;b++)ke(a,c[b],f,v,k);else v=l(v)?!!v.capture:!!v,f=qf(f),a&&a[G]?(a=a.i,b=String(c).toString(),b in a.g&&(c=a.g[b],f=Ae(c,f,v,k),f>-1&&(O(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[b],a.h--)))):a&&(a=zl(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Ae(c,f,v,k)),(f=a>-1?c[a]:null)&&ze(f))}function ze(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[G])Ie(c.i,a);else{var f=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(f,v,a.capture):c.detachEvent?c.detachEvent(It(f),v):c.addListener&&c.removeListener&&c.removeListener(v),(f=zl(c))?(Ie(f,a),f.h==0&&(f.src=null,c[Oe]=null)):O(a)}}}function It(a){return a in Vt?Vt[a]:Vt[a]="on"+a}function fr(a,c){if(a.da)a=!0;else{c=new z(c,this);const f=a.listener,v=a.ha||a.src;a.fa&&ze(a),a=f.call(v,c)}return a}function zl(a){return a=a[Oe],a instanceof ue?a:null}var $l="__closure_events_fn_"+(Math.random()*1e9>>>0);function qf(a){return typeof a=="function"?a:(a[$l]||(a[$l]=function(c){return a.handleEvent(c)}),a[$l])}function st(){w.call(this),this.i=new ue(this),this.M=this,this.G=null}p(st,w),st.prototype[G]=!0,st.prototype.removeEventListener=function(a,c,f,v){ke(this,a,c,f,v)};function ft(a,c){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new y(c,a);else if(c instanceof y)c.target=c.target||a;else{var k=c;c=new y(v,a),ie(c,k)}k=!0;let b,q;if(f)for(q=f.length-1;q>=0;q--)b=c.g=f[q],k=So(b,v,!0,c)&&k;if(b=c.g=a,k=So(b,v,!0,c)&&k,k=So(b,v,!1,c)&&k,f)for(q=0;q<f.length;q++)b=c.g=f[q],k=So(b,v,!1,c)&&k}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let v=0;v<f.length;v++)O(f[v]);delete a.g[c],a.h--}}this.G=null},st.prototype.J=function(a,c,f,v){return this.i.add(String(a),c,!1,f,v)},st.prototype.K=function(a,c,f,v){return this.i.add(String(a),c,!0,f,v)};function So(a,c,f,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let k=!0;for(let b=0;b<c.length;++b){const q=c[b];if(q&&!q.da&&q.capture==f){const ne=q.listener,$e=q.ha||q.src;q.fa&&Ie(a.i,q),k=ne.call($e,v)!==!1&&k}}return k&&!v.defaultPrevented}function k0(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Hf(a){a.g=k0(()=>{a.g=null,a.i&&(a.i=!1,Hf(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class V0 extends w{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Hf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ws(a){w.call(this),this.h=a,this.g={}}p(Ws,w);var Wf=[];function Qf(a){$(a.g,function(c,f){this.g.hasOwnProperty(f)&&ze(c)},a),a.g={}}Ws.prototype.N=function(){Ws.Z.N.call(this),Qf(this)},Ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ql=o.JSON.stringify,D0=o.JSON.parse,b0=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Gf(){}function Kf(){}var Qs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hl(){y.call(this,"d")}p(Hl,y);function Wl(){y.call(this,"c")}p(Wl,y);var dr={},Xf=null;function Ao(){return Xf=Xf||new st}dr.Ia="serverreachability";function Yf(a){y.call(this,dr.Ia,a)}p(Yf,y);function Gs(a){const c=Ao();ft(c,new Yf(c))}dr.STAT_EVENT="statevent";function Jf(a,c){y.call(this,dr.STAT_EVENT,a),this.stat=c}p(Jf,y);function dt(a){const c=Ao();ft(c,new Jf(c,a))}dr.Ja="timingevent";function Zf(a,c){y.call(this,dr.Ja,a),this.size=c}p(Zf,y);function Ks(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function Xs(){this.g=!0}Xs.prototype.ua=function(){this.g=!1};function M0(a,c,f,v,k,b){a.info(function(){if(a.g)if(b){var q="",ne=b.split("&");for(let ge=0;ge<ne.length;ge++){var $e=ne[ge].split("=");if($e.length>1){const Qe=$e[0];$e=$e[1];const Yt=Qe.split("_");q=Yt.length>=2&&Yt[1]=="type"?q+(Qe+"="+$e+"&"):q+(Qe+"=redacted&")}}}else q=null;else q=b;return"XMLHTTP REQ ("+v+") [attempt "+k+"]: "+c+`
`+f+`
`+q})}function O0(a,c,f,v,k,b,q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+k+"]: "+c+`
`+f+`
`+b+" "+q})}function qr(a,c,f,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+j0(a,f)+(v?" "+v:"")})}function L0(a,c){a.info(function(){return"TIMEOUT: "+c})}Xs.prototype.info=function(){};function j0(a,c){if(!a.g)return c;if(!c)return null;try{const b=JSON.parse(c);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var f=b[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var k=v[0];if(k!="noop"&&k!="stop"&&k!="close")for(let q=1;q<v.length;q++)v[q]=""}}}}return ql(b)}catch{return c}}var Co={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ed={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},td;function Ql(){}p(Ql,Gf),Ql.prototype.g=function(){return new XMLHttpRequest},td=new Ql;function Ys(a){return encodeURIComponent(String(a))}function F0(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function Sn(a,c,f,v){this.j=a,this.i=c,this.l=f,this.S=v||1,this.V=new Ws(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nd}function nd(){this.i=null,this.g="",this.h=!1}var rd={},Gl={};function Kl(a,c,f){a.M=1,a.A=Po(Xt(c)),a.u=f,a.R=!0,sd(a,null)}function sd(a,c){a.F=Date.now(),Ro(a),a.B=Xt(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),yd(f.i,"t",v),a.C=0,f=a.j.L,a.h=new nd,a.g=Md(a.j,f?c:null,!a.u),a.P>0&&(a.O=new V0(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,v=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(Wf[0]=k.toString()),k=Wf);for(let b=0;b<k.length;b++){const q=hn(f,k[b],v||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=a.J?re(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Gs(),M0(a.i,a.v,a.B,a.l,a.S,a.u)}Sn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Rn(a)==3?c.j():this.Y(a)},Sn.prototype.Y=function(a){try{if(a==this.g)e:{const ne=Rn(this.g),$e=this.g.ya(),ge=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||Id(this.g)))){this.K||ne!=4||$e==7||($e==8||ge<=0?Gs(3):Gs(2)),Xl(this);var c=this.g.ca();this.X=c;var f=U0(this);if(this.o=c==200,O0(this.i,this.v,this.B,this.l,this.S,ne,c),this.o){if(this.U&&!this.L){t:{if(this.g){var v,k=this.g;if((v=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(v)){var b=v;break t}}b=null}if(a=b)qr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yl(this,a);else{this.o=!1,this.m=3,dt(12),pr(this),Js(this);break e}}if(this.R){a=!0;let Qe;for(;!this.K&&this.C<f.length;)if(Qe=B0(this,f),Qe==Gl){ne==4&&(this.m=4,dt(14),a=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==rd){this.m=4,dt(15),qr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else qr(this.i,this.l,Qe,null),Yl(this,Qe);if(id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||f.length!=0||this.h.h||(this.m=1,dt(16),a=!1),this.o=this.o&&a,!a)qr(this.i,this.l,f,"[Invalid Chunked Response]"),pr(this),Js(this);else if(f.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),iu(q),q.P=!0,dt(11))}}else qr(this.i,this.l,f,null),Yl(this,f);ne==4&&pr(this),this.o&&!this.K&&(ne==4?kd(this.j,this):(this.o=!1,Ro(this)))}else tE(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),pr(this),Js(this)}}}catch{}finally{}};function U0(a){if(!id(a))return a.g.la();const c=Id(a.g);if(c==="")return"";let f="";const v=c.length,k=Rn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return pr(a),Js(a),"";a.h.i=new o.TextDecoder}for(let b=0;b<v;b++)a.h.h=!0,f+=a.h.i.decode(c[b],{stream:!(k&&b==v-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function id(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function B0(a,c){var f=a.C,v=c.indexOf(`
`,f);return v==-1?Gl:(f=Number(c.substring(f,v)),isNaN(f)?rd:(v+=1,v+f>c.length?Gl:(c=c.slice(v,v+f),a.C=v+f,c)))}Sn.prototype.cancel=function(){this.K=!0,pr(this)};function Ro(a){a.T=Date.now()+a.H,od(a,a.H)}function od(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ks(h(a.aa,a),c)}function Xl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Sn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(L0(this.i,this.B),this.M!=2&&(Gs(),dt(17)),pr(this),this.m=2,Js(this)):od(this,this.T-a)};function Js(a){a.j.I==0||a.K||kd(a.j,a)}function pr(a){Xl(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,Qf(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function Yl(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||Jl(f.h,a))){if(!a.L&&Jl(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var k=v;if(k[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)bo(f),Vo(f);else break e;su(f),dt(18)}}else f.xa=k[1],0<f.xa-f.K&&k[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ks(h(f.Va,f),6e3));ud(f.h)<=1&&f.ta&&(f.ta=void 0)}else gr(f,11)}else if((a.L||f.g==a)&&bo(f),!m(c))for(k=f.Ba.g.parse(c),c=0;c<k.length;c++){let ge=k[c];const Qe=ge[0];if(!(Qe<=f.K))if(f.K=Qe,ge=ge[1],f.I==2)if(ge[0]=="c"){f.M=ge[1],f.ba=ge[2];const Yt=ge[3];Yt!=null&&(f.ka=Yt,f.j.info("VER="+f.ka));const yr=ge[4];yr!=null&&(f.za=yr,f.j.info("SVER="+f.za));const Pn=ge[5];Pn!=null&&typeof Pn=="number"&&Pn>0&&(v=1.5*Pn,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Nn=a.g;if(Nn){const Oo=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var b=v.h;b.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Zl(b,b.h),b.h=null))}if(v.G){const ou=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ou&&(v.wa=ou,Ee(v.J,v.G,ou))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var q=a;if(v.na=bd(v,v.L?v.ba:null,v.W),q.L){cd(v.h,q);var ne=q,$e=v.O;$e&&(ne.H=$e),ne.D&&(Xl(ne),Ro(ne)),v.g=q}else Pd(v);f.i.length>0&&Do(f)}else ge[0]!="stop"&&ge[0]!="close"||gr(f,7);else f.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?gr(f,7):ru(f):ge[0]!="noop"&&f.l&&f.l.qa(ge),f.A=0)}}Gs(4)}catch{}}var z0=class{constructor(a,c){this.g=a,this.map=c}};function ad(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ld(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ud(a){return a.h?1:a.g?a.g.size:0}function Jl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Zl(a,c){a.g?a.g.add(c):a.h=c}function cd(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}ad.prototype.cancel=function(){if(this.i=hd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hd(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return R(a.i)}var fd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $0(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let k,b=null;v>=0?(k=a[f].substring(0,v),b=a[f].substring(v+1)):k=a[f],c(k,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function An(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof An?(this.l=a.l,Zs(this,a.j),this.o=a.o,this.g=a.g,ei(this,a.u),this.h=a.h,eu(this,vd(a.i)),this.m=a.m):a&&(c=String(a).match(fd))?(this.l=!1,Zs(this,c[1]||"",!0),this.o=ti(c[2]||""),this.g=ti(c[3]||"",!0),ei(this,c[4]),this.h=ti(c[5]||"",!0),eu(this,c[6]||"",!0),this.m=ti(c[7]||"")):(this.l=!1,this.i=new ri(null,this.l))}An.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(ni(c,dd,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ni(c,dd,!0),"@"),a.push(Ys(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ni(f,f.charAt(0)=="/"?W0:H0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ni(f,G0)),a.join("")},An.prototype.resolve=function(a){const c=Xt(this);let f=!!a.j;f?Zs(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var v=a.h;if(f)ei(c,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var k=c.h.lastIndexOf("/");k!=-1&&(v=c.h.slice(0,k+1)+v)}if(k=v,k==".."||k==".")v="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){v=k.lastIndexOf("/",0)==0,k=k.split("/");const b=[];for(let q=0;q<k.length;){const ne=k[q++];ne=="."?v&&q==k.length&&b.push(""):ne==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),v&&q==k.length&&b.push("")):(b.push(ne),v=!0)}v=b.join("/")}else v=k}return f?c.h=v:f=a.i.toString()!=="",f?eu(c,vd(a.i)):f=!!a.m,f&&(c.m=a.m),c};function Xt(a){return new An(a)}function Zs(a,c,f){a.j=f?ti(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ei(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function eu(a,c,f){c instanceof ri?(a.i=c,K0(a.i,a.l)):(f||(c=ni(c,Q0)),a.i=new ri(c,a.l))}function Ee(a,c,f){a.i.set(c,f)}function Po(a){return Ee(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ti(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ni(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,q0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function q0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dd=/[#\/\?@]/g,H0=/[#\?:]/g,W0=/[#\?]/g,Q0=/[#\?@]/g,G0=/#/g;function ri(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function mr(a){a.g||(a.g=new Map,a.h=0,a.i&&$0(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=ri.prototype,t.add=function(a,c){mr(this),this.i=null,a=Hr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function pd(a,c){mr(a),c=Hr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function md(a,c){return mr(a),c=Hr(a,c),a.g.has(c)}t.forEach=function(a,c){mr(this),this.g.forEach(function(f,v){f.forEach(function(k){a.call(c,k,v,this)},this)},this)};function gd(a,c){mr(a);let f=[];if(typeof c=="string")md(a,c)&&(f=f.concat(a.g.get(Hr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return mr(this),this.i=null,a=Hr(this,a),md(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=gd(this,a),a.length>0?String(a[0]):c):c};function yd(a,c,f){pd(a,c),f.length>0&&(a.i=null,a.g.set(Hr(a,c),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let v=0;v<c.length;v++){var f=c[v];const k=Ys(f);f=gd(this,f);for(let b=0;b<f.length;b++){let q=k;f[b]!==""&&(q+="="+Ys(f[b])),a.push(q)}}return this.i=a.join("&")};function vd(a){const c=new ri;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function Hr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function K0(a,c){c&&!a.j&&(mr(a),a.i=null,a.g.forEach(function(f,v){const k=v.toLowerCase();v!=k&&(pd(this,v),yd(this,k,f))},a)),a.j=c}function X0(a,c){const f=new Xs;if(o.Image){const v=new Image;v.onload=d(Cn,f,"TestLoadImage: loaded",!0,c,v),v.onerror=d(Cn,f,"TestLoadImage: error",!1,c,v),v.onabort=d(Cn,f,"TestLoadImage: abort",!1,c,v),v.ontimeout=d(Cn,f,"TestLoadImage: timeout",!1,c,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function Y0(a,c){const f=new Xs,v=new AbortController,k=setTimeout(()=>{v.abort(),Cn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(b=>{clearTimeout(k),b.ok?Cn(f,"TestPingServer: ok",!0,c):Cn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),Cn(f,"TestPingServer: error",!1,c)})}function Cn(a,c,f,v,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),v(f)}catch{}}function J0(){this.g=new b0}function tu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(tu,Gf),tu.prototype.g=function(){return new No(this.i,this.h)};function No(a,c){st.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(No,st),t=No.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,ii(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_d(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function _d(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?si(this):ii(this),this.readyState==3&&_d(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,si(this))},t.Na=function(a){this.g&&(this.response=a,si(this))},t.ga=function(){this.g&&si(this)};function si(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ii(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function ii(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(No.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ed(a){let c="";return $(a,function(f,v){c+=v,c+=":",c+=f,c+=`\r
`}),c}function nu(a,c,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Ed(f),typeof a=="string"?f!=null&&Ys(f):Ee(a,c,f))}function Ve(a){st.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ve,st);var Z0=/^https?$/i,eE=["POST","PUT"];t=Ve.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():td.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(b){wd(this,b);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var k in v)f.set(k,v[k]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const b of v.keys())f.set(b,v.get(b));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(eE,c,void 0)>=0)||v||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,q]of f)this.g.setRequestHeader(b,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){wd(this,b)}};function wd(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,Td(a),ko(a)}function Td(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ft(this,"complete"),ft(this,"abort"),ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ko(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xd(this):this.Xa())},t.Xa=function(){xd(this)};function xd(a){if(a.h&&typeof i<"u"){if(a.v&&Rn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ft(a,"readystatechange"),Rn(a)==4){a.h=!1;try{const b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var v;if(v=b===0){let q=String(a.D).match(fd)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),v=!Z0.test(q?q.toLowerCase():"")}f=v}if(f)ft(a,"complete"),ft(a,"success");else{a.o=6;try{var k=Rn(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",Td(a)}}finally{ko(a)}}}}function ko(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||ft(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Rn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),D0(c)}};function Id(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function tE(a){const c={};a=(a.g&&Rn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(m(a[v]))continue;var f=F0(a[v]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const b=c[k]||[];c[k]=b,b.push(f)}K(c,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oi(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Sd(a){this.za=0,this.i=[],this.j=new Xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oi("baseRetryDelayMs",5e3,a),this.Za=oi("retryDelaySeedMs",1e4,a),this.Ta=oi("forwardChannelMaxRetries",2,a),this.va=oi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ad(a&&a.concurrentRequestLimit),this.Ba=new J0,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sd.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,v){dt(0),this.W=a,this.H=c||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=bd(this,null,this.W),Do(this)};function ru(a){if(Ad(a),a.I==3){var c=a.V++,f=Xt(a.J);if(Ee(f,"SID",a.M),Ee(f,"RID",c),Ee(f,"TYPE","terminate"),ai(a,f),c=new Sn(a,a.j,c),c.M=2,c.A=Po(Xt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Md(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ro(c)}Dd(a)}function Vo(a){a.g&&(iu(a),a.g.cancel(),a.g=null)}function Ad(a){Vo(a),a.v&&(o.clearTimeout(a.v),a.v=null),bo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Do(a){if(!ld(a.h)&&!a.m){a.m=!0;var c=a.Ea;F||g(),U||(F(),U=!0),S.add(c,a),a.D=0}}function nE(a,c){return ud(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ks(h(a.Ea,a,c),Vd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new Sn(this,this.j,a);let b=this.o;if(this.U&&(b?(b=re(b),ie(b,this.U)):b=this.U),this.u!==null||this.R||(k.J=b,b=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Rd(this,k,c),f=Xt(this.J),Ee(f,"RID",a),Ee(f,"CVER",22),this.G&&Ee(f,"X-HTTP-Session-Id",this.G),ai(this,f),b&&(this.R?c="headers="+Ys(Ed(b))+"&"+c:this.u&&nu(f,this.u,b)),Zl(this.h,k),this.Ra&&Ee(f,"TYPE","init"),this.S?(Ee(f,"$req",c),Ee(f,"SID","null"),k.U=!0,Kl(k,f,null)):Kl(k,f,c),this.I=2}}else this.I==3&&(a?Cd(this,a):this.i.length==0||ld(this.h)||Cd(this))};function Cd(a,c){var f;c?f=c.l:f=a.V++;const v=Xt(a.J);Ee(v,"SID",a.M),Ee(v,"RID",f),Ee(v,"AID",a.K),ai(a,v),a.u&&a.o&&nu(v,a.u,a.o),f=new Sn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Rd(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Zl(a.h,f),Kl(f,v,c)}function ai(a,c){a.H&&$(a.H,function(f,v){Ee(c,v,f)}),a.l&&$({},function(f,v){Ee(c,v,f)})}function Rd(a,c,f){f=Math.min(a.i.length,f);const v=a.l?h(a.l.Ka,a.l,a):null;e:{var k=a.i;let ne=-1;for(;;){const $e=["count="+f];ne==-1?f>0?(ne=k[0].g,$e.push("ofs="+ne)):ne=0:$e.push("ofs="+ne);let ge=!0;for(let Qe=0;Qe<f;Qe++){var b=k[Qe].g;const Yt=k[Qe].map;if(b-=ne,b<0)ne=Math.max(0,k[Qe].g-100),ge=!1;else try{b="req"+b+"_"||"";try{var q=Yt instanceof Map?Yt:Object.entries(Yt);for(const[yr,Pn]of q){let Nn=Pn;l(Pn)&&(Nn=ql(Pn)),$e.push(b+yr+"="+encodeURIComponent(Nn))}}catch(yr){throw $e.push(b+"type="+encodeURIComponent("_badmap")),yr}}catch{v&&v(Yt)}}if(ge){q=$e.join("&");break e}}q=void 0}return a=a.i.splice(0,f),c.G=a,q}function Pd(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;F||g(),U||(F(),U=!0),S.add(c,a),a.A=0}}function su(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ks(h(a.Da,a),Vd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Nd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ks(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Vo(this),Nd(this))};function iu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Nd(a){a.g=new Sn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Xt(a.na);Ee(c,"RID","rpc"),Ee(c,"SID",a.M),Ee(c,"AID",a.K),Ee(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ee(c,"TO",a.ia),Ee(c,"TYPE","xmlhttp"),ai(a,c),a.u&&a.o&&nu(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Po(Xt(c)),f.u=null,f.R=!0,sd(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Vo(this),su(this),dt(19))};function bo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function kd(a,c){var f=null;if(a.g==c){bo(a),iu(a),a.g=null;var v=2}else if(Jl(a.h,c))f=c.G,cd(a.h,c),v=1;else return;if(a.I!=0){if(c.o)if(v==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var k=a.D;v=Ao(),ft(v,new Zf(v,f)),Do(a)}else Pd(a);else if(k=c.m,k==3||k==0&&c.X>0||!(v==1&&nE(a,c)||v==2&&su(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),k){case 1:gr(a,5);break;case 4:gr(a,10);break;case 3:gr(a,6);break;default:gr(a,2)}}}function Vd(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function gr(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),v=a.Ua;const k=!v;v=new An(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zs(v,"https"),Po(v),k?X0(v.toString(),f):Y0(v.toString(),f)}else dt(2);a.I=0,a.l&&a.l.pa(c),Dd(a),Ad(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Dd(a){if(a.I=0,a.ja=[],a.l){const c=hd(a.h);(c.length!=0||a.i.length!=0)&&(N(a.ja,c),N(a.ja,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.oa()}}function bd(a,c,f){var v=f instanceof An?Xt(f):new An(f);if(v.g!="")c&&(v.g=c+"."+v.g),ei(v,v.u);else{var k=o.location;v=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;const b=new An(null);v&&Zs(b,v),c&&(b.g=c),k&&ei(b,k),f&&(b.h=f),v=b}return f=a.G,c=a.wa,f&&c&&Ee(v,f,c),Ee(v,"VER",a.ka),ai(a,v),v}function Md(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Ve(new tu({ab:f})):new Ve(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Od(){}t=Od.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(a,c){return new St(a,c)};function St(a,c){st.call(this),this.g=new Sd(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!m(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!m(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Wr(this)}p(St,st),St.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){ru(this.g)},St.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=ql(a),a=f);c.i.push(new z0(c.Ya++,a)),c.I==3&&Do(c)},St.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,St.Z.N.call(this)};function Ld(a){Hl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}p(Ld,Hl);function jd(){Wl.call(this),this.status=1}p(jd,Wl);function Wr(a){this.g=a}p(Wr,Od),Wr.prototype.ra=function(){ft(this.g,"a")},Wr.prototype.qa=function(a){ft(this.g,new Ld(a))},Wr.prototype.pa=function(a){ft(this.g,new jd)},Wr.prototype.oa=function(){ft(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Jv=function(){return new Mo},Yv=function(){return Ao()},Xv=dr,$c={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,va=Co,ed.COMPLETE="complete",Kv=ed,Kf.EventType=Qs,Qs.OPEN="a",Qs.CLOSE="b",Qs.ERROR="c",Qs.MESSAGE="d",st.prototype.listen=st.prototype.J,Ei=Kf,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,Gv=Ve}).apply(typeof ea<"u"?ea:typeof self<"u"?self:typeof window<"u"?window:{});const pm="@firebase/firestore",mm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Us="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Bv("@firebase/firestore");function Gr(){return Dr.logLevel}function W(t,...e){if(Dr.logLevel<=he.DEBUG){const n=e.map(of);Dr.debug(`Firestore (${Us}): ${t}`,...n)}}function Tn(t,...e){if(Dr.logLevel<=he.ERROR){const n=e.map(of);Dr.error(`Firestore (${Us}): ${t}`,...n)}}function Ps(t,...e){if(Dr.logLevel<=he.WARN){const n=e.map(of);Dr.warn(`Firestore (${Us}): ${t}`,...n)}}function of(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Zv(t,r,n)}function Zv(t,e,n){let r=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tn(r),new Error(r)}function pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Zv(e,s,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class xI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class II{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new e_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new lt(e)}}class SI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new SI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,iI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=RI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function qc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ju(s)===ju(i)?oe(s,i):ju(s)?1:-1}return oe(t.length,e.length)}const PI=55296,NI=57343;function ju(t){const e=t.charCodeAt(0);return e>=PI&&e<=NI}function Ns(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="__name__";class en{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return en.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof en?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=en.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=en.isNumericId(e),s=en.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?en.extractNumericId(e).compare(en.extractNumericId(n)):qc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jn.fromString(e.substring(4,e.length-2))}}class ve extends en{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const kI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends en{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return kI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ym}static keyField(){return new et([ym])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new H(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(ve.fromString(e))}static fromName(e){return new Y(ve.fromString(e).popFirst(5))}static empty(){return new Y(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e,n){if(!n)throw new H(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VI(t,e,n,r){if(e===!0&&r===!0)throw new H(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vm(t){if(!Y.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _m(t){if(Y.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function n_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function so(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cl(t);throw new H(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e){const n={typeString:t};return e&&(n.value=e),n}function Eo(t,e){if(!n_(t))throw new H(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new H(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=-62135596800,wm=1e6;class Te{static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wm);return new Te(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Em)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wm}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eo(e,Te._jsonSchema))return new Te(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Em;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:Ue("string",Te._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Te(0,0))}static max(){return new Z(new Te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=-1;function DI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new rr(s,Y.empty(),e)}function bI(t){return new rr(t.readTime,t.key,io)}class rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(Z.min(),Y.empty(),io)}static max(){return new rr(Z.max(),Y.empty(),io)}}function MI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==OI)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function jI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=-1;function Pl(t){return t==null}function Za(t){return t===0&&1/t==-1/0}function FI(t){return typeof t=="number"&&Number.isInteger(t)&&!Za(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="";function UI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Tm(e)),e=BI(t.get(n),e);return Tm(e)}function BI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case r_:n+="";break;default:n+=i}}return n}function Tm(t){return t+r_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function s_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ta(this.root,e,this.comparator,!0)}}class ta{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Im(this.data.getIterator())}getIteratorFrom(e){return new Im(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new We(this.comparator);return n.data=e,n}}class Im{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new We(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new i_("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const zI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(t){if(pe(!!t,39018),typeof t=="string"){let e=0;const n=zI.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ir(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="server_timestamp",a_="__type__",l_="__previous_value__",u_="__local_write_time__";function uf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a_])==null?void 0:r.stringValue)===o_}function Nl(t){const e=t.mapValue.fields[l_];return uf(e)?Nl(e):e}function oo(t){const e=sr(t.mapValue.fields[u_].timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,r,s,i,o,l,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const el="(default)";class ao{constructor(e,n){this.projectId=e,this.database=n||el}static empty(){return new ao("","")}get isDefaultDatabase(){return this.database===el}isEqual(e){return e instanceof ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="__type__",qI="__max__",na={mapValue:{}},h_="__vector__",tl="value";function or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uf(t)?4:WI(t)?9007199254740991:HI(t)?10:11:J(28295,{value:t})}function cn(t,e){if(t===e)return!0;const n=or(t);if(n!==or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oo(t).isEqual(oo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=sr(s.timestampValue),l=sr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ir(s.bytesValue).isEqual(ir(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return be(s.geoPointValue.latitude)===be(i.geoPointValue.latitude)&&be(s.geoPointValue.longitude)===be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return be(s.integerValue)===be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=be(s.doubleValue),l=be(i.doubleValue);return o===l?Za(o)===Za(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(xm(o)!==xm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!cn(o[u],l[u])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function lo(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function ks(t,e){if(t===e)return 0;const n=or(t),r=or(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=be(i.integerValue||i.doubleValue),u=be(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Sm(t.timestampValue,e.timestampValue);case 4:return Sm(oo(t),oo(e));case 5:return qc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ir(i),u=ir(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=oe(l[h],u[h]);if(d!==0)return d}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(be(i.latitude),be(o.latitude));return l!==0?l:oe(be(i.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Am(t.arrayValue,e.arrayValue);case 10:return function(i,o){var _,R,N,P;const l=i.fields||{},u=o.fields||{},h=(_=l[tl])==null?void 0:_.arrayValue,d=(R=u[tl])==null?void 0:R.arrayValue,p=oe(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((P=d==null?void 0:d.values)==null?void 0:P.length)||0);return p!==0?p:Am(h,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===na.mapValue&&o===na.mapValue)return 0;if(i===na.mapValue)return 1;if(o===na.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const _=qc(u[p],d[p]);if(_!==0)return _;const R=ks(l[u[p]],h[d[p]]);if(R!==0)return R}return oe(u.length,d.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function Sm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=sr(t),r=sr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function Am(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ks(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Vs(t){return Hc(t)}function Hc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=sr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ir(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Hc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Hc(n.fields[o])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function _a(t){switch(or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nl(t);return e?16+_a(e):16;case 5:return 2*t.stringValue.length;case 6:return ir(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+_a(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Fr(r.fields,(i,o)=>{s+=i.length+_a(o)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function Cm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wc(t){return!!t&&"integerValue"in t}function cf(t){return!!t&&"arrayValue"in t}function Rm(t){return!!t&&"nullValue"in t}function Pm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ea(t){return!!t&&"mapValue"in t}function HI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c_])==null?void 0:r.stringValue)===h_}function Di(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Di(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Di(t.arrayValue.values[n]);return e}return{...t}}function WI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===qI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ea(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Di(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Di(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ea(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ea(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mt(Di(this.value))}}function f_(t){const e=[];return Fr(t.fields,(n,r)=>{const s=new et([n]);if(Ea(r)){const i=f_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ct(e,0,Z.min(),Z.min(),Z.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,Z.min(),Z.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,Z.min(),Z.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.position=e,this.inclusive=n}}function Nm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ks(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function km(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n="asc"){this.field=e,this.dir=n}}function QI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{}class Fe extends d_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new KI(e,n,r):n==="array-contains"?new JI(e,r):n==="in"?new ZI(e,r):n==="not-in"?new eS(e,r):n==="array-contains-any"?new tS(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XI(e,r):new YI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ks(n,this.value)):n!==null&&or(this.value)===or(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends d_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kt(e,n)}matches(e){return p_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function p_(t){return t.op==="and"}function m_(t){return GI(t)&&p_(t)}function GI(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function Qc(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Vs(t.value);if(m_(t))return t.filters.map(e=>Qc(e)).join(",");{const e=t.filters.map(n=>Qc(n)).join(",");return`${t.op}(${e})`}}function g_(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&cn(r.value,s.value)}(t,e):t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&g_(o,s.filters[l]),!0):!1}(t,e):void J(19439)}function y_(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Vs(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(y_).join(" ,")+"}"}(t):"Filter"}class KI extends Fe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class XI extends Fe{constructor(e,n){super(e,"in",n),this.keys=v_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class YI extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=v_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function v_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class JI extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cf(n)&&lo(n.arrayValue,this.value)}}class ZI extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lo(this.value.arrayValue,n)}}class eS extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lo(this.value.arrayValue,n)}}class tS extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Vm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new nS(t,e,n,r,s,i,o)}function hf(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vs(r)).join(",")),e.Te=n}return e.Te}function ff(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!g_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!km(t.startAt,e.startAt)&&km(t.endAt,e.endAt)}function Gc(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rS(t,e,n,r,s,i,o,l){return new $s(t,e,n,r,s,i,o,l)}function __(t){return new $s(t)}function Dm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function E_(t){return t.collectionGroup!==null}function bi(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new We(et.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new uo(i,r))}),n.has(et.keyField().canonicalString())||e.Ie.push(new uo(et.keyField(),r))}return e.Ie}function sn(t){const e=ee(t);return e.Ee||(e.Ee=sS(e,bi(t))),e.Ee}function sS(t,e){if(t.limitType==="F")return Vm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new uo(s.field,i)});const n=t.endAt?new nl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nl(t.startAt.position,t.startAt.inclusive):null;return Vm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kc(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xc(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kl(t,e){return ff(sn(t),sn(e))&&t.limitType===e.limitType}function w_(t){return`${hf(sn(t))}|lt:${t.limitType}`}function Kr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>y_(s)).join(", ")}]`),Pl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Vs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Vs(s)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Vl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Nm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,bi(r),s)||r.endAt&&!function(o,l,u){const h=Nm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,bi(r),s))}(t,e)}function iS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function T_(t){return(e,n)=>{let r=!1;for(const s of bi(t)){const i=oS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function oS(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?ks(u,h):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return s_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new Ne(Y.comparator);function xn(){return aS}const x_=new Ne(Y.comparator);function wi(...t){let e=x_;for(const n of t)e=e.insert(n.key,n);return e}function I_(t){let e=x_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return Mi()}function S_(){return Mi()}function Mi(){return new Ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const lS=new Ne(Y.comparator),uS=new We(Y.comparator);function ae(...t){let e=uS;for(const n of t)e=e.add(n);return e}const cS=new We(oe);function hS(){return cS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Za(e)?"-0":e}}function A_(t){return{integerValue:""+t}}function fS(t,e){return FI(e)?A_(e):df(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this._=void 0}}function dS(t,e,n){return t instanceof co?function(s,i){const o={fields:{[a_]:{stringValue:o_},[u_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&uf(i)&&(i=Nl(i)),i&&(o.fields[l_]=i),{mapValue:o}}(n,e):t instanceof ho?R_(t,e):t instanceof fo?P_(t,e):function(s,i){const o=C_(s,i),l=bm(o)+bm(s.Ae);return Wc(o)&&Wc(s.Ae)?A_(l):df(s.serializer,l)}(t,e)}function pS(t,e,n){return t instanceof ho?R_(t,e):t instanceof fo?P_(t,e):n}function C_(t,e){return t instanceof rl?function(r){return Wc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class co extends Dl{}class ho extends Dl{constructor(e){super(),this.elements=e}}function R_(t,e){const n=N_(e);for(const r of t.elements)n.some(s=>cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class fo extends Dl{constructor(e){super(),this.elements=e}}function P_(t,e){let n=N_(e);for(const r of t.elements)n=n.filter(s=>!cn(s,r));return{arrayValue:{values:n}}}class rl extends Dl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bm(t){return be(t.integerValue||t.doubleValue)}function N_(t){return cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.field=e,this.transform=n}}function gS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ho&&s instanceof ho||r instanceof fo&&s instanceof fo?Ns(r.elements,s.elements,cn):r instanceof rl&&s instanceof rl?cn(r.Ae,s.Ae):r instanceof co&&s instanceof co}(t.transform,e.transform)}class yS{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bl{}function k_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pf(t.key,on.none()):new wo(t.key,t.data,on.none());{const n=t.data,r=Mt.empty();let s=new We(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Br(t.key,r,new Ht(s.toArray()),on.none())}}function vS(t,e,n){t instanceof wo?function(s,i,o){const l=s.value.clone(),u=Om(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Br?function(s,i,o){if(!wa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Om(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(V_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Oi(t,e,n,r){return t instanceof wo?function(i,o,l,u){if(!wa(i.precondition,o))return l;const h=i.value.clone(),d=Lm(i.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Br?function(i,o,l,u){if(!wa(i.precondition,o))return l;const h=Lm(i.fieldTransforms,u,o),d=o.data;return d.setAll(V_(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return wa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function _S(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=C_(r.transform,s||null);i!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,i))}return n||null}function Mm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ns(r,s,(i,o)=>gS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wo extends bl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Br extends bl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function V_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Om(t,e,n){const r=new Map;pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,pS(o,l,n[s]))}return r}function Lm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,dS(i,o,e))}return r}class pf extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ES extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=S_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=k_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>Mm(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>Mm(n,r))}}class mf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return lS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ce;function IS(t){switch(t){case L.OK:return J(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function D_(t){if(t===void 0)return Tn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Le.OK:return L.OK;case Le.CANCELLED:return L.CANCELLED;case Le.UNKNOWN:return L.UNKNOWN;case Le.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Le.INTERNAL:return L.INTERNAL;case Le.UNAVAILABLE:return L.UNAVAILABLE;case Le.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Le.NOT_FOUND:return L.NOT_FOUND;case Le.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Le.ABORTED:return L.ABORTED;case Le.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Le.DATA_LOSS:return L.DATA_LOSS;default:return J(39323,{code:t})}}(ce=Le||(Le={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new Jn([4294967295,4294967295],0);function jm(t){const e=SS().encode(t),n=new Qv;return n.update(e),new Uint8Array(n.digest())}function Fm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Jn([n,r],0),new Jn([s,i],0)]}class gf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ti(`Invalid padding: ${n}`);if(r<0)throw new Ti(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ti(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ti(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jn.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Jn.fromNumber(r)));return s.compare(AS)===1&&(s=new Jn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jm(e),[r,s]=Fm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new gf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=jm(e),[r,s]=Fm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ti extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,To.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ml(Z.min(),s,new Ne(oe),xn(),ae())}}class To{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new To(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class b_{constructor(e,n){this.targetId=e,this.Ce=n}}class M_{constructor(e,n,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Um{constructor(){this.ve=0,this.Fe=Bm(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ae(),n=ae(),r=ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new To(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Bm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CS{constructor(e){this.Ge=e,this.ze=new Map,this.je=xn(),this.Je=ra(),this.He=ra(),this.Ye=new Ne(oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Gc(i))if(r===0){const o=new Y(i.path);this.et(n,o,ct.newNoDocument(o,Z.min()))}else pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ir(r).toUint8Array()}catch(u){if(u instanceof i_)return Ps("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new gf(o,s,i)}catch(u){return Ps(u instanceof Ti?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Gc(l.target)){const u=new Y(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ct.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Ml(e,n,this.Ye,this.je,r);return this.je=xn(),this.Je=ra(),this.He=ra(),this.Ye=new Ne(oe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Um,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new We(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new We(oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Um),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ra(){return new Ne(Y.comparator)}function Bm(){return new Ne(Y.comparator)}const RS={asc:"ASCENDING",desc:"DESCENDING"},PS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NS={and:"AND",or:"OR"};class kS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yc(t,e){return t.useProto3Json||Pl(e)?e:{value:e}}function sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VS(t,e){return sl(t,e.toTimestamp())}function an(t){return pe(!!t,49232),Z.fromTimestamp(function(n){const r=sr(n);return new Te(r.seconds,r.nanos)}(t))}function yf(t,e){return Jc(t,e).canonicalString()}function Jc(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L_(t){const e=ve.fromString(t);return pe(z_(e),10190,{key:e.toString()}),e}function Zc(t,e){return yf(t.databaseId,e.path)}function Fu(t,e){const n=L_(e);if(n.get(1)!==t.databaseId.projectId)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(F_(n))}function j_(t,e){return yf(t.databaseId,e)}function DS(t){const e=L_(t);return e.length===4?ve.emptyPath():F_(e)}function eh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F_(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zm(t,e,n){return{name:Zc(t,e),fields:n.value.mapValue.fields}}function bS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:J(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(pe(d===void 0||typeof d=="string",58123),rt.fromBase64String(d||"")):(pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?L.UNKNOWN:D_(h.code);return new H(d,h.message||"")}(o);n=new M_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fu(t,r.document.name),i=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):Z.min(),l=new Mt({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(s,i,o,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Ta(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fu(t,r.document),i=r.readTime?an(r.readTime):Z.min(),o=ct.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ta([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fu(t,r.document),i=r.removedTargetIds||[];n=new Ta([],i,s,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new xS(s,i),l=r.targetId;n=new b_(l,o)}}return n}function MS(t,e){let n;if(e instanceof wo)n={update:zm(t,e.key,e.value)};else if(e instanceof pf)n={delete:Zc(t,e.key)};else if(e instanceof Br)n={update:zm(t,e.key,e.data),updateMask:qS(e.fieldMask)};else{if(!(e instanceof ES))return J(16599,{Vt:e.type});n={verify:Zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof co)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:VS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function OS(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?an(s.updateTime):an(i);return o.isEqual(Z.min())&&(o=an(i)),new yS(o,s.transformResults||[])}(n,e))):[]}function LS(t,e){return{documents:[j_(t,e.path)]}}function jS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=j_(t,s);const i=function(h){if(h.length!==0)return B_(Kt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(d=>function(_){return{field:Xr(_.field),direction:BS(_.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Yc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function FS(t){let e=DS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const _=U_(p);return _ instanceof Kt&&m_(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(_=>function(N){return new uo(Yr(N.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,Pl(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(p){const _=!!p.before,R=p.values||[];return new nl(R,_)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const _=!p.before,R=p.values||[];return new nl(R,_)}(n.endAt)),rS(e,s,o,i,l,"F",u,h)}function US(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yr(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Yr(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yr(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yr(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Yr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>U_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function BS(t){return RS[t]}function zS(t){return PS[t]}function $S(t){return NS[t]}function Xr(t){return{fieldPath:t.canonicalString()}}function Yr(t){return et.fromServerFormat(t.fieldPath)}function B_(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Pm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NAN"}};if(Rm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NOT_NAN"}};if(Rm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(n.field),op:zS(n.op),value:n.value}}}(t):t instanceof Kt?function(n){const r=n.getFilters().map(s=>B_(s));return r.length===1?r[0]:{compositeFilter:{op:$S(n.op),filters:r}}}(t):J(54877,{filter:t})}function qS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r,s,i=Z.min(),o=Z.min(),l=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.yt=e}}function WS(t){const e=FS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.Cn=new GS}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(rr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class GS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new We(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new We(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$_=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt($_,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ds(0)}static cr(){return new Ds(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="LruGarbageCollector",KS=1048576;function Hm([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class XS{constructor(e){this.Ir=e,this.buffer=new We(Hm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(qm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zs(n)?W(qm,"Ignoring IndexedDB error during garbage collection: ",n):await Bs(n)}await this.Vr(3e5)})}}class JS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Rl.ce);const r=new XS(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve($m)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$m):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Gr()<=he.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function ZS(t,e){return new JS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.changes=new Ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Oi(r.mutation,s,Ht.empty(),Te.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=xn();const o=Mi(),l=function(){return Mi()}();return n.forEach((u,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof Br)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Oi(d.mutation,h,d.mutation.getFieldMask(),Te.now())):o.set(h.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>l.set(h,new tA(d,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Mi();let s=new Ne((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||Ht.empty();d=l.applyToLocalView(h,d),r.set(u,d);const p=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=S_();d.forEach(_=>{if(!i.has(_)){const R=k_(n.get(_),r.get(_));R!==null&&p.set(_,R),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(Sr());let l=io,u=i;return o.next(h=>j.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(_=>{u=u.insert(d,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ae())).next(d=>({batchId:l,changes:I_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wi();return this.indexManager.getCollectionParents(e,i).next(l=>j.forEach(l,u=>{const h=function(p,_){return new $s(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(d=>{d.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,ct.newInvalidDocument(d)))});let l=wi();return o.forEach((u,h)=>{const d=i.get(u);d!==void 0&&Oi(d.mutation,h,Ht.empty(),Te.now()),Vl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:an(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:WS(s.bundledQuery),readTime:an(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.overlays=new Ne(Y.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sr();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=Sr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=Sr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Sr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return j.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TS(n,r));let i=this.qr.get(n);i===void 0&&(i=ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Qr=new We(Ge.$r),this.Ur=new We(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new ve([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new ve([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ae();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new We(Ge.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wS(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?lf:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(oe);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new Y(i),0);let l=new We(oe);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},o),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.ri=e,this.docs=function(){return new Ne(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=xn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=xn();const o=n.path,l=new Y(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||MI(bI(d),r)<=0||(s.has(d.key)||Vl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ii(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lA(this)}getSize(e){return j.resolve(this.size)}}class lA extends eA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.persistence=e,this.si=new Ur(n=>hf(n),ff),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new vf,this.targetCount=0,this.ai=Ds.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ds(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rl(0),this.li=!1,this.li=!0,this.hi=new iA,this.referenceDelegate=e(this),this.Pi=new uA(this),this.indexManager=new QS,this.remoteDocumentCache=function(s){return new aA(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new HS(n),this.Ii=new rA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new oA(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new cA(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class cA extends LI{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Ri=new vf,this.Vi=null}static mi(e){return new _f(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const s=Y.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class il{constructor(e,n){this.persistence=e,this.pi=new Ur(r=>UI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=ZS(this,n)}static mi(e,n){return new il(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?j.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Z.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_a(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ef(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nx()?8:jI(ex())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new hA;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Gr()<=he.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Gr()<=he.DEBUG&&W("QueryEngine","Query:",Kr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Gr()<=he.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):j.resolve())}ys(e,n){if(Dm(n))return j.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xc(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,Xc(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,s){return Dm(n)||s.isEqual(Z.min())?j.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?j.resolve(null):(Gr()<=he.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kr(n)),this.vs(e,o,n,DI(s,io)).next(l=>l))})}Ds(e,n){let r=new We(T_(e));return n.forEach((s,i)=>{Vl(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Gr()<=he.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Kr(n)),this.ps.getDocumentsMatchingQuery(e,n,rr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="LocalStore",dA=3e8;class pA{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ne(oe),this.xs=new Ur(i=>hf(i),ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function mA(t,e,n,r){return new pA(t,e,n,r)}async function H_(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ae();for(const h of s){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function gA(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,_=p.keys();let R=j.resolve();return _.forEach(N=>{R=R.next(()=>d.getEntry(u,N)).next(P=>{const V=h.docVersions.get(N);pe(V!==null,48541),P.version.compareTo(V)<0&&(p.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),d.addEntry(P)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ae();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function W_(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function yA(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((d,p)=>{const _=s.get(p);if(!_)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,p)));let R=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?R=R.withResumeToken(rt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(d.resumeToken,r)),s=s.insert(p,R),function(P,V,A){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=dA?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(_,R,d)&&l.push(n.Pi.updateTargetData(i,R))});let u=xn(),h=ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(vA(i,o,e.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!r.isEqual(Z.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return j.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=s,i))}function vA(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=xn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W(wf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:s}})}function _A(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EA(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Un(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function th(t,e,n){const r=ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zs(o))throw o;W(wf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Wm(t,e,n){const r=ee(t);let s=Z.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const p=ee(u),_=p.xs.get(d);return _!==void 0?j.resolve(p.Ms.get(_)):p.Pi.getTargetData(h,d)}(r,o,sn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:ae())).next(l=>(wA(r,iS(e),l),{documents:l,Qs:i})))}function wA(t,e,n){let r=t.Os.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Qm{constructor(){this.activeTargetIds=hS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TA{constructor(){this.Mo=new Qm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Qm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="ConnectivityMonitor";class Km{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(Gm,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(Gm,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa=null;function nh(){return sa===null?sa=function(){return 268435456+Math.round(2147483648*Math.random())}():sa++,"0x"+sa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="RestConnection",IA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===el?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=nh(),l=this.zo(e,n.toUriEncodedString());W(Uu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(l),d=rf(h);return this.Jo(e,l,u,r,d).then(p=>(W(Uu,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ps(Uu,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Us}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=IA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class CA extends SA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=nh();return new Promise((l,u)=>{const h=new Gv;h.setWithCredentials(!0),h.listenOnce(Kv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case va.NO_ERROR:const p=h.getResponseJson();W(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case va.TIMEOUT:W(at,`RPC '${e}' ${o} timed out`),u(new H(L.DEADLINE_EXCEEDED,"Request time out"));break;case va.HTTP_ERROR:const _=h.getStatus();if(W(at,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const N=R==null?void 0:R.error;if(N&&N.status&&N.message){const P=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(I)>=0?I:L.UNKNOWN}(N.status);u(new H(P,N.message))}else u(new H(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(L.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{W(at,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);W(at,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",d,r,15)})}T_(e,n,r){const s=nh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jv(),l=Yv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");W(at,`Creating RPC '${e}' stream ${s}: ${d}`,u);const p=o.createWebChannel(d,u);this.I_(p);let _=!1,R=!1;const N=new AA({Yo:V=>{R?W(at,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(_||(W(at,`Opening RPC '${e}' stream ${s} transport.`),p.open(),_=!0),W(at,`RPC '${e}' stream ${s} sending:`,V),p.send(V))},Zo:()=>p.close()}),P=(V,A,I)=>{V.listen(A,C=>{try{I(C)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,Ei.EventType.OPEN,()=>{R||(W(at,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),P(p,Ei.EventType.CLOSE,()=>{R||(R=!0,W(at,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(p))}),P(p,Ei.EventType.ERROR,V=>{R||(R=!0,Ps(at,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),N.a_(new H(L.UNAVAILABLE,"The operation could not be completed")))}),P(p,Ei.EventType.MESSAGE,V=>{var A;if(!R){const I=V.data[0];pe(!!I,16349);const C=I,D=(C==null?void 0:C.error)||((A=C[0])==null?void 0:A.error);if(D){W(at,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let U=function(E){const w=Le[E];if(w!==void 0)return D_(w)}(F),S=D.message;U===void 0&&(U=L.INTERNAL,S="Unknown error status: "+F+" with message "+D.message),R=!0,N.a_(new H(U,S)),p.close()}else W(at,`RPC '${e}' stream ${s} received:`,I),N.u_(I)}}),P(l,Xv.STAT_EVENT,V=>{V.stat===$c.PROXY?W(at,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===$c.NOPROXY&&W(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return new kS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="PersistentStream";class G_{constructor(e,n,r,s,i,o,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Q_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new H(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(Xm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(Xm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RA extends G_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=bS(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?an(o.readTime):Z.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=eh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Gc(u)?{documents:LS(i,u)}:{query:jS(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=O_(i,o.resumeToken);const h=Yc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=sl(i,o.snapshotVersion.toTimestamp());const h=Yc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=US(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=eh(this.serializer),n.removeTarget=e,this.q_(n)}}class PA extends G_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=OS(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=eh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MS(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{}class kA extends NA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Jc(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(L.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Jc(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class VA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tn(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="RemoteStore";class DA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{zr(this)&&(W(br,"Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.Ea.add(4),await xo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Ll(h)}(this))})}),this.Ra=new VA(r,s)}}async function Ll(t){if(zr(t))for(const e of t.da)await e(!0)}async function xo(t){for(const e of t.da)await e(!1)}function K_(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sf(n)?If(n):qs(n).O_()&&xf(n,e))}function Tf(t,e){const n=ee(t),r=qs(n);n.Ia.delete(e),r.O_()&&X_(n,e),n.Ia.size===0&&(r.O_()?r.L_():zr(n)&&n.Ra.set("Unknown"))}function xf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).Y_(e)}function X_(t,e){t.Va.Ue(e),qs(t).Z_(e)}function If(t){t.Va=new CS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.Ra.ua()}function Sf(t){return zr(t)&&!qs(t).x_()&&t.Ia.size>0}function zr(t){return ee(t).Ea.size===0}function Y_(t){t.Va=void 0}async function bA(t){t.Ra.set("Online")}async function MA(t){t.Ia.forEach((e,n)=>{xf(t,e)})}async function OA(t,e){Y_(t),Sf(t)?(t.Ra.ha(e),If(t)):t.Ra.set("Unknown")}async function LA(t,e,n){if(t.Ra.set("Online"),e instanceof M_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){W(br,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(t,r)}else if(e instanceof Ta?t.Va.Ze(e):e instanceof b_?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const r=await W_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(rt.EMPTY_BYTE_STRING,d.snapshotVersion)),X_(i,u);const p=new Un(d.target,u,h,d.sequenceNumber);xf(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(br,"Failed to raise snapshot:",r),await ol(t,r)}}async function ol(t,e,n){if(!zs(e))throw e;t.Ea.add(1),await xo(t),t.Ra.set("Offline"),n||(n=()=>W_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(br,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ll(t)})}function J_(t,e){return e().catch(n=>ol(t,n,e))}async function jl(t){const e=ee(t),n=ar(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lf;for(;jA(e);)try{const s=await _A(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,FA(e,s)}catch(s){await ol(e,s)}Z_(e)&&e0(e)}function jA(t){return zr(t)&&t.Ta.length<10}function FA(t,e){t.Ta.push(e);const n=ar(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Z_(t){return zr(t)&&!ar(t).x_()&&t.Ta.length>0}function e0(t){ar(t).start()}async function UA(t){ar(t).ra()}async function BA(t){const e=ar(t);for(const n of t.Ta)e.ea(n.mutations)}async function zA(t,e,n){const r=t.Ta.shift(),s=mf.from(r,e,n);await J_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jl(t)}async function $A(t,e){e&&ar(t).X_&&await async function(r,s){if(function(o){return IS(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();ar(r).B_(),await J_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await jl(r)}}(t,e),Z_(t)&&e0(t)}async function Ym(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),W(br,"RemoteStore received new credentials");const r=zr(n);n.Ea.add(3),await xo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ll(n)}async function qA(t,e){const n=ee(t);e?(n.Ea.delete(2),await Ll(n)):e||(n.Ea.add(2),await xo(n),n.Ra.set("Unknown"))}function qs(t){return t.ma||(t.ma=function(n,r,s){const i=ee(n);return i.sa(),new RA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:bA.bind(null,t),t_:MA.bind(null,t),r_:OA.bind(null,t),H_:LA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Sf(t)?If(t):t.Ra.set("Unknown")):(await t.ma.stop(),Y_(t))})),t.ma}function ar(t){return t.fa||(t.fa=function(n,r,s){const i=ee(n);return i.sa(),new PA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:UA.bind(null,t),r_:$A.bind(null,t),ta:BA.bind(null,t),na:zA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await jl(t)):(await t.fa.stop(),t.Ta.length>0&&(W(br,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Af(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),zs(t))return new H(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{static emptySet(e){return new ys(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=wi(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.ga=new Ne(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class bs{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new bs(e,n,ys.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class WA{constructor(){this.queries=Zm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=Zm(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new H(L.ABORTED,"Firestore shutting down"))}}function Zm(){return new Ur(t=>w_(t),kl)}async function QA(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new HA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Cf(o,`Initialization of query '${Kr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Rf(n)}async function GA(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KA(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Rf(n)}function XA(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Rf(t){t.Ca.forEach(e=>{e.next()})}var rh,eg;(eg=rh||(rh={})).Ma="default",eg.Cache="cache";class YA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.key=e}}class n0{constructor(e){this.key=e}}class JA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ae(),this.mutatedKeys=ae(),this.eu=T_(e),this.tu=new ys(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Jm,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const _=s.get(d),R=Vl(this.query,p)?p:null,N=!!_&&this.mutatedKeys.has(_.key),P=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let V=!1;_&&R?_.data.isEqual(R.data)?N!==P&&(r.track({type:3,doc:R}),V=!0):this.su(_,R)||(r.track({type:2,doc:R}),V=!0,(u&&this.eu(R,u)>0||h&&this.eu(R,h)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),V=!0):_&&!R&&(r.track({type:1,doc:_}),V=!0,(u||h)&&(l=!0)),V&&(R?(o=o.add(R),i=P?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(R,N){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:V})}};return P(R)-P(N)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new bs(this.query,e.tu,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new n0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new t0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pf="SyncEngine";class ZA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eC{constructor(e){this.key=e,this.hu=!1}}class tC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ur(l=>w_(l),kl),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(Y.comparator),this.Au=new Map,this.Ru=new vf,this.Vu={},this.mu=new Map,this.fu=Ds.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nC(t,e,n=!0){const r=l0(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await r0(r,e,n,!0),s}async function rC(t,e){const n=l0(t);await r0(n,e,!0,!1)}async function r0(t,e,n,r){const s=await EA(t.localStore,sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await sC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&K_(t.remoteStore,s),l}async function sC(t,e,n,r,s){t.pu=(p,_,R)=>async function(P,V,A,I){let C=V.view.ru(A);C.Cs&&(C=await Wm(P.localStore,V.query,!1).then(({documents:S})=>V.view.ru(S,C)));const D=I&&I.targetChanges.get(V.targetId),F=I&&I.targetMismatches.get(V.targetId)!=null,U=V.view.applyChanges(C,P.isPrimaryClient,D,F);return ng(P,V.targetId,U.au),U.snapshot}(t,p,_,R);const i=await Wm(t.localStore,e,!0),o=new JA(e,i.Qs),l=o.ru(i.documents),u=To.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);ng(t,n,h.au);const d=new ZA(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function iC(t,e,n){const r=ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!kl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await th(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tf(r.remoteStore,s.targetId),sh(r,s.targetId)}).catch(Bs)):(sh(r,s.targetId),await th(r.localStore,s.targetId,!0))}async function oC(t,e){const n=ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tf(n.remoteStore,r.targetId))}async function aC(t,e,n){const r=pC(t);try{const s=await function(o,l){const u=ee(o),h=Te.now(),d=l.reduce((R,N)=>R.add(N.key),ae());let p,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=xn(),P=ae();return u.Ns.getEntries(R,d).next(V=>{N=V,N.forEach((A,I)=>{I.isValidDocument()||(P=P.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,N)).next(V=>{p=V;const A=[];for(const I of l){const C=_S(I,p.get(I.key).overlayedDocument);C!=null&&A.push(new Br(I.key,C,f_(C.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,A,l)}).next(V=>{_=V;const A=V.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(R,V.batchId,A)})}).then(()=>({batchId:_.batchId,changes:I_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ne(oe)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await Io(r,s.changes),await jl(r.remoteStore)}catch(s){const i=Cf(s,"Failed to persist write");n.reject(i)}}async function s0(t,e){const n=ee(t);try{const r=await yA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?pe(o.hu,14607):s.removedDocuments.size>0&&(pe(o.hu,42227),o.hu=!1))}),await Io(n,r,e)}catch(r){await Bs(r)}}function tg(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ee(o);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const _ of p.Sa)_.va(l)&&(h=!0)}),h&&Rf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lC(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ne(Y.comparator);o=o.insert(i,ct.newNoDocument(i,Z.min()));const l=ae().add(i),u=new Ml(Z.min(),new Map,new Ne(oe),o,l);await s0(r,u),r.du=r.du.remove(i),r.Au.delete(e),Nf(r)}else await th(r.localStore,e,!1).then(()=>sh(r,e,n)).catch(Bs)}async function uC(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await gA(n.localStore,e);o0(n,r,null),i0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Io(n,s)}catch(s){await Bs(s)}}async function cC(t,e,n){const r=ee(t);try{const s=await function(o,l){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(pe(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);o0(r,e,n),i0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Io(r,s)}catch(s){await Bs(s)}}function i0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function o0(t,e,n){const r=ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function sh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||a0(t,r)})}function a0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Tf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Nf(t))}function ng(t,e,n){for(const r of n)r instanceof t0?(t.Ru.addReference(r.key,e),hC(t,r)):r instanceof n0?(W(Pf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||a0(t,r.key)):J(19791,{wu:r})}function hC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(Pf,"New document in limbo: "+n),t.Eu.add(r),Nf(t))}function Nf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new eC(n)),t.du=t.du.insert(n,r),K_(t.remoteStore,new Un(sn(__(n.path)),r,"TargetPurposeLimboResolution",Rl.ce))}}async function Io(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Ef.As(u.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,h){const d=ee(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>j.forEach(h,_=>j.forEach(_.Es,R=>d.persistence.referenceDelegate.addReference(p,_.targetId,R)).next(()=>j.forEach(_.ds,R=>d.persistence.referenceDelegate.removeReference(p,_.targetId,R)))))}catch(p){if(!zs(p))throw p;W(wf,"Failed to update sequence numbers: "+p)}for(const p of h){const _=p.targetId;if(!p.fromCache){const R=d.Ms.get(_),N=R.snapshotVersion,P=R.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(_,P)}}}(r.localStore,i))}async function fC(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){W(Pf,"User change. New user:",e.toKey());const r=await H_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Io(n,r.Ls)}}function dC(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return ae().add(r.key);{let s=ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function l0(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=s0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lC.bind(null,e),e.Pu.H_=KA.bind(null,e.eventManager),e.Pu.yu=XA.bind(null,e.eventManager),e}function pC(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cC.bind(null,e),e}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ol(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return mA(this.persistence,new fA,e.initialUser,this.serializer)}Cu(e){return new q_(_f.mi,this.serializer)}Du(e){return new TA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class mC extends al{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pe(this.persistence.referenceDelegate instanceof il,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new q_(r=>il.mi(r,n),this.serializer)}}class ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fC.bind(null,this.syncEngine),await qA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WA}()}createDatastore(e){const n=Ol(e.databaseInfo.databaseId),r=function(i){return new CA(i)}(e.databaseInfo);return function(i,o,l,u){return new kA(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new DA(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>tg(this.syncEngine,n,0),function(){return Km.v()?new Km:new xA}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,d){const p=new tC(s,i,o,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);W(br,"RemoteStore shutting down."),i.Ea.add(5),await xo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="FirestoreClient";class yC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=af.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(lr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(lr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zu(t,e){t.asyncQueue.verifyOperationInProgress(),W(lr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await H_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vC(t);W(lr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ym(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ym(e.remoteStore,s)),t._onlineComponents=e}async function vC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(lr,"Using user provided OfflineComponentProvider");try{await zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ps("Error using user provided cache. Falling back to memory cache: "+n),await zu(t,new al)}}else W(lr,"Using default OfflineComponentProvider"),await zu(t,new mC(void 0));return t._offlineComponents}async function u0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(lr,"Using user provided OnlineComponentProvider"),await rg(t,t._uninitializedComponentsProvider._online)):(W(lr,"Using default OnlineComponentProvider"),await rg(t,new ih))),t._onlineComponents}function _C(t){return u0(t).then(e=>e.syncEngine)}async function EC(t){const e=await u0(t),n=e.eventManager;return n.onListen=nC.bind(null,e.syncEngine),n.onUnlisten=iC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oC.bind(null,e.syncEngine),n}function wC(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const d=new gC({next:_=>{d.Nu(),o.enqueueAndForget(()=>GA(i,p)),_.fromCache&&u.source==="server"?h.reject(new H(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new YA(l,d,{includeMetadataChanges:!0,qa:!0});return QA(i,p)}(await EC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="firestore.googleapis.com",ig=!0;class og{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h0,this.ssl=ig}else this.host=e.host,this.ssl=e.ssl??ig;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KS)throw new H(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new og({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new og(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TI;switch(r.type){case"firstParty":return new AI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sg.get(n);r&&(W("ComponentProvider","Removing Datastore"),sg.delete(n),r.terminate())}(this),Promise.resolve()}}function TC(t,e,n,r={}){var h;t=so(t,Fl);const s=rf(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(KT(`https://${l}`),ZT("Firestore",!0)),i.host!==h0&&i.host!==l&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!Xa(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=lt.MOCK_USER;else{d=XT(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new H(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lt(_)}t._authCredentials=new xI(new e_(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $r(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Eo(n,Xe._jsonSchema))return new Xe(e,r||null,new Y(ve.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:Ue("string",Xe._jsonSchemaVersion),referencePath:Ue("string")};class er extends $r{constructor(e,n,r){super(e,n,__(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new Y(e))}withConverter(e){return new er(this.firestore,e,this._path)}}function Ul(t,e,...n){if(t=Rs(t),t_("collection","path",e),t instanceof Fl){const r=ve.fromString(e,...n);return _m(r),new er(t,null,r)}{if(!(t instanceof Xe||t instanceof er))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return _m(r),new er(t.firestore,null,r)}}function kf(t,e,...n){if(t=Rs(t),arguments.length===1&&(e=af.newId()),t_("doc","path",e),t instanceof Fl){const r=ve.fromString(e,...n);return vm(r),new Xe(t,null,new Y(r))}{if(!(t instanceof Xe||t instanceof er))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return vm(r),new Xe(t.firestore,t instanceof er?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="AsyncQueue";class lg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Q_(this,"async_queue_retry"),this._c=()=>{const r=Bu();r&&W(ag,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zs(e))throw e;W(ag,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Tn("INTERNAL UNHANDLED ERROR: ",ug(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Af.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:ug(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ug(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Bl extends Fl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new lg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lg(e),this._firestoreClient=void 0,await e}}}function xC(t,e){const n=typeof t=="object"?t:uI(),r=typeof t=="string"?t:el,s=sI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=QT("firestore");i&&TC(s,...i)}return s}function f0(t){if(t._terminated)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IC(t),t._firestoreClient}function IC(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,h,d){return new $I(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,c0(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ot(rt.fromBase64String(e))}catch(n){throw new H(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ot(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ot._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eo(e,Ot._jsonSchema))return Ot.fromBase64String(e.bytes)}}Ot._jsonSchemaVersion="firestore/bytes/1.0",Ot._jsonSchema={type:Ue("string",Ot._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(Eo(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:Ue("string",ln._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eo(e,un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new un(e.vectorValues);throw new H(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}un._jsonSchemaVersion="firestore/vectorValue/1.0",un._jsonSchema={type:Ue("string",un._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=/^__.*__$/;class AC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new wo(e,this.data,n,this.fieldTransforms)}}function d0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class bf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ll(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(d0(this.Ac)&&SC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ol(e)}Cc(e,n,r,s=!1){return new bf({Ac:e,methodName:n,Dc:r,path:et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function p0(t){const e=t._freezeSettings(),n=Ol(t._databaseId);return new CC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RC(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);y0("Data must be an object, but it was:",o,r);const l=m0(r,o);let u,h;if(i.merge)u=new Ht(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const _=NC(e,p,n);if(!o.contains(_))throw new H(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);VC(d,_)||d.push(_)}u=new Ht(d),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new AC(new Mt(l),u,h)}class Mf extends Df{_toFieldTransform(e){return new mS(e.path,new co)}isEqual(e){return e instanceof Mf}}function PC(t,e,n,r=!1){return Of(n,t.Cc(r?4:3,e))}function Of(t,e){if(g0(t=Rs(t)))return y0("Unsupported field value:",e,t),m0(t,e);if(t instanceof Df)return function(r,s){if(!d0(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Of(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Rs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Te.fromDate(r);return{timestampValue:sl(s.serializer,i)}}if(r instanceof Te){const i=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sl(s.serializer,i)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ot)return{bytesValue:O_(s.serializer,r._byteString)};if(r instanceof Xe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof un)return function(o,l){return{mapValue:{fields:{[c_]:{stringValue:h_},[tl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return df(l.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Cl(r)}`)}(t,e)}function m0(t,e){const n={};return s_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(r,s)=>{const i=Of(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function g0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof ln||t instanceof Ot||t instanceof Xe||t instanceof Df||t instanceof un)}function y0(t,e,n){if(!g0(n)||!n_(n)){const r=Cl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function NC(t,e,n){if((e=Rs(e))instanceof Vf)return e._internalPath;if(typeof e=="string")return v0(t,e);throw ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const kC=new RegExp("[~\\*/\\[\\]]");function v0(t,e,n){if(e.search(kC)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vf(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ll(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(L.INVALID_ARGUMENT,l+t+u)}function VC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DC extends _0{data(){return super.data()}}function Lf(t,e){return typeof e=="string"?v0(t,e):e instanceof Vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jf{}class E0 extends jf{}function w0(t,e,...n){let r=[];e instanceof jf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Uf).length,l=i.filter(u=>u instanceof Ff).length;if(o>1||o>0&&l>0)throw new H(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ff extends E0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ff(e,n,r)}_apply(e){const n=this._parse(e);return x0(e._query,n),new $r(e.firestore,e.converter,Kc(e._query,n))}_parse(e){const n=p0(e.firestore);return function(i,o,l,u,h,d,p){let _;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new H(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hg(p,d);const N=[];for(const P of p)N.push(cg(u,i,P));_={arrayValue:{values:N}}}else _=cg(u,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hg(p,d),_=PC(l,o,p,d==="in"||d==="not-in");return Fe.create(h,d,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Uf extends jf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)x0(o,u),o=Kc(o,u)}(e._query,n),new $r(e.firestore,e.converter,Kc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bf extends E0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Bf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uo(i,o)}(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new $s(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function T0(t,e="asc"){const n=e,r=Lf("orderBy",t);return Bf._create(r,n)}function cg(t,e,n){if(typeof(n=Rs(n))=="string"){if(n==="")throw new H(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E_(e)&&n.indexOf("/")!==-1)throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!Y.isDocumentKey(r))throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cm(t,new Y(r))}if(n instanceof Xe)return Cm(t,n._key);throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cl(n)}.`)}function hg(t,e){if(!Array.isArray(t)||t.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x0(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MC{convertValue(e,n="none"){switch(or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[tl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>be(o.doubleValue));return new un(n)}convertGeoPoint(e){return new ln(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oo(e));default:return null}}convertTimestamp(e){const n=sr(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);pe(z_(r),9688,{name:e});const s=new ao(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Tn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends _0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:Ue("string",vs._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class xa extends vs{data(e={}){return super.data(e)}}class _s{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ia(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xa(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new xa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ia(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new xa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ia(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:LC(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_s._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=af.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:Ue("string",_s._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class jC extends MC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ot(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function I0(t){t=so(t,$r);const e=so(t.firestore,Bl),n=f0(e),r=new jC(e);return bC(t._query),wC(n,t._query).then(s=>new _s(e,r,t,s))}function S0(t){return C0(so(t.firestore,Bl),[new pf(t._key,on.none())])}function A0(t,e){const n=so(t.firestore,Bl),r=kf(t),s=OC(t.converter,e);return C0(n,[RC(p0(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function C0(t,e){return function(r,s){const i=new Zn;return r.asyncQueue.enqueueAndForget(async()=>aC(await _C(r),s,i)),i.promise}(f0(t),e)}function R0(){return new Mf("serverTimestamp")}(function(e,n=!0){(function(s){Us=s})(lI),Ja(new no("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Bl(new II(r.getProvider("auth-internal")),new CI(o,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ao(h.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gs(pm,mm,e),gs(pm,mm,"esm2020")})();const FC={apiKey:"AIzaSyBUabFVbZsdvJxSNLz9E6uooOHmHAYztMQ",authDomain:"numerical-web-fe12a.firebaseapp.com",projectId:"numerical-web-fe12a",storageBucket:"numerical-web-fe12a.appspot.com",messagingSenderId:"450601861029",appId:"1:450601861029:web:8ad42bf62f220abb7a324c"},UC=qv(FC),Hs=xC(UC),zf="problems_bisection";async function BC(){const t=w0(Ul(Hs,zf),T0("createdAt","desc"));return(await I0(t)).docs.map(n=>({id:n.id,...n.data()}))}async function zC(t){return A0(Ul(Hs,zf),{...t,method:"bisection",createdAt:R0()})}async function $C(t){return S0(kf(Hs,zf,t))}function On(t){return t===null||Number.isNaN(t)?"-":isFinite(t)?Number(t).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(t)}function Es(t){if(!t||!t.trim())return null;let e=t.replace(/\^/g,"**");e=e.replace(/\bln\s*\(/gi,"log("),e=e.replace(/\bpi\b/gi,"PI"),e=e.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+e+"); }")}catch{return null}}function P0({func:t,xl:e=-5,xr:n=5,iterations:r=[],width:s=800,height:i=320,className:o=""}){const l=M.useRef(null);return M.useEffect(()=>{const u=l.current;if(!u)return;const h=u.getContext("2d"),d=u.width=s,p=u.height=i;h.clearRect(0,0,d,p),h.fillStyle="#061022",h.fillRect(0,0,d,p);const _=t||(w=>w),R=(n-e)*.2||1,N=e-R,P=n+R,V=500;let A=[],I=[],C=1/0,D=-1/0;for(let w=0;w<V;w++){const y=N+(P-N)*w/(V-1);let x;try{x=_(y)}catch{x=NaN}A.push(y),I.push(x),isFinite(x)&&(x<C&&(C=x),x>D&&(D=x))}C===1/0&&(C=-1,D=1);const F=(D-C)*.2||1;C-=F,D+=F;const U=w=>(w-N)/(P-N)*d,S=w=>p-(w-C)/(D-C)*p;if(h.strokeStyle="rgba(255,255,255,0.08)",C<0&&D>0){const w=S(0);h.beginPath(),h.moveTo(0,w),h.lineTo(d,w),h.stroke()}if(N<0&&P>0){const w=U(0);h.beginPath(),h.moveTo(w,0),h.lineTo(w,p),h.stroke()}h.beginPath(),h.lineWidth=2,h.strokeStyle="#8ab4ff";let g=!1;for(let w=0;w<V;w++){const y=A[w],x=I[w];if(!isFinite(x)){g=!1;continue}const m=U(y),z=S(x);g?h.lineTo(m,z):(h.moveTo(m,z),g=!0)}h.stroke(),r.forEach(w=>{const y=U(w.x1),x=S(w.fx1);h.beginPath(),h.arc(y,x,3,0,2*Math.PI),h.fillStyle="#f97316",h.fill()});const E=(w,y,x)=>{const m=U(w);h.beginPath(),h.moveTo(m,0),h.lineTo(m,p),h.strokeStyle=y,h.stroke(),h.fillStyle=y,h.font="12px sans-serif",h.fillText(x+"="+On(w),m+6,18)};if(E(e,"#22c55e","XL"),E(n,"#ef4444","XR"),r.length){const w=r[r.length-1],y=U(w.x1),x=S(w.fx1);h.beginPath(),h.arc(y,x,6,0,2*Math.PI),h.fillStyle="#fb923c",h.fill()}},[t,e,n,r,s,i]),T.jsx("canvas",{ref:l,width:s,height:i,className:o})}function N0({iterations:t=[]}){return!t||t.length===0?null:T.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:T.jsxs("table",{className:"w-full text-sm border-collapse",children:[T.jsx("thead",{children:T.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[T.jsx("th",{className:"p-2 text-right",children:"iter"}),T.jsx("th",{className:"p-2 text-right",children:"xl"}),T.jsx("th",{className:"p-2 text-right",children:"xr"}),T.jsx("th",{className:"p-2 text-right",children:"x1"}),T.jsx("th",{className:"p-2 text-right",children:"f(x1)"}),T.jsx("th",{className:"p-2 text-right",children:"error"})]})}),T.jsx("tbody",{children:t.map(e=>T.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[T.jsx("td",{className:"p-2 text-right",children:e.iter}),T.jsx("td",{className:"p-2 text-right",children:On(e.xl)}),T.jsx("td",{className:"p-2 text-right",children:On(e.xr)}),T.jsx("td",{className:"p-2 text-right",children:On(e.x1)}),T.jsx("td",{className:"p-2 text-right",children:On(e.fx1)}),T.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":On(e.error)})]},e.iter))})]})})}function qC(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[_,R]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,A]=M.useState("-"),[I,C]=M.useState([]),[D,F]=M.useState(new Set);function U(m,z,G,X,te){let O=m(z),$=m(G);if(!isFinite(O)||!isFinite($))return{error:"f(x) ไม่สามารถประเมินค่าได้"};if(O*$>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย"};const K=[];let re=null;for(let le=0;le<=te;le++){const ie=(z+G)/2,ue=m(ie);let Ie=null;if(re!==null){const Ae=Math.abs(ie)>1e-12?Math.abs(ie):1;Ie=Math.abs(ie-re)/Ae}if(K.push({iter:le,xl:z,xr:G,x1:ie,fx1:ue,error:Ie}),!isFinite(ue))return{error:"f(x1) คำนวณไม่ได้"};if(Math.abs(ue)===0||Ie!==null&&Ie<=X)return{root:ie,iterations:K,converged:!0};O*ue<0?(G=ie,$=ue):(z=ie,O=ue),re=ie}return{root:(z+G)/2,iterations:K,converged:!1}}async function S(){const m=await BC();C(m)}M.useEffect(()=>{S().catch(console.error)},[]);const g=async()=>{if(!t||!n||!s||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await zC({expr:t,xl:n,xr:s,tol:o,maxIter:u}),await S(),alert("บันทึกแล้ว!")}catch(m){console.error("บันทึกโจทย์ผิดพลาด:",m),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},E=m=>{e(m.expr??""),r(m.xl??""),i(m.xr??""),l(m.tol??""),h(m.maxIter??"")},w=async m=>{if(confirm(`ลบโจทย์นี้ไหม?
${m.expr}`))try{F(z=>new Set(z).add(m.id)),setTimeout(async()=>{await $C(m.id),await S(),F(z=>{const G=new Set(z);return G.delete(m.id),G})},480)}catch(z){console.error("ลบโจทย์ผิดพลาด:",z),alert("ลบไม่สำเร็จ"),F(G=>{const X=new Set(G);return X.delete(m.id),X})}},y=()=>{const m=Es(t);if(!m){R("สถานะ: สมการไม่ถูกต้อง");return}const z=parseFloat(n),G=parseFloat(s),X=parseFloat(o),te=parseInt(u,10);if(isNaN(z)||isNaN(G)){R("สถานะ: XL/XR ไม่ถูกต้อง");return}if(z>=G){R("สถานะ: ต้องมี XL < XR");return}if(!isFinite(X)||X<=0){R("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(te)||te<=0){R("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const O=U(m,z,G,X,te);if(O.error){R("สถานะ: "+O.error);return}p(O.iterations),R("สถานะ: เสร็จสิ้น "+(O.converged?"(converged)":"(ไม่ converged)")),A(Math.max(0,O.iterations.length-1)),P(On(O.root))},x=()=>{e(""),r(""),i(""),l(""),h(""),p([]),R("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-"),drawPlot(Es("x"),-5,5,[])};return T.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[T.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[T.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Bisection Method"}),T.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[T.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),T.jsx("input",{type:"text",value:t,onChange:m=>e(m.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),T.jsxs("div",{className:"flex gap-3 mb-3",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),T.jsx("input",{type:"number",value:n,onChange:m=>r(m.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),T.jsx("input",{type:"number",value:s,onChange:m=>i(m.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),T.jsxs("div",{className:"flex gap-3 mb-3",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),T.jsx("input",{type:"text",value:o,onChange:m=>l(m.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),T.jsx("input",{type:"number",value:u,onChange:m=>h(m.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),T.jsxs("div",{className:"flex gap-3 mb-4",children:[T.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),T.jsx("button",{onClick:x,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),T.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"💾 บันทึกโจทย์นี้"}),T.jsxs("div",{className:"text-sm mb-2",children:[T.jsx("div",{children:_}),T.jsxs("div",{children:["Iterations: ",V]}),T.jsxs("div",{children:["Root: ",N]})]}),I.length>0&&T.jsxs("div",{className:"mt-2",children:[T.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"📘 โจทย์ที่บันทึกไว้:"}),T.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:I.map(m=>T.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${D.has(m.id)?"fade-out":""}`,children:[T.jsx("span",{className:"truncate",children:m.expr}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>E(m),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),T.jsx("button",{onClick:()=>w(m),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},m.id))})]})]}),T.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),T.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:T.jsx(P0,{func:Es(t)||(m=>m),xl:parseFloat(n)||-5,xr:parseFloat(s)||5,iterations:d,className:"w-full h-72 rounded"})}),T.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = x1 ทุก iteration (วงใหญ่ = x1 สุดท้าย)"})]})]}),T.jsx(N0,{iterations:d}),T.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© Numerical Web — ฝีมือคุณ"})]})}const $f="problems_falseposition";async function HC(){const t=w0(Ul(Hs,$f),T0("createdAt","desc"));return(await I0(t)).docs.map(n=>({id:n.id,...n.data()}))}async function WC(t){return A0(Ul(Hs,$f),{...t,method:"falseposition",createdAt:R0()})}async function QC(t){return S0(kf(Hs,$f,t))}function GC(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[_,R]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,A]=M.useState("-"),[I,C]=M.useState([]),[D,F]=M.useState(new Set);function U(m,z,G,X,te){let O=m(z),$=m(G);if(!isFinite(O)||!isFinite($))return{error:"f(x) ไม่สามารถประเมินค่าได้"};if(O*$>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย"};const K=[];let re=null;for(let le=0;le<=te;le++){const ie=(z*$-G*O)/($-O),ue=m(ie);let Ie=null;if(re!==null){const Ae=Math.abs(ie)>1e-12?Math.abs(ie):1;Ie=Math.abs(ie-re)/Ae}if(K.push({iter:le,xl:z,xr:G,x1:ie,fx1:ue,error:Ie}),!isFinite(ue))return{error:"f(x1) คำนวณไม่ได้"};if(Math.abs(ue)===0||Ie!==null&&Ie<=X)return{root:ie,iterations:K,converged:!0};O*ue<0?(G=ie,$=ue):(z=ie,O=ue),re=ie}return{root:(z*$-G*O)/($-O),iterations:K,converged:!1}}async function S(){const m=await HC();C(m)}M.useEffect(()=>{S().catch(console.error)},[]);const g=async()=>{if(!t||!n||!s||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await WC({expr:t,xl:n,xr:s,tol:o,maxIter:u}),await S(),alert("บันทึกแล้ว!")}catch(m){console.error("บันทึกโจทย์ผิดพลาด:",m),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},E=m=>{e(m.expr??""),r(m.xl??""),i(m.xr??""),l(m.tol??""),h(m.maxIter??"")},w=async m=>{if(confirm(`ลบโจทย์นี้ไหม?
${m.expr}`))try{F(z=>new Set(z).add(m.id)),setTimeout(async()=>{await QC(m.id),await S(),F(z=>{const G=new Set(z);return G.delete(m.id),G})},480)}catch(z){console.error("ลบโจทย์ผิดพลาด:",z),alert("ลบไม่สำเร็จ"),F(G=>{const X=new Set(G);return X.delete(m.id),X})}},y=()=>{const m=Es(t);if(!m){R("สถานะ: สมการไม่ถูกต้อง");return}const z=parseFloat(n),G=parseFloat(s),X=parseFloat(o),te=parseInt(u,10);if(isNaN(z)||isNaN(G)){R("สถานะ: XL/XR ไม่ถูกต้อง");return}if(z>=G){R("สถานะ: ต้องมี XL < XR");return}if(!isFinite(X)||X<=0){R("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(te)||te<=0){R("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const O=U(m,z,G,X,te);if(O.error){R("สถานะ: "+O.error);return}p(O.iterations),R("สถานะ: เสร็จสิ้น "+(O.converged?"(converged)":"(ไม่ converged)")),A(Math.max(0,O.iterations.length-1)),P(On(O.root))},x=()=>{e(""),r(""),i(""),l(""),h(""),p([]),R("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-"),drawPlot(Es("x"),-5,5,[])};return T.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[T.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[T.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"False Position Method"}),T.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[T.jsxs("div",{className:"bg-[#161b22] rounded-lg p-4 border border-[#30363d] fade-in-delay1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),T.jsx("input",{type:"text",value:t,onChange:m=>e(m.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] mb-3 text-gray-200"}),T.jsxs("div",{className:"flex gap-3 mb-3",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),T.jsx("input",{type:"number",value:n,onChange:m=>r(m.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),T.jsx("input",{type:"number",value:s,onChange:m=>i(m.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]})]}),T.jsxs("div",{className:"flex gap-3 mb-4",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),T.jsx("input",{type:"text",value:o,onChange:m=>l(m.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),T.jsx("input",{type:"number",value:u,onChange:m=>h(m.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]})]}),T.jsxs("div",{className:"flex gap-3 mb-4",children:[T.jsx("button",{onClick:y,className:"btn-primary glow-btn flex-1 py-2 rounded font-semibold",children:"คำนวณ"}),T.jsx("button",{onClick:x,className:"btn-danger flex-1 border border-[#30363d] py-2 rounded",children:"รีเซ็ต"})]}),T.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"💾 บันทึกโจทย์นี้"}),T.jsxs("div",{className:"text-sm mb-2",children:[T.jsx("div",{children:_}),T.jsxs("div",{children:["Iterations: ",V]}),T.jsxs("div",{children:["Root: ",N]})]}),I.length>0&&T.jsxs("div",{className:"mt-2",children:[T.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"📘 โจทย์ที่บันทึกไว้:"}),T.jsx("ul",{className:"text-xs text-gray-300 bg-[#0d1117] rounded p-2 max-h-48 overflow-auto border border-[#30363d]",children:I.map(m=>T.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-[#30363d] py-1 ${D.has(m.id)?"fade-out":""}`,children:[T.jsx("span",{className:"truncate",children:m.expr}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>E(m),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),T.jsx("button",{onClick:()=>w(m),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},m.id))})]})]}),T.jsxs("div",{className:"bg-[#161b22] rounded-lg p-4 border border-[#30363d] fade-in-delay2",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),T.jsx("div",{className:"w-full h-72 bg-[#0d1117] rounded",children:T.jsx(P0,{func:Es(t)||(m=>m),xl:parseFloat(n)||-5,xr:parseFloat(s)||5,iterations:d,className:"w-full h-72 rounded"})}),T.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = X1 ทุก iteration (วงใหญ่ = X1 สุดท้าย)"})]})]}),T.jsx(N0,{iterations:d}),T.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© Numerical Web — ฝีมือคุณ"})]})}function KC(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState([]),[d,p]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[_,R]=M.useState("-"),[N,P]=M.useState("-"),[V,A]=M.useState(null),[I,C]=M.useState("");function D(y){if(!y||!y.trim())return null;let x=y.replace(/\^/g,"**");x=x.replace(/\bln\s*\(/gi,"log("),x=x.replace(/\bpi\b/gi,"PI"),x=x.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+x+"); }")}catch{return null}}function F(y){return y===null?"-":isFinite(y)?Number(y).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(y)}function U(y,x){const m=Math.cbrt(Number.EPSILON)*(Math.abs(x)+1),z=y(x+m),G=y(x-m);return(z-G)/(2*m)}function S(y,x){try{const m=U(y,x);return!isFinite(m)||m===0?.5:1/Math.max(1,Math.abs(m))}catch{return .5}}function g(y,x,m,z,G){let X=[],te=x;X.push({iter:0,x:te,error:null});for(let O=1;O<=z;O++){const $=te-G*y(te),K=Math.abs(($-te)/$);if(X.push({iter:O,x:$,error:K}),!isFinite($))return{error:"ค่า x ไม่เป็นจำนวนจำกัด (อาจ Diverge)"};if(K<=m)return{root:$,iterations:X,converged:!0,lambda:G};te=$}return{root:X[X.length-1].x,iterations:X,converged:!1,lambda:G}}M.useEffect(()=>{const y=D(t),x=parseFloat(n);if(!y||!isFinite(x)){A(null),C("");return}const m=S(y,x);A(m);const z=t.replace(/\s+/g," ").trim();C(`f2(x) = x - (${m.toPrecision(6)}) * [ ${z||"f(x)"} ]`)},[t,n]);const E=()=>{const y=D(t);if(!y){p("สถานะ: f(x) ไม่ถูกต้อง");return}const x=parseFloat(n),m=parseFloat(s),z=parseInt(o,10);if(!isFinite(x)){p("สถานะ: ค่าเริ่มต้น x0 ไม่ถูกต้อง");return}if(!isFinite(m)||m<=0){p("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(z)||z<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const G=S(y,x),X=g(y,x,m,z,G);if(X.error){p("สถานะ: "+X.error),h([]),P("-"),R("-");return}h(X.iterations),p("สถานะ: เสร็จสิ้น "+(X.converged?"(converged)":"(ไม่ converged)")),P(X.iterations.length),R(F(X.root)),A(X.lambda);const te=t.replace(/\s+/g," ").trim();C(`f2(x) = x - (${X.lambda.toPrecision(6)}) * [ ${te||"f(x)"} ]`)},w=()=>{e(""),r(""),i(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),R("-"),A(null),C("")};return T.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[T.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4",children:[T.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"One-Point Iteration"}),T.jsx("div",{className:"text-sm text-gray-400",children:"แปลง f(x) → f2(x) อัตโนมัติ"})]}),T.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x)"}),T.jsx("input",{type:"text",value:t,onChange:y=>e(y.target.value),placeholder:"เช่น x^3 + x - 1,  sin(x) - x/2,  ln(x) - 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),T.jsxs("div",{className:"flex gap-3 mb-3",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x0"}),T.jsx("input",{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"เช่น 0.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),T.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),T.jsx("input",{type:"number",value:o,onChange:y=>l(y.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),T.jsxs("div",{className:"rounded-md bg-slate-900 border border-slate-700 p-3 text-sm text-gray-300 mb-4",children:[T.jsx("div",{className:"font-semibold text-cyan-300 mb-1",children:"f2(x) ที่ใช้ในการคำนวณ"}),T.jsx("div",{className:"break-words",children:I||"— (กรอก f(x) และ x0 เพื่อดู f2(x))"}),V!==null&&T.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["λ (อัตโนมัติ) = ",F(V)]})]}),T.jsxs("div",{className:"flex gap-3 mb-4",children:[T.jsx("button",{onClick:E,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),T.jsx("button",{onClick:w,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),T.jsxs("div",{className:"text-sm mb-3",children:[T.jsx("div",{children:d}),T.jsxs("div",{children:["Iterations: ",N]}),T.jsxs("div",{children:["Root: ",_]})]}),u.length>0&&T.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:T.jsxs("table",{className:"w-full text-sm border-collapse",children:[T.jsx("thead",{children:T.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[T.jsx("th",{className:"p-2 text-right",children:"iter"}),T.jsx("th",{className:"p-2 text-right",children:"x"}),T.jsx("th",{className:"p-2 text-right",children:"error"})]})}),T.jsx("tbody",{children:u.map(y=>T.jsxs("tr",{className:"border-b border-slate-700",children:[T.jsx("td",{className:"p-2 text-right",children:y.iter}),T.jsx("td",{className:"p-2 text-right",children:F(y.x)}),T.jsx("td",{className:"p-2 text-right",children:y.error===null?"-":F(y.error)})]},y.iter))})]})}),T.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:[T.jsx("div",{children:"หมายเหตุ: ใช้หน่วยเรเดียนสำหรับ sin/cos/tan; เขียนคูณให้ชัด เช่น 2*x (ไม่ใช่ 2x)"}),T.jsx("div",{children:"ตัวอย่าง f(x): x^3 + x - 1,  e^(-x) - x,  ln(x) - 1,  sin(x) - x/2"})]})]})]})}function XC(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState([]),[d,p]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[_,R]=M.useState("-"),[N,P]=M.useState("-"),V=M.useRef(null);function A(g){if(!g||!g.trim())return null;let E=g.replace(/\^/g,"**");E=E.replace(/\bln\s*\(/gi,"log("),E=E.replace(/\bpi\b/gi,"PI"),E=E.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+E+"); }")}catch{return null}}function I(g,E){return(g(E+1e-6)-g(E-1e-6))/(2*1e-6)}function C(g,E,w,y){let x=[],m=E,z=g(m);x.push({iter:0,x:m,fx:z,error:null});for(let G=1;G<=y;G++){let X=I(g,m);if(X===0)return{error:"f'(x) = 0 หารด้วยศูนย์ไม่ได้"};let te=m-z/X,O=g(te),$=Math.abs(te-m)/Math.abs(te);if(x.push({iter:G,x:te,fx:O,error:$}),Math.abs(O)<w||$<w)return{root:te,iterations:x,converged:!0};m=te,z=O}return{root:m,iterations:x,converged:!1}}function D(g){return g===null?"-":isFinite(g)?Number(g).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(g)}function F(g,E){const w=V.current,y=w.getContext("2d"),x=w.width,m=w.height;if(y.clearRect(0,0,x,m),y.fillStyle="#061022",y.fillRect(0,0,x,m),E.length===0)return;const z=E.map(ye=>ye.x),G=E.map(ye=>ye.fx),X=Math.min(...z),te=Math.max(...z),O=(te-X)*.3||1,$=X-O,K=te+O,re=Math.min(...G),le=Math.max(...G),ie=(le-re)*.3||1,ue=re-ie,Ie=le+ie,Ae=ye=>(ye-$)/(K-$)*x,Oe=ye=>m-(ye-ue)/(Ie-ue)*m;if(y.strokeStyle="rgba(255,255,255,0.1)",ue<0&&Ie>0){const ye=Oe(0);y.beginPath(),y.moveTo(0,ye),y.lineTo(x,ye),y.stroke()}if($<0&&K>0){const ye=Ae(0);y.beginPath(),y.moveTo(ye,0),y.lineTo(ye,m),y.stroke()}y.beginPath(),y.lineWidth=2,y.strokeStyle="#8ab4ff";const Vt=500;let hn=!1;for(let ye=0;ye<Vt;ye++){const de=$+(K-$)*ye/(Vt-1);let ke;try{ke=g(de)}catch{ke=NaN}if(!isFinite(ke)){hn=!1;continue}const ze=Ae(de),It=Oe(ke);hn?y.lineTo(ze,It):(y.moveTo(ze,It),hn=!0)}y.stroke(),E.forEach((ye,de)=>{const ke=Ae(ye.x),ze=Oe(ye.fx);if(de<E.length-1){const It=E[de+1].x;y.beginPath(),y.moveTo(ke,ze),y.lineTo(Ae(It),Oe(0)),y.strokeStyle="#22c55e",y.setLineDash([4,4]),y.stroke(),y.setLineDash([])}y.beginPath(),y.moveTo(ke,ze),y.lineTo(ke,Oe(0)),y.strokeStyle="rgba(255,255,255,0.2)",y.stroke(),y.fillStyle="#e2e8f0",y.font="12px sans-serif",y.fillText("x"+de,ke-10,Oe(0)+14),y.beginPath(),y.arc(ke,ze,de===E.length-1?6:3,0,2*Math.PI),y.fillStyle=de===E.length-1?"#fb923c":"#f97316",y.fill()})}const U=()=>{const g=A(t);if(!g){p("สถานะ: สมการไม่ถูกต้อง");return}const E=parseFloat(n),w=parseFloat(s),y=parseInt(o,10);if(isNaN(E)){p("สถานะ: x0 ไม่ถูกต้อง");return}if(!isFinite(w)||w<=0){p("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(y)||y<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const x=C(g,E,w,y);if(x.error){p("สถานะ: "+x.error);return}h(x.iterations),p("สถานะ: เสร็จสิ้น "+(x.converged?"(converged)":"(ไม่ converged)")),P(x.iterations.length),R(D(x.root)),F(g,x.iterations)},S=()=>{e(""),r(""),i(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),R("-"),F(()=>0,[])};return M.useEffect(()=>{F(()=>0,[])},[]),T.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[T.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4",children:[T.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Newton-Raphson Method"}),T.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[T.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),T.jsx("input",{type:"text",value:t,onChange:g=>e(g.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),T.jsxs("div",{className:"mb-3",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),T.jsx("input",{type:"number",value:n,onChange:g=>r(g.target.value),placeholder:"เช่น 1.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex gap-3 mb-3",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),T.jsx("input",{type:"text",value:s,onChange:g=>i(g.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),T.jsx("input",{type:"number",value:o,onChange:g=>l(g.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),T.jsxs("div",{className:"flex gap-3 mb-4",children:[T.jsx("button",{onClick:U,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),T.jsx("button",{onClick:S,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),T.jsxs("div",{className:"text-sm",children:[T.jsx("div",{children:d}),T.jsxs("div",{children:["Iterations: ",N]}),T.jsxs("div",{children:["Root: ",_]})]}),u.length>0&&T.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:T.jsxs("table",{className:"w-full text-sm border-collapse",children:[T.jsx("thead",{children:T.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[T.jsx("th",{className:"p-2 text-right",children:"iter"}),T.jsx("th",{className:"p-2 text-right",children:"x"}),T.jsx("th",{className:"p-2 text-right",children:"f(x)"}),T.jsx("th",{className:"p-2 text-right",children:"error"})]})}),T.jsx("tbody",{children:u.map(g=>T.jsxs("tr",{className:"border-b border-slate-700",children:[T.jsx("td",{className:"p-2 text-right",children:g.iter}),T.jsx("td",{className:"p-2 text-right",children:D(g.x)}),T.jsx("td",{className:"p-2 text-right",children:D(g.fx)}),T.jsx("td",{className:"p-2 text-right",children:g.error===null?"-":D(g.error)})]},g.iter))})]})})]}),T.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Iterations"}),T.jsx("canvas",{ref:V,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),T.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["จุดส้ม = ค่าที่ได้ในแต่ละ iteration, จุดส้มใหญ่ = ค่าสุดท้าย เส้นเขียว = เส้นสัมผัส f(x) ที่ x",T.jsx("sub",{children:"i"}),", Label = x0, x1, x2 …"]})]})]})]})}function YC(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[_,R]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,A]=M.useState("-"),I=M.useRef(null);function C(E){if(!E||!E.trim())return null;let w=E.replace(/\^/g,"**");w=w.replace(/\bln\s*\(/gi,"log("),w=w.replace(/\bpi\b/gi,"PI"),w=w.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+w+"); }")}catch{return null}}function D(E,w,y,x,m){let z=[],G=E(w),X=E(y);z.push({iter:0,x:w,fx:G,error:null}),z.push({iter:1,x:y,fx:X,error:null});for(let te=2;te<=m;te++){if(X-G===0)return{error:"หารด้วยศูนย์ (f1 - f0 = 0)"};let O=y-X*(y-w)/(X-G),$=E(O),K=Math.abs(O-y)/Math.abs(O);if(z.push({iter:te,x:O,fx:$,error:K}),Math.abs($)<x||K<x)return{root:O,iterations:z,converged:!0};w=y,G=X,y=O,X=$}return{root:y,iterations:z,converged:!1}}function F(E){return E===null?"-":isFinite(E)?Number(E).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(E)}function U(E,w){const y=I.current,x=y.getContext("2d"),m=y.width,z=y.height;if(x.clearRect(0,0,m,z),x.fillStyle="#061022",x.fillRect(0,0,m,z),w.length===0)return;const G=w.map(de=>de.x),X=w.map(de=>de.fx),te=Math.min(...G),O=Math.max(...G),$=Math.min(...X),K=Math.max(...X),re=(O-te)*.3||1,le=(K-$)*.3||1,ie=te-re,ue=O+re,Ie=$-le,Ae=K+le,Oe=de=>(de-ie)/(ue-ie)*m,Vt=de=>z-(de-Ie)/(Ae-Ie)*z;if(x.strokeStyle="rgba(255,255,255,0.1)",Ie<0&&Ae>0){const de=Vt(0);x.beginPath(),x.moveTo(0,de),x.lineTo(m,de),x.stroke()}if(ie<0&&ue>0){const de=Oe(0);x.beginPath(),x.moveTo(de,0),x.lineTo(de,z),x.stroke()}x.beginPath(),x.lineWidth=2,x.strokeStyle="#8ab4ff";const hn=500;let ye=!1;for(let de=0;de<hn;de++){const ke=ie+(ue-ie)*de/(hn-1);let ze;try{ze=E(ke)}catch{ze=NaN}if(!isFinite(ze)){ye=!1;continue}const It=Oe(ke),fr=Vt(ze);ye?x.lineTo(It,fr):(x.moveTo(It,fr),ye=!0)}x.stroke(),w.forEach((de,ke)=>{const ze=Oe(de.x),It=Vt(de.fx);if(ke>0){const fr=w[ke-1];x.beginPath(),x.moveTo(Oe(fr.x),Vt(fr.fx)),x.lineTo(ze,It),x.strokeStyle="#22c55e",x.setLineDash([4,4]),x.stroke(),x.setLineDash([])}x.beginPath(),x.arc(ze,It,ke===w.length-1?6:3,0,2*Math.PI),x.fillStyle=ke===w.length-1?"#fb923c":"#f97316",x.fill(),x.fillStyle="#e2e8f0",x.font="12px sans-serif",x.fillText("x"+ke,ze-10,Vt(0)+14)})}const S=()=>{const E=C(t);if(!E){R("สถานะ: สมการไม่ถูกต้อง");return}const w=parseFloat(n),y=parseFloat(s),x=parseFloat(o),m=parseInt(u,10);if(isNaN(w)||isNaN(y)){R("สถานะ: x0/x1 ไม่ถูกต้อง");return}if(!isFinite(x)||x<=0){R("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(m)||m<=0){R("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const z=D(E,w,y,x,m);if(z.error){R("สถานะ: "+z.error);return}p(z.iterations),R("สถานะ: เสร็จสิ้น "+(z.converged?"(converged)":"(ไม่ converged)")),A(z.iterations.length),P(F(z.root)),U(E,z.iterations)},g=()=>{e(""),r(""),i(""),l(""),h(""),p([]),R("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-"),U(()=>0,[])};return M.useEffect(()=>{U(()=>0,[])},[]),T.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[T.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4",children:[T.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Secant Method"}),T.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[T.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),T.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),T.jsxs("div",{className:"flex gap-3 mb-3",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),T.jsx("input",{type:"number",value:n,onChange:E=>r(E.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x1"}),T.jsx("input",{type:"number",value:s,onChange:E=>i(E.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),T.jsxs("div",{className:"flex gap-3 mb-3",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),T.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),T.jsx("input",{type:"number",value:u,onChange:E=>h(E.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),T.jsxs("div",{className:"flex gap-3 mb-4",children:[T.jsx("button",{onClick:S,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),T.jsx("button",{onClick:g,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),T.jsxs("div",{className:"text-sm",children:[T.jsx("div",{children:_}),T.jsxs("div",{children:["Iterations: ",V]}),T.jsxs("div",{children:["Root: ",N]})]}),d.length>0&&T.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:T.jsxs("table",{className:"w-full text-sm border-collapse",children:[T.jsx("thead",{children:T.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[T.jsx("th",{className:"p-2 text-right",children:"iter"}),T.jsx("th",{className:"p-2 text-right",children:"x"}),T.jsx("th",{className:"p-2 text-right",children:"f(x)"}),T.jsx("th",{className:"p-2 text-right",children:"error"})]})}),T.jsx("tbody",{children:d.map(E=>T.jsxs("tr",{className:"border-b border-slate-700",children:[T.jsx("td",{className:"p-2 text-right",children:E.iter}),T.jsx("td",{className:"p-2 text-right",children:F(E.x)}),T.jsx("td",{className:"p-2 text-right",children:F(E.fx)}),T.jsx("td",{className:"p-2 text-right",children:E.error===null?"-":F(E.error)})]},E.iter))})]})})]}),T.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Secant"}),T.jsx("canvas",{ref:I,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),T.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เส้นเขียว = เส้น secant ระหว่างแต่ละจุด, จุดส้ม = ค่าที่ได้, จุดส้มใหญ่ = ค่าสุดท้าย Label = x0, x1, x2 …"})]})]})]})}function JC(){return T.jsx(kT,{basename:"/Numerical-web",children:T.jsxs(IT,{children:[T.jsx(Er,{path:"/",element:T.jsx(OT,{})}),T.jsx(Er,{path:"/bisection",element:T.jsx(qC,{})}),T.jsx(Er,{path:"/falsepo",element:T.jsx(GC,{})}),T.jsx(Er,{path:"/onepoint",element:T.jsx(KC,{})}),T.jsx(Er,{path:"/newtonrap",element:T.jsx(XC,{})}),T.jsx(Er,{path:"/secant",element:T.jsx(YC,{})})]})})}Iv(document.getElementById("root")).render(T.jsx(M.StrictMode,{children:T.jsx(JC,{})}));
