function vP(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var AA={exports:{}},th={},DA={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=Symbol.for("react.element"),yP=Symbol.for("react.portal"),xP=Symbol.for("react.fragment"),bP=Symbol.for("react.strict_mode"),wP=Symbol.for("react.profiler"),NP=Symbol.for("react.provider"),_P=Symbol.for("react.context"),SP=Symbol.for("react.forward_ref"),EP=Symbol.for("react.suspense"),AP=Symbol.for("react.memo"),DP=Symbol.for("react.lazy"),xb=Symbol.iterator;function CP(t){return t===null||typeof t!="object"?null:(t=xb&&t[xb]||t["@@iterator"],typeof t=="function"?t:null)}var CA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TA=Object.assign,MA={};function Xl(t,e,r){this.props=t,this.context=e,this.refs=MA,this.updater=r||CA}Xl.prototype.isReactComponent={};Xl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IA(){}IA.prototype=Xl.prototype;function Zg(t,e,r){this.props=t,this.context=e,this.refs=MA,this.updater=r||CA}var e0=Zg.prototype=new IA;e0.constructor=Zg;TA(e0,Xl.prototype);e0.isPureReactComponent=!0;var bb=Array.isArray,FA=Object.prototype.hasOwnProperty,t0={current:null},PA={key:!0,ref:!0,__self:!0,__source:!0};function RA(t,e,r){var n,a={},i=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)FA.call(e,n)&&!PA.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var u=Array(l),o=0;o<l;o++)u[o]=arguments[o+2];a.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Qc,type:t,key:i,ref:s,props:a,_owner:t0.current}}function TP(t,e){return{$$typeof:Qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function r0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qc}function MP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var wb=/\/+/g;function bp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MP(""+t.key):e.toString(36)}function _d(t,e,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Qc:case yP:s=!0}}if(s)return s=t,a=a(s),t=n===""?"."+bp(s,0):n,bb(a)?(r="",t!=null&&(r=t.replace(wb,"$&/")+"/"),_d(a,e,r,"",function(o){return o})):a!=null&&(r0(a)&&(a=TP(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(wb,"$&/")+"/")+t)),e.push(a)),1;if(s=0,n=n===""?".":n+":",bb(t))for(var l=0;l<t.length;l++){i=t[l];var u=n+bp(i,l);s+=_d(i,e,r,u,a)}else if(u=CP(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=n+bp(i,l++),s+=_d(i,e,r,u,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Rf(t,e,r){if(t==null)return t;var n=[],a=0;return _d(t,n,"","",function(i){return e.call(r,i,a++)}),n}function IP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},Sd={transition:null},FP={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:Sd,ReactCurrentOwner:t0};function OA(){throw Error("act(...) is not supported in production builds of React.")}_t.Children={map:Rf,forEach:function(t,e,r){Rf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Rf(t,function(){e++}),e},toArray:function(t){return Rf(t,function(e){return e})||[]},only:function(t){if(!r0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_t.Component=Xl;_t.Fragment=xP;_t.Profiler=wP;_t.PureComponent=Zg;_t.StrictMode=bP;_t.Suspense=EP;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FP;_t.act=OA;_t.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=TA({},t.props),a=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=t0.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)FA.call(e,u)&&!PA.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var o=0;o<u;o++)l[o]=arguments[o+2];n.children=l}return{$$typeof:Qc,type:t.type,key:a,ref:i,props:n,_owner:s}};_t.createContext=function(t){return t={$$typeof:_P,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NP,_context:t},t.Consumer=t};_t.createElement=RA;_t.createFactory=function(t){var e=RA.bind(null,t);return e.type=t,e};_t.createRef=function(){return{current:null}};_t.forwardRef=function(t){return{$$typeof:SP,render:t}};_t.isValidElement=r0;_t.lazy=function(t){return{$$typeof:DP,_payload:{_status:-1,_result:t},_init:IP}};_t.memo=function(t,e){return{$$typeof:AP,type:t,compare:e===void 0?null:e}};_t.startTransition=function(t){var e=Sd.transition;Sd.transition={};try{t()}finally{Sd.transition=e}};_t.unstable_act=OA;_t.useCallback=function(t,e){return Tn.current.useCallback(t,e)};_t.useContext=function(t){return Tn.current.useContext(t)};_t.useDebugValue=function(){};_t.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};_t.useEffect=function(t,e){return Tn.current.useEffect(t,e)};_t.useId=function(){return Tn.current.useId()};_t.useImperativeHandle=function(t,e,r){return Tn.current.useImperativeHandle(t,e,r)};_t.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};_t.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};_t.useMemo=function(t,e){return Tn.current.useMemo(t,e)};_t.useReducer=function(t,e,r){return Tn.current.useReducer(t,e,r)};_t.useRef=function(t){return Tn.current.useRef(t)};_t.useState=function(t){return Tn.current.useState(t)};_t.useSyncExternalStore=function(t,e,r){return Tn.current.useSyncExternalStore(t,e,r)};_t.useTransition=function(){return Tn.current.useTransition()};_t.version="18.3.1";DA.exports=_t;var U=DA.exports;const PP=eh(U),RP=vP({__proto__:null,default:PP},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OP=U,BP=Symbol.for("react.element"),jP=Symbol.for("react.fragment"),kP=Object.prototype.hasOwnProperty,$P=OP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LP={key:!0,ref:!0,__self:!0,__source:!0};function BA(t,e,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)kP.call(e,n)&&!LP.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:BP,type:t,key:i,ref:s,props:a,_owner:$P.current}}th.Fragment=jP;th.jsx=BA;th.jsxs=BA;AA.exports=th;var v=AA.exports,jA={exports:{}},Yn={},kA={exports:{}},$A={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,z){var X=$.length;$.push(z);e:for(;0<X;){var ae=X-1>>>1,k=$[ae];if(0<a(k,z))$[ae]=z,$[X]=k,X=ae;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var z=$[0],X=$.pop();if(X!==z){$[0]=X;e:for(var ae=0,k=$.length,Y=k>>>1;ae<Y;){var V=2*(ae+1)-1,ye=$[V],le=V+1,fe=$[le];if(0>a(ye,X))le<k&&0>a(fe,ye)?($[ae]=fe,$[le]=X,ae=le):($[ae]=ye,$[V]=X,ae=V);else if(le<k&&0>a(fe,X))$[ae]=fe,$[le]=X,ae=le;else break e}}return z}function a($,z){var X=$.sortIndex-z.sortIndex;return X!==0?X:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],o=[],c=1,f=null,d=3,m=!1,p=!1,h=!1,D=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var z=r(o);z!==null;){if(z.callback===null)n(o);else if(z.startTime<=$)n(o),z.sortIndex=z.expirationTime,e(u,z);else break;z=r(o)}}function b($){if(h=!1,x($),!p)if(r(u)!==null)p=!0,P(N);else{var z=r(o);z!==null&&H(b,z.startTime-$)}}function N($,z){p=!1,h&&(h=!1,w(_),_=-1),m=!0;var X=d;try{for(x(z),f=r(u);f!==null&&(!(f.expirationTime>z)||$&&!T());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,d=f.priorityLevel;var k=ae(f.expirationTime<=z);z=t.unstable_now(),typeof k=="function"?f.callback=k:f===r(u)&&n(u),x(z)}else n(u);f=r(u)}if(f!==null)var Y=!0;else{var V=r(o);V!==null&&H(b,V.startTime-z),Y=!1}return Y}finally{f=null,d=X,m=!1}}var g=!1,y=null,_=-1,E=5,C=-1;function T(){return!(t.unstable_now()-C<E)}function M(){if(y!==null){var $=t.unstable_now();C=$;var z=!0;try{z=y(!0,$)}finally{z?I():(g=!1,y=null)}}else g=!1}var I;if(typeof S=="function")I=function(){S(M)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,O=j.port2;j.port1.onmessage=M,I=function(){O.postMessage(null)}}else I=function(){D(M,0)};function P($){y=$,g||(g=!0,I())}function H($,z){_=D(function(){$(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,P(N))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function($){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var X=d;d=z;try{return $()}finally{d=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=d;d=$;try{return z()}finally{d=X}},t.unstable_scheduleCallback=function($,z,X){var ae=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ae+X:ae):X=ae,$){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=X+k,$={id:c++,callback:z,priorityLevel:$,startTime:X,expirationTime:k,sortIndex:-1},X>ae?($.sortIndex=X,e(o,$),r(u)===null&&$===r(o)&&(h?(w(_),_=-1):h=!0,H(b,X-ae))):($.sortIndex=k,e(u,$),p||m||(p=!0,P(N))),$},t.unstable_shouldYield=T,t.unstable_wrapCallback=function($){var z=d;return function(){var X=d;d=z;try{return $.apply(this,arguments)}finally{d=X}}}})($A);kA.exports=$A;var zP=kA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=U,Kn=zP;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LA=new Set,dc={};function go(t,e){Dl(t,e),Dl(t+"Capture",e)}function Dl(t,e){for(dc[t]=e,t=0;t<e.length;t++)LA.add(e[t])}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dv=Object.prototype.hasOwnProperty,UP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nb={},_b={};function qP(t){return dv.call(_b,t)?!0:dv.call(Nb,t)?!1:UP.test(t)?_b[t]=!0:(Nb[t]=!0,!1)}function HP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GP(t,e,r,n){if(e===null||typeof e>"u"||HP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,r,n,a,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){an[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];an[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){an[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){an[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){an[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){an[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){an[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){an[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){an[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var n0=/[\-:]([a-z])/g;function a0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(n0,a0);an[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(n0,a0);an[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(n0,a0);an[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){an[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});an.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){an[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function i0(t,e,r,n){var a=an.hasOwnProperty(e)?an[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GP(e,r,a,n)&&(r=null),n||a===null?qP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ai=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Of=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),s0=Symbol.for("react.strict_mode"),mv=Symbol.for("react.profiler"),zA=Symbol.for("react.provider"),VA=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),hv=Symbol.for("react.suspense"),pv=Symbol.for("react.suspense_list"),l0=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),UA=Symbol.for("react.offscreen"),Sb=Symbol.iterator;function Iu(t){return t===null||typeof t!="object"?null:(t=Sb&&t[Sb]||t["@@iterator"],typeof t=="function"?t:null)}var hr=Object.assign,wp;function zu(t){if(wp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);wp=e&&e[1]||""}return`
`+wp+t}var Np=!1;function _p(t,e){if(!t||Np)return"";Np=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(o){var n=o}Reflect.construct(t,[],e)}else{try{e.call()}catch(o){n=o}t.call(e.prototype)}else{try{throw Error()}catch(o){n=o}t()}}catch(o){if(o&&n&&typeof o.stack=="string"){for(var a=o.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,l=i.length-1;1<=s&&0<=l&&a[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==i[l]){var u=`
`+a[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{Np=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?zu(t):""}function WP(t){switch(t.tag){case 5:return zu(t.type);case 16:return zu("Lazy");case 13:return zu("Suspense");case 19:return zu("SuspenseList");case 0:case 2:case 15:return t=_p(t.type,!1),t;case 11:return t=_p(t.type.render,!1),t;case 1:return t=_p(t.type,!0),t;default:return""}}function vv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case el:return"Fragment";case Zo:return"Portal";case mv:return"Profiler";case s0:return"StrictMode";case hv:return"Suspense";case pv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VA:return(t.displayName||"Context")+".Consumer";case zA:return(t._context.displayName||"Context")+".Provider";case o0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case l0:return e=t.displayName||null,e!==null?e:vv(t.type)||"Memo";case Li:e=t._payload,t=t._init;try{return vv(t(e))}catch{}}return null}function QP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vv(e);case 8:return e===s0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XP(t){var e=qA(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bf(t){t._valueTracker||(t._valueTracker=XP(t))}function HA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=qA(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ud(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gv(t,e){var r=e.checked;return hr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Eb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ms(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GA(t,e){e=e.checked,e!=null&&i0(t,"checked",e,!1)}function yv(t,e){GA(t,e);var r=ms(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xv(t,e.type,r):e.hasOwnProperty("defaultValue")&&xv(t,e.type,ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ab(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function xv(t,e,r){(e!=="number"||Ud(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Vu=Array.isArray;function hl(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ms(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function bv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return hr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Db(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Re(92));if(Vu(r)){if(1<r.length)throw Error(Re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ms(r)}}function WA(t,e){var r=ms(e.value),n=ms(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Cb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function QA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?QA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jf,XA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jf=jf||document.createElement("div"),jf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ku={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KP=["Webkit","ms","Moz","O"];Object.keys(Ku).forEach(function(t){KP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ku[e]=Ku[t]})});function KA(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ku.hasOwnProperty(t)&&Ku[t]?(""+e).trim():e+"px"}function JA(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=KA(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var JP=hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nv(t,e){if(e){if(JP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function _v(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sv=null;function u0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ev=null,pl=null,vl=null;function Tb(t){if(t=Jc(t)){if(typeof Ev!="function")throw Error(Re(280));var e=t.stateNode;e&&(e=sh(e),Ev(t.stateNode,t.type,e))}}function YA(t){pl?vl?vl.push(t):vl=[t]:pl=t}function ZA(){if(pl){var t=pl,e=vl;if(vl=pl=null,Tb(t),e)for(t=0;t<e.length;t++)Tb(e[t])}}function eD(t,e){return t(e)}function tD(){}var Sp=!1;function rD(t,e,r){if(Sp)return t(e,r);Sp=!0;try{return eD(t,e,r)}finally{Sp=!1,(pl!==null||vl!==null)&&(tD(),ZA())}}function hc(t,e){var r=t.stateNode;if(r===null)return null;var n=sh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Re(231,e,typeof r));return r}var Av=!1;if(gi)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){Av=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{Av=!1}function YP(t,e,r,n,a,i,s,l,u){var o=Array.prototype.slice.call(arguments,3);try{e.apply(r,o)}catch(c){this.onError(c)}}var Ju=!1,qd=null,Hd=!1,Dv=null,ZP={onError:function(t){Ju=!0,qd=t}};function eR(t,e,r,n,a,i,s,l,u){Ju=!1,qd=null,YP.apply(ZP,arguments)}function tR(t,e,r,n,a,i,s,l,u){if(eR.apply(this,arguments),Ju){if(Ju){var o=qd;Ju=!1,qd=null}else throw Error(Re(198));Hd||(Hd=!0,Dv=o)}}function yo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function nD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mb(t){if(yo(t)!==t)throw Error(Re(188))}function rR(t){var e=t.alternate;if(!e){if(e=yo(t),e===null)throw Error(Re(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Mb(a),t;if(i===n)return Mb(a),e;i=i.sibling}throw Error(Re(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s)throw Error(Re(189))}}if(r.alternate!==n)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?t:e}function aD(t){return t=rR(t),t!==null?iD(t):null}function iD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iD(t);if(e!==null)return e;t=t.sibling}return null}var sD=Kn.unstable_scheduleCallback,Ib=Kn.unstable_cancelCallback,nR=Kn.unstable_shouldYield,aR=Kn.unstable_requestPaint,_r=Kn.unstable_now,iR=Kn.unstable_getCurrentPriorityLevel,c0=Kn.unstable_ImmediatePriority,oD=Kn.unstable_UserBlockingPriority,Gd=Kn.unstable_NormalPriority,sR=Kn.unstable_LowPriority,lD=Kn.unstable_IdlePriority,rh=null,Ga=null;function oR(t){if(Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(rh,t,void 0,(t.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:cR,lR=Math.log,uR=Math.LN2;function cR(t){return t>>>=0,t===0?32:31-(lR(t)/uR|0)|0}var kf=64,$f=4194304;function Uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wd(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,s=r&268435455;if(s!==0){var l=s&~a;l!==0?n=Uu(l):(i&=s,i!==0&&(n=Uu(i)))}else s=r&~a,s!==0?n=Uu(s):i!==0&&(n=Uu(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Da(e),a=1<<r,n|=t[r],e&=~a;return n}function fR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Da(i),l=1<<s,u=a[s];u===-1?(!(l&r)||l&n)&&(a[s]=fR(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Cv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uD(){var t=kf;return kf<<=1,!(kf&4194240)&&(kf=64),t}function Ep(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Xc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Da(e),t[e]=r}function mR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Da(r),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function f0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Da(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Kt=0;function cD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fD,d0,dD,mD,hD,Tv=!1,Lf=[],Yi=null,Zi=null,es=null,pc=new Map,vc=new Map,qi=[],hR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fb(t,e){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(e.pointerId)}}function Pu(t,e,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Jc(e),e!==null&&d0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function pR(t,e,r,n,a){switch(e){case"focusin":return Yi=Pu(Yi,t,e,r,n,a),!0;case"dragenter":return Zi=Pu(Zi,t,e,r,n,a),!0;case"mouseover":return es=Pu(es,t,e,r,n,a),!0;case"pointerover":var i=a.pointerId;return pc.set(i,Pu(pc.get(i)||null,t,e,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,vc.set(i,Pu(vc.get(i)||null,t,e,r,n,a)),!0}return!1}function pD(t){var e=Js(t.target);if(e!==null){var r=yo(e);if(r!==null){if(e=r.tag,e===13){if(e=nD(r),e!==null){t.blockedOn=e,hD(t.priority,function(){dD(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ed(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Mv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Sv=n,r.target.dispatchEvent(n),Sv=null}else return e=Jc(r),e!==null&&d0(e),t.blockedOn=r,!1;e.shift()}return!0}function Pb(t,e,r){Ed(t)&&r.delete(e)}function vR(){Tv=!1,Yi!==null&&Ed(Yi)&&(Yi=null),Zi!==null&&Ed(Zi)&&(Zi=null),es!==null&&Ed(es)&&(es=null),pc.forEach(Pb),vc.forEach(Pb)}function Ru(t,e){t.blockedOn===e&&(t.blockedOn=null,Tv||(Tv=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,vR)))}function gc(t){function e(a){return Ru(a,t)}if(0<Lf.length){Ru(Lf[0],t);for(var r=1;r<Lf.length;r++){var n=Lf[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Yi!==null&&Ru(Yi,t),Zi!==null&&Ru(Zi,t),es!==null&&Ru(es,t),pc.forEach(e),vc.forEach(e),r=0;r<qi.length;r++)n=qi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<qi.length&&(r=qi[0],r.blockedOn===null);)pD(r),r.blockedOn===null&&qi.shift()}var gl=Ai.ReactCurrentBatchConfig,Qd=!0;function gR(t,e,r,n){var a=Kt,i=gl.transition;gl.transition=null;try{Kt=1,m0(t,e,r,n)}finally{Kt=a,gl.transition=i}}function yR(t,e,r,n){var a=Kt,i=gl.transition;gl.transition=null;try{Kt=4,m0(t,e,r,n)}finally{Kt=a,gl.transition=i}}function m0(t,e,r,n){if(Qd){var a=Mv(t,e,r,n);if(a===null)Op(t,e,n,Xd,r),Fb(t,n);else if(pR(a,t,e,r,n))n.stopPropagation();else if(Fb(t,n),e&4&&-1<hR.indexOf(t)){for(;a!==null;){var i=Jc(a);if(i!==null&&fD(i),i=Mv(t,e,r,n),i===null&&Op(t,e,n,Xd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Op(t,e,n,null,r)}}var Xd=null;function Mv(t,e,r,n){if(Xd=null,t=u0(n),t=Js(t),t!==null)if(e=yo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=nD(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xd=t,null}function vD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iR()){case c0:return 1;case oD:return 4;case Gd:case sR:return 16;case lD:return 536870912;default:return 16}default:return 16}}var Gi=null,h0=null,Ad=null;function gD(){if(Ad)return Ad;var t,e=h0,r=e.length,n,a="value"in Gi?Gi.value:Gi.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===a[i-n];n++);return Ad=a.slice(t,1<n?1-n:void 0)}function Dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zf(){return!0}function Rb(){return!1}function Zn(t){function e(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zf:Rb,this.isPropagationStopped=Rb,this}return hr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zf)},persist:function(){},isPersistent:zf}),e}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p0=Zn(Kl),Kc=hr({},Kl,{view:0,detail:0}),xR=Zn(Kc),Ap,Dp,Ou,nh=hr({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:v0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ou&&(Ou&&t.type==="mousemove"?(Ap=t.screenX-Ou.screenX,Dp=t.screenY-Ou.screenY):Dp=Ap=0,Ou=t),Ap)},movementY:function(t){return"movementY"in t?t.movementY:Dp}}),Ob=Zn(nh),bR=hr({},nh,{dataTransfer:0}),wR=Zn(bR),NR=hr({},Kc,{relatedTarget:0}),Cp=Zn(NR),_R=hr({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),SR=Zn(_R),ER=hr({},Kl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AR=Zn(ER),DR=hr({},Kl,{data:0}),Bb=Zn(DR),CR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MR[t])?!!e[t]:!1}function v0(){return IR}var FR=hr({},Kc,{key:function(t){if(t.key){var e=CR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:v0,charCode:function(t){return t.type==="keypress"?Dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PR=Zn(FR),RR=hr({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jb=Zn(RR),OR=hr({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:v0}),BR=Zn(OR),jR=hr({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),kR=Zn(jR),$R=hr({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LR=Zn($R),zR=[9,13,27,32],g0=gi&&"CompositionEvent"in window,Yu=null;gi&&"documentMode"in document&&(Yu=document.documentMode);var VR=gi&&"TextEvent"in window&&!Yu,yD=gi&&(!g0||Yu&&8<Yu&&11>=Yu),kb=" ",$b=!1;function xD(t,e){switch(t){case"keyup":return zR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tl=!1;function UR(t,e){switch(t){case"compositionend":return bD(e);case"keypress":return e.which!==32?null:($b=!0,kb);case"textInput":return t=e.data,t===kb&&$b?null:t;default:return null}}function qR(t,e){if(tl)return t==="compositionend"||!g0&&xD(t,e)?(t=gD(),Ad=h0=Gi=null,tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yD&&e.locale!=="ko"?null:e.data;default:return null}}var HR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HR[t.type]:e==="textarea"}function wD(t,e,r,n){YA(n),e=Kd(e,"onChange"),0<e.length&&(r=new p0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Zu=null,yc=null;function GR(t){FD(t,0)}function ah(t){var e=al(t);if(HA(e))return t}function WR(t,e){if(t==="change")return e}var ND=!1;if(gi){var Tp;if(gi){var Mp="oninput"in document;if(!Mp){var zb=document.createElement("div");zb.setAttribute("oninput","return;"),Mp=typeof zb.oninput=="function"}Tp=Mp}else Tp=!1;ND=Tp&&(!document.documentMode||9<document.documentMode)}function Vb(){Zu&&(Zu.detachEvent("onpropertychange",_D),yc=Zu=null)}function _D(t){if(t.propertyName==="value"&&ah(yc)){var e=[];wD(e,yc,t,u0(t)),rD(GR,e)}}function QR(t,e,r){t==="focusin"?(Vb(),Zu=e,yc=r,Zu.attachEvent("onpropertychange",_D)):t==="focusout"&&Vb()}function XR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ah(yc)}function KR(t,e){if(t==="click")return ah(e)}function JR(t,e){if(t==="input"||t==="change")return ah(e)}function YR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ma=typeof Object.is=="function"?Object.is:YR;function xc(t,e){if(Ma(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!dv.call(e,a)||!Ma(t[a],e[a]))return!1}return!0}function Ub(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qb(t,e){var r=Ub(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ub(r)}}function SD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ED(){for(var t=window,e=Ud();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ud(t.document)}return e}function y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZR(t){var e=ED(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&SD(r.ownerDocument.documentElement,r)){if(n!==null&&y0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=qb(r,i);var s=qb(r,n);a&&s&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eO=gi&&"documentMode"in document&&11>=document.documentMode,rl=null,Iv=null,ec=null,Fv=!1;function Hb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Fv||rl==null||rl!==Ud(n)||(n=rl,"selectionStart"in n&&y0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ec&&xc(ec,n)||(ec=n,n=Kd(Iv,"onSelect"),0<n.length&&(e=new p0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=rl)))}function Vf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var nl={animationend:Vf("Animation","AnimationEnd"),animationiteration:Vf("Animation","AnimationIteration"),animationstart:Vf("Animation","AnimationStart"),transitionend:Vf("Transition","TransitionEnd")},Ip={},AD={};gi&&(AD=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function ih(t){if(Ip[t])return Ip[t];if(!nl[t])return t;var e=nl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in AD)return Ip[t]=e[r];return t}var DD=ih("animationend"),CD=ih("animationiteration"),TD=ih("animationstart"),MD=ih("transitionend"),ID=new Map,Gb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){ID.set(t,e),go(e,[t])}for(var Fp=0;Fp<Gb.length;Fp++){var Pp=Gb[Fp],tO=Pp.toLowerCase(),rO=Pp[0].toUpperCase()+Pp.slice(1);Es(tO,"on"+rO)}Es(DD,"onAnimationEnd");Es(CD,"onAnimationIteration");Es(TD,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(MD,"onTransitionEnd");Dl("onMouseEnter",["mouseout","mouseover"]);Dl("onMouseLeave",["mouseout","mouseover"]);Dl("onPointerEnter",["pointerout","pointerover"]);Dl("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nO=new Set("cancel close invalid load scroll toggle".split(" ").concat(qu));function Wb(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,tR(n,e,void 0,t),t.currentTarget=null}function FD(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var l=n[s],u=l.instance,o=l.currentTarget;if(l=l.listener,u!==i&&a.isPropagationStopped())break e;Wb(a,l,o),i=u}else for(s=0;s<n.length;s++){if(l=n[s],u=l.instance,o=l.currentTarget,l=l.listener,u!==i&&a.isPropagationStopped())break e;Wb(a,l,o),i=u}}}if(Hd)throw t=Dv,Hd=!1,Dv=null,t}function ir(t,e){var r=e[jv];r===void 0&&(r=e[jv]=new Set);var n=t+"__bubble";r.has(n)||(PD(e,t,2,!1),r.add(n))}function Rp(t,e,r){var n=0;e&&(n|=4),PD(r,t,n,e)}var Uf="_reactListening"+Math.random().toString(36).slice(2);function bc(t){if(!t[Uf]){t[Uf]=!0,LA.forEach(function(r){r!=="selectionchange"&&(nO.has(r)||Rp(r,!1,t),Rp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uf]||(e[Uf]=!0,Rp("selectionchange",!1,e))}}function PD(t,e,r,n){switch(vD(e)){case 1:var a=gR;break;case 4:a=yR;break;default:a=m0}r=a.bind(null,e,r,t),a=void 0,!Av||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Op(t,e,r,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;s=s.return}for(;l!==null;){if(s=Js(l),s===null)return;if(u=s.tag,u===5||u===6){n=i=s;continue e}l=l.parentNode}}n=n.return}rD(function(){var o=i,c=u0(r),f=[];e:{var d=ID.get(t);if(d!==void 0){var m=p0,p=t;switch(t){case"keypress":if(Dd(r)===0)break e;case"keydown":case"keyup":m=PR;break;case"focusin":p="focus",m=Cp;break;case"focusout":p="blur",m=Cp;break;case"beforeblur":case"afterblur":m=Cp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=wR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=BR;break;case DD:case CD:case TD:m=SR;break;case MD:m=kR;break;case"scroll":m=xR;break;case"wheel":m=LR;break;case"copy":case"cut":case"paste":m=AR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=jb}var h=(e&4)!==0,D=!h&&t==="scroll",w=h?d!==null?d+"Capture":null:d;h=[];for(var S=o,x;S!==null;){x=S;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,w!==null&&(b=hc(S,w),b!=null&&h.push(wc(S,b,x)))),D)break;S=S.return}0<h.length&&(d=new m(d,p,null,r,c),f.push({event:d,listeners:h}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",d&&r!==Sv&&(p=r.relatedTarget||r.fromElement)&&(Js(p)||p[yi]))break e;if((m||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,m?(p=r.relatedTarget||r.toElement,m=o,p=p?Js(p):null,p!==null&&(D=yo(p),p!==D||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=o),m!==p)){if(h=Ob,b="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(h=jb,b="onPointerLeave",w="onPointerEnter",S="pointer"),D=m==null?d:al(m),x=p==null?d:al(p),d=new h(b,S+"leave",m,r,c),d.target=D,d.relatedTarget=x,b=null,Js(c)===o&&(h=new h(w,S+"enter",p,r,c),h.target=x,h.relatedTarget=D,b=h),D=b,m&&p)t:{for(h=m,w=p,S=0,x=h;x;x=Vo(x))S++;for(x=0,b=w;b;b=Vo(b))x++;for(;0<S-x;)h=Vo(h),S--;for(;0<x-S;)w=Vo(w),x--;for(;S--;){if(h===w||w!==null&&h===w.alternate)break t;h=Vo(h),w=Vo(w)}h=null}else h=null;m!==null&&Qb(f,d,m,h,!1),p!==null&&D!==null&&Qb(f,D,p,h,!0)}}e:{if(d=o?al(o):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var N=WR;else if(Lb(d))if(ND)N=JR;else{N=XR;var g=QR}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=KR);if(N&&(N=N(t,o))){wD(f,N,r,c);break e}g&&g(t,d,o),t==="focusout"&&(g=d._wrapperState)&&g.controlled&&d.type==="number"&&xv(d,"number",d.value)}switch(g=o?al(o):window,t){case"focusin":(Lb(g)||g.contentEditable==="true")&&(rl=g,Iv=o,ec=null);break;case"focusout":ec=Iv=rl=null;break;case"mousedown":Fv=!0;break;case"contextmenu":case"mouseup":case"dragend":Fv=!1,Hb(f,r,c);break;case"selectionchange":if(eO)break;case"keydown":case"keyup":Hb(f,r,c)}var y;if(g0)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else tl?xD(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(yD&&r.locale!=="ko"&&(tl||_!=="onCompositionStart"?_==="onCompositionEnd"&&tl&&(y=gD()):(Gi=c,h0="value"in Gi?Gi.value:Gi.textContent,tl=!0)),g=Kd(o,_),0<g.length&&(_=new Bb(_,t,null,r,c),f.push({event:_,listeners:g}),y?_.data=y:(y=bD(r),y!==null&&(_.data=y)))),(y=VR?UR(t,r):qR(t,r))&&(o=Kd(o,"onBeforeInput"),0<o.length&&(c=new Bb("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:o}),c.data=y))}FD(f,e)})}function wc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Kd(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=hc(t,r),i!=null&&n.unshift(wc(t,i,a)),i=hc(t,e),i!=null&&n.push(wc(t,i,a))),t=t.return}return n}function Vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qb(t,e,r,n,a){for(var i=e._reactName,s=[];r!==null&&r!==n;){var l=r,u=l.alternate,o=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&o!==null&&(l=o,a?(u=hc(r,i),u!=null&&s.unshift(wc(r,u,l))):a||(u=hc(r,i),u!=null&&s.push(wc(r,u,l)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var aO=/\r\n?/g,iO=/\u0000|\uFFFD/g;function Xb(t){return(typeof t=="string"?t:""+t).replace(aO,`
`).replace(iO,"")}function qf(t,e,r){if(e=Xb(e),Xb(t)!==e&&r)throw Error(Re(425))}function Jd(){}var Pv=null,Rv=null;function Ov(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bv=typeof setTimeout=="function"?setTimeout:void 0,sO=typeof clearTimeout=="function"?clearTimeout:void 0,Kb=typeof Promise=="function"?Promise:void 0,oO=typeof queueMicrotask=="function"?queueMicrotask:typeof Kb<"u"?function(t){return Kb.resolve(null).then(t).catch(lO)}:Bv;function lO(t){setTimeout(function(){throw t})}function Bp(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),gc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);gc(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),qa="__reactFiber$"+Jl,Nc="__reactProps$"+Jl,yi="__reactContainer$"+Jl,jv="__reactEvents$"+Jl,uO="__reactListeners$"+Jl,cO="__reactHandles$"+Jl;function Js(t){var e=t[qa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[yi]||r[qa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Jb(t);t!==null;){if(r=t[qa])return r;t=Jb(t)}return e}t=r,r=t.parentNode}return null}function Jc(t){return t=t[qa]||t[yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function sh(t){return t[Nc]||null}var kv=[],il=-1;function As(t){return{current:t}}function or(t){0>il||(t.current=kv[il],kv[il]=null,il--)}function nr(t,e){il++,kv[il]=t.current,t.current=e}var hs={},gn=As(hs),jn=As(!1),so=hs;function Cl(t,e){var r=t.type.contextTypes;if(!r)return hs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function kn(t){return t=t.childContextTypes,t!=null}function Yd(){or(jn),or(gn)}function Yb(t,e,r){if(gn.current!==hs)throw Error(Re(168));nr(gn,e),nr(jn,r)}function RD(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(Re(108,QP(t)||"Unknown",a));return hr({},r,n)}function Zd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,so=gn.current,nr(gn,t),nr(jn,jn.current),!0}function Zb(t,e,r){var n=t.stateNode;if(!n)throw Error(Re(169));r?(t=RD(t,e,so),n.__reactInternalMemoizedMergedChildContext=t,or(jn),or(gn),nr(gn,t)):or(jn),nr(jn,r)}var ui=null,oh=!1,jp=!1;function OD(t){ui===null?ui=[t]:ui.push(t)}function fO(t){oh=!0,OD(t)}function Ds(){if(!jp&&ui!==null){jp=!0;var t=0,e=Kt;try{var r=ui;for(Kt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ui=null,oh=!1}catch(a){throw ui!==null&&(ui=ui.slice(t+1)),sD(c0,Ds),a}finally{Kt=e,jp=!1}}return null}var sl=[],ol=0,em=null,tm=0,sa=[],oa=0,oo=null,ci=1,fi="";function Gs(t,e){sl[ol++]=tm,sl[ol++]=em,em=t,tm=e}function BD(t,e,r){sa[oa++]=ci,sa[oa++]=fi,sa[oa++]=oo,oo=t;var n=ci;t=fi;var a=32-Da(n)-1;n&=~(1<<a),r+=1;var i=32-Da(e)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,ci=1<<32-Da(e)+a|r<<a|n,fi=i+t}else ci=1<<i|r<<a|n,fi=t}function x0(t){t.return!==null&&(Gs(t,1),BD(t,1,0))}function b0(t){for(;t===em;)em=sl[--ol],sl[ol]=null,tm=sl[--ol],sl[ol]=null;for(;t===oo;)oo=sa[--oa],sa[oa]=null,fi=sa[--oa],sa[oa]=null,ci=sa[--oa],sa[oa]=null}var Xn=null,Qn=null,cr=!1,Sa=null;function jD(t,e){var r=fa(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ew(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Qn=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=oo!==null?{id:ci,overflow:fi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=fa(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Xn=t,Qn=null,!0):!1;default:return!1}}function $v(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lv(t){if(cr){var e=Qn;if(e){var r=e;if(!ew(t,e)){if($v(t))throw Error(Re(418));e=ts(r.nextSibling);var n=Xn;e&&ew(t,e)?jD(n,r):(t.flags=t.flags&-4097|2,cr=!1,Xn=t)}}else{if($v(t))throw Error(Re(418));t.flags=t.flags&-4097|2,cr=!1,Xn=t}}}function tw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function Hf(t){if(t!==Xn)return!1;if(!cr)return tw(t),cr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ov(t.type,t.memoizedProps)),e&&(e=Qn)){if($v(t))throw kD(),Error(Re(418));for(;e;)jD(t,e),e=ts(e.nextSibling)}if(tw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qn=ts(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Xn?ts(t.stateNode.nextSibling):null;return!0}function kD(){for(var t=Qn;t;)t=ts(t.nextSibling)}function Tl(){Qn=Xn=null,cr=!1}function w0(t){Sa===null?Sa=[t]:Sa.push(t)}var dO=Ai.ReactCurrentBatchConfig;function Bu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var n=r.stateNode}if(!n)throw Error(Re(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var l=a.refs;s===null?delete l[i]:l[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,t))}return t}function Gf(t,e){throw t=Object.prototype.toString.call(e),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rw(t){var e=t._init;return e(t._payload)}function $D(t){function e(w,S){if(t){var x=w.deletions;x===null?(w.deletions=[S],w.flags|=16):x.push(S)}}function r(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function n(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function a(w,S){return w=is(w,S),w.index=0,w.sibling=null,w}function i(w,S,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<S?(w.flags|=2,S):x):(w.flags|=2,S)):(w.flags|=1048576,S)}function s(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,S,x,b){return S===null||S.tag!==6?(S=qp(x,w.mode,b),S.return=w,S):(S=a(S,x),S.return=w,S)}function u(w,S,x,b){var N=x.type;return N===el?c(w,S,x.props.children,b,x.key):S!==null&&(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Li&&rw(N)===S.type)?(b=a(S,x.props),b.ref=Bu(w,S,x),b.return=w,b):(b=Rd(x.type,x.key,x.props,null,w.mode,b),b.ref=Bu(w,S,x),b.return=w,b)}function o(w,S,x,b){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=Hp(x,w.mode,b),S.return=w,S):(S=a(S,x.children||[]),S.return=w,S)}function c(w,S,x,b,N){return S===null||S.tag!==7?(S=ao(x,w.mode,b,N),S.return=w,S):(S=a(S,x),S.return=w,S)}function f(w,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=qp(""+S,w.mode,x),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Of:return x=Rd(S.type,S.key,S.props,null,w.mode,x),x.ref=Bu(w,null,S),x.return=w,x;case Zo:return S=Hp(S,w.mode,x),S.return=w,S;case Li:var b=S._init;return f(w,b(S._payload),x)}if(Vu(S)||Iu(S))return S=ao(S,w.mode,x,null),S.return=w,S;Gf(w,S)}return null}function d(w,S,x,b){var N=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:l(w,S,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Of:return x.key===N?u(w,S,x,b):null;case Zo:return x.key===N?o(w,S,x,b):null;case Li:return N=x._init,d(w,S,N(x._payload),b)}if(Vu(x)||Iu(x))return N!==null?null:c(w,S,x,b,null);Gf(w,x)}return null}function m(w,S,x,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(x)||null,l(S,w,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Of:return w=w.get(b.key===null?x:b.key)||null,u(S,w,b,N);case Zo:return w=w.get(b.key===null?x:b.key)||null,o(S,w,b,N);case Li:var g=b._init;return m(w,S,x,g(b._payload),N)}if(Vu(b)||Iu(b))return w=w.get(x)||null,c(S,w,b,N,null);Gf(S,b)}return null}function p(w,S,x,b){for(var N=null,g=null,y=S,_=S=0,E=null;y!==null&&_<x.length;_++){y.index>_?(E=y,y=null):E=y.sibling;var C=d(w,y,x[_],b);if(C===null){y===null&&(y=E);break}t&&y&&C.alternate===null&&e(w,y),S=i(C,S,_),g===null?N=C:g.sibling=C,g=C,y=E}if(_===x.length)return r(w,y),cr&&Gs(w,_),N;if(y===null){for(;_<x.length;_++)y=f(w,x[_],b),y!==null&&(S=i(y,S,_),g===null?N=y:g.sibling=y,g=y);return cr&&Gs(w,_),N}for(y=n(w,y);_<x.length;_++)E=m(y,w,_,x[_],b),E!==null&&(t&&E.alternate!==null&&y.delete(E.key===null?_:E.key),S=i(E,S,_),g===null?N=E:g.sibling=E,g=E);return t&&y.forEach(function(T){return e(w,T)}),cr&&Gs(w,_),N}function h(w,S,x,b){var N=Iu(x);if(typeof N!="function")throw Error(Re(150));if(x=N.call(x),x==null)throw Error(Re(151));for(var g=N=null,y=S,_=S=0,E=null,C=x.next();y!==null&&!C.done;_++,C=x.next()){y.index>_?(E=y,y=null):E=y.sibling;var T=d(w,y,C.value,b);if(T===null){y===null&&(y=E);break}t&&y&&T.alternate===null&&e(w,y),S=i(T,S,_),g===null?N=T:g.sibling=T,g=T,y=E}if(C.done)return r(w,y),cr&&Gs(w,_),N;if(y===null){for(;!C.done;_++,C=x.next())C=f(w,C.value,b),C!==null&&(S=i(C,S,_),g===null?N=C:g.sibling=C,g=C);return cr&&Gs(w,_),N}for(y=n(w,y);!C.done;_++,C=x.next())C=m(y,w,_,C.value,b),C!==null&&(t&&C.alternate!==null&&y.delete(C.key===null?_:C.key),S=i(C,S,_),g===null?N=C:g.sibling=C,g=C);return t&&y.forEach(function(M){return e(w,M)}),cr&&Gs(w,_),N}function D(w,S,x,b){if(typeof x=="object"&&x!==null&&x.type===el&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Of:e:{for(var N=x.key,g=S;g!==null;){if(g.key===N){if(N=x.type,N===el){if(g.tag===7){r(w,g.sibling),S=a(g,x.props.children),S.return=w,w=S;break e}}else if(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Li&&rw(N)===g.type){r(w,g.sibling),S=a(g,x.props),S.ref=Bu(w,g,x),S.return=w,w=S;break e}r(w,g);break}else e(w,g);g=g.sibling}x.type===el?(S=ao(x.props.children,w.mode,b,x.key),S.return=w,w=S):(b=Rd(x.type,x.key,x.props,null,w.mode,b),b.ref=Bu(w,S,x),b.return=w,w=b)}return s(w);case Zo:e:{for(g=x.key;S!==null;){if(S.key===g)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){r(w,S.sibling),S=a(S,x.children||[]),S.return=w,w=S;break e}else{r(w,S);break}else e(w,S);S=S.sibling}S=Hp(x,w.mode,b),S.return=w,w=S}return s(w);case Li:return g=x._init,D(w,S,g(x._payload),b)}if(Vu(x))return p(w,S,x,b);if(Iu(x))return h(w,S,x,b);Gf(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(r(w,S.sibling),S=a(S,x),S.return=w,w=S):(r(w,S),S=qp(x,w.mode,b),S.return=w,w=S),s(w)):r(w,S)}return D}var Ml=$D(!0),LD=$D(!1),rm=As(null),nm=null,ll=null,N0=null;function _0(){N0=ll=nm=null}function S0(t){var e=rm.current;or(rm),t._currentValue=e}function zv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function yl(t,e){nm=t,N0=ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function ha(t){var e=t._currentValue;if(N0!==t)if(t={context:t,memoizedValue:e,next:null},ll===null){if(nm===null)throw Error(Re(308));ll=t,nm.dependencies={lanes:0,firstContext:t}}else ll=ll.next=t;return e}var Ys=null;function E0(t){Ys===null?Ys=[t]:Ys.push(t)}function zD(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,E0(e)):(r.next=a.next,a.next=r),e.interleaved=r,xi(t,n)}function xi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var zi=!1;function A0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Vt&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,xi(t,r)}return a=n.interleaved,a===null?(e.next=e,E0(n)):(e.next=a.next,a.next=e),n.interleaved=e,xi(t,r)}function Cd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,f0(t,r)}}function nw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function am(t,e,r,n){var a=t.updateQueue;zi=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var u=l,o=u.next;u.next=null,s===null?i=o:s.next=o,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=o:l.next=o,c.lastBaseUpdate=u))}if(i!==null){var f=a.baseState;s=0,c=o=u=null,l=i;do{var d=l.lane,m=l.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,h=l;switch(d=e,m=r,h.tag){case 1:if(p=h.payload,typeof p=="function"){f=p.call(m,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=h.payload,d=typeof p=="function"?p.call(m,f,d):p,d==null)break e;f=hr({},f,d);break e;case 2:zi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=a.effects,d===null?a.effects=[l]:d.push(l))}else m={eventTime:m,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(o=c=m,u=f):c=c.next=m,s|=d;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;d=l,l=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(c===null&&(u=f),a.baseState=u,a.firstBaseUpdate=o,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do s|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);uo|=s,t.lanes=s,t.memoizedState=f}}function aw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Re(191,a));a.call(n)}}}var Yc={},Wa=As(Yc),_c=As(Yc),Sc=As(Yc);function Zs(t){if(t===Yc)throw Error(Re(174));return t}function D0(t,e){switch(nr(Sc,e),nr(_c,t),nr(Wa,Yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wv(e,t)}or(Wa),nr(Wa,e)}function Il(){or(Wa),or(_c),or(Sc)}function UD(t){Zs(Sc.current);var e=Zs(Wa.current),r=wv(e,t.type);e!==r&&(nr(_c,t),nr(Wa,r))}function C0(t){_c.current===t&&(or(Wa),or(_c))}var dr=As(0);function im(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kp=[];function T0(){for(var t=0;t<kp.length;t++)kp[t]._workInProgressVersionPrimary=null;kp.length=0}var Td=Ai.ReactCurrentDispatcher,$p=Ai.ReactCurrentBatchConfig,lo=0,mr=null,Pr=null,Gr=null,sm=!1,tc=!1,Ec=0,mO=0;function un(){throw Error(Re(321))}function M0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ma(t[r],e[r]))return!1;return!0}function I0(t,e,r,n,a,i){if(lo=i,mr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Td.current=t===null||t.memoizedState===null?gO:yO,t=r(n,a),tc){i=0;do{if(tc=!1,Ec=0,25<=i)throw Error(Re(301));i+=1,Gr=Pr=null,e.updateQueue=null,Td.current=xO,t=r(n,a)}while(tc)}if(Td.current=om,e=Pr!==null&&Pr.next!==null,lo=0,Gr=Pr=mr=null,sm=!1,e)throw Error(Re(300));return t}function F0(){var t=Ec!==0;return Ec=0,t}function Va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?mr.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function pa(){if(Pr===null){var t=mr.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Gr===null?mr.memoizedState:Gr.next;if(e!==null)Gr=e,Pr=t;else{if(t===null)throw Error(Re(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Gr===null?mr.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function Ac(t,e){return typeof e=="function"?e(t):e}function Lp(t){var e=pa(),r=e.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var n=Pr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=s=null,u=null,o=i;do{var c=o.lane;if((lo&c)===c)u!==null&&(u=u.next={lane:0,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null}),n=o.hasEagerState?o.eagerState:t(n,o.action);else{var f={lane:c,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null};u===null?(l=u=f,s=n):u=u.next=f,mr.lanes|=c,uo|=c}o=o.next}while(o!==null&&o!==i);u===null?s=n:u.next=l,Ma(n,e.memoizedState)||(Bn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,mr.lanes|=i,uo|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function zp(t){var e=pa(),r=e.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=t(i,s.action),s=s.next;while(s!==a);Ma(i,e.memoizedState)||(Bn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function qD(){}function HD(t,e){var r=mr,n=pa(),a=e(),i=!Ma(n.memoizedState,a);if(i&&(n.memoizedState=a,Bn=!0),n=n.queue,P0(QD.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Gr!==null&&Gr.memoizedState.tag&1){if(r.flags|=2048,Dc(9,WD.bind(null,r,n,a,e),void 0,null),Xr===null)throw Error(Re(349));lo&30||GD(r,e,a)}return a}function GD(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function WD(t,e,r,n){e.value=r,e.getSnapshot=n,XD(e)&&KD(t)}function QD(t,e,r){return r(function(){XD(e)&&KD(t)})}function XD(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ma(t,r)}catch{return!0}}function KD(t){var e=xi(t,1);e!==null&&Ca(e,t,1,-1)}function iw(t){var e=Va();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ac,lastRenderedState:t},e.queue=t,t=t.dispatch=vO.bind(null,mr,t),[e.memoizedState,t]}function Dc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function JD(){return pa().memoizedState}function Md(t,e,r,n){var a=Va();mr.flags|=t,a.memoizedState=Dc(1|e,r,void 0,n===void 0?null:n)}function lh(t,e,r,n){var a=pa();n=n===void 0?null:n;var i=void 0;if(Pr!==null){var s=Pr.memoizedState;if(i=s.destroy,n!==null&&M0(n,s.deps)){a.memoizedState=Dc(e,r,i,n);return}}mr.flags|=t,a.memoizedState=Dc(1|e,r,i,n)}function sw(t,e){return Md(8390656,8,t,e)}function P0(t,e){return lh(2048,8,t,e)}function YD(t,e){return lh(4,2,t,e)}function ZD(t,e){return lh(4,4,t,e)}function eC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tC(t,e,r){return r=r!=null?r.concat([t]):null,lh(4,4,eC.bind(null,e,t),r)}function R0(){}function rC(t,e){var r=pa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&M0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function nC(t,e){var r=pa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&M0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function aC(t,e,r){return lo&21?(Ma(r,e)||(r=uD(),mr.lanes|=r,uo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=r)}function hO(t,e){var r=Kt;Kt=r!==0&&4>r?r:4,t(!0);var n=$p.transition;$p.transition={};try{t(!1),e()}finally{Kt=r,$p.transition=n}}function iC(){return pa().memoizedState}function pO(t,e,r){var n=as(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},sC(t))oC(e,r);else if(r=zD(t,e,r,n),r!==null){var a=Sn();Ca(r,t,n,a),lC(r,e,n)}}function vO(t,e,r){var n=as(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(sC(t))oC(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,l=i(s,r);if(a.hasEagerState=!0,a.eagerState=l,Ma(l,s)){var u=e.interleaved;u===null?(a.next=a,E0(e)):(a.next=u.next,u.next=a),e.interleaved=a;return}}catch{}finally{}r=zD(t,e,a,n),r!==null&&(a=Sn(),Ca(r,t,n,a),lC(r,e,n))}}function sC(t){var e=t.alternate;return t===mr||e!==null&&e===mr}function oC(t,e){tc=sm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function lC(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,f0(t,r)}}var om={readContext:ha,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},gO={readContext:ha,useCallback:function(t,e){return Va().memoizedState=[t,e===void 0?null:e],t},useContext:ha,useEffect:sw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Md(4194308,4,eC.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Md(4194308,4,t,e)},useInsertionEffect:function(t,e){return Md(4,2,t,e)},useMemo:function(t,e){var r=Va();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Va();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=pO.bind(null,mr,t),[n.memoizedState,t]},useRef:function(t){var e=Va();return t={current:t},e.memoizedState=t},useState:iw,useDebugValue:R0,useDeferredValue:function(t){return Va().memoizedState=t},useTransition:function(){var t=iw(!1),e=t[0];return t=hO.bind(null,t[1]),Va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=mr,a=Va();if(cr){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=e(),Xr===null)throw Error(Re(349));lo&30||GD(n,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,sw(QD.bind(null,n,i,t),[t]),n.flags|=2048,Dc(9,WD.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Va(),e=Xr.identifierPrefix;if(cr){var r=fi,n=ci;r=(n&~(1<<32-Da(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ec++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=mO++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yO={readContext:ha,useCallback:rC,useContext:ha,useEffect:P0,useImperativeHandle:tC,useInsertionEffect:YD,useLayoutEffect:ZD,useMemo:nC,useReducer:Lp,useRef:JD,useState:function(){return Lp(Ac)},useDebugValue:R0,useDeferredValue:function(t){var e=pa();return aC(e,Pr.memoizedState,t)},useTransition:function(){var t=Lp(Ac)[0],e=pa().memoizedState;return[t,e]},useMutableSource:qD,useSyncExternalStore:HD,useId:iC,unstable_isNewReconciler:!1},xO={readContext:ha,useCallback:rC,useContext:ha,useEffect:P0,useImperativeHandle:tC,useInsertionEffect:YD,useLayoutEffect:ZD,useMemo:nC,useReducer:zp,useRef:JD,useState:function(){return zp(Ac)},useDebugValue:R0,useDeferredValue:function(t){var e=pa();return Pr===null?e.memoizedState=t:aC(e,Pr.memoizedState,t)},useTransition:function(){var t=zp(Ac)[0],e=pa().memoizedState;return[t,e]},useMutableSource:qD,useSyncExternalStore:HD,useId:iC,unstable_isNewReconciler:!1};function Na(t,e){if(t&&t.defaultProps){e=hr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Vv(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:hr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var uh={isMounted:function(t){return(t=t._reactInternals)?yo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Sn(),a=as(t),i=hi(n,a);i.payload=e,r!=null&&(i.callback=r),e=rs(t,i,a),e!==null&&(Ca(e,t,a,n),Cd(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Sn(),a=as(t),i=hi(n,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=rs(t,i,a),e!==null&&(Ca(e,t,a,n),Cd(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Sn(),n=as(t),a=hi(r,n);a.tag=2,e!=null&&(a.callback=e),e=rs(t,a,n),e!==null&&(Ca(e,t,n,r),Cd(e,t,n))}};function ow(t,e,r,n,a,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!xc(r,n)||!xc(a,i):!0}function uC(t,e,r){var n=!1,a=hs,i=e.contextType;return typeof i=="object"&&i!==null?i=ha(i):(a=kn(e)?so:gn.current,n=e.contextTypes,i=(n=n!=null)?Cl(t,a):hs),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function lw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&uh.enqueueReplaceState(e,e.state,null)}function Uv(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},A0(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=ha(i):(i=kn(e)?so:gn.current,a.context=Cl(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Vv(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&uh.enqueueReplaceState(a,a.state,null),am(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Fl(t,e){try{var r="",n=e;do r+=WP(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function Vp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function qv(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var bO=typeof WeakMap=="function"?WeakMap:Map;function cC(t,e,r){r=hi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){um||(um=!0,eg=n),qv(t,e)},r}function fC(t,e,r){r=hi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){qv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){qv(t,e),typeof n!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function uw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new bO;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=RO.bind(null,t,e,r),e.then(t,t))}function cw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fw(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=hi(-1,1),e.tag=2,rs(r,e,1))),r.lanes|=1),t)}var wO=Ai.ReactCurrentOwner,Bn=!1;function _n(t,e,r,n){e.child=t===null?LD(e,null,r,n):Ml(e,t.child,r,n)}function dw(t,e,r,n,a){r=r.render;var i=e.ref;return yl(e,a),n=I0(t,e,r,n,i,a),r=F0(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,bi(t,e,a)):(cr&&r&&x0(e),e.flags|=1,_n(t,e,n,a),e.child)}function mw(t,e,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!V0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,dC(t,e,i,n,a)):(t=Rd(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:xc,r(s,n)&&t.ref===e.ref)return bi(t,e,a)}return e.flags|=1,t=is(i,n),t.ref=e.ref,t.return=e,e.child=t}function dC(t,e,r,n,a){if(t!==null){var i=t.memoizedProps;if(xc(i,n)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,bi(t,e,a)}return Hv(t,e,r,n,a)}function mC(t,e,r){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(cl,Gn),Gn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nr(cl,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,nr(cl,Gn),Gn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,nr(cl,Gn),Gn|=n;return _n(t,e,a,r),e.child}function hC(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Hv(t,e,r,n,a){var i=kn(r)?so:gn.current;return i=Cl(e,i),yl(e,a),r=I0(t,e,r,n,i,a),n=F0(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,bi(t,e,a)):(cr&&n&&x0(e),e.flags|=1,_n(t,e,r,a),e.child)}function hw(t,e,r,n,a){if(kn(r)){var i=!0;Zd(e)}else i=!1;if(yl(e,a),e.stateNode===null)Id(t,e),uC(e,r,n),Uv(e,r,n,a),n=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,o=r.contextType;typeof o=="object"&&o!==null?o=ha(o):(o=kn(r)?so:gn.current,o=Cl(e,o));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||u!==o)&&lw(e,s,n,o),zi=!1;var d=e.memoizedState;s.state=d,am(e,n,s,a),u=e.memoizedState,l!==n||d!==u||jn.current||zi?(typeof c=="function"&&(Vv(e,r,c,n),u=e.memoizedState),(l=zi||ow(e,r,l,n,d,u,o))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=o,n=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,VD(t,e),l=e.memoizedProps,o=e.type===e.elementType?l:Na(e.type,l),s.props=o,f=e.pendingProps,d=s.context,u=r.contextType,typeof u=="object"&&u!==null?u=ha(u):(u=kn(r)?so:gn.current,u=Cl(e,u));var m=r.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||d!==u)&&lw(e,s,n,u),zi=!1,d=e.memoizedState,s.state=d,am(e,n,s,a);var p=e.memoizedState;l!==f||d!==p||jn.current||zi?(typeof m=="function"&&(Vv(e,r,m,n),p=e.memoizedState),(o=zi||ow(e,r,o,n,d,p,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,p,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,p,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=u,n=o):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return Gv(t,e,r,n,i,a)}function Gv(t,e,r,n,a,i){hC(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return a&&Zb(e,r,!1),bi(t,e,i);n=e.stateNode,wO.current=e;var l=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Ml(e,t.child,null,i),e.child=Ml(e,null,l,i)):_n(t,e,l,i),e.memoizedState=n.state,a&&Zb(e,r,!0),e.child}function pC(t){var e=t.stateNode;e.pendingContext?Yb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yb(t,e.context,!1),D0(t,e.containerInfo)}function pw(t,e,r,n,a){return Tl(),w0(a),e.flags|=256,_n(t,e,r,n),e.child}var Wv={dehydrated:null,treeContext:null,retryLane:0};function Qv(t){return{baseLanes:t,cachePool:null,transitions:null}}function vC(t,e,r){var n=e.pendingProps,a=dr.current,i=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),nr(dr,a&1),t===null)return Lv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,i?(n=e.mode,i=e.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=dh(s,n,0,null),t=ao(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qv(r),e.memoizedState=Wv,t):O0(e,s));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return NO(t,e,s,n,l,a,r);if(i){i=n.fallback,s=e.mode,a=t.child,l=a.sibling;var u={mode:"hidden",children:n.children};return!(s&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=is(a,u),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=is(l,i):(i=ao(i,s,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,s=t.child.memoizedState,s=s===null?Qv(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~r,e.memoizedState=Wv,n}return i=t.child,t=i.sibling,n=is(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function O0(t,e){return e=dh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wf(t,e,r,n){return n!==null&&w0(n),Ml(e,t.child,null,r),t=O0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NO(t,e,r,n,a,i,s){if(r)return e.flags&256?(e.flags&=-257,n=Vp(Error(Re(422))),Wf(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=dh({mode:"visible",children:n.children},a,0,null),i=ao(i,a,s,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ml(e,t.child,null,s),e.child.memoizedState=Qv(s),e.memoizedState=Wv,i);if(!(e.mode&1))return Wf(t,e,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Re(419)),n=Vp(i,n,void 0),Wf(t,e,s,n)}if(l=(s&t.childLanes)!==0,Bn||l){if(n=Xr,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,xi(t,a),Ca(n,t,a,-1))}return z0(),n=Vp(Error(Re(421))),Wf(t,e,s,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=OO.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Qn=ts(a.nextSibling),Xn=e,cr=!0,Sa=null,t!==null&&(sa[oa++]=ci,sa[oa++]=fi,sa[oa++]=oo,ci=t.id,fi=t.overflow,oo=e),e=O0(e,n.children),e.flags|=4096,e)}function vw(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zv(t.return,e,r)}function Up(t,e,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function gC(t,e,r){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(_n(t,e,n.children,r),n=dr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vw(t,r,e);else if(t.tag===19)vw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(nr(dr,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&im(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Up(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&im(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Up(e,!0,r,null,i);break;case"together":Up(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),uo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Re(153));if(e.child!==null){for(t=e.child,r=is(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=is(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function _O(t,e,r){switch(e.tag){case 3:pC(e),Tl();break;case 5:UD(e);break;case 1:kn(e.type)&&Zd(e);break;case 4:D0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;nr(rm,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(nr(dr,dr.current&1),e.flags|=128,null):r&e.child.childLanes?vC(t,e,r):(nr(dr,dr.current&1),t=bi(t,e,r),t!==null?t.sibling:null);nr(dr,dr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return gC(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nr(dr,dr.current),n)break;return null;case 22:case 23:return e.lanes=0,mC(t,e,r)}return bi(t,e,r)}var yC,Xv,xC,bC;yC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xv=function(){};xC=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Zs(Wa.current);var i=null;switch(r){case"input":a=gv(t,a),n=gv(t,n),i=[];break;case"select":a=hr({},a,{value:void 0}),n=hr({},n,{value:void 0}),i=[];break;case"textarea":a=bv(t,a),n=bv(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Jd)}Nv(r,n);var s;r=null;for(o in a)if(!n.hasOwnProperty(o)&&a.hasOwnProperty(o)&&a[o]!=null)if(o==="style"){var l=a[o];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(dc.hasOwnProperty(o)?i||(i=[]):(i=i||[]).push(o,null));for(o in n){var u=n[o];if(l=a!=null?a[o]:void 0,n.hasOwnProperty(o)&&u!==l&&(u!=null||l!=null))if(o==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(r||(r={}),r[s]=u[s])}else r||(i||(i=[]),i.push(o,r)),r=u;else o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(o,u)):o==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(o,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(dc.hasOwnProperty(o)?(u!=null&&o==="onScroll"&&ir("scroll",t),i||l===u||(i=[])):(i=i||[]).push(o,u))}r&&(i=i||[]).push("style",r);var o=i;(e.updateQueue=o)&&(e.flags|=4)}};bC=function(t,e,r,n){r!==n&&(e.flags|=4)};function ju(t,e){if(!cr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function SO(t,e,r){var n=e.pendingProps;switch(b0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return kn(e.type)&&Yd(),cn(e),null;case 3:return n=e.stateNode,Il(),or(jn),or(gn),T0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Hf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sa!==null&&(ng(Sa),Sa=null))),Xv(t,e),cn(e),null;case 5:C0(e);var a=Zs(Sc.current);if(r=e.type,t!==null&&e.stateNode!=null)xC(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Re(166));return cn(e),null}if(t=Zs(Wa.current),Hf(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[qa]=e,n[Nc]=i,t=(e.mode&1)!==0,r){case"dialog":ir("cancel",n),ir("close",n);break;case"iframe":case"object":case"embed":ir("load",n);break;case"video":case"audio":for(a=0;a<qu.length;a++)ir(qu[a],n);break;case"source":ir("error",n);break;case"img":case"image":case"link":ir("error",n),ir("load",n);break;case"details":ir("toggle",n);break;case"input":Eb(n,i),ir("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ir("invalid",n);break;case"textarea":Db(n,i),ir("invalid",n)}Nv(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&qf(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&qf(n.textContent,l,t),a=["children",""+l]):dc.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ir("scroll",n)}switch(r){case"input":Bf(n),Ab(n,i,!0);break;case"textarea":Bf(n),Cb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Jd)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=QA(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[qa]=e,t[Nc]=n,yC(t,e,!1,!1),e.stateNode=t;e:{switch(s=_v(r,n),r){case"dialog":ir("cancel",t),ir("close",t),a=n;break;case"iframe":case"object":case"embed":ir("load",t),a=n;break;case"video":case"audio":for(a=0;a<qu.length;a++)ir(qu[a],t);a=n;break;case"source":ir("error",t),a=n;break;case"img":case"image":case"link":ir("error",t),ir("load",t),a=n;break;case"details":ir("toggle",t),a=n;break;case"input":Eb(t,n),a=gv(t,n),ir("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=hr({},n,{value:void 0}),ir("invalid",t);break;case"textarea":Db(t,n),a=bv(t,n),ir("invalid",t);break;default:a=n}Nv(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?JA(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&XA(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&mc(t,u):typeof u=="number"&&mc(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dc.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ir("scroll",t):u!=null&&i0(t,i,u,s))}switch(r){case"input":Bf(t),Ab(t,n,!1);break;case"textarea":Bf(t),Cb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ms(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?hl(t,!!n.multiple,i,!1):n.defaultValue!=null&&hl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Jd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)bC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Re(166));if(r=Zs(Sc.current),Zs(Wa.current),Hf(e)){if(n=e.stateNode,r=e.memoizedProps,n[qa]=e,(i=n.nodeValue!==r)&&(t=Xn,t!==null))switch(t.tag){case 3:qf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qf(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[qa]=e,e.stateNode=n}return cn(e),null;case 13:if(or(dr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cr&&Qn!==null&&e.mode&1&&!(e.flags&128))kD(),Tl(),e.flags|=98560,i=!1;else if(i=Hf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Re(317));i[qa]=e}else Tl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),i=!1}else Sa!==null&&(ng(Sa),Sa=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||dr.current&1?Or===0&&(Or=3):z0())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return Il(),Xv(t,e),t===null&&bc(e.stateNode.containerInfo),cn(e),null;case 10:return S0(e.type._context),cn(e),null;case 17:return kn(e.type)&&Yd(),cn(e),null;case 19:if(or(dr),i=e.memoizedState,i===null)return cn(e),null;if(n=(e.flags&128)!==0,s=i.rendering,s===null)if(n)ju(i,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=im(t),s!==null){for(e.flags|=128,ju(i,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return nr(dr,dr.current&1|2),e.child}t=t.sibling}i.tail!==null&&_r()>Pl&&(e.flags|=128,n=!0,ju(i,!1),e.lanes=4194304)}else{if(!n)if(t=im(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ju(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!cr)return cn(e),null}else 2*_r()-i.renderingStartTime>Pl&&r!==1073741824&&(e.flags|=128,n=!0,ju(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(r=i.last,r!==null?r.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_r(),e.sibling=null,r=dr.current,nr(dr,n?r&1|2:r&1),e):(cn(e),null);case 22:case 23:return L0(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Gn&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function EO(t,e){switch(b0(e),e.tag){case 1:return kn(e.type)&&Yd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Il(),or(jn),or(gn),T0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return C0(e),null;case 13:if(or(dr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));Tl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return or(dr),null;case 4:return Il(),null;case 10:return S0(e.type._context),null;case 22:case 23:return L0(),null;case 24:return null;default:return null}}var Qf=!1,hn=!1,AO=typeof WeakSet=="function"?WeakSet:Set,qe=null;function ul(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){gr(t,e,n)}else r.current=null}function Kv(t,e,r){try{r()}catch(n){gr(t,e,n)}}var gw=!1;function DO(t,e){if(Pv=Qd,t=ED(),y0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,l=-1,u=-1,o=0,c=0,f=t,d=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=s+a),f!==i||n!==0&&f.nodeType!==3||(u=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)d=f,f=m;for(;;){if(f===t)break t;if(d===r&&++o===a&&(l=s),d===i&&++c===n&&(u=s),(m=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=m}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Rv={focusedElem:t,selectionRange:r},Qd=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var h=p.memoizedProps,D=p.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?h:Na(e.type,h),D);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(b){gr(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return p=gw,gw=!1,p}function rc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Kv(e,r,i)}a=a.next}while(a!==n)}}function ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Jv(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function wC(t){var e=t.alternate;e!==null&&(t.alternate=null,wC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qa],delete e[Nc],delete e[jv],delete e[uO],delete e[cO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NC(t){return t.tag===5||t.tag===3||t.tag===4}function yw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Jd));else if(n!==4&&(t=t.child,t!==null))for(Yv(t,e,r),t=t.sibling;t!==null;)Yv(t,e,r),t=t.sibling}function Zv(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Zv(t,e,r),t=t.sibling;t!==null;)Zv(t,e,r),t=t.sibling}var Jr=null,_a=!1;function ki(t,e,r){for(r=r.child;r!==null;)_C(t,e,r),r=r.sibling}function _C(t,e,r){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(rh,r)}catch{}switch(r.tag){case 5:hn||ul(r,e);case 6:var n=Jr,a=_a;Jr=null,ki(t,e,r),Jr=n,_a=a,Jr!==null&&(_a?(t=Jr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(_a?(t=Jr,r=r.stateNode,t.nodeType===8?Bp(t.parentNode,r):t.nodeType===1&&Bp(t,r),gc(t)):Bp(Jr,r.stateNode));break;case 4:n=Jr,a=_a,Jr=r.stateNode.containerInfo,_a=!0,ki(t,e,r),Jr=n,_a=a;break;case 0:case 11:case 14:case 15:if(!hn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Kv(r,e,s),a=a.next}while(a!==n)}ki(t,e,r);break;case 1:if(!hn&&(ul(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){gr(r,e,l)}ki(t,e,r);break;case 21:ki(t,e,r);break;case 22:r.mode&1?(hn=(n=hn)||r.memoizedState!==null,ki(t,e,r),hn=n):ki(t,e,r);break;default:ki(t,e,r)}}function xw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new AO),e.forEach(function(n){var a=BO.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ba(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Jr=l.stateNode,_a=!1;break e;case 3:Jr=l.stateNode.containerInfo,_a=!0;break e;case 4:Jr=l.stateNode.containerInfo,_a=!0;break e}l=l.return}if(Jr===null)throw Error(Re(160));_C(i,s,a),Jr=null,_a=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(o){gr(a,e,o)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SC(e,t),e=e.sibling}function SC(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ba(e,t),za(t),n&4){try{rc(3,t,t.return),ch(3,t)}catch(h){gr(t,t.return,h)}try{rc(5,t,t.return)}catch(h){gr(t,t.return,h)}}break;case 1:ba(e,t),za(t),n&512&&r!==null&&ul(r,r.return);break;case 5:if(ba(e,t),za(t),n&512&&r!==null&&ul(r,r.return),t.flags&32){var a=t.stateNode;try{mc(a,"")}catch(h){gr(t,t.return,h)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,s=r!==null?r.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&GA(a,i),_v(l,s);var o=_v(l,i);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?JA(a,f):c==="dangerouslySetInnerHTML"?XA(a,f):c==="children"?mc(a,f):i0(a,c,f,o)}switch(l){case"input":yv(a,i);break;case"textarea":WA(a,i);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?hl(a,!!i.multiple,m,!1):d!==!!i.multiple&&(i.defaultValue!=null?hl(a,!!i.multiple,i.defaultValue,!0):hl(a,!!i.multiple,i.multiple?[]:"",!1))}a[Nc]=i}catch(h){gr(t,t.return,h)}}break;case 6:if(ba(e,t),za(t),n&4){if(t.stateNode===null)throw Error(Re(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(h){gr(t,t.return,h)}}break;case 3:if(ba(e,t),za(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gc(e.containerInfo)}catch(h){gr(t,t.return,h)}break;case 4:ba(e,t),za(t);break;case 13:ba(e,t),za(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(k0=_r())),n&4&&xw(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(hn=(o=hn)||c,ba(e,t),hn=o):ba(e,t),za(t),n&8192){if(o=t.memoizedState!==null,(t.stateNode.isHidden=o)&&!c&&t.mode&1)for(qe=t,c=t.child;c!==null;){for(f=qe=c;qe!==null;){switch(d=qe,m=d.child,d.tag){case 0:case 11:case 14:case 15:rc(4,d,d.return);break;case 1:ul(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(h){gr(n,r,h)}}break;case 5:ul(d,d.return);break;case 22:if(d.memoizedState!==null){ww(f);continue}}m!==null?(m.return=d,qe=m):ww(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{a=f.stateNode,o?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=KA("display",s))}catch(h){gr(t,t.return,h)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=o?"":f.memoizedProps}catch(h){gr(t,t.return,h)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ba(e,t),za(t),n&4&&xw(t);break;case 21:break;default:ba(e,t),za(t)}}function za(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(NC(r)){var n=r;break e}r=r.return}throw Error(Re(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(mc(a,""),n.flags&=-33);var i=yw(t);Zv(t,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,l=yw(t);Yv(t,l,s);break;default:throw Error(Re(161))}}catch(u){gr(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CO(t,e,r){qe=t,EC(t)}function EC(t,e,r){for(var n=(t.mode&1)!==0;qe!==null;){var a=qe,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||Qf;if(!s){var l=a.alternate,u=l!==null&&l.memoizedState!==null||hn;l=Qf;var o=hn;if(Qf=s,(hn=u)&&!o)for(qe=a;qe!==null;)s=qe,u=s.child,s.tag===22&&s.memoizedState!==null?Nw(a):u!==null?(u.return=s,qe=u):Nw(a);for(;i!==null;)qe=i,EC(i),i=i.sibling;qe=a,Qf=l,hn=o}bw(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,qe=i):bw(t)}}function bw(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||ch(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!hn)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Na(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&aw(e,i,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}aw(e,s,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var o=e.alternate;if(o!==null){var c=o.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&gc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}hn||e.flags&512&&Jv(e)}catch(d){gr(e,e.return,d)}}if(e===t){qe=null;break}if(r=e.sibling,r!==null){r.return=e.return,qe=r;break}qe=e.return}}function ww(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,qe=r;break}qe=e.return}}function Nw(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ch(4,e)}catch(u){gr(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(u){gr(e,a,u)}}var i=e.return;try{Jv(e)}catch(u){gr(e,i,u)}break;case 5:var s=e.return;try{Jv(e)}catch(u){gr(e,s,u)}}}catch(u){gr(e,e.return,u)}if(e===t){qe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,qe=l;break}qe=e.return}}var TO=Math.ceil,lm=Ai.ReactCurrentDispatcher,B0=Ai.ReactCurrentOwner,da=Ai.ReactCurrentBatchConfig,Vt=0,Xr=null,Ar=null,rn=0,Gn=0,cl=As(0),Or=0,Cc=null,uo=0,fh=0,j0=0,nc=null,On=null,k0=0,Pl=1/0,li=null,um=!1,eg=null,ns=null,Xf=!1,Wi=null,cm=0,ac=0,tg=null,Fd=-1,Pd=0;function Sn(){return Vt&6?_r():Fd!==-1?Fd:Fd=_r()}function as(t){return t.mode&1?Vt&2&&rn!==0?rn&-rn:dO.transition!==null?(Pd===0&&(Pd=uD()),Pd):(t=Kt,t!==0||(t=window.event,t=t===void 0?16:vD(t.type)),t):1}function Ca(t,e,r,n){if(50<ac)throw ac=0,tg=null,Error(Re(185));Xc(t,r,n),(!(Vt&2)||t!==Xr)&&(t===Xr&&(!(Vt&2)&&(fh|=r),Or===4&&Hi(t,rn)),$n(t,n),r===1&&Vt===0&&!(e.mode&1)&&(Pl=_r()+500,oh&&Ds()))}function $n(t,e){var r=t.callbackNode;dR(t,e);var n=Wd(t,t===Xr?rn:0);if(n===0)r!==null&&Ib(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ib(r),e===1)t.tag===0?fO(_w.bind(null,t)):OD(_w.bind(null,t)),oO(function(){!(Vt&6)&&Ds()}),r=null;else{switch(cD(n)){case 1:r=c0;break;case 4:r=oD;break;case 16:r=Gd;break;case 536870912:r=lD;break;default:r=Gd}r=PC(r,AC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function AC(t,e){if(Fd=-1,Pd=0,Vt&6)throw Error(Re(327));var r=t.callbackNode;if(xl()&&t.callbackNode!==r)return null;var n=Wd(t,t===Xr?rn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=fm(t,n);else{e=n;var a=Vt;Vt|=2;var i=CC();(Xr!==t||rn!==e)&&(li=null,Pl=_r()+500,no(t,e));do try{FO();break}catch(l){DC(t,l)}while(!0);_0(),lm.current=i,Vt=a,Ar!==null?e=0:(Xr=null,rn=0,e=Or)}if(e!==0){if(e===2&&(a=Cv(t),a!==0&&(n=a,e=rg(t,a))),e===1)throw r=Cc,no(t,0),Hi(t,n),$n(t,_r()),r;if(e===6)Hi(t,n);else{if(a=t.current.alternate,!(n&30)&&!MO(a)&&(e=fm(t,n),e===2&&(i=Cv(t),i!==0&&(n=i,e=rg(t,i))),e===1))throw r=Cc,no(t,0),Hi(t,n),$n(t,_r()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(Re(345));case 2:Ws(t,On,li);break;case 3:if(Hi(t,n),(n&130023424)===n&&(e=k0+500-_r(),10<e)){if(Wd(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Sn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Bv(Ws.bind(null,t,On,li),e);break}Ws(t,On,li);break;case 4:if(Hi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var s=31-Da(n);i=1<<s,s=e[s],s>a&&(a=s),n&=~i}if(n=a,n=_r()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*TO(n/1960))-n,10<n){t.timeoutHandle=Bv(Ws.bind(null,t,On,li),n);break}Ws(t,On,li);break;case 5:Ws(t,On,li);break;default:throw Error(Re(329))}}}return $n(t,_r()),t.callbackNode===r?AC.bind(null,t):null}function rg(t,e){var r=nc;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=fm(t,e),t!==2&&(e=On,On=r,e!==null&&ng(e)),t}function ng(t){On===null?On=t:On.push.apply(On,t)}function MO(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ma(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hi(t,e){for(e&=~j0,e&=~fh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Da(e),n=1<<r;t[r]=-1,e&=~n}}function _w(t){if(Vt&6)throw Error(Re(327));xl();var e=Wd(t,0);if(!(e&1))return $n(t,_r()),null;var r=fm(t,e);if(t.tag!==0&&r===2){var n=Cv(t);n!==0&&(e=n,r=rg(t,n))}if(r===1)throw r=Cc,no(t,0),Hi(t,e),$n(t,_r()),r;if(r===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,On,li),$n(t,_r()),null}function $0(t,e){var r=Vt;Vt|=1;try{return t(e)}finally{Vt=r,Vt===0&&(Pl=_r()+500,oh&&Ds())}}function co(t){Wi!==null&&Wi.tag===0&&!(Vt&6)&&xl();var e=Vt;Vt|=1;var r=da.transition,n=Kt;try{if(da.transition=null,Kt=1,t)return t()}finally{Kt=n,da.transition=r,Vt=e,!(Vt&6)&&Ds()}}function L0(){Gn=cl.current,or(cl)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,sO(r)),Ar!==null)for(r=Ar.return;r!==null;){var n=r;switch(b0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yd();break;case 3:Il(),or(jn),or(gn),T0();break;case 5:C0(n);break;case 4:Il();break;case 13:or(dr);break;case 19:or(dr);break;case 10:S0(n.type._context);break;case 22:case 23:L0()}r=r.return}if(Xr=t,Ar=t=is(t.current,null),rn=Gn=e,Or=0,Cc=null,j0=fh=uo=0,On=nc=null,Ys!==null){for(e=0;e<Ys.length;e++)if(r=Ys[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}Ys=null}return t}function DC(t,e){do{var r=Ar;try{if(_0(),Td.current=om,sm){for(var n=mr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}sm=!1}if(lo=0,Gr=Pr=mr=null,tc=!1,Ec=0,B0.current=null,r===null||r.return===null){Or=1,Cc=e,Ar=null;break}e:{var i=t,s=r.return,l=r,u=e;if(e=rn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var o=u,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=cw(s);if(m!==null){m.flags&=-257,fw(m,s,l,i,e),m.mode&1&&uw(i,o,e),e=m,u=o;var p=e.updateQueue;if(p===null){var h=new Set;h.add(u),e.updateQueue=h}else p.add(u);break e}else{if(!(e&1)){uw(i,o,e),z0();break e}u=Error(Re(426))}}else if(cr&&l.mode&1){var D=cw(s);if(D!==null){!(D.flags&65536)&&(D.flags|=256),fw(D,s,l,i,e),w0(Fl(u,l));break e}}i=u=Fl(u,l),Or!==4&&(Or=2),nc===null?nc=[i]:nc.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=cC(i,u,e);nw(i,w);break e;case 1:l=u;var S=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ns===null||!ns.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=fC(i,l,e);nw(i,b);break e}}i=i.return}while(i!==null)}MC(r)}catch(N){e=N,Ar===r&&r!==null&&(Ar=r=r.return);continue}break}while(!0)}function CC(){var t=lm.current;return lm.current=om,t===null?om:t}function z0(){(Or===0||Or===3||Or===2)&&(Or=4),Xr===null||!(uo&268435455)&&!(fh&268435455)||Hi(Xr,rn)}function fm(t,e){var r=Vt;Vt|=2;var n=CC();(Xr!==t||rn!==e)&&(li=null,no(t,e));do try{IO();break}catch(a){DC(t,a)}while(!0);if(_0(),Vt=r,lm.current=n,Ar!==null)throw Error(Re(261));return Xr=null,rn=0,Or}function IO(){for(;Ar!==null;)TC(Ar)}function FO(){for(;Ar!==null&&!nR();)TC(Ar)}function TC(t){var e=FC(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?MC(t):Ar=e,B0.current=null}function MC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=EO(r,e),r!==null){r.flags&=32767,Ar=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,Ar=null;return}}else if(r=SO(r,e,Gn),r!==null){Ar=r;return}if(e=e.sibling,e!==null){Ar=e;return}Ar=e=t}while(e!==null);Or===0&&(Or=5)}function Ws(t,e,r){var n=Kt,a=da.transition;try{da.transition=null,Kt=1,PO(t,e,r,n)}finally{da.transition=a,Kt=n}return null}function PO(t,e,r,n){do xl();while(Wi!==null);if(Vt&6)throw Error(Re(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(mR(t,i),t===Xr&&(Ar=Xr=null,rn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xf||(Xf=!0,PC(Gd,function(){return xl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=da.transition,da.transition=null;var s=Kt;Kt=1;var l=Vt;Vt|=4,B0.current=null,DO(t,r),SC(r,t),ZR(Rv),Qd=!!Pv,Rv=Pv=null,t.current=r,CO(r),aR(),Vt=l,Kt=s,da.transition=i}else t.current=r;if(Xf&&(Xf=!1,Wi=t,cm=a),i=t.pendingLanes,i===0&&(ns=null),oR(r.stateNode),$n(t,_r()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(um)throw um=!1,t=eg,eg=null,t;return cm&1&&t.tag!==0&&xl(),i=t.pendingLanes,i&1?t===tg?ac++:(ac=0,tg=t):ac=0,Ds(),null}function xl(){if(Wi!==null){var t=cD(cm),e=da.transition,r=Kt;try{if(da.transition=null,Kt=16>t?16:t,Wi===null)var n=!1;else{if(t=Wi,Wi=null,cm=0,Vt&6)throw Error(Re(331));var a=Vt;for(Vt|=4,qe=t.current;qe!==null;){var i=qe,s=i.child;if(qe.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var o=l[u];for(qe=o;qe!==null;){var c=qe;switch(c.tag){case 0:case 11:case 15:rc(8,c,i)}var f=c.child;if(f!==null)f.return=c,qe=f;else for(;qe!==null;){c=qe;var d=c.sibling,m=c.return;if(wC(c),c===o){qe=null;break}if(d!==null){d.return=m,qe=d;break}qe=m}}}var p=i.alternate;if(p!==null){var h=p.child;if(h!==null){p.child=null;do{var D=h.sibling;h.sibling=null,h=D}while(h!==null)}}qe=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,qe=s;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,qe=w;break e}qe=i.return}}var S=t.current;for(qe=S;qe!==null;){s=qe;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,qe=x;else e:for(s=S;qe!==null;){if(l=qe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ch(9,l)}}catch(N){gr(l,l.return,N)}if(l===s){qe=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,qe=b;break e}qe=l.return}}if(Vt=a,Ds(),Ga&&typeof Ga.onPostCommitFiberRoot=="function")try{Ga.onPostCommitFiberRoot(rh,t)}catch{}n=!0}return n}finally{Kt=r,da.transition=e}}return!1}function Sw(t,e,r){e=Fl(r,e),e=cC(t,e,1),t=rs(t,e,1),e=Sn(),t!==null&&(Xc(t,1,e),$n(t,e))}function gr(t,e,r){if(t.tag===3)Sw(t,t,r);else for(;e!==null;){if(e.tag===3){Sw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ns===null||!ns.has(n))){t=Fl(r,t),t=fC(e,t,1),e=rs(e,t,1),t=Sn(),e!==null&&(Xc(e,1,t),$n(e,t));break}}e=e.return}}function RO(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&r,Xr===t&&(rn&r)===r&&(Or===4||Or===3&&(rn&130023424)===rn&&500>_r()-k0?no(t,0):j0|=r),$n(t,e)}function IC(t,e){e===0&&(t.mode&1?(e=$f,$f<<=1,!($f&130023424)&&($f=4194304)):e=1);var r=Sn();t=xi(t,e),t!==null&&(Xc(t,e,r),$n(t,r))}function OO(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),IC(t,r)}function BO(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Re(314))}n!==null&&n.delete(e),IC(t,r)}var FC;FC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||jn.current)Bn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Bn=!1,_O(t,e,r);Bn=!!(t.flags&131072)}else Bn=!1,cr&&e.flags&1048576&&BD(e,tm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Id(t,e),t=e.pendingProps;var a=Cl(e,gn.current);yl(e,r),a=I0(null,e,n,t,a,r);var i=F0();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(n)?(i=!0,Zd(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,A0(e),a.updater=uh,e.stateNode=a,a._reactInternals=e,Uv(e,n,t,r),e=Gv(null,e,n,!0,i,r)):(e.tag=0,cr&&i&&x0(e),_n(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Id(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=kO(n),t=Na(n,t),a){case 0:e=Hv(null,e,n,t,r);break e;case 1:e=hw(null,e,n,t,r);break e;case 11:e=dw(null,e,n,t,r);break e;case 14:e=mw(null,e,n,Na(n.type,t),r);break e}throw Error(Re(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),Hv(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),hw(t,e,n,a,r);case 3:e:{if(pC(e),t===null)throw Error(Re(387));n=e.pendingProps,i=e.memoizedState,a=i.element,VD(t,e),am(e,n,null,r);var s=e.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=Fl(Error(Re(423)),e),e=pw(t,e,n,r,a);break e}else if(n!==a){a=Fl(Error(Re(424)),e),e=pw(t,e,n,r,a);break e}else for(Qn=ts(e.stateNode.containerInfo.firstChild),Xn=e,cr=!0,Sa=null,r=LD(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Tl(),n===a){e=bi(t,e,r);break e}_n(t,e,n,r)}e=e.child}return e;case 5:return UD(e),t===null&&Lv(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,s=a.children,Ov(n,a)?s=null:i!==null&&Ov(n,i)&&(e.flags|=32),hC(t,e),_n(t,e,s,r),e.child;case 6:return t===null&&Lv(e),null;case 13:return vC(t,e,r);case 4:return D0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ml(e,null,n,r):_n(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),dw(t,e,n,a,r);case 7:return _n(t,e,e.pendingProps,r),e.child;case 8:return _n(t,e,e.pendingProps.children,r),e.child;case 12:return _n(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,s=a.value,nr(rm,n._currentValue),n._currentValue=s,i!==null)if(Ma(i.value,s)){if(i.children===a.children&&!jn.current){e=bi(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=hi(-1,r&-r),u.tag=2;var o=i.updateQueue;if(o!==null){o=o.shared;var c=o.pending;c===null?u.next=u:(u.next=c.next,c.next=u),o.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),zv(i.return,r,e),l.lanes|=r;break}u=u.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(Re(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),zv(s,r,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}_n(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,yl(e,r),a=ha(a),n=n(a),e.flags|=1,_n(t,e,n,r),e.child;case 14:return n=e.type,a=Na(n,e.pendingProps),a=Na(n.type,a),mw(t,e,n,a,r);case 15:return dC(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Na(n,a),Id(t,e),e.tag=1,kn(n)?(t=!0,Zd(e)):t=!1,yl(e,r),uC(e,n,a),Uv(e,n,a,r),Gv(null,e,n,!0,t,r);case 19:return gC(t,e,r);case 22:return mC(t,e,r)}throw Error(Re(156,e.tag))};function PC(t,e){return sD(t,e)}function jO(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(t,e,r,n){return new jO(t,e,r,n)}function V0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kO(t){if(typeof t=="function")return V0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===o0)return 11;if(t===l0)return 14}return 2}function is(t,e){var r=t.alternate;return r===null?(r=fa(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Rd(t,e,r,n,a,i){var s=2;if(n=t,typeof t=="function")V0(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case el:return ao(r.children,a,i,e);case s0:s=8,a|=8;break;case mv:return t=fa(12,r,e,a|2),t.elementType=mv,t.lanes=i,t;case hv:return t=fa(13,r,e,a),t.elementType=hv,t.lanes=i,t;case pv:return t=fa(19,r,e,a),t.elementType=pv,t.lanes=i,t;case UA:return dh(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zA:s=10;break e;case VA:s=9;break e;case o0:s=11;break e;case l0:s=14;break e;case Li:s=16,n=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return e=fa(s,r,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function ao(t,e,r,n){return t=fa(7,t,n,e),t.lanes=r,t}function dh(t,e,r,n){return t=fa(22,t,n,e),t.elementType=UA,t.lanes=r,t.stateNode={isHidden:!1},t}function qp(t,e,r){return t=fa(6,t,null,e),t.lanes=r,t}function Hp(t,e,r){return e=fa(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $O(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ep(0),this.expirationTimes=Ep(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ep(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function U0(t,e,r,n,a,i,s,l,u){return t=new $O(t,e,r,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=fa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},A0(i),t}function LO(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function RC(t){if(!t)return hs;t=t._reactInternals;e:{if(yo(t)!==t||t.tag!==1)throw Error(Re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(t.tag===1){var r=t.type;if(kn(r))return RD(t,r,e)}return e}function OC(t,e,r,n,a,i,s,l,u){return t=U0(r,n,!0,t,a,i,s,l,u),t.context=RC(null),r=t.current,n=Sn(),a=as(r),i=hi(n,a),i.callback=e??null,rs(r,i,a),t.current.lanes=a,Xc(t,a,n),$n(t,n),t}function mh(t,e,r,n){var a=e.current,i=Sn(),s=as(a);return r=RC(r),e.context===null?e.context=r:e.pendingContext=r,e=hi(i,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=rs(a,e,s),t!==null&&(Ca(t,a,s,i),Cd(t,a,s)),s}function dm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ew(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function q0(t,e){Ew(t,e),(t=t.alternate)&&Ew(t,e)}function zO(){return null}var BC=typeof reportError=="function"?reportError:function(t){console.error(t)};function H0(t){this._internalRoot=t}hh.prototype.render=H0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Re(409));mh(t,e,null,null)};hh.prototype.unmount=H0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;co(function(){mh(null,t,null,null)}),e[yi]=null}};function hh(t){this._internalRoot=t}hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=mD();t={blockedOn:null,target:t,priority:e};for(var r=0;r<qi.length&&e!==0&&e<qi[r].priority;r++);qi.splice(r,0,t),r===0&&pD(t)}};function G0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Aw(){}function VO(t,e,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var o=dm(s);i.call(o)}}var s=OC(e,n,t,0,null,!1,!1,"",Aw);return t._reactRootContainer=s,t[yi]=s.current,bc(t.nodeType===8?t.parentNode:t),co(),s}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var o=dm(u);l.call(o)}}var u=U0(t,0,!1,null,null,!1,!1,"",Aw);return t._reactRootContainer=u,t[yi]=u.current,bc(t.nodeType===8?t.parentNode:t),co(function(){mh(e,u,r,n)}),u}function vh(t,e,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var l=a;a=function(){var u=dm(s);l.call(u)}}mh(e,s,t,a)}else s=VO(r,e,t,a,n);return dm(s)}fD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Uu(e.pendingLanes);r!==0&&(f0(e,r|1),$n(e,_r()),!(Vt&6)&&(Pl=_r()+500,Ds()))}break;case 13:co(function(){var n=xi(t,1);if(n!==null){var a=Sn();Ca(n,t,1,a)}}),q0(t,1)}};d0=function(t){if(t.tag===13){var e=xi(t,134217728);if(e!==null){var r=Sn();Ca(e,t,134217728,r)}q0(t,134217728)}};dD=function(t){if(t.tag===13){var e=as(t),r=xi(t,e);if(r!==null){var n=Sn();Ca(r,t,e,n)}q0(t,e)}};mD=function(){return Kt};hD=function(t,e){var r=Kt;try{return Kt=t,e()}finally{Kt=r}};Ev=function(t,e,r){switch(e){case"input":if(yv(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=sh(n);if(!a)throw Error(Re(90));HA(n),yv(n,a)}}}break;case"textarea":WA(t,r);break;case"select":e=r.value,e!=null&&hl(t,!!r.multiple,e,!1)}};eD=$0;tD=co;var UO={usingClientEntryPoint:!1,Events:[Jc,al,sh,YA,ZA,$0]},ku={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qO={bundleType:ku.bundleType,version:ku.version,rendererPackageName:ku.rendererPackageName,rendererConfig:ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aD(t),t===null?null:t.stateNode},findFiberByHostInstance:ku.findFiberByHostInstance||zO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{rh=Kf.inject(qO),Ga=Kf}catch{}}Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UO;Yn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G0(e))throw Error(Re(200));return LO(t,e,null,r)};Yn.createRoot=function(t,e){if(!G0(t))throw Error(Re(299));var r=!1,n="",a=BC;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=U0(t,1,!1,null,null,r,!1,n,a),t[yi]=e.current,bc(t.nodeType===8?t.parentNode:t),new H0(e)};Yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=aD(e),t=t===null?null:t.stateNode,t};Yn.flushSync=function(t){return co(t)};Yn.hydrate=function(t,e,r){if(!ph(e))throw Error(Re(200));return vh(null,t,e,!0,r)};Yn.hydrateRoot=function(t,e,r){if(!G0(t))throw Error(Re(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=BC;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=OC(e,null,t,1,r??null,a,!1,i,s),t[yi]=e.current,bc(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new hh(e)};Yn.render=function(t,e,r){if(!ph(e))throw Error(Re(200));return vh(null,t,e,!1,r)};Yn.unmountComponentAtNode=function(t){if(!ph(t))throw Error(Re(40));return t._reactRootContainer?(co(function(){vh(null,null,t,!1,function(){t._reactRootContainer=null,t[yi]=null})}),!0):!1};Yn.unstable_batchedUpdates=$0;Yn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ph(r))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return vh(t,e,r,!1,n)};Yn.version="18.3.1-next-f1338f8080-20240426";function jC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jC)}catch(t){console.error(t)}}jC(),jA.exports=Yn;var HO=jA.exports,kC,Dw=HO;kC=Dw.createRoot,Dw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tc.apply(this,arguments)}var Qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qi||(Qi={}));const Cw="popstate";function GO(t){t===void 0&&(t={});function e(n,a){let{pathname:i,search:s,hash:l}=n.location;return ag("",{pathname:i,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:mm(a)}return QO(e,r,null,t)}function Tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $C(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WO(){return Math.random().toString(36).substr(2,8)}function Tw(t,e){return{usr:t.state,key:t.key,idx:e}}function ag(t,e,r,n){return r===void 0&&(r=null),Tc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yl(e):e,{state:r,key:e&&e.key||n||WO()})}function mm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yl(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function QO(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,l=Qi.Pop,u=null,o=c();o==null&&(o=0,s.replaceState(Tc({},s.state,{idx:o}),""));function c(){return(s.state||{idx:null}).idx}function f(){l=Qi.Pop;let D=c(),w=D==null?null:D-o;o=D,u&&u({action:l,location:h.location,delta:w})}function d(D,w){l=Qi.Push;let S=ag(h.location,D,w);o=c()+1;let x=Tw(S,o),b=h.createHref(S);try{s.pushState(x,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(b)}i&&u&&u({action:l,location:h.location,delta:1})}function m(D,w){l=Qi.Replace;let S=ag(h.location,D,w);o=c();let x=Tw(S,o),b=h.createHref(S);s.replaceState(x,"",b),i&&u&&u({action:l,location:h.location,delta:0})}function p(D){let w=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof D=="string"?D:mm(D);return S=S.replace(/ $/,"%20"),Tr(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let h={get action(){return l},get location(){return t(a,s)},listen(D){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(Cw,f),u=D,()=>{a.removeEventListener(Cw,f),u=null}},createHref(D){return e(a,D)},createURL:p,encodeLocation(D){let w=p(D);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:d,replace:m,go(D){return s.go(D)}};return h}var Mw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mw||(Mw={}));function XO(t,e,r){return r===void 0&&(r="/"),KO(t,e,r)}function KO(t,e,r,n){let a=typeof e=="string"?Yl(e):e,i=W0(a.pathname||"/",r);if(i==null)return null;let s=LC(t);JO(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let o=u6(i);l=s6(s[u],o)}return l}function LC(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};u.relativePath.startsWith("/")&&(Tr(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let o=ss([n,u.relativePath]),c=r.concat(u);i.children&&i.children.length>0&&(Tr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),LC(i.children,e,c,o)),!(i.path==null&&!i.index)&&e.push({path:o,score:a6(o,i.index),routesMeta:c})};return t.forEach((i,s)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,s);else for(let u of zC(i.path))a(i,s,u)}),e}function zC(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=zC(n.join("/")),l=[];return l.push(...s.map(u=>u===""?i:[i,u].join("/"))),a&&l.push(...s),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function JO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:i6(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const YO=/^:[\w-]+$/,ZO=3,e6=2,t6=1,r6=10,n6=-2,Iw=t=>t==="*";function a6(t,e){let r=t.split("/"),n=r.length;return r.some(Iw)&&(n+=n6),e&&(n+=e6),r.filter(a=>!Iw(a)).reduce((a,i)=>a+(YO.test(i)?ZO:i===""?t6:r6),n)}function i6(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function s6(t,e,r){let{routesMeta:n}=t,a={},i="/",s=[];for(let l=0;l<n.length;++l){let u=n[l],o=l===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",f=o6({path:u.relativePath,caseSensitive:u.caseSensitive,end:o},c),d=u.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:ss([i,f.pathname]),pathnameBase:m6(ss([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=ss([i,f.pathnameBase]))}return s}function o6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=l6(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((o,c,f)=>{let{paramName:d,isOptional:m}=c;if(d==="*"){let h=l[f]||"";s=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const p=l[f];return m&&!p?o[d]=void 0:o[d]=(p||"").replace(/%2F/g,"/"),o},{}),pathname:i,pathnameBase:s,pattern:t}}function l6(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),$C(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function u6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $C(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function W0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function c6(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Yl(t):t;return{pathname:r?r.startsWith("/")?r:f6(r,e):e,search:h6(n),hash:p6(a)}}function f6(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Gp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d6(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function VC(t,e){let r=d6(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function UC(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Yl(t):(a=Tc({},t),Tr(!a.pathname||!a.pathname.includes("?"),Gp("?","pathname","search",a)),Tr(!a.pathname||!a.pathname.includes("#"),Gp("#","pathname","hash",a)),Tr(!a.search||!a.search.includes("#"),Gp("#","search","hash",a)));let i=t===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=r;else{let f=e.length-1;if(!n&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;a.pathname=d.join("/")}l=f>=0?e[f]:"/"}let u=c6(a,l),o=s&&s!=="/"&&s.endsWith("/"),c=(i||s===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(o||c)&&(u.pathname+="/"),u}const ss=t=>t.join("/").replace(/\/\/+/g,"/"),m6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),h6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,p6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function v6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qC=["post","put","patch","delete"];new Set(qC);const g6=["get",...qC];new Set(g6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mc(){return Mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mc.apply(this,arguments)}const Q0=U.createContext(null),y6=U.createContext(null),xo=U.createContext(null),gh=U.createContext(null),bo=U.createContext({outlet:null,matches:[],isDataRoute:!1}),HC=U.createContext(null);function x6(t,e){let{relative:r}=e===void 0?{}:e;Zc()||Tr(!1);let{basename:n,navigator:a}=U.useContext(xo),{hash:i,pathname:s,search:l}=WC(t,{relative:r}),u=s;return n!=="/"&&(u=s==="/"?n:ss([n,s])),a.createHref({pathname:u,search:l,hash:i})}function Zc(){return U.useContext(gh)!=null}function yh(){return Zc()||Tr(!1),U.useContext(gh).location}function GC(t){U.useContext(xo).static||U.useLayoutEffect(t)}function b6(){let{isDataRoute:t}=U.useContext(bo);return t?P6():w6()}function w6(){Zc()||Tr(!1);let t=U.useContext(Q0),{basename:e,future:r,navigator:n}=U.useContext(xo),{matches:a}=U.useContext(bo),{pathname:i}=yh(),s=JSON.stringify(VC(a,r.v7_relativeSplatPath)),l=U.useRef(!1);return GC(()=>{l.current=!0}),U.useCallback(function(o,c){if(c===void 0&&(c={}),!l.current)return;if(typeof o=="number"){n.go(o);return}let f=UC(o,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ss([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,i,t])}function WC(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=U.useContext(xo),{matches:a}=U.useContext(bo),{pathname:i}=yh(),s=JSON.stringify(VC(a,n.v7_relativeSplatPath));return U.useMemo(()=>UC(t,JSON.parse(s),i,r==="path"),[t,s,i,r])}function N6(t,e){return _6(t,e)}function _6(t,e,r,n){Zc()||Tr(!1);let{navigator:a}=U.useContext(xo),{matches:i}=U.useContext(bo),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let o=yh(),c;if(e){var f;let D=typeof e=="string"?Yl(e):e;u==="/"||(f=D.pathname)!=null&&f.startsWith(u)||Tr(!1),c=D}else c=o;let d=c.pathname||"/",m=d;if(u!=="/"){let D=u.replace(/^\//,"").split("/");m="/"+d.replace(/^\//,"").split("/").slice(D.length).join("/")}let p=XO(t,{pathname:m}),h=C6(p&&p.map(D=>Object.assign({},D,{params:Object.assign({},l,D.params),pathname:ss([u,a.encodeLocation?a.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?u:ss([u,a.encodeLocation?a.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),i,r,n);return e&&h?U.createElement(gh.Provider,{value:{location:Mc({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Qi.Pop}},h):h}function S6(){let t=F6(),e=v6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),r?U.createElement("pre",{style:a},r):null,null)}const E6=U.createElement(S6,null);class A6 extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?U.createElement(bo.Provider,{value:this.props.routeContext},U.createElement(HC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D6(t){let{routeContext:e,match:r,children:n}=t,a=U.useContext(Q0);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),U.createElement(bo.Provider,{value:e},n)}function C6(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let c=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);c>=0||Tr(!1),s=s.slice(0,Math.min(s.length,c+1))}let u=!1,o=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(o=c),f.route.id){let{loaderData:d,errors:m}=r,p=f.route.loader&&d[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||p){u=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((c,f,d)=>{let m,p=!1,h=null,D=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,h=f.route.errorElement||E6,u&&(o<0&&d===0?(R6("route-fallback"),p=!0,D=null):o===d&&(p=!0,D=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,d+1)),S=()=>{let x;return m?x=h:p?x=D:f.route.Component?x=U.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=c,U.createElement(D6,{match:f,routeContext:{outlet:c,matches:w,isDataRoute:r!=null},children:x})};return r&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?U.createElement(A6,{location:r.location,revalidation:r.revalidation,component:h,error:m,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var QC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(QC||{}),XC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XC||{});function T6(t){let e=U.useContext(Q0);return e||Tr(!1),e}function M6(t){let e=U.useContext(y6);return e||Tr(!1),e}function I6(t){let e=U.useContext(bo);return e||Tr(!1),e}function KC(t){let e=I6(),r=e.matches[e.matches.length-1];return r.route.id||Tr(!1),r.route.id}function F6(){var t;let e=U.useContext(HC),r=M6(),n=KC();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function P6(){let{router:t}=T6(QC.UseNavigateStable),e=KC(XC.UseNavigateStable),r=U.useRef(!1);return GC(()=>{r.current=!0}),U.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Mc({fromRouteId:e},i)))},[t,e])}const Fw={};function R6(t,e,r){Fw[t]||(Fw[t]=!0)}function O6(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wt(t){Tr(!1)}function B6(t){let{basename:e="/",children:r=null,location:n,navigationType:a=Qi.Pop,navigator:i,static:s=!1,future:l}=t;Zc()&&Tr(!1);let u=e.replace(/^\/*/,"/"),o=U.useMemo(()=>({basename:u,navigator:i,static:s,future:Mc({v7_relativeSplatPath:!1},l)}),[u,l,i,s]);typeof n=="string"&&(n=Yl(n));let{pathname:c="/",search:f="",hash:d="",state:m=null,key:p="default"}=n,h=U.useMemo(()=>{let D=W0(c,u);return D==null?null:{location:{pathname:D,search:f,hash:d,state:m,key:p},navigationType:a}},[u,c,f,d,m,p,a]);return h==null?null:U.createElement(xo.Provider,{value:o},U.createElement(gh.Provider,{children:r,value:h}))}function j6(t){let{children:e,location:r}=t;return N6(ig(e),r)}new Promise(()=>{});function ig(t,e){e===void 0&&(e=[]);let r=[];return U.Children.forEach(t,(n,a)=>{if(!U.isValidElement(n))return;let i=[...e,a];if(n.type===U.Fragment){r.push.apply(r,ig(n.props.children,i));return}n.type!==wt&&Tr(!1),!n.props.index||!n.props.children||Tr(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=ig(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sg(){return sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sg.apply(this,arguments)}function k6(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function $6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function L6(t,e){return t.button===0&&(!e||e==="_self")&&!$6(t)}const z6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],V6="6";try{window.__reactRouterVersion=V6}catch{}const U6="startTransition",Pw=RP[U6];function q6(t){let{basename:e,children:r,future:n,window:a}=t,i=U.useRef();i.current==null&&(i.current=GO({window:a,v5Compat:!0}));let s=i.current,[l,u]=U.useState({action:s.action,location:s.location}),{v7_startTransition:o}=n||{},c=U.useCallback(f=>{o&&Pw?Pw(()=>u(f)):u(f)},[u,o]);return U.useLayoutEffect(()=>s.listen(c),[s,c]),U.useEffect(()=>O6(n),[n]),U.createElement(B6,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:s,future:n})}const H6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",G6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W6=U.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:l,target:u,to:o,preventScrollReset:c,viewTransition:f}=e,d=k6(e,z6),{basename:m}=U.useContext(xo),p,h=!1;if(typeof o=="string"&&G6.test(o)&&(p=o,H6))try{let x=new URL(window.location.href),b=o.startsWith("//")?new URL(x.protocol+o):new URL(o),N=W0(b.pathname,m);b.origin===x.origin&&N!=null?o=N+b.search+b.hash:h=!0}catch{}let D=x6(o,{relative:a}),w=Q6(o,{replace:s,state:l,target:u,preventScrollReset:c,relative:a,viewTransition:f});function S(x){n&&n(x),x.defaultPrevented||w(x)}return U.createElement("a",sg({},d,{href:p||D,onClick:h||i?n:S,ref:r,target:u}))});var Rw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rw||(Rw={}));var Ow;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ow||(Ow={}));function Q6(t,e){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:l}=e===void 0?{}:e,u=b6(),o=yh(),c=WC(t,{relative:s});return U.useCallback(f=>{if(L6(f,r)){f.preventDefault();let d=n!==void 0?n:mm(o)===mm(c);u(t,{replace:d,state:a,preventScrollReset:i,relative:s,viewTransition:l})}},[o,u,c,n,a,r,t,i,s,l])}function X6(){const t=[{title:"1. Root of Equation",topics:[{id:"bisection",name:"Bisection Method",path:"/bisection"},{id:"falseposition",name:"False Position Method",path:"/falseposition"},{id:"onepoint",name:"One-Point Iteration",path:"/onepoint"},{id:"taylor",name:"Taylor Series",path:"/taylor"},{id:"newtonraphson",name:"Newton–Raphson Method",path:"/newtonraphson"},{id:"secant",name:"Secant Method",path:"/secant"}]},{title:"2. Linear System",topics:[{id:"cramer",name:"Cramer’s Rule",path:"/cramer"},{id:"gaussian",name:"Gaussian Elimination Method",path:"/gaussian"},{id:"gaussjordan",name:"Gauss–Jordan Method",path:"/gaussjordan"},{id:"matrixinversion",name:"Matrix Inversion Method",path:"/matrixinversion"},{id:"ludecomposition",name:"LU Decomposition",path:"/ludecomposition"},{id:"cholesky",name:"Cholesky Decomposition",path:"/cholesky"},{id:"jacobi",name:"Jacobi Iteration Method",path:"/jacobi"},{id:"gaussseidel",name:"Gauss–Seidel Iteration Method",path:"/gaussseidel"},{id:"conjugategradient",name:"Conjugate Gradient Method",path:"/conjugategradient"}]},{title:"3. Interpolation",topics:[{id:"lagrangeinterp",name:"Lagrange Interpolation",path:"/lagrangeinterp"},{id:"linearinterp",name:"Linear Interpolation",path:"/linearinterp"},{id:"quadraticinterp",name:"Quadratic Interpolation",path:"/quadraticinterp"},{id:"polynomialinterp",name:"Polynomial Interpolation",path:"/polynomialinterp"},{id:"linearspline",name:"Linear Spline",path:"/linearspline"},{id:"quadraticspline",name:"Quadratic Spline",path:"/quadraticspline"},{id:"cubicspline",name:"Cubic Spline",path:"/cubicspline"}]},{title:"4. Regression",topics:[{id:"singlelinear",name:"Single Linear Regression",path:"/singlelinear"},{id:"multiplelinear",name:"Multiple Linear Regression",path:"/multiplelinear"},{id:"polynomialreg",name:"Polynomial Regression",path:"/polynomialreg"},{id:"nonlinearreg",name:"Nonlinear Regression",path:"/nonlinearreg"}]},{title:"5. Integration",topics:[{id:"singletrapezoidal",name:"Single Trapezoidal Rule",path:"/singletrapezoidal"},{id:"compositetrapezoidal",name:"Composite Trapezoidal Rule",path:"/compositetrapezoidal"},{id:"simpsonsrule",name:"Simpson’s Rule",path:"/simpsonsrule"},{id:"compositesimpson",name:"Composite Simpson’s Rule",path:"/compositesimpson"}]},{title:"6. Differentiation",topics:[{id:"firstdivided",name:"First Divided-Difference",path:"/firstdivided"},{id:"seconddivided",name:"Second Divided-Difference",path:"/seconddivided"},{id:"forwarddivided",name:"Forward Divided-Difference",path:"/forwarddivided"},{id:"backwarddivided",name:"Backward Divided-Difference",path:"/backwarddivided"},{id:"centraldivided",name:"Central Divided-Difference",path:"/centraldivided"}]}];return v.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center p-6 bg-slate-900",children:[v.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-8 text-center fade-in",children:"Numerical Methods"}),v.jsx("div",{className:"flex justify-center items-center w-full",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:t.map(e=>v.jsxs("div",{className:`bg-slate-800 rounded-xl p-5 shadow-lg border border-cyan-700 w-72\r
                         transform transition-all duration-300 fade-in-delay1\r
                         hover:scale-105 hover:shadow-2xl glow-btn`,children:[v.jsx("h2",{className:"text-lg font-semibold text-cyan-300 mb-3 text-center",children:e.title}),v.jsx("ul",{className:"space-y-2",children:e.topics.map(r=>v.jsx("li",{className:"bg-slate-700 p-2 rounded-md hover:bg-slate-600 transition-colors",children:v.jsx(W6,{to:r.path,className:"block text-center",children:r.name})},r.id))})]},e.title))})})]})}const K6=()=>{};var Bw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},J6=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],l=t[r++],u=((a&7)<<18|(i&63)<<12|(s&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},YC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,l=s?t[a+1]:0,u=a+2<t.length,o=u?t[a+2]:0,c=i>>2,f=(i&3)<<4|l>>4;let d=(l&15)<<2|o>>6,m=o&63;u||(m=64,s||(d=64)),n.push(r[c],r[f],r[d],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):J6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const o=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||l==null||o==null||f==null)throw new Y6;const d=i<<2|l>>4;if(n.push(d),o!==64){const m=l<<4&240|o>>2;if(n.push(m),f!==64){const p=o<<6&192|f;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z6=function(t){const e=JC(t);return YC.encodeByteArray(e,!0)},hm=function(t){return Z6(t).replace(/\./g,"")},eB=function(t){try{return YC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=()=>tB().__FIREBASE_DEFAULTS__,nB=()=>{if(typeof process>"u"||typeof Bw>"u")return;const t=Bw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eB(t[1]);return e&&JSON.parse(e)},X0=()=>{try{return K6()||rB()||nB()||aB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iB=t=>{var e,r;return(r=(e=X0())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},sB=t=>{const e=iB(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},ZC=()=>{var t;return(t=X0())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lB(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[hm(JSON.stringify(r)),hm(JSON.stringify(s)),""].join(".")}const ic={};function cB(){const t={prod:[],emulator:[]};for(const e of Object.keys(ic))ic[e]?t.emulator.push(e):t.prod.push(e);return t}function fB(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let jw=!1;function dB(t,e){if(typeof window>"u"||typeof document>"u"||!K0(window.location.host)||ic[t]===e||ic[t]||jw)return;ic[t]=e;function r(d){return`__firebase__banner__${d}`}const n="__firebase__banner",i=cB().prod.length>0;function s(){const d=document.getElementById(n);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function u(d,m){d.setAttribute("width","24"),d.setAttribute("id",m),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function o(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{jw=!0,s()},d}function c(d,m){d.setAttribute("id",m),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=fB(n),m=r("text"),p=document.getElementById(m)||document.createElement("span"),h=r("learnmore"),D=document.getElementById(h)||document.createElement("a"),w=r("preprendIcon"),S=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const x=d.element;l(x),c(D,h);const b=o();u(S,w),x.append(S,p,D,b),document.body.appendChild(x)}i?(p.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hB(){var e;const t=(e=X0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pB(){return!hB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vB(){try{return typeof indexedDB=="object"}catch{return!1}}function gB(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB="FirebaseError";class Zl extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=yB,Object.setPrototypeOf(this,Zl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eT.prototype.create)}}class eT{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?xB(i,n):"Error",l=`${this.serviceName}: ${s} (${a}).`;return new Zl(a,l,n)}}function xB(t,e){return t.replace(bB,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const bB=/\{\$([^}]+)}/g;function pm(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(kw(i)&&kw(s)){if(!pm(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function kw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){return t&&t._delegate?t._delegate:t}class Ic{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new oB;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_B(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&s.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&e(i,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:NB(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NB(t){return t===Qs?void 0:t}function _B(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new wB(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const EB={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},AB=Ft.INFO,DB={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},CB=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=DB[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tT{constructor(e){this.name=e,this._logLevel=AB,this._logHandler=CB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const TB=(t,e)=>e.some(r=>t instanceof r);let $w,Lw;function MB(){return $w||($w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IB(){return Lw||(Lw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rT=new WeakMap,og=new WeakMap,nT=new WeakMap,Wp=new WeakMap,J0=new WeakMap;function FB(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(os(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&rT.set(r,t)}).catch(()=>{}),J0.set(e,t),e}function PB(t){if(og.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});og.set(t,e)}let lg={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nT.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return os(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RB(t){lg=t(lg)}function OB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Qp(this),e,...r);return nT.set(n,e.sort?e.sort():[e]),os(n)}:IB().includes(t)?function(...e){return t.apply(Qp(this),e),os(rT.get(this))}:function(...e){return os(t.apply(Qp(this),e))}}function BB(t){return typeof t=="function"?OB(t):(t instanceof IDBTransaction&&PB(t),TB(t,MB())?new Proxy(t,lg):t)}function os(t){if(t instanceof IDBRequest)return FB(t);if(Wp.has(t))return Wp.get(t);const e=BB(t);return e!==t&&(Wp.set(t,e),J0.set(e,t)),e}const Qp=t=>J0.get(t);function jB(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),l=os(s);return n&&s.addEventListener("upgradeneeded",u=>{n(os(s.result),u.oldVersion,u.newVersion,os(s.transaction),u)}),r&&s.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),a&&u.addEventListener("versionchange",o=>a(o.oldVersion,o.newVersion,o))}).catch(()=>{}),l}const kB=["get","getKey","getAll","getAllKeys","count"],$B=["put","add","delete","clear"],Xp=new Map;function zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=$B.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||kB.includes(r)))return;const i=async function(s,...l){const u=this.transaction(s,a?"readwrite":"readonly");let o=u.store;return n&&(o=o.index(l.shift())),(await Promise.all([o[r](...l),a&&u.done]))[0]};return Xp.set(e,i),i}RB(t=>({...t,get:(e,r,n)=>zw(e,r)||t.get(e,r,n),has:(e,r)=>!!zw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(zB(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function zB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ug="@firebase/app",Vw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new tT("@firebase/app"),VB="@firebase/app-compat",UB="@firebase/analytics-compat",qB="@firebase/analytics",HB="@firebase/app-check-compat",GB="@firebase/app-check",WB="@firebase/auth",QB="@firebase/auth-compat",XB="@firebase/database",KB="@firebase/data-connect",JB="@firebase/database-compat",YB="@firebase/functions",ZB="@firebase/functions-compat",ej="@firebase/installations",tj="@firebase/installations-compat",rj="@firebase/messaging",nj="@firebase/messaging-compat",aj="@firebase/performance",ij="@firebase/performance-compat",sj="@firebase/remote-config",oj="@firebase/remote-config-compat",lj="@firebase/storage",uj="@firebase/storage-compat",cj="@firebase/firestore",fj="@firebase/ai",dj="@firebase/firestore-compat",mj="firebase",hj="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",pj={[ug]:"fire-core",[VB]:"fire-core-compat",[qB]:"fire-analytics",[UB]:"fire-analytics-compat",[GB]:"fire-app-check",[HB]:"fire-app-check-compat",[WB]:"fire-auth",[QB]:"fire-auth-compat",[XB]:"fire-rtdb",[KB]:"fire-data-connect",[JB]:"fire-rtdb-compat",[YB]:"fire-fn",[ZB]:"fire-fn-compat",[ej]:"fire-iid",[tj]:"fire-iid-compat",[rj]:"fire-fcm",[nj]:"fire-fcm-compat",[aj]:"fire-perf",[ij]:"fire-perf-compat",[sj]:"fire-rc",[oj]:"fire-rc-compat",[lj]:"fire-gcs",[uj]:"fire-gcs-compat",[cj]:"fire-fst",[dj]:"fire-fst-compat",[fj]:"fire-vertex","fire-js":"fire-js",[mj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,vj=new Map,fg=new Map;function Uw(t,e){try{t.container.addComponent(e)}catch(r){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function gm(t){const e=t.name;if(fg.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;fg.set(e,t);for(const r of vm.values())Uw(r,t);for(const r of vj.values())Uw(r,t);return!0}function gj(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function yj(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new eT("app","Firebase",xj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ic("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=hj;function aT(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:cg,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw ls.create("bad-app-name",{appName:String(a)});if(r||(r=ZC()),!r)throw ls.create("no-options");const i=vm.get(a);if(i){if(pm(r,i.options)&&pm(n,i.config))return i;throw ls.create("duplicate-app",{appName:a})}const s=new SB(a);for(const u of fg.values())s.addComponent(u);const l=new bj(r,n,s);return vm.set(a,l),l}function Nj(t=cg){const e=vm.get(t);if(!e&&t===cg&&ZC())return aT();if(!e)throw ls.create("no-app",{appName:t});return e}function bl(t,e,r){let n=pj[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const s=[`Unable to register library "${n}" with version "${e}":`];a&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(s.join(" "));return}gm(new Ic(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="firebase-heartbeat-database",Sj=1,Fc="firebase-heartbeat-store";let Kp=null;function iT(){return Kp||(Kp=jB(_j,Sj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(r){console.warn(r)}}}}).catch(t=>{throw ls.create("idb-open",{originalErrorMessage:t.message})})),Kp}async function Ej(t){try{const r=(await iT()).transaction(Fc),n=await r.objectStore(Fc).get(sT(t));return await r.done,n}catch(e){if(e instanceof Zl)wi.warn(e.message);else{const r=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(r.message)}}}async function qw(t,e){try{const n=(await iT()).transaction(Fc,"readwrite");await n.objectStore(Fc).put(e,sT(t)),await n.done}catch(r){if(r instanceof Zl)wi.warn(r.message);else{const n=ls.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});wi.warn(n.message)}}}function sT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=1024,Dj=30;class Cj{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Mj(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Hw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>Dj){const s=Ij(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){wi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Hw(),{heartbeatsToSend:n,unsentEntries:a}=Tj(this._heartbeatsCache.heartbeats),i=hm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return wi.warn(r),""}}}function Hw(){return new Date().toISOString().substring(0,10)}function Tj(t,e=Aj){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),Gw(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Gw(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Mj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vB()?gB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Ej(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return qw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Gw(t){return hm(JSON.stringify({version:2,heartbeats:t})).length}function Ij(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){gm(new Ic("platform-logger",e=>new LB(e),"PRIVATE")),gm(new Ic("heartbeat",e=>new Cj(e),"PRIVATE")),bl(ug,Vw,t),bl(ug,Vw,"esm2020"),bl("fire-js","")}Fj("");var Pj="firebase",Rj="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bl(Pj,Rj,"app");var Ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,oT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,_){function E(){}E.prototype=_.prototype,y.F=_.prototype,y.prototype=new E,y.prototype.constructor=y,y.D=function(C,T,M){for(var I=Array(arguments.length-2),j=2;j<arguments.length;j++)I[j-2]=arguments[j];return _.prototype[T].apply(C,I)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(y,_,E){E||(E=0);const C=Array(16);if(typeof _=="string")for(var T=0;T<16;++T)C[T]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(T=0;T<16;++T)C[T]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=y.g[0],E=y.g[1],T=y.g[2];let M=y.g[3],I;I=_+(M^E&(T^M))+C[0]+3614090360&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(T^_&(E^T))+C[1]+3905402710&4294967295,M=_+(I<<12&4294967295|I>>>20),I=T+(E^M&(_^E))+C[2]+606105819&4294967295,T=M+(I<<17&4294967295|I>>>15),I=E+(_^T&(M^_))+C[3]+3250441966&4294967295,E=T+(I<<22&4294967295|I>>>10),I=_+(M^E&(T^M))+C[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(T^_&(E^T))+C[5]+1200080426&4294967295,M=_+(I<<12&4294967295|I>>>20),I=T+(E^M&(_^E))+C[6]+2821735955&4294967295,T=M+(I<<17&4294967295|I>>>15),I=E+(_^T&(M^_))+C[7]+4249261313&4294967295,E=T+(I<<22&4294967295|I>>>10),I=_+(M^E&(T^M))+C[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(T^_&(E^T))+C[9]+2336552879&4294967295,M=_+(I<<12&4294967295|I>>>20),I=T+(E^M&(_^E))+C[10]+4294925233&4294967295,T=M+(I<<17&4294967295|I>>>15),I=E+(_^T&(M^_))+C[11]+2304563134&4294967295,E=T+(I<<22&4294967295|I>>>10),I=_+(M^E&(T^M))+C[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(T^_&(E^T))+C[13]+4254626195&4294967295,M=_+(I<<12&4294967295|I>>>20),I=T+(E^M&(_^E))+C[14]+2792965006&4294967295,T=M+(I<<17&4294967295|I>>>15),I=E+(_^T&(M^_))+C[15]+1236535329&4294967295,E=T+(I<<22&4294967295|I>>>10),I=_+(T^M&(E^T))+C[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^T&(_^E))+C[6]+3225465664&4294967295,M=_+(I<<9&4294967295|I>>>23),I=T+(_^E&(M^_))+C[11]+643717713&4294967295,T=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(T^M))+C[0]+3921069994&4294967295,E=T+(I<<20&4294967295|I>>>12),I=_+(T^M&(E^T))+C[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^T&(_^E))+C[10]+38016083&4294967295,M=_+(I<<9&4294967295|I>>>23),I=T+(_^E&(M^_))+C[15]+3634488961&4294967295,T=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(T^M))+C[4]+3889429448&4294967295,E=T+(I<<20&4294967295|I>>>12),I=_+(T^M&(E^T))+C[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^T&(_^E))+C[14]+3275163606&4294967295,M=_+(I<<9&4294967295|I>>>23),I=T+(_^E&(M^_))+C[3]+4107603335&4294967295,T=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(T^M))+C[8]+1163531501&4294967295,E=T+(I<<20&4294967295|I>>>12),I=_+(T^M&(E^T))+C[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^T&(_^E))+C[2]+4243563512&4294967295,M=_+(I<<9&4294967295|I>>>23),I=T+(_^E&(M^_))+C[7]+1735328473&4294967295,T=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(T^M))+C[12]+2368359562&4294967295,E=T+(I<<20&4294967295|I>>>12),I=_+(E^T^M)+C[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^T)+C[8]+2272392833&4294967295,M=_+(I<<11&4294967295|I>>>21),I=T+(M^_^E)+C[11]+1839030562&4294967295,T=M+(I<<16&4294967295|I>>>16),I=E+(T^M^_)+C[14]+4259657740&4294967295,E=T+(I<<23&4294967295|I>>>9),I=_+(E^T^M)+C[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^T)+C[4]+1272893353&4294967295,M=_+(I<<11&4294967295|I>>>21),I=T+(M^_^E)+C[7]+4139469664&4294967295,T=M+(I<<16&4294967295|I>>>16),I=E+(T^M^_)+C[10]+3200236656&4294967295,E=T+(I<<23&4294967295|I>>>9),I=_+(E^T^M)+C[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^T)+C[0]+3936430074&4294967295,M=_+(I<<11&4294967295|I>>>21),I=T+(M^_^E)+C[3]+3572445317&4294967295,T=M+(I<<16&4294967295|I>>>16),I=E+(T^M^_)+C[6]+76029189&4294967295,E=T+(I<<23&4294967295|I>>>9),I=_+(E^T^M)+C[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^T)+C[12]+3873151461&4294967295,M=_+(I<<11&4294967295|I>>>21),I=T+(M^_^E)+C[15]+530742520&4294967295,T=M+(I<<16&4294967295|I>>>16),I=E+(T^M^_)+C[2]+3299628645&4294967295,E=T+(I<<23&4294967295|I>>>9),I=_+(T^(E|~M))+C[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~T))+C[7]+1126891415&4294967295,M=_+(I<<10&4294967295|I>>>22),I=T+(_^(M|~E))+C[14]+2878612391&4294967295,T=M+(I<<15&4294967295|I>>>17),I=E+(M^(T|~_))+C[5]+4237533241&4294967295,E=T+(I<<21&4294967295|I>>>11),I=_+(T^(E|~M))+C[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~T))+C[3]+2399980690&4294967295,M=_+(I<<10&4294967295|I>>>22),I=T+(_^(M|~E))+C[10]+4293915773&4294967295,T=M+(I<<15&4294967295|I>>>17),I=E+(M^(T|~_))+C[1]+2240044497&4294967295,E=T+(I<<21&4294967295|I>>>11),I=_+(T^(E|~M))+C[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~T))+C[15]+4264355552&4294967295,M=_+(I<<10&4294967295|I>>>22),I=T+(_^(M|~E))+C[6]+2734768916&4294967295,T=M+(I<<15&4294967295|I>>>17),I=E+(M^(T|~_))+C[13]+1309151649&4294967295,E=T+(I<<21&4294967295|I>>>11),I=_+(T^(E|~M))+C[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~T))+C[11]+3174756917&4294967295,M=_+(I<<10&4294967295|I>>>22),I=T+(_^(M|~E))+C[2]+718787259&4294967295,T=M+(I<<15&4294967295|I>>>17),I=E+(M^(T|~_))+C[9]+3951481745&4294967295,y.g[0]=y.g[0]+_&4294967295,y.g[1]=y.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,y.g[2]=y.g[2]+T&4294967295,y.g[3]=y.g[3]+M&4294967295}n.prototype.v=function(y,_){_===void 0&&(_=y.length);const E=_-this.blockSize,C=this.C;let T=this.h,M=0;for(;M<_;){if(T==0)for(;M<=E;)a(this,y,M),M+=this.blockSize;if(typeof y=="string"){for(;M<_;)if(C[T++]=y.charCodeAt(M++),T==this.blockSize){a(this,C),T=0;break}}else for(;M<_;)if(C[T++]=y[M++],T==this.blockSize){a(this,C),T=0;break}}this.h=T,this.o+=_},n.prototype.A=function(){var y=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);y[0]=128;for(var _=1;_<y.length-8;++_)y[_]=0;_=this.o*8;for(var E=y.length-8;E<y.length;++E)y[E]=_&255,_/=256;for(this.v(y),y=Array(16),_=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)y[_++]=this.g[E]>>>C&255;return y};function i(y,_){var E=l;return Object.prototype.hasOwnProperty.call(E,y)?E[y]:E[y]=_(y)}function s(y,_){this.h=_;const E=[];let C=!0;for(let T=y.length-1;T>=0;T--){const M=y[T]|0;C&&M==_||(E[T]=M,C=!1)}this.g=E}var l={};function u(y){return-128<=y&&y<128?i(y,function(_){return new s([_|0],_<0?-1:0)}):new s([y|0],y<0?-1:0)}function o(y){if(isNaN(y)||!isFinite(y))return f;if(y<0)return D(o(-y));const _=[];let E=1;for(let C=0;y>=E;C++)_[C]=y/E|0,E*=4294967296;return new s(_,0)}function c(y,_){if(y.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(y.charAt(0)=="-")return D(c(y.substring(1),_));if(y.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=o(Math.pow(_,8));let C=f;for(let M=0;M<y.length;M+=8){var T=Math.min(8,y.length-M);const I=parseInt(y.substring(M,M+T),_);T<8?(T=o(Math.pow(_,T)),C=C.j(T).add(o(I))):(C=C.j(E),C=C.add(o(I)))}return C}var f=u(0),d=u(1),m=u(16777216);t=s.prototype,t.m=function(){if(h(this))return-D(this).m();let y=0,_=1;for(let E=0;E<this.g.length;E++){const C=this.i(E);y+=(C>=0?C:4294967296+C)*_,_*=4294967296}return y},t.toString=function(y){if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(p(this))return"0";if(h(this))return"-"+D(this).toString(y);const _=o(Math.pow(y,6));var E=this;let C="";for(;;){const T=b(E,_).g;E=w(E,T.j(_));let M=((E.g.length>0?E.g[0]:E.h)>>>0).toString(y);if(E=T,p(E))return M+C;for(;M.length<6;)M="0"+M;C=M+C}},t.i=function(y){return y<0?0:y<this.g.length?this.g[y]:this.h};function p(y){if(y.h!=0)return!1;for(let _=0;_<y.g.length;_++)if(y.g[_]!=0)return!1;return!0}function h(y){return y.h==-1}t.l=function(y){return y=w(this,y),h(y)?-1:p(y)?0:1};function D(y){const _=y.g.length,E=[];for(let C=0;C<_;C++)E[C]=~y.g[C];return new s(E,~y.h).add(d)}t.abs=function(){return h(this)?D(this):this},t.add=function(y){const _=Math.max(this.g.length,y.g.length),E=[];let C=0;for(let T=0;T<=_;T++){let M=C+(this.i(T)&65535)+(y.i(T)&65535),I=(M>>>16)+(this.i(T)>>>16)+(y.i(T)>>>16);C=I>>>16,M&=65535,I&=65535,E[T]=I<<16|M}return new s(E,E[E.length-1]&-2147483648?-1:0)};function w(y,_){return y.add(D(_))}t.j=function(y){if(p(this)||p(y))return f;if(h(this))return h(y)?D(this).j(D(y)):D(D(this).j(y));if(h(y))return D(this.j(D(y)));if(this.l(m)<0&&y.l(m)<0)return o(this.m()*y.m());const _=this.g.length+y.g.length,E=[];for(var C=0;C<2*_;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let T=0;T<y.g.length;T++){const M=this.i(C)>>>16,I=this.i(C)&65535,j=y.i(T)>>>16,O=y.i(T)&65535;E[2*C+2*T]+=I*O,S(E,2*C+2*T),E[2*C+2*T+1]+=M*O,S(E,2*C+2*T+1),E[2*C+2*T+1]+=I*j,S(E,2*C+2*T+1),E[2*C+2*T+2]+=M*j,S(E,2*C+2*T+2)}for(y=0;y<_;y++)E[y]=E[2*y+1]<<16|E[2*y];for(y=_;y<2*_;y++)E[y]=0;return new s(E,0)};function S(y,_){for(;(y[_]&65535)!=y[_];)y[_+1]+=y[_]>>>16,y[_]&=65535,_++}function x(y,_){this.g=y,this.h=_}function b(y,_){if(p(_))throw Error("division by zero");if(p(y))return new x(f,f);if(h(y))return _=b(D(y),_),new x(D(_.g),D(_.h));if(h(_))return _=b(y,D(_)),new x(D(_.g),_.h);if(y.g.length>30){if(h(y)||h(_))throw Error("slowDivide_ only works with positive integers.");for(var E=d,C=_;C.l(y)<=0;)E=N(E),C=N(C);var T=g(E,1),M=g(C,1);for(C=g(C,2),E=g(E,2);!p(C);){var I=M.add(C);I.l(y)<=0&&(T=T.add(E),M=I),C=g(C,1),E=g(E,1)}return _=w(y,T.j(_)),new x(T,_)}for(T=f;y.l(_)>=0;){for(E=Math.max(1,Math.floor(y.m()/_.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),M=o(E),I=M.j(_);h(I)||I.l(y)>0;)E-=C,M=o(E),I=M.j(_);p(M)&&(M=d),T=T.add(M),y=w(y,I)}return new x(T,y)}t.B=function(y){return b(this,y).h},t.and=function(y){const _=Math.max(this.g.length,y.g.length),E=[];for(let C=0;C<_;C++)E[C]=this.i(C)&y.i(C);return new s(E,this.h&y.h)},t.or=function(y){const _=Math.max(this.g.length,y.g.length),E=[];for(let C=0;C<_;C++)E[C]=this.i(C)|y.i(C);return new s(E,this.h|y.h)},t.xor=function(y){const _=Math.max(this.g.length,y.g.length),E=[];for(let C=0;C<_;C++)E[C]=this.i(C)^y.i(C);return new s(E,this.h^y.h)};function N(y){const _=y.g.length+1,E=[];for(let C=0;C<_;C++)E[C]=y.i(C)<<1|y.i(C-1)>>>31;return new s(E,y.h)}function g(y,_){const E=_>>5;_%=32;const C=y.g.length-E,T=[];for(let M=0;M<C;M++)T[M]=_>0?y.i(M+E)>>>_|y.i(M+E+1)<<32-_:y.i(M+E);return new s(T,y.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,oT=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=o,s.fromString=c,us=s}).apply(typeof Ww<"u"?Ww:typeof self<"u"?self:typeof window<"u"?window:{});var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lT,Hu,uT,Od,dg,cT,fT,dT;(function(){var t,e=Object.defineProperty;function r(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jf=="object"&&Jf];for(var F=0;F<A.length;++F){var B=A[F];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var n=r(this);function a(A,F){if(F)e:{var B=n;A=A.split(".");for(var Q=0;Q<A.length-1;Q++){var de=A[Q];if(!(de in B))break e;B=B[de]}A=A[A.length-1],Q=B[A],F=F(Q),F!=Q&&F!=null&&e(B,A,{configurable:!0,writable:!0,value:F})}}a("Symbol.dispose",function(A){return A||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(A){return A||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(A){return A||function(F){var B=[],Q;for(Q in F)Object.prototype.hasOwnProperty.call(F,Q)&&B.push([Q,F[Q]]);return B}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},s=this||self;function l(A){var F=typeof A;return F=="object"&&A!=null||F=="function"}function u(A,F,B){return A.call.apply(A.bind,arguments)}function o(A,F,B){return o=u,o.apply(null,arguments)}function c(A,F){var B=Array.prototype.slice.call(arguments,1);return function(){var Q=B.slice();return Q.push.apply(Q,arguments),A.apply(this,Q)}}function f(A,F){function B(){}B.prototype=F.prototype,A.Z=F.prototype,A.prototype=new B,A.prototype.constructor=A,A.Ob=function(Q,de,ge){for(var Be=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)Be[yt-2]=arguments[yt];return F.prototype[de].apply(Q,Be)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?A=>A&&AsyncContext.Snapshot.wrap(A):A=>A;function m(A){const F=A.length;if(F>0){const B=Array(F);for(let Q=0;Q<F;Q++)B[Q]=A[Q];return B}return[]}function p(A,F){for(let Q=1;Q<arguments.length;Q++){const de=arguments[Q];var B=typeof de;if(B=B!="object"?B:de?Array.isArray(de)?"array":B:"null",B=="array"||B=="object"&&typeof de.length=="number"){B=A.length||0;const ge=de.length||0;A.length=B+ge;for(let Be=0;Be<ge;Be++)A[B+Be]=de[Be]}else A.push(de)}}class h{constructor(F,B){this.i=F,this.j=B,this.h=0,this.g=null}get(){let F;return this.h>0?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function D(A){s.setTimeout(()=>{throw A},0)}function w(){var A=y;let F=null;return A.g&&(F=A.g,A.g=A.g.next,A.g||(A.h=null),F.next=null),F}class S{constructor(){this.h=this.g=null}add(F,B){const Q=x.get();Q.set(F,B),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var x=new h(()=>new b,A=>A.reset());class b{constructor(){this.next=this.g=this.h=null}set(F,B){this.h=F,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let N,g=!1,y=new S,_=()=>{const A=Promise.resolve(void 0);N=()=>{A.then(E)}};function E(){for(var A;A=w();){try{A.h.call(A.g)}catch(B){D(B)}var F=x;F.j(A),F.h<100&&(F.h++,A.next=F.g,F.g=A)}g=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(A,F){this.type=A,this.g=this.target=F,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var A=!1,F=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const B=()=>{};s.addEventListener("test",B,F),s.removeEventListener("test",B,F)}catch{}return A}();function I(A){return/^[\s\xa0]*$/.test(A)}function j(A,F){T.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A&&this.init(A,F)}f(j,T),j.prototype.init=function(A,F){const B=this.type=A.type,Q=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;this.target=A.target||A.srcElement,this.g=F,F=A.relatedTarget,F||(B=="mouseover"?F=A.fromElement:B=="mouseout"&&(F=A.toElement)),this.relatedTarget=F,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=A.pointerType,this.state=A.state,this.i=A,A.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var O="closure_listenable_"+(Math.random()*1e6|0),P=0;function H(A,F,B,Q,de){this.listener=A,this.proxy=null,this.src=F,this.type=B,this.capture=!!Q,this.ha=de,this.key=++P,this.da=this.fa=!1}function $(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function z(A,F,B){for(const Q in A)F.call(B,A[Q],Q,A)}function X(A,F){for(const B in A)F.call(void 0,A[B],B,A)}function ae(A){const F={};for(const B in A)F[B]=A[B];return F}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(A,F){let B,Q;for(let de=1;de<arguments.length;de++){Q=arguments[de];for(B in Q)A[B]=Q[B];for(let ge=0;ge<k.length;ge++)B=k[ge],Object.prototype.hasOwnProperty.call(Q,B)&&(A[B]=Q[B])}}function V(A){this.src=A,this.g={},this.h=0}V.prototype.add=function(A,F,B,Q,de){const ge=A.toString();A=this.g[ge],A||(A=this.g[ge]=[],this.h++);const Be=le(A,F,Q,de);return Be>-1?(F=A[Be],B||(F.fa=!1)):(F=new H(F,this.src,ge,!!Q,de),F.fa=B,A.push(F)),F};function ye(A,F){const B=F.type;if(B in A.g){var Q=A.g[B],de=Array.prototype.indexOf.call(Q,F,void 0),ge;(ge=de>=0)&&Array.prototype.splice.call(Q,de,1),ge&&($(F),A.g[B].length==0&&(delete A.g[B],A.h--))}}function le(A,F,B,Q){for(let de=0;de<A.length;++de){const ge=A[de];if(!ge.da&&ge.listener==F&&ge.capture==!!B&&ge.ha==Q)return de}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),W={};function K(A,F,B,Q,de){if(Array.isArray(F)){for(let ge=0;ge<F.length;ge++)K(A,F[ge],B,Q,de);return null}return B=Oe(B),A&&A[O]?A.J(F,B,l(Q)?!!Q.capture:!1,de):ee(A,F,B,!1,Q,de)}function ee(A,F,B,Q,de,ge){if(!F)throw Error("Invalid event type");const Be=l(de)?!!de.capture:!!de;let yt=ke(A);if(yt||(A[fe]=yt=new V(A)),B=yt.add(F,B,Q,Be,ge),B.proxy)return B;if(Q=ie(),B.proxy=Q,Q.src=A,Q.listener=B,A.addEventListener)M||(de=Be),de===void 0&&(de=!1),A.addEventListener(F.toString(),Q,de);else if(A.attachEvent)A.attachEvent(me(F.toString()),Q);else if(A.addListener&&A.removeListener)A.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return B}function ie(){function A(B){return F.call(A.src,A.listener,B)}const F=Te;return A}function oe(A,F,B,Q,de){if(Array.isArray(F))for(var ge=0;ge<F.length;ge++)oe(A,F[ge],B,Q,de);else Q=l(Q)?!!Q.capture:!!Q,B=Oe(B),A&&A[O]?(A=A.i,ge=String(F).toString(),ge in A.g&&(F=A.g[ge],B=le(F,B,Q,de),B>-1&&($(F[B]),Array.prototype.splice.call(F,B,1),F.length==0&&(delete A.g[ge],A.h--)))):A&&(A=ke(A))&&(F=A.g[F.toString()],A=-1,F&&(A=le(F,B,Q,de)),(B=A>-1?F[A]:null)&&pe(B))}function pe(A){if(typeof A!="number"&&A&&!A.da){var F=A.src;if(F&&F[O])ye(F.i,A);else{var B=A.type,Q=A.proxy;F.removeEventListener?F.removeEventListener(B,Q,A.capture):F.detachEvent?F.detachEvent(me(B),Q):F.addListener&&F.removeListener&&F.removeListener(Q),(B=ke(F))?(ye(B,A),B.h==0&&(B.src=null,F[fe]=null)):$(A)}}}function me(A){return A in W?W[A]:W[A]="on"+A}function Te(A,F){if(A.da)A=!0;else{F=new j(F,this);const B=A.listener,Q=A.ha||A.src;A.fa&&pe(A),A=B.call(Q,F)}return A}function ke(A){return A=A[fe],A instanceof V?A:null}var ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oe(A){return typeof A=="function"?A:(A[ze]||(A[ze]=function(F){return A.handleEvent(F)}),A[ze])}function $e(){C.call(this),this.i=new V(this),this.M=this,this.G=null}f($e,C),$e.prototype[O]=!0,$e.prototype.removeEventListener=function(A,F,B,Q){oe(this,A,F,B,Q)};function G(A,F){var B,Q=A.G;if(Q)for(B=[];Q;Q=Q.G)B.push(Q);if(A=A.M,Q=F.type||F,typeof F=="string")F=new T(F,A);else if(F instanceof T)F.target=F.target||A;else{var de=F;F=new T(Q,A),Y(F,de)}de=!0;let ge,Be;if(B)for(Be=B.length-1;Be>=0;Be--)ge=F.g=B[Be],de=te(ge,Q,!0,F)&&de;if(ge=F.g=A,de=te(ge,Q,!0,F)&&de,de=te(ge,Q,!1,F)&&de,B)for(Be=0;Be<B.length;Be++)ge=F.g=B[Be],de=te(ge,Q,!1,F)&&de}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var A=this.i;for(const F in A.g){const B=A.g[F];for(let Q=0;Q<B.length;Q++)$(B[Q]);delete A.g[F],A.h--}}this.G=null},$e.prototype.J=function(A,F,B,Q){return this.i.add(String(A),F,!1,B,Q)},$e.prototype.K=function(A,F,B,Q){return this.i.add(String(A),F,!0,B,Q)};function te(A,F,B,Q){if(F=A.i.g[String(F)],!F)return!0;F=F.concat();let de=!0;for(let ge=0;ge<F.length;++ge){const Be=F[ge];if(Be&&!Be.da&&Be.capture==B){const yt=Be.listener,Fr=Be.ha||Be.src;Be.fa&&ye(A.i,Be),de=yt.call(Fr,Q)!==!1&&de}}return de&&!Q.defaultPrevented}function ce(A,F){if(typeof A!="function")if(A&&typeof A.handleEvent=="function")A=o(A.handleEvent,A);else throw Error("Invalid listener argument");return Number(F)>2147483647?-1:s.setTimeout(A,F||0)}function L(A){A.g=ce(()=>{A.g=null,A.i&&(A.i=!1,L(A))},A.l);const F=A.h;A.h=null,A.m.apply(null,F)}class J extends C{constructor(F,B){super(),this.m=F,this.l=B,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:L(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(A){C.call(this),this.h=A,this.g={}}f(re,C);var se=[];function ue(A){z(A.g,function(F,B){this.g.hasOwnProperty(B)&&pe(F)},A),A.g={}}re.prototype.N=function(){re.Z.N.call(this),ue(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=s.JSON.stringify,_e=s.JSON.parse,Ee=class{stringify(A){return s.JSON.stringify(A,void 0)}parse(A){return s.JSON.parse(A,void 0)}};function Me(){}function Ae(){}var ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gt(){T.call(this,"d")}f(gt,T);function Ut(){T.call(this,"c")}f(Ut,T);var Ze={},lr=null;function R(){return lr=lr||new $e}Ze.Ia="serverreachability";function ne(A){T.call(this,Ze.Ia,A)}f(ne,T);function he(A){const F=R();G(F,new ne(F))}Ze.STAT_EVENT="statevent";function De(A,F){T.call(this,Ze.STAT_EVENT,A),this.stat=F}f(De,T);function Ge(A){const F=R();G(F,new De(F,A))}Ze.Ja="timingevent";function dt(A,F){T.call(this,Ze.Ja,A),this.size=F}f(dt,T);function Ir(A,F){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){A()},F)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function ip(A,F,B,Q,de,ge){A.info(function(){if(A.g)if(ge){var Be="",yt=ge.split("&");for(let er=0;er<yt.length;er++){var Fr=yt[er].split("=");if(Fr.length>1){const zr=Fr[0];Fr=Fr[1];const La=zr.split("_");Be=La.length>=2&&La[1]=="type"?Be+(zr+"="+Fr+"&"):Be+(zr+"=redacted&")}}}else Be=null;else Be=ge;return"XMLHTTP REQ ("+Q+") [attempt "+de+"]: "+F+`
`+B+`
`+Be})}function sp(A,F,B,Q,de,ge,Be){A.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+de+"]: "+F+`
`+B+`
`+ge+" "+Be})}function Ii(A,F,B,Q){A.info(function(){return"XMLHTTP TEXT ("+F+"): "+lp(A,B)+(Q?" "+Q:"")})}function op(A,F){A.info(function(){return"TIMEOUT: "+F})}ii.prototype.info=function(){};function lp(A,F){if(!A.g)return F;if(!F)return null;try{const ge=JSON.parse(F);if(ge){for(A=0;A<ge.length;A++)if(Array.isArray(ge[A])){var B=ge[A];if(!(B.length<2)){var Q=B[1];if(Array.isArray(Q)&&!(Q.length<1)){var de=Q[0];if(de!="noop"&&de!="stop"&&de!="close")for(let Be=1;Be<Q.length;Be++)Q[Be]=""}}}}return ve(ge)}catch{return F}}var ko={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xf;function gu(){}f(gu,Me),gu.prototype.g=function(){return new XMLHttpRequest},xf=new gu;function Ls(A){return encodeURIComponent(String(A))}function up(A){var F=1;A=A.split(":");const B=[];for(;F>0&&A.length;)B.push(A.shift()),F--;return A.length&&B.push(A.join(":")),B}function ka(A,F,B,Q){this.j=A,this.i=F,this.l=B,this.S=Q||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bf}function bf(){this.i=null,this.g="",this.h=!1}var wf={},yu={};function xu(A,F,B){A.M=1,A.A=Af($a(F)),A.u=B,A.R=!0,Nf(A,null)}function Nf(A,F){A.F=Date.now(),$o(A),A.B=$a(A.A);var B=A.B,Q=A.S;Array.isArray(Q)||(Q=[String(Q)]),J1(B.i,"t",Q),A.C=0,B=A.j.L,A.h=new bf,A.g=pb(A.j,B?F:null,!A.u),A.P>0&&(A.O=new J(o(A.Y,A,A.g),A.P)),F=A.V,B=A.g,Q=A.ba;var de="readystatechange";Array.isArray(de)||(de&&(se[0]=de.toString()),de=se);for(let ge=0;ge<de.length;ge++){const Be=K(B,de[ge],Q||F.handleEvent,!1,F.h||F);if(!Be)break;F.g[Be.key]=Be}F=A.J?ae(A.J):{},A.u?(A.v||(A.v="POST"),F["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.B,A.v,A.u,F)):(A.v="GET",A.g.ea(A.B,A.v,null,F)),he(),ip(A.i,A.v,A.B,A.l,A.S,A.u)}ka.prototype.ba=function(A){A=A.target;const F=this.O;F&&Oi(A)==3?F.j():this.Y(A)},ka.prototype.Y=function(A){try{if(A==this.g)e:{const yt=Oi(this.g),Fr=this.g.ya(),er=this.g.ca();if(!(yt<3)&&(yt!=3||this.g&&(this.h.h||this.g.la()||ab(this.g)))){this.K||yt!=4||Fr==7||(Fr==8||er<=0?he(3):he(2)),bu(this);var F=this.g.ca();this.X=F;var B=cp(this);if(this.o=F==200,sp(this.i,this.v,this.B,this.l,this.S,yt,F),this.o){if(this.U&&!this.L){t:{if(this.g){var Q,de=this.g;if((Q=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Q)){var ge=Q;break t}}ge=null}if(A=ge)Ii(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zt(this,A);else{this.o=!1,this.m=3,Ge(12),qn(this),zs(this);break e}}if(this.R){A=!0;let zr;for(;!this.K&&this.C<B.length;)if(zr=fp(this,B),zr==yu){yt==4&&(this.m=4,Ge(14),A=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(zr==wf){this.m=4,Ge(15),Ii(this.i,this.l,B,"[Invalid Chunk]"),A=!1;break}else Ii(this.i,this.l,zr,null),zt(this,zr);if(_f(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||B.length!=0||this.h.h||(this.m=1,Ge(16),A=!1),this.o=this.o&&A,!A)Ii(this.i,this.l,B,"[Invalid Chunked Response]"),qn(this),zs(this);else if(B.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),yp(Be),Be.P=!0,Ge(11))}}else Ii(this.i,this.l,B,null),zt(this,B);yt==4&&qn(this),this.o&&!this.K&&(yt==4?fb(this.j,this):(this.o=!1,$o(this)))}else hP(this.g),F==400&&B.indexOf("Unknown SID")>0?(this.m=3,Ge(12)):(this.m=0,Ge(13)),qn(this),zs(this)}}}catch{}finally{}};function cp(A){if(!_f(A))return A.g.la();const F=ab(A.g);if(F==="")return"";let B="";const Q=F.length,de=Oi(A.g)==4;if(!A.h.i){if(typeof TextDecoder>"u")return qn(A),zs(A),"";A.h.i=new s.TextDecoder}for(let ge=0;ge<Q;ge++)A.h.h=!0,B+=A.h.i.decode(F[ge],{stream:!(de&&ge==Q-1)});return F.length=0,A.h.g+=B,A.C=0,A.h.g}function _f(A){return A.g?A.v=="GET"&&A.M!=2&&A.j.Aa:!1}function fp(A,F){var B=A.C,Q=F.indexOf(`
`,B);return Q==-1?yu:(B=Number(F.substring(B,Q)),isNaN(B)?wf:(Q+=1,Q+B>F.length?yu:(F=F.slice(Q,Q+B),A.C=Q+B,F)))}ka.prototype.cancel=function(){this.K=!0,qn(this)};function $o(A){A.T=Date.now()+A.H,Sf(A,A.H)}function Sf(A,F){if(A.D!=null)throw Error("WatchDog timer not null");A.D=Ir(o(A.aa,A),F)}function bu(A){A.D&&(s.clearTimeout(A.D),A.D=null)}ka.prototype.aa=function(){this.D=null;const A=Date.now();A-this.T>=0?(op(this.i,this.B),this.M!=2&&(he(),Ge(17)),qn(this),this.m=2,zs(this)):Sf(this,this.T-A)};function zs(A){A.j.I==0||A.K||fb(A.j,A)}function qn(A){bu(A);var F=A.O;F&&typeof F.dispose=="function"&&F.dispose(),A.O=null,ue(A.V),A.g&&(F=A.g,A.g=null,F.abort(),F.dispose())}function zt(A,F){try{var B=A.j;if(B.I!=0&&(B.g==A||wu(B.h,A))){if(!A.L&&wu(B.h,A)&&B.I==3){try{var Q=B.Ba.g.parse(F)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var de=Q;if(de[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<A.F)If(B),Tf(B);else break e;gp(B),Ge(18)}}else B.xa=de[1],0<B.xa-B.K&&de[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=Ir(o(B.Va,B),6e3));Fi(B.h)<=1&&B.ta&&(B.ta=void 0)}else qs(B,11)}else if((A.L||B.g==A)&&If(B),!I(F))for(de=B.Ba.g.parse(F),F=0;F<de.length;F++){let er=de[F];const zr=er[0];if(!(zr<=B.K))if(B.K=zr,er=er[1],B.I==2)if(er[0]=="c"){B.M=er[1],B.ba=er[2];const La=er[3];La!=null&&(B.ka=La,B.j.info("VER="+B.ka));const Hs=er[4];Hs!=null&&(B.za=Hs,B.j.info("SVER="+B.za));const Bi=er[5];Bi!=null&&typeof Bi=="number"&&Bi>0&&(Q=1.5*Bi,B.O=Q,B.j.info("backChannelRequestTimeoutMs_="+Q)),Q=B;const ji=A.g;if(ji){const Pf=ji.g?ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pf){var ge=Q.h;ge.g||Pf.indexOf("spdy")==-1&&Pf.indexOf("quic")==-1&&Pf.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(dp(ge,ge.h),ge.h=null))}if(Q.G){const xp=ji.g?ji.g.getResponseHeader("X-HTTP-Session-Id"):null;xp&&(Q.wa=xp,ar(Q.J,Q.G,xp))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-A.F,B.j.info("Handshake RTT: "+B.T+"ms")),Q=B;var Be=A;if(Q.na=hb(Q,Q.L?Q.ba:null,Q.W),Be.L){q1(Q.h,Be);var yt=Be,Fr=Q.O;Fr&&(yt.H=Fr),yt.D&&(bu(yt),$o(yt)),Q.g=Be}else ub(Q);B.i.length>0&&Mf(B)}else er[0]!="stop"&&er[0]!="close"||qs(B,7);else B.I==3&&(er[0]=="stop"||er[0]=="close"?er[0]=="stop"?qs(B,7):vp(B):er[0]!="noop"&&B.l&&B.l.qa(er),B.A=0)}}he(4)}catch{}}var ln=class{constructor(A,F){this.g=A,this.map=F}};function Ef(A){this.l=A||10,s.PerformanceNavigationTiming?(A=s.performance.getEntriesByType("navigation"),A=A.length>0&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vs(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Fi(A){return A.h?1:A.g?A.g.size:0}function wu(A,F){return A.h?A.h==F:A.g?A.g.has(F):!1}function dp(A,F){A.g?A.g.add(F):A.h=F}function q1(A,F){A.h&&A.h==F?A.h=null:A.g&&A.g.has(F)&&A.g.delete(F)}Ef.prototype.cancel=function(){if(this.i=H1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function H1(A){if(A.h!=null)return A.i.concat(A.h.G);if(A.g!=null&&A.g.size!==0){let F=A.i;for(const B of A.g.values())F=F.concat(B.G);return F}return m(A.i)}var G1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rP(A,F){if(A){A=A.split("&");for(let B=0;B<A.length;B++){const Q=A[B].indexOf("=");let de,ge=null;Q>=0?(de=A[B].substring(0,Q),ge=A[B].substring(Q+1)):de=A[B],F(de,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function Pi(A){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let F;A instanceof Pi?(this.l=A.l,Nu(this,A.j),this.o=A.o,this.g=A.g,_u(this,A.u),this.h=A.h,mp(this,Y1(A.i)),this.m=A.m):A&&(F=String(A).match(G1))?(this.l=!1,Nu(this,F[1]||"",!0),this.o=Su(F[2]||""),this.g=Su(F[3]||"",!0),_u(this,F[4]),this.h=Su(F[5]||"",!0),mp(this,F[6]||"",!0),this.m=Su(F[7]||"")):(this.l=!1,this.i=new Au(null,this.l))}Pi.prototype.toString=function(){const A=[];var F=this.j;F&&A.push(Eu(F,W1,!0),":");var B=this.g;return(B||F=="file")&&(A.push("//"),(F=this.o)&&A.push(Eu(F,W1,!0),"@"),A.push(Ls(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&A.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&A.push("/"),A.push(Eu(B,B.charAt(0)=="/"?iP:aP,!0))),(B=this.i.toString())&&A.push("?",B),(B=this.m)&&A.push("#",Eu(B,oP)),A.join("")},Pi.prototype.resolve=function(A){const F=$a(this);let B=!!A.j;B?Nu(F,A.j):B=!!A.o,B?F.o=A.o:B=!!A.g,B?F.g=A.g:B=A.u!=null;var Q=A.h;if(B)_u(F,A.u);else if(B=!!A.h){if(Q.charAt(0)!="/")if(this.g&&!this.h)Q="/"+Q;else{var de=F.h.lastIndexOf("/");de!=-1&&(Q=F.h.slice(0,de+1)+Q)}if(de=Q,de==".."||de==".")Q="";else if(de.indexOf("./")!=-1||de.indexOf("/.")!=-1){Q=de.lastIndexOf("/",0)==0,de=de.split("/");const ge=[];for(let Be=0;Be<de.length;){const yt=de[Be++];yt=="."?Q&&Be==de.length&&ge.push(""):yt==".."?((ge.length>1||ge.length==1&&ge[0]!="")&&ge.pop(),Q&&Be==de.length&&ge.push("")):(ge.push(yt),Q=!0)}Q=ge.join("/")}else Q=de}return B?F.h=Q:B=A.i.toString()!=="",B?mp(F,Y1(A.i)):B=!!A.m,B&&(F.m=A.m),F};function $a(A){return new Pi(A)}function Nu(A,F,B){A.j=B?Su(F,!0):F,A.j&&(A.j=A.j.replace(/:$/,""))}function _u(A,F){if(F){if(F=Number(F),isNaN(F)||F<0)throw Error("Bad port number "+F);A.u=F}else A.u=null}function mp(A,F,B){F instanceof Au?(A.i=F,lP(A.i,A.l)):(B||(F=Eu(F,sP)),A.i=new Au(F,A.l))}function ar(A,F,B){A.i.set(F,B)}function Af(A){return ar(A,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),A}function Su(A,F){return A?F?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Eu(A,F,B){return typeof A=="string"?(A=encodeURI(A).replace(F,nP),B&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function nP(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var W1=/[#\/\?@]/g,aP=/[#\?:]/g,iP=/[#\?]/g,sP=/[#\?@]/g,oP=/#/g;function Au(A,F){this.h=this.g=null,this.i=A||null,this.j=!!F}function Us(A){A.g||(A.g=new Map,A.h=0,A.i&&rP(A.i,function(F,B){A.add(decodeURIComponent(F.replace(/\+/g," ")),B)}))}t=Au.prototype,t.add=function(A,F){Us(this),this.i=null,A=Lo(this,A);let B=this.g.get(A);return B||this.g.set(A,B=[]),B.push(F),this.h+=1,this};function Q1(A,F){Us(A),F=Lo(A,F),A.g.has(F)&&(A.i=null,A.h-=A.g.get(F).length,A.g.delete(F))}function X1(A,F){return Us(A),F=Lo(A,F),A.g.has(F)}t.forEach=function(A,F){Us(this),this.g.forEach(function(B,Q){B.forEach(function(de){A.call(F,de,Q,this)},this)},this)};function K1(A,F){Us(A);let B=[];if(typeof F=="string")X1(A,F)&&(B=B.concat(A.g.get(Lo(A,F))));else for(A=Array.from(A.g.values()),F=0;F<A.length;F++)B=B.concat(A[F]);return B}t.set=function(A,F){return Us(this),this.i=null,A=Lo(this,A),X1(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[F]),this.h+=1,this},t.get=function(A,F){return A?(A=K1(this,A),A.length>0?String(A[0]):F):F};function J1(A,F,B){Q1(A,F),B.length>0&&(A.i=null,A.g.set(Lo(A,F),m(B)),A.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],F=Array.from(this.g.keys());for(let Q=0;Q<F.length;Q++){var B=F[Q];const de=Ls(B);B=K1(this,B);for(let ge=0;ge<B.length;ge++){let Be=de;B[ge]!==""&&(Be+="="+Ls(B[ge])),A.push(Be)}}return this.i=A.join("&")};function Y1(A){const F=new Au;return F.i=A.i,A.g&&(F.g=new Map(A.g),F.h=A.h),F}function Lo(A,F){return F=String(F),A.j&&(F=F.toLowerCase()),F}function lP(A,F){F&&!A.j&&(Us(A),A.i=null,A.g.forEach(function(B,Q){const de=Q.toLowerCase();Q!=de&&(Q1(this,Q),J1(this,de,B))},A)),A.j=F}function uP(A,F){const B=new ii;if(s.Image){const Q=new Image;Q.onload=c(Ri,B,"TestLoadImage: loaded",!0,F,Q),Q.onerror=c(Ri,B,"TestLoadImage: error",!1,F,Q),Q.onabort=c(Ri,B,"TestLoadImage: abort",!1,F,Q),Q.ontimeout=c(Ri,B,"TestLoadImage: timeout",!1,F,Q),s.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=A}else F(!1)}function cP(A,F){const B=new ii,Q=new AbortController,de=setTimeout(()=>{Q.abort(),Ri(B,"TestPingServer: timeout",!1,F)},1e4);fetch(A,{signal:Q.signal}).then(ge=>{clearTimeout(de),ge.ok?Ri(B,"TestPingServer: ok",!0,F):Ri(B,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(de),Ri(B,"TestPingServer: error",!1,F)})}function Ri(A,F,B,Q,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),Q(B)}catch{}}function fP(){this.g=new Ee}function hp(A){this.i=A.Sb||null,this.h=A.ab||!1}f(hp,Me),hp.prototype.g=function(){return new Df(this.i,this.h)};function Df(A,F){$e.call(this),this.H=A,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Df,$e),t=Df.prototype,t.open=function(A,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=A,this.D=F,this.readyState=1,Cu(this)},t.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const F={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};A&&(F.body=A),(this.H||s).fetch(new Request(this.D,F)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Du(this)),this.readyState=0},t.Pa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Z1(this)}else A.text().then(this.Oa.bind(this),this.ga.bind(this))};function Z1(A){A.j.read().then(A.Ma.bind(A)).catch(A.ga.bind(A))}t.Ma=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var F=A.value?A.value:new Uint8Array(0);(F=this.B.decode(F,{stream:!A.done}))&&(this.response=this.responseText+=F)}A.done?Du(this):Cu(this),this.readyState==3&&Z1(this)}},t.Oa=function(A){this.g&&(this.response=this.responseText=A,Du(this))},t.Na=function(A){this.g&&(this.response=A,Du(this))},t.ga=function(){this.g&&Du(this)};function Du(A){A.readyState=4,A.l=null,A.j=null,A.B=null,Cu(A)}t.setRequestHeader=function(A,F){this.A.append(A,F)},t.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],F=this.h.entries();for(var B=F.next();!B.done;)B=B.value,A.push(B[0]+": "+B[1]),B=F.next();return A.join(`\r
`)};function Cu(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Df.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function eb(A){let F="";return z(A,function(B,Q){F+=Q,F+=":",F+=B,F+=`\r
`}),F}function pp(A,F,B){e:{for(Q in B){var Q=!1;break e}Q=!0}Q||(B=eb(B),typeof A=="string"?B!=null&&Ls(B):ar(A,F,B))}function vr(A){$e.call(this),this.headers=new Map,this.L=A||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(vr,$e);var dP=/^https?$/i,mP=["POST","PUT"];t=vr.prototype,t.Fa=function(A){this.H=A},t.ea=function(A,F,B,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);F=F?F.toUpperCase():"GET",this.D=A,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xf.g(),this.g.onreadystatechange=d(o(this.Ca,this));try{this.B=!0,this.g.open(F,String(A),!0),this.B=!1}catch(ge){tb(this,ge);return}if(A=B||"",B=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var de in Q)B.set(de,Q[de]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const ge of Q.keys())B.set(ge,Q.get(ge));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(B.keys()).find(ge=>ge.toLowerCase()=="content-type"),de=s.FormData&&A instanceof s.FormData,!(Array.prototype.indexOf.call(mP,F,void 0)>=0)||Q||de||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Be]of B)this.g.setRequestHeader(ge,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(A),this.v=!1}catch(ge){tb(this,ge)}};function tb(A,F){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=F,A.o=5,rb(A),Cf(A)}function rb(A){A.A||(A.A=!0,G(A,"complete"),G(A,"error"))}t.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=A||7,G(this,"complete"),G(this,"abort"),Cf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cf(this,!0)),vr.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?nb(this):this.Xa())},t.Xa=function(){nb(this)};function nb(A){if(A.h&&typeof i<"u"){if(A.v&&Oi(A)==4)setTimeout(A.Ca.bind(A),0);else if(G(A,"readystatechange"),Oi(A)==4){A.h=!1;try{const ge=A.ca();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var B;if(!(B=F)){var Q;if(Q=ge===0){let Be=String(A.D).match(G1)[1]||null;!Be&&s.self&&s.self.location&&(Be=s.self.location.protocol.slice(0,-1)),Q=!dP.test(Be?Be.toLowerCase():"")}B=Q}if(B)G(A,"complete"),G(A,"success");else{A.o=6;try{var de=Oi(A)>2?A.g.statusText:""}catch{de=""}A.l=de+" ["+A.ca()+"]",rb(A)}}finally{Cf(A)}}}}function Cf(A,F){if(A.g){A.m&&(clearTimeout(A.m),A.m=null);const B=A.g;A.g=null,F||G(A,"ready");try{B.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Oi(A){return A.g?A.g.readyState:0}t.ca=function(){try{return Oi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(A){if(this.g){var F=this.g.responseText;return A&&F.indexOf(A)==0&&(F=F.substring(A.length)),_e(F)}};function ab(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.F){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function hP(A){const F={};A=(A.g&&Oi(A)>=2&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<A.length;Q++){if(I(A[Q]))continue;var B=up(A[Q]);const de=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const ge=F[de]||[];F[de]=ge,ge.push(B)}X(F,function(Q){return Q.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tu(A,F,B){return B&&B.internalChannelParams&&B.internalChannelParams[A]||F}function ib(A){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tu("failFast",!1,A),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tu("baseRetryDelayMs",5e3,A),this.Za=Tu("retryDelaySeedMs",1e4,A),this.Ta=Tu("forwardChannelMaxRetries",2,A),this.va=Tu("forwardChannelRequestTimeoutMs",2e4,A),this.ma=A&&A.xmlHttpFactory||void 0,this.Ua=A&&A.Rb||void 0,this.Aa=A&&A.useFetchStreams||!1,this.O=void 0,this.L=A&&A.supportsCrossDomainXhr||!1,this.M="",this.h=new Ef(A&&A.concurrentRequestLimit),this.Ba=new fP,this.S=A&&A.fastHandshake||!1,this.R=A&&A.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=A&&A.Pb||!1,A&&A.ua&&this.j.ua(),A&&A.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&A&&A.detectBufferingProxy||!1,this.ia=void 0,A&&A.longPollingTimeout&&A.longPollingTimeout>0&&(this.ia=A.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ib.prototype,t.ka=8,t.I=1,t.connect=function(A,F,B,Q){Ge(0),this.W=A,this.H=F||{},B&&Q!==void 0&&(this.H.OSID=B,this.H.OAID=Q),this.F=this.X,this.J=hb(this,null,this.W),Mf(this)};function vp(A){if(sb(A),A.I==3){var F=A.V++,B=$a(A.J);if(ar(B,"SID",A.M),ar(B,"RID",F),ar(B,"TYPE","terminate"),Mu(A,B),F=new ka(A,A.j,F),F.M=2,F.A=Af($a(B)),B=!1,s.navigator&&s.navigator.sendBeacon)try{B=s.navigator.sendBeacon(F.A.toString(),"")}catch{}!B&&s.Image&&(new Image().src=F.A,B=!0),B||(F.g=pb(F.j,null),F.g.ea(F.A)),F.F=Date.now(),$o(F)}mb(A)}function Tf(A){A.g&&(yp(A),A.g.cancel(),A.g=null)}function sb(A){Tf(A),A.v&&(s.clearTimeout(A.v),A.v=null),If(A),A.h.cancel(),A.m&&(typeof A.m=="number"&&s.clearTimeout(A.m),A.m=null)}function Mf(A){if(!Vs(A.h)&&!A.m){A.m=!0;var F=A.Ea;N||_(),g||(N(),g=!0),y.add(F,A),A.D=0}}function pP(A,F){return Fi(A.h)>=A.h.j-(A.m?1:0)?!1:A.m?(A.i=F.G.concat(A.i),!0):A.I==1||A.I==2||A.D>=(A.Sa?0:A.Ta)?!1:(A.m=Ir(o(A.Ea,A,F),db(A,A.D)),A.D++,!0)}t.Ea=function(A){if(this.m)if(this.m=null,this.I==1){if(!A){this.V=Math.floor(Math.random()*1e5),A=this.V++;const de=new ka(this,this.j,A);let ge=this.o;if(this.U&&(ge?(ge=ae(ge),Y(ge,this.U)):ge=this.U),this.u!==null||this.R||(de.J=ge,ge=null),this.S)e:{for(var F=0,B=0;B<this.i.length;B++){t:{var Q=this.i[B];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(F+=Q,F>4096){F=B;break e}if(F===4096||B===this.i.length-1){F=B+1;break e}}F=1e3}else F=1e3;F=lb(this,de,F),B=$a(this.J),ar(B,"RID",A),ar(B,"CVER",22),this.G&&ar(B,"X-HTTP-Session-Id",this.G),Mu(this,B),ge&&(this.R?F="headers="+Ls(eb(ge))+"&"+F:this.u&&pp(B,this.u,ge)),dp(this.h,de),this.Ra&&ar(B,"TYPE","init"),this.S?(ar(B,"$req",F),ar(B,"SID","null"),de.U=!0,xu(de,B,null)):xu(de,B,F),this.I=2}}else this.I==3&&(A?ob(this,A):this.i.length==0||Vs(this.h)||ob(this))};function ob(A,F){var B;F?B=F.l:B=A.V++;const Q=$a(A.J);ar(Q,"SID",A.M),ar(Q,"RID",B),ar(Q,"AID",A.K),Mu(A,Q),A.u&&A.o&&pp(Q,A.u,A.o),B=new ka(A,A.j,B,A.D+1),A.u===null&&(B.J=A.o),F&&(A.i=F.G.concat(A.i)),F=lb(A,B,1e3),B.H=Math.round(A.va*.5)+Math.round(A.va*.5*Math.random()),dp(A.h,B),xu(B,Q,F)}function Mu(A,F){A.H&&z(A.H,function(B,Q){ar(F,Q,B)}),A.l&&z({},function(B,Q){ar(F,Q,B)})}function lb(A,F,B){B=Math.min(A.i.length,B);const Q=A.l?o(A.l.Ka,A.l,A):null;e:{var de=A.i;let yt=-1;for(;;){const Fr=["count="+B];yt==-1?B>0?(yt=de[0].g,Fr.push("ofs="+yt)):yt=0:Fr.push("ofs="+yt);let er=!0;for(let zr=0;zr<B;zr++){var ge=de[zr].g;const La=de[zr].map;if(ge-=yt,ge<0)yt=Math.max(0,de[zr].g-100),er=!1;else try{ge="req"+ge+"_"||"";try{var Be=La instanceof Map?La:Object.entries(La);for(const[Hs,Bi]of Be){let ji=Bi;l(Bi)&&(ji=ve(Bi)),Fr.push(ge+Hs+"="+encodeURIComponent(ji))}}catch(Hs){throw Fr.push(ge+"type="+encodeURIComponent("_badmap")),Hs}}catch{Q&&Q(La)}}if(er){Be=Fr.join("&");break e}}Be=void 0}return A=A.i.splice(0,B),F.G=A,Be}function ub(A){if(!A.g&&!A.v){A.Y=1;var F=A.Da;N||_(),g||(N(),g=!0),y.add(F,A),A.A=0}}function gp(A){return A.g||A.v||A.A>=3?!1:(A.Y++,A.v=Ir(o(A.Da,A),db(A,A.A)),A.A++,!0)}t.Da=function(){if(this.v=null,cb(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var A=4*this.T;this.j.info("BP detection timer enabled: "+A),this.B=Ir(o(this.Wa,this),A)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ge(10),Tf(this),cb(this))};function yp(A){A.B!=null&&(s.clearTimeout(A.B),A.B=null)}function cb(A){A.g=new ka(A,A.j,"rpc",A.Y),A.u===null&&(A.g.J=A.o),A.g.P=0;var F=$a(A.na);ar(F,"RID","rpc"),ar(F,"SID",A.M),ar(F,"AID",A.K),ar(F,"CI",A.F?"0":"1"),!A.F&&A.ia&&ar(F,"TO",A.ia),ar(F,"TYPE","xmlhttp"),Mu(A,F),A.u&&A.o&&pp(F,A.u,A.o),A.O&&(A.g.H=A.O);var B=A.g;A=A.ba,B.M=1,B.A=Af($a(F)),B.u=null,B.R=!0,Nf(B,A)}t.Va=function(){this.C!=null&&(this.C=null,Tf(this),gp(this),Ge(19))};function If(A){A.C!=null&&(s.clearTimeout(A.C),A.C=null)}function fb(A,F){var B=null;if(A.g==F){If(A),yp(A),A.g=null;var Q=2}else if(wu(A.h,F))B=F.G,q1(A.h,F),Q=1;else return;if(A.I!=0){if(F.o)if(Q==1){B=F.u?F.u.length:0,F=Date.now()-F.F;var de=A.D;Q=R(),G(Q,new dt(Q,B)),Mf(A)}else ub(A);else if(de=F.m,de==3||de==0&&F.X>0||!(Q==1&&pP(A,F)||Q==2&&gp(A)))switch(B&&B.length>0&&(F=A.h,F.i=F.i.concat(B)),de){case 1:qs(A,5);break;case 4:qs(A,10);break;case 3:qs(A,6);break;default:qs(A,2)}}}function db(A,F){let B=A.Qa+Math.floor(Math.random()*A.Za);return A.isActive()||(B*=2),B*F}function qs(A,F){if(A.j.info("Error code "+F),F==2){var B=o(A.bb,A),Q=A.Ua;const de=!Q;Q=new Pi(Q||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Nu(Q,"https"),Af(Q),de?uP(Q.toString(),B):cP(Q.toString(),B)}else Ge(2);A.I=0,A.l&&A.l.pa(F),mb(A),sb(A)}t.bb=function(A){A?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function mb(A){if(A.I=0,A.ja=[],A.l){const F=H1(A.h);(F.length!=0||A.i.length!=0)&&(p(A.ja,F),p(A.ja,A.i),A.h.i.length=0,m(A.i),A.i.length=0),A.l.oa()}}function hb(A,F,B){var Q=B instanceof Pi?$a(B):new Pi(B);if(Q.g!="")F&&(Q.g=F+"."+Q.g),_u(Q,Q.u);else{var de=s.location;Q=de.protocol,F=F?F+"."+de.hostname:de.hostname,de=+de.port;const ge=new Pi(null);Q&&Nu(ge,Q),F&&(ge.g=F),de&&_u(ge,de),B&&(ge.h=B),Q=ge}return B=A.G,F=A.wa,B&&F&&ar(Q,B,F),ar(Q,"VER",A.ka),Mu(A,Q),Q}function pb(A,F,B){if(F&&!A.L)throw Error("Can't create secondary domain capable XhrIo object.");return F=A.Aa&&!A.ma?new vr(new hp({ab:B})):new vr(A.ma),F.Fa(A.L),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vb(){}t=vb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ff(){}Ff.prototype.g=function(A,F){return new Hn(A,F)};function Hn(A,F){$e.call(this),this.g=new ib(F),this.l=A,this.h=F&&F.messageUrlParams||null,A=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(A?A["X-WebChannel-Content-Type"]=F.messageContentType:A={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.sa&&(A?A["X-WebChannel-Client-Profile"]=F.sa:A={"X-WebChannel-Client-Profile":F.sa}),this.g.U=A,(A=F&&F.Qb)&&!I(A)&&(this.g.u=A),this.A=F&&F.supportsCrossDomainXhr||!1,this.v=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!I(F)&&(this.g.G=F,A=this.h,A!==null&&F in A&&(A=this.h,F in A&&delete A[F])),this.j=new zo(this)}f(Hn,$e),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){vp(this.g)},Hn.prototype.o=function(A){var F=this.g;if(typeof A=="string"){var B={};B.__data__=A,A=B}else this.v&&(B={},B.__data__=ve(A),A=B);F.i.push(new ln(F.Ya++,A)),F.I==3&&Mf(F)},Hn.prototype.N=function(){this.g.l=null,delete this.j,vp(this.g),delete this.g,Hn.Z.N.call(this)};function gb(A){gt.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var F=A.__sm__;if(F){e:{for(const B in F){A=B;break e}A=void 0}(this.i=A)&&(A=this.i,F=F!==null&&A in F?F[A]:void 0),this.data=F}else this.data=A}f(gb,gt);function yb(){Ut.call(this),this.status=1}f(yb,Ut);function zo(A){this.g=A}f(zo,vb),zo.prototype.ra=function(){G(this.g,"a")},zo.prototype.qa=function(A){G(this.g,new gb(A))},zo.prototype.pa=function(A){G(this.g,new yb)},zo.prototype.oa=function(){G(this.g,"b")},Ff.prototype.createWebChannel=Ff.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,dT=function(){return new Ff},fT=function(){return R()},cT=Ze,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,Od=ko,yf.COMPLETE="complete",uT=yf,Ae.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Hu=Ae,vr.prototype.listenOnce=vr.prototype.K,vr.prototype.getLastError=vr.prototype.Ha,vr.prototype.getLastErrorCode=vr.prototype.ya,vr.prototype.getStatus=vr.prototype.ca,vr.prototype.getResponseJson=vr.prototype.La,vr.prototype.getResponseText=vr.prototype.la,vr.prototype.send=vr.prototype.ea,vr.prototype.setWithCredentials=vr.prototype.Fa,lT=vr}).apply(typeof Jf<"u"?Jf:typeof self<"u"?self:typeof window<"u"?window:{});const Qw="@firebase/firestore",Xw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new tT("@firebase/firestore");function Xo(){return fo.logLevel}function Ve(t,...e){if(fo.logLevel<=Ft.DEBUG){const r=e.map(Y0);fo.debug(`Firestore (${eu}): ${t}`,...r)}}function Ni(t,...e){if(fo.logLevel<=Ft.ERROR){const r=e.map(Y0);fo.error(`Firestore (${eu}): ${t}`,...r)}}function Ol(t,...e){if(fo.logLevel<=Ft.WARN){const r=e.map(Y0);fo.warn(`Firestore (${eu}): ${t}`,...r)}}function Y0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,mT(t,n,r)}function mT(t,e,r){let n=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Ni(n),new Error(n)}function Gt(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||mT(e,a,n)}function ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Zl{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(mn.UNAUTHENTICATED))}shutdown(){}}class Bj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class jj{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Gt(this.o===void 0,42304);let n=this.i;const a=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cs,e.enqueueRetryable(()=>a(this.currentUser))};const s=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await a(this.currentUser)})},l=u=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cs)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Gt(typeof n.accessToken=="string",31837,{l:n}),new hT(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class kj{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $j{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new kj(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lj{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yj(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Gt(this.o===void 0,3512);const n=i=>{i.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,Ve("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const a=i=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Gt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Kw(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=zj(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%62))}return n}}function St(t,e){return t<e?-1:t>e?1:0}function mg(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),i=e.charAt(n);if(a!==i)return Jp(a)===Jp(i)?St(a,i):Jp(a)?1:-1}return St(t.length,e.length)}const Vj=55296,Uj=57343;function Jp(t){const e=t.charCodeAt(0);return e>=Vj&&e<=Uj}function Bl(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="__name__";class Ua{constructor(e,r,n){r===void 0?r=0:r>e.length&&rt(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&rt(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ua.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ua?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=Ua.compareSegments(e.get(a),r.get(a));if(i!==0)return i}return St(e.length,r.length)}static compareSegments(e,r){const n=Ua.isNumericId(e),a=Ua.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Ua.extractNumericId(e).compare(Ua.extractNumericId(r)):mg(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class rr extends Ua{construct(e,r,n){return new rr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Le(we.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new rr(r)}static emptyPath(){return new rr([])}}const qj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends Ua{construct(e,r,n){return new Zr(e,r,n)}static isValidIdentifier(e){return qj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jw}static keyField(){return new Zr([Jw])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new Le(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new Le(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[a+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Le(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,a+=2}else l==="`"?(s=!s,a++):l!=="."||s?(n+=l,a++):(i(),a++)}if(i(),s)throw new Le(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(r)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(rr.fromString(e))}static fromName(e){return new Je(rr.fromString(e).popFirst(5))}static empty(){return new Je(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return rr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new rr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t,e,r){if(!r)throw new Le(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hj(t,e,r,n){if(e===!0&&n===!0)throw new Le(we.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Yw(t){if(!Je.isDocumentKey(t))throw new Le(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zw(t){if(Je.isDocumentKey(t))throw new Le(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":rt(12329,{type:typeof t})}function Pc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Le(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=xh(t);throw new Le(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){const r={typeString:t};return e&&(r.value=e),r}function ef(t,e){if(!vT(t))throw new Le(we.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const s=t[n];if(a&&typeof s!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(i!==void 0&&s!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new Le(we.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=-62135596800,tN=1e6;class sr{static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*tN);return new sr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<eN)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tN}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ef(e,sr._jsonSchema))return new sr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sr._jsonSchemaVersion="firestore/timestamp/1.0",sr._jsonSchema={type:Cr("string",sr._jsonSchemaVersion),seconds:Cr("number"),nanoseconds:Cr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new sr(0,0))}static max(){return new ot(new sr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=-1;function Gj(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=ot.fromTimestamp(n===1e9?new sr(r+1,0):new sr(r,n));return new ps(a,Je.empty(),e)}function Wj(t){return new ps(t.readTime,t.key,Rc)}class ps{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ps(ot.min(),Je.empty(),Rc)}static max(){return new ps(ot.max(),Je.empty(),Rc)}}function Qj(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Je.comparator(t.documentKey,e.documentKey),r!==0?r:St(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==Xj)throw t;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ne((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ne?r:Ne.resolve(r)}catch(r){return Ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ne.reject(r)}static resolve(e){return new Ne((r,n)=>{r(e)})}static reject(e){return new Ne((r,n)=>{n(e)})}static waitFor(e){return new Ne((r,n)=>{let a=0,i=0,s=!1;e.forEach(l=>{++a,l.next(()=>{++i,s&&i===a&&r()},u=>n(u))}),s=!0,i===a&&r()})}static or(e){let r=Ne.resolve(!1);for(const n of e)r=r.next(a=>a?Ne.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,i)=>{n.push(r.call(this,a,i))}),this.waitFor(n)}static mapArray(e,r){return new Ne((n,a)=>{const i=e.length,s=new Array(i);let l=0;for(let u=0;u<i;u++){const o=u;r(e[o]).next(c=>{s[o]=c,++l,l===i&&n(s)},c=>a(c))}})}static doWhile(e,r){return new Ne((n,a)=>{const i=()=>{e()===!0?r().next(()=>{i()},a):n()};i()})}}function Jj(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ru(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=-1;function wh(t){return t==null}function ym(t){return t===0&&1/t==-1/0}function Yj(t){return typeof t=="number"&&Number.isInteger(t)&&!ym(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="";function Zj(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=rN(e)),e=e5(t.get(r),e);return rN(e)}function e5(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case gT:r+="";break;default:r+=i}}return r}function rN(t){return t+gT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function wo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function yT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,r){this.comparator=e,this.root=r||Yr.EMPTY}insert(e,r){return new pr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yf(this.root,e,this.comparator,!0)}}class Yf{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??Yr.RED,this.left=a??Yr.EMPTY,this.right=i??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new Yr(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Yr.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,r,n,a,i){return this}insert(e,r,n){return new Yr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new aN(this.data.getIterator())}getIteratorFrom(e){return new aN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Br(this.comparator);return r.data=e,r}}class aN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new Aa([])}unionWith(e){let r=new Br(Zr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Aa(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Bl(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xT("Invalid base64 string: "+i):i}}(e);return new sn(r)}static fromUint8Array(e){const r=function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i}(e);return new sn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const t5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(Gt(!!t,39018),typeof t=="string"){let e=0;const r=t5.exec(t);if(Gt(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:wr(t.seconds),nanos:wr(t.nanos)}}function wr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="server_timestamp",wT="__type__",NT="__previous_value__",_T="__local_write_time__";function ty(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[wT])==null?void 0:n.stringValue)===bT}function Nh(t){const e=t.mapValue.fields[NT];return ty(e)?Nh(e):e}function Oc(t){const e=vs(t.mapValue.fields[_T].timestampValue);return new sr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,r,n,a,i,s,l,u,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=o,this.isUsingEmulator=c}}const xm="(default)";class Bc{constructor(e,r){this.projectId=e,this.database=r||xm}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===xm}isEqual(e){return e instanceof Bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="__type__",n5="__max__",Zf={mapValue:{}},ET="__vector__",bm="value";function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ty(t)?4:i5(t)?9007199254740991:a5(t)?10:11:rt(28295,{value:t})}function Za(t,e){if(t===e)return!0;const r=ys(t);if(r!==ys(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oc(t).isEqual(Oc(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=vs(a.timestampValue),l=vs(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return gs(a.bytesValue).isEqual(gs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return wr(a.geoPointValue.latitude)===wr(i.geoPointValue.latitude)&&wr(a.geoPointValue.longitude)===wr(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return wr(a.integerValue)===wr(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=wr(a.doubleValue),l=wr(i.doubleValue);return s===l?ym(s)===ym(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Bl(t.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:case 11:return function(a,i){const s=a.mapValue.fields||{},l=i.mapValue.fields||{};if(nN(s)!==nN(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Za(s[u],l[u])))return!1;return!0}(t,e);default:return rt(52216,{left:t})}}function jc(t,e){return(t.values||[]).find(r=>Za(r,e))!==void 0}function jl(t,e){if(t===e)return 0;const r=ys(t),n=ys(e);if(r!==n)return St(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return St(t.booleanValue,e.booleanValue);case 2:return function(i,s){const l=wr(i.integerValue||i.doubleValue),u=wr(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return iN(t.timestampValue,e.timestampValue);case 4:return iN(Oc(t),Oc(e));case 5:return mg(t.stringValue,e.stringValue);case 6:return function(i,s){const l=gs(i),u=gs(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),u=s.split("/");for(let o=0;o<l.length&&o<u.length;o++){const c=St(l[o],u[o]);if(c!==0)return c}return St(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const l=St(wr(i.latitude),wr(s.latitude));return l!==0?l:St(wr(i.longitude),wr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sN(t.arrayValue,e.arrayValue);case 10:return function(i,s){var d,m,p,h;const l=i.fields||{},u=s.fields||{},o=(d=l[bm])==null?void 0:d.arrayValue,c=(m=u[bm])==null?void 0:m.arrayValue,f=St(((p=o==null?void 0:o.values)==null?void 0:p.length)||0,((h=c==null?void 0:c.values)==null?void 0:h.length)||0);return f!==0?f:sN(o,c)}(t.mapValue,e.mapValue);case 11:return function(i,s){if(i===Zf.mapValue&&s===Zf.mapValue)return 0;if(i===Zf.mapValue)return 1;if(s===Zf.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),o=s.fields||{},c=Object.keys(o);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=mg(u[f],c[f]);if(d!==0)return d;const m=jl(l[u[f]],o[c[f]]);if(m!==0)return m}return St(u.length,c.length)}(t.mapValue,e.mapValue);default:throw rt(23264,{he:r})}}function iN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return St(t,e);const r=vs(t),n=vs(e),a=St(r.seconds,n.seconds);return a!==0?a:St(r.nanos,n.nanos)}function sN(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=jl(r[a],n[a]);if(i)return i}return St(r.length,n.length)}function kl(t){return hg(t)}function hg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=vs(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return gs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Je.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=hg(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const s of n)i?i=!1:a+=",",a+=`${s}:${hg(r.fields[s])}`;return a+"}"}(t.mapValue):rt(61005,{value:t})}function Bd(t){switch(ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(t);return e?16+Bd(e):16;case 5:return 2*t.stringValue.length;case 6:return gs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,i)=>a+Bd(i),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return wo(n.fields,(i,s)=>{a+=i.length+Bd(s)}),a}(t.mapValue);default:throw rt(13486,{value:t})}}function oN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pg(t){return!!t&&"integerValue"in t}function ry(t){return!!t&&"arrayValue"in t}function lN(t){return!!t&&"nullValue"in t}function uN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jd(t){return!!t&&"mapValue"in t}function a5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[ST])==null?void 0:n.stringValue)===ET}function sc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=sc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=sc(t.arrayValue.values[r]);return e}return{...t}}function i5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===n5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.value=e}static empty(){return new la({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!jd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(r)}setAll(e){let r=Zr.emptyPath(),n={},a=[];e.forEach((s,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,a),n={},a=[],r=l.popLast()}s?n[l.lastSegment()]=sc(s):a.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());jd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];jd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){wo(r,(a,i)=>e[a]=i);for(const a of n)delete e[a]}clone(){return new la(sc(this.value))}}function AT(t){const e=[];return wo(t.fields,(r,n)=>{const a=new Zr([r]);if(jd(n)){const i=AT(n.mapValue).fields;if(i.length===0)e.push(a);else for(const s of i)e.push(a.child(s))}else e.push(a)}),new Aa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,r,n,a,i,s,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=s,this.documentState=l}static newInvalidDocument(e){return new pn(e,0,ot.min(),ot.min(),ot.min(),la.empty(),0)}static newFoundDocument(e,r,n,a){return new pn(e,1,r,ot.min(),n,a,0)}static newNoDocument(e,r){return new pn(e,2,r,ot.min(),ot.min(),la.empty(),0)}static newUnknownDocument(e,r){return new pn(e,3,r,ot.min(),ot.min(),la.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=la.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=la.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,r){this.position=e,this.inclusive=r}}function cN(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],s=t.position[a];if(i.field.isKeyField()?n=Je.comparator(Je.fromName(s.referenceValue),r.key):n=jl(s,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function fN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Za(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,r="asc"){this.field=e,this.dir=r}}function s5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class Dr extends DT{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new l5(e,r,n):r==="array-contains"?new f5(e,n):r==="in"?new d5(e,n):r==="not-in"?new m5(e,n):r==="array-contains-any"?new h5(e,n):new Dr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new u5(e,n):new c5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(jl(r,this.value)):r!==null&&ys(this.value)===ys(r)&&this.matchesComparison(jl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ia extends DT{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Ia(e,r)}matches(e){return CT(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CT(t){return t.op==="and"}function TT(t){return o5(t)&&CT(t)}function o5(t){for(const e of t.filters)if(e instanceof Ia)return!1;return!0}function vg(t){if(t instanceof Dr)return t.field.canonicalString()+t.op.toString()+kl(t.value);if(TT(t))return t.filters.map(e=>vg(e)).join(",");{const e=t.filters.map(r=>vg(r)).join(",");return`${t.op}(${e})`}}function MT(t,e){return t instanceof Dr?function(n,a){return a instanceof Dr&&n.op===a.op&&n.field.isEqual(a.field)&&Za(n.value,a.value)}(t,e):t instanceof Ia?function(n,a){return a instanceof Ia&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((i,s,l)=>i&&MT(s,a.filters[l]),!0):!1}(t,e):void rt(19439)}function IT(t){return t instanceof Dr?function(r){return`${r.field.canonicalString()} ${r.op} ${kl(r.value)}`}(t):t instanceof Ia?function(r){return r.op.toString()+" {"+r.getFilters().map(IT).join(" ,")+"}"}(t):"Filter"}class l5 extends Dr{constructor(e,r,n){super(e,r,n),this.key=Je.fromName(n.referenceValue)}matches(e){const r=Je.comparator(e.key,this.key);return this.matchesComparison(r)}}class u5 extends Dr{constructor(e,r){super(e,"in",r),this.keys=FT("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class c5 extends Dr{constructor(e,r){super(e,"not-in",r),this.keys=FT("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function FT(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>Je.fromName(n.referenceValue))}class f5 extends Dr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ry(r)&&jc(r.arrayValue,this.value)}}class d5 extends Dr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&jc(this.value.arrayValue,r)}}class m5 extends Dr{constructor(e,r){super(e,"not-in",r)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!jc(this.value.arrayValue,r)}}class h5 extends Dr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ry(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>jc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,r=null,n=[],a=[],i=null,s=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=s,this.endAt=l,this.Te=null}}function dN(t,e=null,r=[],n=[],a=null,i=null,s=null){return new p5(t,e,r,n,a,i,s)}function ny(t){const e=ct(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>vg(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),wh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>kl(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>kl(n)).join(",")),e.Te=r}return e.Te}function ay(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!s5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!MT(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fN(t.startAt,e.startAt)&&fN(t.endAt,e.endAt)}function gg(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,r=null,n=[],a=[],i=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function v5(t,e,r,n,a,i,s,l){return new nu(t,e,r,n,a,i,s,l)}function PT(t){return new nu(t)}function mN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RT(t){return t.collectionGroup!==null}function oc(t){const e=ct(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Br(Zr.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(o=>{o.isInequality()&&(l=l.add(o.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new kc(i,n))}),r.has(Zr.keyField().canonicalString())||e.Ie.push(new kc(Zr.keyField(),n))}return e.Ie}function Qa(t){const e=ct(t);return e.Ee||(e.Ee=g5(e,oc(t))),e.Ee}function g5(t,e){if(t.limitType==="F")return dN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new kc(a.field,i)});const r=t.endAt?new wm(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new wm(t.startAt.position,t.startAt.inclusive):null;return dN(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function yg(t,e){const r=t.filters.concat([e]);return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function xg(t,e,r){return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function _h(t,e){return ay(Qa(t),Qa(e))&&t.limitType===e.limitType}function OT(t){return`${ny(Qa(t))}|lt:${t.limitType}`}function Ko(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>IT(a)).join(", ")}]`),wh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>kl(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>kl(a)).join(",")),`Target(${n})`}(Qa(t))}; limitType=${t.limitType})`}function Sh(t,e){return e.isFoundDocument()&&function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Je.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,a){for(const i of oc(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(s,l,u){const o=cN(s,l,u);return s.inclusive?o<=0:o<0}(n.startAt,oc(n),a)||n.endAt&&!function(s,l,u){const o=cN(s,l,u);return s.inclusive?o>=0:o>0}(n.endAt,oc(n),a))}(t,e)}function y5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BT(t){return(e,r)=>{let n=!1;for(const a of oc(t)){const i=x5(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function x5(t,e,r){const n=t.field.isKeyField()?Je.comparator(e.key,r.key):function(i,s,l){const u=s.data.field(i),o=l.data.field(i);return u!==null&&o!==null?jl(u,o):rt(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return rt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(r,n)=>{for(const[a,i]of n)e(a,i)})}isEmpty(){return yT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new pr(Je.comparator);function _i(){return b5}const jT=new pr(Je.comparator);function Gu(...t){let e=jT;for(const r of t)e=e.insert(r.key,r);return e}function kT(t){let e=jT;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function eo(){return lc()}function $T(){return lc()}function lc(){return new No(t=>t.toString(),(t,e)=>t.isEqual(e))}const w5=new pr(Je.comparator),N5=new Br(Je.comparator);function Et(...t){let e=N5;for(const r of t)e=e.add(r);return e}const _5=new Br(St);function S5(){return _5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ym(e)?"-0":e}}function LT(t){return{integerValue:""+t}}function E5(t,e){return Yj(e)?LT(e):iy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function A5(t,e,r){return t instanceof $c?function(a,i){const s={fields:{[wT]:{stringValue:bT},[_T]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&ty(i)&&(i=Nh(i)),i&&(s.fields[NT]=i),{mapValue:s}}(r,e):t instanceof Lc?VT(t,e):t instanceof zc?UT(t,e):function(a,i){const s=zT(a,i),l=hN(s)+hN(a.Ae);return pg(s)&&pg(a.Ae)?LT(l):iy(a.serializer,l)}(t,e)}function D5(t,e,r){return t instanceof Lc?VT(t,e):t instanceof zc?UT(t,e):r}function zT(t,e){return t instanceof Nm?function(n){return pg(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class $c extends Eh{}class Lc extends Eh{constructor(e){super(),this.elements=e}}function VT(t,e){const r=qT(e);for(const n of t.elements)r.some(a=>Za(a,n))||r.push(n);return{arrayValue:{values:r}}}class zc extends Eh{constructor(e){super(),this.elements=e}}function UT(t,e){let r=qT(e);for(const n of t.elements)r=r.filter(a=>!Za(a,n));return{arrayValue:{values:r}}}class Nm extends Eh{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function hN(t){return wr(t.integerValue||t.doubleValue)}function qT(t){return ry(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,r){this.field=e,this.transform=r}}function T5(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Lc&&a instanceof Lc||n instanceof zc&&a instanceof zc?Bl(n.elements,a.elements,Za):n instanceof Nm&&a instanceof Nm?Za(n.Ae,a.Ae):n instanceof $c&&a instanceof $c}(t.transform,e.transform)}class M5{constructor(e,r){this.version=e,this.transformResults=r}}class Xa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Xa}static exists(e){return new Xa(void 0,e)}static updateTime(e){return new Xa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ah{}function HT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sy(t.key,Xa.none()):new tf(t.key,t.data,Xa.none());{const r=t.data,n=la.empty();let a=new Br(Zr.comparator);for(let i of e.fields)if(!a.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),a=a.add(i)}return new _o(t.key,n,new Aa(a.toArray()),Xa.none())}}function I5(t,e,r){t instanceof tf?function(a,i,s){const l=a.value.clone(),u=vN(a.fieldTransforms,i,s.transformResults);l.setAll(u),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):t instanceof _o?function(a,i,s){if(!kd(a.precondition,i))return void i.convertToUnknownDocument(s.version);const l=vN(a.fieldTransforms,i,s.transformResults),u=i.data;u.setAll(GT(a)),u.setAll(l),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,r):function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function uc(t,e,r,n){return t instanceof tf?function(i,s,l,u){if(!kd(i.precondition,s))return l;const o=i.value.clone(),c=gN(i.fieldTransforms,u,s);return o.setAll(c),s.convertToFoundDocument(s.version,o).setHasLocalMutations(),null}(t,e,r,n):t instanceof _o?function(i,s,l,u){if(!kd(i.precondition,s))return l;const o=gN(i.fieldTransforms,u,s),c=s.data;return c.setAll(GT(i)),c.setAll(o),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,s,l){return kd(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,r)}function F5(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=zT(n.transform,a||null);i!=null&&(r===null&&(r=la.empty()),r.set(n.field,i))}return r||null}function pN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Bl(n,a,(i,s)=>T5(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tf extends Ah{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _o extends Ah{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GT(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function vN(t,e,r){const n=new Map;Gt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const i=t[a],s=i.transform,l=e.data.field(i.field);n.set(i.field,D5(s,l,r[a]))}return n}function gN(t,e,r){const n=new Map;for(const a of t){const i=a.transform,s=r.data.field(a.field);n.set(a.field,A5(i,s,e))}return n}class sy extends Ah{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P5 extends Ah{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&I5(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=uc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=uc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=$T();return this.mutations.forEach(a=>{const i=e.get(a.key),s=i.overlayedDocument;let l=this.applyToLocalView(s,i.mutatedFields);l=r.has(a.key)?null:l;const u=HT(s,l);u!==null&&n.set(a.key,u),s.isValidDocument()||s.convertToNoDocument(ot.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Et())}isEqual(e){return this.batchId===e.batchId&&Bl(this.mutations,e.mutations,(r,n)=>pN(r,n))&&Bl(this.baseMutations,e.baseMutations,(r,n)=>pN(r,n))}}class oy{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Gt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return w5}();const i=e.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,n[s].version);return new oy(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er,It;function j5(t){switch(t){case we.OK:return rt(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return rt(15467,{code:t})}}function WT(t){if(t===void 0)return Ni("GRPC error has no .code"),we.UNKNOWN;switch(t){case Er.OK:return we.OK;case Er.CANCELLED:return we.CANCELLED;case Er.UNKNOWN:return we.UNKNOWN;case Er.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Er.INTERNAL:return we.INTERNAL;case Er.UNAVAILABLE:return we.UNAVAILABLE;case Er.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Er.NOT_FOUND:return we.NOT_FOUND;case Er.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Er.ABORTED:return we.ABORTED;case Er.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Er.DATA_LOSS:return we.DATA_LOSS;default:return rt(39323,{code:t})}}(It=Er||(Er={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new us([4294967295,4294967295],0);function yN(t){const e=k5().encode(t),r=new oT;return r.update(e),new Uint8Array(r.digest())}function xN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new us([r,n],0),new us([a,i],0)]}class ly{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Wu(`Invalid padding: ${r}`);if(n<0)throw new Wu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=us.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(us.fromNumber(n)));return a.compare($5)===1&&(a=new us([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=yN(e),[n,a]=xN(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);if(!this.we(s))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ly(i,a,r);return n.forEach(l=>s.insert(l)),s}insert(e){if(this.ge===0)return;const r=yN(e),[n,a]=xN(r);for(let i=0;i<this.hashCount;i++){const s=this.ye(n,a,i);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,rf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Dh(ot.min(),a,new pr(St),_i(),Et())}}class rf{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new rf(n,r,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class QT{constructor(e,r){this.targetId=e,this.Ce=r}}class XT{constructor(e,r,n=sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class bN{constructor(){this.ve=0,this.Fe=wN(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Et(),r=Et(),n=Et();return this.Fe.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:rt(38017,{changeType:i})}}),new rf(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=wN()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class L5{constructor(e){this.Ge=e,this.ze=new Map,this.je=_i(),this.Je=ed(),this.He=ed(),this.Ye=new pr(St)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const i=a.target;if(gg(i))if(n===0){const s=new Je(i.path);this.et(r,s,pn.newNoDocument(s,ot.min()))}else Gt(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const l=this.ut(e),u=l?this.ct(l,e,s):1;if(u!==0){this.it(r);const o=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,o)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let s,l;try{s=gs(n).toUint8Array()}catch(u){if(u instanceof xT)return Ol("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ly(s,a,i)}catch(u){return Ol(u instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(i=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(r,i,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((i,s)=>{const l=this.ot(s);if(l){if(i.current&&gg(l.target)){const u=new Je(l.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,pn.newNoDocument(u,e))}i.Be&&(r.set(s,i.ke()),i.qe())}});let n=Et();this.He.forEach((i,s)=>{let l=!0;s.forEachWhile(u=>{const o=this.ot(u);return!o||o.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.je.forEach((i,s)=>s.setReadTime(e));const a=new Dh(e,r,this.Ye,this.je,n);return this.je=_i(),this.Je=ed(),this.He=ed(),this.Ye=new pr(St),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new bN,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Br(St),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Br(St),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Ve("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bN),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function ed(){return new pr(Je.comparator)}function wN(){return new pr(Je.comparator)}const z5={asc:"ASCENDING",desc:"DESCENDING"},V5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U5={and:"AND",or:"OR"};class q5{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function bg(t,e){return t.useProto3Json||wh(e)?e:{value:e}}function _m(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H5(t,e){return _m(t,e.toTimestamp())}function Ka(t){return Gt(!!t,49232),ot.fromTimestamp(function(r){const n=vs(r);return new sr(n.seconds,n.nanos)}(t))}function uy(t,e){return wg(t,e).canonicalString()}function wg(t,e){const r=function(a){return new rr(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function JT(t){const e=rr.fromString(t);return Gt(r3(e),10190,{key:e.toString()}),e}function Ng(t,e){return uy(t.databaseId,e.path)}function Yp(t,e){const r=JT(e);if(r.get(1)!==t.databaseId.projectId)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Je(ZT(r))}function YT(t,e){return uy(t.databaseId,e)}function G5(t){const e=JT(t);return e.length===4?rr.emptyPath():ZT(e)}function _g(t){return new rr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZT(t){return Gt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function NN(t,e,r){return{name:Ng(t,e),fields:r.value.mapValue.fields}}function W5(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(o){return o==="NO_CHANGE"?0:o==="ADD"?1:o==="REMOVE"?2:o==="CURRENT"?3:o==="RESET"?4:rt(39313,{state:o})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(o,c){return o.useProto3Json?(Gt(c===void 0||typeof c=="string",58123),sn.fromBase64String(c||"")):(Gt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),sn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(o){const c=o.code===void 0?we.UNKNOWN:WT(o.code);return new Le(c,o.message||"")}(s);r=new XT(n,a,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Yp(t,n.document.name),i=Ka(n.document.updateTime),s=n.document.createTime?Ka(n.document.createTime):ot.min(),l=new la({mapValue:{fields:n.document.fields}}),u=pn.newFoundDocument(a,i,s,l),o=n.targetIds||[],c=n.removedTargetIds||[];r=new $d(o,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Yp(t,n.document),i=n.readTime?Ka(n.readTime):ot.min(),s=pn.newNoDocument(a,i),l=n.removedTargetIds||[];r=new $d([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Yp(t,n.document),i=n.removedTargetIds||[];r=new $d([],i,a,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,s=new B5(a,i),l=n.targetId;r=new QT(l,s)}}return r}function Q5(t,e){let r;if(e instanceof tf)r={update:NN(t,e.key,e.value)};else if(e instanceof sy)r={delete:Ng(t,e.key)};else if(e instanceof _o)r={update:NN(t,e.key,e.data),updateMask:n9(e.fieldMask)};else{if(!(e instanceof P5))return rt(16599,{Vt:e.type});r={verify:Ng(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const l=s.transform;if(l instanceof $c)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Lc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nm)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw rt(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:H5(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:rt(27497)}(t,e.precondition)),r}function X5(t,e){return t&&t.length>0?(Gt(e!==void 0,14353),t.map(r=>function(a,i){let s=a.updateTime?Ka(a.updateTime):Ka(i);return s.isEqual(ot.min())&&(s=Ka(i)),new M5(s,a.transformResults||[])}(r,e))):[]}function K5(t,e){return{documents:[YT(t,e.path)]}}function J5(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=YT(t,a);const i=function(o){if(o.length!==0)return t3(Ia.create(o,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const s=function(o){if(o.length!==0)return o.map(c=>function(d){return{field:Jo(d.field),direction:e9(d.dir)}}(c))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const l=bg(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(o){return{before:o.inclusive,values:o.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(o){return{before:!o.inclusive,values:o.position}}(e.endAt)),{ft:r,parent:a}}function Y5(t){let e=G5(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Gt(n===1,65062);const c=r.from[0];c.allDescendants?a=c.collectionId:e=e.child(c.collectionId)}let i=[];r.where&&(i=function(f){const d=e3(f);return d instanceof Ia&&TT(d)?d.getFilters():[d]}(r.where));let s=[];r.orderBy&&(s=function(f){return f.map(d=>function(p){return new kc(Yo(p.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(r.orderBy));let l=null;r.limit&&(l=function(f){let d;return d=typeof f=="object"?f.value:f,wh(d)?null:d}(r.limit));let u=null;r.startAt&&(u=function(f){const d=!!f.before,m=f.values||[];return new wm(m,d)}(r.startAt));let o=null;return r.endAt&&(o=function(f){const d=!f.before,m=f.values||[];return new wm(m,d)}(r.endAt)),v5(e,a,s,i,l,"F",u,o)}function Z5(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function e3(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Yo(r.unaryFilter.field);return Dr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Yo(r.unaryFilter.field);return Dr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yo(r.unaryFilter.field);return Dr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Yo(r.unaryFilter.field);return Dr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(t):t.fieldFilter!==void 0?function(r){return Dr.create(Yo(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ia.create(r.compositeFilter.filters.map(n=>e3(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(r.compositeFilter.op))}(t):rt(30097,{filter:t})}function e9(t){return z5[t]}function t9(t){return V5[t]}function r9(t){return U5[t]}function Jo(t){return{fieldPath:t.canonicalString()}}function Yo(t){return Zr.fromServerFormat(t.fieldPath)}function t3(t){return t instanceof Dr?function(r){if(r.op==="=="){if(uN(r.value))return{unaryFilter:{field:Jo(r.field),op:"IS_NAN"}};if(lN(r.value))return{unaryFilter:{field:Jo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(uN(r.value))return{unaryFilter:{field:Jo(r.field),op:"IS_NOT_NAN"}};if(lN(r.value))return{unaryFilter:{field:Jo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(r.field),op:t9(r.op),value:r.value}}}(t):t instanceof Ia?function(r){const n=r.getFilters().map(a=>t3(a));return n.length===1?n[0]:{compositeFilter:{op:r9(r.op),filters:n}}}(t):rt(54877,{filter:t})}function n9(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function r3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,r,n,a,i=ot.min(),s=ot.min(),l=sn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.yt=e}}function i9(t){const e=Y5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(){this.Cn=new o9}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ne.resolve()}getCollectionParents(e,r){return Ne.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ne.resolve()}deleteFieldIndex(e,r){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,r){return Ne.resolve()}getDocumentsMatchingTarget(e,r){return Ne.resolve(null)}getIndexType(e,r){return Ne.resolve(0)}getFieldIndexes(e,r){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,r){return Ne.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,r){return Ne.resolve(ps.min())}updateCollectionGroup(e,r,n){return Ne.resolve()}updateIndexEntries(e,r){return Ne.resolve()}}class o9{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Br(rr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Br(rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n3=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(n3,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $l(0)}static cr(){return new $l(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="LruGarbageCollector",l9=1048576;function EN([t,e],[r,n]){const a=St(t,r);return a===0?St(e,n):a}class u9{constructor(e){this.Ir=e,this.buffer=new Br(EN),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();EN(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class c9{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ve(SN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ru(r)?Ve(SN,"Ignoring IndexedDB error during garbage collection: ",r):await tu(r)}await this.Vr(3e5)})}}class f9{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ne.resolve(bh.ce);const n=new u9(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(_N)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_N):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,i,s,l,u,o;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,s=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(o=Date.now(),Xo()<=Ft.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${a} in `+(l-s)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(o-u)+`ms
Total Duration: ${o-c}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:f})))}}function d9(t,e){return new f9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this.changes=new No(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&uc(n.mutation,a,Aa.empty(),sr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Et()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Et()){const a=eo();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(i=>{let s=Gu();return i.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=eo();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Et()))}populateOverlays(e,r,n){const a=[];return n.forEach(i=>{r.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((s,l)=>{r.set(s,l)})})}computeViews(e,r,n,a){let i=_i();const s=lc(),l=function(){return lc()}();return r.forEach((u,o)=>{const c=n.get(o.key);a.has(o.key)&&(c===void 0||c.mutation instanceof _o)?i=i.insert(o.key,o):c!==void 0?(s.set(o.key,c.mutation.getFieldMask()),uc(c.mutation,o,c.mutation.getFieldMask(),sr.now())):s.set(o.key,Aa.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((o,c)=>s.set(o,c)),r.forEach((o,c)=>l.set(o,new h9(c,s.get(o)??null))),l))}recalculateAndSaveOverlays(e,r){const n=lc();let a=new pr((s,l)=>s-l),i=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const l of s)l.keys().forEach(u=>{const o=r.get(u);if(o===null)return;let c=n.get(u)||Aa.empty();c=l.applyToLocalView(o,c),n.set(u,c);const f=(a.get(l.batchId)||Et()).add(u);a=a.insert(l.batchId,f)})}).next(()=>{const s=[],l=a.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),o=u.key,c=u.value,f=$T();c.forEach(d=>{if(!i.has(d)){const m=HT(r.get(d),n.get(d));m!==null&&f.set(d,m),i=i.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,f))}return Ne.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(s){return Je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):RT(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Ne.resolve(eo());let l=Rc,u=i;return s.next(o=>Ne.forEach(o,(c,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(c)?Ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,o,i)).next(()=>this.computeViews(e,u,o,Et())).next(c=>({batchId:l,changes:kT(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Je(r)).next(n=>{let a=Gu();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let s=Gu();return this.indexManager.getCollectionParents(e,i).next(l=>Ne.forEach(l,u=>{const o=function(f,d){return new nu(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,a).next(c=>{c.forEach((f,d)=>{s=s.insert(f,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a))).next(s=>{i.forEach((u,o)=>{const c=o.getKey();s.get(c)===null&&(s=s.insert(c,pn.newInvalidDocument(c)))});let l=Gu();return s.forEach((u,o)=>{const c=i.get(u);c!==void 0&&uc(c.mutation,o,Aa.empty(),sr.now()),Sh(r,o)&&(l=l.insert(u,o))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Ne.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Ka(a.createTime)}}(r)),Ne.resolve()}getNamedQuery(e,r){return Ne.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:i9(a.bundledQuery),readTime:Ka(a.readTime)}}(r)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(){this.overlays=new pr(Je.comparator),this.qr=new Map}getOverlay(e,r){return Ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=eo();return Ne.forEach(r,a=>this.getOverlay(e,a).next(i=>{i!==null&&n.set(a,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,i)=>{this.St(e,r,i)}),Ne.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,r,n){const a=eo(),i=r.length+1,s=new Je(r.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,o=u.getKey();if(!r.isPrefixOf(o.path))break;o.path.length===i&&u.largestBatchId>n&&a.set(u.getKey(),u)}return Ne.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new pr((o,c)=>o-c);const s=this.overlays.getIterator();for(;s.hasNext();){const o=s.getNext().value;if(o.getKey().getCollectionGroup()===r&&o.largestBatchId>n){let c=i.get(o.largestBatchId);c===null&&(c=eo(),i=i.insert(o.largestBatchId,c)),c.set(o.getKey(),o)}}const l=eo(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((o,c)=>l.set(o,c)),!(l.size()>=a)););return Ne.resolve(l)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const s=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new O5(r,n));let i=this.qr.get(r);i===void 0&&(i=Et(),this.qr.set(r,i)),this.qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(){this.Qr=new Br(Hr.$r),this.Ur=new Br(Hr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Hr(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Hr(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new Je(new rr([])),n=new Hr(r,e),a=new Hr(r,e+1),i=[];return this.Ur.forEachInRange([n,a],s=>{this.Gr(s),i.push(s.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Je(new rr([])),n=new Hr(r,e),a=new Hr(r,e+1);let i=Et();return this.Ur.forEachInRange([n,a],s=>{i=i.add(s.key)}),i}containsKey(e){const r=new Hr(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Hr{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Je.comparator(e.key,r.key)||St(e.Yr,r.Yr)}static Kr(e,r){return St(e.Yr,r.Yr)||Je.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Br(Hr.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new R5(i,r,n,a);this.mutationQueue.push(s);for(const l of a)this.Zr=this.Zr.add(new Hr(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ne.resolve(s)}lookupMutationBatch(e,r){return Ne.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),i=a<0?0:a;return Ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?ey:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Hr(r,0),a=new Hr(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,a],s=>{const l=this.Xr(s.Yr);i.push(l)}),Ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Br(St);return r.forEach(a=>{const i=new Hr(a,0),s=new Hr(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,s],l=>{n=n.add(l.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;Je.isDocumentKey(i)||(i=i.child(""));const s=new Hr(new Je(i),0);let l=new Br(St);return this.Zr.forEachWhile(u=>{const o=u.key.path;return!!n.isPrefixOf(o)&&(o.length===a&&(l=l.add(u.Yr)),!0)},s),Ne.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Gt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(r.mutations,a=>{const i=new Hr(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Hr(r,0),a=this.Zr.firstAfterOrEqual(n);return Ne.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e){this.ri=e,this.docs=function(){return new pr(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ne.resolve(n?n.document.mutableCopy():pn.newInvalidDocument(r))}getEntries(e,r){let n=_i();return r.forEach(a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():pn.newInvalidDocument(a))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=_i();const s=r.path,l=new Je(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:o,value:{document:c}}=u.getNext();if(!s.isPrefixOf(o.path))break;o.path.length>s.length+1||Qj(Wj(c),n)<=0||(a.has(c.key)||Sh(r,c))&&(i=i.insert(c.key,c.mutableCopy()))}return Ne.resolve(i)}getAllFromCollectionGroup(e,r,n,a){rt(9500)}ii(e,r){return Ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new w9(this)}getSize(e){return Ne.resolve(this.size)}}class w9 extends m9{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),Ne.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e){this.persistence=e,this.si=new No(r=>ny(r),ay),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.oi=0,this._i=new cy,this.targetCount=0,this.ai=$l.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ne.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new $l(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Ne.resolve()}updateTargetData(e,r){return this.Pr(r),Ne.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.si.forEach((s,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Ne.waitFor(i).next(()=>a)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Ne.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Ne.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach(s=>{i.push(a.markPotentiallyOrphaned(e,s))}),Ne.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Ne.resolve(n)}containsKey(e,r){return Ne.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,r){this.ui={},this.overlays={},this.ci=new bh(0),this.li=!1,this.li=!0,this.hi=new y9,this.referenceDelegate=e(this),this.Pi=new N9(this),this.indexManager=new s9,this.remoteDocumentCache=function(a){return new b9(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new a9(r),this.Ii=new v9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new g9,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new x9(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Ve("MemoryPersistence","Starting transaction:",e);const a=new _9(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(e,r){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class _9 extends Kj{constructor(e){super(),this.currentSequenceNumber=e}}class fy{constructor(e){this.persistence=e,this.Ri=new cy,this.Vi=null}static mi(e){return new fy(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Ne.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const a=Je.fromPath(n);return this.gi(e,a).next(i=>{i||r.removeEntry(a,ot.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class Sm{constructor(e,r){this.persistence=e,this.pi=new No(n=>Zj(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=d9(this,r)}static mi(e,r){return new Sm(e,r)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Ne.forEach(this.pi,(n,a)=>this.br(e,n,a).next(i=>i?Ne.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,s=>this.br(e,s,r).next(l=>{l||(n++,i.removeEntry(s,ot.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Ne.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Bd(e.data.value)),r}br(e,r,n){return Ne.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return Ne.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=Et(),a=Et();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new dy(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return pB()?8:Jj(mB())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.ys(e,r).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ws(e,r,a,n).next(s=>{i.result=s})}).next(()=>{if(i.result)return;const s=new S9;return this.Ss(e,r,s).next(l=>{if(i.result=l,this.Vs)return this.bs(e,r,s,l.size)})}).next(()=>i.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(Xo()<=Ft.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",Ko(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(Xo()<=Ft.DEBUG&&Ve("QueryEngine","Query:",Ko(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Xo()<=Ft.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",Ko(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qa(r))):Ne.resolve())}ys(e,r){if(mN(r))return Ne.resolve(null);let n=Qa(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=xg(r,null,"F"),n=Qa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const s=Et(...i);return this.ps.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const o=this.Ds(r,l);return this.Cs(r,o,s,u.readTime)?this.ys(e,xg(r,null,"F")):this.vs(e,o,r,u)}))})))}ws(e,r,n,a){return mN(r)||a.isEqual(ot.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(r,i);return this.Cs(r,s,n,a)?Ne.resolve(null):(Xo()<=Ft.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ko(r)),this.vs(e,s,r,Gj(a,Rc)).next(l=>l))})}Ds(e,r){let n=new Br(BT(e));return r.forEach((a,i)=>{Sh(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,r,n){return Xo()<=Ft.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Ko(r)),this.ps.getDocumentsMatchingQuery(e,r,ps.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(i=>(r.forEach(s=>{i=i.insert(s.key,s)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="LocalStore",A9=3e8;class D9{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new pr(St),this.xs=new No(i=>ny(i),ay),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function C9(t,e,r,n){return new D9(t,e,r,n)}async function i3(t,e){const r=ct(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(i=>(a=i,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const s=[],l=[];let u=Et();for(const o of a){s.push(o.batchId);for(const c of o.mutations)u=u.add(c.key)}for(const o of i){l.push(o.batchId);for(const c of o.mutations)u=u.add(c.key)}return r.localDocuments.getDocuments(n,u).next(o=>({Ls:o,removedBatchIds:s,addedBatchIds:l}))})})}function T9(t,e){const r=ct(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,o,c){const f=o.batch,d=f.keys();let m=Ne.resolve();return d.forEach(p=>{m=m.next(()=>c.getEntry(u,p)).next(h=>{const D=o.docVersions.get(p);Gt(D!==null,48541),h.version.compareTo(D)<0&&(f.applyToRemoteDocument(h,o),h.isValidDocument()&&(h.setReadTime(o.commitVersion),c.addEntry(h)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Et();for(let o=0;o<l.mutationResults.length;++o)l.mutationResults[o].transformResults.length>0&&(u=u.add(l.batch.mutations[o].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function s3(t){const e=ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function M9(t,e){const r=ct(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];e.targetChanges.forEach((c,f)=>{const d=a.get(f);if(!d)return;l.push(r.Pi.removeMatchingKeys(i,c.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(i,c.addedDocuments,f)));let m=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(sn.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,n)),a=a.insert(f,m),function(h,D,w){return h.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-h.snapshotVersion.toMicroseconds()>=A9?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,m,c)&&l.push(r.Pi.updateTargetData(i,m))});let u=_i(),o=Et();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,c))}),l.push(I9(i,s,e.documentUpdates).next(c=>{u=c.ks,o=c.qs})),!n.isEqual(ot.min())){const c=r.Pi.getLastRemoteSnapshotVersion(i).next(f=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(c)}return Ne.waitFor(l).next(()=>s.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,o)).next(()=>u)}).then(i=>(r.Ms=a,i))}function I9(t,e,r){let n=Et(),a=Et();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let s=_i();return r.forEach((l,u)=>{const o=i.get(l);u.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(l)),u.isNoDocument()&&u.version.isEqual(ot.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!o.isValidDocument()||u.version.compareTo(o.version)>0||u.version.compareTo(o.version)===0&&o.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):Ve(my,"Ignoring outdated watch update for ",l,". Current version:",o.version," Watch version:",u.version)}),{ks:s,qs:a}})}function F9(t,e){const r=ct(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=ey),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function P9(t,e){const r=ct(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(i=>i?(a=i,Ne.resolve(a)):r.Pi.allocateTargetId(n).next(s=>(a=new Xi(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Sg(t,e,r){const n=ct(t),a=n.Ms.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,s=>n.persistence.referenceDelegate.removeTarget(s,a))}catch(s){if(!ru(s))throw s;Ve(my,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function AN(t,e,r){const n=ct(t);let a=ot.min(),i=Et();return n.persistence.runTransaction("Execute query","readwrite",s=>function(u,o,c){const f=ct(u),d=f.xs.get(c);return d!==void 0?Ne.resolve(f.Ms.get(d)):f.Pi.getTargetData(o,c)}(n,s,Qa(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,l.targetId).next(u=>{i=u})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,e,r?a:ot.min(),r?i:Et())).next(l=>(R9(n,y5(e),l),{documents:l,Qs:i})))}function R9(t,e,r){let n=t.Os.get(e)||ot.min();r.forEach((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Os.set(e,n)}class DN{constructor(){this.activeTargetIds=S5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O9{constructor(){this.Mo=new DN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new DN,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="ConnectivityMonitor";class TN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ve(CN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ve(CN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td=null;function Eg(){return td===null?td=function(){return 268435456+Math.round(2147483648*Math.random())}():td++,"0x"+td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="RestConnection",j9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===xm?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,i){const s=Eg(),l=this.zo(e,r.toUriEncodedString());Ve(Zp,`Sending RPC '${e}' ${s}:`,l,n);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,a,i);const{host:o}=new URL(l),c=K0(o);return this.Jo(e,l,u,n,c).then(f=>(Ve(Zp,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Ol(Zp,`RPC '${e}' ${s} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(e,r,n,a,i,s){return this.Go(e,r,n,a,i)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,i)=>e[i]=a),n&&n.headers.forEach((a,i)=>e[i]=a)}zo(e,r){const n=j9[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class L9 extends k9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,i){const s=Eg();return new Promise((l,u)=>{const o=new lT;o.setWithCredentials(!0),o.listenOnce(uT.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Od.NO_ERROR:const f=o.getResponseJson();Ve(fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),l(f);break;case Od.TIMEOUT:Ve(fn,`RPC '${e}' ${s} timed out`),u(new Le(we.DEADLINE_EXCEEDED,"Request time out"));break;case Od.HTTP_ERROR:const d=o.getStatus();if(Ve(fn,`RPC '${e}' ${s} failed with status:`,d,"response text:",o.getResponseText()),d>0){let m=o.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const h=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(S)>=0?S:we.UNKNOWN}(p.status);u(new Le(h,p.message))}else u(new Le(we.UNKNOWN,"Server responded with status "+o.getStatus()))}else u(new Le(we.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Ve(fn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(a);Ve(fn,`RPC '${e}' ${s} sending request:`,a),o.send(r,"POST",c,n,15)})}T_(e,r,n){const a=Eg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dT(),l=fT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;o!==void 0&&(u.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const c=i.join("");Ve(fn,`Creating RPC '${e}' stream ${a}: ${c}`,u);const f=s.createWebChannel(c,u);this.I_(f);let d=!1,m=!1;const p=new $9({Yo:D=>{m?Ve(fn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(d||(Ve(fn,`Opening RPC '${e}' stream ${a} transport.`),f.open(),d=!0),Ve(fn,`RPC '${e}' stream ${a} sending:`,D),f.send(D))},Zo:()=>f.close()}),h=(D,w,S)=>{D.listen(w,x=>{try{S(x)}catch(b){setTimeout(()=>{throw b},0)}})};return h(f,Hu.EventType.OPEN,()=>{m||(Ve(fn,`RPC '${e}' stream ${a} transport opened.`),p.o_())}),h(f,Hu.EventType.CLOSE,()=>{m||(m=!0,Ve(fn,`RPC '${e}' stream ${a} transport closed`),p.a_(),this.E_(f))}),h(f,Hu.EventType.ERROR,D=>{m||(m=!0,Ol(fn,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),p.a_(new Le(we.UNAVAILABLE,"The operation could not be completed")))}),h(f,Hu.EventType.MESSAGE,D=>{var w;if(!m){const S=D.data[0];Gt(!!S,16349);const x=S,b=(x==null?void 0:x.error)||((w=x[0])==null?void 0:w.error);if(b){Ve(fn,`RPC '${e}' stream ${a} received error:`,b);const N=b.status;let g=function(E){const C=Er[E];if(C!==void 0)return WT(C)}(N),y=b.message;g===void 0&&(g=we.INTERNAL,y="Unknown error status: "+N+" with message "+b.message),m=!0,p.a_(new Le(g,y)),f.close()}else Ve(fn,`RPC '${e}' stream ${a} received:`,S),p.u_(S)}}),h(l,cT.STAT_EVENT,D=>{D.stat===dg.PROXY?Ve(fn,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===dg.NOPROXY&&Ve(fn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function ev(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){return new q5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,r,n=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&Ve("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="PersistentStream";class l3{constructor(e,r,n,a,i,s,l,u){this.Mi=e,this.S_=n,this.b_=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o3(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===we.RESOURCE_EXHAUSTED?(Ni(r.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new Le(we.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ve(MN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Ve(MN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z9 extends l3{constructor(e,r,n,a,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=W5(this.serializer,e),n=function(i){if(!("targetChange"in i))return ot.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ot.min():s.readTime?Ka(s.readTime):ot.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=_g(this.serializer),r.addTarget=function(i,s){let l;const u=s.target;if(l=gg(u)?{documents:K5(i,u)}:{query:J5(i,u).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=KT(i,s.resumeToken);const o=bg(i,s.expectedCount);o!==null&&(l.expectedCount=o)}else if(s.snapshotVersion.compareTo(ot.min())>0){l.readTime=_m(i,s.snapshotVersion.toTimestamp());const o=bg(i,s.expectedCount);o!==null&&(l.expectedCount=o)}return l}(this.serializer,e);const n=Z5(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=_g(this.serializer),r.removeTarget=e,this.q_(r)}}class V9 extends l3{constructor(e,r,n,a,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=X5(e.writeResults,e.commitTime),n=Ka(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=_g(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Q5(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{}class q9 extends U9{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,wg(r,n),a,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(we.UNKNOWN,i.toString())})}Ho(e,r,n,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Ho(e,wg(r,n),a,s,l,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Le(we.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class H9{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ni(r),this.aa=!1):Ve("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class G9{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{So(this)&&(Ve(mo,"Restarting streams for network reachability change."),await async function(u){const o=ct(u);o.Ea.add(4),await nf(o),o.Ra.set("Unknown"),o.Ea.delete(4),await Th(o)}(this))})}),this.Ra=new H9(n,a)}}async function Th(t){if(So(t))for(const e of t.da)await e(!0)}async function nf(t){for(const e of t.da)await e(!1)}function u3(t,e){const r=ct(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),gy(r)?vy(r):au(r).O_()&&py(r,e))}function hy(t,e){const r=ct(t),n=au(r);r.Ia.delete(e),n.O_()&&c3(r,e),r.Ia.size===0&&(n.O_()?n.L_():So(r)&&r.Ra.set("Unknown"))}function py(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}au(t).Y_(e)}function c3(t,e){t.Va.Ue(e),au(t).Z_(e)}function vy(t){t.Va=new L5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),au(t).start(),t.Ra.ua()}function gy(t){return So(t)&&!au(t).x_()&&t.Ia.size>0}function So(t){return ct(t).Ea.size===0}function f3(t){t.Va=void 0}async function W9(t){t.Ra.set("Online")}async function Q9(t){t.Ia.forEach((e,r)=>{py(t,e)})}async function X9(t,e){f3(t),gy(t)?(t.Ra.ha(e),vy(t)):t.Ra.set("Unknown")}async function K9(t,e,r){if(t.Ra.set("Online"),e instanceof XT&&e.state===2&&e.cause)try{await async function(a,i){const s=i.cause;for(const l of i.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,s),a.Ia.delete(l),a.Va.removeTarget(l))}(t,e)}catch(n){Ve(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Em(t,n)}else if(e instanceof $d?t.Va.Ze(e):e instanceof QT?t.Va.st(e):t.Va.tt(e),!r.isEqual(ot.min()))try{const n=await s3(t.localStore);r.compareTo(n)>=0&&await function(i,s){const l=i.Va.Tt(s);return l.targetChanges.forEach((u,o)=>{if(u.resumeToken.approximateByteSize()>0){const c=i.Ia.get(o);c&&i.Ia.set(o,c.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,o)=>{const c=i.Ia.get(u);if(!c)return;i.Ia.set(u,c.withResumeToken(sn.EMPTY_BYTE_STRING,c.snapshotVersion)),c3(i,u);const f=new Xi(c.target,u,o,c.sequenceNumber);py(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Ve(mo,"Failed to raise snapshot:",n),await Em(t,n)}}async function Em(t,e,r){if(!ru(e))throw e;t.Ea.add(1),await nf(t),t.Ra.set("Offline"),r||(r=()=>s3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ve(mo,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Th(t)})}function d3(t,e){return e().catch(r=>Em(t,r,e))}async function Mh(t){const e=ct(t),r=xs(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ey;for(;J9(e);)try{const a=await F9(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,Y9(e,a)}catch(a){await Em(e,a)}m3(e)&&h3(e)}function J9(t){return So(t)&&t.Ta.length<10}function Y9(t,e){t.Ta.push(e);const r=xs(t);r.O_()&&r.X_&&r.ea(e.mutations)}function m3(t){return So(t)&&!xs(t).x_()&&t.Ta.length>0}function h3(t){xs(t).start()}async function Z9(t){xs(t).ra()}async function e8(t){const e=xs(t);for(const r of t.Ta)e.ea(r.mutations)}async function t8(t,e,r){const n=t.Ta.shift(),a=oy.from(n,e,r);await d3(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Mh(t)}async function r8(t,e){e&&xs(t).X_&&await async function(n,a){if(function(s){return j5(s)&&s!==we.ABORTED}(a.code)){const i=n.Ta.shift();xs(n).B_(),await d3(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Mh(n)}}(t,e),m3(t)&&h3(t)}async function IN(t,e){const r=ct(t);r.asyncQueue.verifyOperationInProgress(),Ve(mo,"RemoteStore received new credentials");const n=So(r);r.Ea.add(3),await nf(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Th(r)}async function n8(t,e){const r=ct(t);e?(r.Ea.delete(2),await Th(r)):e||(r.Ea.add(2),await nf(r),r.Ra.set("Unknown"))}function au(t){return t.ma||(t.ma=function(r,n,a){const i=ct(r);return i.sa(),new z9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:W9.bind(null,t),t_:Q9.bind(null,t),r_:X9.bind(null,t),H_:K9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),gy(t)?vy(t):t.Ra.set("Unknown")):(await t.ma.stop(),f3(t))})),t.ma}function xs(t){return t.fa||(t.fa=function(r,n,a){const i=ct(r);return i.sa(),new V9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z9.bind(null,t),r_:r8.bind(null,t),ta:e8.bind(null,t),na:t8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Mh(t)):(await t.fa.stop(),t.Ta.length>0&&(Ve(mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const s=Date.now()+n,l=new yy(e,r,s,a,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xy(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),ru(t))return new Le(we.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Je.comparator(r.key,n.key):(r,n)=>Je.comparator(r.key,n.key),this.keyedMap=Gu(),this.sortedSet=new pr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new wl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.ga=new pr(Je.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ll{constructor(e,r,n,a,i,s,l,u,o){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=o}static fromInitialDocuments(e,r,n,a,i){const s=[];return r.forEach(l=>{s.push({type:0,doc:l})}),new Ll(e,r,wl.emptySet(r),s,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class i8{constructor(){this.queries=PN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=ct(r),i=a.queries;a.queries=PN(),i.forEach((s,l)=>{for(const u of l.Sa)u.onError(n)})})(this,new Le(we.ABORTED,"Firestore shutting down"))}}function PN(){return new No(t=>OT(t),_h)}async function s8(t,e){const r=ct(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.ba()&&e.Da()&&(n=2):(i=new a8,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(a,!0);break;case 1:i.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(s){const l=xy(s,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,i),i.Sa.push(e),e.va(r.onlineState),i.wa&&e.Fa(i.wa)&&by(r)}async function o8(t,e){const r=ct(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const s=i.Sa.indexOf(e);s>=0&&(i.Sa.splice(s,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function l8(t,e){const r=ct(t);let n=!1;for(const a of e){const i=a.query,s=r.queries.get(i);if(s){for(const l of s.Sa)l.Fa(a)&&(n=!0);s.wa=a}}n&&by(r)}function u8(t,e,r){const n=ct(t),a=n.queries.get(e);if(a)for(const i of a.Sa)i.onError(r);n.queries.delete(e)}function by(t){t.Ca.forEach(e=>{e.next()})}var Ag,RN;(RN=Ag||(Ag={})).Ma="default",RN.Cache="cache";class c8{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Ll(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.key=e}}class v3{constructor(e){this.key=e}}class f8{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Et(),this.mutatedKeys=Et(),this.eu=BT(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new FN,a=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,s=a,l=!1;const u=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,o=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((c,f)=>{const d=a.get(c),m=Sh(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),h=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let D=!1;d&&m?d.data.isEqual(m.data)?p!==h&&(n.track({type:3,doc:m}),D=!0):this.su(d,m)||(n.track({type:2,doc:m}),D=!0,(u&&this.eu(m,u)>0||o&&this.eu(m,o)<0)&&(l=!0)):!d&&m?(n.track({type:0,doc:m}),D=!0):d&&!m&&(n.track({type:1,doc:d}),D=!0,(u||o)&&(l=!0)),D&&(m?(s=s.add(m),i=h?i.add(c):i.delete(c)):(s=s.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),i=i.delete(c.key),n.track({type:1,doc:c})}return{tu:s,iu:n,Cs:l,mutatedKeys:i}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((c,f)=>function(m,p){const h=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:D})}};return h(m)-h(p)}(c.type,f.type)||this.eu(c.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],u=this.Xa.size===0&&this.current&&!a?1:0,o=u!==this.Za;return this.Za=u,s.length!==0||o?{snapshot:new Ll(this.query,e.tu,i,s,e.mutatedKeys,u===0,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Et(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new v3(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new p3(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Et();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wy="SyncEngine";class d8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class m8{constructor(e){this.key=e,this.hu=!1}}class h8{constructor(e,r,n,a,i,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new No(l=>OT(l),_h),this.Iu=new Map,this.Eu=new Set,this.du=new pr(Je.comparator),this.Au=new Map,this.Ru=new cy,this.Vu={},this.mu=new Map,this.fu=$l.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function p8(t,e,r=!0){const n=N3(t);let a;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await g3(n,e,r,!0),a}async function v8(t,e){const r=N3(t);await g3(r,e,!0,!1)}async function g3(t,e,r,n){const a=await P9(t.localStore,Qa(e)),i=a.targetId,s=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await g8(t,e,i,s==="current",a.resumeToken)),t.isPrimaryClient&&r&&u3(t.remoteStore,a),l}async function g8(t,e,r,n,a){t.pu=(f,d,m)=>async function(h,D,w,S){let x=D.view.ru(w);x.Cs&&(x=await AN(h.localStore,D.query,!1).then(({documents:y})=>D.view.ru(y,x)));const b=S&&S.targetChanges.get(D.targetId),N=S&&S.targetMismatches.get(D.targetId)!=null,g=D.view.applyChanges(x,h.isPrimaryClient,b,N);return BN(h,D.targetId,g.au),g.snapshot}(t,f,d,m);const i=await AN(t.localStore,e,!0),s=new f8(e,i.Qs),l=s.ru(i.documents),u=rf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),o=s.applyChanges(l,t.isPrimaryClient,u);BN(t,r,o.au);const c=new d8(e,r,s);return t.Tu.set(e,c),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),o.snapshot}async function y8(t,e,r){const n=ct(t),a=n.Tu.get(e),i=n.Iu.get(a.targetId);if(i.length>1)return n.Iu.set(a.targetId,i.filter(s=>!_h(s,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Sg(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&hy(n.remoteStore,a.targetId),Dg(n,a.targetId)}).catch(tu)):(Dg(n,a.targetId),await Sg(n.localStore,a.targetId,!0))}async function x8(t,e){const r=ct(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),hy(r.remoteStore,n.targetId))}async function b8(t,e,r){const n=D8(t);try{const a=await function(s,l){const u=ct(s),o=sr.now(),c=l.reduce((m,p)=>m.add(p.key),Et());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let p=_i(),h=Et();return u.Ns.getEntries(m,c).next(D=>{p=D,p.forEach((w,S)=>{S.isValidDocument()||(h=h.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,p)).next(D=>{f=D;const w=[];for(const S of l){const x=F5(S,f.get(S.key).overlayedDocument);x!=null&&w.push(new _o(S.key,x,AT(x.value.mapValue),Xa.exists(!0)))}return u.mutationQueue.addMutationBatch(m,o,w,l)}).next(D=>{d=D;const w=D.applyToLocalDocumentSet(f,h);return u.documentOverlayCache.saveOverlays(m,D.batchId,w)})}).then(()=>({batchId:d.batchId,changes:kT(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(s,l,u){let o=s.Vu[s.currentUser.toKey()];o||(o=new pr(St)),o=o.insert(l,u),s.Vu[s.currentUser.toKey()]=o}(n,a.batchId,r),await af(n,a.changes),await Mh(n.remoteStore)}catch(a){const i=xy(a,"Failed to persist write");r.reject(i)}}async function y3(t,e){const r=ct(t);try{const n=await M9(r.localStore,e);e.targetChanges.forEach((a,i)=>{const s=r.Au.get(i);s&&(Gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?s.hu=!0:a.modifiedDocuments.size>0?Gt(s.hu,14607):a.removedDocuments.size>0&&(Gt(s.hu,42227),s.hu=!1))}),await af(r,n,e)}catch(n){await tu(n)}}function ON(t,e,r){const n=ct(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((i,s)=>{const l=s.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(s,l){const u=ct(s);u.onlineState=l;let o=!1;u.queries.forEach((c,f)=>{for(const d of f.Sa)d.va(l)&&(o=!0)}),o&&by(u)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function w8(t,e,r){const n=ct(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),i=a&&a.key;if(i){let s=new pr(Je.comparator);s=s.insert(i,pn.newNoDocument(i,ot.min()));const l=Et().add(i),u=new Dh(ot.min(),new Map,new pr(St),s,l);await y3(n,u),n.du=n.du.remove(i),n.Au.delete(e),Ny(n)}else await Sg(n.localStore,e,!1).then(()=>Dg(n,e,r)).catch(tu)}async function N8(t,e){const r=ct(t),n=e.batch.batchId;try{const a=await T9(r.localStore,e);b3(r,n,null),x3(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await af(r,a)}catch(a){await tu(a)}}async function _8(t,e,r){const n=ct(t);try{const a=await function(s,l){const u=ct(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",o=>{let c;return u.mutationQueue.lookupMutationBatch(o,l).next(f=>(Gt(f!==null,37113),c=f.keys(),u.mutationQueue.removeMutationBatch(o,f))).next(()=>u.mutationQueue.performConsistencyCheck(o)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(o,c,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,c)).next(()=>u.localDocuments.getDocuments(o,c))})}(n.localStore,e);b3(n,e,r),x3(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await af(n,a)}catch(a){await tu(a)}}function x3(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function b3(t,e,r){const n=ct(t);let a=n.Vu[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function Dg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||w3(t,n)})}function w3(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(hy(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Ny(t))}function BN(t,e,r){for(const n of r)n instanceof p3?(t.Ru.addReference(n.key,e),S8(t,n)):n instanceof v3?(Ve(wy,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||w3(t,n.key)):rt(19791,{wu:n})}function S8(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Ve(wy,"New document in limbo: "+r),t.Eu.add(n),Ny(t))}function Ny(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Je(rr.fromString(e)),n=t.fu.next();t.Au.set(n,new m8(r)),t.du=t.du.insert(r,n),u3(t.remoteStore,new Xi(Qa(PT(r.path)),n,"TargetPurposeLimboResolution",bh.ce))}}async function af(t,e,r){const n=ct(t),a=[],i=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((l,u)=>{s.push(n.pu(u,e,r).then(o=>{var c;if((o||r)&&n.isPrimaryClient){const f=o?!o.fromCache:(c=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(o){a.push(o);const f=dy.As(u.targetId,o);i.push(f)}}))}),await Promise.all(s),n.Pu.H_(a),await async function(u,o){const c=ct(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(o,d=>Ne.forEach(d.Es,m=>c.persistence.referenceDelegate.addReference(f,d.targetId,m)).next(()=>Ne.forEach(d.ds,m=>c.persistence.referenceDelegate.removeReference(f,d.targetId,m)))))}catch(f){if(!ru(f))throw f;Ve(my,"Failed to update sequence numbers: "+f)}for(const f of o){const d=f.targetId;if(!f.fromCache){const m=c.Ms.get(d),p=m.snapshotVersion,h=m.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(d,h)}}}(n.localStore,i))}async function E8(t,e){const r=ct(t);if(!r.currentUser.isEqual(e)){Ve(wy,"User change. New user:",e.toKey());const n=await i3(r.localStore,e);r.currentUser=e,function(i,s){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new Le(we.CANCELLED,s))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await af(r,n.Ls)}}function A8(t,e){const r=ct(t),n=r.Au.get(e);if(n&&n.hu)return Et().add(n.key);{let a=Et();const i=r.Iu.get(e);if(!i)return a;for(const s of i){const l=r.Tu.get(s);a=a.unionWith(l.view.nu)}return a}}function N3(t){const e=ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w8.bind(null,e),e.Pu.H_=l8.bind(null,e.eventManager),e.Pu.yu=u8.bind(null,e.eventManager),e}function D8(t){const e=ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_8.bind(null,e),e}class Am{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return C9(this.persistence,new E9,e.initialUser,this.serializer)}Cu(e){return new a3(fy.mi,this.serializer)}Du(e){return new O9}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Am.provider={build:()=>new Am};class C8 extends Am{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Gt(this.persistence.referenceDelegate instanceof Sm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new c9(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new a3(n=>Sm.mi(n,r),this.serializer)}}class Cg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ON(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=E8.bind(null,this.syncEngine),await n8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new i8}()}createDatastore(e){const r=Ch(e.databaseInfo.databaseId),n=function(i){return new L9(i)}(e.databaseInfo);return function(i,s,l,u){return new q9(i,s,l,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,i,s,l){return new G9(n,a,i,s,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ON(this.syncEngine,r,0),function(){return TN.v()?new TN:new B9}())}createSyncEngine(e,r){return function(a,i,s,l,u,o,c){const f=new h8(a,i,s,l,u,o);return c&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const i=ct(a);Ve(mo,"RemoteStore shutting down."),i.Ea.add(5),await nf(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Cg.provider={build:()=>new Cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class M8{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=mn.UNAUTHENTICATED,this.clientId=Z0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async s=>{Ve(bs,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(Ve(bs,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=xy(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function tv(t,e){t.asyncQueue.verifyOperationInProgress(),Ve(bs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await i3(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await I8(t);Ve(bs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>IN(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>IN(e.remoteStore,a)),t._onlineComponents=e}async function I8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ve(bs,"Using user provided OfflineComponentProvider");try{await tv(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===we.FAILED_PRECONDITION||a.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Ol("Error using user provided cache. Falling back to memory cache: "+r),await tv(t,new Am)}}else Ve(bs,"Using default OfflineComponentProvider"),await tv(t,new C8(void 0));return t._offlineComponents}async function _3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ve(bs,"Using user provided OnlineComponentProvider"),await jN(t,t._uninitializedComponentsProvider._online)):(Ve(bs,"Using default OnlineComponentProvider"),await jN(t,new Cg))),t._onlineComponents}function F8(t){return _3(t).then(e=>e.syncEngine)}async function P8(t){const e=await _3(t),r=e.eventManager;return r.onListen=p8.bind(null,e.syncEngine),r.onUnlisten=y8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=v8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=x8.bind(null,e.syncEngine),r}function R8(t,e,r={}){const n=new cs;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,l,u,o){const c=new T8({next:d=>{c.Nu(),s.enqueueAndForget(()=>o8(i,f)),d.fromCache&&u.source==="server"?o.reject(new Le(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(d)},error:d=>o.reject(d)}),f=new c8(l,c,{includeMetadataChanges:!0,qa:!0});return s8(i,f)}(await P8(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="firestore.googleapis.com",$N=!0;class LN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Le(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E3,this.ssl=$N}else this.host=e.host,this.ssl=e.ssl??$N;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=n3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l9)throw new Le(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S3(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ih{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Oj;switch(n.type){case"firstParty":return new $j(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Le(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=kN.get(r);n&&(Ve("ComponentProvider","Removing Datastore"),kN.delete(r),n.terminate())}(this),Promise.resolve()}}function O8(t,e,r,n={}){var o;t=Pc(t,Ih);const a=K0(e),i=t._getSettings(),s={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;a&&(lB(`https://${l}`),dB("Firestore",!0)),i.host!==E3&&i.host!==l&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:a,emulatorOptions:n};if(!pm(u,s)&&(t._setSettings(u),n.mockUserToken)){let c,f;if(typeof n.mockUserToken=="string")c=n.mockUserToken,f=mn.MOCK_USER;else{c=uB(n.mockUserToken,(o=t._app)==null?void 0:o.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new Le(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new mn(d)}t._authCredentials=new Bj(new hT(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class Wr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wr(this.firestore,e,this._key)}toJSON(){return{type:Wr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(ef(r,Wr._jsonSchema))return new Wr(e,n||null,new Je(rr.fromString(r.referencePath)))}}Wr._jsonSchemaVersion="firestore/documentReference/1.0",Wr._jsonSchema={type:Cr("string",Wr._jsonSchemaVersion),referencePath:Cr("string")};class fs extends Eo{constructor(e,r,n){super(e,r,PT(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wr(this.firestore,null,new Je(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function Ue(t,e,...r){if(t=Rl(t),pT("collection","path",e),t instanceof Ih){const n=rr.fromString(e,...r);return Zw(n),new fs(t,null,n)}{if(!(t instanceof Wr||t instanceof fs))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(rr.fromString(e,...r));return Zw(n),new fs(t.firestore,null,n)}}function Tt(t,e,...r){if(t=Rl(t),arguments.length===1&&(e=Z0.newId()),pT("doc","path",e),t instanceof Ih){const n=rr.fromString(e,...r);return Yw(n),new Wr(t,null,new Je(n))}{if(!(t instanceof Wr||t instanceof fs))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(rr.fromString(e,...r));return Yw(n),new Wr(t.firestore,t instanceof fs?t.converter:null,new Je(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="AsyncQueue";class VN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o3(this,"async_queue_retry"),this._c=()=>{const n=ev();n&&Ve(zN,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=ev();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=ev();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new cs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ru(e))throw e;Ve(zN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Ni("INTERNAL UNHANDLED ERROR: ",UN(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=yy.createAndSchedule(this,e,r,n,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&rt(47125,{Pc:UN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function UN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Fh extends Ih{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new VN,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VN(e),this._firestoreClient=void 0,await e}}}function B8(t,e){const r=typeof t=="object"?t:Nj(),n=typeof t=="string"?t:xm,a=gj(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const i=sB("firestore");i&&O8(a,...i)}return a}function A3(t){if(t._terminated)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||j8(t),t._firestoreClient}function j8(t){var n,a,i;const e=t._freezeSettings(),r=function(l,u,o,c){return new r5(l,u,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,S3(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new M8(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ua(sn.fromBase64String(e))}catch(r){throw new Le(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ua(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ua._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ef(e,ua._jsonSchema))return ua.fromBase64String(e.bytes)}}ua._jsonSchemaVersion="firestore/bytes/1.0",ua._jsonSchema={type:Cr("string",ua._jsonSchemaVersion),bytes:Cr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Le(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Le(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Le(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ja._jsonSchemaVersion}}static fromJSON(e){if(ef(e,Ja._jsonSchema))return new Ja(e.latitude,e.longitude)}}Ja._jsonSchemaVersion="firestore/geoPoint/1.0",Ja._jsonSchema={type:Cr("string",Ja._jsonSchemaVersion),latitude:Cr("number"),longitude:Cr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ya._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ef(e,Ya._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Ya(e.vectorValues);throw new Le(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ya._jsonSchemaVersion="firestore/vectorValue/1.0",Ya._jsonSchema={type:Cr("string",Ya._jsonSchemaVersion),vectorValues:Cr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=/^__.*__$/;class $8{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,r,this.fieldTransforms):new tf(e,this.data,r,this.fieldTransforms)}}function D3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:t})}}class Ey{constructor(e,r,n,a,i,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(D3(this.Ac)&&k8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class L8{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Ch(e)}Cc(e,r,n,a=!1){return new Ey({Ac:e,methodName:r,Dc:n,path:Zr.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C3(t){const e=t._freezeSettings(),r=Ch(t._databaseId);return new L8(t._databaseId,!!e.ignoreUndefinedProperties,r)}function z8(t,e,r,n,a,i={}){const s=t.Cc(i.merge||i.mergeFields?2:0,e,r,a);I3("Data must be an object, but it was:",s,n);const l=T3(n,s);let u,o;if(i.merge)u=new Aa(s.fieldMask),o=s.fieldTransforms;else if(i.mergeFields){const c=[];for(const f of i.mergeFields){const d=U8(e,f,r);if(!s.contains(d))throw new Le(we.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);H8(c,d)||c.push(d)}u=new Aa(c),o=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,o=s.fieldTransforms;return new $8(new la(l),u,o)}class Ay extends Sy{_toFieldTransform(e){return new C5(e.path,new $c)}isEqual(e){return e instanceof Ay}}function V8(t,e,r,n=!1){return Dy(r,t.Cc(n?4:3,e))}function Dy(t,e){if(M3(t=Rl(t)))return I3("Unsupported field value:",e,t),T3(t,e);if(t instanceof Sy)return function(n,a){if(!D3(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const i=[];let s=0;for(const l of n){let u=Dy(l,a.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,a){if((n=Rl(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return E5(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=sr.fromDate(n);return{timestampValue:_m(a.serializer,i)}}if(n instanceof sr){const i=new sr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:_m(a.serializer,i)}}if(n instanceof Ja)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ua)return{bytesValue:KT(a.serializer,n._byteString)};if(n instanceof Wr){const i=a.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw a.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uy(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ya)return function(s,l){return{mapValue:{fields:{[ST]:{stringValue:ET},[bm]:{arrayValue:{values:s.toArray().map(o=>{if(typeof o!="number")throw l.Sc("VectorValues must only contain numeric values.");return iy(l.serializer,o)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${xh(n)}`)}(t,e)}function T3(t,e){const r={};return yT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,(n,a)=>{const i=Dy(a,e.mc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function M3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof sr||t instanceof Ja||t instanceof ua||t instanceof Wr||t instanceof Sy||t instanceof Ya)}function I3(t,e,r){if(!M3(r)||!vT(r)){const n=xh(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function U8(t,e,r){if((e=Rl(e))instanceof _y)return e._internalPath;if(typeof e=="string")return F3(t,e);throw Dm("Field path arguments must be of type string or ",t,!1,void 0,r)}const q8=new RegExp("[~\\*/\\[\\]]");function F3(t,e,r){if(e.search(q8)>=0)throw Dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new _y(...e.split("."))._internalPath}catch{throw Dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Dm(t,e,r,n,a){const i=n&&!n.isEmpty(),s=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||s)&&(u+=" (found",i&&(u+=` in field ${n}`),s&&(u+=` in document ${a}`),u+=")"),new Le(we.INVALID_ARGUMENT,l+t+u)}function H8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Cy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class G8 extends P3{data(){return super.data()}}function Cy(t,e){return typeof e=="string"?F3(t,e):e instanceof _y?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Le(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}class R3 extends Ty{}function Pt(t,e,...r){let n=[];e instanceof Ty&&n.push(e),n=n.concat(r),function(i){const s=i.filter(u=>u instanceof Iy).length,l=i.filter(u=>u instanceof My).length;if(s>1||s>0&&l>0)throw new Le(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class My extends R3{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new My(e,r,n)}_apply(e){const r=this._parse(e);return O3(e._query,r),new Eo(e.firestore,e.converter,yg(e._query,r))}_parse(e){const r=C3(e.firestore);return function(i,s,l,u,o,c,f){let d;if(o.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Le(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){HN(f,c);const p=[];for(const h of f)p.push(qN(u,i,h));d={arrayValue:{values:p}}}else d=qN(u,i,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||HN(f,c),d=V8(l,s,f,c==="in"||c==="not-in");return Dr.create(o,c,d)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}class Iy extends Ty{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Iy(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ia.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,i){let s=a;const l=i.getFlattenedFilters();for(const u of l)O3(s,u),s=yg(s,u)}(e._query,r),new Eo(e.firestore,e.converter,yg(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fy extends R3{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Fy(e,r)}_apply(e){const r=function(a,i,s){if(a.startAt!==null)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kc(i,s)}(e._query,this._field,this._direction);return new Eo(e.firestore,e.converter,function(a,i){const s=a.explicitOrderBy.concat([i]);return new nu(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Rt(t,e="asc"){const r=e,n=Cy("orderBy",t);return Fy._create(n,r)}function qN(t,e,r){if(typeof(r=Rl(r))=="string"){if(r==="")throw new Le(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RT(e)&&r.indexOf("/")!==-1)throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(rr.fromString(r));if(!Je.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return oN(t,new Je(n))}if(r instanceof Wr)return oN(t,r._key);throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(r)}.`)}function HN(t,e){if(!Array.isArray(t)||t.length===0)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O3(t,e){const r=function(a,i){for(const s of a)for(const l of s.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Le(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Le(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Q8{convertValue(e,r="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return wo(e,(a,i)=>{n[a]=this.convertValue(i,r)}),n}convertVectorValue(e){var n,a,i;const r=(i=(a=(n=e.fields)==null?void 0:n[bm].arrayValue)==null?void 0:a.values)==null?void 0:i.map(s=>wr(s.doubleValue));return new Ya(r)}convertGeoPoint(e){return new Ja(wr(e.latitude),wr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Nh(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const r=vs(e);return new sr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=rr.fromString(e);Gt(r3(n),9688,{name:e});const a=new Bc(n.get(1),n.get(3)),i=new Je(n.popFirst(5));return a.isEqual(r)||Ni(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class rd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nl extends P3{constructor(e,r,n,a,i,s){super(e,r,n,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Cy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Nl._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Nl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nl._jsonSchema={type:Cr("string",Nl._jsonSchemaVersion),bundleSource:Cr("string","DocumentSnapshot"),bundleName:Cr("string"),bundle:Cr("string")};class Ld extends Nl{data(e={}){return super.data(e)}}class _l{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new rd(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ld(this._firestore,this._userDataWriter,n.key,n,new rd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Le(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map(l=>{const u=new Ld(a._firestore,a._userDataWriter,l.doc.key,l.doc,new rd(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ld(a._firestore,a._userDataWriter,l.doc.key,l.doc,new rd(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let o=-1,c=-1;return l.type!==0&&(o=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),c=s.indexOf(l.doc.key)),{type:K8(l.type),doc:u,oldIndex:o,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Z0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function K8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:t})}}_l._jsonSchemaVersion="firestore/querySnapshot/1.0",_l._jsonSchema={type:Cr("string",_l._jsonSchemaVersion),bundleSource:Cr("string","QuerySnapshot"),bundleName:Cr("string"),bundle:Cr("string")};class J8 extends Q8{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wr(this.firestore,null,r)}}function Ot(t){t=Pc(t,Eo);const e=Pc(t.firestore,Fh),r=A3(e),n=new J8(e);return W8(t._query),R8(r,t._query).then(a=>new _l(e,n,t,a))}function Bt(t){return B3(Pc(t.firestore,Fh),[new sy(t._key,Xa.none())])}function jt(t,e){const r=Pc(t.firestore,Fh),n=Tt(t),a=X8(t.converter,e);return B3(r,[z8(C3(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Xa.exists(!1))]).then(()=>n)}function B3(t,e){return function(n,a){const i=new cs;return n.asyncQueue.enqueueAndForget(async()=>b8(await F8(n),a,i)),i.promise}(A3(t),e)}function kt(){return new Ay("serverTimestamp")}(function(e,r=!0){(function(a){eu=a})(wj),gm(new Ic("firestore",(n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),l=new Fh(new jj(n.getProvider("auth-internal")),new Lj(s,n.getProvider("app-check-internal")),function(o,c){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Le(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(o.options.projectId,c)}(s,a),s);return i={useFetchStreams:r,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),bl(Qw,Xw,e),bl(Qw,Xw,"esm2020")})();const Y8={apiKey:"AIzaSyBUabFVbZsdvJxSNLz9E6uooOHmHAYztMQ",authDomain:"numerical-web-fe12a.firebaseapp.com",projectId:"numerical-web-fe12a",storageBucket:"numerical-web-fe12a.appspot.com",messagingSenderId:"450601861029",appId:"1:450601861029:web:8ad42bf62f220abb7a324c"},Z8=aT(Y8),Ce=B8(Z8),Py="problems_bisection";async function ek(){const t=Pt(Ue(Ce,Py),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function tk(t){return jt(Ue(Ce,Py),{...t,method:"bisection",createdAt:kt()})}async function rk(t){return Bt(Tt(Ce,Py,t))}const nk=Object.freeze(Object.defineProperty({__proto__:null,deleteBisectionProblem:rk,getBisectionProblems:ek,saveBisectionProblem:tk},Symbol.toStringTag,{value:"Module"}));function $t(t){const[e,r]=U.useState([]),[n,a]=U.useState(new Set),i=U.useCallback(async()=>{if(!t||typeof t.get!="function"){const c=(t==null?void 0:t.getBisectionProblems)||(t==null?void 0:t.getFalsePositionProblems)||(t==null?void 0:t.getProblems)||(t==null?void 0:t.get);if(!c)return;const f=await c();r(f);return}const o=await t.get();r(o)},[t]),s=U.useCallback(async o=>{if(!t)throw new Error("service required");const c=t.saveBisectionProblem||t.saveFalsePositionProblem||t.save||t.add;if(!c)throw new Error("save method not found on service");await c(o),await i()},[t,i]),l=U.useCallback(async o=>{if(!t)throw new Error("service required");const c=t.deleteBisectionProblem||t.deleteFalsePositionProblem||t.delete||t.remove;if(!c)throw new Error("delete method not found on service");await c(o),await i()},[t,i]),u=U.useCallback((o,c=480)=>{a(f=>new Set(f).add(o)),setTimeout(async()=>{try{await l(o)}finally{a(f=>{const d=new Set(f);return d.delete(o),d})}},c)},[l]);return{problems:e,removingIds:n,refresh:i,saveProblem:s,deleteProblem:u}}function Mt({title:t,subtitle:e}){return v.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[v.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:t}),e&&v.jsx("div",{className:"text-sm text-gray-400",children:e})]})}function Lt({problems:t=[],onLoad:e=()=>{},onDelete:r=()=>{},removingIds:n=new Set}){return!t||t.length===0?null:v.jsxs("div",{className:"mt-2",children:[v.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"โจทย์ที่บันทึกไว้:"}),v.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:t.map(a=>v.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${n.has(a.id)?"fade-out":""}`,children:[v.jsx("span",{className:"truncate",children:a.expr}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:()=>e(a),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),v.jsx("button",{onClick:()=>r(a),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},a.id))})]})}function Ry(t,e=null,r=[],n={}){if(!t)return;const a=t.getContext("2d"),{width:i=800,height:s=320,bg:l="#061022",axesColor:u="rgba(255,255,255,0.08)",curveColor:o="#3b82f6",pointColor:c="#f97316",lastPointColor:f="#fb923c",xmin:d=-5,xmax:m=5,ymin:p=-5,ymax:h=5,showGrid:D=!0}=n,w=t.width=i,S=t.height=s;a.fillStyle=l,a.fillRect(0,0,w,S);const x=N=>(N-d)/(m-d)*w,b=N=>S-(N-p)/(h-p)*S;if(D){a.strokeStyle="rgba(255,255,255,0.03)",a.lineWidth=1;for(let N=1;N<10;N++){const g=w/10*N,y=S/10*N;a.beginPath(),a.moveTo(g,0),a.lineTo(g,S),a.stroke(),a.beginPath(),a.moveTo(0,y),a.lineTo(w,y),a.stroke()}}if(a.strokeStyle=u,a.lineWidth=1.2,p<0&&h>0&&(a.beginPath(),a.moveTo(0,b(0)),a.lineTo(w,b(0)),a.stroke()),d<0&&m>0&&(a.beginPath(),a.moveTo(x(0),0),a.lineTo(x(0),S),a.stroke()),typeof e=="function"){a.beginPath(),a.strokeStyle=o,a.lineWidth=2;let g=!1;for(let y=0;y<=600;y++){const _=d+(m-d)*y/600;let E;try{E=e(_)}catch{E=NaN}if(!isFinite(E))continue;const C=x(_),T=b(E);g?a.lineTo(C,T):(a.moveTo(C,T),g=!0)}a.stroke()}r&&r.length&&r.forEach(([N,g],y)=>{const _=x(N),E=b(g);a.beginPath(),a.arc(_,E,4,0,2*Math.PI),a.fillStyle=y===r.length-1?f:c,a.fill()})}function ak(t){if(!t)return null;const e=t.x??t.x1??t.xi??t.x0??t.xv??t.x_val??t.xValue,r=t.fx??t.fx1??t.f??t.y??t.fy??t.fx_val??t.yValue;return typeof e!="number"||!isFinite(e)||typeof r!="number"||!isFinite(r)?null:[e,r]}function sf({func:t,iterations:e=[],xl:r,xr:n,width:a=800,height:i=320,className:s=""}){const l=U.useRef(null);return U.useEffect(()=>{const u=l.current;if(!u)return;const o=(e||[]).map(ak).filter(S=>S!==null),c=[],f=[];typeof r=="number"&&c.push(r),typeof n=="number"&&c.push(n),o.forEach(S=>{c.push(S[0]),f.push(S[1])});const d=(S,x)=>S.length?Math.min(...S):x,m=(S,x)=>S.length?Math.max(...S):x,p=d(c,-5)-1,h=m(c,5)+1,D=d(f,-1),w=m(f,1);try{Ry(u,typeof t=="function"?t:null,o,{width:a,height:i,xmin:p,xmax:h,ymin:D,ymax:w,curveColor:"#3b82f6",pointColor:"#f97316"})}catch{}if(o.length>=2){const S=u.getContext("2d");S.strokeStyle="rgba(249,115,22,0.4)",S.lineWidth=1.5;for(let x=1;x<o.length;x++){const[b,N]=o[x-1],[g,y]=o[x],_=h-p||1,E=w-D||1,C=(b-p)/_*a,T=(g-p)/_*a,M=i-(N-D)/E*i,I=i-(y-D)/E*i;S.beginPath(),S.moveTo(C,M),S.lineTo(T,I),S.stroke()}}},[t,e,r,n,a,i]),v.jsx("canvas",{ref:l,width:a,height:i,className:s})}function Fe(t,e=6){return t===null||Number.isNaN(t)?"-":isFinite(t)?Number(t).toPrecision(e).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(t)}function yn(t){if(!t||!t.trim())return null;let e=t.replace(/\^/g,"**");e=e.replace(/\bln\s*\(/gi,"log("),e=e.replace(/\bpi\b/gi,"PI"),e=e.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+e+"); }")}catch{return null}}function ik(t){return(t==null?void 0:t.x1)??(t==null?void 0:t.xi)??(t==null?void 0:t.x)??(t==null?void 0:t.x0)??(t==null?void 0:t.xv)??(t==null?void 0:t.x_val)??(t==null?void 0:t.xValue)??null}function sk(t){return(t==null?void 0:t.fx1)??(t==null?void 0:t.fx)??(t==null?void 0:t.f)??(t==null?void 0:t.fy)??(t==null?void 0:t.fx0)??(t==null?void 0:t.y)??(t==null?void 0:t.yValue)??null}function ok(t,e){return(t==null?void 0:t.iter)??(t==null?void 0:t.i)??e}function lk(t){return(t==null?void 0:t.error)??(t==null?void 0:t.err)??(t==null?void 0:t.e)??(t==null?void 0:t.term)??null}function Vc({iterations:t=[]}){return!t||t.length===0?null:v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"Iter"}),v.jsx("th",{className:"p-2 text-center",children:"x"}),v.jsx("th",{className:"p-2 text-center",children:"f(x)"}),v.jsx("th",{className:"p-2 text-center",children:"Error"})]})}),v.jsx("tbody",{children:t.map((e,r)=>{const n=ok(e,r),a=ik(e),i=sk(e),s=lk(e);return v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900 transition-colors",children:[v.jsx("td",{className:"p-2 text-center font-medium",children:n}),v.jsx("td",{className:"p-2 text-center",children:a!=null?Fe(a):"-"}),v.jsx("td",{className:"p-2 text-center",children:i!=null?Fe(i):"-"}),v.jsx("td",{className:"p-2 text-right",children:s!=null?Fe(s):"-"})]},n)})})]})})}function uk(t,e,r,n=1e-6,a=50){try{let i=t(e),s=t(r);if(!isFinite(i)||!isFinite(s))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*s>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const l=[];let u=null;for(let o=0;o<=a;o++){const c=(e+r)/2,f=t(c);if(!isFinite(f))return{error:"f(x1) คำนวณไม่ได้",iterations:l,converged:!1};let d=null;if(u!==null){const m=Math.abs(c)>1e-12?Math.abs(c):1;d=Math.abs(c-u)/m}if(l.push({iter:o,xl:e,xr:r,x1:c,fx1:f,error:d}),Math.abs(f)===0||d!==null&&d<=n)return{root:c,iterations:l,converged:!0};i*f<0?(r=c,s=f):(e=c,i=f),u=c}return{root:(e+r)/2,iterations:l,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function ck(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,l]=U.useState(""),[u,o]=U.useState(""),[c,f]=U.useState([]),[d,m]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[p,h]=U.useState("-"),[D,w]=U.useState("-"),{problems:S,removingIds:x,refresh:b,saveProblem:N,deleteProblem:g}=$t(nk);U.useEffect(()=>{b().catch(console.error)},[b]);const y=O=>{e(O.expr??""),n(O.xl??""),i(O.xr??""),l(O.tol??""),o(O.maxIter??"")},_=O=>{confirm(`ลบโจทย์นี้ไหม?
${O.expr}`)&&g(O.id).catch(P=>{console.error("ลบโจทย์ผิดพลาด:",P),alert("ลบไม่สำเร็จ")})},E=async()=>{if(!t||r===""||a===""||!s||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await N({expr:t,xl:r,xr:a,tol:s,maxIter:u,method:"bisection"}),alert("บันทึกแล้ว!")}catch(O){console.error("บันทึกโจทย์ผิดพลาด:",O),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},C=()=>{const O=yn(t);if(!O){m("สถานะ: สมการไม่ถูกต้อง");return}const P=parseFloat(r),H=parseFloat(a),$=parseFloat(s),z=parseInt(u,10);if(Number.isNaN(P)||Number.isNaN(H)){m("สถานะ: XL/XR ไม่ถูกต้อง");return}if(P>=H){m("สถานะ: ต้องมี XL < XR");return}if(!isFinite($)||$<=0){m("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(z)||z<=0){m("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const X=uk(O,P,H,$,z);if(X.error){m("สถานะ: "+X.error),f([]),h("-"),w("-");return}f(X.iterations||[]),m("สถานะ: เสร็จสิ้น "+(X.converged?"(converged)":"(ไม่ converged)")),w(Math.max(0,(X.iterations||[]).length-1)),h(Fe(X.root))},T=()=>{e(""),n(""),i(""),l(""),o(""),f([]),m("สถานะ: รีเซ็ตแล้ว"),w("-"),h("-")},M=yn(t)||(P=>P),I=parseFloat(r),j=parseFloat(a);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Bisection Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน (เวอร์ชันใหม่)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),v.jsx("input",{type:"text",value:t,onChange:O=>e(O.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),v.jsx("input",{type:"number",value:r,onChange:O=>n(O.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),v.jsx("input",{type:"number",value:a,onChange:O=>i(O.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),v.jsx("input",{type:"text",value:s,onChange:O=>l(O.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:u,onChange:O=>o(O.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-4",children:[v.jsx("button",{onClick:C,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:T,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:E,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsxs("div",{className:"text-sm mb-2 text-gray-300",children:[v.jsx("div",{children:d}),v.jsxs("div",{children:["Iterations: ",D]}),v.jsxs("div",{children:["Root: ",p]})]}),v.jsx(Lt,{problems:S,onLoad:y,onDelete:_,removingIds:x})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(sf,{func:M,xl:Number.isFinite(I)?I:-5,xr:Number.isFinite(j)?j:5,iterations:c,className:"w-full h-72 rounded"})}),v.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["เขียว = XL, แดง = XR, ส้ม = x",v.jsx("sub",{children:"m"})," ของแต่ละรอบ (วงใหญ่ = x",v.jsx("sub",{children:"m"})," สุดท้าย)"]})]})]}),v.jsx("div",{className:"mt-6",children:v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"iter"}),v.jsx("th",{className:"p-2 text-center",children:"xl"}),v.jsx("th",{className:"p-2 text-center",children:"xr"}),v.jsx("th",{className:"p-2 text-center",children:"x1"}),v.jsx("th",{className:"p-2 text-center",children:"f(x1)"}),v.jsx("th",{className:"p-2 text-center",children:"error"})]})}),v.jsx("tbody",{children:c.map((O,P)=>v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900 transition-colors",children:[v.jsx("td",{className:"p-2 text-center font-medium",children:O.iter??P}),v.jsx("td",{className:"p-2 text-center",children:O.xl!==void 0?Fe(O.xl):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.xr!==void 0?Fe(O.xr):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.x1!==void 0?Fe(O.x1):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.fx1!==void 0?Fe(O.fx1):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.error!==void 0&&O.error!==null?Fe(O.error):"-"})]},P))})]})})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Oy="problems_falseposition";async function j3(){const t=Pt(Ue(Ce,Oy),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function k3(t){return jt(Ue(Ce,Oy),{...t,method:"falseposition",createdAt:kt()})}async function $3(t){return Bt(Tt(Ce,Oy,t))}const fk={getFalsePositionProblems:j3,saveFalsePositionProblem:k3,deleteFalsePositionProblem:$3},dk=Object.freeze(Object.defineProperty({__proto__:null,default:fk,deleteFalsePositionProblem:$3,getFalsePositionProblems:j3,saveFalsePositionProblem:k3},Symbol.toStringTag,{value:"Module"}));function mk(t,e,r,n=1e-6,a=50){try{let i=t(e),s=t(r);if(!isFinite(i)||!isFinite(s))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(i*s>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const l=[];let u=null,o=null;for(let c=0;c<=a;c++){u=(e*s-r*i)/(s-i);const f=t(u);if(!isFinite(f))return{error:"f(x1) คำนวณไม่ได้",iterations:l,converged:!1};const d=o===null?null:Math.abs((u-o)/(Math.abs(u)>1e-12?Math.abs(u):1));if(l.push({iter:c,xl:e,xr:r,x1:u,fx1:f,error:d}),Math.abs(f)===0||d!==null&&d<=n)return{root:u,iterations:l,converged:!0};i*f<0?(r=u,s=f):(e=u,i=f),o=u}return{root:u,iterations:l,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function hk(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,l]=U.useState(""),[u,o]=U.useState(""),[c,f]=U.useState([]),[d,m]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[p,h]=U.useState("-"),[D,w]=U.useState("-"),{problems:S,removingIds:x,refresh:b,saveProblem:N,deleteProblem:g}=$t(dk);U.useEffect(()=>{b().catch(console.error)},[b]);const y=async()=>{if(!t||!r||!a||!s||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await N({expr:t,xl:r,xr:a,tol:s,maxIter:u,method:"false_position"}),alert("บันทึกแล้ว!")}catch(O){console.error("บันทึกโจทย์ผิดพลาด:",O),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},_=O=>{e(O.expr??""),n(O.xl??""),i(O.xr??""),l(O.tol??""),o(O.maxIter??"")},E=O=>{if(confirm(`ลบโจทย์นี้ไหม?
${O.expr}`))try{g(O.id)}catch(P){console.error("ลบโจทย์ผิดพลาด:",P),alert("ลบไม่สำเร็จ")}},C=()=>{const O=yn(t);if(!O){m("สถานะ: สมการไม่ถูกต้อง");return}const P=parseFloat(r),H=parseFloat(a),$=parseFloat(s),z=parseInt(u,10);if(isNaN(P)||isNaN(H)){m("สถานะ: XL/XR ไม่ถูกต้อง");return}if(P>=H){m("สถานะ: ต้องมี XL < XR");return}if(!isFinite($)||$<=0){m("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(z)||z<=0){m("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const X=mk(O,P,H,$,z);if(X.error){m("สถานะ: "+X.error);return}f(X.iterations),m("สถานะ: เสร็จสิ้น "+(X.converged?"(converged)":"(ไม่ converged)")),w(Math.max(0,X.iterations.length-1)),h(Fe(X.root))},T=()=>{e(""),n(""),i(""),l(""),o(""),f([]),m("สถานะ: รีเซ็ตแล้ว"),w("-"),h("-")},M=yn(t)||(O=>O),I=parseFloat(r),j=parseFloat(a);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"False Position Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน (เวอร์ชันใหม่)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),v.jsx("input",{type:"text",value:t,onChange:O=>e(O.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),v.jsx("input",{type:"number",value:r,onChange:O=>n(O.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),v.jsx("input",{type:"number",value:a,onChange:O=>i(O.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),v.jsx("input",{type:"text",value:s,onChange:O=>l(O.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:u,onChange:O=>o(O.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-4",children:[v.jsx("button",{onClick:C,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:T,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsxs("div",{className:"text-sm mb-2 text-gray-300",children:[v.jsx("div",{children:d}),v.jsxs("div",{children:["Iterations: ",D]}),v.jsxs("div",{children:["Root: ",p]})]}),v.jsx(Lt,{problems:S,onLoad:_,onDelete:E,removingIds:x})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(sf,{func:M,xl:Number.isFinite(I)?I:-5,xr:Number.isFinite(j)?j:5,iterations:c,className:"w-full h-72 rounded"})}),v.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["เขียว = XL, แดง = XR, ส้ม = X",v.jsx("sub",{children:"1"})," แต่ละรอบ (วงใหญ่ = X",v.jsx("sub",{children:"1"})," สุดท้าย)"]})]})]}),v.jsx("div",{className:"mt-6",children:v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"iter"}),v.jsx("th",{className:"p-2 text-center",children:"xl"}),v.jsx("th",{className:"p-2 text-center",children:"xr"}),v.jsx("th",{className:"p-2 text-center",children:"x1"}),v.jsx("th",{className:"p-2 text-center",children:"f(x1)"}),v.jsx("th",{className:"p-2 text-center",children:"error"})]})}),v.jsx("tbody",{children:c.map((O,P)=>v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900 transition-colors",children:[v.jsx("td",{className:"p-2 text-center font-medium",children:O.iter??P}),v.jsx("td",{className:"p-2 text-center",children:O.xl!==void 0?Fe(O.xl):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.xr!==void 0?Fe(O.xr):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.x1!==void 0?Fe(O.x1):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.fx1!==void 0?Fe(O.fx1):"-"}),v.jsx("td",{className:"p-2 text-center",children:O.error!==void 0&&O.error!==null?Fe(O.error):"-"})]},P))})]})})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function pk(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,l]=U.useState(""),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=U.useState("-"),[p,h]=U.useState("-"),[D,w]=U.useState(null),[S,x]=U.useState("");function b(E,C){const T=Math.cbrt(Number.EPSILON)*(Math.abs(C)+1),M=E(C+T),I=E(C-T);return(M-I)/(2*T)}function N(E,C){try{const T=b(E,C);return!isFinite(T)||T===0?.5:1/Math.max(1,Math.abs(T))}catch{return .5}}function g(E,C,T,M,I){let j=[],O=C;j.push({iter:0,x:O,error:null});for(let P=1;P<=M;P++){const H=O-I*E(O),$=Math.abs((H-O)/H);if(j.push({iter:P,x:H,error:$}),!isFinite(H))return{error:"ค่า x ไม่เป็นจำนวนจำกัด (อาจ Diverge)"};if($<=T)return{root:H,iterations:j,converged:!0,lambda:I};O=H}return{root:j[j.length-1].x,iterations:j,converged:!1,lambda:I}}U.useEffect(()=>{const E=yn(t),C=parseFloat(r);if(!E||!isFinite(C)){w(null),x("");return}const T=N(E,C);w(T);const M=t.replace(/\s+/g," ").trim();x(`f2(x) = x - (${T.toPrecision(6)}) * [ ${M||"f(x)"} ]`)},[t,r]);const y=()=>{const E=yn(t);if(!E){f("สถานะ: f(x) ไม่ถูกต้อง");return}const C=parseFloat(r),T=parseFloat(a),M=parseInt(s,10);if(!isFinite(C)){f("สถานะ: ค่าเริ่มต้น x0 ไม่ถูกต้อง");return}if(!isFinite(T)||T<=0){f("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(M)||M<=0){f("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const I=N(E,C),j=g(E,C,T,M,I);if(j.error){f("สถานะ: "+j.error),o([]),h("-"),m("-");return}o(j.iterations),f("สถานะ: เสร็จสิ้น "+(j.converged?"(converged)":"(ไม่ converged)")),h(j.iterations.length),m(Fe(j.root)),w(j.lambda);const O=t.replace(/\s+/g," ").trim();x(`f2(x) = x - (${j.lambda.toPrecision(6)}) * [ ${O||"f(x)"} ]`)},_=()=>{e(""),n(""),i(""),l(""),o([]),f("สถานะ: รีเซ็ตแล้ว"),h("-"),m("-"),w(null),x("")};return v.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[v.jsx(Mt,{title:"One-Point Iteration",subtitle:"แปลง f(x) → f2(x) อัตโนมัติ"}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x)"}),v.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),placeholder:"เช่น x^3 + x - 1,  sin(x) - x/2,  ln(x) - 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x0"}),v.jsx("input",{type:"number",value:r,onChange:E=>n(E.target.value),placeholder:"เช่น 0.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),v.jsx("input",{type:"text",value:a,onChange:E=>i(E.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:s,onChange:E=>l(E.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"rounded-md bg-slate-900 border border-slate-700 p-3 text-sm text-gray-300 mb-4",children:[v.jsx("div",{className:"font-semibold text-cyan-300 mb-1",children:"f2(x) ที่ใช้ในการคำนวณ"}),v.jsx("div",{className:"break-words",children:S||"— (กรอก f(x) และ x0 เพื่อดู f2(x))"}),D!==null&&v.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["λ (อัตโนมัติ) = ",Fe(D)]})]}),v.jsxs("div",{className:"flex gap-3 mb-4",children:[v.jsx("button",{onClick:y,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),v.jsx("button",{onClick:_,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),v.jsxs("div",{className:"text-sm mb-3",children:[v.jsx("div",{children:c}),v.jsxs("div",{children:["Iterations: ",p]}),v.jsxs("div",{children:["Root: ",d]})]}),u.length>0&&v.jsx("div",{className:"mt-3",children:v.jsx(Vc,{iterations:u})}),v.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:[v.jsx("div",{children:"หมายเหตุ: ใช้หน่วยเรเดียนสำหรับ sin/cos/tan; เขียนคูณให้ชัด เช่น 2*x (ไม่ใช่ 2x)"}),v.jsx("div",{children:"ตัวอย่าง f(x): x^3 + x - 1,  e^(-x) - x,  ln(x) - 1,  sin(x) - x/2"})]})]})]})}const By="problems_taylor";async function L3(){const t=Pt(Ue(Ce,By),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function z3(t){return jt(Ue(Ce,By),{...t,method:"taylor",createdAt:kt()})}async function jy(t){return Bt(Tt(Ce,By,t))}const vk=L3,gk=z3,yk=jy,xk=jy,bk=Object.freeze(Object.defineProperty({__proto__:null,del:xk,deleteTaylorProblem:jy,getProblems:vk,getTaylorProblems:L3,remove:yk,save:gk,saveTaylorProblem:z3},Symbol.toStringTag,{value:"Module"}));function Nr(){return Nr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nr.apply(null,arguments)}var V3={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function En(t,e){if(Cm(t,e))return t[e];throw typeof t[e]=="function"&&ky(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function zl(t,e,r){if(Cm(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Cm(t,e){return!Nk(t)&&!Array.isArray(t)?!1:He(_k,e)?!0:!(e in Object.prototype||e in Function.prototype)}function wk(t,e){if(!ky(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function ky(t,e){return t==null||typeof t[e]!="function"||He(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:He(Sk,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Nk(t){return typeof t=="object"&&t&&t.constructor===Object}var _k={length:!0,name:!0},Sk={toString:!0,valueOf:!0,toLocaleString:!0};class Ph{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return En(this.wrappedObject,e)}set(e,r){return zl(this.wrappedObject,e,r),this}has(e){return Cm(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return q3(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){Cm(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class U3{constructor(e,r,n){this.a=e,this.b=r,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,r){return this.bKeys.has(e)?this.b.set(e,r):this.a.set(e,r),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return q3(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function q3(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function Uc(){return new Map}function Sl(t){if(!t)return Uc();if(W3(t))return t;if(Oh(t))return new Ph(t);throw new Error("createMap can create maps from objects or Maps")}function Ek(t){if(t instanceof Ph)return t.wrappedObject;var e={};for(var r of t.keys()){var n=t.get(r);zl(e,r,n)}return e}function Xe(t){return typeof t=="number"}function lt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function cc(t){return typeof t=="bigint"}function pi(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function of(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Wn(t){return t&&t.constructor.prototype.isUnit===!0||!1}function yr(t){return typeof t=="string"}var Wt=Array.isArray;function Ye(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Jn(t){return Array.isArray(t)||Ye(t)}function Tm(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function to(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function $y(t){return t&&t.constructor.prototype.isRange===!0||!1}function Rh(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Ak(t){return typeof t=="boolean"}function Dk(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function H3(t){return t&&t.constructor.prototype.isHelp===!0||!1}function G3(t){return typeof t=="function"}function Ck(t){return t instanceof Date}function Tk(t){return t instanceof RegExp}function Oh(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!pi(t)&&!of(t))}function W3(t){return t?t instanceof Map||t instanceof Ph||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function Mk(t){return t===null}function Ik(t){return t===void 0}function ho(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ia(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fk(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Pk(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Rk(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Nt(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Tg(t){return Nt(t)||br(t)&&t.args.length===1&&Nt(t.args[0])&&"-+~".includes(t.op)}function lf(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function ws(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function iu(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ht(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Bh(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function br(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Si(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ok(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Bk(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qr(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Q3(t){return t&&t.constructor.prototype.isChain===!0||!1}function Xt(t){var e=typeof t;return e==="object"?t===null?"null":lt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function nt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return nt(r)});if(t instanceof Date)return new Date(t.valueOf());if(lt(t))return t;if(Oh(t))return jk(t,nt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function jk(t,e){var r={};for(var n in t)He(t,n)&&(r[n]=e(t[n]));return r}function X3(t,e){for(var r in e)He(e,r)&&(t[r]=e[r]);return t}function Ei(t,e){var r,n,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,a=t.length;n<a;n++)if(!Ei(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Ei(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function kk(t,e,r){var n=!0,a;Object.defineProperty(t,e,{get:function(){return n&&(a=r(),n=!1),a},set:function(s){a=s,n=!1},configurable:!0,enumerable:!0})}function He(t,e){return t&&Object.hasOwnProperty.call(t,e)}function $k(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=t[a];i!==void 0&&(r[a]=i)}return r}var Lk=["Matrix","Array"],zk=["number","BigNumber","bigint","Fraction"],be=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(V3)};Nr(be,V3,{MATRIX_OPTIONS:Lk,NUMBER_OPTIONS:zk});function GN(){return!0}function ra(){return!1}function Uo(){}const WN="Argument is not a typed-function.";function K3(){function t(L){return typeof L=="object"&&L!==null&&L.constructor===Object}const e=[{name:"number",test:function(L){return typeof L=="number"}},{name:"string",test:function(L){return typeof L=="string"}},{name:"boolean",test:function(L){return typeof L=="boolean"}},{name:"Function",test:function(L){return typeof L=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(L){return L instanceof Date}},{name:"RegExp",test:function(L){return L instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(L){return L===null}},{name:"undefined",test:function(L){return L===void 0}}],r={name:"any",test:GN,isAny:!0};let n,a,i=0,s={createCount:0};function l(L){const J=n.get(L);if(J)return J;let re='Unknown type "'+L+'"';const se=L.toLowerCase();let ue;for(ue of a)if(ue.toLowerCase()===se){re+='. Did you mean "'+ue+'" ?';break}throw new TypeError(re)}function u(L){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const re=J?l(J).index:a.length,se=[];for(let ve=0;ve<L.length;++ve){if(!L[ve]||typeof L[ve].name!="string"||typeof L[ve].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const _e=L[ve].name;if(n.has(_e))throw new TypeError('Duplicate type name "'+_e+'"');se.push(_e),n.set(_e,{name:_e,test:L[ve].test,isAny:L[ve].isAny,index:re+ve,conversionsTo:[]})}const ue=a.slice(re);a=a.slice(0,re).concat(se).concat(ue);for(let ve=re+se.length;ve<a.length;++ve)n.get(a[ve]).index=ve}function o(){n=new Map,a=[],i=0,u([r],!1)}o(),u(e);function c(){let L;for(L of a)n.get(L).conversionsTo=[];i=0}function f(L){const J=a.filter(re=>{const se=n.get(re);return!se.isAny&&se.test(L)});return J.length?J:["any"]}function d(L){return L&&typeof L=="function"&&"_typedFunctionData"in L}function m(L,J,re){if(!d(L))throw new TypeError(WN);const se=re&&re.exact,ue=Array.isArray(J)?J.join(","):J,ve=b(ue),_e=D(ve);if(!se||_e in L.signatures){const ht=L._typedFunctionData.signatureMap.get(_e);if(ht)return ht}const Ee=ve.length;let Me;if(se){Me=[];let ht;for(ht in L.signatures)Me.push(L._typedFunctionData.signatureMap.get(ht))}else Me=L._typedFunctionData.signatures;for(let ht=0;ht<Ee;++ht){const gt=ve[ht],Ut=[];let Ze;for(Ze of Me){const lr=_(Ze.params,ht);if(!(!lr||gt.restParam&&!lr.restParam)){if(!lr.hasAny){const R=x(lr);if(gt.types.some(ne=>!R.has(ne.name)))continue}Ut.push(Ze)}}if(Me=Ut,Me.length===0)break}let Ae;for(Ae of Me)if(Ae.params.length<=Ee)return Ae;throw new TypeError("Signature not found (signature: "+(L.name||"unnamed")+"("+D(ve,", ")+"))")}function p(L,J,re){return m(L,J,re).implementation}function h(L,J){const re=l(J);if(re.test(L))return L;const se=re.conversionsTo;if(se.length===0)throw new Error("There are no conversions to "+J+" defined.");for(let ue=0;ue<se.length;ue++)if(l(se[ue].from).test(L))return se[ue].convert(L);throw new Error("Cannot convert "+L+" to "+J)}function D(L){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return L.map(re=>re.name).join(J)}function w(L){const J=L.indexOf("...")===0,se=(J?L.length>3?L.slice(3):"any":L).split("|").map(Ee=>l(Ee.trim()));let ue=!1,ve=J?"...":"";return{types:se.map(function(Ee){return ue=Ee.isAny||ue,ve+=Ee.name+"|",{name:Ee.name,typeIndex:Ee.index,test:Ee.test,isAny:Ee.isAny,conversion:null,conversionIndex:-1}}),name:ve.slice(0,-1),hasAny:ue,hasConversion:!1,restParam:J}}function S(L){const J=L.types.map(_e=>_e.name),re=H(J);let se=L.hasAny,ue=L.name;const ve=re.map(function(_e){const Ee=l(_e.from);return se=Ee.isAny||se,ue+="|"+_e.from,{name:_e.from,typeIndex:Ee.index,test:Ee.test,isAny:Ee.isAny,conversion:_e,conversionIndex:_e.index}});return{types:L.types.concat(ve),name:ue,hasAny:se,hasConversion:ve.length>0,restParam:L.restParam}}function x(L){return L.typeSet||(L.typeSet=new Set,L.types.forEach(J=>L.typeSet.add(J.name))),L.typeSet}function b(L){const J=[];if(typeof L!="string")throw new TypeError("Signatures must be strings");const re=L.trim();if(re==="")return J;const se=re.split(",");for(let ue=0;ue<se.length;++ue){const ve=w(se[ue].trim());if(ve.restParam&&ue!==se.length-1)throw new SyntaxError('Unexpected rest parameter "'+se[ue]+'": only allowed for the last parameter');if(ve.types.length===0)return null;J.push(ve)}return J}function N(L){const J=K(L);return J?J.restParam:!1}function g(L){if(!L||L.types.length===0)return GN;if(L.types.length===1)return l(L.types[0].name).test;if(L.types.length===2){const J=l(L.types[0].name).test,re=l(L.types[1].name).test;return function(ue){return J(ue)||re(ue)}}else{const J=L.types.map(function(re){return l(re.name).test});return function(se){for(let ue=0;ue<J.length;ue++)if(J[ue](se))return!0;return!1}}}function y(L){let J,re,se;if(N(L)){J=W(L).map(g);const ue=J.length,ve=g(K(L)),_e=function(Ee){for(let Me=ue;Me<Ee.length;Me++)if(!ve(Ee[Me]))return!1;return!0};return function(Me){for(let Ae=0;Ae<J.length;Ae++)if(!J[Ae](Me[Ae]))return!1;return _e(Me)&&Me.length>=ue+1}}else return L.length===0?function(ve){return ve.length===0}:L.length===1?(re=g(L[0]),function(ve){return re(ve[0])&&ve.length===1}):L.length===2?(re=g(L[0]),se=g(L[1]),function(ve){return re(ve[0])&&se(ve[1])&&ve.length===2}):(J=L.map(g),function(ve){for(let _e=0;_e<J.length;_e++)if(!J[_e](ve[_e]))return!1;return ve.length===J.length})}function _(L,J){return J<L.length?L[J]:N(L)?K(L):null}function E(L,J){const re=_(L,J);return re?x(re):new Set}function C(L){return L.conversion===null||L.conversion===void 0}function T(L,J){const re=new Set;return L.forEach(se=>{const ue=E(se.params,J);let ve;for(ve of ue)re.add(ve)}),re.has("any")?["any"]:Array.from(re)}function M(L,J,re){let se,ue;const ve=L||"unnamed";let _e=re,Ee;for(Ee=0;Ee<J.length;Ee++){const gt=[];if(_e.forEach(Ut=>{const Ze=_(Ut.params,Ee),lr=g(Ze);(Ee<Ut.params.length||N(Ut.params))&&lr(J[Ee])&&gt.push(Ut)}),gt.length===0){if(ue=T(_e,Ee),ue.length>0){const Ut=f(J[Ee]);return se=new TypeError("Unexpected type of argument in function "+ve+" (expected: "+ue.join(" or ")+", actual: "+Ut.join(" | ")+", index: "+Ee+")"),se.data={category:"wrongType",fn:ve,index:Ee,actual:Ut,expected:ue},se}}else _e=gt}const Me=_e.map(function(gt){return N(gt.params)?1/0:gt.params.length});if(J.length<Math.min.apply(null,Me))return ue=T(_e,Ee),se=new TypeError("Too few arguments in function "+ve+" (expected: "+ue.join(" or ")+", index: "+J.length+")"),se.data={category:"tooFewArgs",fn:ve,index:J.length,expected:ue},se;const Ae=Math.max.apply(null,Me);if(J.length>Ae)return se=new TypeError("Too many arguments in function "+ve+" (expected: "+Ae+", actual: "+J.length+")"),se.data={category:"tooManyArgs",fn:ve,index:J.length,expectedLength:Ae},se;const ht=[];for(let gt=0;gt<J.length;++gt)ht.push(f(J[gt]).join("|"));return se=new TypeError('Arguments of type "'+ht.join(", ")+'" do not match any of the defined signatures of function '+ve+"."),se.data={category:"mismatch",actual:ht},se}function I(L){let J=a.length+1;for(let re=0;re<L.types.length;re++)C(L.types[re])&&(J=Math.min(J,L.types[re].typeIndex));return J}function j(L){let J=i+1;for(let re=0;re<L.types.length;re++)C(L.types[re])||(J=Math.min(J,L.types[re].conversionIndex));return J}function O(L,J){if(L.hasAny){if(!J.hasAny)return 1}else if(J.hasAny)return-1;if(L.restParam){if(!J.restParam)return 1}else if(J.restParam)return-1;if(L.hasConversion){if(!J.hasConversion)return 1}else if(J.hasConversion)return-1;const re=I(L)-I(J);if(re<0)return-1;if(re>0)return 1;const se=j(L)-j(J);return se<0?-1:se>0?1:0}function P(L,J){const re=L.params,se=J.params,ue=K(re),ve=K(se),_e=N(re),Ee=N(se);if(_e&&ue.hasAny){if(!Ee||!ve.hasAny)return 1}else if(Ee&&ve.hasAny)return-1;let Me=0,Ae=0,ht;for(ht of re)ht.hasAny&&++Me,ht.hasConversion&&++Ae;let gt=0,Ut=0;for(ht of se)ht.hasAny&&++gt,ht.hasConversion&&++Ut;if(Me!==gt)return Me-gt;if(_e&&ue.hasConversion){if(!Ee||!ve.hasConversion)return 1}else if(Ee&&ve.hasConversion)return-1;if(Ae!==Ut)return Ae-Ut;if(_e){if(!Ee)return 1}else if(Ee)return-1;const Ze=(re.length-se.length)*(_e?-1:1);if(Ze!==0)return Ze;const lr=[];let R=0;for(let he=0;he<re.length;++he){const De=O(re[he],se[he]);lr.push(De),R+=De}if(R!==0)return R;let ne;for(ne of lr)if(ne!==0)return ne;return 0}function H(L){if(L.length===0)return[];const J=L.map(l);L.length>1&&J.sort((ue,ve)=>ue.index-ve.index);let re=J[0].conversionsTo;if(L.length===1)return re;re=re.concat([]);const se=new Set(L);for(let ue=1;ue<J.length;++ue){let ve;for(ve of J[ue].conversionsTo)se.has(ve.from)||(re.push(ve),se.add(ve.from))}return re}function $(L,J){let re=J;if(L.some(ue=>ue.hasConversion)){const ue=N(L),ve=L.map(z);re=function(){const Ee=[],Me=ue?arguments.length-1:arguments.length;for(let Ae=0;Ae<Me;Ae++)Ee[Ae]=ve[Ae](arguments[Ae]);return ue&&(Ee[Me]=arguments[Me].map(ve[Me])),J.apply(this,Ee)}}let se=re;if(N(L)){const ue=L.length-1;se=function(){return re.apply(this,ee(arguments,0,ue).concat([ee(arguments,ue)]))}}return se}function z(L){let J,re,se,ue;const ve=[],_e=[];switch(L.types.forEach(function(Ee){Ee.conversion&&(ve.push(l(Ee.conversion.from).test),_e.push(Ee.conversion.convert))}),_e.length){case 0:return function(Me){return Me};case 1:return J=ve[0],se=_e[0],function(Me){return J(Me)?se(Me):Me};case 2:return J=ve[0],re=ve[1],se=_e[0],ue=_e[1],function(Me){return J(Me)?se(Me):re(Me)?ue(Me):Me};default:return function(Me){for(let Ae=0;Ae<_e.length;Ae++)if(ve[Ae](Me))return _e[Ae](Me);return Me}}}function X(L){function J(re,se,ue){if(se<re.length){const ve=re[se];let _e=[];if(ve.restParam){const Ee=ve.types.filter(C);Ee.length<ve.types.length&&_e.push({types:Ee,name:"..."+Ee.map(Me=>Me.name).join("|"),hasAny:Ee.some(Me=>Me.isAny),hasConversion:!1,restParam:!0}),_e.push(ve)}else _e=ve.types.map(function(Ee){return{types:[Ee],name:Ee.name,hasAny:Ee.isAny,hasConversion:Ee.conversion,restParam:!1}});return oe(_e,function(Ee){return J(re,se+1,ue.concat([Ee]))})}else return[ue]}return J(L,0,[])}function ae(L,J){const re=Math.max(L.length,J.length);for(let Ee=0;Ee<re;Ee++){const Me=E(L,Ee),Ae=E(J,Ee);let ht=!1,gt;for(gt of Ae)if(Me.has(gt)){ht=!0;break}if(!ht)return!1}const se=L.length,ue=J.length,ve=N(L),_e=N(J);return ve?_e?se===ue:ue>=se:_e?se>=ue:se===ue}function k(L){return L.map(J=>ze(J)?Te(J.referToSelf.callback):ke(J)?me(J.referTo.references,J.referTo.callback):J)}function Y(L,J,re){const se=[];let ue;for(ue of L){let ve=re[ue];if(typeof ve!="number")throw new TypeError('No definition for referenced signature "'+ue+'"');if(ve=J[ve],typeof ve!="function")return!1;se.push(ve)}return se}function V(L,J,re){const se=k(L),ue=new Array(se.length).fill(!1);let ve=!0;for(;ve;){ve=!1;let _e=!0;for(let Ee=0;Ee<se.length;++Ee){if(ue[Ee])continue;const Me=se[Ee];if(ze(Me))se[Ee]=Me.referToSelf.callback(re),se[Ee].referToSelf=Me.referToSelf,ue[Ee]=!0,_e=!1;else if(ke(Me)){const Ae=Y(Me.referTo.references,se,J);Ae?(se[Ee]=Me.referTo.callback.apply(this,Ae),se[Ee].referTo=Me.referTo,ue[Ee]=!0,_e=!1):ve=!0}}if(_e&&ve)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return se}function ye(L){const J=/\bthis(\(|\.signatures\b)/;Object.keys(L).forEach(re=>{const se=L[re];if(J.test(se.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function le(L,J){if(s.createCount++,Object.keys(J).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&ye(J);const re=[],se=[],ue={},ve=[];let _e;for(_e in J){if(!Object.prototype.hasOwnProperty.call(J,_e))continue;const zt=b(_e);if(!zt)continue;re.forEach(function(Fi){if(ae(Fi,zt))throw new TypeError('Conflicting signatures "'+D(Fi)+'" and "'+D(zt)+'".')}),re.push(zt);const ln=se.length;se.push(J[_e]);const Ef=zt.map(S);let Vs;for(Vs of X(Ef)){const Fi=D(Vs);ve.push({params:Vs,name:Fi,fn:ln}),Vs.every(wu=>!wu.hasConversion)&&(ue[Fi]=ln)}}ve.sort(P);const Ee=V(se,ue,qn);let Me;for(Me in ue)Object.prototype.hasOwnProperty.call(ue,Me)&&(ue[Me]=Ee[ue[Me]]);const Ae=[],ht=new Map;for(Me of ve)ht.has(Me.name)||(Me.fn=Ee[Me.fn],Ae.push(Me),ht.set(Me.name,Me));const gt=Ae[0]&&Ae[0].params.length<=2&&!N(Ae[0].params),Ut=Ae[1]&&Ae[1].params.length<=2&&!N(Ae[1].params),Ze=Ae[2]&&Ae[2].params.length<=2&&!N(Ae[2].params),lr=Ae[3]&&Ae[3].params.length<=2&&!N(Ae[3].params),R=Ae[4]&&Ae[4].params.length<=2&&!N(Ae[4].params),ne=Ae[5]&&Ae[5].params.length<=2&&!N(Ae[5].params),he=gt&&Ut&&Ze&&lr&&R&&ne;for(let zt=0;zt<Ae.length;++zt)Ae[zt].test=y(Ae[zt].params);const De=gt?g(Ae[0].params[0]):ra,Ge=Ut?g(Ae[1].params[0]):ra,dt=Ze?g(Ae[2].params[0]):ra,Ir=lr?g(Ae[3].params[0]):ra,ii=R?g(Ae[4].params[0]):ra,ip=ne?g(Ae[5].params[0]):ra,sp=gt?g(Ae[0].params[1]):ra,Ii=Ut?g(Ae[1].params[1]):ra,op=Ze?g(Ae[2].params[1]):ra,lp=lr?g(Ae[3].params[1]):ra,ko=R?g(Ae[4].params[1]):ra,yf=ne?g(Ae[5].params[1]):ra;for(let zt=0;zt<Ae.length;++zt)Ae[zt].implementation=$(Ae[zt].params,Ae[zt].fn);const xf=gt?Ae[0].implementation:Uo,gu=Ut?Ae[1].implementation:Uo,Ls=Ze?Ae[2].implementation:Uo,up=lr?Ae[3].implementation:Uo,ka=R?Ae[4].implementation:Uo,bf=ne?Ae[5].implementation:Uo,wf=gt?Ae[0].params.length:-1,yu=Ut?Ae[1].params.length:-1,xu=Ze?Ae[2].params.length:-1,Nf=lr?Ae[3].params.length:-1,cp=R?Ae[4].params.length:-1,_f=ne?Ae[5].params.length:-1,fp=he?6:0,$o=Ae.length,Sf=Ae.map(zt=>zt.test),bu=Ae.map(zt=>zt.implementation),zs=function(){for(let ln=fp;ln<$o;ln++)if(Sf[ln](arguments))return bu[ln].apply(this,arguments);return s.onMismatch(L,arguments,Ae)};function qn(zt,ln){return arguments.length===wf&&De(zt)&&sp(ln)?xf.apply(this,arguments):arguments.length===yu&&Ge(zt)&&Ii(ln)?gu.apply(this,arguments):arguments.length===xu&&dt(zt)&&op(ln)?Ls.apply(this,arguments):arguments.length===Nf&&Ir(zt)&&lp(ln)?up.apply(this,arguments):arguments.length===cp&&ii(zt)&&ko(ln)?ka.apply(this,arguments):arguments.length===_f&&ip(zt)&&yf(ln)?bf.apply(this,arguments):zs.apply(this,arguments)}try{Object.defineProperty(qn,"name",{value:L})}catch{}return qn.signatures=ue,qn._typedFunctionData={signatures:Ae,signatureMap:ht},qn}function fe(L,J,re){throw M(L,J,re)}function W(L){return ee(L,0,L.length-1)}function K(L){return L[L.length-1]}function ee(L,J,re){return Array.prototype.slice.call(L,J,re)}function ie(L,J){for(let re=0;re<L.length;re++)if(J(L[re]))return L[re]}function oe(L,J){return Array.prototype.concat.apply([],L.map(J))}function pe(){const L=W(arguments).map(re=>D(b(re))),J=K(arguments);if(typeof J!="function")throw new TypeError("Callback function expected as last argument");return me(L,J)}function me(L,J){return{referTo:{references:L,callback:J}}}function Te(L){if(typeof L!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:L}}}function ke(L){return L&&typeof L.referTo=="object"&&Array.isArray(L.referTo.references)&&typeof L.referTo.callback=="function"}function ze(L){return L&&typeof L.referToSelf=="object"&&typeof L.referToSelf.callback=="function"}function Oe(L,J){if(!L)return J;if(J&&J!==L){const re=new Error("Function names do not match (expected: "+L+", actual: "+J+")");throw re.data={actual:J,expected:L},re}return L}function $e(L){let J;for(const re in L)Object.prototype.hasOwnProperty.call(L,re)&&(d(L[re])||typeof L[re].signature=="string")&&(J=Oe(J,L[re].name));return J}function G(L,J){let re;for(re in J)if(Object.prototype.hasOwnProperty.call(J,re)){if(re in L&&J[re]!==L[re]){const se=new Error('Signature "'+re+'" is defined twice');throw se.data={signature:re,sourceFunction:J[re],destFunction:L[re]},se}L[re]=J[re]}}const te=s;s=function(L){const J=typeof L=="string",re=J?1:0;let se=J?L:"";const ue={};for(let ve=re;ve<arguments.length;++ve){const _e=arguments[ve];let Ee={},Me;if(typeof _e=="function"?(Me=_e.name,typeof _e.signature=="string"?Ee[_e.signature]=_e:d(_e)&&(Ee=_e.signatures)):t(_e)&&(Ee=_e,J||(Me=$e(_e))),Object.keys(Ee).length===0){const Ae=new TypeError("Argument to 'typed' at index "+ve+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ae.data={index:ve,argument:_e},Ae}J||(se=Oe(se,Me)),G(ue,Ee)}return le(se||"",ue)},s.create=K3,s.createCount=te.createCount,s.onMismatch=fe,s.throwMismatchError=fe,s.createError=M,s.clear=o,s.clearConversions=c,s.addTypes=u,s._findType=l,s.referTo=pe,s.referToSelf=Te,s.convert=h,s.findSignature=m,s.find=p,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(L,J){let re="any";J!==!1&&n.has("Object")&&(re="Object"),s.addTypes([L],re)};function ce(L){if(!L||typeof L.from!="string"||typeof L.to!="string"||typeof L.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(L.to===L.from)throw new SyntaxError('Illegal to define conversion from "'+L.from+'" to itself.')}return s.addConversion=function(L){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ce(L);const re=l(L.to),se=re.conversionsTo.find(ue=>ue.from===L.from);if(se)if(J&&J.override)s.removeConversion({from:se.from,to:L.to,convert:se.convert});else throw new Error('There is already a conversion from "'+L.from+'" to "'+re.name+'"');re.conversionsTo.push({from:L.from,convert:L.convert,index:i++})},s.addConversions=function(L,J){L.forEach(re=>s.addConversion(re,J))},s.removeConversion=function(L){ce(L);const J=l(L.to),re=ie(J.conversionsTo,ue=>ue.from===L.from);if(!re)throw new Error("Attempt to remove nonexistent conversion from "+L.from+" to "+L.to);if(re.convert!==L.convert)throw new Error("Conversion to remove does not match existing conversion");const se=J.conversionsTo.indexOf(re);J.conversionsTo.splice(se,1)},s.resolve=function(L,J){if(!d(L))throw new TypeError(WN);const re=L._typedFunctionData.signatures;for(let se=0;se<re.length;++se)if(re[se].test(J))return re[se];return null},s}const Mm=K3();function q(t,e,r,n){function a(i){var s=$k(i,e.map(qk));return Vk(t,e,i),r(s)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),n&&(a.meta=n),a}function Vk(t,e,r){var n=e.filter(i=>!Uk(i)).every(i=>r[i]!==void 0);if(!n){var a=e.filter(i=>r[i]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(i=>'"'.concat(i,'"')).join(", "),"."))}}function Uk(t){return t&&t[0]==="?"}function qk(t){return t&&t[0]==="?"?t.slice(1):t}function We(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Cs(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var Ki=Math.sign||function(t){return t>0?1:t<0?-1:0},Hk=Math.log2||function(e){return Math.log(e)/Math.LN2},Gk=Math.log10||function(e){return Math.log(e)/Math.LN10},Wk=Math.log1p||function(t){return Math.log(t+1)},Qk=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},Xk=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function rv(t,e,r){var n={2:"0b",8:"0o",16:"0x"},a=n[e],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!We(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!We(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),i="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(a).concat(t.toString(e)).concat(i)}function io(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:a}=J3(e);switch(r){case"fixed":return Y3(t,n);case"exponential":return Z3(t,n);case"engineering":return Kk(t,n);case"bin":return rv(t,2,a);case"oct":return rv(t,8,a);case"hex":return rv(t,16,a);case"auto":return Jk(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var i=arguments[2],s=arguments[4];return i!=="."?i+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function J3(t){var e="auto",r,n;if(t!==void 0)if(Xe(t))r=t;else if(lt(t))r=t.toNumber();else if(Oh(t))t.precision!==void 0&&(r=QN(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=QN(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function uf(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],a=parseFloat(e[4]||"0"),i=n.indexOf(".");a+=i!==-1?i-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(l){return a-=l.length,""}).replace(/0*$/,"").split("").map(function(l){return parseInt(l)});return s.length===0&&(s.push(0),a++),{sign:r,coefficients:s,exponent:a}}function Kk(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uf(t),n=jh(r,e),a=n.exponent,i=n.coefficients,s=a%3===0?a:a<0?a-3-a%3:a-a%3;if(Xe(e))for(;e>i.length||a-s+1>i.length;)i.push(0);else for(var l=Math.abs(a-s)-(i.length-1),u=0;u<l;u++)i.push(0);for(var o=Math.abs(a-s),c=1;o>0;)c++,o--;var f=i.slice(c).join(""),d=Xe(e)&&f.length||f.match(/[1-9]/)?"."+f:"",m=i.slice(0,c).join("")+d+"e"+(a>=0?"+":"")+s.toString();return n.sign+m}function Y3(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uf(t),n=typeof e=="number"?jh(r,r.exponent+1+e):r,a=n.coefficients,i=n.exponent+1,s=i+(e||0);return a.length<s&&(a=a.concat(El(s-a.length))),i<0&&(a=El(-i+1).concat(a),i=1),i<a.length&&a.splice(i,0,i===0?"0.":"."),n.sign+a.join("")}function Z3(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uf(t),n=e?jh(r,e):r,a=n.coefficients,i=n.exponent;a.length<e&&(a=a.concat(El(e-a.length)));var s=a.shift();return n.sign+s+(a.length>0?"."+a.join(""):"")+"e"+(i>=0?"+":"")+i}function Jk(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=XN(r==null?void 0:r.lowerExp,-3),a=XN(r==null?void 0:r.upperExp,5),i=uf(t),s=e?jh(i,e):i;if(s.exponent<n||s.exponent>=a)return Z3(t,e);var l=s.coefficients,u=s.exponent;l.length<e&&(l=l.concat(El(e-l.length))),l=l.concat(El(u-l.length+1+(l.length<e?e-l.length:0))),l=El(-u).concat(l);var o=u>0?u:0;return o<l.length-1&&l.splice(o+1,0,"."),s.sign+l.join("")}function jh(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var a=n.splice(e,n.length-e);if(a[0]>=5){var i=e-1;for(n[i]++;n[i]===10;)n.pop(),i===0&&(n.unshift(0),r.exponent++,i++),i--,n[i]++}}return r}function El(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Yk(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Kr(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}var Zk=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},e7=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},t7=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},r7=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},n7=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},a7=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function i7(t,e){var r=!0,n=e>0?!0:e<0?!1:1/e===1/0;return r^n?-t:t}function QN(t,e){if(Xe(t))return t;if(lt(t))return t.toNumber();e()}function XN(t,e){return Xe(t)?t:lt(t)?t.toNumber():e}var eM=function(){return eM=Mm.create,Mm},s7=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],o7=q("typed",s7,function(e){var{BigNumber:r,Complex:n,DenseMatrix:a,Fraction:i}=e,s=eM();return s.clear(),s.addTypes([{name:"number",test:Xe},{name:"Complex",test:pi},{name:"BigNumber",test:lt},{name:"bigint",test:cc},{name:"Fraction",test:of},{name:"Unit",test:Wn},{name:"identifier",test:l=>yr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(l)},{name:"string",test:yr},{name:"Chain",test:Q3},{name:"Array",test:Wt},{name:"Matrix",test:Ye},{name:"DenseMatrix",test:Tm},{name:"SparseMatrix",test:to},{name:"Range",test:$y},{name:"Index",test:Rh},{name:"boolean",test:Ak},{name:"ResultSet",test:Dk},{name:"Help",test:H3},{name:"function",test:G3},{name:"Date",test:Ck},{name:"RegExp",test:Tk},{name:"null",test:Mk},{name:"undefined",test:Ik},{name:"AccessorNode",test:ho},{name:"ArrayNode",test:ia},{name:"AssignmentNode",test:Fk},{name:"BlockNode",test:Pk},{name:"ConditionalNode",test:Rk},{name:"ConstantNode",test:Nt},{name:"FunctionNode",test:ws},{name:"FunctionAssignmentNode",test:lf},{name:"IndexNode",test:iu},{name:"Node",test:Ht},{name:"ObjectNode",test:Bh},{name:"OperatorNode",test:br},{name:"ParenthesisNode",test:Si},{name:"RangeNode",test:Ok},{name:"RelationalNode",test:Bk},{name:"SymbolNode",test:Qr},{name:"Map",test:W3},{name:"Object",test:Oh}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(r||nd(u),Yk(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new r(u)}},{from:"number",to:"Complex",convert:function(u){return n||ad(u),new n(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return n||ad(u),new n(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return r||nd(u),new r(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return i||id(u),new i(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return n||ad(u),new n(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){i||id(u);var o=new i(u);if(o.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return o}},{from:"string",to:"number",convert:function(u){var o=Number(u);if(isNaN(o))throw new Error('Cannot convert "'+u+'" to a number');return o}},{from:"string",to:"BigNumber",convert:function(u){r||nd(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){i||id(u);try{return new i(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){n||ad(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return r||nd(u),new r(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return i||id(u),new i(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return a||l7(),new a(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),s.onMismatch=(l,u,o)=>{var c=s.createError(l,u,o);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&Jn(u[0])&&o.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(l,u,o)=>{var c=s.createError(l,u,o);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&Jn(u[0])&&o.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw f.data=c.data,f}throw c},s});function nd(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ad(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function l7(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function id(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var u7="ResultSet",c7=[],f7=q(u7,c7,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var fl=9e15,Ts=1e9,Mg="0123456789abcdef",Im="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Fm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ig={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-fl,maxE:fl,crypto:!1},tM,di,st=!0,kh="[DecimalError] ",Ns=kh+"Invalid argument: ",rM=kh+"Precision limit exceeded",nM=kh+"crypto unavailable",aM="[object Decimal]",xn=Math.floor,Rr=Math.pow,d7=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,m7=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,h7=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,iM=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ta=1e7,et=7,p7=9007199254740991,v7=Im.length-1,Fg=Fm.length-1,Se={toStringTag:aM};Se.absoluteValue=Se.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ke(t)};Se.ceil=function(){return Ke(new this.constructor(this),this.e+1,2)};Se.clampedTo=Se.clamp=function(t,e){var r,n=this,a=n.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(Ns+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new a(n)};Se.comparedTo=Se.cmp=function(t){var e,r,n,a,i=this,s=i.d,l=(t=new i.constructor(t)).d,u=i.s,o=t.s;if(!s||!l)return!u||!o?NaN:u!==o?u:s===l?0:!s^u<0?1:-1;if(!s[0]||!l[0])return s[0]?u:l[0]?-o:0;if(u!==o)return u;if(i.e!==t.e)return i.e>t.e^u<0?1:-1;for(n=s.length,a=l.length,e=0,r=n<a?n:a;e<r;++e)if(s[e]!==l[e])return s[e]>l[e]^u<0?1:-1;return n===a?0:n>a^u<0?1:-1};Se.cosine=Se.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=g7(n,cM(n,r)),n.precision=t,n.rounding=e,Ke(di==2||di==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Se.cubeRoot=Se.cbrt=function(){var t,e,r,n,a,i,s,l,u,o,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(st=!1,i=c.s*Rr(c.s*c,1/3),!i||Math.abs(i)==1/0?(r=en(c.d),t=c.e,(i=(t-r.length+1)%3)&&(r+=i==1||i==-2?"0":"00"),i=Rr(r,1/3),t=xn((t+1)/3)-(t%3==(t<0?-1:2)),i==1/0?r="5e"+t:(r=i.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(i.toString()),s=(t=f.precision)+3;;)if(l=n,u=l.times(l).times(l),o=u.plus(c),n=tr(o.plus(c).times(l),o.plus(u),s+2,1),en(l.d).slice(0,s)===(r=en(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!a&&r=="4999"){if(!a&&(Ke(l,t+1,0),l.times(l).times(l).eq(c))){n=l;break}s+=4,a=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ke(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return st=!0,Ke(n,t,f.rounding,e)};Se.decimalPlaces=Se.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-xn(this.e/et))*et,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Se.dividedBy=Se.div=function(t){return tr(this,new this.constructor(t))};Se.dividedToIntegerBy=Se.divToInt=function(t){var e=this,r=e.constructor;return Ke(tr(e,new r(t),0,1,1),r.precision,r.rounding)};Se.equals=Se.eq=function(t){return this.cmp(t)===0};Se.floor=function(){return Ke(new this.constructor(this),this.e+1,3)};Se.greaterThan=Se.gt=function(t){return this.cmp(t)>0};Se.greaterThanOrEqualTo=Se.gte=function(t){var e=this.cmp(t);return e==1||e===0};Se.hyperbolicCosine=Se.cosh=function(){var t,e,r,n,a,i=this,s=i.constructor,l=new s(1);if(!i.isFinite())return new s(i.s?1/0:NaN);if(i.isZero())return l;r=s.precision,n=s.rounding,s.precision=r+Math.max(i.e,i.sd())+4,s.rounding=1,a=i.d.length,a<32?(t=Math.ceil(a/3),e=(1/Lh(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),i=Vl(s,1,i.times(e),new s(1),!0);for(var u,o=t,c=new s(8);o--;)u=i.times(i),i=l.minus(u.times(c.minus(u.times(c))));return Ke(i,s.precision=r,s.rounding=n,!0)};Se.hyperbolicSine=Se.sinh=function(){var t,e,r,n,a=this,i=a.constructor;if(!a.isFinite()||a.isZero())return new i(a);if(e=i.precision,r=i.rounding,i.precision=e+Math.max(a.e,a.sd())+4,i.rounding=1,n=a.d.length,n<3)a=Vl(i,2,a,a,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,a=a.times(1/Lh(5,t)),a=Vl(i,2,a,a,!0);for(var s,l=new i(5),u=new i(16),o=new i(20);t--;)s=a.times(a),a=a.times(l.plus(s.times(u.times(s).plus(o))))}return i.precision=e,i.rounding=r,Ke(a,e,r,!0)};Se.hyperbolicTangent=Se.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,tr(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Se.inverseCosine=Se.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,a=e.rounding;return r!==-1?r===0?t.isNeg()?Ha(e,n,a):new e(0):new e(NaN):t.isZero()?Ha(e,n+4,a).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=a,t.times(2))};Se.inverseHyperbolicCosine=Se.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,st=!1,r=r.times(r).minus(1).sqrt().plus(r),st=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Se.inverseHyperbolicSine=Se.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,st=!1,r=r.times(r).plus(1).sqrt().plus(r),st=!0,n.precision=t,n.rounding=e,r.ln())};Se.inverseHyperbolicTangent=Se.atanh=function(){var t,e,r,n,a=this,i=a.constructor;return a.isFinite()?a.e>=0?new i(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=i.precision,e=i.rounding,n=a.sd(),Math.max(n,t)<2*-a.e-1?Ke(new i(a),t,e,!0):(i.precision=r=n-a.e,a=tr(a.plus(1),new i(1).minus(a),r+t,1),i.precision=t+4,i.rounding=1,a=a.ln(),i.precision=t,i.rounding=e,a.times(.5))):new i(NaN)};Se.inverseSine=Se.asin=function(){var t,e,r,n,a=this,i=a.constructor;return a.isZero()?new i(a):(e=a.abs().cmp(1),r=i.precision,n=i.rounding,e!==-1?e===0?(t=Ha(i,r+4,n).times(.5),t.s=a.s,t):new i(NaN):(i.precision=r+6,i.rounding=1,a=a.div(new i(1).minus(a.times(a)).sqrt().plus(1)).atan(),i.precision=r,i.rounding=n,a.times(2)))};Se.inverseTangent=Se.atan=function(){var t,e,r,n,a,i,s,l,u,o=this,c=o.constructor,f=c.precision,d=c.rounding;if(o.isFinite()){if(o.isZero())return new c(o);if(o.abs().eq(1)&&f+4<=Fg)return s=Ha(c,f+4,d).times(.25),s.s=o.s,s}else{if(!o.s)return new c(NaN);if(f+4<=Fg)return s=Ha(c,f+4,d).times(.5),s.s=o.s,s}for(c.precision=l=f+10,c.rounding=1,r=Math.min(28,l/et+2|0),t=r;t;--t)o=o.div(o.times(o).plus(1).sqrt().plus(1));for(st=!1,e=Math.ceil(l/et),n=1,u=o.times(o),s=new c(o),a=o;t!==-1;)if(a=a.times(u),i=s.minus(a.div(n+=2)),a=a.times(u),s=i.plus(a.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===i.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),st=!0,Ke(s,c.precision=f,c.rounding=d,!0)};Se.isFinite=function(){return!!this.d};Se.isInteger=Se.isInt=function(){return!!this.d&&xn(this.e/et)>this.d.length-2};Se.isNaN=function(){return!this.s};Se.isNegative=Se.isNeg=function(){return this.s<0};Se.isPositive=Se.isPos=function(){return this.s>0};Se.isZero=function(){return!!this.d&&this.d[0]===0};Se.lessThan=Se.lt=function(t){return this.cmp(t)<0};Se.lessThanOrEqualTo=Se.lte=function(t){return this.cmp(t)<1};Se.logarithm=Se.log=function(t){var e,r,n,a,i,s,l,u,o=this,c=o.constructor,f=c.precision,d=c.rounding,m=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=o.d,o.s<0||!r||!r[0]||o.eq(1))return new c(r&&!r[0]?-1/0:o.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)i=!0;else{for(a=r[0];a%10===0;)a/=10;i=a!==1}if(st=!1,l=f+m,s=Ji(o,l),n=e?Pm(c,l+10):Ji(t,l),u=tr(s,n,l,1),qc(u.d,a=f,d))do if(l+=10,s=Ji(o,l),n=e?Pm(c,l+10):Ji(t,l),u=tr(s,n,l,1),!i){+en(u.d).slice(a+1,a+15)+1==1e14&&(u=Ke(u,f+1,0));break}while(qc(u.d,a+=10,d));return st=!0,Ke(u,f,d)};Se.minus=Se.sub=function(t){var e,r,n,a,i,s,l,u,o,c,f,d,m=this,p=m.constructor;if(t=new p(t),!m.d||!t.d)return!m.s||!t.s?t=new p(NaN):m.d?t.s=-t.s:t=new p(t.d||m.s!==t.s?m:NaN),t;if(m.s!=t.s)return t.s=-t.s,m.plus(t);if(o=m.d,d=t.d,l=p.precision,u=p.rounding,!o[0]||!d[0]){if(d[0])t.s=-t.s;else if(o[0])t=new p(m);else return new p(u===3?-0:0);return st?Ke(t,l,u):t}if(r=xn(t.e/et),c=xn(m.e/et),o=o.slice(),i=c-r,i){for(f=i<0,f?(e=o,i=-i,s=d.length):(e=d,r=c,s=o.length),n=Math.max(Math.ceil(l/et),s)+2,i>n&&(i=n,e.length=1),e.reverse(),n=i;n--;)e.push(0);e.reverse()}else{for(n=o.length,s=d.length,f=n<s,f&&(s=n),n=0;n<s;n++)if(o[n]!=d[n]){f=o[n]<d[n];break}i=0}for(f&&(e=o,o=d,d=e,t.s=-t.s),s=o.length,n=d.length-s;n>0;--n)o[s++]=0;for(n=d.length;n>i;){if(o[--n]<d[n]){for(a=n;a&&o[--a]===0;)o[a]=Ta-1;--o[a],o[n]+=Ta}o[n]-=d[n]}for(;o[--s]===0;)o.pop();for(;o[0]===0;o.shift())--r;return o[0]?(t.d=o,t.e=$h(o,r),st?Ke(t,l,u):t):new p(u===3?-0:0)};Se.modulo=Se.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ke(new n(r),n.precision,n.rounding):(st=!1,n.modulo==9?(e=tr(r,t.abs(),0,3,1),e.s*=t.s):e=tr(r,t,0,n.modulo,1),e=e.times(t),st=!0,r.minus(e))};Se.naturalExponential=Se.exp=function(){return Pg(this)};Se.naturalLogarithm=Se.ln=function(){return Ji(this)};Se.negated=Se.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ke(t)};Se.plus=Se.add=function(t){var e,r,n,a,i,s,l,u,o,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(o=f.d,c=t.d,l=d.precision,u=d.rounding,!o[0]||!c[0])return c[0]||(t=new d(f)),st?Ke(t,l,u):t;if(i=xn(f.e/et),n=xn(t.e/et),o=o.slice(),a=i-n,a){for(a<0?(r=o,a=-a,s=c.length):(r=c,n=i,s=o.length),i=Math.ceil(l/et),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=o.length,a=c.length,s-a<0&&(a=s,r=c,c=o,o=r),e=0;a;)e=(o[--a]=o[a]+c[a]+e)/Ta|0,o[a]%=Ta;for(e&&(o.unshift(e),++n),s=o.length;o[--s]==0;)o.pop();return t.d=o,t.e=$h(o,n),st?Ke(t,l,u):t};Se.precision=Se.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ns+t);return r.d?(e=sM(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Se.round=function(){var t=this,e=t.constructor;return Ke(new e(t),t.e+1,e.rounding)};Se.sine=Se.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=x7(n,cM(n,r)),n.precision=t,n.rounding=e,Ke(di>2?r.neg():r,t,e,!0)):new n(NaN)};Se.squareRoot=Se.sqrt=function(){var t,e,r,n,a,i,s=this,l=s.d,u=s.e,o=s.s,c=s.constructor;if(o!==1||!l||!l[0])return new c(!o||o<0&&(!l||l[0])?NaN:l?s:1/0);for(st=!1,o=Math.sqrt(+s),o==0||o==1/0?(e=en(l),(e.length+u)%2==0&&(e+="0"),o=Math.sqrt(e),u=xn((u+1)/2)-(u<0||u%2),o==1/0?e="5e"+u:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),n=new c(e)):n=new c(o.toString()),r=(u=c.precision)+3;;)if(i=n,n=i.plus(tr(s,i,r+2,1)).times(.5),en(i.d).slice(0,r)===(e=en(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!a&&e=="4999"){if(!a&&(Ke(i,u+1,0),i.times(i).eq(s))){n=i;break}r+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ke(n,u+1,1),t=!n.times(n).eq(s));break}return st=!0,Ke(n,u,c.rounding,t)};Se.tangent=Se.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=tr(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ke(di==2||di==4?r.neg():r,t,e,!0)):new n(NaN)};Se.times=Se.mul=function(t){var e,r,n,a,i,s,l,u,o,c=this,f=c.constructor,d=c.d,m=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!m||!m[0])return new f(!t.s||d&&!d[0]&&!m||m&&!m[0]&&!d?NaN:!d||!m?t.s/0:t.s*0);for(r=xn(c.e/et)+xn(t.e/et),u=d.length,o=m.length,u<o&&(i=d,d=m,m=i,s=u,u=o,o=s),i=[],s=u+o,n=s;n--;)i.push(0);for(n=o;--n>=0;){for(e=0,a=u+n;a>n;)l=i[a]+m[n]*d[a-n-1]+e,i[a--]=l%Ta|0,e=l/Ta|0;i[a]=(i[a]+e)%Ta|0}for(;!i[--s];)i.pop();return e?++r:i.shift(),t.d=i,t.e=$h(i,r),st?Ke(t,f.precision,f.rounding):t};Se.toBinary=function(t,e){return Ly(this,2,t,e)};Se.toDecimalPlaces=Se.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Vn(t,0,Ts),e===void 0?e=n.rounding:Vn(e,0,8),Ke(r,t+r.e+1,e))};Se.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=ei(n,!0):(Vn(t,0,Ts),e===void 0?e=a.rounding:Vn(e,0,8),n=Ke(new a(n),t+1,e),r=ei(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Se.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?r=ei(a):(Vn(t,0,Ts),e===void 0?e=i.rounding:Vn(e,0,8),n=Ke(new i(a),t+a.e+1,e),r=ei(n,!1,t+n.e+1)),a.isNeg()&&!a.isZero()?"-"+r:r};Se.toFraction=function(t){var e,r,n,a,i,s,l,u,o,c,f,d,m=this,p=m.d,h=m.constructor;if(!p)return new h(m);if(o=r=new h(1),n=u=new h(0),e=new h(n),i=e.e=sM(p)-m.e-1,s=i%et,e.d[0]=Rr(10,s<0?et+s:s),t==null)t=i>0?e:o;else{if(l=new h(t),!l.isInt()||l.lt(o))throw Error(Ns+l);t=l.gt(e)?i>0?e:o:l}for(st=!1,l=new h(en(p)),c=h.precision,h.precision=i=p.length*et*2;f=tr(l,e,0,1,1),a=r.plus(f.times(n)),a.cmp(t)!=1;)r=n,n=a,a=o,o=u.plus(f.times(a)),u=a,a=e,e=l.minus(f.times(a)),l=a;return a=tr(t.minus(r),n,0,1,1),u=u.plus(a.times(o)),r=r.plus(a.times(n)),u.s=o.s=m.s,d=tr(o,n,i,1).minus(m).abs().cmp(tr(u,r,i,1).minus(m).abs())<1?[o,n]:[u,r],h.precision=c,st=!0,d};Se.toHexadecimal=Se.toHex=function(t,e){return Ly(this,16,t,e)};Se.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:Vn(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(st=!1,r=tr(r,t,0,e,1).times(t),st=!0,Ke(r)):(t.s=r.s,r=t),r};Se.toNumber=function(){return+this};Se.toOctal=function(t,e){return Ly(this,8,t,e)};Se.toPower=Se.pow=function(t){var e,r,n,a,i,s,l=this,u=l.constructor,o=+(t=new u(t));if(!l.d||!t.d||!l.d[0]||!t.d[0])return new u(Rr(+l,o));if(l=new u(l),l.eq(1))return l;if(n=u.precision,i=u.rounding,t.eq(1))return Ke(l,n,i);if(e=xn(t.e/et),e>=t.d.length-1&&(r=o<0?-o:o)<=p7)return a=oM(u,l,r,n),t.s<0?new u(1).div(a):Ke(a,n,i);if(s=l.s,s<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(s=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=s,l}return r=Rr(+l,o),e=r==0||!isFinite(r)?xn(o*(Math.log("0."+en(l.d))/Math.LN10+l.e+1)):new u(r+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(st=!1,u.rounding=l.s=1,r=Math.min(12,(e+"").length),a=Pg(t.times(Ji(l,n+r)),n),a.d&&(a=Ke(a,n+5,1),qc(a.d,n,i)&&(e=n+10,a=Ke(Pg(t.times(Ji(l,e+r)),e),e+5,1),+en(a.d).slice(n+1,n+15)+1==1e14&&(a=Ke(a,n+1,0)))),a.s=s,st=!0,u.rounding=i,Ke(a,n,i))};Se.toPrecision=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=ei(n,n.e<=a.toExpNeg||n.e>=a.toExpPos):(Vn(t,1,Ts),e===void 0?e=a.rounding:Vn(e,0,8),n=Ke(new a(n),t,e),r=ei(n,t<=n.e||n.e<=a.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Se.toSignificantDigits=Se.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Vn(t,1,Ts),e===void 0?e=n.rounding:Vn(e,0,8)),Ke(new n(r),t,e)};Se.toString=function(){var t=this,e=t.constructor,r=ei(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Se.truncated=Se.trunc=function(){return Ke(new this.constructor(this),this.e+1,1)};Se.valueOf=Se.toJSON=function(){var t=this,e=t.constructor,r=ei(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function en(t){var e,r,n,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)n=t[e]+"",r=et-n.length,r&&(i+=Vi(r)),i+=n;s=t[e],n=s+"",r=et-n.length,r&&(i+=Vi(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}function Vn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ns+t)}function qc(t,e,r,n){var a,i,s,l;for(i=t[0];i>=10;i/=10)--e;return--e<0?(e+=et,a=0):(a=Math.ceil((e+1)/et),e%=et),i=Rr(10,et-e),l=t[a]%i|0,n==null?e<3?(e==0?l=l/100|0:e==1&&(l=l/10|0),s=r<4&&l==99999||r>3&&l==49999||l==5e4||l==0):s=(r<4&&l+1==i||r>3&&l+1==i/2)&&(t[a+1]/i/100|0)==Rr(10,e-2)-1||(l==i/2||l==0)&&(t[a+1]/i/100|0)==0:e<4?(e==0?l=l/1e3|0:e==1?l=l/100|0:e==2&&(l=l/10|0),s=(n||r<4)&&l==9999||!n&&r>3&&l==4999):s=((n||r<4)&&l+1==i||!n&&r>3&&l+1==i/2)&&(t[a+1]/i/1e3|0)==Rr(10,e-3)-1,s}function zd(t,e,r){for(var n,a=[0],i,s=0,l=t.length;s<l;){for(i=a.length;i--;)a[i]*=e;for(a[0]+=Mg.indexOf(t.charAt(s++)),n=0;n<a.length;n++)a[n]>r-1&&(a[n+1]===void 0&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}function g7(t,e){var r,n,a;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),a=(1/Lh(4,r)).toString()):(r=16,a="2.3283064365386962890625e-10"),t.precision+=r,e=Vl(t,1,e.times(a),new t(1));for(var i=r;i--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var tr=function(){function t(n,a,i){var s,l=0,u=n.length;for(n=n.slice();u--;)s=n[u]*a+l,n[u]=s%i|0,l=s/i|0;return l&&n.unshift(l),n}function e(n,a,i,s){var l,u;if(i!=s)u=i>s?1:-1;else for(l=u=0;l<i;l++)if(n[l]!=a[l]){u=n[l]>a[l]?1:-1;break}return u}function r(n,a,i,s){for(var l=0;i--;)n[i]-=l,l=n[i]<a[i]?1:0,n[i]=l*s+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s,l,u){var o,c,f,d,m,p,h,D,w,S,x,b,N,g,y,_,E,C,T,M,I=n.constructor,j=n.s==a.s?1:-1,O=n.d,P=a.d;if(!O||!O[0]||!P||!P[0])return new I(!n.s||!a.s||(O?P&&O[0]==P[0]:!P)?NaN:O&&O[0]==0||!P?j*0:j/0);for(u?(m=1,c=n.e-a.e):(u=Ta,m=et,c=xn(n.e/m)-xn(a.e/m)),T=P.length,E=O.length,w=new I(j),S=w.d=[],f=0;P[f]==(O[f]||0);f++);if(P[f]>(O[f]||0)&&c--,i==null?(g=i=I.precision,s=I.rounding):l?g=i+(n.e-a.e)+1:g=i,g<0)S.push(1),p=!0;else{if(g=g/m+2|0,f=0,T==1){for(d=0,P=P[0],g++;(f<E||d)&&g--;f++)y=d*u+(O[f]||0),S[f]=y/P|0,d=y%P|0;p=d||f<E}else{for(d=u/(P[0]+1)|0,d>1&&(P=t(P,d,u),O=t(O,d,u),T=P.length,E=O.length),_=T,x=O.slice(0,T),b=x.length;b<T;)x[b++]=0;M=P.slice(),M.unshift(0),C=P[0],P[1]>=u/2&&++C;do d=0,o=e(P,x,T,b),o<0?(N=x[0],T!=b&&(N=N*u+(x[1]||0)),d=N/C|0,d>1?(d>=u&&(d=u-1),h=t(P,d,u),D=h.length,b=x.length,o=e(h,x,D,b),o==1&&(d--,r(h,T<D?M:P,D,u))):(d==0&&(o=d=1),h=P.slice()),D=h.length,D<b&&h.unshift(0),r(x,h,b,u),o==-1&&(b=x.length,o=e(P,x,T,b),o<1&&(d++,r(x,T<b?M:P,b,u))),b=x.length):o===0&&(d++,x=[0]),S[f++]=d,o&&x[0]?x[b++]=O[_]||0:(x=[O[_]],b=1);while((_++<E||x[0]!==void 0)&&g--);p=x[0]!==void 0}S[0]||S.shift()}if(m==1)w.e=c,tM=p;else{for(f=1,d=S[0];d>=10;d/=10)f++;w.e=f+c*m-1,Ke(w,l?i+w.e+1:i,s,p)}return w}}();function Ke(t,e,r,n){var a,i,s,l,u,o,c,f,d,m=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(a=1,l=f[0];l>=10;l/=10)a++;if(i=e-a,i<0)i+=et,s=e,c=f[d=0],u=c/Rr(10,a-s-1)%10|0;else if(d=Math.ceil((i+1)/et),l=f.length,d>=l)if(n){for(;l++<=d;)f.push(0);c=u=0,a=1,i%=et,s=i-et+1}else break e;else{for(c=l=f[d],a=1;l>=10;l/=10)a++;i%=et,s=i-et+a,u=s<0?0:c/Rr(10,a-s-1)%10|0}if(n=n||e<0||f[d+1]!==void 0||(s<0?c:c%Rr(10,a-s-1)),o=r<4?(u||n)&&(r==0||r==(t.s<0?3:2)):u>5||u==5&&(r==4||n||r==6&&(i>0?s>0?c/Rr(10,a-s):0:f[d-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,o?(e-=t.e+1,f[0]=Rr(10,(et-e%et)%et),t.e=-e||0):f[0]=t.e=0,t;if(i==0?(f.length=d,l=1,d--):(f.length=d+1,l=Rr(10,et-i),f[d]=s>0?(c/Rr(10,a-s)%Rr(10,s)|0)*l:0),o)for(;;)if(d==0){for(i=1,s=f[0];s>=10;s/=10)i++;for(s=f[0]+=l,l=1;s>=10;s/=10)l++;i!=l&&(t.e++,f[0]==Ta&&(f[0]=1));break}else{if(f[d]+=l,f[d]!=Ta)break;f[d--]=0,l=1}for(i=f.length;f[--i]===0;)f.pop()}return st&&(t.e>m.maxE?(t.d=null,t.e=NaN):t.e<m.minE&&(t.e=0,t.d=[0])),t}function ei(t,e,r){if(!t.isFinite())return uM(t);var n,a=t.e,i=en(t.d),s=i.length;return e?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Vi(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(t.e<0?"e":"e+")+t.e):a<0?(i="0."+Vi(-a-1)+i,r&&(n=r-s)>0&&(i+=Vi(n))):a>=s?(i+=Vi(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Vi(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Vi(n))),i}function $h(t,e){var r=t[0];for(e*=et;r>=10;r/=10)e++;return e}function Pm(t,e,r){if(e>v7)throw st=!0,r&&(t.precision=r),Error(rM);return Ke(new t(Im),e,1,!0)}function Ha(t,e,r){if(e>Fg)throw Error(rM);return Ke(new t(Fm),e,r,!0)}function sM(t){var e=t.length-1,r=e*et+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Vi(t){for(var e="";t--;)e+="0";return e}function oM(t,e,r,n){var a,i=new t(1),s=Math.ceil(n/et+4);for(st=!1;;){if(r%2&&(i=i.times(e),JN(i.d,s)&&(a=!0)),r=xn(r/2),r===0){r=i.d.length-1,a&&i.d[r]===0&&++i.d[r];break}e=e.times(e),JN(e.d,s)}return st=!0,i}function KN(t){return t.d[t.d.length-1]&1}function lM(t,e,r){for(var n,a,i=new t(e[0]),s=0;++s<e.length;){if(a=new t(e[s]),!a.s){i=a;break}n=i.cmp(a),(n===r||n===0&&i.s===r)&&(i=a)}return i}function Pg(t,e){var r,n,a,i,s,l,u,o=0,c=0,f=0,d=t.constructor,m=d.rounding,p=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(st=!1,u=p):u=e,l=new d(.03125);t.e>-2;)t=t.times(l),f+=5;for(n=Math.log(Rr(2,f))/Math.LN10*2+5|0,u+=n,r=i=s=new d(1),d.precision=u;;){if(i=Ke(i.times(t),u,1),r=r.times(++c),l=s.plus(tr(i,r,u,1)),en(l.d).slice(0,u)===en(s.d).slice(0,u)){for(a=f;a--;)s=Ke(s.times(s),u,1);if(e==null)if(o<3&&qc(s.d,u-n,m,o))d.precision=u+=10,r=i=l=new d(1),c=0,o++;else return Ke(s,d.precision=p,m,st=!0);else return d.precision=p,s}s=l}}function Ji(t,e){var r,n,a,i,s,l,u,o,c,f,d,m=1,p=10,h=t,D=h.d,w=h.constructor,S=w.rounding,x=w.precision;if(h.s<0||!D||!D[0]||!h.e&&D[0]==1&&D.length==1)return new w(D&&!D[0]?-1/0:h.s!=1?NaN:D?0:h);if(e==null?(st=!1,c=x):c=e,w.precision=c+=p,r=en(D),n=r.charAt(0),Math.abs(i=h.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=en(h.d),n=r.charAt(0),m++;i=h.e,n>1?(h=new w("0."+r),i++):h=new w(n+"."+r.slice(1))}else return o=Pm(w,c+2,x).times(i+""),h=Ji(new w(n+"."+r.slice(1)),c-p).plus(o),w.precision=x,e==null?Ke(h,x,S,st=!0):h;for(f=h,u=s=h=tr(h.minus(1),h.plus(1),c,1),d=Ke(h.times(h),c,1),a=3;;){if(s=Ke(s.times(d),c,1),o=u.plus(tr(s,new w(a),c,1)),en(o.d).slice(0,c)===en(u.d).slice(0,c))if(u=u.times(2),i!==0&&(u=u.plus(Pm(w,c+2,x).times(i+""))),u=tr(u,new w(m),c,1),e==null)if(qc(u.d,c-p,S,l))w.precision=c+=p,o=s=h=tr(f.minus(1),f.plus(1),c,1),d=Ke(h.times(h),c,1),a=l=1;else return Ke(u,w.precision=x,S,st=!0);else return w.precision=x,u;u=o,a+=2}}function uM(t){return String(t.s*t.s/0)}function Vd(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(n,a),e){if(a-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%et,r<0&&(n+=et),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=et;n<a;)t.d.push(+e.slice(n,n+=et));e=e.slice(n),n=et-e.length}else n-=a;for(;n--;)e+="0";t.d.push(+e),st&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function y7(t,e){var r,n,a,i,s,l,u,o,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),iM.test(e))return Vd(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(m7.test(e))r=16,e=e.toLowerCase();else if(d7.test(e))r=2;else if(h7.test(e))r=8;else throw Error(Ns+e);for(i=e.search(/p/i),i>0?(u=+e.slice(i+1),e=e.substring(2,i)):e=e.slice(2),i=e.indexOf("."),s=i>=0,n=t.constructor,s&&(e=e.replace(".",""),l=e.length,i=l-i,a=oM(n,new n(r),i,i*2)),o=zd(e,r,Ta),c=o.length-1,i=c;o[i]===0;--i)o.pop();return i<0?new n(t.s*0):(t.e=$h(o,c),t.d=o,st=!1,s&&(t=tr(t,a,l*4)),u&&(t=t.times(Math.abs(u)<54?Rr(2,u):_s.pow(2,u))),st=!0,t)}function x7(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Vl(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/Lh(5,r)),e=Vl(t,2,e,e);for(var a,i=new t(5),s=new t(16),l=new t(20);r--;)a=e.times(e),e=e.times(i.plus(a.times(s.times(a).minus(l))));return e}function Vl(t,e,r,n,a){var i,s,l,u,o=t.precision,c=Math.ceil(o/et);for(st=!1,u=r.times(r),l=new t(n);;){if(s=tr(l.times(u),new t(e++*e++),o,1),l=a?n.plus(s):n.minus(s),n=tr(s.times(u),new t(e++*e++),o,1),s=l.plus(n),s.d[c]!==void 0){for(i=c;s.d[i]===l.d[i]&&i--;);if(i==-1)break}i=l,l=n,n=s,s=i}return st=!0,s.d.length=c+1,s}function Lh(t,e){for(var r=t;--e;)r*=t;return r}function cM(t,e){var r,n=e.s<0,a=Ha(t,t.precision,1),i=a.times(.5);if(e=e.abs(),e.lte(i))return di=n?4:1,e;if(r=e.divToInt(a),r.isZero())di=n?3:2;else{if(e=e.minus(r.times(a)),e.lte(i))return di=KN(r)?n?2:3:n?4:1,e;di=KN(r)?n?1:4:n?3:2}return e.minus(a).abs()}function Ly(t,e,r,n){var a,i,s,l,u,o,c,f,d,m=t.constructor,p=r!==void 0;if(p?(Vn(r,1,Ts),n===void 0?n=m.rounding:Vn(n,0,8)):(r=m.precision,n=m.rounding),!t.isFinite())c=uM(t);else{for(c=ei(t),s=c.indexOf("."),p?(a=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):a=e,s>=0&&(c=c.replace(".",""),d=new m(1),d.e=c.length-s,d.d=zd(ei(d),10,a),d.e=d.d.length),f=zd(c,10,a),i=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(s<0?i--:(t=new m(t),t.d=f,t.e=i,t=tr(t,d,r,n,0,a),f=t.d,i=t.e,o=tM),s=f[r],l=a/2,o=o||f[r+1]!==void 0,o=n<4?(s!==void 0||o)&&(n===0||n===(t.s<0?3:2)):s>l||s===l&&(n===4||o||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,o)for(;++f[--r]>a-1;)f[r]=0,r||(++i,f.unshift(1));for(u=f.length;!f[u-1];--u);for(s=0,c="";s<u;s++)c+=Mg.charAt(f[s]);if(p){if(u>1)if(e==16||e==8){for(s=e==16?4:3,--u;u%s;u++)c+="0";for(f=zd(c,a,e),u=f.length;!f[u-1];--u);for(s=1,c="1.";s<u;s++)c+=Mg.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)c="0"+c;c="0."+c}else if(++i>u)for(i-=u;i--;)c+="0";else i<u&&(c=c.slice(0,i)+"."+c.slice(i))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function JN(t,e){if(t.length>e)return t.length=e,!0}function b7(t){return new this(t).abs()}function w7(t){return new this(t).acos()}function N7(t){return new this(t).acosh()}function _7(t,e){return new this(t).plus(e)}function S7(t){return new this(t).asin()}function E7(t){return new this(t).asinh()}function A7(t){return new this(t).atan()}function D7(t){return new this(t).atanh()}function C7(t,e){t=new this(t),e=new this(e);var r,n=this.precision,a=this.rounding,i=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Ha(this,i,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Ha(this,n,a):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Ha(this,i,1).times(.5),r.s=t.s):e.s<0?(this.precision=i,this.rounding=1,r=this.atan(tr(t,e,i,1)),e=Ha(this,i,1),this.precision=n,this.rounding=a,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(tr(t,e,i,1)),r}function T7(t){return new this(t).cbrt()}function M7(t){return Ke(t=new this(t),t.e+1,2)}function I7(t,e,r){return new this(t).clamp(e,r)}function F7(t){if(!t||typeof t!="object")throw Error(kh+"Object expected");var e,r,n,a=t.defaults===!0,i=["precision",1,Ts,"rounding",0,8,"toExpNeg",-fl,0,"toExpPos",0,fl,"maxE",0,fl,"minE",-fl,0,"modulo",0,9];for(e=0;e<i.length;e+=3)if(r=i[e],a&&(this[r]=Ig[r]),(n=t[r])!==void 0)if(xn(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Ns+r+": "+n);if(r="crypto",a&&(this[r]=Ig[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(nM);else this[r]=!1;else throw Error(Ns+r+": "+n);return this}function P7(t){return new this(t).cos()}function R7(t){return new this(t).cosh()}function fM(t){var e,r,n;function a(i){var s,l,u,o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,YN(i)){o.s=i.s,st?!i.d||i.e>a.maxE?(o.e=NaN,o.d=null):i.e<a.minE?(o.e=0,o.d=[0]):(o.e=i.e,o.d=i.d.slice()):(o.e=i.e,o.d=i.d?i.d.slice():i.d);return}if(u=typeof i,u==="number"){if(i===0){o.s=1/i<0?-1:1,o.e=0,o.d=[0];return}if(i<0?(i=-i,o.s=-1):o.s=1,i===~~i&&i<1e7){for(s=0,l=i;l>=10;l/=10)s++;st?s>a.maxE?(o.e=NaN,o.d=null):s<a.minE?(o.e=0,o.d=[0]):(o.e=s,o.d=[i]):(o.e=s,o.d=[i]);return}if(i*0!==0){i||(o.s=NaN),o.e=NaN,o.d=null;return}return Vd(o,i.toString())}if(u==="string")return(l=i.charCodeAt(0))===45?(i=i.slice(1),o.s=-1):(l===43&&(i=i.slice(1)),o.s=1),iM.test(i)?Vd(o,i):y7(o,i);if(u==="bigint")return i<0?(i=-i,o.s=-1):o.s=1,Vd(o,i.toString());throw Error(Ns+i)}if(a.prototype=Se,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=F7,a.clone=fM,a.isDecimal=YN,a.abs=b7,a.acos=w7,a.acosh=N7,a.add=_7,a.asin=S7,a.asinh=E7,a.atan=A7,a.atanh=D7,a.atan2=C7,a.cbrt=T7,a.ceil=M7,a.clamp=I7,a.cos=P7,a.cosh=R7,a.div=O7,a.exp=B7,a.floor=j7,a.hypot=k7,a.ln=$7,a.log=L7,a.log10=V7,a.log2=z7,a.max=U7,a.min=q7,a.mod=H7,a.mul=G7,a.pow=W7,a.random=Q7,a.round=X7,a.sign=K7,a.sin=J7,a.sinh=Y7,a.sqrt=Z7,a.sub=e$,a.sum=t$,a.tan=r$,a.tanh=n$,a.trunc=a$,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function O7(t,e){return new this(t).div(e)}function B7(t){return new this(t).exp()}function j7(t){return Ke(t=new this(t),t.e+1,3)}function k7(){var t,e,r=new this(0);for(st=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return st=!0,new this(1/0);r=e}return st=!0,r.sqrt()}function YN(t){return t instanceof _s||t&&t.toStringTag===aM||!1}function $7(t){return new this(t).ln()}function L7(t,e){return new this(t).log(e)}function z7(t){return new this(t).log(2)}function V7(t){return new this(t).log(10)}function U7(){return lM(this,arguments,-1)}function q7(){return lM(this,arguments,1)}function H7(t,e){return new this(t).mod(e)}function G7(t,e){return new this(t).mul(e)}function W7(t,e){return new this(t).pow(e)}function Q7(t){var e,r,n,a,i=0,s=new this(1),l=[];if(t===void 0?t=this.precision:Vn(t,1,Ts),n=Math.ceil(t/et),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));i<n;)a=e[i],a>=429e7?e[i]=crypto.getRandomValues(new Uint32Array(1))[0]:l[i++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);i<n;)a=e[i]+(e[i+1]<<8)+(e[i+2]<<16)+((e[i+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,i):(l.push(a%1e7),i+=4);i=n/4}else throw Error(nM);else for(;i<n;)l[i++]=Math.random()*1e7|0;for(n=l[--i],t%=et,n&&t&&(a=Rr(10,et-t),l[i]=(n/a|0)*a);l[i]===0;i--)l.pop();if(i<0)r=0,l=[0];else{for(r=-1;l[0]===0;r-=et)l.shift();for(n=1,a=l[0];a>=10;a/=10)n++;n<et&&(r-=et-n)}return s.e=r,s.d=l,s}function X7(t){return Ke(t=new this(t),t.e+1,this.rounding)}function K7(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function J7(t){return new this(t).sin()}function Y7(t){return new this(t).sinh()}function Z7(t){return new this(t).sqrt()}function e$(t,e){return new this(t).sub(e)}function t$(){var t=0,e=arguments,r=new this(e[t]);for(st=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return st=!0,Ke(r,this.precision,this.rounding)}function r$(t){return new this(t).tan()}function n$(t){return new this(t).tanh()}function a$(t){return Ke(t=new this(t),t.e+1,1)}Se[Symbol.for("nodejs.util.inspect.custom")]=Se.toString;Se[Symbol.toStringTag]="Decimal";var _s=Se.constructor=fM(Ig);Im=new _s(Im);Fm=new _s(Fm);var i$="BigNumber",s$=["?on","config"],o$=q(i$,s$,t=>{var{on:e,config:r}=t,n=_s.clone({precision:r.precision,modulo:_s.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(a){return new n(a.value)},e&&e("config",function(a,i){a.precision!==i.precision&&n.config({precision:a.precision})}),n},{isClass:!0});const dn=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},na=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},l$=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},nv=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},qo=function(){throw SyntaxError("Invalid Param")};function av(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const u$={re:0,im:0},Xs=function(t,e){const r=u$;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return xe.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return xe.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):qo();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,i=0;n===null&&qo();for(let s=0;s<n.length;s++){const l=n[s];l===" "||l==="	"||l===`
`||(l==="+"?a++:l==="-"?i++:l==="i"||l==="I"?(a+i===0&&qo(),n[s+1]!==" "&&!isNaN(n[s+1])?(r.im+=parseFloat((i%2?"-":"")+n[s+1]),s++):r.im+=parseFloat((i%2?"-":"")+"1"),a=i=0):((a+i===0||isNaN(l))&&qo(),n[s+1]==="i"||n[s+1]==="I"?(r.im+=parseFloat((i%2?"-":"")+l),s++):r.re+=parseFloat((i%2?"-":"")+l),a=i=0))}a+i>0&&qo();break;case"number":r.im=0,r.re=t;break;default:qo()}return isNaN(r.re)||isNaN(r.im),r};function xe(t,e){if(!(this instanceof xe))return new xe(t,e);const r=Xs(t,e);this.re=r.re,this.im=r.im}xe.prototype={re:0,im:0,sign:function(){const t=nv(this.re,this.im);return new xe(this.re/t,this.im/t)},add:function(t,e){const r=Xs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?xe.NAN:xe.INFINITY:new xe(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=Xs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?xe.NAN:xe.INFINITY:new xe(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=Xs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),i=this.re===0&&this.im===0,s=r.re===0&&r.im===0;return n&&s||a&&i?xe.NAN:n||a?xe.INFINITY:r.im===0&&this.im===0?new xe(this.re*r.re,0):new xe(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=Xs(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),i=this.re===0&&this.im===0,s=r.re===0&&r.im===0;if(i&&s||n&&a)return xe.NAN;if(s||n)return xe.INFINITY;if(i||a)return xe.ZERO;if(r.im===0)return new xe(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const l=r.re/r.im,u=r.re*l+r.im;return new xe((this.re*l+this.im)/u,(this.im*l-this.re)/u)}else{const l=r.im/r.re,u=r.im*l+r.re;return new xe((this.re+this.im*l)/u,(this.im-this.re*l)/u)}},pow:function(t,e){const r=Xs(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return xe.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new xe(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new xe(Math.pow(this.im,r.re),0);case 1:return new xe(0,Math.pow(this.im,r.re));case 2:return new xe(-Math.pow(this.im,r.re),0);case 3:return new xe(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return xe.ZERO;const i=Math.atan2(this.im,this.re),s=av(this.re,this.im);let l=Math.exp(r.re*s-r.im*i),u=r.im*s+r.re*i;return new xe(l*Math.cos(u),l*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new xe(Math.sqrt(t),0):new xe(0,Math.sqrt(-t));const r=nv(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),a=Math.abs(e)/(2*n);return t>=0?new xe(n,e<0?-a:a):new xe(a,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new xe(t,0):new xe(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new xe(Math.expm1(t)*Math.cos(e)+l$(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new xe(Math.log(t),0):new xe(av(t,e),Math.atan2(e,t))},abs:function(){return nv(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new xe(Math.sin(t)*dn(e),Math.cos(t)*na(e))},cos:function(){const t=this.re,e=this.im;return new xe(Math.cos(t)*dn(e),-Math.sin(t)*na(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+dn(e);return new xe(Math.sin(t)/r,na(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-dn(e);return new xe(-Math.sin(t)/r,na(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*dn(2*e)+.5*Math.cos(2*t);return new xe(Math.cos(t)*dn(e)/r,Math.sin(t)*na(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*dn(2*e)-.5*Math.cos(2*t);return new xe(Math.sin(t)*dn(e)/r,-Math.cos(t)*na(e)/r)},asin:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new xe(e*e-t*t+1,-2*t*e).sqrt(),n=new xe(r.re-e,r.im+t).log();return new xe(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new xe(0,1/0);if(e===-1)return new xe(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new xe((1-e*e-t*t)/r,-2*t/r).log();return new xe(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new xe(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atan():new xe(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acos():new xe(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asin():new xe(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new xe(na(t)*Math.cos(e),dn(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new xe(dn(t)*Math.cos(e),na(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=dn(t)+Math.cos(e);return new xe(na(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=dn(t)-Math.cos(e);return new xe(na(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-dn(2*t);return new xe(-2*na(t)*Math.cos(e)/r,2*dn(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+dn(2*t);return new xe(2*dn(t)*Math.cos(e)/r,-2*na(t)*Math.sin(e)/r)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,r=t>1&&e===0,n=1-t,a=1+t,i=n*n+e*e,s=i!==0?new xe((a*n-e*e)/i,(e*n+a*e)/i):new xe(t!==-1?t/0:0,e!==0?e/0:0),l=s.re;return s.re=av(s.re,s.im)/2,s.im=Math.atan2(s.im,l)/2,r&&(s.im=-s.im),s},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new xe(0,Math.PI/2);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).atanh():new xe(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new xe(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).asinh():new xe(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return xe.INFINITY;const r=t*t+e*e;return r!==0?new xe(t/r,-e/r).acosh():new xe(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return xe.INFINITY;if(this.isInfinite())return xe.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new xe(t/r,-e/r)},conjugate:function(){return new xe(this.re,-this.im)},neg:function(){return new xe(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new xe(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new xe(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new xe(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=Xs(t,e);return Math.abs(r.re-this.re)<=xe.EPSILON&&Math.abs(r.im-this.im)<=xe.EPSILON},clone:function(){return new xe(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<xe.EPSILON&&(t=0),Math.abs(e)<xe.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};xe.ZERO=new xe(0,0);xe.ONE=new xe(1,0);xe.I=new xe(0,1);xe.PI=new xe(Math.PI,0);xe.E=new xe(Math.E,0);xe.INFINITY=new xe(1/0,1/0);xe.NAN=new xe(NaN,NaN);xe.EPSILON=1e-15;var c$="Complex",f$=[],d$=q(c$,f$,()=>(Object.defineProperty(xe,"name",{value:"Complex"}),xe.prototype.constructor=xe,xe.prototype.type="Complex",xe.prototype.isComplex=!0,xe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xe.prototype.format=function(t){var e="",r=this.im,n=this.re,a=io(this.re,t),i=io(this.im,t),s=Xe(t)?t:t?t.precision:null;if(s!==null){var l=Math.pow(10,-s);Math.abs(n/r)<l&&(n=0),Math.abs(r/n)<l&&(r=0)}return r===0?e=a:n===0?r===1?e="i":r===-1?e="-i":e=i+"i":r<0?r===-1?e=a+" - i":e=a+" - "+i.substring(1)+"i":r===1?e=a+" + i":e=a+" + "+i+"i",e},xe.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return xe(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Xe(r)){if(Wn(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Xe(n))return new xe({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xe.prototype.valueOf=xe.prototype.toString,xe.fromJSON=function(t){return new xe(t)},xe.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},xe),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Qe=BigInt(0),xt=BigInt(1),qr=BigInt(2),fc=BigInt(3),dl=BigInt(5),Rn=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const m$=2e3,je={s:xt,n:Qe,d:xt};function si(t,e){try{t=BigInt(t)}catch{throw $i()}return t*e}function wa(t){return typeof t=="bigint"?t:Math.floor(t)}function ur(t,e){if(e===Qe)throw zy();const r=Object.create(aa.prototype);r.s=t<Qe?-xt:xt,t=t<Qe?-t:t;const n=Ks(t,e);return r.n=t/n,r.d=e/n,r}const h$=[qr*qr,qr,qr*qr,qr,qr*qr,qr*fc,qr,qr*fc];function Ho(t){const e=Object.create(null);if(t<=xt)return e[t]=xt,e;const r=n=>{e[n]=(e[n]||Qe)+xt};for(;t%qr===Qe;)r(qr),t/=qr;for(;t%fc===Qe;)r(fc),t/=fc;for(;t%dl===Qe;)r(dl),t/=dl;for(let n=0,a=qr+dl;a*a<=t;){for(;t%a===Qe;)r(a),t/=a;a+=h$[n],n=n+1&7}return t>xt&&r(t),e}const Ur=function(t,e){let r=Qe,n=xt,a=xt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw $i();if(t%1!==0)throw ZN();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw $i();if(e%1!==0)throw ZN();n=BigInt(e)}a=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw $i();a=r*n}else if(typeof t=="number"){if(isNaN(t))throw $i();if(t<0&&(a=-xt,t=-t),t%1===0)r=BigInt(t);else{let i=1,s=0,l=1,u=1,o=1,c=1e7;for(t>=1&&(i=10**Math.floor(1+Math.log10(t)),t/=i);l<=c&&o<=c;){let f=(s+u)/(l+o);if(t===f){l+o<=c?(r=s+u,n=l+o):o>l?(r=u,n=o):(r=s,n=l);break}else t>f?(s+=u,l+=o):(u+=s,o+=l),l>c?(r=u,n=o):(r=s,n=l)}r=BigInt(r)*BigInt(i),n=BigInt(n)}}else if(typeof t=="string"){let i=0,s=Qe,l=Qe,u=Qe,o=xt,c=xt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw $i();if(f[i]==="-"?(a=-xt,i++):f[i]==="+"&&i++,f.length===i+1?l=si(f[i++],a):f[i+1]==="."||f[i]==="."?(f[i]!=="."&&(s=si(f[i++],a)),i++,(i+1===f.length||f[i+1]==="("&&f[i+3]===")"||f[i+1]==="'"&&f[i+3]==="'")&&(l=si(f[i],a),o=Rn**BigInt(f[i].length),i++),(f[i]==="("&&f[i+2]===")"||f[i]==="'"&&f[i+2]==="'")&&(u=si(f[i+1],a),c=Rn**BigInt(f[i+1].length)-xt,i+=3)):f[i+1]==="/"||f[i+1]===":"?(l=si(f[i],a),o=si(f[i+2],xt),i+=3):f[i+3]==="/"&&f[i+1]===" "&&(s=si(f[i],a),l=si(f[i+2],a),o=si(f[i+4],xt),i+=5),f.length<=i)n=o*c,a=r=u+n*s+c*l;else throw $i()}else if(typeof t=="bigint")r=t,a=t,n=xt;else throw $i();if(n===Qe)throw zy();je.s=a<Qe?-xt:xt,je.n=r<Qe?-r:r,je.d=n<Qe?-n:n};function p$(t,e,r){let n=xt;for(;e>Qe;t=t*t%r,e>>=xt)e&xt&&(n=n*t%r);return n}function v$(t,e){for(;e%qr===Qe;e/=qr);for(;e%dl===Qe;e/=dl);if(e===xt)return Qe;let r=Rn%e,n=1;for(;r!==xt;n++)if(r=r*Rn%e,n>m$)return Qe;return BigInt(n)}function g$(t,e,r){let n=xt,a=p$(Rn,r,e);for(let i=0;i<300;i++){if(n===a)return BigInt(i);n=n*Rn%e,a=a*Rn%e}return 0}function Ks(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function aa(t,e){if(Ur(t,e),this instanceof aa)t=Ks(je.d,je.n),this.s=je.s,this.n=je.n/t,this.d=je.d/t;else return ur(je.s*je.n,je.d)}const zy=function(){return new Error("Division by Zero")},$i=function(){return new Error("Invalid argument")},ZN=function(){return new Error("Parameters must be integer")};aa.prototype={s:xt,n:Qe,d:xt,abs:function(){return ur(this.n,this.d)},neg:function(){return ur(-this.s*this.n,this.d)},add:function(t,e){return Ur(t,e),ur(this.s*this.n*je.d+je.s*this.d*je.n,this.d*je.d)},sub:function(t,e){return Ur(t,e),ur(this.s*this.n*je.d-je.s*this.d*je.n,this.d*je.d)},mul:function(t,e){return Ur(t,e),ur(this.s*je.s*this.n*je.n,this.d*je.d)},div:function(t,e){return Ur(t,e),ur(this.s*je.s*this.n*je.d,this.d*je.n)},clone:function(){return ur(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return ur(this.s*this.n%this.d,xt);if(Ur(t,e),Qe===je.n*this.d)throw zy();return ur(this.s*(je.d*this.n)%(je.n*this.d),je.d*this.d)},gcd:function(t,e){return Ur(t,e),ur(Ks(je.n,this.n)*Ks(je.d,this.d),je.d*this.d)},lcm:function(t,e){return Ur(t,e),je.n===Qe&&this.n===Qe?ur(Qe,xt):ur(je.n*this.n,Ks(je.n,this.n)*Ks(je.d,this.d))},inverse:function(){return ur(this.s*this.d,this.n)},pow:function(t,e){if(Ur(t,e),je.d===xt)return je.s<Qe?ur((this.s*this.d)**je.n,this.n**je.n):ur((this.s*this.n)**je.n,this.d**je.n);if(this.s<Qe)return null;let r=Ho(this.n),n=Ho(this.d),a=xt,i=xt;for(let s in r)if(s!=="1"){if(s==="0"){a=Qe;break}if(r[s]*=je.n,r[s]%je.d===Qe)r[s]/=je.d;else return null;a*=BigInt(s)**r[s]}for(let s in n)if(s!=="1"){if(n[s]*=je.n,n[s]%je.d===Qe)n[s]/=je.d;else return null;i*=BigInt(s)**n[s]}return je.s<Qe?ur(i,a):ur(a,i)},log:function(t,e){if(Ur(t,e),this.s<=Qe||je.s<=Qe)return null;const r=Object.create(null),n=Ho(je.n),a=Ho(je.d),i=Ho(this.n),s=Ho(this.d);for(const o in a)n[o]=(n[o]||Qe)-a[o];for(const o in s)i[o]=(i[o]||Qe)-s[o];for(const o in n)o!=="1"&&(r[o]=!0);for(const o in i)o!=="1"&&(r[o]=!0);let l=null,u=null;for(const o in r){const c=n[o]||Qe,f=i[o]||Qe;if(c===Qe){if(f!==Qe)return null;continue}let d=f,m=c;const p=Ks(d,m);if(d/=p,m/=p,l===null&&u===null)l=d,u=m;else if(d*u!==l*m)return null}return l!==null&&u!==null?ur(l,u):null},equals:function(t,e){return Ur(t,e),this.s*this.n*je.d===je.s*je.n*this.d},lt:function(t,e){return Ur(t,e),this.s*this.n*je.d<je.s*je.n*this.d},lte:function(t,e){return Ur(t,e),this.s*this.n*je.d<=je.s*je.n*this.d},gt:function(t,e){return Ur(t,e),this.s*this.n*je.d>je.s*je.n*this.d},gte:function(t,e){return Ur(t,e),this.s*this.n*je.d>=je.s*je.n*this.d},compare:function(t,e){Ur(t,e);let r=this.s*this.n*je.d-je.s*je.n*this.d;return(Qe<r)-(r<Qe)},ceil:function(t){return t=Rn**BigInt(t||0),ur(wa(this.s*t*this.n/this.d)+(t*this.n%this.d>Qe&&this.s>=Qe?xt:Qe),t)},floor:function(t){return t=Rn**BigInt(t||0),ur(wa(this.s*t*this.n/this.d)-(t*this.n%this.d>Qe&&this.s<Qe?xt:Qe),t)},round:function(t){return t=Rn**BigInt(t||0),ur(wa(this.s*t*this.n/this.d)+this.s*((this.s>=Qe?xt:Qe)+qr*(t*this.n%this.d)>this.d?xt:Qe),t)},roundTo:function(t,e){Ur(t,e);const r=this.n*je.d,n=this.d*je.n,a=r%n;let i=wa(r/n);return a+a>=n&&i++,ur(this.s*i*je.n,je.d)},divisible:function(t,e){return Ur(t,e),je.n===Qe?!1:this.n*je.d%(je.n*this.d)===Qe},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,r=this.d,n=v$(e,r),a=g$(e,r,n),i=this.s<Qe?"-":"";if(i+=wa(e/r),e%=r,e*=Rn,e&&(i+="."),n){for(let s=a;s--;)i+=wa(e/r),e%=r,e*=Rn;i+="(";for(let s=n;s--;)i+=wa(e/r),e%=r,e*=Rn;i+=")"}else for(let s=t;e&&s--;)i+=wa(e/r),e%=r,e*=Rn;return i},toFraction:function(t=!1){let e=this.n,r=this.d,n=this.s<Qe?"-":"";if(r===xt)n+=e;else{const a=wa(e/r);t&&a>Qe&&(n+=a,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t=!1){let e=this.n,r=this.d,n=this.s<Qe?"-":"";if(r===xt)n+=e;else{const a=wa(e/r);t&&a>Qe&&(n+=a,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d;const r=[];for(;e;){r.push(wa(t/e));const n=t%e;t=e,e=n}return r},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),r=this.abs(),n=r.toContinued();for(let a=1;a<n.length;a++){let i=ur(n[a-1],xt);for(let l=a-2;l>=0;l--)i=i.inverse().add(n[l]);let s=i.sub(r);if(s.n*e<s.d)return i.mul(this.s)}return this}};var y$="Fraction",x$=[],b$=q(y$,x$,()=>(Object.defineProperty(aa,"name",{value:"Fraction"}),aa.prototype.constructor=aa,aa.prototype.type="Fraction",aa.prototype.isFraction=!0,aa.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},aa.fromJSON=function(t){return new aa(t)},aa),{isClass:!0}),w$="Range",N$=[],_$=q(w$,N$,()=>{function t(e,r,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,i=r!=null,s=n!=null;if(a){if(lt(e))e=e.toNumber();else if(typeof e!="number"&&!cc(e))throw new TypeError("Parameter start must be a number or bigint")}if(i){if(lt(r))r=r.toNumber();else if(typeof r!="number"&&!cc(r))throw new TypeError("Parameter end must be a number or bigint")}if(s){if(lt(n))n=n.toNumber();else if(typeof n!="number"&&!cc(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=a?parseFloat(e):0,this.end=i?parseFloat(r):0,this.step=s?parseFloat(n):1,s&&Kr(this.step,0))throw new Error("Step must not be zero")}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var r=e.split(":"),n=r.map(function(i){return parseFloat(i)}),a=n.some(function(i){return isNaN(i)});if(a)return null;switch(n.length){case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[2],n[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,r=this.start,n=this.step,a=this.end,i=a-r;return Ki(n)===Ki(i)?e=Math.ceil(i/n):i===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var r=this.start,n=this.step,a=this.end,i=0;if(n>0)for(;r<a;)e(r,[i],this),r+=n,i++;else if(n<0)for(;r>a;)e(r,[i],this),r+=n,i++},t.prototype.map=function(e){var r=[];return this.forEach(function(n,a,i){r[a[0]]=e(n,a,i)}),r},t.prototype.toArray=function(){var e=[];return this.forEach(function(r,n){e[n[0]]=r}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var r=io(this.start,e);return this.step!==1&&(r+=":"+io(this.step,e)),r+=":"+io(this.end,e),r},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),S$="Matrix",E$=[],A$=q(S$,E$,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function iv(t,e,r){var n=t.constructor,a=new n(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!We(r))throw new Error("size must be an integer");if(t.greaterThan(a.pow(r-1).sub(1))||t.lessThan(a.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(a.pow(r))),i="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function D$(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:a}=J3(e);switch(r){case"fixed":return T$(t,n);case"exponential":return e2(t,n);case"engineering":return C$(t,n);case"bin":return iv(t,2,a);case"oct":return iv(t,8,a);case"hex":return iv(t,16,a);case"auto":{var i=t2(e==null?void 0:e.lowerExp,-3),s=t2(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var l,u=t.toSignificantDigits(n),o=u.e;return o>=i&&o<s?l=u.toFixed():l=e2(t,n),l.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function C$(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,a=t.mul(Math.pow(10,-n)),i=a.toPrecision(e);if(i.includes("e")){var s=t.constructor;i=new s(i).toFixed()}return i+"e"+(r>=0?"+":"")+n.toString()}function e2(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function T$(t,e){return t.toFixed(e)}function t2(t,e){return Xe(t)?t:lt(t)?t.toNumber():e}function M$(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e}function pt(t,e){var r=I$(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function I$(t,e){if(typeof t=="number")return io(t,e);if(lt(t))return D$(t,e);if(F$(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return dM(t,e);if(yr(t))return ml(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>ml(n)+": "+pt(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function ml(t){for(var e=String(t),r="",n=0;n<e.length;){var a=e.charAt(n);r+=a in r2?r2[a]:a,n++}return'"'+r+'"'}var r2={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ca(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function dM(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,a=0;a<n;a++)a!==0&&(r+=", "),r+=dM(t[a],e);return r+="]",r}else return pt(t,e)}function F$(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function Rg(t,e){if(!yr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Xt(t)+", index: 0)");if(!yr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Xt(e)+", index: 1)");return t===e?0:t>e?1:-1}function mt(t,e,r){if(!(this instanceof mt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}mt.prototype=new RangeError;mt.prototype.constructor=RangeError;mt.prototype.name="DimensionError";mt.prototype.isDimensionError=!0;function Fa(t,e,r){if(!(this instanceof Fa))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Fa.prototype=new RangeError;Fa.prototype.constructor=RangeError;Fa.prototype.name="IndexError";Fa.prototype.isIndexError=!0;function at(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function mM(t,e,r){var n,a=t.length;if(a!==e[r])throw new mt(a,e[r]);if(r<e.length-1){var i=r+1;for(n=0;n<a;n++){var s=t[n];if(!Array.isArray(s))throw new mt(e.length-1,e.length,"<");mM(t[n],e,i)}}else for(n=0;n<a;n++)if(Array.isArray(t[n]))throw new mt(e.length+1,e.length,">")}function n2(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new mt(t.length,0)}else mM(t,e,0)}function Rm(t,e){var r=t.isMatrix?t._size:at(t),n=e._sourceSize;n.forEach((a,i)=>{if(a!==null&&a!==r[i])throw new mt(a,r[i])})}function Yt(t,e){if(t!==void 0){if(!Xe(t)||!We(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Fa(t,e)}}function Ul(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&Wt(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(yr(r)&&r.length===0)return!0}return!1}function ql(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!Xe(a)||!We(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pt(e)+")")}),(Xe(t)||lt(t))&&(t=[t]);var n=r!==void 0?r:0;return Og(t,e,0,n),t}function Og(t,e,r,n){var a,i,s=t.length,l=e[r],u=Math.min(s,l);if(t.length=l,r<e.length-1){var o=r+1;for(a=0;a<u;a++)i=t[a],Array.isArray(i)||(i=[i],t[a]=i),Og(i,e,o,n);for(a=u;a<l;a++)i=[],t[a]=i,Og(i,e,o,n)}else{for(a=0;a<u;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=u;a<l;a++)t[a]=n}}function Vy(t,e){var r=Ct(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new mt(0,n,"!=");e=Uy(e,n);var a=hM(e);if(n!==a)throw new mt(a,n,"!=");try{return P$(r,e)}catch(i){throw i instanceof mt?new mt(a,n,"!="):i}}function Uy(t,e){var r=hM(t),n=t.slice(),a=-1,i=t.indexOf(a),s=t.indexOf(a,i+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var l=i>=0,u=e%r===0;if(l)if(u)n[i]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function hM(t){return t.reduce((e,r)=>e*r,1)}function P$(t,e){for(var r=t,n,a=e.length-1;a>0;a--){var i=e[a];n=[];for(var s=r.length/i,l=0;l<s;l++)n.push(r.slice(l*i,(l+1)*i));r=n}return r}function Om(t,e){for(var r=at(t);Array.isArray(t)&&t.length===1;)t=t[0],r.shift();for(var n=r.length;r[n-1]===1;)n--;return n<r.length&&(t=pM(t,n,0),r.length=n),t}function pM(t,e,r){var n,a;if(r<e){var i=r+1;for(n=0,a=t.length;n<a;n++)t[n]=pM(t[n],e,i)}else for(;Array.isArray(t);)t=t[0];return t}function vM(t,e,r,n){var a=n||at(t);if(r)for(var i=0;i<r;i++)t=[t],a.unshift(1);for(t=gM(t,e,0);a.length<e;)a.push(1);return t}function gM(t,e,r){var n,a;if(Array.isArray(t)){var i=r+1;for(n=0,a=t.length;n<a;n++)t[n]=gM(t[n],e,i)}else for(var s=r;s<e;s++)t=[t];return t}function Ct(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?a(t):n(t),r;function n(i){for(var s=0;s<i.length;s++){var l=i[s];Array.isArray(l)?n(l):r.push(l)}}function a(i){if(Array.isArray(i[0]))for(var s=0;s<i.length;s++)a(i[s]);else for(var l=0;l<i.length;l++)r.push(i[l])}}function ds(t,e){return Array.prototype.map.call(t,e)}function yM(t,e){Array.prototype.forEach.call(t,e)}function a2(t,e){if(at(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function i2(t,e){if(at(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r=>e.test(r))}function s2(t,e){return Array.prototype.join.call(t,e)}function Hl(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e}function Bm(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function zh(t,e){for(var r,n=0,a=0;a<t.length;a++){var i=t[a],s=Array.isArray(i);if(a===0&&s&&(n=i.length),s&&i.length!==n)return;var l=s?zh(i,e):e(i);if(r===void 0)r=l;else if(r!==l)return"mixed"}return r}function xM(t,e,r,n){if(n<r){if(t.length!==e.length)throw new mt(t.length,e.length);for(var a=[],i=0;i<t.length;i++)a[i]=xM(t[i],e[i],r,n+1);return a}else return t.concat(e)}function bM(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return xM(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function jm(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(d=>d.length),a=Math.max(...n),i=new Array(a).fill(null),s=0;s<e.length;s++)for(var l=e[s],u=n[s],o=0;o<u;o++){var c=a-u+o;l[o]>i[c]&&(i[c]=l[o])}for(var f=0;f<e.length;f++)wM(e[f],i);return i}function wM(t,e){for(var r=e.length,n=t.length,a=0;a<n;a++){var i=r-n+a;if(t[a]<e[i]&&t[a]>1||t[a]>e[i])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[a]," to size ").concat(e[i]))}}function ro(t,e){var r=at(t);if(Ei(r,e))return t;wM(r,e);var n=jm(r,e),a=n.length,i=[...Array(a-r.length).fill(1),...r],s=O$(t);r.length<a&&(s=Vy(s,i),r=at(s));for(var l=0;l<a;l++)r[l]<n[l]&&(s=R$(s,n[l],l),r=at(s));return s}function R$(t,e,r){return bM(...Array(e).fill(t),r)}function km(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=at(t);if(e.length!==r.length)throw new mt(e.length,r.length);for(var n=0;n<e.length;n++)Yt(e[n],r[n]);return e.reduce((a,i)=>a[i],t)}function Bg(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return i(t);var n=[];return a(t,0);function a(s,l){if(Array.isArray(s)){for(var u=s.length,o=Array(u),c=0;c<u;c++)n[l]=c,o[c]=a(s[c],l+1);return o}else return e(s,n.slice(0,l),t)}function i(s){if(Array.isArray(s)){for(var l=s.length,u=Array(l),o=0;o<l;o++)u[o]=i(s[o]);return u}else return e(s)}}function NM(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(r){i(t);return}var n=[];a(t,0);function a(s,l){if(Array.isArray(s))for(var u=s.length,o=0;o<u;o++)n[l]=o,a(s[o],l+1);else e(s,n.slice(0,l),t)}function i(s){if(Array.isArray(s))for(var l=s.length,u=0;u<l;u++)i(s[u]);else e(s)}}function O$(t){return Nr([],t)}function po(t,e,r,n){if(Mm.isTypedFunction(t)){var a;if(n)a=1;else{var i=(e.isMatrix?e.size():at(e)).map(()=>0),s=e.isMatrix?e.get(i):km(e,i);a=k$(t,s,i,e)}var l;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var u=B$(t,a);l=u!==void 0?u:t}else l=t;return a>=1&&a<=3?{isUnary:a===1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return o2(l,f.slice(0,a),r,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return o2(l,f,r,t.name)}}}return n===void 0?{isUnary:j$(t),fn:t}:{isUnary:n,fn:t}}function B$(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[a,i]=n;a.split(",").length===e&&r.push(i)}),r.length===1)return r[0]}function j$(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function k$(t,e,r,n){for(var a=[e,r,n],i=3;i>0;i--){var s=a.slice(0,i);if(Mm.resolve(t,s)!==null)return i}}function o2(t,e,r,n){try{return t(...e)}catch(a){$$(a,e,r,n)}}function $$(t,e,r,n){var a;if(t instanceof TypeError&&((a=t.data)===null||a===void 0?void 0:a.category)==="wrongType"){var i=[];throw i.push("value: ".concat(Xt(e[0]))),e.length>=2&&i.push("index: ".concat(Xt(e[1]))),e.length>=3&&i.push("array: ".concat(Xt(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(i.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var L$="DenseMatrix",z$=["Matrix","config"],V$=q(L$,z$,t=>{var{Matrix:e,config:r}=t;function n(f,d){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!yr(d))throw new Error("Invalid datatype: "+d);if(Ye(f))f.type==="DenseMatrix"?(this._data=nt(f._data),this._size=nt(f._size),this._datatype=d||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=d||f._datatype);else if(f&&Wt(f.data)&&Wt(f.size))this._data=f.data,this._size=f.size,n2(this._data,this._size),this._datatype=d||f.datatype;else if(Wt(f))this._data=c(f),this._size=at(this._data),n2(this._data,this._size),this._datatype=d;else{if(f)throw new TypeError("Unsupported type of data ("+Xt(f)+")");this._data=[],this._size=[0],this._datatype=d}}n.prototype=new e,n.prototype.createDenseMatrix=function(f,d){return new n(f,d)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return zh(this._data,Xt)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(f,d){return new n(f,d)},n.prototype.subset=function(f,d,m){switch(arguments.length){case 1:return a(this,f);case 2:case 3:return s(this,f,d,m);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(f){return km(this._data,f)},n.prototype.set=function(f,d,m){if(!Wt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new mt(f.length,this._size.length,"<");var p,h,D,w=f.map(function(x){return x+1});o(this,w,m);var S=this._data;for(p=0,h=f.length-1;p<h;p++)D=f[p],Yt(D,S.length),S=S[D];return D=f[f.length-1],Yt(D,S.length),S[D]=d,this};function a(f,d){if(!Rh(d))throw new TypeError("Invalid index");var m=r.legacySubset?d.size().every(N=>N===1):d.isScalar();if(m)return f.get(d.min());var p=d.size();if(p.length!==f._size.length)throw new mt(p.length,f._size.length);for(var h=d.min(),D=d.max(),w=0,S=f._size.length;w<S;w++)Yt(h[w],f._size[w]),Yt(D[w],f._size[w]);var x=new n,b=i(f._data,d);return x._size=b.size,x._datatype=f._datatype,x._data=b.data,r.legacySubset?x.reshape(d.size()):x}function i(f,d){var m=d.size().length-1,p=Array(m);return{data:h(f),size:p.filter(D=>D!==null)};function h(D){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=d.dimension(w);function x(b,N){return Xe(b)?N(b):b.map(N).valueOf()}return Xe(S)?p[w]=null:p[w]=S.size()[0],w<m?x(S,b=>(Yt(b,D.length),h(D[b],w+1))):x(S,b=>(Yt(b,D.length),D[b]))}}function s(f,d,m,p){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var h=d.size(),D=d.isScalar(),w;if(Ye(m)?(w=m.size(),m=m.valueOf()):w=at(m),D){if(w.length!==0)throw new TypeError("Scalar expected");f.set(d.min(),m,p)}else{if(!Ei(w,h)){if(w.length===0)m=ro([m],h);else try{m=ro(m,h)}catch{}w=at(m)}if(h.length<f._size.length)throw new mt(h.length,f._size.length,"<");if(w.length<h.length){for(var S=0,x=0;h[S]===1&&w[S]===1;)S++;for(;h[S]===1;)x++,S++;m=vM(m,h.length,x,w)}if(!Ei(h,w))throw new mt(h,w,">");var b=d.max().map(function(N){return N+1});o(f,b,p),l(f._data,d,m)}return f}function l(f,d,m){var p=d.size().length-1;h(f,m);function h(D,w){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=d.dimension(S),b=(g,y)=>{Yt(g,D.length),h(D[g],w[y[0]],S+1)},N=(g,y)=>{Yt(g,D.length),D[g]=w[y[0]]};S<p?Xe(x)?b(x,[0]):x.forEach(b):Xe(x)?N(x,[0]):x.forEach(N)}}n.prototype.resize=function(f,d,m){if(!Jn(f))throw new TypeError("Array or Matrix expected");var p=f.valueOf().map(D=>Array.isArray(D)&&D.length===1?D[0]:D),h=m?this.clone():this;return u(h,p,d)};function u(f,d,m){if(d.length===0){for(var p=f._data;Wt(p);)p=p[0];return p}return f._size=d.slice(0),f._data=ql(f._data,f._size,m),f}n.prototype.reshape=function(f,d){var m=d?this.clone():this;m._data=Vy(m._data,f);var p=m._size.reduce((h,D)=>h*D);return m._size=Uy(f,p),m};function o(f,d,m){for(var p=f._size.slice(0),h=!1;p.length<d.length;)p.push(0),h=!0;for(var D=0,w=d.length;D<w;D++)d[D]>p[D]&&(p[D]=d[D],h=!0);h&&u(f,p,m)}n.prototype.clone=function(){var f=new n({data:nt(this._data),size:nt(this._size),datatype:this._datatype});return f},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(f){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=this,p=m._size.length-1;if(p<0)return m.clone();var h=po(f,m,"map",d),D=h.fn,w=m.create(void 0,m._datatype);if(w._size=m._size,d||h.isUnary)return w._data=y(m._data),w;if(p===0){for(var S=m.valueOf(),x=Array(S.length),b=0;b<S.length;b++)x[b]=D(S[b],[b],m);return w._data=x,w}var N=[];return w._data=g(m._data),w;function g(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=Array(_.length);if(E<p)for(var T=0;T<_.length;T++)N[E]=T,C[T]=g(_[T],E+1);else for(var M=0;M<_.length;M++)N[E]=M,C[M]=D(_[M],N.slice(),m);return C}function y(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=Array(_.length);if(E<p)for(var T=0;T<_.length;T++)C[T]=y(_[T],E+1);else for(var M=0;M<_.length;M++)C[M]=D(_[M]);return C}},n.prototype.forEach=function(f){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=this,p=m._size.length-1;if(p<0)return;var h=po(f,m,"map",d),D=h.fn;if(d||h.isUnary){b(m._data);return}if(p===0){for(var w=0;w<m._data.length;w++)D(m._data[w],[w],m);return}var S=[];x(m._data);function x(N){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(g<p)for(var y=0;y<N.length;y++)S[g]=y,x(N[y],g+1);else for(var _=0;_<N.length;_++)S[g]=_,D(N[_],S.slice(),m)}function b(N){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(g<p)for(var y=0;y<N.length;y++)b(N[y],g+1);else for(var _=0;_<N.length;_++)D(N[_])}},n.prototype[Symbol.iterator]=function*(){var f=this._size.length-1;if(!(f<0)){if(f===0){for(var d=0;d<this._data.length;d++)yield{value:this._data[d],index:[d]};return}for(var m=Array(f+1).fill(0),p=this._size.reduce((x,b)=>x*b,1),h=0;h<p;h++){for(var D=this._data,w=0;w<f;w++)D=D[m[w]];yield{value:D[m[f]],index:m.slice()};for(var S=f;S>=0&&(m[S]++,!(m[S]<this._size[S]));S--)m[S]=0}}},n.prototype.rows=function(){var f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var m=this._data;for(var p of m)f.push(new n([p],this._datatype));return f},n.prototype.columns=function(){var f=this,d=[],m=this.size();if(m.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,h=function(S){var x=p.map(b=>[b[S]]);d.push(new n(x,f._datatype))},D=0;D<m[1];D++)h(D);return d},n.prototype.toArray=function(){return nt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(f){return pt(this._data,f)},n.prototype.toString=function(){return pt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(f){if(f){if(lt(f)&&(f=f.toNumber()),!Xe(f)||!We(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var d=f>0?f:0,m=f<0?-f:0,p=this._size[0],h=this._size[1],D=Math.min(p-m,h-d),w=[],S=0;S<D;S++)w[S]=this._data[S+m][S+d];return new n({data:w,size:[D],datatype:this._datatype})},n.diagonal=function(f,d,m,p){if(!Wt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(_){if(lt(_)&&(_=_.toNumber()),!Xe(_)||!We(_)||_<1)throw new Error("Size values must be positive integers");return _}),m){if(lt(m)&&(m=m.toNumber()),!Xe(m)||!We(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var h=m>0?m:0,D=m<0?-m:0,w=f[0],S=f[1],x=Math.min(w-D,S-h),b;if(Wt(d)){if(d.length!==x)throw new Error("Invalid value array length");b=function(E){return d[E]}}else if(Ye(d)){var N=d.size();if(N.length!==1||N[0]!==x)throw new Error("Invalid matrix length");b=function(E){return d.get([E])}}else b=function(){return d};p||(p=lt(b(0))?b(0).mul(0):0);var g=[];if(f.length>0){g=ql(g,f,p);for(var y=0;y<x;y++)g[y+D][y+h]=b(y)}return new n({data:g,size:[w,S]})},n.fromJSON=function(f){return new n(f)},n.prototype.swapRows=function(f,d){if(!Xe(f)||!We(f)||!Xe(d)||!We(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(f,this._size[0]),Yt(d,this._size[0]),n._swapRows(f,d,this._data),this},n._swapRows=function(f,d,m){var p=m[f];m[f]=m[d],m[d]=p};function c(f){return Ye(f)?c(f.valueOf()):Wt(f)?f.map(c):f}return n},{isClass:!0}),l2="clone",U$=["typed"],q$=q(l2,U$,t=>{var{typed:e}=t;return e(l2,{any:nt})});function _M(t){var e=t.length,r=t[0].length,n,a,i=[];for(a=0;a<r;a++){var s=[];for(n=0;n<e;n++)s.push(t[n][a]);i.push(s)}return i}function su(t){for(var e=0;e<t.length;e++)if(Jn(t[e]))return!0;return!1}function Ss(t,e){Ye(t)?t.forEach(r=>e(r),!1,!0):NM(t,e,!0)}function ut(t,e,r){if(!r)return Ye(t)?t.map(a=>e(a),!1,!0):Bg(t,e,!0);var n=a=>a===0?a:e(a);return Ye(t)?t.map(a=>n(a),!1,!0):Bg(t,n,!0)}function Vh(t,e,r){var n=Array.isArray(t)?at(t):t.size();if(e<0||e>=n.length)throw new Fa(e,n.length);return Ye(t)?t.create($m(t.valueOf(),e,r),t.datatype()):$m(t,e,r)}function $m(t,e,r){var n,a,i,s;if(e<=0)if(Array.isArray(t[0])){for(s=_M(t),a=[],n=0;n<s.length;n++)a[n]=$m(s[n],e-1,r);return a}else{for(i=t[0],n=1;n<t.length;n++)i=r(i,t[n]);return i}else{for(a=[],n=0;n<t.length;n++)a[n]=$m(t[n],e-1,r);return a}}function u2(t,e,r,n,a,i,s,l,u,o,c){var f=t._values,d=t._index,m=t._ptr,p,h,D,w;if(n)for(h=m[e],D=m[e+1],p=h;p<D;p++)w=d[p],r[w]!==i?(r[w]=i,s.push(w),n[w]=f[p]):(n[w]=l(n[w],f[p]),a[w]=i);else for(h=m[e],D=m[e+1],p=h;p<D;p++)w=d[p],r[w]!==i?(r[w]=i,s.push(w)):a[w]=i}var c2="isInteger",H$=["typed"],G$=q(c2,H$,t=>{var{typed:e}=t;return e(c2,{number:We,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),Pa="number",ou="number, number";function SM(t){return Math.abs(t)}SM.signature=Pa;function EM(t,e){return t+e}EM.signature=ou;function AM(t,e){return t-e}AM.signature=ou;function DM(t,e){return t*e}DM.signature=ou;function CM(t){return-t}CM.signature=Pa;function TM(t){return t}TM.signature=Pa;function Qu(t){return Qk(t)}Qu.signature=Pa;function MM(t){return t*t*t}MM.signature=Pa;function IM(t){return Math.exp(t)}IM.signature=Pa;function FM(t){return Xk(t)}FM.signature=Pa;function PM(t,e){if(!We(t)||!We(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}PM.signature=ou;function f2(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function Lm(t){return Gk(t)}Lm.signature=Pa;function jg(t){return Hk(t)}jg.signature=Pa;function d2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=e<0;if(r&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return r?1/0:0;if(!isFinite(t))return r?0:t;var n=Math.pow(Math.abs(t),1/e);return n=t<0?-n:n,r?1/n:n}function kg(t){return Ki(t)}kg.signature=Pa;function RM(t){return t*t}RM.signature=Pa;function OM(t,e){var r,n,a,i=0,s=1,l=1,u=0;if(!We(t)||!We(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),a=t-n*e,r=i,i=s-n*i,s=r,r=l,l=u-n*l,u=r,t=e,e=a;var o;return t<0?o=[-t,-s,-u]:o=[t,t?s:0,u],o}OM.signature=ou;function BM(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}BM.signature=ou;function $u(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!We(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(Y3(t,e))}var W$="number",lu="number, number";function jM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function bitAnd");return t&e}jM.signature=lu;function kM(t){if(!We(t))throw new Error("Integer expected in function bitNot");return~t}kM.signature=W$;function $M(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function bitOr");return t|e}$M.signature=lu;function LM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function bitXor");return t^e}LM.signature=lu;function zM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function leftShift");return t<<e}zM.signature=lu;function VM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function rightArithShift");return t>>e}VM.signature=lu;function UM(t,e){if(!We(t)||!We(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}UM.signature=lu;function mi(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return mi(t,r)*mi(r+1,e)}function qM(t,e){if(!We(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!We(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,a=e<r?r+1:e+1,i=2,s=e<r?e:r,l=a;l<=t;++l)for(n*=l;i<=s&&n%i===0;)n/=i,++i;return i<=s&&(n/=mi(i,s)),n}qM.signature="number, number";var Q$=Math.PI,X$=2*Math.PI,K$=Math.E,J$=1.618033988749895,Y$="number",qy="number, number";function HM(t){return!t}HM.signature=Y$;function $g(t,e){return!!(t||e)}$g.signature=qy;function Lg(t,e){return!!t!=!!e}Lg.signature=qy;function zg(t,e){return!!(t&&e)}zg.signature=qy;function zm(t){var e;if(We(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:mi(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*zm(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,a=n*t,i=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*a)+163879/(209018880*i)+5246819/(75246796800*i*t))}--t,e=Al[0];for(var s=1;s<Al.length;++s)e+=Al[s]/(t+s);var l=t+GM+.5;return Math.sqrt(2*Math.PI)*Math.pow(l,t+.5)*Math.exp(-l)*e}zm.signature="number";var GM=4.7421875,Al=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],WM=.9189385332046728,Z$=5,eL=7,m2=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function Vm(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-Vm(1-t);t=t-1;for(var e=t+Z$+.5,r=m2[0],n=eL-1;n>=1;n--)r+=m2[n]/(t+n);return WM+(t+.5)*Math.log(e)-e+Math.log(r)}Vm.signature="number";var bn="number";function QM(t){return Zk(t)}QM.signature=bn;function XM(t){return Math.atan(1/t)}XM.signature=bn;function KM(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}KM.signature=bn;function JM(t){return Math.asin(1/t)}JM.signature=bn;function YM(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}YM.signature=bn;function ZM(t){return Math.acos(1/t)}ZM.signature=bn;function e4(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}e4.signature=bn;function t4(t){return e7(t)}t4.signature=bn;function r4(t){return t7(t)}r4.signature=bn;function n4(t){return 1/Math.tan(t)}n4.signature=bn;function a4(t){var e=Math.exp(2*t);return(e+1)/(e-1)}a4.signature=bn;function i4(t){return 1/Math.sin(t)}i4.signature=bn;function s4(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Ki(t)}s4.signature=bn;function o4(t){return 1/Math.cos(t)}o4.signature=bn;function l4(t){return 2/(Math.exp(t)+Math.exp(-t))}l4.signature=bn;function u4(t){return n7(t)}u4.signature=bn;var Hy="number";function c4(t){return t<0}c4.signature=Hy;function f4(t){return t>0}f4.signature=Hy;function d4(t){return Number.isNaN(t)}d4.signature=Hy;function va(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var h2="isNegative",tL=["typed","config"],rL=q(h2,tL,t=>{var{typed:e,config:r}=t;return e(h2,{number:n=>Kr(n,0,r.relTol,r.absTol)?!1:c4(n),BigNumber:n=>va(n,new n.constructor(0),r.relTol,r.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),p2="isNumeric",nL=["typed"],aL=q(p2,nL,t=>{var{typed:e}=t;return e(p2,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),v2="hasNumericValue",iL=["typed","isNumeric"],sL=q(v2,iL,t=>{var{typed:e,isNumeric:r}=t;return e(v2,{boolean:()=>!0,string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return r(a)}})}),g2="isPositive",oL=["typed","config"],lL=q(g2,oL,t=>{var{typed:e,config:r}=t;return e(g2,{number:n=>Kr(n,0,r.relTol,r.absTol)?!1:f4(n),BigNumber:n=>va(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),y2="isZero",uL=["typed","equalScalar"],cL=q(y2,uL,t=>{var{typed:e,equalScalar:r}=t;return e(y2,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),x2="isNaN",fL=["typed"],dL=q(x2,fL,t=>{var{typed:e}=t;return e(x2,{number:d4,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),b2="typeOf",mL=["typed"],hL=q(b2,mL,t=>{var{typed:e}=t;return e(b2,{any:Xt})});function pL(t,e,r,n){return Kr(t.re,e.re,r,n)&&Kr(t.im,e.im,r,n)}var uu=q("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),a.valueType()])(n.value,a.value)})}}),Um="equalScalar",vL=["typed","config"],gL=q(Um,vL,t=>{var{typed:e,config:r}=t,n=uu({typed:e});return e(Um,{"boolean, boolean":function(i,s){return i===s},"number, number":function(i,s){return Kr(i,s,r.relTol,r.absTol)},"BigNumber, BigNumber":function(i,s){return i.eq(s)||va(i,s,r.relTol,r.absTol)},"bigint, bigint":function(i,s){return i===s},"Fraction, Fraction":function(i,s){return i.equals(s)},"Complex, Complex":function(i,s){return pL(i,s,r.relTol,r.absTol)}},n)});q(Um,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Um,{"number, number":function(a,i){return Kr(a,i,r.relTol,r.absTol)}})});var yL="SparseMatrix",xL=["typed","equalScalar","Matrix"],bL=q(yL,xL,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function a(h,D){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(D&&!yr(D))throw new Error("Invalid datatype: "+D);if(Ye(h))i(this,h,D);else if(h&&Wt(h.index)&&Wt(h.ptr)&&Wt(h.size))this._values=h.values,this._index=h.index,this._ptr=h.ptr,this._size=h.size,this._datatype=D||h.datatype;else if(Wt(h))s(this,h,D);else{if(h)throw new TypeError("Unsupported type of data ("+Xt(h)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=D}}function i(h,D,w){D.type==="SparseMatrix"?(h._values=D._values?nt(D._values):void 0,h._index=nt(D._index),h._ptr=nt(D._ptr),h._size=nt(D._size),h._datatype=w||D._datatype):s(h,D.valueOf(),w||D._datatype)}function s(h,D,w){h._values=[],h._index=[],h._ptr=[],h._datatype=w;var S=D.length,x=0,b=r,N=0;if(yr(w)&&(b=e.find(r,[w,w])||r,N=e.convert(0,w)),S>0){var g=0;do{h._ptr.push(h._index.length);for(var y=0;y<S;y++){var _=D[y];if(Wt(_)){if(g===0&&x<_.length&&(x=_.length),g<_.length){var E=_[g];b(E,N)||(h._values.push(E),h._index.push(y))}}else g===0&&x<1&&(x=1),b(_,N)||(h._values.push(_),h._index.push(y))}g++}while(g<x)}h._ptr.push(h._index.length),h._size=[S,x]}a.prototype=new n,a.prototype.createSparseMatrix=function(h,D){return new a(h,D)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return zh(this._values,Xt)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(h,D){return new a(h,D)},a.prototype.density=function(){var h=this._size[0],D=this._size[1];return h!==0&&D!==0?this._index.length/(h*D):0},a.prototype.subset=function(h,D,w){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return l(this,h);case 2:case 3:return u(this,h,D,w);default:throw new SyntaxError("Wrong number of arguments")}};function l(h,D){if(!Rh(D))throw new TypeError("Invalid index");var w=D.isScalar();if(w)return h.get(D.min());var S=D.size();if(S.length!==h._size.length)throw new mt(S.length,h._size.length);var x,b,N,g,y=D.min(),_=D.max();for(x=0,b=h._size.length;x<b;x++)Yt(y[x],h._size[x]),Yt(_[x],h._size[x]);var E=h._values,C=h._index,T=h._ptr,M=D.dimension(0),I=D.dimension(1),j=[],O=[];function P(ae,k){O[ae]=k[0],j[ae]=!0}Number.isInteger(M)?P(M,[0]):M.forEach(P);var H=E?[]:void 0,$=[],z=[];function X(ae){for(z.push($.length),N=T[ae],g=T[ae+1];N<g;N++)x=C[N],j[x]===!0&&($.push(O[x]),H&&H.push(E[N]))}return Number.isInteger(I)?X(I):I.forEach(X),z.push($.length),new a({values:H,index:$,ptr:z,size:S,datatype:h._datatype})}function u(h,D,w,S){if(!D||D.isIndex!==!0)throw new TypeError("Invalid index");var x=D.size(),b=D.isScalar(),N;if(Ye(w)?(N=w.size(),w=w.toArray()):N=at(w),b){if(N.length!==0)throw new TypeError("Scalar expected");h.set(D.min(),w,S)}else{if(x.length!==1&&x.length!==2)throw new mt(x.length,h._size.length,"<");if(N.length<x.length){for(var g=0,y=0;x[g]===1&&N[g]===1;)g++;for(;x[g]===1;)y++,g++;w=vM(w,x.length,y,N)}if(!Ei(x,N))throw new mt(x,N,">");if(x.length===1){var _=D.dimension(0);T(_,(M,I)=>{Yt(M),h.set([M,0],w[I[0]],S)})}else{var E=D.dimension(0),C=D.dimension(1);T(E,(M,I)=>{Yt(M),T(C,(j,O)=>{Yt(j),h.set([M,j],w[I[0]][O[0]],S)})})}}return h;function T(M,I){Xe(M)?I(M,[0]):M.forEach(I)}}a.prototype.get=function(h){if(!Wt(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new mt(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var D=h[0],w=h[1];Yt(D,this._size[0]),Yt(w,this._size[1]);var S=o(D,this._ptr[w],this._ptr[w+1],this._index);return S<this._ptr[w+1]&&this._index[S]===D?this._values[S]:0},a.prototype.set=function(h,D,w){if(!Wt(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new mt(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=h[0],x=h[1],b=this._size[0],N=this._size[1],g=r,y=0;yr(this._datatype)&&(g=e.find(r,[this._datatype,this._datatype])||r,y=e.convert(0,this._datatype)),(S>b-1||x>N-1)&&(d(this,Math.max(S+1,b),Math.max(x+1,N),w),b=this._size[0],N=this._size[1]),Yt(S,b),Yt(x,N);var _=o(S,this._ptr[x],this._ptr[x+1],this._index);return _<this._ptr[x+1]&&this._index[_]===S?g(D,y)?c(_,x,this._values,this._index,this._ptr):this._values[_]=D:g(D,y)||f(_,S,x,D,this._values,this._index,this._ptr),this};function o(h,D,w,S){if(w-D===0)return w;for(var x=D;x<w;x++)if(S[x]===h)return x;return D}function c(h,D,w,S,x){w.splice(h,1),S.splice(h,1);for(var b=D+1;b<x.length;b++)x[b]--}function f(h,D,w,S,x,b,N){x.splice(h,0,S),b.splice(h,0,D);for(var g=w+1;g<N.length;g++)N[g]++}a.prototype.resize=function(h,D,w){if(!Jn(h))throw new TypeError("Array or Matrix expected");var S=h.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(b){if(!Xe(b)||!We(b)||b<0)throw new TypeError("Invalid size, must contain positive integers (size: "+pt(S)+")")});var x=w?this.clone():this;return d(x,S[0],S[1],D)};function d(h,D,w,S){var x=S||0,b=r,N=0;yr(h._datatype)&&(b=e.find(r,[h._datatype,h._datatype])||r,N=e.convert(0,h._datatype),x=e.convert(x,h._datatype));var g=!b(x,N),y=h._size[0],_=h._size[1],E,C,T;if(w>_){for(C=_;C<w;C++)if(h._ptr[C]=h._values.length,g)for(E=0;E<y;E++)h._values.push(x),h._index.push(E);h._ptr[w]=h._values.length}else w<_&&(h._ptr.splice(w+1,_-w),h._values.splice(h._ptr[w],h._values.length),h._index.splice(h._ptr[w],h._index.length));if(_=w,D>y){if(g){var M=0;for(C=0;C<_;C++){h._ptr[C]=h._ptr[C]+M,T=h._ptr[C+1]+M;var I=0;for(E=y;E<D;E++,I++)h._values.splice(T+I,0,x),h._index.splice(T+I,0,E),M++}h._ptr[_]=h._values.length}}else if(D<y){var j=0;for(C=0;C<_;C++){h._ptr[C]=h._ptr[C]-j;var O=h._ptr[C],P=h._ptr[C+1]-j;for(T=O;T<P;T++)E=h._index[T],E>D-1&&(h._values.splice(T,1),h._index.splice(T,1),j++)}h._ptr[C]=h._values.length}return h._size[0]=D,h._size[1]=w,h}a.prototype.reshape=function(h,D){if(!Wt(h))throw new TypeError("Array expected");if(h.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");h.forEach(function(z){if(!Xe(z)||!We(z)||z<=-2||z===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+pt(h)+")")});var w=this._size[0]*this._size[1];h=Uy(h,w);var S=h[0]*h[1];if(w!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var x=D?this.clone():this;if(this._size[0]===h[0]&&this._size[1]===h[1])return x;for(var b=[],N=0;N<x._ptr.length;N++)for(var g=0;g<x._ptr[N+1]-x._ptr[N];g++)b.push(N);for(var y=x._values.slice(),_=x._index.slice(),E=0;E<x._index.length;E++){var C=_[E],T=b[E],M=C*x._size[1]+T;b[E]=M%h[1],_[E]=Math.floor(M/h[1])}x._values.length=0,x._index.length=0,x._ptr.length=h[1]+1,x._size=h.slice();for(var I=0;I<x._ptr.length;I++)x._ptr[I]=0;for(var j=0;j<y.length;j++){var O=_[j],P=b[j],H=y[j],$=o(O,x._ptr[P],x._ptr[P+1],x._index);f($,O,P,H,x._values,x._index,x._ptr)}return x},a.prototype.clone=function(){var h=new a({values:this._values?nt(this._values):void 0,index:nt(this._index),ptr:nt(this._ptr),size:nt(this._size),datatype:this._datatype});return h},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(h,D){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var w=this,S=this._size[0],x=this._size[1],b=po(h,w,"map"),N=function(y,_,E){return b.fn(y,[_,E],w)};return m(this,0,S-1,0,x-1,N,D)};function m(h,D,w,S,x,b,N){var g=[],y=[],_=[],E=r,C=0;yr(h._datatype)&&(E=e.find(r,[h._datatype,h._datatype])||r,C=e.convert(0,h._datatype));for(var T=function(Y,V,ye){var le=b(Y,V,ye);E(le,C)||(g.push(le),y.push(V))},M=S;M<=x;M++){_.push(g.length);var I=h._ptr[M],j=h._ptr[M+1];if(N)for(var O=I;O<j;O++){var P=h._index[O];P>=D&&P<=w&&T(h._values[O],P-D,M-S)}else{for(var H={},$=I;$<j;$++){var z=h._index[$];H[z]=h._values[$]}for(var X=D;X<=w;X++){var ae=X in H?H[X]:0;T(ae,X-D,M-S)}}}return _.push(g.length),new a({values:g,index:y,ptr:_,size:[w-D+1,x-S+1]})}a.prototype.forEach=function(h,D){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var w=this,S=this._size[0],x=this._size[1],b=po(h,w,"forEach"),N=0;N<x;N++){var g=this._ptr[N],y=this._ptr[N+1];if(D)for(var _=g;_<y;_++){var E=this._index[_];b.fn(this._values[_],[E,N],w)}else{for(var C={},T=g;T<y;T++){var M=this._index[T];C[M]=this._values[T]}for(var I=0;I<S;I++){var j=I in C?C[I]:0;b.fn(j,[I,N],w)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var h=this._size[1],D=0;D<h;D++)for(var w=this._ptr[D],S=this._ptr[D+1],x=w;x<S;x++){var b=this._index[x];yield{value:this._values[x],index:[b,D]}}},a.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(h,D,w,S,x){var b=S[0],N=S[1],g=[],y,_;for(y=0;y<b;y++)for(g[y]=[],_=0;_<N;_++)g[y][_]=0;for(_=0;_<N;_++)for(var E=w[_],C=w[_+1],T=E;T<C;T++)y=D[T],g[y][_]=h?x?nt(h[T]):h[T]:1;return g}return a.prototype.format=function(h){for(var D=this._size[0],w=this._size[1],S=this.density(),x="Sparse Matrix ["+pt(D,h)+" x "+pt(w,h)+"] density: "+pt(S,h)+`
`,b=0;b<w;b++)for(var N=this._ptr[b],g=this._ptr[b+1],y=N;y<g;y++){var _=this._index[y];x+=`
    (`+pt(_,h)+", "+pt(b,h)+") ==> "+(this._values?pt(this._values[y],h):"X")}return x},a.prototype.toString=function(){return pt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(h){if(h){if(lt(h)&&(h=h.toNumber()),!Xe(h)||!We(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var D=h>0?h:0,w=h<0?-h:0,S=this._size[0],x=this._size[1],b=Math.min(S-w,x-D),N=[],g=[],y=[];y[0]=0;for(var _=D;_<x&&N.length<b;_++)for(var E=this._ptr[_],C=this._ptr[_+1],T=E;T<C;T++){var M=this._index[T];if(M===_-D+w){N.push(this._values[T]),g[N.length-1]=M-w;break}}return y.push(N.length),new a({values:N,index:g,ptr:y,size:[b,1]})},a.fromJSON=function(h){return new a(h)},a.diagonal=function(h,D,w,S,x){if(!Wt(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(z){if(lt(z)&&(z=z.toNumber()),!Xe(z)||!We(z)||z<1)throw new Error("Size values must be positive integers");return z}),w){if(lt(w)&&(w=w.toNumber()),!Xe(w)||!We(w))throw new TypeError("The parameter k must be an integer number")}else w=0;var b=r,N=0;yr(x)&&(b=e.find(r,[x,x])||r,N=e.convert(0,x));var g=w>0?w:0,y=w<0?-w:0,_=h[0],E=h[1],C=Math.min(_-y,E-g),T;if(Wt(D)){if(D.length!==C)throw new Error("Invalid value array length");T=function(X){return D[X]}}else if(Ye(D)){var M=D.size();if(M.length!==1||M[0]!==C)throw new Error("Invalid matrix length");T=function(X){return D.get([X])}}else T=function(){return D};for(var I=[],j=[],O=[],P=0;P<E;P++){O.push(I.length);var H=P-g;if(H>=0&&H<C){var $=T(H);b($,N)||(j.push(H+y),I.push($))}}return O.push(I.length),new a({values:I,index:j,ptr:O,size:[_,E]})},a.prototype.swapRows=function(h,D){if(!Xe(h)||!We(h)||!Xe(D)||!We(D))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(h,this._size[0]),Yt(D,this._size[0]),a._swapRows(h,D,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(h,D,w,S,x){for(var b=S[h],N=S[h+1],g=b;g<N;g++)x(w[g],D[g])},a._swapRows=function(h,D,w,S,x,b){for(var N=0;N<w;N++){var g=b[N],y=b[N+1],_=o(h,g,y,x),E=o(D,g,y,x);if(_<y&&E<y&&x[_]===h&&x[E]===D){if(S){var C=S[_];S[_]=S[E],S[E]=C}continue}if(_<y&&x[_]===h&&(E>=y||x[E]!==D)){var T=S?S[_]:void 0;x.splice(E,0,D),S&&S.splice(E,0,T),x.splice(E<=_?_+1:_,1),S&&S.splice(E<=_?_+1:_,1);continue}if(E<y&&x[E]===D&&(_>=y||x[_]!==h)){var M=S?S[E]:void 0;x.splice(_,0,h),S&&S.splice(_,0,M),x.splice(_<=E?E+1:E,1),S&&S.splice(_<=E?E+1:E,1)}}},a},{isClass:!0}),wL="number",NL=["typed"];function _L(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],a=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:a}}else return null}function SL(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var a=parseInt(t.fractionalPart[n],t.radix);r+=a/Math.pow(t.radix,n+1)}var i=e+r;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is not a valid number');return i}var EL=q(wL,NL,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var i=_L(a);if(i)return SL(i);var s=0,l=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);l&&(s=Number(l[2]),a=l[1]);var u=Number(a);if(isNaN(u))throw new SyntaxError('String "'+a+'" is not a valid number');if(l){if(u>2**s-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));u>=2**(s-1)&&(u=u-2**s)}return u},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),null:function(a){return 0},"Unit, string | Unit":function(a,i){return a.toNumber(i)},"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),AL="bigint",DL=["typed"],CL=q(AL,DL,t=>{var{typed:e}=t,r=e("bigint",{"":function(){return 0n},bigint:function(a){return a},number:function(a){return BigInt(a.toFixed())},BigNumber:function(a){return BigInt(a.round().toString())},Fraction:function(a){return BigInt(a.valueOf().toFixed())},"string | boolean":function(a){return BigInt(a)},null:function(a){return 0n},"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))});return r.fromJSON=function(n){return BigInt(n.value)},r}),w2="string",TL=["typed"],ML=q(w2,TL,t=>{var{typed:e}=t;return e(w2,{"":function(){return""},number:io,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(r=>n=>ut(n,r)),any:function(n){return String(n)}})}),N2="boolean",IL=["typed"],FL=q(N2,IL,t=>{var{typed:e}=t;return e(N2,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var a=n.toLowerCase();if(a==="true")return!0;if(a==="false")return!1;var i=Number(n);if(n!==""&&!isNaN(i))return!!i;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),PL="bignumber",RL=["typed","BigNumber"],OL=q(PL,RL,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(a){return new r(a+"")},string:function(a){var i=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var s=i[2],l=r(i[1]),u=new r(2).pow(Number(s));if(l.gt(u.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var o=new r(2).pow(Number(s)-1);return l.gte(o)?l.sub(u):l}return new r(a)},BigNumber:function(a){return a},bigint:function(a){return new r(a.toString())},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),Fraction:function(a){return new r(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new r(0)},"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),BL="complex",jL=["typed","Complex"],kL=q(BL,jL,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(a){return new r(a,0)},"number, number":function(a,i){return new r(a,i)},"BigNumber, BigNumber":function(a,i){return new r(a.toNumber(),i.toNumber())},Fraction:function(a){return new r(a.valueOf(),0)},Complex:function(a){return a.clone()},string:function(a){return r(a)},null:function(a){return r(0)},Object:function(a){if("re"in a&&"im"in a)return new r(a.re,a.im);if("r"in a&&"phi"in a||"abs"in a&&"arg"in a)return new r(a);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),$L="fraction",LL=["typed","Fraction"],zL=q($L,LL,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new r(a)},string:function(a){return new r(a)},"number, number":function(a,i){return new r(a,i)},"bigint, bigint":function(a,i){return new r(a,i)},null:function(a){return new r(0)},BigNumber:function(a){return new r(a.toString())},bigint:function(a){return new r(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(n=>a=>{var i=a.clone();return i.value=n(a.value),i}),Object:function(a){return new r(a)},"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),_2="matrix",VL=["typed","Matrix","DenseMatrix","SparseMatrix"],UL=q(_2,VL,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:a}=t;return e(_2,{"":function(){return i([])},string:function(l){return i([],l)},"string, string":function(l,u){return i([],l,u)},Array:function(l){return i(l)},Matrix:function(l){return i(l,l.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(s,l,u){if(l==="dense"||l==="default"||l===void 0)return new n(s,u);if(l==="sparse")return new a(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(l)+".")}}),S2="matrixFromFunction",qL=["typed","matrix","isZero"],HL=q(S2,qL,t=>{var{typed:e,matrix:r,isZero:n}=t;return e(S2,{"Array | Matrix, function, string, string":function(s,l,u,o){return a(s,l,u,o)},"Array | Matrix, function, string":function(s,l,u){return a(s,l,u)},"Matrix, function":function(s,l){return a(s,l,"dense")},"Array, function":function(s,l){return a(s,l,"dense").toArray()},"Array | Matrix, string, function":function(s,l,u){return a(s,u,l)},"Array | Matrix, string, string, function":function(s,l,u,o){return a(s,o,l,u)}});function a(i,s,l,u){var o;return u!==void 0?o=r(l,u):o=r(l),o.resize(i),o.forEach(function(c,f){var d=s(f);n(d)||o.set(f,d)}),o}}),E2="matrixFromRows",GL=["typed","matrix","flatten","size"],WL=q(E2,GL,t=>{var{typed:e,matrix:r,flatten:n,size:a}=t;return e(E2,{"...Array":function(u){return i(u)},"...Matrix":function(u){return r(i(u.map(o=>o.toArray())))}});function i(l){if(l.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=s(l[0]),o=[];for(var c of l){var f=s(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+" ≠ "+(f|0));o.push(n(c))}return o}function s(l){var u=a(l);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),A2="matrixFromColumns",QL=["typed","matrix","flatten","size"],XL=q(A2,QL,t=>{var{typed:e,matrix:r,flatten:n,size:a}=t;return e(A2,{"...Array":function(u){return i(u)},"...Matrix":function(u){return r(i(u.map(o=>o.toArray())))}});function i(l){if(l.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=s(l[0]),o=[],c=0;c<u;c++)o[c]=[];for(var f of l){var d=s(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+" ≠ "+(d|0));for(var m=n(f),p=0;p<u;p++)o[p].push(m[p])}return o}function s(l){var u=a(l);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),D2="splitUnit",KL=["typed"],JL=q(D2,KL,t=>{var{typed:e}=t;return e(D2,{"Unit, Array":function(n,a){return n.splitUnit(a)}})}),C2="unaryMinus",YL=["typed"],ZL=q(C2,YL,t=>{var{typed:e}=t;return e(C2,{number:CM,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var a=n.clone();return a.value=e.find(r,a.valueType())(n.value),a}),"Array | Matrix":e.referToSelf(r=>n=>ut(n,r,!0))})}),T2="unaryPlus",ez=["typed","config","numeric"],tz=q(T2,ez,t=>{var{typed:e,config:r,numeric:n}=t;return e(T2,{number:TM,Complex:function(i){return i},BigNumber:function(i){return i},bigint:function(i){return i},Fraction:function(i){return i},Unit:function(i){return i.clone()},"Array | Matrix":e.referToSelf(a=>i=>ut(i,a,!0)),boolean:function(i){return n(i?1:0,r.number)},string:function(i){return n(i,Cs(i,r))}})}),M2="abs",rz=["typed"],nz=q(M2,rz,t=>{var{typed:e}=t;return e(M2,{number:SM,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":e.referToSelf(r=>n=>ut(n,r,!0))})}),I2="mapSlices",az=["typed","isInteger"],Vg=q(I2,az,t=>{var{typed:e,isInteger:r}=t;return e(I2,{"Array | Matrix, number | BigNumber, function":function(a,i,s){if(!r(i))throw new TypeError("Integer number expected for dimension");var l=Array.isArray(a)?at(a):a.size();if(i<0||i>=l.length)throw new Fa(i,l.length);return Ye(a)?a.create(qm(a.valueOf(),i,s),a.datatype()):qm(a,i,s)}})},{formerly:"apply"});function qm(t,e,r){var n,a,i;if(e<=0)if(Array.isArray(t[0])){for(i=iz(t),a=[],n=0;n<i.length;n++)a[n]=qm(i[n],e-1,r);return a}else return r(t);else{for(a=[],n=0;n<t.length;n++)a[n]=qm(t[n],e-1,r);return a}}function iz(t){var e=t.length,r=t[0].length,n,a,i=[];for(a=0;a<r;a++){var s=[];for(n=0;n<e;n++)s.push(t[n][a]);i.push(s)}return i}var F2="addScalar",sz=["typed"],oz=q(F2,sz,t=>{var{typed:e}=t;return e(F2,{"number, number":EM,"Complex, Complex":function(n,a){return n.add(a)},"BigNumber, BigNumber":function(n,a){return n.plus(a)},"bigint, bigint":function(n,a){return n+a},"Fraction, Fraction":function(n,a){return n.add(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(r,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),P2="subtractScalar",lz=["typed"],uz=q(P2,lz,t=>{var{typed:e}=t;return e(P2,{"number, number":AM,"Complex, Complex":function(n,a){return n.sub(a)},"BigNumber, BigNumber":function(n,a){return n.minus(a)},"bigint, bigint":function(n,a){return n-a},"Fraction, Fraction":function(n,a){return n.sub(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var i=n.clone();return i.value=e.find(r,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),R2="cbrt",cz=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],fz=q(R2,cz,t=>{var{config:e,typed:r,isNegative:n,unaryMinus:a,matrix:i,Complex:s,BigNumber:l,Fraction:u}=t;return r(R2,{number:Qu,Complex:o,"Complex, boolean":o,BigNumber:function(d){return d.cbrt()},Unit:c});function o(f,d){var m=f.arg()/3,p=f.abs(),h=new s(Qu(p),0).mul(new s(0,m).exp());if(d){var D=[h,new s(Qu(p),0).mul(new s(0,m+Math.PI*2/3).exp()),new s(Qu(p),0).mul(new s(0,m-Math.PI*2/3).exp())];return e.matrix==="Array"?D:i(D)}else return h}function c(f){if(f.value&&pi(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=o(f.value),d}else{var m=n(f.value);m&&(f.value=a(f.value));var p;lt(f.value)?p=new l(1).div(3):of(f.value)?p=new u(1,3):p=1/3;var h=f.pow(p);return m&&(h.value=a(h.value)),h}}}),dz="matAlgo11xS0s",mz=["typed","equalScalar"],on=q(dz,mz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s,l){var u=a._values,o=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],p=f[1],h,D=r,w=0,S=s;typeof d=="string"&&(h=d,D=e.find(r,[h,h]),w=e.convert(0,h),i=e.convert(i,h),S=e.find(s,[h,h]));for(var x=[],b=[],N=[],g=0;g<p;g++){N[g]=b.length;for(var y=c[g],_=c[g+1],E=y;E<_;E++){var C=o[E],T=l?S(i,u[E]):S(u[E],i);D(T,w)||(b.push(C),x.push(T))}}return N[p]=b.length,a.createSparseMatrix({values:x,index:b,ptr:N,size:[m,p],datatype:h})}}),hz="matAlgo12xSfs",pz=["typed","DenseMatrix"],jr=q(hz,pz,t=>{var{typed:e,DenseMatrix:r}=t;return function(a,i,s,l){var u=a._values,o=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],p=f[1],h,D=s;typeof d=="string"&&(h=d,i=e.convert(i,h),D=e.find(s,[h,h]));for(var w=[],S=[],x=[],b=0;b<p;b++){for(var N=b+1,g=c[b],y=c[b+1],_=g;_<y;_++){var E=o[_];S[E]=u[_],x[E]=N}for(var C=0;C<m;C++)b===0&&(w[C]=[]),x[C]===N?w[C][b]=l?D(i,S[C]):D(S[C],i):w[C][b]=l?D(i,0):D(0,i)}return new r({data:w,size:[m,p],datatype:h})}}),vz="matAlgo14xDs",gz=["typed"],ga=q(vz,gz,t=>{var{typed:e}=t;return function(a,i,s,l){var u=a._data,o=a._size,c=a._datatype,f,d=s;typeof c=="string"&&(f=c,i=e.convert(i,f),d=e.find(s,[f,f]));var m=o.length>0?r(d,0,o,o[0],u,i,l):[];return a.createDenseMatrix({data:m,size:nt(o),datatype:f})};function r(n,a,i,s,l,u,o){var c=[];if(a===i.length-1)for(var f=0;f<s;f++)c[f]=o?n(u,l[f]):n(l[f],u);else for(var d=0;d<s;d++)c[d]=r(n,a+1,i,i[a+1],l[d],u,o);return c}}),Ug="ceil",yz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],xz=new _s(10),bz=q(Ug,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function a(i){var s=Math.ceil(i),l=n(i);return s===l?s:Kr(i,l,r.relTol,r.absTol)&&!Kr(i,s,r.relTol,r.absTol)?l:s}return e(Ug,{number:a,"number, number":function(s,l){if(!We(l))throw new RangeError("number of decimals in function ceil must be an integer");if(l<0||l>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var u=10**l;return a(s*u)/u}})}),wz=q(Ug,yz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:l}=t,u=on({typed:e,equalScalar:i}),o=jr({typed:e,DenseMatrix:l}),c=ga({typed:e}),f=bz({typed:e,config:r,round:n});function d(m){var p=(w,S)=>va(w,S,r.relTol,r.absTol),h=m.ceil(),D=n(m);return h.eq(D)?h:p(m,D)&&!p(m,h)?D:h}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,h){return p.ceil(h)},"Complex, BigNumber":function(p,h){return p.ceil(h.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,h){var D=xz.pow(h);return d(p.mul(D)).div(D)},bigint:m=>m,"bigint, number":(m,p)=>m,"bigint, BigNumber":(m,p)=>m,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,h){return p.ceil(h)},"Fraction, BigNumber":function(p,h){return p.ceil(h.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(p,h,D){var w=p.toNumeric(D);return D.multiply(m(w,h))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(p,h,D)=>m(p,h.toNumber(),D)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(p,h,D)=>ut(p,w=>m(w,h,D),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(p,h)=>m(p,0,h)),"Array | Matrix":e.referToSelf(m=>p=>ut(p,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(p,h)=>ut(p,D=>m(D,h),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>u(p,h,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>c(p,h,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(p,h)=>c(a(h),p,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(p,h)=>i(p,0)?s(h.size(),h.storage()):h.storage()==="dense"?c(h,p,m,!0):o(h,p,m,!0))})}),O2="cube",Nz=["typed"],_z=q(O2,Nz,t=>{var{typed:e}=t;return e(O2,{number:MM,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),B2="exp",Sz=["typed"],Ez=q(B2,Sz,t=>{var{typed:e}=t;return e(B2,{number:IM,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),j2="expm1",Az=["typed","Complex"],Dz=q(j2,Az,t=>{var{typed:e,Complex:r}=t;return e(j2,{number:FM,Complex:function(a){var i=Math.exp(a.re);return new r(i*Math.cos(a.im)-1,i*Math.sin(a.im))},BigNumber:function(a){return a.exp().minus(1)}})}),qg="fix",Cz=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Tz=q(qg,["typed","ceil","floor"],t=>{var{typed:e,ceil:r,floor:n}=t;return e(qg,{number:function(i){return i>0?n(i):r(i)},"number, number":function(i,s){return i>0?n(i,s):r(i,s)}})}),Mz=q(qg,Cz,t=>{var{typed:e,Complex:r,matrix:n,ceil:a,floor:i,equalScalar:s,zeros:l,DenseMatrix:u}=t,o=jr({typed:e,DenseMatrix:u}),c=ga({typed:e}),f=Tz({typed:e,ceil:a,floor:i});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(m){return new r(m.re>0?Math.floor(m.re):Math.ceil(m.re),m.im>0?Math.floor(m.im):Math.ceil(m.im))},"Complex, number":function(m,p){return new r(m.re>0?i(m.re,p):a(m.re,p),m.im>0?i(m.im,p):a(m.im,p))},"Complex, BigNumber":function(m,p){var h=p.toNumber();return new r(m.re>0?i(m.re,h):a(m.re,h),m.im>0?i(m.im,h):a(m.im,h))},BigNumber:function(m){return m.isNegative()?a(m):i(m)},"BigNumber, number | BigNumber":function(m,p){return m.isNegative()?a(m,p):i(m,p)},bigint:d=>d,"bigint, number":(d,m)=>d,"bigint, BigNumber":(d,m)=>d,Fraction:function(m){return m.s<0n?m.ceil():m.floor()},"Fraction, number | BigNumber":function(m,p){return m.s<0n?a(m,p):i(m,p)},"Unit, number, Unit":e.referToSelf(d=>function(m,p,h){var D=m.toNumeric(h);return h.multiply(d(D,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(m,p,h)=>d(m,p.toNumber(),h)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(m,p,h)=>ut(m,D=>d(D,p,h),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(m,p)=>d(m,0,p)),"Array | Matrix":e.referToSelf(d=>m=>ut(m,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(m,p)=>ut(m,h=>d(h,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(m,p)=>c(n(p),m,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(m,p)=>s(m,0)?l(p.size(),p.storage()):p.storage()==="dense"?c(p,m,d,!0):o(p,m,d,!0))})}),Hg="floor",Iz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Fz=new _s(10),Pz=q(Hg,["typed","config","round"],t=>{var{typed:e,config:r,round:n}=t;function a(i){var s=Math.floor(i),l=n(i);return s===l?s:Kr(i,l,r.relTol,r.absTol)&&!Kr(i,s,r.relTol,r.absTol)?l:s}return e(Hg,{number:a,"number, number":function(s,l){if(!We(l))throw new RangeError("number of decimals in function floor must be an integer");if(l<0||l>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var u=10**l;return a(s*u)/u}})}),m4=q(Hg,Iz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:l}=t,u=on({typed:e,equalScalar:i}),o=jr({typed:e,DenseMatrix:l}),c=ga({typed:e}),f=Pz({typed:e,config:r,round:n});function d(m){var p=(w,S)=>va(w,S,r.relTol,r.absTol),h=m.floor(),D=n(m);return h.eq(D)?h:p(m,D)&&!p(m,h)?D:h}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,h){return p.floor(h)},"Complex, BigNumber":function(p,h){return p.floor(h.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,h){var D=Fz.pow(h);return d(p.mul(D)).div(D)},bigint:m=>m,"bigint, number":(m,p)=>m,"bigint, BigNumber":(m,p)=>m,Fraction:function(p){return p.floor()},"Fraction, number":function(p,h){return p.floor(h)},"Fraction, BigNumber":function(p,h){return p.floor(h.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(p,h,D){var w=p.toNumeric(D);return D.multiply(m(w,h))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(p,h,D)=>m(p,h.toNumber(),D)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(p,h,D)=>ut(p,w=>m(w,h,D),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(p,h)=>m(p,0,h)),"Array | Matrix":e.referToSelf(m=>p=>ut(p,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(p,h)=>ut(p,D=>m(D,h),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>u(p,h,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(p,h)=>c(p,h,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(p,h)=>c(a(h),p,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(p,h)=>i(p,0)?s(h.size(),h.storage()):h.storage()==="dense"?c(h,p,m,!0):o(h,p,m,!0))})}),Rz="matAlgo02xDS0",Oz=["typed","equalScalar"],Ra=q(Rz,Oz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s,l){var u=a._data,o=a._size,c=a._datatype||a.getDataType(),f=i._values,d=i._index,m=i._ptr,p=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(o.length!==p.length)throw new mt(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var D=o[0],w=o[1],S,x=r,b=0,N=s;typeof c=="string"&&c===h&&c!=="mixed"&&(S=c,x=e.find(r,[S,S]),b=e.convert(0,S),N=e.find(s,[S,S]));for(var g=[],y=[],_=[],E=0;E<w;E++){_[E]=y.length;for(var C=m[E],T=m[E+1],M=C;M<T;M++){var I=d[M],j=l?N(f[M],u[I][E]):N(u[I][E],f[M]);x(j,b)||(y.push(I),g.push(j))}}return _[w]=y.length,i.createSparseMatrix({values:g,index:y,ptr:_,size:[D,w],datatype:c===a._datatype&&h===i._datatype?S:void 0})}}),Bz="matAlgo03xDSf",jz=["typed"],wn=q(Bz,jz,t=>{var{typed:e}=t;return function(n,a,i,s){var l=n._data,u=n._size,o=n._datatype||n.getDataType(),c=a._values,f=a._index,d=a._ptr,m=a._size,p=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==m.length)throw new mt(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=u[0],D=u[1],w,S=0,x=i;typeof o=="string"&&o===p&&o!=="mixed"&&(w=o,S=e.convert(0,w),x=e.find(i,[w,w]));for(var b=[],N=0;N<h;N++)b[N]=[];for(var g=[],y=[],_=0;_<D;_++){for(var E=_+1,C=d[_],T=d[_+1],M=C;M<T;M++){var I=f[M];g[I]=s?x(c[M],l[I][_]):x(l[I][_],c[M]),y[I]=E}for(var j=0;j<h;j++)y[j]===E?b[j][_]=g[j]:b[j][_]=s?x(S,l[j][_]):x(l[j][_],S)}return n.createDenseMatrix({data:b,size:[h,D],datatype:o===n._datatype&&p===a._datatype?w:void 0})}}),kz="matAlgo05xSfSf",$z=["typed","equalScalar"],Uh=q(kz,$z,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var l=a._values,u=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,p=i._ptr,h=i._size,D=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==h.length)throw new mt(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");var w=c[0],S=c[1],x,b=r,N=0,g=s;typeof f=="string"&&f===D&&f!=="mixed"&&(x=f,b=e.find(r,[x,x]),N=e.convert(0,x),g=e.find(s,[x,x]));var y=l&&d?[]:void 0,_=[],E=[],C=y?[]:void 0,T=y?[]:void 0,M=[],I=[],j,O,P,H;for(O=0;O<S;O++){E[O]=_.length;var $=O+1;for(P=o[O],H=o[O+1];P<H;P++)j=u[P],_.push(j),M[j]=$,C&&(C[j]=l[P]);for(P=p[O],H=p[O+1];P<H;P++)j=m[P],M[j]!==$&&_.push(j),I[j]=$,T&&(T[j]=d[P]);if(y)for(P=E[O];P<_.length;){j=_[P];var z=M[j],X=I[j];if(z===$||X===$){var ae=z===$?C[j]:N,k=X===$?T[j]:N,Y=g(ae,k);b(Y,N)?_.splice(P,1):(y.push(Y),P++)}}}return E[S]=_.length,a.createSparseMatrix({values:y,index:_,ptr:E,size:[w,S],datatype:f===a._datatype&&D===i._datatype?x:void 0})}}),Lz="matAlgo13xDD",zz=["typed"],h4=q(Lz,zz,t=>{var{typed:e}=t;return function(a,i,s){var l=a._data,u=a._size,o=a._datatype,c=i._data,f=i._size,d=i._datatype,m=[];if(u.length!==f.length)throw new mt(u.length,f.length);for(var p=0;p<u.length;p++){if(u[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");m[p]=u[p]}var h,D=s;typeof o=="string"&&o===d&&(h=o,D=e.find(s,[h,h]));var w=m.length>0?r(D,0,m,m[0],l,c):[];return a.createDenseMatrix({data:w,size:m,datatype:h})};function r(n,a,i,s,l,u){var o=[];if(a===i.length-1)for(var c=0;c<s;c++)o[c]=n(l[c],u[c]);else for(var f=0;f<s;f++)o[f]=r(n,a+1,i,i[a+1],l[f],u[f]);return o}});function Vr(t,e){if(Ei(t.size(),e.size()))return[t,e];var r=jm(t.size(),e.size());return[t,e].map(n=>Vz(n,r))}function Vz(t,e){return Ei(t.size(),e)?t:t.create(ro(t.valueOf(),e),t.datatype())}var Uz="matrixAlgorithmSuite",qz=["typed","matrix"],Zt=q(Uz,qz,t=>{var{typed:e,matrix:r}=t,n=h4({typed:e}),a=ga({typed:e});return function(s){var l=s.elop,u=s.SD||s.DS,o;l?(o={"DenseMatrix, DenseMatrix":(m,p)=>n(...Vr(m,p),l),"Array, Array":(m,p)=>n(...Vr(r(m),r(p)),l).valueOf(),"Array, DenseMatrix":(m,p)=>n(...Vr(r(m),p),l),"DenseMatrix, Array":(m,p)=>n(...Vr(m,r(p)),l)},s.SS&&(o["SparseMatrix, SparseMatrix"]=(m,p)=>s.SS(...Vr(m,p),l,!1)),s.DS&&(o["DenseMatrix, SparseMatrix"]=(m,p)=>s.DS(...Vr(m,p),l,!1),o["Array, SparseMatrix"]=(m,p)=>s.DS(...Vr(r(m),p),l,!1)),u&&(o["SparseMatrix, DenseMatrix"]=(m,p)=>u(...Vr(p,m),l,!0),o["SparseMatrix, Array"]=(m,p)=>u(...Vr(r(p),m),l,!0))):(o={"DenseMatrix, DenseMatrix":e.referToSelf(m=>(p,h)=>n(...Vr(p,h),m)),"Array, Array":e.referToSelf(m=>(p,h)=>n(...Vr(r(p),r(h)),m).valueOf()),"Array, DenseMatrix":e.referToSelf(m=>(p,h)=>n(...Vr(r(p),h),m)),"DenseMatrix, Array":e.referToSelf(m=>(p,h)=>n(...Vr(p,r(h)),m))},s.SS&&(o["SparseMatrix, SparseMatrix"]=e.referToSelf(m=>(p,h)=>s.SS(...Vr(p,h),m,!1))),s.DS&&(o["DenseMatrix, SparseMatrix"]=e.referToSelf(m=>(p,h)=>s.DS(...Vr(p,h),m,!1)),o["Array, SparseMatrix"]=e.referToSelf(m=>(p,h)=>s.DS(...Vr(r(p),h),m,!1))),u&&(o["SparseMatrix, DenseMatrix"]=e.referToSelf(m=>(p,h)=>u(...Vr(h,p),m,!0)),o["SparseMatrix, Array"]=e.referToSelf(m=>(p,h)=>u(...Vr(r(h),p),m,!0))));var c=s.scalar||"any",f=s.Ds||s.Ss;f&&(l?(o["DenseMatrix,"+c]=(m,p)=>a(m,p,l,!1),o[c+", DenseMatrix"]=(m,p)=>a(p,m,l,!0),o["Array,"+c]=(m,p)=>a(r(m),p,l,!1).valueOf(),o[c+", Array"]=(m,p)=>a(r(p),m,l,!0).valueOf()):(o["DenseMatrix,"+c]=e.referToSelf(m=>(p,h)=>a(p,h,m,!1)),o[c+", DenseMatrix"]=e.referToSelf(m=>(p,h)=>a(h,p,m,!0)),o["Array,"+c]=e.referToSelf(m=>(p,h)=>a(r(p),h,m,!1).valueOf()),o[c+", Array"]=e.referToSelf(m=>(p,h)=>a(r(h),p,m,!0).valueOf())));var d=s.sS!==void 0?s.sS:s.Ss;return l?(s.Ss&&(o["SparseMatrix,"+c]=(m,p)=>s.Ss(m,p,l,!1)),d&&(o[c+", SparseMatrix"]=(m,p)=>d(p,m,l,!0))):(s.Ss&&(o["SparseMatrix,"+c]=e.referToSelf(m=>(p,h)=>s.Ss(p,h,m,!1))),d&&(o[c+", SparseMatrix"]=e.referToSelf(m=>(p,h)=>d(h,p,m,!0)))),l&&l.signatures&&X3(o,l.signatures),o}}),k2="mod",Hz=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],p4=q(k2,Hz,t=>{var{typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:l,concat:u}=t,o=m4({typed:e,config:r,round:n,matrix:a,equalScalar:i,zeros:s,DenseMatrix:l}),c=Ra({typed:e,equalScalar:i}),f=wn({typed:e}),d=Uh({typed:e,equalScalar:i}),m=on({typed:e,equalScalar:i}),p=jr({typed:e,DenseMatrix:l}),h=Zt({typed:e,matrix:a,concat:u});return e(k2,{"number, number":D,"BigNumber, BigNumber":function(S,x){return x.isZero()?S:S.sub(x.mul(o(S.div(x))))},"bigint, bigint":function(S,x){if(x===0n)return S;if(S<0){var b=S%x;return b===0n?b:b+x}return S%x},"Fraction, Fraction":function(S,x){return x.equals(0)?S:S.sub(x.mul(o(S.div(x))))}},h({SS:d,DS:f,SD:c,Ss:m,sS:p}));function D(w,S){return S===0?w:w-S*o(w/S)}}),Gz="matAlgo01xDSid",Wz=["typed"],Ms=q(Gz,Wz,t=>{var{typed:e}=t;return function(n,a,i,s){var l=n._data,u=n._size,o=n._datatype||n.getDataType(),c=a._values,f=a._index,d=a._ptr,m=a._size,p=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==m.length)throw new mt(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=u[0],D=u[1],w=typeof o=="string"&&o!=="mixed"&&o===p?o:void 0,S=w?e.find(i,[w,w]):i,x,b,N=[];for(x=0;x<h;x++)N[x]=[];var g=[],y=[];for(b=0;b<D;b++){for(var _=b+1,E=d[b],C=d[b+1],T=E;T<C;T++)x=f[T],g[x]=s?S(c[T],l[x][b]):S(l[x][b],c[T]),y[x]=_;for(x=0;x<h;x++)y[x]===_?N[x][b]=g[x]:N[x][b]=l[x][b]}return n.createDenseMatrix({data:N,size:[h,D],datatype:o===n._datatype&&p===a._datatype?w:void 0})}}),Qz="matAlgo04xSidSid",Xz=["typed","equalScalar"],Gy=q(Qz,Xz,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var l=a._values,u=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,p=i._ptr,h=i._size,D=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==h.length)throw new mt(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");var w=c[0],S=c[1],x,b=r,N=0,g=s;typeof f=="string"&&f===D&&f!=="mixed"&&(x=f,b=e.find(r,[x,x]),N=e.convert(0,x),g=e.find(s,[x,x]));var y=l&&d?[]:void 0,_=[],E=[],C=l&&d?[]:void 0,T=l&&d?[]:void 0,M=[],I=[],j,O,P,H,$;for(O=0;O<S;O++){E[O]=_.length;var z=O+1;for(H=o[O],$=o[O+1],P=H;P<$;P++)j=u[P],_.push(j),M[j]=z,C&&(C[j]=l[P]);for(H=p[O],$=p[O+1],P=H;P<$;P++)if(j=m[P],M[j]===z){if(C){var X=g(C[j],d[P]);b(X,N)?M[j]=null:C[j]=X}}else _.push(j),I[j]=z,T&&(T[j]=d[P]);if(C&&T)for(P=E[O];P<_.length;)j=_[P],M[j]===z?(y[P]=C[j],P++):I[j]===z?(y[P]=T[j],P++):_.splice(P,1)}return E[S]=_.length,a.createSparseMatrix({values:y,index:_,ptr:E,size:[w,S],datatype:f===a._datatype&&D===i._datatype?x:void 0})}}),Kz="matAlgo10xSids",Jz=["typed","DenseMatrix"],Ao=q(Kz,Jz,t=>{var{typed:e,DenseMatrix:r}=t;return function(a,i,s,l){var u=a._values,o=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],p=f[1],h,D=s;typeof d=="string"&&(h=d,i=e.convert(i,h),D=e.find(s,[h,h]));for(var w=[],S=[],x=[],b=0;b<p;b++){for(var N=b+1,g=c[b],y=c[b+1],_=g;_<y;_++){var E=o[_];S[E]=u[_],x[E]=N}for(var C=0;C<m;C++)b===0&&(w[C]=[]),x[C]===N?w[C][b]=l?D(i,S[C]):D(S[C],i):w[C][b]=i}return new r({data:w,size:[m,p],datatype:h})}});function Do(t,e,r,n){if(!(this instanceof Do))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Do.prototype=new Error;Do.prototype.constructor=Error;Do.prototype.name="ArgumentsError";Do.prototype.isArgumentsError=!0;var $2="gcd",Yz=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],sv="number | BigNumber | Fraction | Matrix | Array",Zz="".concat(sv,", ").concat(sv,", ...").concat(sv);function L2(t){return!t.some(e=>Array.isArray(e))}var eV=q($2,Yz,t=>{var{typed:e,matrix:r,config:n,round:a,equalScalar:i,zeros:s,BigNumber:l,DenseMatrix:u,concat:o}=t,c=p4({typed:e,config:n,round:a,matrix:r,equalScalar:i,zeros:s,DenseMatrix:u,concat:o}),f=Ms({typed:e}),d=Gy({typed:e,equalScalar:i}),m=Ao({typed:e,DenseMatrix:u}),p=Zt({typed:e,matrix:r,concat:o});return e($2,{"number, number":h,"BigNumber, BigNumber":D,"Fraction, Fraction":(w,S)=>w.gcd(S)},p({SS:d,DS:f,Ss:m}),{[Zz]:e.referToSelf(w=>(S,x,b)=>{for(var N=w(S,x),g=0;g<b.length;g++)N=w(N,b[g]);return N}),Array:e.referToSelf(w=>S=>{if(S.length===1&&Array.isArray(S[0])&&L2(S[0]))return w(...S[0]);if(L2(S))return w(...S);throw new Do("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(w=>S=>w(S.toArray()))});function h(w,S){if(!We(w)||!We(S))throw new Error("Parameters in function gcd must be integer numbers");for(var x;S!==0;)x=c(w,S),w=S,S=x;return w<0?-w:w}function D(w,S){if(!w.isInt()||!S.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var x=new l(0);!S.isZero();){var b=c(w,S);w=S,S=b}return w.lt(x)?w.neg():w}}),tV="matAlgo06xS0S0",rV=["typed","equalScalar"],qh=q(tV,rV,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var l=a._values,u=a._size,o=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=i._values,f=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==f.length)throw new mt(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var m=u[0],p=u[1],h,D=r,w=0,S=s;typeof o=="string"&&o===d&&o!=="mixed"&&(h=o,D=e.find(r,[h,h]),w=e.convert(0,h),S=e.find(s,[h,h]));for(var x=l&&c?[]:void 0,b=[],N=[],g=x?[]:void 0,y=[],_=[],E=0;E<p;E++){N[E]=b.length;var C=E+1;if(u2(a,E,y,g,_,C,b,S),u2(i,E,y,g,_,C,b,S),g)for(var T=N[E];T<b.length;){var M=b[T];if(_[M]===C){var I=g[M];D(I,w)?b.splice(T,1):(x.push(I),T++)}else b.splice(T,1)}else for(var j=N[E];j<b.length;){var O=b[j];_[O]!==C?b.splice(j,1):j++}}return N[p]=b.length,a.createSparseMatrix({values:x,index:b,ptr:N,size:[m,p],datatype:o===a._datatype&&d===i._datatype?h:void 0})}}),z2="lcm",nV=["typed","matrix","equalScalar","concat"],aV=q(z2,nV,t=>{var{typed:e,matrix:r,equalScalar:n,concat:a}=t,i=Ra({typed:e,equalScalar:n}),s=qh({typed:e,equalScalar:n}),l=on({typed:e,equalScalar:n}),u=Zt({typed:e,matrix:r,concat:a}),o="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(o,", ").concat(o,", ...").concat(o)]=e.referToSelf(d=>(m,p,h)=>{for(var D=d(m,p),w=0;w<h.length;w++)D=d(D,h[w]);return D}),e(z2,{"number, number":PM,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,m)=>d.lcm(m)},u({SS:s,DS:i,Ss:l}),c);function f(d,m){if(!d.isInt()||!m.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(m.isZero())return m;for(var p=d.times(m);!m.isZero();){var h=m;m=d.mod(h),d=h}return p.div(d).abs()}});function Wy(t,e,r,n){return function(a){if(a>0||r.predictable){if(a<=0)return NaN;var i=a.toString(16),s=i.substring(0,15);return t*(i.length-s.length)+e(+("0x"+s))}return n(a.toNumber())}}var V2="log10",iV=["typed","config","Complex"],sV=Lm(16),oV=q(V2,iV,t=>{var{typed:e,config:r,Complex:n}=t;function a(s){return s.log().div(Math.LN10)}function i(s){return a(new n(s,0))}return e(V2,{number:function(l){return l>=0||r.predictable?Lm(l):i(l)},bigint:Wy(sV,Lm,r,i),Complex:a,BigNumber:function(l){return!l.isNegative()||r.predictable?l.log():i(l.toNumber())},"Array | Matrix":e.referToSelf(s=>l=>ut(l,s))})}),U2="log2",lV=["typed","config","Complex"],uV=q(U2,lV,t=>{var{typed:e,config:r,Complex:n}=t;function a(s){return i(new n(s,0))}return e(U2,{number:function(l){return l>=0||r.predictable?jg(l):a(l)},bigint:Wy(4,jg,r,a),Complex:i,BigNumber:function(l){return!l.isNegative()||r.predictable?l.log(2):a(l.toNumber())},"Array | Matrix":e.referToSelf(s=>l=>ut(l,s))});function i(s){var l=Math.sqrt(s.re*s.re+s.im*s.im);return new n(Math.log2?Math.log2(l):Math.log(l)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),cV="multiplyScalar",fV=["typed"],dV=q(cV,fV,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":DM,"Complex, Complex":function(n,a){return n.mul(a)},"BigNumber, BigNumber":function(n,a){return n.times(a)},"bigint, bigint":function(n,a){return n*a},"Fraction, Fraction":function(n,a){return n.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),q2="multiply",mV=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],hV=q(q2,mV,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:a,equalScalar:i,dot:s}=t,l=on({typed:e,equalScalar:i}),u=ga({typed:e});function o(N,g){switch(N.length){case 1:switch(g.length){case 1:if(N[0]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(N[0]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+N[0]+") must match Matrix rows ("+g[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+g.length+" dimensions)")}break;case 2:switch(g.length){case 1:if(N[1]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+N[1]+") must match Vector length ("+g[0]+")");break;case 2:if(N[1]!==g[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+N[1]+") must match Matrix B rows ("+g[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+g.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+N.length+" dimensions)")}}function c(N,g,y){if(y===0)throw new Error("Cannot multiply two empty vectors");return s(N,g)}function f(N,g){if(g.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(N,g)}function d(N,g){var y=N._data,_=N._size,E=N._datatype||N.getDataType(),C=g._data,T=g._size,M=g._datatype||g.getDataType(),I=_[0],j=T[1],O,P=n,H=a;E&&M&&E===M&&typeof E=="string"&&E!=="mixed"&&(O=E,P=e.find(n,[O,O]),H=e.find(a,[O,O]));for(var $=[],z=0;z<j;z++){for(var X=H(y[0],C[0][z]),ae=1;ae<I;ae++)X=P(X,H(y[ae],C[ae][z]));$[z]=X}return N.createDenseMatrix({data:$,size:[j],datatype:E===N._datatype&&M===g._datatype?O:void 0})}var m=e("_multiplyMatrixVector",{"DenseMatrix, any":h,"SparseMatrix, any":S}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":D,"DenseMatrix, SparseMatrix":w,"SparseMatrix, DenseMatrix":x,"SparseMatrix, SparseMatrix":b});function h(N,g){var y=N._data,_=N._size,E=N._datatype||N.getDataType(),C=g._data,T=g._datatype||g.getDataType(),M=_[0],I=_[1],j,O=n,P=a;E&&T&&E===T&&typeof E=="string"&&E!=="mixed"&&(j=E,O=e.find(n,[j,j]),P=e.find(a,[j,j]));for(var H=[],$=0;$<M;$++){for(var z=y[$],X=P(z[0],C[0]),ae=1;ae<I;ae++)X=O(X,P(z[ae],C[ae]));H[$]=X}return N.createDenseMatrix({data:H,size:[M],datatype:E===N._datatype&&T===g._datatype?j:void 0})}function D(N,g){var y=N._data,_=N._size,E=N._datatype||N.getDataType(),C=g._data,T=g._size,M=g._datatype||g.getDataType(),I=_[0],j=_[1],O=T[1],P,H=n,$=a;E&&M&&E===M&&typeof E=="string"&&E!=="mixed"&&E!=="mixed"&&(P=E,H=e.find(n,[P,P]),$=e.find(a,[P,P]));for(var z=[],X=0;X<I;X++){var ae=y[X];z[X]=[];for(var k=0;k<O;k++){for(var Y=$(ae[0],C[0][k]),V=1;V<j;V++)Y=H(Y,$(ae[V],C[V][k]));z[X][k]=Y}}return N.createDenseMatrix({data:z,size:[I,O],datatype:E===N._datatype&&M===g._datatype?P:void 0})}function w(N,g){var y=N._data,_=N._size,E=N._datatype||N.getDataType(),C=g._values,T=g._index,M=g._ptr,I=g._size,j=g._datatype||g._data===void 0?g._datatype:g.getDataType();if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var O=_[0],P=I[1],H,$=n,z=a,X=i,ae=0;E&&j&&E===j&&typeof E=="string"&&E!=="mixed"&&(H=E,$=e.find(n,[H,H]),z=e.find(a,[H,H]),X=e.find(i,[H,H]),ae=e.convert(0,H));for(var k=[],Y=[],V=[],ye=g.createSparseMatrix({values:k,index:Y,ptr:V,size:[O,P],datatype:E===N._datatype&&j===g._datatype?H:void 0}),le=0;le<P;le++){V[le]=Y.length;var fe=M[le],W=M[le+1];if(W>fe)for(var K=0,ee=0;ee<O;ee++){for(var ie=ee+1,oe=void 0,pe=fe;pe<W;pe++){var me=T[pe];K!==ie?(oe=z(y[ee][me],C[pe]),K=ie):oe=$(oe,z(y[ee][me],C[pe]))}K===ie&&!X(oe,ae)&&(Y.push(ee),k.push(oe))}}return V[P]=Y.length,ye}function S(N,g){var y=N._values,_=N._index,E=N._ptr,C=N._datatype||N._data===void 0?N._datatype:N.getDataType();if(!y)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=g._data,M=g._datatype||g.getDataType(),I=N._size[0],j=g._size[0],O=[],P=[],H=[],$,z=n,X=a,ae=i,k=0;C&&M&&C===M&&typeof C=="string"&&C!=="mixed"&&($=C,z=e.find(n,[$,$]),X=e.find(a,[$,$]),ae=e.find(i,[$,$]),k=e.convert(0,$));var Y=[],V=[];H[0]=0;for(var ye=0;ye<j;ye++){var le=T[ye];if(!ae(le,k))for(var fe=E[ye],W=E[ye+1],K=fe;K<W;K++){var ee=_[K];V[ee]?Y[ee]=z(Y[ee],X(le,y[K])):(V[ee]=!0,P.push(ee),Y[ee]=X(le,y[K]))}}for(var ie=P.length,oe=0;oe<ie;oe++){var pe=P[oe];O[oe]=Y[pe]}return H[1]=P.length,N.createSparseMatrix({values:O,index:P,ptr:H,size:[I,1],datatype:C===N._datatype&&M===g._datatype?$:void 0})}function x(N,g){var y=N._values,_=N._index,E=N._ptr,C=N._datatype||N._data===void 0?N._datatype:N.getDataType();if(!y)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=g._data,M=g._datatype||g.getDataType(),I=N._size[0],j=g._size[0],O=g._size[1],P,H=n,$=a,z=i,X=0;C&&M&&C===M&&typeof C=="string"&&C!=="mixed"&&(P=C,H=e.find(n,[P,P]),$=e.find(a,[P,P]),z=e.find(i,[P,P]),X=e.convert(0,P));for(var ae=[],k=[],Y=[],V=N.createSparseMatrix({values:ae,index:k,ptr:Y,size:[I,O],datatype:C===N._datatype&&M===g._datatype?P:void 0}),ye=[],le=[],fe=0;fe<O;fe++){Y[fe]=k.length;for(var W=fe+1,K=0;K<j;K++){var ee=T[K][fe];if(!z(ee,X))for(var ie=E[K],oe=E[K+1],pe=ie;pe<oe;pe++){var me=_[pe];le[me]!==W?(le[me]=W,k.push(me),ye[me]=$(ee,y[pe])):ye[me]=H(ye[me],$(ee,y[pe]))}}for(var Te=Y[fe],ke=k.length,ze=Te;ze<ke;ze++){var Oe=k[ze];ae[ze]=ye[Oe]}}return Y[O]=k.length,V}function b(N,g){var y=N._values,_=N._index,E=N._ptr,C=N._datatype||N._data===void 0?N._datatype:N.getDataType(),T=g._values,M=g._index,I=g._ptr,j=g._datatype||g._data===void 0?g._datatype:g.getDataType(),O=N._size[0],P=g._size[1],H=y&&T,$,z=n,X=a;C&&j&&C===j&&typeof C=="string"&&C!=="mixed"&&($=C,z=e.find(n,[$,$]),X=e.find(a,[$,$]));for(var ae=H?[]:void 0,k=[],Y=[],V=N.createSparseMatrix({values:ae,index:k,ptr:Y,size:[O,P],datatype:C===N._datatype&&j===g._datatype?$:void 0}),ye=H?[]:void 0,le=[],fe,W,K,ee,ie,oe,pe,me,Te=0;Te<P;Te++){Y[Te]=k.length;var ke=Te+1;for(ie=I[Te],oe=I[Te+1],ee=ie;ee<oe;ee++)if(me=M[ee],H)for(W=E[me],K=E[me+1],fe=W;fe<K;fe++)pe=_[fe],le[pe]!==ke?(le[pe]=ke,k.push(pe),ye[pe]=X(T[ee],y[fe])):ye[pe]=z(ye[pe],X(T[ee],y[fe]));else for(W=E[me],K=E[me+1],fe=W;fe<K;fe++)pe=_[fe],le[pe]!==ke&&(le[pe]=ke,k.push(pe));if(H)for(var ze=Y[Te],Oe=k.length,$e=ze;$e<Oe;$e++){var G=k[$e];ae[$e]=ye[G]}}return Y[P]=k.length,V}return e(q2,a,{"Array, Array":e.referTo("Matrix, Matrix",N=>(g,y)=>{o(at(g),at(y));var _=N(r(g),r(y));return Ye(_)?_.valueOf():_}),"Matrix, Matrix":function(g,y){var _=g.size(),E=y.size();return o(_,E),_.length===1?E.length===1?c(g,y,_[0]):f(g,y):E.length===1?m(g,y):p(g,y)},"Matrix, Array":e.referTo("Matrix,Matrix",N=>(g,y)=>N(g,r(y))),"Array, Matrix":e.referToSelf(N=>(g,y)=>N(r(g,y.storage()),y)),"SparseMatrix, any":function(g,y){return l(g,y,a,!1)},"DenseMatrix, any":function(g,y){return u(g,y,a,!1)},"any, SparseMatrix":function(g,y){return l(y,g,a,!0)},"any, DenseMatrix":function(g,y){return u(y,g,a,!0)},"Array, any":function(g,y){return u(r(g),y,a,!1).valueOf()},"any, Array":function(g,y){return u(r(y),g,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(N=>(g,y,_)=>{for(var E=N(g,y),C=0;C<_.length;C++)E=N(E,_[C]);return E})})}),H2="nthRoot",pV=["typed","matrix","equalScalar","BigNumber","concat"],vV=q(H2,pV,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:a,concat:i}=t,s=Ms({typed:e}),l=Ra({typed:e,equalScalar:n}),u=qh({typed:e,equalScalar:n}),o=on({typed:e,equalScalar:n}),c=Zt({typed:e,matrix:r,concat:i});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(H2,{number:d2,"number, number":d2,BigNumber:m=>d(m,new a(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",m=>p=>m(r(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",m=>p=>m(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",m=>p=>m(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(m=>(p,h)=>{if(h.density()===1)return u(p,h,m);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(m=>(p,h)=>{if(h.density()===1)return s(p,h,m,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",m=>(p,h)=>m(r(p),h)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(p,h)=>{if(h.density()===1)return o(h,p,m,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:l,Ss:o,sS:!1}));function d(m,p){var h=a.precision,D=a.clone({precision:h+2}),w=new a(0),S=new D(1),x=p.isNegative();if(x&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(m.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(m.isZero())return x?new D(1/0):0;if(!m.isFinite())return x?w:m;var b=m.abs().pow(S.div(p));return b=m.isNeg()?b.neg():b,new a((x?S.div(b):b).toPrecision(h))}}),G2="sign",gV=["typed","BigNumber","Fraction","complex"],yV=q(G2,gV,t=>{var{typed:e,BigNumber:r,complex:n,Fraction:a}=t;return e(G2,{number:kg,Complex:function(s){return s.im===0?n(kg(s.re)):s.sign()},BigNumber:function(s){return new r(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return s.n===0n?new a(0):new a(s.s)},"Array | Matrix":e.referToSelf(i=>s=>ut(s,i,!0)),Unit:e.referToSelf(i=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(i,s.valueType())(s.value)})})}),xV="sqrt",bV=["config","typed","Complex"],wV=q(xV,bV,t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:a,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():a(s.toNumber())},Unit:function(s){return s.pow(.5)}});function a(i){return isNaN(i)?NaN:i>=0||e.predictable?Math.sqrt(i):new n(i,0).sqrt()}}),W2="square",NV=["typed"],_V=q(W2,NV,t=>{var{typed:e}=t;return e(W2,{number:RM,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),Q2="subtract",SV=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],EV=q(Q2,SV,t=>{var{typed:e,matrix:r,equalScalar:n,subtractScalar:a,unaryMinus:i,DenseMatrix:s,concat:l}=t,u=Ms({typed:e}),o=wn({typed:e}),c=Uh({typed:e,equalScalar:n}),f=Ao({typed:e,DenseMatrix:s}),d=jr({typed:e,DenseMatrix:s}),m=Zt({typed:e,matrix:r,concat:l});return e(Q2,{"any, any":a},m({elop:a,SS:c,DS:u,SD:o,Ss:d,sS:f}))}),X2="xgcd",AV=["typed","config","matrix","BigNumber"],DV=q(X2,AV,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e(X2,{"number, number":function(l,u){var o=OM(l,u);return r.matrix==="Array"?o:n(o)},"BigNumber, BigNumber":i});function i(s,l){var u,o,c,f=new a(0),d=new a(1),m=f,p=d,h=d,D=f;if(!s.isInt()||!l.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!l.isZero();)o=s.div(l).floor(),c=s.mod(l),u=m,m=p.minus(o.times(m)),p=u,u=h,h=D.minus(o.times(h)),D=u,s=l,l=c;var w;return s.lt(f)?w=[s.neg(),p.neg(),D.neg()]:w=[s,s.isZero()?0:p,D],r.matrix==="Array"?w:n(w)}}),K2="invmod",CV=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],TV=q(K2,CV,t=>{var{typed:e,config:r,BigNumber:n,xgcd:a,equal:i,smaller:s,mod:l,add:u,isInteger:o}=t;return e(K2,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!o(f)||!o(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=l(f,d),i(d,0))throw new Error("Divisor must be non zero");var m=a(f,d);m=m.valueOf();var[p,h]=m;return i(p,n(1))?(h=l(h,d),s(h,n(0))&&(h=u(h,d)),h):NaN}}),MV="matAlgo09xS0Sf",IV=["typed","equalScalar"],v4=q(MV,IV,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var l=a._values,u=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,p=i._ptr,h=i._size,D=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==h.length)throw new mt(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");var w=c[0],S=c[1],x,b=r,N=0,g=s;typeof f=="string"&&f===D&&f!=="mixed"&&(x=f,b=e.find(r,[x,x]),N=e.convert(0,x),g=e.find(s,[x,x]));var y=l&&d?[]:void 0,_=[],E=[],C=y?[]:void 0,T=[],M,I,j,O,P;for(I=0;I<S;I++){E[I]=_.length;var H=I+1;if(C)for(O=p[I],P=p[I+1],j=O;j<P;j++)M=m[j],T[M]=H,C[M]=d[j];for(O=o[I],P=o[I+1],j=O;j<P;j++)if(M=u[j],C){var $=T[M]===H?C[M]:N,z=g(l[j],$);b(z,N)||(_.push(M),y.push(z))}else _.push(M)}return E[S]=_.length,a.createSparseMatrix({values:y,index:_,ptr:E,size:[w,S],datatype:f===a._datatype&&D===i._datatype?x:void 0})}}),J2="dotMultiply",FV=["typed","matrix","equalScalar","multiplyScalar","concat"],PV=q(J2,FV,t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:a,concat:i}=t,s=Ra({typed:e,equalScalar:n}),l=v4({typed:e,equalScalar:n}),u=on({typed:e,equalScalar:n}),o=Zt({typed:e,matrix:r,concat:i});return e(J2,o({elop:a,SS:l,DS:s,Ss:u}))});function RV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return Qy(t,e,function(n,a){return n&a})}function Hc(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var n=t.plus(new e(1));return n.s=-n.s||null,e.config({precision:r}),n}function OV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var n=new r(-1);return t.isZero()||e.eq(n)||t.eq(e)?e:e.isZero()||t.eq(n)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?n:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:Qy(t,e,function(a,i){return a|i})}function Qy(t,e,r){var n=t.constructor,a,i,s=+(t.s<0),l=+(e.s<0);if(s){a=sd(Hc(t));for(var u=0;u<a.length;++u)a[u]^=1}else a=sd(t);if(l){i=sd(Hc(e));for(var o=0;o<i.length;++o)i[o]^=1}else i=sd(e);var c,f,d;a.length<=i.length?(c=a,f=i,d=s):(c=i,f=a,d=l);var m=c.length,p=f.length,h=r(s,l)^1,D=new n(h^1),w=new n(1),S=new n(2),x=n.precision;for(n.config({precision:1e9});m>0;)r(c[--m],f[--p])===h&&(D=D.plus(w)),w=w.times(S);for(;p>0;)r(d,f[--p])===h&&(D=D.plus(w)),w=w.times(S);return n.config({precision:x}),h===0&&(D.s=-D.s),D}function sd(t){for(var e=t.d,r=e[0]+"",n=1;n<e.length;++n){for(var a=e[n]+"",i=7-a.length;i--;)a="0"+a;r+=a}for(var s=r.length;r.charAt(s)==="0";)s--;var l=t.e,u=r.slice(0,s+1||1),o=u.length;if(l>0)if(++l>o)for(l-=o;l--;)u+="0";else l<o&&(u=u.slice(0,l)+"."+u.slice(l));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var m=0;m<c.length;++m)c[m]>1&&((c[m+1]===null||c[m+1]===void 0)&&(c[m+1]=0),c[m+1]+=c[m]>>1,c[m]&=1)}return c.reverse()}function BV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var n=new r(-1);return t.eq(n)?Hc(e):e.eq(n)?Hc(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?n:new r(t.isNegative()===e.isNegative()?1/0:-1/0):Qy(t,e,function(a,i){return a^i})}function jV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new r(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e))}function kV(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():t.isNegative()?new r(-1):t.isFinite()?new r(0):new r(NaN)}var Y2="bitAnd",$V=["typed","matrix","equalScalar","concat"],g4=q(Y2,$V,t=>{var{typed:e,matrix:r,equalScalar:n,concat:a}=t,i=Ra({typed:e,equalScalar:n}),s=qh({typed:e,equalScalar:n}),l=on({typed:e,equalScalar:n}),u=Zt({typed:e,matrix:r,concat:a});return e(Y2,{"number, number":jM,"BigNumber, BigNumber":RV,"bigint, bigint":(o,c)=>o&c},u({SS:s,DS:i,Ss:l}))}),Z2="bitNot",LV=["typed"],zV=q(Z2,LV,t=>{var{typed:e}=t;return e(Z2,{number:kM,BigNumber:Hc,bigint:r=>~r,"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),e_="bitOr",VV=["typed","matrix","equalScalar","DenseMatrix","concat"],y4=q(e_,VV,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=Ms({typed:e}),l=Gy({typed:e,equalScalar:n}),u=Ao({typed:e,DenseMatrix:a}),o=Zt({typed:e,matrix:r,concat:i});return e(e_,{"number, number":$M,"BigNumber, BigNumber":OV,"bigint, bigint":(c,f)=>c|f},o({SS:l,DS:s,Ss:u}))}),UV="matAlgo07xSSf",qV=["typed","SparseMatrix"],ri=q(UV,qV,t=>{var{typed:e,SparseMatrix:r}=t;return function(i,s,l){var u=i._size,o=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._size,f=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==c.length)throw new mt(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],m=u[1],p,h=0,D=l;typeof o=="string"&&o===f&&o!=="mixed"&&(p=o,h=e.convert(0,p),D=e.find(l,[p,p]));for(var w=[],S=[],x=new Array(m+1).fill(0),b=[],N=[],g=[],y=[],_=0;_<m;_++){var E=_+1,C=0;n(i,_,g,b,E),n(s,_,y,N,E);for(var T=0;T<d;T++){var M=g[T]===E?b[T]:h,I=y[T]===E?N[T]:h,j=D(M,I);j!==0&&j!==!1&&(S.push(T),w.push(j),C++)}x[_+1]=x[_]+C}return new r({values:w,index:S,ptr:x,size:[d,m],datatype:o===i._datatype&&f===s._datatype?p:void 0})};function n(a,i,s,l,u){for(var o=a._values,c=a._index,f=a._ptr,d=f[i],m=f[i+1];d<m;d++){var p=c[d];s[p]=u,l[p]=o[d]}}}),t_="bitXor",HV=["typed","matrix","DenseMatrix","concat","SparseMatrix"],GV=q(t_,HV,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:a,SparseMatrix:i}=t,s=wn({typed:e}),l=ri({typed:e,SparseMatrix:i}),u=jr({typed:e,DenseMatrix:n}),o=Zt({typed:e,matrix:r,concat:a});return e(t_,{"number, number":LM,"BigNumber, BigNumber":BV,"bigint, bigint":(c,f)=>c^f},o({SS:l,DS:s,Ss:u}))}),r_="arg",WV=["typed"],QV=q(r_,WV,t=>{var{typed:e}=t;return e(r_,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),n_="conj",XV=["typed"],KV=q(n_,XV,t=>{var{typed:e}=t;return e(n_,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:e.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),a_="im",JV=["typed"],YV=q(a_,JV,t=>{var{typed:e}=t;return e(a_,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),i_="re",ZV=["typed"],eU=q(i_,ZV,t=>{var{typed:e}=t;return e(i_,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),s_="not",tU=["typed"],rU=q(s_,tU,t=>{var{typed:e}=t;return e(s_,{"null | undefined":()=>!0,number:HM,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:r=>!r,Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),o_="nullish",nU=["typed","matrix","size","flatten","deepEqual"],x4=q(o_,nU,t=>{var{typed:e,matrix:r,size:n,flatten:a,deepEqual:i}=t,s=wn({typed:e}),l=ga({typed:e}),u=h4({typed:e});return e(o_,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(o,c)=>o,"null, any":(o,c)=>c,"undefined, any":(o,c)=>c,"SparseMatrix, Array | Matrix":(o,c)=>{var f=n(o),d=n(c);if(i(f,d))return o;throw new mt(f,d)},"DenseMatrix, DenseMatrix":e.referToSelf(o=>(c,f)=>u(c,f,o)),"DenseMatrix, SparseMatrix":e.referToSelf(o=>(c,f)=>s(c,f,o,!1)),"DenseMatrix, Array":e.referToSelf(o=>(c,f)=>u(c,r(f),o)),"DenseMatrix, any":e.referToSelf(o=>(c,f)=>l(c,f,o,!1)),"Array, Array":e.referToSelf(o=>(c,f)=>u(r(c),r(f),o).valueOf()),"Array, DenseMatrix":e.referToSelf(o=>(c,f)=>u(r(c),f,o)),"Array, SparseMatrix":e.referToSelf(o=>(c,f)=>s(r(c),f,o,!1)),"Array, any":e.referToSelf(o=>(c,f)=>l(r(c),f,o,!1).valueOf())})}),l_="or",aU=["typed","matrix","equalScalar","DenseMatrix","concat"],b4=q(l_,aU,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=wn({typed:e}),l=Uh({typed:e,equalScalar:n}),u=jr({typed:e,DenseMatrix:a}),o=Zt({typed:e,matrix:r,concat:i});return e(l_,{"number, number":$g,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":$g,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},o({SS:l,DS:s,Ss:u}))}),u_="xor",iU=["typed","matrix","DenseMatrix","concat","SparseMatrix"],sU=q(u_,iU,t=>{var{typed:e,matrix:r,DenseMatrix:n,concat:a,SparseMatrix:i}=t,s=wn({typed:e}),l=ri({typed:e,SparseMatrix:i}),u=jr({typed:e,DenseMatrix:n}),o=Zt({typed:e,matrix:r,concat:a});return e(u_,{"number, number":Lg,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":Lg,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},o({SS:l,DS:s,Ss:u}))}),c_="concat",oU=["typed","matrix","isInteger"],w4=q(c_,oU,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(c_,{"...Array | Matrix | number | BigNumber":function(i){var s,l=i.length,u=-1,o,c=!1,f=[];for(s=0;s<l;s++){var d=i[s];if(Ye(d)&&(c=!0),Xe(d)||lt(d)){if(s!==l-1)throw new Error("Dimension must be specified as last argument");if(o=u,u=d.valueOf(),!n(u))throw new TypeError("Integer number expected for dimension");if(u<0||s>0&&u>o)throw new Fa(u,o+1)}else{var m=nt(d).valueOf(),p=at(m);if(f[s]=m,o=u,u=p.length-1,s>0&&u!==o)throw new mt(o+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var h=f.shift();f.length;)h=bM(h,f.shift(),u);return c?r(h):h},"...string":function(i){return i.join("")}})}),f_="column",lU=["typed","Index","matrix","range"],N4=q(f_,lU,t=>{var{typed:e,Index:r,matrix:n,range:a}=t;return e(f_,{"Matrix, number":i,"Array, number":function(l,u){return i(n(nt(l)),u).valueOf()}});function i(s,l){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yt(l,s.size()[1]);var u=a(0,s.size()[0]),o=new r(u,[l]),c=s.subset(o);return Ye(c)?c:n([[c]])}}),d_="count",uU=["typed","size","prod"],cU=q(d_,uU,t=>{var{typed:e,size:r,prod:n}=t;return e(d_,{string:function(i){return i.length},"Matrix | Array":function(i){return n(r(i))}})}),m_="cross",fU=["typed","matrix","subtract","multiply"],dU=q(m_,fU,t=>{var{typed:e,matrix:r,subtract:n,multiply:a}=t;return e(m_,{"Matrix, Matrix":function(l,u){return r(i(l.toArray(),u.toArray()))},"Matrix, Array":function(l,u){return r(i(l.toArray(),u))},"Array, Matrix":function(l,u){return r(i(l,u.toArray()))},"Array, Array":i});function i(s,l){var u=Math.max(at(s).length,at(l).length);s=Om(s),l=Om(l);var o=at(s),c=at(l);if(o.length!==1||c.length!==1||o[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+o.join(", ")+"], B = ["+c.join(", ")+"])");var f=[n(a(s[1],l[2]),a(s[2],l[1])),n(a(s[2],l[0]),a(s[0],l[2])),n(a(s[0],l[1]),a(s[1],l[0]))];return u>1?[f]:f}}),h_="diag",mU=["typed","matrix","DenseMatrix","SparseMatrix"],hU=q(h_,mU,t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:a}=t;return e(h_,{Array:function(o){return i(o,0,at(o),null)},"Array, number":function(o,c){return i(o,c,at(o),null)},"Array, BigNumber":function(o,c){return i(o,c.toNumber(),at(o),null)},"Array, string":function(o,c){return i(o,0,at(o),c)},"Array, number, string":function(o,c,f){return i(o,c,at(o),f)},"Array, BigNumber, string":function(o,c,f){return i(o,c.toNumber(),at(o),f)},Matrix:function(o){return i(o,0,o.size(),o.storage())},"Matrix, number":function(o,c){return i(o,c,o.size(),o.storage())},"Matrix, BigNumber":function(o,c){return i(o,c.toNumber(),o.size(),o.storage())},"Matrix, string":function(o,c){return i(o,0,o.size(),c)},"Matrix, number, string":function(o,c,f){return i(o,c,o.size(),f)},"Matrix, BigNumber, string":function(o,c,f){return i(o,c.toNumber(),o.size(),f)}});function i(u,o,c,f){if(!We(o))throw new TypeError("Second parameter in function diag must be an integer");var d=o>0?o:0,m=o<0?-o:0;switch(c.length){case 1:return s(u,o,f,c[0],m,d);case 2:return l(u,o,f,c,m,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(u,o,c,f,d,m){var p=[f+d,f+m];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var h=c==="sparse"?a.diagonal(p,u,o):n.diagonal(p,u,o);return c!==null?h:h.valueOf()}function l(u,o,c,f,d,m){if(Ye(u)){var p=u.diagonal(o);return c!==null?c!==p.storage()?r(p,c):p:p.valueOf()}for(var h=Math.min(f[0]-d,f[1]-m),D=[],w=0;w<h;w++)D[w]=u[w+d][w+m];return c!==null?r(D):D}}),pU="filter",vU=["typed"],_4=q(pU,vU,t=>{var{typed:e}=t;return e("filter",{"Array, function":p_,"Matrix, function":function(n,a){return n.create(p_(n.valueOf(),a),n.datatype())},"Array, RegExp":i2,"Matrix, RegExp":function(n,a){return n.create(i2(n.valueOf(),a),n.datatype())}})});function p_(t,e){var r=po(e,t,"filter");return r.isUnary?a2(t,r.fn):a2(t,function(n,a,i){return r.fn(n,[a],i)})}var v_="flatten",gU=["typed"],yU=q(v_,gU,t=>{var{typed:e}=t;return e(v_,{Array:function(n){return Ct(n)},DenseMatrix:function(n){return n.create(Ct(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),Gg="forEach",xU=["typed"],S4=q(Gg,xU,t=>{var{typed:e}=t;return e(Gg,{"Array, function":bU,"Matrix, function":function(n,a){n.forEach(a)}})});function bU(t,e){var r=po(e,t,Gg);NM(t,r.fn,r.isUnary)}var g_="getMatrixDataType",wU=["typed"],NU=q(g_,wU,t=>{var{typed:e}=t;return e(g_,{Array:function(n){return zh(n,Xt)},Matrix:function(n){return n.getDataType()}})}),y_="identity",_U=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],SU=q(y_,_U,t=>{var{typed:e,config:r,matrix:n,BigNumber:a,DenseMatrix:i,SparseMatrix:s}=t;return e(y_,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return u(c,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return l(c)},"Array, string":function(c,f){return l(c,f)},Matrix:function(c){return l(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return l(c.valueOf(),f)}});function l(o,c){switch(o.length){case 0:return c?n(c):[];case 1:return u(o[0],o[0],c);case 2:return u(o[0],o[1],c);default:throw new Error("Vector containing two values expected")}}function u(o,c,f){var d=lt(o)||lt(c)?a:null;if(lt(o)&&(o=o.toNumber()),lt(c)&&(c=c.toNumber()),!We(o)||o<1)throw new Error("Parameters in function identity must be positive integers");if(!We(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var m=d?new a(1):1,p=d?new d(0):0,h=[o,c];if(f){if(f==="sparse")return s.diagonal(h,m,0,p);if(f==="dense")return i.diagonal(h,m,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var D=ql([],h,p),w=o<c?o:c,S=0;S<w;S++)D[S][S]=m;return D}}),x_="kron",EU=["typed","matrix","multiplyScalar"],AU=q(x_,EU,t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e(x_,{"Matrix, Matrix":function(l,u){return r(i(l.toArray(),u.toArray()))},"Matrix, Array":function(l,u){return r(i(l.toArray(),u))},"Array, Matrix":function(l,u){return r(i(l,u.toArray()))},"Array, Array":i});function a(s,l){return s.flatMap(u=>l.map(o=>n(u,o)))}function i(s,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(u<0){var o=at(s).length,c=at(l).length;for(u=Math.max(o,c);o++<u;)s=[s];for(;c++<u;)l=[l]}return u===1?a(s,l):s.flatMap(f=>l.map(d=>i(f,d,u-1)))}}),ov="map",DU=["typed"],E4=q(ov,DU,t=>{var{typed:e}=t;return e(ov,{"Array, function":l,"Matrix, function":function(o,c){return o.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(u,o,c)=>r([u,o,...c.slice(0,c.length-1)],c[c.length-1])});function r(u,o){if(typeof o!="function")throw new Error("Last argument must be a callback function");var c=u[0].isMatrix,f=u.map(N=>N.isMatrix?N.size():at(N)),d=jm(...f),m=u.length,p=c?(N,g)=>N.get(g):km,h=u.map((N,g)=>{var y=f[g].map(()=>0);return N.isMatrix?N.get(y):km(N,y)}),D=e.isTypedFunction(o)?s(o,h,d.map(()=>0),u):i(o,m);if(D<2){var w=a(D,o,null);return n(u,w)}var S=c?u.map(N=>N.isMatrix?N.create(ro(N.toArray(),d),N.datatype()):u[0].create(ro(N.valueOf(),d))):u.map(N=>N.isMatrix?ro(N.toArray(),d):ro(N,d)),x=a(D,o,S),b=(N,g)=>x([N,...S.slice(1).map(y=>p(y,g))],g);return c?S[0].map(b):l(S[0],b)}function n(u,o){var c=u[0],f=u.map(N=>N.isMatrix?N.valueOf():N),d=u.map(N=>N.isMatrix?N.size():at(N)),m=jm(...d),p=d.map(N=>m.length-N.length),h=m.length-1,D=o.length>1,w=D?[]:null,S=b(f,0);if(c.isMatrix){var x=c.create();return x._data=S,x._size=m,x}else return S;function b(N){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=m[g],_=Array(y);if(g<h)for(var E=function(j){w&&(w[g]=j),_[j]=b(N.map((O,P)=>p[P]>g?O:O.length===1?O[0]:O[j]),g+1)},C=0;C<y;C++)E(C);else for(var T=function(j){w&&(w[g]=j),_[j]=o(N.map(O=>O.length===1?O[0]:O[j]),w?w.slice():void 0)},M=0;M<y;M++)T(M);return _}}function a(u,o,c){switch(u){case 0:return f=>o(...f);case 1:return(f,d)=>o(...f,d);case 2:return(f,d)=>o(...f,d,...c)}}function i(u,o){var c=u.toString();if(/arguments/.test(c))return 2;var f=c.match(/\(.*?\)/);return/\.\.\./.test(f)||u.length>o+1?2:u.length===o+1?1:0}function s(u,o,c,f){return e.resolve(u,[...o,c,...f])!==null?2:e.resolve(u,[...o,c])!==null?1:(e.resolve(u,o)!==null,0)}function l(u,o){var c=po(o,u,ov);return Bg(u,c.fn,c.isUnary)}}),b_="diff",CU=["typed","matrix","subtract","number"],A4=q(b_,CU,t=>{var{typed:e,matrix:r,subtract:n,number:a}=t;return e(b_,{"Array | Matrix":function(c){return Ye(c)?r(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!We(f))throw new RangeError("Dimension must be a whole number");return Ye(c)?r(i(c.toArray(),f)):i(c,f)},"Array, BigNumber":e.referTo("Array,number",o=>(c,f)=>o(c,a(f))),"Matrix, BigNumber":e.referTo("Matrix,number",o=>(c,f)=>o(c,a(f)))});function i(o,c){if(Ye(o)&&(o=o.toArray()),!Array.isArray(o))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return o.forEach(d=>{f.push(i(d,c-1))}),f}else{if(c===0)return s(o);throw RangeError("Cannot have negative dimension")}}function s(o){for(var c=[],f=o.length,d=1;d<f;d++)c.push(l(o[d-1],o[d]));return c}function l(o,c){Ye(o)&&(o=o.toArray()),Ye(c)&&(c=c.toArray());var f=Array.isArray(o),d=Array.isArray(c);if(f&&d)return u(o,c);if(!f&&!d)return n(c,o);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(o,c){if(o.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=o.length,m=0;m<d;m++)f.push(l(o[m],c[m]));return f}}),TU="ones",MU=["typed","config","matrix","BigNumber"],IU=q(TU,MU,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e("ones",{"":function(){return r.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(o){var c=o[o.length-1];if(typeof c=="string"){var f=o.pop();return i(o,f)}else return r.matrix==="Array"?i(o):i(o,"default")},Array:i,Matrix:function(o){var c=o.storage();return i(o.valueOf(),c)},"Array | Matrix, string":function(o,c){return i(o.valueOf(),c)}});function i(u,o){var c=s(u),f=c?new a(1):1;if(l(u),o){var d=n(o);return u.length>0?d.resize(u,f):d}else{var m=[];return u.length>0?ql(m,u,f):m}}function s(u){var o=!1;return u.forEach(function(c,f,d){lt(c)&&(o=!0,d[f]=c.toNumber())}),o}function l(u){u.forEach(function(o){if(typeof o!="number"||!We(o)||o<0)throw new Error("Parameters in function ones must be positive integers")})}});function Xy(){throw new Error('No "bignumber" implementation available')}function D4(){throw new Error('No "fraction" implementation available')}function FU(){throw new Error('No "matrix" implementation available')}var w_="range",PU=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],C4=q(w_,PU,t=>{var{typed:e,config:r,matrix:n,bignumber:a,smaller:i,smallerEq:s,larger:l,largerEq:u,add:o,isZero:c,isPositive:f}=t;return e(w_,{string:m,"string, boolean":m,number:function(w){throw new TypeError("Too few arguments to function range(): ".concat(w))},boolean:function(w){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(w,", number|bigint|BigNumber|Fraction"))},"number, number":function(w,S){return d(p(w,S,1,!1))},"number, number, number":function(w,S,x){return d(p(w,S,x,!1))},"number, number, boolean":function(w,S,x){return d(p(w,S,1,x))},"number, number, number, boolean":function(w,S,x,b){return d(p(w,S,x,b))},"bigint, bigint|number":function(w,S){return d(p(w,S,1n,!1))},"number, bigint":function(w,S){return d(p(BigInt(w),S,1n,!1))},"bigint, bigint|number, bigint|number":function(w,S,x){return d(p(w,S,BigInt(x),!1))},"number, bigint, bigint|number":function(w,S,x){return d(p(BigInt(w),S,BigInt(x),!1))},"bigint, bigint|number, boolean":function(w,S,x){return d(p(w,S,1n,x))},"number, bigint, boolean":function(w,S,x){return d(p(BigInt(w),S,1n,x))},"bigint, bigint|number, bigint|number, boolean":function(w,S,x,b){return d(p(w,S,BigInt(x),b))},"number, bigint, bigint|number, boolean":function(w,S,x,b){return d(p(BigInt(w),S,BigInt(x),b))},"BigNumber, BigNumber":function(w,S){var x=w.constructor;return d(p(w,S,new x(1),!1))},"BigNumber, BigNumber, BigNumber":function(w,S,x){return d(p(w,S,x,!1))},"BigNumber, BigNumber, boolean":function(w,S,x){var b=w.constructor;return d(p(w,S,new b(1),x))},"BigNumber, BigNumber, BigNumber, boolean":function(w,S,x,b){return d(p(w,S,x,b))},"Fraction, Fraction":function(w,S){return d(p(w,S,1,!1))},"Fraction, Fraction, Fraction":function(w,S,x){return d(p(w,S,x,!1))},"Fraction, Fraction, boolean":function(w,S,x){return d(p(w,S,1,x))},"Fraction, Fraction, Fraction, boolean":function(w,S,x,b){return d(p(w,S,x,b))},"Unit, Unit, Unit":function(w,S,x){return d(p(w,S,x,!1))},"Unit, Unit, Unit, boolean":function(w,S,x,b){return d(p(w,S,x,b))}});function d(D){return r.matrix==="Matrix"?n?n(D):FU():D}function m(D,w){var S=h(D);if(!S)throw new SyntaxError('String "'+D+'" is no valid range');return r.number==="BigNumber"?(a===void 0&&Xy(),d(p(a(S.start),a(S.end),a(S.step)))):d(p(S.start,S.end,S.step,w))}function p(D,w,S,x){var b=[];if(c(S))throw new Error("Step must be non-zero");for(var N=f(S)?x?s:i:x?u:l,g=D;N(g,w);)b.push(g),g=o(g,S);return b}function h(D){var w=D.split(":"),S=w.map(function(b){return Number(b)}),x=S.some(function(b){return isNaN(b)});if(x)return null;switch(S.length){case 2:return{start:S[0],end:S[1],step:1};case 3:return{start:S[0],end:S[2],step:S[1]};default:return null}}}),N_="reshape",RU=["typed","isInteger","matrix"],OU=q(N_,RU,t=>{var{typed:e,isInteger:r}=t;return e(N_,{"Matrix, Array":function(a,i){return a.reshape(i,!0)},"Array, Array":function(a,i){return i.forEach(function(s){if(!r(s))throw new TypeError("Invalid size for dimension: "+s)}),Vy(a,i)}})}),BU="resize",jU=["config","matrix"],kU=q(BU,jU,t=>{var{config:e,matrix:r}=t;return function(i,s,l){if(arguments.length!==2&&arguments.length!==3)throw new Do("resize",arguments.length,2,3);if(Ye(s)&&(s=s.valueOf()),lt(s[0])&&(s=s.map(function(c){return lt(c)?c.toNumber():c})),Ye(i))return i.resize(s,l,!0);if(typeof i=="string")return n(i,s,l);var u=Array.isArray(i)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(i);)i=i[0];return nt(i)}else{Array.isArray(i)||(i=[i]),i=nt(i);var o=ql(i,s,l);return u?r(o):o}};function n(a,i,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(i.length!==1)throw new mt(i.length,1);var l=i[0];if(typeof l!="number"||!We(l))throw new TypeError("Invalid size, must contain positive integers (size: "+pt(i)+")");if(a.length>l)return a.substring(0,l);if(a.length<l){for(var u=a,o=0,c=l-a.length;o<c;o++)u+=s;return u}else return a}}),__="rotate",$U=["typed","multiply","rotationMatrix"],LU=q(__,$U,t=>{var{typed:e,multiply:r,rotationMatrix:n}=t;return e(__,{"Array , number | BigNumber | Complex | Unit":function(s,l){a(s,2);var u=r(n(l),s);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,l){return a(s,2),r(n(l),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,l,u){a(s,3);var o=r(n(l,u),s);return o},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,l,u){return a(s,3),r(n(l,u),s)}});function a(i,s){var l=Array.isArray(i)?at(i):i.size();if(l.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(l.length===2&&l[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(l[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),S_="rotationMatrix",zU=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],VU=q(S_,zU,t=>{var{typed:e,config:r,multiplyScalar:n,addScalar:a,unaryMinus:i,norm:s,BigNumber:l,matrix:u,DenseMatrix:o,SparseMatrix:c,cos:f,sin:d}=t;return e(S_,{"":function(){return r.matrix==="Matrix"?u([]):[]},string:function(x){return u(x)},"number | BigNumber | Complex | Unit":function(x){return m(x,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(x,b){return m(x,b)},"number | BigNumber | Complex | Unit, Array":function(x,b){var N=u(b);return p(N),w(x,N,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(x,b){p(b);var N=b.storage()||(r.matrix==="Matrix"?"dense":void 0);return w(x,b,N)},"number | BigNumber | Complex | Unit, Array, string":function(x,b,N){var g=u(b);return p(g),w(x,g,N)},"number | BigNumber | Complex | Unit, Matrix, string":function(x,b,N){return p(b),w(x,b,N)}});function m(S,x){var b=lt(S),N=b?new l(-1):-1,g=f(S),y=d(S),_=[[g,n(N,y)],[y,g]];return D(_,x)}function p(S){var x=S.size();if(x.length<1||x[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function h(S){return S.reduce((x,b)=>n(x,b))}function D(S,x){if(x){if(x==="sparse")return new c(S);if(x==="dense")return new o(S);throw new TypeError('Unknown matrix type "'.concat(x,'"'))}return S}function w(S,x,b){var N=s(x);if(N===0)throw new RangeError("Rotation around zero vector");var g=lt(S)?l:null,y=g?new g(1):1,_=g?new g(-1):-1,E=g?new g(x.get([0])/N):x.get([0])/N,C=g?new g(x.get([1])/N):x.get([1])/N,T=g?new g(x.get([2])/N):x.get([2])/N,M=f(S),I=a(y,i(M)),j=d(S),O=a(M,h([E,E,I])),P=a(h([E,C,I]),h([_,T,j])),H=a(h([E,T,I]),h([C,j])),$=a(h([E,C,I]),h([T,j])),z=a(M,h([C,C,I])),X=a(h([C,T,I]),h([_,E,j])),ae=a(h([E,T,I]),h([_,C,j])),k=a(h([C,T,I]),h([E,j])),Y=a(M,h([T,T,I])),V=[[O,P,H],[$,z,X],[ae,k,Y]];return D(V,b)}}),E_="row",UU=["typed","Index","matrix","range"],T4=q(E_,UU,t=>{var{typed:e,Index:r,matrix:n,range:a}=t;return e(E_,{"Matrix, number":i,"Array, number":function(l,u){return i(n(nt(l)),u).valueOf()}});function i(s,l){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yt(l,s.size()[0]);var u=a(0,s.size()[1]),o=new r([l],u),c=s.subset(o);return Ye(c)?c:n([[c]])}}),A_="size",qU=["typed"],HU=q(A_,qU,t=>{var{typed:e}=t;return e(A_,{Matrix:r=>r.size(),Array:at,string:r=>[r.length],"number | Complex | BigNumber | Unit | boolean | null":r=>[]})}),D_="squeeze",GU=["typed"],WU=q(D_,GU,t=>{var{typed:e}=t;return e(D_,{Array:function(n){return Om(nt(n))},Matrix:function(n){var a=Om(n.toArray());return Array.isArray(a)?n.create(a,n.datatype()):a},any:function(n){return nt(n)}})}),C_="subset",QU=["typed","matrix","zeros","add"],M4=q(C_,QU,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t;return e(C_,{"Matrix, Index":function(l,u){return Ul(u)?r():(Rm(l,u),l.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(l,u){var o=s(r(l),u);return u.isScalar()?o:o.valueOf()}}),"Object, Index":KU,"string, Index":XU,"Matrix, Index, any, any":function(l,u,o,c){return Ul(u)?l:(Rm(l,u),l.clone().subset(u,i(o,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(l,u,o,c){var f=s(r(l),u,o,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(l,u,o){return s(r(l),u,o,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(l,u,o){return s(l,u,o,void 0)}}),"string, Index, string":T_,"string, Index, string, string":T_,"Object, Index, any":JU});function i(s,l){if(typeof s=="string")throw new Error("can't boradcast a string");if(l.isScalar())return s;var u=l.size();if(u.every(o=>o>0))try{return a(s,n(u))}catch{return s}else return s}});function XU(t,e){if(!Rh(e))throw new TypeError("Index expected");if(Ul(e))return"";if(Rm(Array.from(t),e),e.size().length!==1)throw new mt(e.size().length,1);var r=t.length;Yt(e.min()[0],r),Yt(e.max()[0],r);var n=e.dimension(0),a="";function i(s){a+=t.charAt(s)}return Number.isInteger(n)?i(n):n.forEach(i),a}function T_(t,e,r,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Ul(e))return t;if(Rm(Array.from(t),e),e.size().length!==1)throw new mt(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var a=e.dimension(0),i=Number.isInteger(a)?1:a.size()[0];if(i!==r.length)throw new mt(a.size()[0],r.length);var s=t.length;Yt(e.min()[0]),Yt(e.max()[0]);for(var l=[],u=0;u<s;u++)l[u]=t.charAt(u);function o(d,m){l[d]=r.charAt(m[0])}if(Number.isInteger(a)?o(a,[0]):a.forEach(o),l.length>s)for(var c=s-1,f=l.length;c<f;c++)l[c]||(l[c]=n);return l.join("")}function KU(t,e){if(!Ul(e)){if(e.size().length!==1)throw new mt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return En(t,r)}}function JU(t,e,r){if(Ul(e))return t;if(e.size().length!==1)throw new mt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var a=nt(t);return zl(a,n,r),a}var M_="transpose",YU=["typed","matrix"],ZU=q(M_,YU,t=>{var{typed:e,matrix:r}=t;return e(M_,{Array:s=>n(r(s)).valueOf(),Matrix:n,any:nt});function n(s){var l=s.size(),u;switch(l.length){case 1:u=s.clone();break;case 2:{var o=l[0],c=l[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+pt(l)+")");switch(s.storage()){case"dense":u=a(s,o,c);break;case"sparse":u=i(s,o,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+pt(l)+")")}return u}function a(s,l,u){for(var o=s._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var m=0;m<l;m++)f[m]=nt(o[m][d])}return s.createDenseMatrix({data:c,size:[u,l],datatype:s._datatype})}function i(s,l,u){for(var o=s._values,c=s._index,f=s._ptr,d=o?[]:void 0,m=[],p=[],h=[],D=0;D<l;D++)h[D]=0;var w,S,x;for(w=0,S=c.length;w<S;w++)h[c[w]]++;for(var b=0,N=0;N<l;N++)p.push(b),b+=h[N],h[N]=p[N];for(p.push(b),x=0;x<u;x++)for(var g=f[x],y=f[x+1],_=g;_<y;_++){var E=h[c[_]]++;m[E]=x,o&&(d[E]=nt(o[_]))}return s.createSparseMatrix({values:d,index:m,ptr:p,size:[u,l],datatype:s._datatype})}}),I_="ctranspose",eq=["typed","transpose","conj"],tq=q(I_,eq,t=>{var{typed:e,transpose:r,conj:n}=t;return e(I_,{any:function(i){return n(r(i))}})}),F_="zeros",rq=["typed","config","matrix","BigNumber"],nq=q(F_,rq,t=>{var{typed:e,config:r,matrix:n,BigNumber:a}=t;return e(F_,{"":function(){return r.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(o){var c=o[o.length-1];if(typeof c=="string"){var f=o.pop();return i(o,f)}else return r.matrix==="Array"?i(o):i(o,"default")},Array:i,Matrix:function(o){var c=o.storage();return i(o.valueOf(),c)},"Array | Matrix, string":function(o,c){return i(o.valueOf(),c)}});function i(u,o){var c=s(u),f=c?new a(0):0;if(l(u),o){var d=n(o);return u.length>0?d.resize(u,f):d}else{var m=[];return u.length>0?ql(m,u,f):m}}function s(u){var o=!1;return u.forEach(function(c,f,d){lt(c)&&(o=!0,d[f]=c.toNumber())}),o}function l(u){u.forEach(function(o){if(typeof o!="number"||!We(o)||o<0)throw new Error("Parameters in function zeros must be positive integers")})}}),P_="fft",aq=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],iq=q(P_,aq,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:a,divideScalar:i,exp:s,tau:l,i:u,dotDivide:o,conj:c,pow:f,ceil:d,log2:m}=t;return e(P_,{Array:p,Matrix:function(x){return x.create(p(x.valueOf()),x.datatype())}});function p(S){var x=at(S);return x.length===1?w(S,x[0]):h(S.map(b=>p(b,x.slice(1))),0)}function h(S,x){var b=at(S);if(x!==0)return new Array(b[0]).fill(0).map((g,y)=>h(S[y],x-1));if(b.length===1)return w(S);function N(g){var y=at(g);return new Array(y[1]).fill(0).map((_,E)=>new Array(y[0]).fill(0).map((C,T)=>g[T][E]))}return N(h(N(S),1))}function D(S){for(var x=S.length,b=s(i(a(-1,a(u,l)),x)),N=[],g=1-x;g<x;g++)N.push(f(b,i(f(g,2),2)));for(var y=f(2,d(m(x+x-1))),_=[...new Array(x).fill(0).map((P,H)=>a(S[H],N[x-1+H])),...new Array(y-x).fill(0)],E=[...new Array(x+x-1).fill(0).map((P,H)=>i(1,N[H])),...new Array(y-(x+x-1)).fill(0)],C=w(_),T=w(E),M=new Array(y).fill(0).map((P,H)=>a(C[H],T[H])),I=o(c(p(c(M))),y),j=[],O=x-1;O<x+x-1;O++)j.push(a(I[O],N[O]));return j}function w(S){var x=S.length;if(x===1)return[S[0]];if(x%2===0){for(var b=[...w(S.filter((_,E)=>E%2===0)),...w(S.filter((_,E)=>E%2===1))],N=0;N<x/2;N++){var g=b[N],y=a(b[N+x/2],s(a(a(l,u),i(-N,x))));b[N]=n(g,y),b[N+x/2]=n(g,a(-1,y))}return b}else return D(S)}}),R_="ifft",sq=["typed","fft","dotDivide","conj"],oq=q(R_,sq,t=>{var{typed:e,fft:r,dotDivide:n,conj:a}=t;return e(R_,{"Array | Matrix":function(s){var l=Ye(s)?s.size():at(s);return n(a(r(a(s))),l.reduce((u,o)=>u*o,1))}})});function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}function lq(t,e){if(Gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uq(t){var e=lq(t,"string");return Gc(e)=="symbol"?e:e+""}function Mr(t,e,r){return(e=uq(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O_(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var fq="solveODE",dq=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],mq=q(fq,dq,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,max:s,map:l,abs:u,isPositive:o,isNegative:c,larger:f,smaller:d,matrix:m,bignumber:p,unaryMinus:h}=t;function D(_){return function(E,C,T,M){var I=!(C.length===2&&(C.every(g)||C.every(Wn)));if(I)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var j=C[0],O=C[1],P=f(O,j),H=M.firstStep;if(H!==void 0&&!o(H))throw new Error('"firstStep" must be positive');var $=M.maxStep;if($!==void 0&&!o($))throw new Error('"maxStep" must be positive');var z=M.minStep;if(z&&c(z))throw new Error('"minStep" must be positive or zero');var X=[j,O,H,z,$].filter(L=>L!==void 0);if(!(X.every(g)||X.every(Wn)))throw new Error('Inconsistent type of "t" dependant variables');for(var ae=1,k=M.tol?M.tol:1e-4,Y=M.minDelta?M.minDelta:.2,V=M.maxDelta?M.maxDelta:5,ye=M.maxIter?M.maxIter:1e4,le=[j,O,...T,$,z].some(lt),[fe,W,K,ee]=le?[p(_.a),p(_.c),p(_.b),p(_.bp)]:[_.a,_.c,_.b,_.bp],ie=H?P?H:h(H):i(n(O,j),ae),oe=[j],pe=[T],me=n(K,ee),Te=0,ke=0,ze=b(P),Oe=N(P);ze(oe[Te],O);){var $e=[];ie=Oe(oe[Te],O,ie),$e.push(E(oe[Te],pe[Te]));for(var G=1;G<W.length;++G)$e.push(E(r(oe[Te],a(W[G],ie)),r(pe[Te],a(ie,fe[G],$e))));var te=s(u(l(a(me,$e),L=>Wn(L)?L.value:L)));te<k&&k/te>1/4&&(oe.push(r(oe[Te],ie)),pe.push(r(pe[Te],a(ie,K,$e))),Te++);var ce=.84*(k/te)**(1/5);if(d(ce,Y)?ce=Y:f(ce,V)&&(ce=V),ce=le?p(ce):ce,ie=a(ie,ce),$&&f(u(ie),$)?ie=P?$:h($):z&&d(u(ie),z)&&(ie=P?z:h(z)),ke++,ke>ye)throw new Error("Maximum number of iterations reached, try changing options")}return{t:oe,y:pe}}}function w(_,E,C,T){var M=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],I=[null,1/2,3/4,1],j=[2/9,1/3,4/9,0],O=[7/24,1/4,1/3,1/8],P={a:M,c:I,b:j,bp:O};return D(P)(_,E,C,T)}function S(_,E,C,T){var M=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],I=[null,1/5,3/10,4/5,8/9,1,1],j=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],O=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],P={a:M,c:I,b:j,bp:O};return D(P)(_,E,C,T)}function x(_,E,C,T){var M=T.method?T.method:"RK45",I={RK23:w,RK45:S};if(M.toUpperCase()in I){var j=cq({},T);return delete j.method,I[M.toUpperCase()](_,E,C,j)}else{var O=Object.keys(I).map(H=>'"'.concat(H,'"')),P="".concat(O.slice(0,-1).join(", ")," and ").concat(O.slice(-1));throw new Error('Unavailable method "'.concat(M,'". Available methods are ').concat(P))}}function b(_){return _?d:f}function N(_){var E=_?f:d;return function(C,T,M){var I=r(C,M);return E(I,T)?n(T,C):M}}function g(_){return lt(_)||Xe(_)}function y(_,E,C,T){var M=x(_,E.toArray(),C.toArray(),T);return{t:m(M.t),y:m(M.y)}}return e("solveODE",{"function, Array, Array, Object":x,"function, Matrix, Matrix, Object":y,"function, Array, Array":(_,E,C)=>x(_,E,C,{}),"function, Matrix, Matrix":(_,E,C)=>y(_,E,C,{}),"function, Array, number | BigNumber | Unit":(_,E,C)=>{var T=x(_,E,[C],{});return{t:T.t,y:T.y.map(M=>M[0])}},"function, Matrix, number | BigNumber | Unit":(_,E,C)=>{var T=x(_,E.toArray(),[C],{});return{t:m(T.t),y:m(T.y.map(M=>M[0]))}},"function, Array, number | BigNumber | Unit, Object":(_,E,C,T)=>{var M=x(_,E,[C],T);return{t:M.t,y:M.y.map(I=>I[0])}},"function, Matrix, number | BigNumber | Unit, Object":(_,E,C,T)=>{var M=x(_,E.toArray(),[C],T);return{t:m(M.t),y:m(M.y.map(I=>I[0]))}}})}),hq="erf",pq=["typed"],vq=q(hq,pq,t=>{var{typed:e}=t;return e("name",{number:function(s){var l=Math.abs(s);return l>=xq?Ki(s):l<=gq?Ki(s)*r(l):l<=4?Ki(s)*(1-n(l)):Ki(s)*(1-a(l))},"Array | Matrix":e.referToSelf(i=>s=>ut(s,i))});function r(i){var s=i*i,l=oi[0][4]*s,u=s,o;for(o=0;o<3;o+=1)l=(l+oi[0][o])*s,u=(u+Go[0][o])*s;return i*(l+oi[0][3])/(u+Go[0][3])}function n(i){var s=oi[1][8]*i,l=i,u;for(u=0;u<7;u+=1)s=(s+oi[1][u])*i,l=(l+Go[1][u])*i;var o=(s+oi[1][7])/(l+Go[1][7]),c=parseInt(i*16)/16,f=(i-c)*(i+c);return Math.exp(-c*c)*Math.exp(-f)*o}function a(i){var s=1/(i*i),l=oi[2][5]*s,u=s,o;for(o=0;o<4;o+=1)l=(l+oi[2][o])*s,u=(u+Go[2][o])*s;var c=s*(l+oi[2][4])/(u+Go[2][4]);c=(yq-c)/i,s=parseInt(i*16)/16;var f=(i-s)*(i+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),gq=.46875,yq=.5641895835477563,oi=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Go=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],xq=Math.pow(2,53),B_="zeta",bq=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],wq=q(B_,bq,t=>{var{typed:e,config:r,multiply:n,pow:a,divide:i,factorial:s,equal:l,smallerEq:u,isNegative:o,gamma:c,sin:f,subtract:d,add:m,Complex:p,BigNumber:h,pi:D}=t;return e(B_,{number:g=>w(g,y=>y,()=>20),BigNumber:g=>w(g,y=>new h(y),()=>Math.abs(Math.log10(r.relTol))),Complex:S});function w(g,y,_){return l(g,0)?y(-.5):l(g,1)?y(NaN):isFinite(g)?x(g,y,_,E=>E):o(g)?y(NaN):y(1)}function S(g){return g.re===0&&g.im===0?new p(-.5):g.re===1?new p(NaN,NaN):g.re===1/0&&g.im===0?new p(1):g.im===1/0||g.re===-1/0?new p(NaN,NaN):x(g,y=>y,y=>Math.round(1.3*15+.9*Math.abs(y.im)),y=>y.re)}function x(g,y,_,E){var C=_(g);if(E(g)>-(C-1)/2)return N(g,y(C),y);var T=n(a(2,g),a(y(D),d(g,1)));return T=n(T,f(n(i(y(D),2),g))),T=n(T,c(d(1,g))),n(T,x(d(1,g),y,_,E))}function b(g,y){for(var _=g,E=g;u(E,y);E=m(E,1)){var C=i(n(s(m(y,d(E,1))),a(4,E)),n(s(d(y,E)),s(n(2,E))));_=m(_,C)}return n(y,_)}function N(g,y,_){for(var E=i(1,n(b(_(0),y),d(1,a(2,d(1,g))))),C=_(0),T=_(1);u(T,y);T=m(T,1))C=m(C,i(n((-1)**(T-1),b(T,y)),a(T,g)));return n(E,C)}}),j_="mode",Nq=["typed","isNaN","isNumeric"],_q=q(j_,Nq,t=>{var{typed:e,isNaN:r,isNumeric:n}=t;return e(j_,{"Array | Matrix":a,"...":function(s){return a(s)}});function a(i){i=Ct(i.valueOf());var s=i.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var l={},u=[],o=0,c=0;c<i.length;c++){var f=i[c];if(n(f)&&r(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in l||(l[f]=0),l[f]++,l[f]===o?u.push(f):l[f]>o&&(o=l[f],u=[f])}return u}});function Cn(t,e,r){var n;return String(t).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Xt(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).includes("complex numbers")?(n=arguments.length>2?" (type: "+Xt(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var k_="prod",Sq=["typed","config","multiplyScalar","numeric"],Eq=q(k_,Sq,t=>{var{typed:e,config:r,multiplyScalar:n,numeric:a}=t;return e(k_,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(l,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(l){return i(l)}});function i(s){var l;if(Ss(s,function(u){try{l=l===void 0?u:n(l,u)}catch(o){throw Cn(o,"prod",u)}}),typeof l=="string"&&(l=a(l,Cs(l,r))),l===void 0)throw new Error("Cannot calculate prod of an empty array");return l}}),$_="format",Aq=["typed"],Dq=q($_,Aq,t=>{var{typed:e}=t;return e($_,{any:pt,"any, Object | function | number | BigNumber":pt})}),L_="bin",Cq=["typed","format"],Tq=q(L_,Cq,t=>{var{typed:e,format:r}=t;return e(L_,{"number | BigNumber":function(a){return r(a,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"bin",wordSize:i})}})}),z_="oct",Mq=["typed","format"],Iq=q(z_,Mq,t=>{var{typed:e,format:r}=t;return e(z_,{"number | BigNumber":function(a){return r(a,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"oct",wordSize:i})}})}),V_="hex",Fq=["typed","format"],Pq=q(V_,Fq,t=>{var{typed:e,format:r}=t;return e(V_,{"number | BigNumber":function(a){return r(a,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(a,i){return r(a,{notation:"hex",wordSize:i})}})}),I4=/\$([\w.]+)/g,U_="print",Rq=["typed"],F4=q(U_,Rq,t=>{var{typed:e}=t;return e(U_,{"string, Object | Array":q_,"string, Object | Array, number | Object":q_})});function q_(t,e,r){return t.replace(I4,function(n,a){var i=a.split("."),s=e[i.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());i.length&&s!==void 0;){var l=i.shift();s=l?s[l]:s+"."}return s!==void 0?yr(s)?s:pt(s,r):n})}var H_="to",Oq=["typed","matrix","concat"],Bq=q(H_,Oq,t=>{var{typed:e,matrix:r,concat:n}=t,a=Zt({typed:e,matrix:r,concat:n});return e(H_,{"Unit, Unit | string":(i,s)=>i.to(s)},a({Ds:!0}))}),G_="toBest",jq=["typed"],kq=q(G_,jq,t=>{var{typed:e}=t;return e(G_,{Unit:r=>r.toBest(),"Unit, string":(r,n)=>r.toBest(n.split(",")),"Unit, string, Object":(r,n,a)=>r.toBest(n.split(","),a),"Unit, Array":(r,n)=>r.toBest(n),"Unit, Array, Object":(r,n,a)=>r.toBest(n,a)})}),W_="isPrime",$q=["typed"],Lq=q(W_,$q,t=>{var{typed:e}=t;return e(W_,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var a=5;a*a<=n;a+=6)if(n%a===0||n%(a+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var a=5n;a*a<=n;a+=6n)if(n%a===0n||n%(a+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var a=n.toNumber(),i=5;i*i<=a;i+=6)if(a%i===0||a%(i+2)===0)return!1;return!0}function s(S,x,b){for(var N=1;!x.eq(0);)x.mod(2).eq(0)?(x=x.div(2),S=S.mul(S).mod(b)):(x=x.sub(1),N=S.mul(N).mod(b));return N}var l=n.constructor.clone({precision:n.toFixed(0).length*2});n=new l(n);for(var u=0,o=n.sub(1);o.mod(2).eq(0);)o=o.div(2),u+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(S=>S<n);else{var f=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var m=0;m<c.length;m+=1){var p=c[m],h=s(n.sub(n).add(p),o,n);if(!h.eq(1)){for(var D=0,w=h;!w.eq(n.sub(1));D+=1,w=w.mul(w).mod(n))if(D===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(r=>n=>ut(n,r))})}),zq="numeric",Vq=["number","?bignumber","?fraction"],Uq=q(zq,Vq,t=>{var{number:e,bignumber:r,fraction:n}=t,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},i={number:s=>e(s),BigNumber:r?s=>r(s):Xy,bigint:s=>BigInt(s),Fraction:n?s=>n(s):D4};return function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",o=arguments.length>2?arguments[2]:void 0;if(o!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Xt(l);if(!(c in a))throw new TypeError("Cannot convert "+l+' of type "'+c+'"; valid input types are '+Object.keys(a).join(", "));if(!(u in i))throw new TypeError("Cannot convert "+l+' to type "'+u+'"; valid output types are '+Object.keys(i).join(", "));return u===c?l:i[u](l)}}),Q_="divideScalar",qq=["typed","numeric"],Hq=q(Q_,qq,t=>{var{typed:e,numeric:r}=t;return e(Q_,{"number, number":function(a,i){return a/i},"Complex, Complex":function(a,i){return a.div(i)},"BigNumber, BigNumber":function(a,i){return a.div(i)},"bigint, bigint":function(a,i){return a/i},"Fraction, Fraction":function(a,i){return a.div(i)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,a)=>n.divide(a),"number | Fraction | Complex | BigNumber, Unit":(n,a)=>a.divideInto(n)})}),X_="pow",Gq=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Wq=q(X_,Gq,t=>{var{typed:e,config:r,identity:n,multiply:a,matrix:i,inv:s,number:l,fraction:u,Complex:o}=t;return e(X_,{"number, number":c,"Complex, Complex":function(p,h){return p.pow(h)},"BigNumber, BigNumber":function(p,h){return h.isInteger()||p>=0||r.predictable?p.pow(h):new o(p.toNumber(),0).pow(h.toNumber(),0)},"bigint, bigint":(m,p)=>m**p,"Fraction, Fraction":function(p,h){var D=p.pow(h);if(D!=null)return D;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),h.valueOf())},"Array, number":f,"Array, BigNumber":function(p,h){return f(p,h.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,h){return d(p,h.toNumber())},"Unit, number | BigNumber":function(p,h){return p.pow(h)}});function c(m,p){if(r.predictable&&!We(p)&&m<0)try{var h=u(p),D=l(h);if((p===D||Math.abs((p-D)/p)<1e-14)&&h.d%2n===1n)return(h.n%2n===0n?1:-1)*Math.pow(-m,p)}catch{}return r.predictable&&(m<-1&&p===1/0||m>-1&&m<0&&p===-1/0)?NaN:We(p)||m>=0||r.predictable?BM(m,p):m*m<1&&p===1/0||m*m>1&&p===-1/0?0:new o(m,0).pow(p,0)}function f(m,p){if(!We(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var h=at(m);if(h.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+h.length+" dimensions)");if(h[0]!==h[1])throw new Error("For A^b, A must be square (size is "+h[0]+"x"+h[1]+")");if(p<0)try{return f(s(m),-p)}catch(S){throw S.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):S}for(var D=n(h[0]).valueOf(),w=m;p>=1;)(p&1)===1&&(D=a(w,D)),p>>=1,w=a(w,w);return D}function d(m,p){return i(f(m.valueOf(),p))}}),Wo="Number of decimals in function round must be an integer",K_="round",Qq=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Xq=q(K_,Qq,t=>{var{typed:e,config:r,matrix:n,equalScalar:a,zeros:i,BigNumber:s,DenseMatrix:l}=t,u=on({typed:e,equalScalar:a}),o=jr({typed:e,DenseMatrix:l}),c=ga({typed:e});function f(d){return Math.abs(uf(d).exponent)}return e(K_,{number:function(m){var p=$u(m,f(r.relTol)),h=Kr(m,p,r.relTol,r.absTol)?p:m;return $u(h)},"number, number":function(m,p){var h=f(r.relTol);if(p>=h)return $u(m,p);var D=$u(m,h),w=Kr(m,D,r.relTol,r.absTol)?D:m;return $u(w,p)},"number, BigNumber":function(m,p){if(!p.isInteger())throw new TypeError(Wo);return new s(m).toDecimalPlaces(p.toNumber())},Complex:function(m){return m.round()},"Complex, number":function(m,p){if(p%1)throw new TypeError(Wo);return m.round(p)},"Complex, BigNumber":function(m,p){if(!p.isInteger())throw new TypeError(Wo);var h=p.toNumber();return m.round(h)},BigNumber:function(m){var p=new s(m).toDecimalPlaces(f(r.relTol)),h=va(m,p,r.relTol,r.absTol)?p:m;return h.toDecimalPlaces(0)},"BigNumber, BigNumber":function(m,p){if(!p.isInteger())throw new TypeError(Wo);var h=f(r.relTol);if(p>=h)return m.toDecimalPlaces(p.toNumber());var D=m.toDecimalPlaces(h),w=va(m,D,r.relTol,r.absTol)?D:m;return w.toDecimalPlaces(p.toNumber())},bigint:d=>d,"bigint, number":(d,m)=>d,"bigint, BigNumber":(d,m)=>d,Fraction:function(m){return m.round()},"Fraction, number":function(m,p){if(p%1)throw new TypeError(Wo);return m.round(p)},"Fraction, BigNumber":function(m,p){if(!p.isInteger())throw new TypeError(Wo);return m.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(m,p,h){var D=m.toNumeric(h);return h.multiply(d(D,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(m,p,h)=>d(m,p.toNumber(),h)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(m,p,h)=>ut(m,D=>d(D,p,h),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(m,p)=>d(m,0,p)),"Array | Matrix":e.referToSelf(d=>m=>ut(m,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(m,p)=>u(m,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(m,p)=>c(m,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(m,p)=>c(n(m),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(m,p)=>a(m,0)?i(p.size(),p.storage()):o(p,m,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(m,p)=>a(m,0)?i(p.size(),p.storage()):c(p,m,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(m,p)=>c(n(p),m,d,!0).valueOf())})}),J_="log",Kq=["config","typed","typeOf","divideScalar","Complex"],Jq=Math.log(16),Yq=q(J_,Kq,t=>{var{typed:e,typeOf:r,config:n,divideScalar:a,Complex:i}=t;function s(u){return u.log()}function l(u){return s(new i(u,0))}return e(J_,{number:function(o){return o>=0||n.predictable?f2(o):l(o)},bigint:Wy(Jq,f2,n,l),Complex:s,BigNumber:function(o){return!o.isNegative()||n.predictable?o.ln():l(o.toNumber())},"any, any":e.referToSelf(u=>(o,c)=>{if(r(o)==="Fraction"&&r(c)==="Fraction"){var f=o.log(c);if(f!==null)return f}return a(u(o),u(c))})})}),Y_="log1p",Zq=["typed","config","divideScalar","log","Complex"],eH=q(Y_,Zq,t=>{var{typed:e,config:r,divideScalar:n,log:a,Complex:i}=t;return e(Y_,{number:function(u){return u>=-1||r.predictable?Wk(u):s(new i(u,0))},Complex:s,BigNumber:function(u){var o=u.plus(1);return!o.isNegative()||r.predictable?o.ln():s(new i(u.toNumber(),0))},"Array | Matrix":e.referToSelf(l=>u=>ut(u,l)),"any, any":e.referToSelf(l=>(u,o)=>n(l(u),a(o)))});function s(l){var u=l.re+1;return new i(Math.log(Math.sqrt(u*u+l.im*l.im)),Math.atan2(l.im,u))}}),Z_="nthRoots",tH=["config","typed","divideScalar","Complex"],rH=q(Z_,tH,t=>{var{typed:e,config:r,divideScalar:n,Complex:a}=t,i=[function(u){return new a(u,0)},function(u){return new a(0,u)},function(u){return new a(-u,0)},function(u){return new a(0,-u)}];function s(l,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(l===0||l.abs()===0)return[new a(0,0)];var o=typeof l=="number",c;(o||l.re===0||l.im===0)&&(o?c=2*+(l<0):l.im===0?c=2*+(l.re<0):c=2*+(l.im<0)+1);for(var f=l.arg(),d=l.abs(),m=[],p=Math.pow(d,1/u),h=0;h<u;h++){var D=(c+4*h)/u;if(D===Math.round(D)){m.push(i[D%4](p));continue}m.push(new a({r:p,phi:(f+2*Math.PI*h)/u}))}return m}return e(Z_,{Complex:function(u){return s(u,2)},"Complex, number":s})}),eS="dotPow",nH=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],aH=q(eS,nH,t=>{var{typed:e,equalScalar:r,matrix:n,pow:a,DenseMatrix:i,concat:s,SparseMatrix:l}=t,u=wn({typed:e}),o=ri({typed:e,SparseMatrix:l}),c=on({typed:e,equalScalar:r}),f=jr({typed:e,DenseMatrix:i}),d=Zt({typed:e,matrix:n,concat:s}),m={};for(var p in a.signatures)Object.prototype.hasOwnProperty.call(a.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(m[p]=a.signatures[p]);var h=e(m);return e(eS,d({elop:h,SS:o,DS:u,Ss:c,sS:f}))}),tS="dotDivide",iH=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],sH=q(tS,iH,t=>{var{typed:e,matrix:r,equalScalar:n,divideScalar:a,DenseMatrix:i,concat:s,SparseMatrix:l}=t,u=Ra({typed:e,equalScalar:n}),o=wn({typed:e}),c=ri({typed:e,SparseMatrix:l}),f=on({typed:e,equalScalar:n}),d=jr({typed:e,DenseMatrix:i}),m=Zt({typed:e,matrix:r,concat:s});return e(tS,m({elop:a,SS:c,DS:o,SD:u,Ss:f,sS:d}))});function cf(t){var{DenseMatrix:e}=t;return function(n,a,i){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+pt(s)+")");var l=s[0],u=s[1];if(l!==u)throw new RangeError("Matrix must be square (size: "+pt(s)+")");var o=[];if(Ye(a)){var c=a.size(),f=a._data;if(c.length===1){if(c[0]!==l)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<l;d++)o[d]=[f[d]];return new e({data:o,size:[l,1],datatype:a._datatype})}if(c.length===2){if(c[0]!==l||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Tm(a)){if(i){o=[];for(var m=0;m<l;m++)o[m]=[f[m][0]];return new e({data:o,size:[l,1],datatype:a._datatype})}return a}if(to(a)){for(var p=0;p<l;p++)o[p]=[0];for(var h=a._values,D=a._index,w=a._ptr,S=w[1],x=w[0];x<S;x++){var b=D[x];o[b][0]=h[x]}return new e({data:o,size:[l,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Wt(a)){var N=at(a);if(N.length===1){if(N[0]!==l)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var g=0;g<l;g++)o[g]=[a[g]];return new e({data:o,size:[l,1]})}if(N.length===2){if(N[0]!==l||N[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var y=0;y<l;y++)o[y]=[a[y][0]];return new e({data:o,size:[l,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var rS="lsolve",oH=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],lH=q(rS,oH,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:l}=t,u=cf({DenseMatrix:l});return e(rS,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var p=r(d),h=o(p,m);return h.valueOf()}});function o(f,d){d=u(f,d,!0);for(var m=d._data,p=f._size[0],h=f._size[1],D=[],w=f._data,S=0;S<h;S++){var x=m[S][0]||0,b=void 0;if(s(x,0))b=0;else{var N=w[S][S];if(s(N,0))throw new Error("Linear system cannot be solved since matrix is singular");b=n(x,N);for(var g=S+1;g<p;g++)m[g]=[i(m[g][0]||0,a(b,w[g][S]))]}D[S]=[b]}return new l({data:D,size:[p,1]})}function c(f,d){d=u(f,d,!0);for(var m=d._data,p=f._size[0],h=f._size[1],D=f._values,w=f._index,S=f._ptr,x=[],b=0;b<h;b++){var N=m[b][0]||0;if(s(N,0))x[b]=[0];else{for(var g=0,y=[],_=[],E=S[b],C=S[b+1],T=E;T<C;T++){var M=w[T];M===b?g=D[T]:M>b&&(y.push(D[T]),_.push(M))}if(s(g,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(N,g),j=0,O=_.length;j<O;j++){var P=_[j];m[P]=[i(m[P][0]||0,a(I,y[j]))]}x[b]=[I]}}return new l({data:x,size:[p,1]})}}),nS="usolve",uH=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],cH=q(nS,uH,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:l}=t,u=cf({DenseMatrix:l});return e(nS,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var p=r(d),h=o(p,m);return h.valueOf()}});function o(f,d){d=u(f,d,!0);for(var m=d._data,p=f._size[0],h=f._size[1],D=[],w=f._data,S=h-1;S>=0;S--){var x=m[S][0]||0,b=void 0;if(s(x,0))b=0;else{var N=w[S][S];if(s(N,0))throw new Error("Linear system cannot be solved since matrix is singular");b=n(x,N);for(var g=S-1;g>=0;g--)m[g]=[i(m[g][0]||0,a(b,w[g][S]))]}D[S]=[b]}return new l({data:D,size:[p,1]})}function c(f,d){d=u(f,d,!0);for(var m=d._data,p=f._size[0],h=f._size[1],D=f._values,w=f._index,S=f._ptr,x=[],b=h-1;b>=0;b--){var N=m[b][0]||0;if(s(N,0))x[b]=[0];else{for(var g=0,y=[],_=[],E=S[b],C=S[b+1],T=C-1;T>=E;T--){var M=w[T];M===b?g=D[T]:M<b&&(y.push(D[T]),_.push(M))}if(s(g,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(N,g),j=0,O=_.length;j<O;j++){var P=_[j];m[P]=[i(m[P][0],a(I,y[j]))]}x[b]=[I]}}return new l({data:x,size:[p,1]})}}),aS="lsolveAll",fH=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],dH=q(aS,fH,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:l}=t,u=cf({DenseMatrix:l});return e(aS,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var p=r(d),h=o(p,m);return h.map(D=>D.valueOf())}});function o(f,d){for(var m=[u(f,d,!0)._data.map(_=>_[0])],p=f._data,h=f._size[0],D=f._size[1],w=0;w<D;w++)for(var S=m.length,x=0;x<S;x++){var b=m[x];if(s(p[w][w],0))if(s(b[w],0)){if(x===0){var g=[...b];g[w]=1;for(var y=w+1;y<D;y++)g[y]=i(g[y],p[y][w]);m.push(g)}}else{if(x===0)return[];m.splice(x,1),x-=1,S-=1}else{b[w]=n(b[w],p[w][w]);for(var N=w+1;N<D;N++)b[N]=i(b[N],a(b[w],p[N][w]))}}return m.map(_=>new l({data:_.map(E=>[E]),size:[h,1]}))}function c(f,d){for(var m=[u(f,d,!0)._data.map(ae=>ae[0])],p=f._size[0],h=f._size[1],D=f._values,w=f._index,S=f._ptr,x=0;x<h;x++)for(var b=m.length,N=0;N<b;N++){for(var g=m[N],y=[],_=[],E=S[x],C=S[x+1],T=0,M=E;M<C;M++){var I=w[M];I===x?T=D[M]:I>x&&(y.push(D[M]),_.push(I))}if(s(T,0))if(s(g[x],0)){if(N===0){var H=[...g];H[x]=1;for(var $=0,z=_.length;$<z;$++){var X=_[$];H[X]=i(H[X],y[$])}m.push(H)}}else{if(N===0)return[];m.splice(N,1),N-=1,b-=1}else{g[x]=n(g[x],T);for(var j=0,O=_.length;j<O;j++){var P=_[j];g[P]=i(g[P],a(g[x],y[j]))}}}return m.map(ae=>new l({data:ae.map(k=>[k]),size:[p,1]}))}}),iS="usolveAll",mH=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],hH=q(iS,mH,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:l}=t,u=cf({DenseMatrix:l});return e(iS,{"SparseMatrix, Array | Matrix":function(d,m){return c(d,m)},"DenseMatrix, Array | Matrix":function(d,m){return o(d,m)},"Array, Array | Matrix":function(d,m){var p=r(d),h=o(p,m);return h.map(D=>D.valueOf())}});function o(f,d){for(var m=[u(f,d,!0)._data.map(_=>_[0])],p=f._data,h=f._size[0],D=f._size[1],w=D-1;w>=0;w--)for(var S=m.length,x=0;x<S;x++){var b=m[x];if(s(p[w][w],0))if(s(b[w],0)){if(x===0){var g=[...b];g[w]=1;for(var y=w-1;y>=0;y--)g[y]=i(g[y],p[y][w]);m.push(g)}}else{if(x===0)return[];m.splice(x,1),x-=1,S-=1}else{b[w]=n(b[w],p[w][w]);for(var N=w-1;N>=0;N--)b[N]=i(b[N],a(b[w],p[N][w]))}}return m.map(_=>new l({data:_.map(E=>[E]),size:[h,1]}))}function c(f,d){for(var m=[u(f,d,!0)._data.map(ae=>ae[0])],p=f._size[0],h=f._size[1],D=f._values,w=f._index,S=f._ptr,x=h-1;x>=0;x--)for(var b=m.length,N=0;N<b;N++){for(var g=m[N],y=[],_=[],E=S[x],C=S[x+1],T=0,M=C-1;M>=E;M--){var I=w[M];I===x?T=D[M]:I<x&&(y.push(D[M]),_.push(I))}if(s(T,0))if(s(g[x],0)){if(N===0){var H=[...g];H[x]=1;for(var $=0,z=_.length;$<z;$++){var X=_[$];H[X]=i(H[X],y[$])}m.push(H)}}else{if(N===0)return[];m.splice(N,1),N-=1,b-=1}else{g[x]=n(g[x],T);for(var j=0,O=_.length;j<O;j++){var P=_[j];g[P]=i(g[P],a(g[x],y[j]))}}}return m.map(ae=>new l({data:ae.map(k=>[k]),size:[p,1]}))}}),pH="matAlgo08xS0Sid",vH=["typed","equalScalar"],Ky=q(pH,vH,t=>{var{typed:e,equalScalar:r}=t;return function(a,i,s){var l=a._values,u=a._index,o=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,m=i._index,p=i._ptr,h=i._size,D=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==h.length)throw new mt(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");if(!l||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var w=c[0],S=c[1],x,b=r,N=0,g=s;typeof f=="string"&&f===D&&f!=="mixed"&&(x=f,b=e.find(r,[x,x]),N=e.convert(0,x),g=e.find(s,[x,x]));for(var y=[],_=[],E=[],C=[],T=[],M,I,j,O,P=0;P<S;P++){E[P]=_.length;var H=P+1;for(I=o[P],j=o[P+1],M=I;M<j;M++)O=u[M],T[O]=H,C[O]=l[M],_.push(O);for(I=p[P],j=p[P+1],M=I;M<j;M++)O=m[M],T[O]===H&&(C[O]=g(C[O],d[M]));for(M=E[P];M<_.length;){O=_[M];var $=C[O];b($,N)?_.splice(M,1):(y.push($),M++)}}return E[S]=_.length,a.createSparseMatrix({values:y,index:_,ptr:E,size:[w,S],datatype:f===a._datatype&&D===i._datatype?x:void 0})}}),Jy=q("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:r}=t;return{"Array, number":e.referTo("DenseMatrix, number",n=>(a,i)=>n(r(a),i).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(a,i)=>n(r(a),i).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(a,i)=>n(a,r(i)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(a,i)=>n(a,r(i)).valueOf())}}),sS="leftShift",gH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],yH=q(sS,gH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,l=Ms({typed:e}),u=Ra({typed:e,equalScalar:n}),o=Ky({typed:e,equalScalar:n}),c=Ao({typed:e,DenseMatrix:i}),f=on({typed:e,equalScalar:n}),d=ga({typed:e}),m=Zt({typed:e,matrix:r,concat:s}),p=Jy({typed:e,matrix:r});return e(sS,{"number, number":zM,"BigNumber, BigNumber":jV,"bigint, bigint":(h,D)=>h<<D,"SparseMatrix, number | BigNumber":e.referToSelf(h=>(D,w)=>n(w,0)?D.clone():f(D,w,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(D,w)=>n(w,0)?D.clone():d(D,w,h,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(D,w)=>n(D,0)?a(w.size(),w.storage()):c(w,D,h,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(h=>(D,w)=>n(D,0)?a(w.size(),w.storage()):d(w,D,h,!0))},p,m({SS:o,DS:l,SD:u}))}),oS="rightArithShift",xH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],bH=q(oS,xH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,l=Ms({typed:e}),u=Ra({typed:e,equalScalar:n}),o=Ky({typed:e,equalScalar:n}),c=Ao({typed:e,DenseMatrix:i}),f=on({typed:e,equalScalar:n}),d=ga({typed:e}),m=Zt({typed:e,matrix:r,concat:s}),p=Jy({typed:e,matrix:r});return e(oS,{"number, number":VM,"BigNumber, BigNumber":kV,"bigint, bigint":(h,D)=>h>>D,"SparseMatrix, number | BigNumber":e.referToSelf(h=>(D,w)=>n(w,0)?D.clone():f(D,w,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(D,w)=>n(w,0)?D.clone():d(D,w,h,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(D,w)=>n(D,0)?a(w.size(),w.storage()):c(w,D,h,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(h=>(D,w)=>n(D,0)?a(w.size(),w.storage()):d(w,D,h,!0))},p,m({SS:o,DS:l,SD:u}))}),lS="rightLogShift",wH=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],NH=q(lS,wH,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,DenseMatrix:i,concat:s}=t,l=Ms({typed:e}),u=Ra({typed:e,equalScalar:n}),o=Ky({typed:e,equalScalar:n}),c=Ao({typed:e,DenseMatrix:i}),f=on({typed:e,equalScalar:n}),d=ga({typed:e}),m=Zt({typed:e,matrix:r,concat:s}),p=Jy({typed:e,matrix:r});return e(lS,{"number, number":UM,"SparseMatrix, number | BigNumber":e.referToSelf(h=>(D,w)=>n(w,0)?D.clone():f(D,w,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(D,w)=>n(w,0)?D.clone():d(D,w,h,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(D,w)=>n(D,0)?a(w.size(),w.storage()):c(w,D,h,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(h=>(D,w)=>n(D,0)?a(w.size(),w.storage()):d(w,D,h,!0))},p,m({SS:o,DS:l,SD:u}))}),uS="and",_H=["typed","matrix","equalScalar","zeros","not","concat"],P4=q(uS,_H,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,l=Ra({typed:e,equalScalar:n}),u=qh({typed:e,equalScalar:n}),o=on({typed:e,equalScalar:n}),c=ga({typed:e}),f=Zt({typed:e,matrix:r,concat:s});return e(uS,{"number, number":zg,"Complex, Complex":function(m,p){return(m.re!==0||m.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(m,p){return!m.isZero()&&!p.isZero()&&!m.isNaN()&&!p.isNaN()},"bigint, bigint":zg,"Unit, Unit":e.referToSelf(d=>(m,p)=>d(m.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(m,p)=>i(p)?a(m.size(),m.storage()):o(m,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(m,p)=>i(p)?a(m.size(),m.storage()):c(m,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(m,p)=>i(m)?a(m.size(),m.storage()):o(p,m,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(m,p)=>i(m)?a(m.size(),m.storage()):c(p,m,d,!0)),"Array, any":e.referToSelf(d=>(m,p)=>d(r(m),p).valueOf()),"any, Array":e.referToSelf(d=>(m,p)=>d(m,r(p)).valueOf())},f({SS:u,DS:l}))}),Hm="compare",SH=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],EH=q(Hm,SH,t=>{var{typed:e,config:r,equalScalar:n,matrix:a,BigNumber:i,Fraction:s,DenseMatrix:l,concat:u}=t,o=wn({typed:e}),c=Uh({typed:e,equalScalar:n}),f=jr({typed:e,DenseMatrix:l}),d=Zt({typed:e,matrix:a,concat:u}),m=uu({typed:e});return e(Hm,AH({typed:e,config:r}),{"boolean, boolean":function(h,D){return h===D?0:h>D?1:-1},"BigNumber, BigNumber":function(h,D){return va(h,D,r.relTol,r.absTol)?new i(0):new i(h.cmp(D))},"bigint, bigint":function(h,D){return h===D?0n:h>D?1n:-1n},"Fraction, Fraction":function(h,D){return new s(h.compare(D))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},m,d({SS:c,DS:o,Ss:f}))}),AH=q(Hm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Hm,{"number, number":function(a,i){return Kr(a,i,r.relTol,r.absTol)?0:a>i?1:-1}})}),DH=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,l=/^0/,u=function(x){return t.insensitive&&(""+x).toLowerCase()||""+x},o=u(e).replace(a,"")||"",c=u(r).replace(a,"")||"",f=o.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(o.match(s),16)||f.length!==1&&o.match(i)&&Date.parse(o),p=parseInt(c.match(s),16)||m&&c.match(i)&&Date.parse(c)||null,h,D;if(p){if(m<p)return-1;if(m>p)return 1}for(var w=0,S=Math.max(f.length,d.length);w<S;w++){if(h=!(f[w]||"").match(l)&&parseFloat(f[w])||f[w]||0,D=!(d[w]||"").match(l)&&parseFloat(d[w])||d[w]||0,isNaN(h)!==isNaN(D))return isNaN(h)?1:-1;if(typeof h!=typeof D&&(h+="",D+=""),h<D)return-1;if(h>D)return 1}return 0};const Qo=eh(DH);var cS="compareNatural",CH=["typed","compare"],TH=q(cS,CH,t=>{var{typed:e,compare:r}=t,n=r.signatures["boolean,boolean"];return e(cS,{"any, any":a});function a(u,o){var c=Xt(u),f=Xt(o),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=r(u,o),d.toString()!=="0"?d>0?1:-1:Qo(c,f);var m=["Array","DenseMatrix","SparseMatrix"];if(m.includes(c)||m.includes(f))return d=i(a,u,o),d!==0?d:Qo(c,f);if(c!==f)return Qo(c,f);if(c==="Complex")return MH(u,o);if(c==="Unit")return u.equalBase(o)?a(u.value,o.value):s(a,u.formatUnits(),o.formatUnits());if(c==="boolean")return n(u,o);if(c==="string")return Qo(u,o);if(c==="Object")return l(a,u,o);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function i(u,o,c){return to(o)&&to(c)?s(u,o.toJSON().values,c.toJSON().values):to(o)?i(u,o.toArray(),c):to(c)?i(u,o,c.toArray()):Tm(o)?i(u,o.toJSON().data,c):Tm(c)?i(u,o,c.toJSON().data):Array.isArray(o)?Array.isArray(c)?s(u,o,c):i(u,o,[c]):i(u,[o],c)}function s(u,o,c){for(var f=0,d=Math.min(o.length,c.length);f<d;f++){var m=u(o[f],c[f]);if(m!==0)return m}return o.length>c.length?1:o.length<c.length?-1:0}function l(u,o,c){var f=Object.keys(o),d=Object.keys(c);f.sort(Qo),d.sort(Qo);var m=s(u,f,d);if(m!==0)return m;for(var p=0;p<f.length;p++){var h=u(o[f[p]],c[d[p]]);if(h!==0)return h}return 0}});function MH(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var fS="compareText",IH=["typed","matrix","concat"];Rg.signature="any, any";var FH=q(fS,IH,t=>{var{typed:e,matrix:r,concat:n}=t,a=Zt({typed:e,matrix:r,concat:n});return e(fS,Rg,a({elop:Rg,Ds:!0}))}),Gm="equal",PH=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],RH=q(Gm,PH,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,l=wn({typed:e}),u=ri({typed:e,SparseMatrix:s}),o=jr({typed:e,DenseMatrix:a}),c=Zt({typed:e,matrix:r,concat:i});return e(Gm,OH({typed:e,equalScalar:n}),c({elop:n,SS:u,DS:l,Ss:o}))}),OH=q(Gm,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(Gm,{"any, any":function(a,i){return a===null?i===null:i===null?a===null:a===void 0?i===void 0:i===void 0?a===void 0:r(a,i)}})}),dS="equalText",BH=["typed","compareText","isZero"],jH=q(dS,BH,t=>{var{typed:e,compareText:r,isZero:n}=t;return e(dS,{"any, any":function(i,s){return n(r(i,s))}})}),Wm="smaller",kH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],$H=q(Wm,kH,t=>{var{typed:e,config:r,bignumber:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:l}=t,u=wn({typed:e}),o=ri({typed:e,SparseMatrix:l}),c=jr({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:a,concat:s}),d=uu({typed:e});function m(p,h){return p.lt(h)&&!va(p,h,r.relTol,r.absTol)}return e(Wm,LH({typed:e,config:r}),{"boolean, boolean":(p,h)=>p<h,"BigNumber, BigNumber":m,"bigint, bigint":(p,h)=>p<h,"Fraction, Fraction":(p,h)=>p.compare(h)===-1,"Fraction, BigNumber":function(h,D){return m(n(h),D)},"BigNumber, Fraction":function(h,D){return m(h,n(D))},"Complex, Complex":function(h,D){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:o,DS:u,Ss:c}))}),LH=q(Wm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Wm,{"number, number":function(a,i){return a<i&&!Kr(a,i,r.relTol,r.absTol)}})}),Qm="smallerEq",zH=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],VH=q(Qm,zH,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,l=wn({typed:e}),u=ri({typed:e,SparseMatrix:s}),o=jr({typed:e,DenseMatrix:a}),c=Zt({typed:e,matrix:n,concat:i}),f=uu({typed:e});return e(Qm,UH({typed:e,config:r}),{"boolean, boolean":(d,m)=>d<=m,"BigNumber, BigNumber":function(m,p){return m.lte(p)||va(m,p,r.relTol,r.absTol)},"bigint, bigint":(d,m)=>d<=m,"Fraction, Fraction":(d,m)=>d.compare(m)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:l,Ss:o}))}),UH=q(Qm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Qm,{"number, number":function(a,i){return a<=i||Kr(a,i,r.relTol,r.absTol)}})}),Xm="larger",qH=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],HH=q(Xm,qH,t=>{var{typed:e,config:r,bignumber:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:l}=t,u=wn({typed:e}),o=ri({typed:e,SparseMatrix:l}),c=jr({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:a,concat:s}),d=uu({typed:e});function m(p,h){return p.gt(h)&&!va(p,h,r.relTol,r.absTol)}return e(Xm,GH({typed:e,config:r}),{"boolean, boolean":(p,h)=>p>h,"BigNumber, BigNumber":m,"bigint, bigint":(p,h)=>p>h,"Fraction, Fraction":(p,h)=>p.compare(h)===1,"Fraction, BigNumber":function(h,D){return m(n(h),D)},"BigNumber, Fraction":function(h,D){return m(h,n(D))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:o,DS:u,Ss:c}))}),GH=q(Xm,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Xm,{"number, number":function(a,i){return a>i&&!Kr(a,i,r.relTol,r.absTol)}})}),Km="largerEq",WH=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],QH=q(Km,WH,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:a,concat:i,SparseMatrix:s}=t,l=wn({typed:e}),u=ri({typed:e,SparseMatrix:s}),o=jr({typed:e,DenseMatrix:a}),c=Zt({typed:e,matrix:n,concat:i}),f=uu({typed:e});return e(Km,XH({typed:e,config:r}),{"boolean, boolean":(d,m)=>d>=m,"BigNumber, BigNumber":function(m,p){return m.gte(p)||va(m,p,r.relTol,r.absTol)},"bigint, bigint":function(m,p){return m>=p},"Fraction, Fraction":(d,m)=>d.compare(m)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:l,Ss:o}))}),XH=q(Km,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Km,{"number, number":function(a,i){return a>=i||Kr(a,i,r.relTol,r.absTol)}})}),mS="deepEqual",KH=["typed","equal"],JH=q(mS,KH,t=>{var{typed:e,equal:r}=t;return e(mS,{"any, any":function(i,s){return n(i.valueOf(),s.valueOf())}});function n(a,i){if(Array.isArray(a))if(Array.isArray(i)){var s=a.length;if(s!==i.length)return!1;for(var l=0;l<s;l++)if(!n(a[l],i[l]))return!1;return!0}else return!1;else return Array.isArray(i)?!1:r(a,i)}}),Jm="unequal",YH=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],ZH=q(Jm,YH,t=>{var{typed:e,config:r,equalScalar:n,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:l}=t,u=wn({typed:e}),o=ri({typed:e,SparseMatrix:l}),c=jr({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:a,concat:s});return e(Jm,eG({typed:e,equalScalar:n}),f({elop:d,SS:o,DS:u,Ss:c}));function d(m,p){return!n(m,p)}}),eG=q(Jm,["typed","equalScalar"],t=>{var{typed:e,equalScalar:r}=t;return e(Jm,{"any, any":function(a,i){return a===null?i!==null:i===null?a!==null:a===void 0?i!==void 0:i===void 0?a!==void 0:!r(a,i)}})}),hS="partitionSelect",tG=["typed","isNumeric","isNaN","compare"],rG=q(hS,tG,t=>{var{typed:e,isNumeric:r,isNaN:n,compare:a}=t,i=a,s=(o,c)=>-a(o,c);return e(hS,{"Array | Matrix, number":function(c,f){return l(c,f,i)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return l(c,f,i);if(d==="desc")return l(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":l});function l(o,c,f){if(!We(c)||c<0)throw new Error("k must be a non-negative integer");if(Ye(o)){var d=o.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(o.valueOf(),c,f)}if(Array.isArray(o))return u(o,c,f)}function u(o,c,f){if(c>=o.length)throw new Error("k out of bounds");for(var d=0;d<o.length;d++)if(r(o[d])&&n(o[d]))return o[d];for(var m=0,p=o.length-1;m<p;){for(var h=m,D=p,w=o[Math.floor(Math.random()*(p-m+1))+m];h<D;)if(f(o[h],w)>=0){var S=o[D];o[D]=o[h],o[h]=S,--D}else++h;f(o[h],w)>0&&--h,c<=h?p=h:m=h+1}return o[c]}}),pS="sort",nG=["typed","matrix","compare","compareNatural"],aG=q(pS,nG,t=>{var{typed:e,matrix:r,compare:n,compareNatural:a}=t,i=n,s=(c,f)=>-n(c,f);return e(pS,{Array:function(f){return u(f),f.sort(i)},Matrix:function(f){return o(f),r(f.toArray().sort(i),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return o(f),r(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(l(d))},"Matrix, string":function(f,d){return o(f),r(f.toArray().sort(l(d)),f.storage())}});function l(c){if(c==="asc")return i;if(c==="desc")return s;if(c==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(at(c).length!==1)throw new Error("One dimensional array expected")}function o(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),vS="max",iG=["typed","config","numeric","larger","isNaN"],R4=q(vS,iG,t=>{var{typed:e,config:r,numeric:n,larger:a,isNaN:i}=t;return e(vS,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(o,c){return Vh(o,c.valueOf(),s)},"...":function(o){if(su(o))throw new TypeError("Scalar values expected in function max");return l(o)}});function s(u,o){try{return a(u,o)?u:o}catch(c){throw Cn(c,"max",o)}}function l(u){var o;if(Ss(u,function(c){try{(i(c)||o===void 0||a(c,o))&&(o=c)}catch(f){throw Cn(f,"max",c)}}),o===void 0)throw new Error("Cannot calculate max of an empty array");return typeof o=="string"&&(o=n(o,Cs(o,r))),o}}),gS="min",sG=["typed","config","numeric","smaller","isNaN"],O4=q(gS,sG,t=>{var{typed:e,config:r,numeric:n,smaller:a,isNaN:i}=t;return e(gS,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(o,c){return Vh(o,c.valueOf(),s)},"...":function(o){if(su(o))throw new TypeError("Scalar values expected in function min");return l(o)}});function s(u,o){try{return a(u,o)?u:o}catch(c){throw Cn(c,"min",o)}}function l(u){var o;if(Ss(u,function(c){try{(i(c)||o===void 0||a(c,o))&&(o=c)}catch(f){throw Cn(f,"min",c)}}),o===void 0)throw new Error("Cannot calculate min of an empty array");return typeof o=="string"&&(o=n(o,Cs(o,r))),o}}),oG="ImmutableDenseMatrix",lG=["smaller","DenseMatrix"],uG=q(oG,lG,t=>{var{smaller:e,DenseMatrix:r}=t;function n(a,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(i&&!yr(i))throw new Error("Invalid datatype: "+i);if(Ye(a)||Wt(a)){var s=new r(a,i);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(a&&Wt(a.data)&&Wt(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+Xt(a)+")");this._data=[],this._size=[0],this._datatype=i,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(a){switch(arguments.length){case 1:{var i=r.prototype.subset.call(this,a);return Ye(i)?new n({data:i._data,size:i._size,datatype:i._datatype}):i}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:nt(this._data),size:nt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(a){return new n(a)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(i){(a===null||e(i,a))&&(a=i)}),this._min=a!==null?a:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(i){(a===null||e(a,i))&&(a=i)}),this._max=a!==null?a:void 0}return this._max},n},{isClass:!0}),cG="Index",fG=["ImmutableDenseMatrix","getMatrixDataType"],dG=q(cG,fG,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var i=0,s=arguments.length;i<s;i++){var l=i<0||arguments.length<=i?void 0:arguments[i],u=Wt(l),o=Ye(l),c=typeof l,f=null;if($y(l))this._dimensions.push(l),this._isScalar=!1;else if(u||o){var d=void 0;this._isScalar=!1,r(l)==="boolean"?(u&&(d=a(yS(l).valueOf())),o&&(d=a(yS(l._data).valueOf())),f=l.valueOf().length):d=a(l.valueOf()),this._dimensions.push(d)}else if(c==="number")this._dimensions.push(l);else if(c==="bigint")this._dimensions.push(Number(l));else if(c==="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(f)}}n.prototype.type="Index",n.prototype.isIndex=!0;function a(i){for(var s=0,l=i.length;s<l;s++)if(!Xe(i[s])||!We(i[s]))throw new TypeError("Index parameters must be positive integer numbers");var u=new e;return u._data=i,u._size=[i.length],u}return n.prototype.clone=function(){var i=new n;return i._dimensions=nt(this._dimensions),i._isScalar=this._isScalar,i._sourceSize=this._sourceSize,i},n.create=function(i){var s=new n;return n.apply(s,i),s},n.prototype.size=function(){for(var i=[],s=0,l=this._dimensions.length;s<l;s++){var u=this._dimensions[s];i[s]=yr(u)||Xe(u)?1:u.size()[0]}return i},n.prototype.max=function(){for(var i=[],s=0,l=this._dimensions.length;s<l;s++){var u=this._dimensions[s];i[s]=yr(u)||Xe(u)?u:u.max()}return i},n.prototype.min=function(){for(var i=[],s=0,l=this._dimensions.length;s<l;s++){var u=this._dimensions[s];i[s]=yr(u)||Xe(u)?u:u.min()}return i},n.prototype.forEach=function(i){for(var s=0,l=this._dimensions.length;s<l;s++)i(this._dimensions[s],s,this)},n.prototype.dimension=function(i){var s;return Xe(i)&&(s=this._dimensions[i])!==null&&s!==void 0?s:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&yr(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var i=[],s=0,l=this._dimensions.length;s<l;s++){var u=this._dimensions[s];i.push(yr(u)||Xe(u)?u:u.toArray())}return i},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var i=[],s=0,l=this._dimensions.length;s<l;s++){var u=this._dimensions[s];yr(u)?i.push(JSON.stringify(u)):i.push(u.toString())}return"["+i.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(i){return n.create(i.dimensions)},n},{isClass:!0});function yS(t){var e=[];return t.forEach((r,n)=>{r&&e.push(n)}),e}var mG="FibonacciHeap",hG=["smaller","larger"],pG=q(mG,hG,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var m=this._minimum;d.left=m,d.right=m.right,m.right=d,d.right.left=d,e(c,m.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,m=c.child;d>0;){var p=m.right;m.left.right=m.right,m.right.left=m.left,m.left=f,m.right=f.right,f.right=m,m.right.left=m,m.parent=null,m=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=o(f,this._size)),this._size--,this._minimum=f,c},a.prototype.remove=function(c){this._minimum=i(this._minimum,c,-1),this.extractMinimum()};function i(c,f,d){f.key=d;var m=f.parent;return m&&e(f.key,m.key)&&(s(c,f,m),l(c,m)),e(f.key,c.key)&&(c=f),c}function s(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function l(c,f){var d=f.parent;d&&(f.mark?(s(c,f,d),l(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function o(c,f){var d=Math.floor(Math.log(f)*n)+1,m=new Array(d),p=0,h=c;if(h)for(p++,h=h.right;h!==c;)p++,h=h.right;for(var D;p>0;){for(var w=h.degree,S=h.right;D=m[w],!!D;){if(r(h.key,D.key)){var x=D;D=h,h=x}u(D,h),m[w]=null,w++}m[w]=h,h=S,p--}c=null;for(var b=0;b<d;b++)D=m[b],D&&(c?(D.left.right=D.right,D.right.left=D.left,D.left=c,D.right=c.right,c.right=D,D.right.left=D,e(D.key,c.key)&&(c=D)):c=D);return c}return a},{isClass:!0}),vG="Spa",gG=["addScalar","equalScalar","FibonacciHeap"],yG=q(vG,gG,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(i,s){if(this._values[i])this._values[i].value=s;else{var l=this._heap.insert(i,s);this._values[i]=l}},a.prototype.get=function(i){var s=this._values[i];return s?s.value:0},a.prototype.accumulate=function(i,s){var l=this._values[i];l?l.value=e(l.value,s):(l=this._heap.insert(i,s),this._values[i]=l)},a.prototype.forEach=function(i,s,l){var u=this._heap,o=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=i&&(r(f.value,0)||l(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var m=c[d];f=u.insert(m.key,m.value),o[f.key]=f}},a.prototype.swap=function(i,s){var l=this._values[i],u=this._values[s];if(!l&&u)l=this._heap.insert(i,u.value),this._heap.remove(u),this._values[i]=l,this._values[s]=void 0;else if(l&&!u)u=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=u,this._values[i]=void 0;else if(l&&u){var o=l.value;l.value=u.value,u.value=o}},a},{isClass:!0});function xG(t){var e=0,r=1,n=Object.create(null),a=Object.create(null),i=0,s=function(u){var o=a[u];if(o&&(delete n[o],delete a[u],--e,r===o)){if(!e){i=0,r=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(u){var o=a[u],c=++i;if(n[c]=u,a[u]=c,!o)return++e,e<=t?void 0:(u=n[r],s(u),u);if(delete n[o],r===o)for(;!Object.prototype.hasOwnProperty.call(n,++r););},delete:s,clear:function(){e=i=0,r=1,n=Object.create(null),a=Object.create(null)}}}function ff(t){var{hasher:e,limit:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r=r??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:xG(r||Number.POSITIVE_INFINITY)});for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var s=e(a);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var l=t.apply(t,a);return n.cache.values.set(s,l),n.cache.values.delete(n.cache.lru.hit(s)),l}}var bG=ff(function(t){return new t(1).exp()},{hasher:Hh}),wG=ff(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:Hh}),Yy=ff(function(t){return t.acos(-1)},{hasher:Hh}),NG=ff(function(t){return Yy(t).times(2)},{hasher:Hh});function Hh(t){return t[0].precision}function xS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xS(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var _G="Unit",SG=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","toBest","number","Complex","BigNumber","Fraction"],EG=q(_G,SG,t=>{var{on:e,config:r,addScalar:n,subtractScalar:a,multiplyScalar:i,divideScalar:s,pow:l,abs:u,fix:o,round:c,equal:f,isNumeric:d,format:m,toBest:p,number:h,Complex:D,BigNumber:w,Fraction:S}=t,x=h;function b(G,te){if(!(this instanceof b))throw new Error("Constructor must be called with the new operator");if(!(G==null||d(G)||pi(G)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,te===void 0)this.units=[],this.dimensions=Y.map(L=>0);else if(typeof te=="string"){var ce=b.parse(te);this.units=ce.units,this.dimensions=ce.dimensions}else if(Wn(te)&&te.value===null)this.fixPrefix=te.fixPrefix,this.skipAutomaticSimplification=te.skipAutomaticSimplification,this.dimensions=te.dimensions.slice(0),this.units=te.units.map(L=>Nr({},L));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(G)}Object.defineProperty(b,"name",{value:"Unit"}),b.prototype.constructor=b,b.prototype.type="Unit",b.prototype.isUnit=!0;var N,g,y;function _(){for(;y===" "||y==="	";)T()}function E(G){return G>="0"&&G<="9"||G==="."}function C(G){return G>="0"&&G<="9"}function T(){g++,y=N.charAt(g)}function M(G){g=G,y=N.charAt(g)}function I(){var G="",te=g;if(y==="+"?T():y==="-"&&(G+=y,T()),!E(y))return M(te),null;if(y==="."){if(G+=y,T(),!C(y))return M(te),null}else{for(;C(y);)G+=y,T();y==="."&&(G+=y,T())}for(;C(y);)G+=y,T();if(y==="E"||y==="e"){var ce="",L=g;if(ce+=y,T(),(y==="+"||y==="-")&&(ce+=y,T()),!C(y))return M(L),G;for(G=G+ce;C(y);)G+=y,T()}return G}function j(){for(var G="";C(y)||b.isValidAlpha(y);)G+=y,T();var te=G.charAt(0);return b.isValidAlpha(te)?G:null}function O(G){return y===G?(T(),G):null}b.parse=function(G,te){if(te=te||{},N=G,g=-1,y="",typeof N!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ce=new b;ce.units=[];var L=1,J=!1;T(),_();var re=I(),se=null;if(re){if(r.number==="BigNumber")se=new w(re);else if(r.number==="Fraction")try{se=new S(re)}catch{se=parseFloat(re)}else se=parseFloat(re);_(),O("*")?(L=1,J=!0):O("/")&&(L=-1,J=!0)}for(var ue=[],ve=1;;){for(_();y==="(";)ue.push(L),ve*=L,L=1,T(),_();var _e=void 0;if(y){var Ee=y;if(_e=j(),_e===null)throw new SyntaxError('Unexpected "'+Ee+'" in "'+N+'" at index '+g.toString())}else break;var Me=P(_e);if(Me===null)throw new SyntaxError('Unit "'+_e+'" not found.');var Ae=L*ve;if(_(),O("^")){_();var ht=I();if(ht===null)throw new SyntaxError('In "'+G+'", "^" must be followed by a floating-point number');Ae*=ht}ce.units.push({unit:Me.unit,prefix:Me.prefix,power:Ae});for(var gt=0;gt<Y.length;gt++)ce.dimensions[gt]+=(Me.unit.dimensions[gt]||0)*Ae;for(_();y===")";){if(ue.length===0)throw new SyntaxError('Unmatched ")" in "'+N+'" at index '+g.toString());ve/=ue.pop(),T(),_()}if(J=!1,O("*")?(L=1,J=!0):O("/")?(L=-1,J=!0):L=1,Me.unit.base){var Ut=Me.unit.base.key;ie.auto[Ut]={unit:Me.unit,prefix:Me.prefix}}}if(_(),y)throw new SyntaxError('Could not parse: "'+G+'"');if(J)throw new SyntaxError('Trailing characters: "'+G+'"');if(ue.length!==0)throw new SyntaxError('Unmatched "(" in "'+N+'"');if(ce.units.length===0&&!te.allowNoUnits)throw new SyntaxError('"'+G+'" contains no units');return ce.value=se!==void 0?ce._normalize(se):null,ce},b.prototype.clone=function(){var G=new b;G.fixPrefix=this.fixPrefix,G.skipAutomaticSimplification=this.skipAutomaticSimplification,G.value=nt(this.value),G.dimensions=this.dimensions.slice(0),G.units=[];for(var te=0;te<this.units.length;te++){G.units[te]={};for(var ce in this.units[te])He(this.units[te],ce)&&(G.units[te][ce]=this.units[te][ce])}return G},b.prototype.valueType=function(){return Xt(this.value)},b.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},b.prototype._normalize=function(G){if(G==null||this.units.length===0)return G;for(var te=G,ce=b._getNumberConverter(Xt(G)),L=0;L<this.units.length;L++){var J=ce(this.units[L].unit.value),re=ce(this.units[L].prefix.value),se=ce(this.units[L].power);te=i(te,l(i(J,re),se))}return te},b.prototype._denormalize=function(G,te){if(G==null||this.units.length===0)return G;for(var ce=G,L=b._getNumberConverter(Xt(G)),J=0;J<this.units.length;J++){var re=L(this.units[J].unit.value),se=L(this.units[J].prefix.value),ue=L(this.units[J].power);ce=s(ce,l(i(re,se),ue))}return ce};var P=ff(G=>{if(He(W,G)){var te=W[G],ce=te.prefixes[""];return{unit:te,prefix:ce}}for(var L in W)if(He(W,L)&&M$(G,L)){var J=W[L],re=G.length-L.length,se=G.substring(0,re),ue=He(J.prefixes,se)?J.prefixes[se]:void 0;if(ue!==void 0)return{unit:J,prefix:ue}}return null},{hasher:G=>G[0],limit:100});b.isValuelessUnit=function(G){return P(G)!==null},b.prototype.hasBase=function(G){if(typeof G=="string"&&(G=V[G]),!G)return!1;for(var te=0;te<Y.length;te++)if(Math.abs((this.dimensions[te]||0)-(G.dimensions[te]||0))>1e-12)return!1;return!0},b.prototype.equalBase=function(G){for(var te=0;te<Y.length;te++)if(Math.abs((this.dimensions[te]||0)-(G.dimensions[te]||0))>1e-12)return!1;return!0},b.prototype.equals=function(G){return this.equalBase(G)&&f(this.value,G.value)},b.prototype.multiply=function(G){for(var te=this.clone(),ce=Wn(G)?G:new b(G),L=0;L<Y.length;L++)te.dimensions[L]=(this.dimensions[L]||0)+(ce.dimensions[L]||0);for(var J=0;J<ce.units.length;J++){var re=lv({},ce.units[J]);te.units.push(re)}if(this.value!==null||ce.value!==null){var se=this.value===null?this._normalize($(ce.value)):this.value,ue=ce.value===null?ce._normalize($(this.value)):ce.value;te.value=i(se,ue)}else te.value=null;return Wn(G)&&(te.skipAutomaticSimplification=!1),H(te)},b.prototype.divideInto=function(G){return new b(G).divide(this)},b.prototype.divide=function(G){for(var te=this.clone(),ce=Wn(G)?G:new b(G),L=0;L<Y.length;L++)te.dimensions[L]=(this.dimensions[L]||0)-(ce.dimensions[L]||0);for(var J=0;J<ce.units.length;J++){var re=lv(lv({},ce.units[J]),{},{power:-ce.units[J].power});te.units.push(re)}if(this.value!==null||ce.value!==null){var se=this.value===null?this._normalize($(ce.value)):this.value,ue=ce.value===null?ce._normalize($(this.value)):ce.value;te.value=s(se,ue)}else te.value=null;return Wn(G)&&(te.skipAutomaticSimplification=!1),H(te)},b.prototype.pow=function(G){for(var te=this.clone(),ce=0;ce<Y.length;ce++)te.dimensions[ce]=(this.dimensions[ce]||0)*G;for(var L=0;L<te.units.length;L++)te.units[L].power*=G;return te.value!==null?te.value=l(te.value,G):te.value=null,te.skipAutomaticSimplification=!1,H(te)};function H(G){return G.equalBase(V.NONE)&&G.value!==null&&!r.predictable?G.value:G}function $(G){var te=b._getNumberConverter(Xt(G));return te(1)}b.prototype.abs=function(){var G=this.clone();if(G.value!==null)if(G._isDerived()||G.units.length===0||G.units[0].unit.offset===0)G.value=u(G.value);else{var te=G._numberConverter(),ce=te(G.units[0].unit.value),L=te(G.units[0].unit.offset),J=i(ce,L);G.value=a(u(n(G.value,J)),J)}for(var re in G.units)(G.units[re].unit.name==="VA"||G.units[re].unit.name==="VAR")&&(G.units[re].unit=W.W);return G},b.prototype.to=function(G){var te=this.value===null?this._normalize(1):this.value,ce;if(typeof G=="string")ce=b.parse(G);else if(Wn(G))ce=G.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ce))throw new Error("Units do not match ('".concat(ce.toString(),"' != '").concat(this.toString(),"')"));if(ce.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ce.units.length===0||this.units[0].unit.offset===ce.units[0].unit.offset)ce.value=nt(te);else{var L=b._getNumberConverter(Xt(te)),J=this.units[0].unit.value,re=this.units[0].unit.offset,se=i(J,re),ue=ce.units[0].unit.value,ve=ce.units[0].unit.offset,_e=i(ue,ve);ce.value=n(te,L(a(se,_e)))}return ce.fixPrefix=!0,ce.skipAutomaticSimplification=!0,ce},b.prototype.toNumber=function(G){return x(this.toNumeric(G))},b.prototype.toNumeric=function(G){var te;return G?te=this.to(G):te=this.clone(),te._isDerived()||te.units.length===0?te._denormalize(te.value):te._denormalize(te.value,te.units[0].prefix.value)},b.prototype.toString=function(){return this.format()},b.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},b.fromJSON=function(G){var te,ce=new b(G.value,(te=G.unit)!==null&&te!==void 0?te:void 0);return ce.fixPrefix=G.fixPrefix||!1,ce},b.prototype.valueOf=b.prototype.toString,b.prototype.simplify=function(){var G=this.clone(),te=[],ce;for(var L in oe)if(He(oe,L)&&G.hasBase(V[L])){ce=L;break}if(ce==="NONE")G.units=[];else{var J;if(ce&&He(oe,ce)&&(J=oe[ce]),J)G.units=[{unit:J.unit,prefix:J.prefix,power:1}];else{for(var re=!1,se=0;se<Y.length;se++){var ue=Y[se];Math.abs(G.dimensions[se]||0)>1e-12&&(He(oe,ue)?te.push({unit:oe[ue].unit,prefix:oe[ue].prefix,power:G.dimensions[se]||0}):re=!0)}te.length<G.units.length&&!re&&(G.units=te)}}return G},b.prototype.toSI=function(){for(var G=this.clone(),te=[],ce=0;ce<Y.length;ce++){var L=Y[ce];if(Math.abs(G.dimensions[ce]||0)>1e-12)if(He(ie.si,L))te.push({unit:ie.si[L].unit,prefix:ie.si[L].prefix,power:G.dimensions[ce]||0});else throw new Error("Cannot express custom unit "+L+" in SI units")}return G.units=te,G.fixPrefix=!0,G.skipAutomaticSimplification=!0,this.value!==null?(G.value=null,this.to(G)):G},b.prototype.formatUnits=function(){for(var G="",te="",ce=0,L=0,J=0;J<this.units.length;J++)this.units[J].power>0?(ce++,G+=" "+this.units[J].prefix.name+this.units[J].unit.name,Math.abs(this.units[J].power-1)>1e-15&&(G+="^"+this.units[J].power)):this.units[J].power<0&&L++;if(L>0)for(var re=0;re<this.units.length;re++)this.units[re].power<0&&(ce>0?(te+=" "+this.units[re].prefix.name+this.units[re].unit.name,Math.abs(this.units[re].power+1)>1e-15&&(te+="^"+-this.units[re].power)):(te+=" "+this.units[re].prefix.name+this.units[re].unit.name,te+="^"+this.units[re].power));G=G.substr(1),te=te.substr(1),ce>1&&L>0&&(G="("+G+")"),L>1&&ce>0&&(te="("+te+")");var se=G;return ce>0&&L>0&&(se+=" / "),se+=te,se},b.prototype.toBest=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(G&&!Array.isArray(G))throw new Error("Invalid unit type. Expected string or Unit.");var ce=this.units[0].unit.prefixes;if(G&&G.length>0){var L=G.map(se=>{var ue=null;if(typeof se=="string"){if(ue=b.parse(se),!ue)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!Wn(se))throw new Error("Invalid unit type. Expected compatible string or Unit.");ue===null&&(ue=se.clone());try{return this.to(ue.formatUnits()),ue}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),J=L.map(se=>se.units[0].prefix);this.units[0].unit.prefixes=J.reduce((se,ue)=>(se[ue.name]=ue,se),{}),this.units[0].prefix=J[0]}var re=z(this,te).simp;return this.units[0].unit.prefixes=ce,re.fixPrefix=!0,re},b.prototype.format=function(G){var{simp:te,valueStr:ce,unitStr:L}=z(this,G),J=ce;return te.value&&pi(te.value)&&(J="("+J+")"),L.length>0&&J.length>0&&(J+=" "),J+=L,J};function z(G){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=G.skipAutomaticSimplification||G.value===null?G.clone():G.simplify();X(ce),ae(ce,te.offset);var L=ce._denormalize(ce.value),J=ce.value!==null?m(L,te||{}):"",re=ce.formatUnits();return{simp:ce,valueStr:J,unitStr:re}}function X(G){var te=!1;typeof G.value<"u"&&G.value!==null&&pi(G.value)&&(te=Math.abs(G.value.re)<1e-14);for(var ce in G.units)He(G.units,ce)&&G.units[ce].unit&&(G.units[ce].unit.name==="VA"&&te?G.units[ce].unit=W.VAR:G.units[ce].unit.name==="VAR"&&!te&&(G.units[ce].unit=W.VA))}function ae(G,te){G.units.length===1&&!G.fixPrefix&&Math.abs(G.units[0].power-Math.round(G.units[0].power))<1e-14&&(G.units[0].prefix=G._bestPrefix(te))}b.prototype._bestPrefix=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var te=this.value!==null?u(this.value):0,ce=u(this.units[0].unit.value),L=this.units[0].prefix;if(te===0)return L;var J=this.units[0].power,re=Math.log(te/Math.pow(L.value*ce,J))/Math.LN10-G;if(re>-2.200001&&re<1.800001)return L;re=Math.abs(re);var se=this.units[0].unit.prefixes;for(var ue in se)if(He(se,ue)){var ve=se[ue];if(ve.scientific){var _e=Math.abs(Math.log(te/Math.pow(ve.value*ce,J))/Math.LN10-G);(_e<re||_e===re&&ve.name.length<L.name.length)&&(L=ve,re=_e)}}return L},b.prototype.splitUnit=function(G){for(var te=this.clone(),ce=[],L=0;L<G.length&&(te=te.to(G[L]),L!==G.length-1);L++){var J=te.toNumeric(),re=c(J),se=void 0,ue=f(re,J);ue?se=re:se=o(te.toNumeric());var ve=new b(se,G[L].toString());ce.push(ve),te=a(te,ve)}for(var _e=0,Ee=0;Ee<ce.length;Ee++)_e=n(_e,ce[Ee].value);return f(_e,this.value)&&(te.value=0),ce.push(te),ce};var k={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};k.SHORTLONG=Nr({},k.SHORT,k.LONG),k.BINARY_SHORT=Nr({},k.BINARY_SHORT_SI,k.BINARY_SHORT_IEC),k.BINARY_LONG=Nr({},k.BINARY_LONG_SI,k.BINARY_LONG_IEC);var Y=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],V={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var ye in V)He(V,ye)&&(V[ye].key=ye);var le={},fe={name:"",base:le,value:1,offset:0,dimensions:Y.map(G=>0)},W={meter:{name:"meter",base:V.LENGTH,prefixes:k.LONG,value:1,offset:0},inch:{name:"inch",base:V.LENGTH,prefixes:k.NONE,value:.0254,offset:0},foot:{name:"foot",base:V.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yard:{name:"yard",base:V.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mile:{name:"mile",base:V.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},link:{name:"link",base:V.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rod:{name:"rod",base:V.LENGTH,prefixes:k.NONE,value:5.0292,offset:0},chain:{name:"chain",base:V.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:V.LENGTH,prefixes:k.NONE,value:1e-10,offset:0},m:{name:"m",base:V.LENGTH,prefixes:k.SHORT,value:1,offset:0},in:{name:"in",base:V.LENGTH,prefixes:k.NONE,value:.0254,offset:0},ft:{name:"ft",base:V.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yd:{name:"yd",base:V.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mi:{name:"mi",base:V.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},li:{name:"li",base:V.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rd:{name:"rd",base:V.LENGTH,prefixes:k.NONE,value:5.02921,offset:0},ch:{name:"ch",base:V.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},mil:{name:"mil",base:V.LENGTH,prefixes:k.NONE,value:254e-7,offset:0},m2:{name:"m2",base:V.SURFACE,prefixes:k.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:V.SURFACE,prefixes:k.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:V.SURFACE,prefixes:k.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:V.SURFACE,prefixes:k.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:V.SURFACE,prefixes:k.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:V.SURFACE,prefixes:k.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:V.SURFACE,prefixes:k.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:V.SURFACE,prefixes:k.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:V.SURFACE,prefixes:k.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:V.SURFACE,prefixes:k.NONE,value:1e4,offset:0},m3:{name:"m3",base:V.VOLUME,prefixes:k.CUBIC,value:1,offset:0},L:{name:"L",base:V.VOLUME,prefixes:k.SHORT,value:.001,offset:0},l:{name:"l",base:V.VOLUME,prefixes:k.SHORT,value:.001,offset:0},litre:{name:"litre",base:V.VOLUME,prefixes:k.LONG,value:.001,offset:0},cuin:{name:"cuin",base:V.VOLUME,prefixes:k.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:V.VOLUME,prefixes:k.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:V.VOLUME,prefixes:k.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:V.VOLUME,prefixes:k.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:V.VOLUME,prefixes:k.NONE,value:15e-6,offset:0},drop:{name:"drop",base:V.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:V.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},minim:{name:"minim",base:V.VOLUME,prefixes:k.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:V.VOLUME,prefixes:k.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:V.VOLUME,prefixes:k.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:V.VOLUME,prefixes:k.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:V.VOLUME,prefixes:k.NONE,value:1e-6,offset:0},cup:{name:"cup",base:V.VOLUME,prefixes:k.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:V.VOLUME,prefixes:k.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:V.VOLUME,prefixes:k.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:V.VOLUME,prefixes:k.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:V.VOLUME,prefixes:k.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:V.VOLUME,prefixes:k.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:V.VOLUME,prefixes:k.NONE,value:.238480942392,offset:0},g:{name:"g",base:V.MASS,prefixes:k.SHORT,value:.001,offset:0},gram:{name:"gram",base:V.MASS,prefixes:k.LONG,value:.001,offset:0},ton:{name:"ton",base:V.MASS,prefixes:k.SHORT,value:907.18474,offset:0},t:{name:"t",base:V.MASS,prefixes:k.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:V.MASS,prefixes:k.LONG,value:1e3,offset:0},grain:{name:"grain",base:V.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:V.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:V.MASS,prefixes:k.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:V.MASS,prefixes:k.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:V.MASS,prefixes:k.NONE,value:45.359237,offset:0},stick:{name:"stick",base:V.MASS,prefixes:k.NONE,value:.115,offset:0},stone:{name:"stone",base:V.MASS,prefixes:k.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:V.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:V.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:V.MASS,prefixes:k.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:V.MASS,prefixes:k.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:V.MASS,prefixes:k.NONE,value:45.359237,offset:0},s:{name:"s",base:V.TIME,prefixes:k.SHORT,value:1,offset:0},min:{name:"min",base:V.TIME,prefixes:k.NONE,value:60,offset:0},h:{name:"h",base:V.TIME,prefixes:k.NONE,value:3600,offset:0},second:{name:"second",base:V.TIME,prefixes:k.LONG,value:1,offset:0},sec:{name:"sec",base:V.TIME,prefixes:k.LONG,value:1,offset:0},minute:{name:"minute",base:V.TIME,prefixes:k.NONE,value:60,offset:0},hour:{name:"hour",base:V.TIME,prefixes:k.NONE,value:3600,offset:0},day:{name:"day",base:V.TIME,prefixes:k.NONE,value:86400,offset:0},week:{name:"week",base:V.TIME,prefixes:k.NONE,value:7*86400,offset:0},month:{name:"month",base:V.TIME,prefixes:k.NONE,value:2629800,offset:0},year:{name:"year",base:V.TIME,prefixes:k.NONE,value:31557600,offset:0},decade:{name:"decade",base:V.TIME,prefixes:k.NONE,value:315576e3,offset:0},century:{name:"century",base:V.TIME,prefixes:k.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:V.TIME,prefixes:k.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:V.FREQUENCY,prefixes:k.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:V.FREQUENCY,prefixes:k.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:V.ANGLE,prefixes:k.SHORT,value:1,offset:0},radian:{name:"radian",base:V.ANGLE,prefixes:k.LONG,value:1,offset:0},deg:{name:"deg",base:V.ANGLE,prefixes:k.SHORT,value:null,offset:0},degree:{name:"degree",base:V.ANGLE,prefixes:k.LONG,value:null,offset:0},grad:{name:"grad",base:V.ANGLE,prefixes:k.SHORT,value:null,offset:0},gradian:{name:"gradian",base:V.ANGLE,prefixes:k.LONG,value:null,offset:0},cycle:{name:"cycle",base:V.ANGLE,prefixes:k.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:V.ANGLE,prefixes:k.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:V.ANGLE,prefixes:k.NONE,value:null,offset:0},A:{name:"A",base:V.CURRENT,prefixes:k.SHORT,value:1,offset:0},ampere:{name:"ampere",base:V.CURRENT,prefixes:k.LONG,value:1,offset:0},K:{name:"K",base:V.TEMPERATURE,prefixes:k.SHORT,value:1,offset:0},degC:{name:"degC",base:V.TEMPERATURE,prefixes:k.SHORT,value:1,offset:273.15},degF:{name:"degF",base:V.TEMPERATURE,prefixes:k.SHORT,value:new S(5,9),offset:459.67},degR:{name:"degR",base:V.TEMPERATURE,prefixes:k.SHORT,value:new S(5,9),offset:0},kelvin:{name:"kelvin",base:V.TEMPERATURE,prefixes:k.LONG,value:1,offset:0},celsius:{name:"celsius",base:V.TEMPERATURE,prefixes:k.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:V.TEMPERATURE,prefixes:k.LONG,value:new S(5,9),offset:459.67},rankine:{name:"rankine",base:V.TEMPERATURE,prefixes:k.LONG,value:new S(5,9),offset:0},mol:{name:"mol",base:V.AMOUNT_OF_SUBSTANCE,prefixes:k.SHORT,value:1,offset:0},mole:{name:"mole",base:V.AMOUNT_OF_SUBSTANCE,prefixes:k.LONG,value:1,offset:0},cd:{name:"cd",base:V.LUMINOUS_INTENSITY,prefixes:k.SHORT,value:1,offset:0},candela:{name:"candela",base:V.LUMINOUS_INTENSITY,prefixes:k.LONG,value:1,offset:0},N:{name:"N",base:V.FORCE,prefixes:k.SHORT,value:1,offset:0},newton:{name:"newton",base:V.FORCE,prefixes:k.LONG,value:1,offset:0},dyn:{name:"dyn",base:V.FORCE,prefixes:k.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:V.FORCE,prefixes:k.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:V.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:V.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:V.FORCE,prefixes:k.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:V.FORCE,prefixes:k.NONE,value:9.80665,offset:0},J:{name:"J",base:V.ENERGY,prefixes:k.SHORT,value:1,offset:0},joule:{name:"joule",base:V.ENERGY,prefixes:k.LONG,value:1,offset:0},erg:{name:"erg",base:V.ENERGY,prefixes:k.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:V.ENERGY,prefixes:k.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:V.ENERGY,prefixes:k.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:V.ENERGY,prefixes:k.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:V.ENERGY,prefixes:k.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:V.POWER,prefixes:k.SHORT,value:1,offset:0},watt:{name:"watt",base:V.POWER,prefixes:k.LONG,value:1,offset:0},hp:{name:"hp",base:V.POWER,prefixes:k.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:V.POWER,prefixes:k.SHORT,value:D.I,offset:0},VA:{name:"VA",base:V.POWER,prefixes:k.SHORT,value:1,offset:0},Pa:{name:"Pa",base:V.PRESSURE,prefixes:k.SHORT,value:1,offset:0},psi:{name:"psi",base:V.PRESSURE,prefixes:k.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:V.PRESSURE,prefixes:k.NONE,value:101325,offset:0},bar:{name:"bar",base:V.PRESSURE,prefixes:k.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:V.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:V.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:V.PRESSURE,prefixes:k.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:V.PRESSURE,prefixes:k.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:V.ELECTRIC_CHARGE,prefixes:k.LONG,value:1,offset:0},C:{name:"C",base:V.ELECTRIC_CHARGE,prefixes:k.SHORT,value:1,offset:0},farad:{name:"farad",base:V.ELECTRIC_CAPACITANCE,prefixes:k.LONG,value:1,offset:0},F:{name:"F",base:V.ELECTRIC_CAPACITANCE,prefixes:k.SHORT,value:1,offset:0},volt:{name:"volt",base:V.ELECTRIC_POTENTIAL,prefixes:k.LONG,value:1,offset:0},V:{name:"V",base:V.ELECTRIC_POTENTIAL,prefixes:k.SHORT,value:1,offset:0},ohm:{name:"ohm",base:V.ELECTRIC_RESISTANCE,prefixes:k.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:V.ELECTRIC_INDUCTANCE,prefixes:k.LONG,value:1,offset:0},H:{name:"H",base:V.ELECTRIC_INDUCTANCE,prefixes:k.SHORT,value:1,offset:0},siemens:{name:"siemens",base:V.ELECTRIC_CONDUCTANCE,prefixes:k.LONG,value:1,offset:0},S:{name:"S",base:V.ELECTRIC_CONDUCTANCE,prefixes:k.SHORT,value:1,offset:0},weber:{name:"weber",base:V.MAGNETIC_FLUX,prefixes:k.LONG,value:1,offset:0},Wb:{name:"Wb",base:V.MAGNETIC_FLUX,prefixes:k.SHORT,value:1,offset:0},tesla:{name:"tesla",base:V.MAGNETIC_FLUX_DENSITY,prefixes:k.LONG,value:1,offset:0},T:{name:"T",base:V.MAGNETIC_FLUX_DENSITY,prefixes:k.SHORT,value:1,offset:0},b:{name:"b",base:V.BIT,prefixes:k.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:V.BIT,prefixes:k.BINARY_LONG,value:1,offset:0},B:{name:"B",base:V.BIT,prefixes:k.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:V.BIT,prefixes:k.BINARY_LONG,value:8,offset:0}},K={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ee(G){if(G.number==="BigNumber"){var te=Yy(w);W.rad.value=new w(1),W.deg.value=te.div(180),W.grad.value=te.div(200),W.cycle.value=te.times(2),W.arcsec.value=te.div(648e3),W.arcmin.value=te.div(10800)}else W.rad.value=1,W.deg.value=Math.PI/180,W.grad.value=Math.PI/200,W.cycle.value=Math.PI*2,W.arcsec.value=Math.PI/648e3,W.arcmin.value=Math.PI/10800;W.radian.value=W.rad.value,W.degree.value=W.deg.value,W.gradian.value=W.grad.value}ee(r),e&&e("config",function(G,te){G.number!==te.number&&ee(G)});var ie={si:{NONE:{unit:fe,prefix:k.NONE[""]},LENGTH:{unit:W.m,prefix:k.SHORT[""]},MASS:{unit:W.g,prefix:k.SHORT.k},TIME:{unit:W.s,prefix:k.SHORT[""]},CURRENT:{unit:W.A,prefix:k.SHORT[""]},TEMPERATURE:{unit:W.K,prefix:k.SHORT[""]},LUMINOUS_INTENSITY:{unit:W.cd,prefix:k.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:W.mol,prefix:k.SHORT[""]},ANGLE:{unit:W.rad,prefix:k.SHORT[""]},BIT:{unit:W.bits,prefix:k.SHORT[""]},FORCE:{unit:W.N,prefix:k.SHORT[""]},ENERGY:{unit:W.J,prefix:k.SHORT[""]},POWER:{unit:W.W,prefix:k.SHORT[""]},PRESSURE:{unit:W.Pa,prefix:k.SHORT[""]},ELECTRIC_CHARGE:{unit:W.C,prefix:k.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:W.F,prefix:k.SHORT[""]},ELECTRIC_POTENTIAL:{unit:W.V,prefix:k.SHORT[""]},ELECTRIC_RESISTANCE:{unit:W.ohm,prefix:k.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:W.H,prefix:k.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:W.S,prefix:k.SHORT[""]},MAGNETIC_FLUX:{unit:W.Wb,prefix:k.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:W.T,prefix:k.SHORT[""]},FREQUENCY:{unit:W.Hz,prefix:k.SHORT[""]}}};ie.cgs=JSON.parse(JSON.stringify(ie.si)),ie.cgs.LENGTH={unit:W.m,prefix:k.SHORT.c},ie.cgs.MASS={unit:W.g,prefix:k.SHORT[""]},ie.cgs.FORCE={unit:W.dyn,prefix:k.SHORT[""]},ie.cgs.ENERGY={unit:W.erg,prefix:k.NONE[""]},ie.us=JSON.parse(JSON.stringify(ie.si)),ie.us.LENGTH={unit:W.ft,prefix:k.NONE[""]},ie.us.MASS={unit:W.lbm,prefix:k.NONE[""]},ie.us.TEMPERATURE={unit:W.degF,prefix:k.NONE[""]},ie.us.FORCE={unit:W.lbf,prefix:k.NONE[""]},ie.us.ENERGY={unit:W.BTU,prefix:k.BTU[""]},ie.us.POWER={unit:W.hp,prefix:k.NONE[""]},ie.us.PRESSURE={unit:W.psi,prefix:k.NONE[""]},ie.auto=JSON.parse(JSON.stringify(ie.si));var oe=ie.auto;b.setUnitSystem=function(G){if(He(ie,G))oe=ie[G];else throw new Error("Unit system "+G+" does not exist. Choices are: "+Object.keys(ie).join(", "))},b.getUnitSystem=function(){for(var G in ie)if(He(ie,G)&&ie[G]===oe)return G},b.typeConverters={BigNumber:function(te){return te!=null&&te.isFraction?new w(String(te.n)).div(String(te.d)).times(String(te.s)):new w(te+"")},Fraction:function(te){return new S(te)},Complex:function(te){return te},number:function(te){return te!=null&&te.isFraction?h(te):te}},b.prototype._numberConverter=function(){var G=b.typeConverters[this.valueType()];if(G)return G;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},b._getNumberConverter=function(G){if(!b.typeConverters[G])throw new TypeError('Unsupported type "'+G+'"');return b.typeConverters[G]};for(var pe in W)if(He(W,pe)){var me=W[pe];me.dimensions=me.base.dimensions}for(var Te in K)if(He(K,Te)){var ke=W[K[Te]],ze={};for(var Oe in ke)He(ke,Oe)&&(ze[Oe]=ke[Oe]);ze.name=Te,W[Te]=ze}b.isValidAlpha=function(te){return/^[a-zA-Z]$/.test(te)};function $e(G){for(var te=0;te<G.length;te++){if(y=G.charAt(te),te===0&&!b.isValidAlpha(y))throw new Error('Invalid unit name (must begin with alpha character): "'+G+'"');if(te>0&&!(b.isValidAlpha(y)||C(y)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+G+'"')}}return b.createUnit=function(G,te){if(typeof G!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(te&&te.override){for(var ce in G)if(He(G,ce)&&b.deleteUnit(ce),G[ce].aliases)for(var L=0;L<G[ce].aliases.length;L++)b.deleteUnit(G[ce].aliases[L])}var J;for(var re in G)He(G,re)&&(J=b.createUnitSingle(re,G[re]));return J},b.createUnitSingle=function(G,te){if((typeof te>"u"||te===null)&&(te={}),typeof G!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(He(W,G))throw new Error('Cannot create unit "'+G+'": a unit with that name already exists');$e(G);var ce=null,L=[],J=0,re,se,ue;if(te&&te.type==="Unit")ce=te.clone();else if(typeof te=="string")te!==""&&(re=te);else if(typeof te=="object")re=te.definition,se=te.prefixes,J=te.offset,ue=te.baseName,te.aliases&&(L=te.aliases.valueOf());else throw new TypeError('Cannot create unit "'+G+'" from "'+te.toString()+'": expecting "string" or "Unit" or "Object"');if(L){for(var ve=0;ve<L.length;ve++)if(He(W,L[ve]))throw new Error('Cannot create alias "'+L[ve]+'": a unit with that name already exists')}if(re&&typeof re=="string"&&!ce)try{ce=b.parse(re,{allowNoUnits:!0})}catch(Ge){throw Ge.message='Could not create unit "'+G+'" from "'+re+'": '+Ge.message,Ge}else re&&re.type==="Unit"&&(ce=re.clone());L=L||[],J=J||0,se&&se.toUpperCase?se=k[se.toUpperCase()]||k.NONE:se=k.NONE;var _e={};if(ce){_e={name:G,value:ce.value,dimensions:ce.dimensions.slice(0),prefixes:se,offset:J};var ht=!1;for(var gt in V)if(He(V,gt)){for(var Ut=!0,Ze=0;Ze<Y.length;Ze++)if(Math.abs((_e.dimensions[Ze]||0)-(V[gt].dimensions[Ze]||0))>1e-12){Ut=!1;break}if(Ut){ht=!0,_e.base=V[gt];break}}if(!ht){ue=ue||G+"_STUFF";var lr={dimensions:ce.dimensions.slice(0)};lr.key=ue,V[ue]=lr,oe[ue]={unit:_e,prefix:k.NONE[""]},_e.base=V[ue]}}else{if(ue=ue||G+"_STUFF",Y.indexOf(ue)>=0)throw new Error('Cannot create new base unit "'+G+'": a base unit with that name already exists (and cannot be overridden)');Y.push(ue);for(var Ee in V)He(V,Ee)&&(V[Ee].dimensions[Y.length-1]=0);for(var Me={dimensions:[]},Ae=0;Ae<Y.length;Ae++)Me.dimensions[Ae]=0;Me.dimensions[Y.length-1]=1,Me.key=ue,V[ue]=Me,_e={name:G,value:1,dimensions:V[ue].dimensions.slice(0),prefixes:se,offset:J,base:V[ue]},oe[ue]={unit:_e,prefix:k.NONE[""]}}b.UNITS[G]=_e;for(var R=0;R<L.length;R++){var ne=L[R],he={};for(var De in _e)He(_e,De)&&(he[De]=_e[De]);he.name=ne,b.UNITS[ne]=he}return delete P.cache,new b(null,G)},b.deleteUnit=function(G){delete b.UNITS[G],delete P.cache},b.PREFIXES=k,b.BASE_DIMENSIONS=Y,b.BASE_UNITS=V,b.UNIT_SYSTEMS=ie,b.UNITS=W,b},{isClass:!0}),bS="unit",AG=["typed","Unit"],DG=q(bS,AG,t=>{var{typed:e,Unit:r}=t;return e(bS,{Unit:function(a){return a.clone()},string:function(a){return r.isValuelessUnit(a)?new r(null,a):r.parse(a,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(a,i){return new r(a,i)},"number | BigNumber | Fraction":function(a){return new r(a)},"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),wS="sparse",CG=["typed","SparseMatrix"],TG=q(wS,CG,t=>{var{typed:e,SparseMatrix:r}=t;return e(wS,{"":function(){return new r([])},string:function(a){return new r([],a)},"Array | Matrix":function(a){return new r(a)},"Array | Matrix, string":function(a,i){return new r(a,i)}})}),NS="createUnit",MG=["typed","Unit"],IG=q(NS,MG,t=>{var{typed:e,Unit:r}=t;return e(NS,{"Object, Object":function(a,i){return r.createUnit(a,i)},Object:function(a){return r.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,i,s){var l={};return l[a]=i,r.createUnit(l,s)},"string, Unit | string | Object":function(a,i){var s={};return s[a]=i,r.createUnit(s,{})},string:function(a){var i={};return i[a]={},r.createUnit(i,{})}})}),_S="acos",FG=["typed","config","Complex"],PG=q(_S,FG,t=>{var{typed:e,config:r,Complex:n}=t;return e(_S,{number:function(i){return i>=-1&&i<=1||r.predictable?Math.acos(i):new n(i,0).acos()},Complex:function(i){return i.acos()},BigNumber:function(i){return i.acos()}})}),SS="acosh",RG=["typed","config","Complex"],OG=q(SS,RG,t=>{var{typed:e,config:r,Complex:n}=t;return e(SS,{number:function(i){return i>=1||r.predictable?QM(i):i<=-1?new n(Math.log(Math.sqrt(i*i-1)-i),Math.PI):new n(i,0).acosh()},Complex:function(i){return i.acosh()},BigNumber:function(i){return i.acosh()}})}),ES="acot",BG=["typed","BigNumber"],jG=q(ES,BG,t=>{var{typed:e,BigNumber:r}=t;return e(ES,{number:XM,Complex:function(a){return a.acot()},BigNumber:function(a){return new r(1).div(a).atan()}})}),AS="acoth",kG=["typed","config","Complex","BigNumber"],$G=q(AS,kG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(AS,{number:function(s){return s>=1||s<=-1||r.predictable?KM(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new a(1).div(s).atanh()}})}),DS="acsc",LG=["typed","config","Complex","BigNumber"],zG=q(DS,LG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(DS,{number:function(s){return s<=-1||s>=1||r.predictable?JM(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new a(1).div(s).asin()}})}),CS="acsch",VG=["typed","BigNumber"],UG=q(CS,VG,t=>{var{typed:e,BigNumber:r}=t;return e(CS,{number:YM,Complex:function(a){return a.acsch()},BigNumber:function(a){return new r(1).div(a).asinh()}})}),TS="asec",qG=["typed","config","Complex","BigNumber"],HG=q(TS,qG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(TS,{number:function(s){return s<=-1||s>=1||r.predictable?ZM(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new a(1).div(s).acos()}})}),MS="asech",GG=["typed","config","Complex","BigNumber"],WG=q(MS,GG,t=>{var{typed:e,config:r,Complex:n,BigNumber:a}=t;return e(MS,{number:function(s){if(s<=1&&s>=-1||r.predictable){var l=1/s;if(l>0||r.predictable)return e4(s);var u=Math.sqrt(l*l-1);return new n(Math.log(u-l),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new a(1).div(s).acosh()}})}),IS="asin",QG=["typed","config","Complex"],XG=q(IS,QG,t=>{var{typed:e,config:r,Complex:n}=t;return e(IS,{number:function(i){return i>=-1&&i<=1||r.predictable?Math.asin(i):new n(i,0).asin()},Complex:function(i){return i.asin()},BigNumber:function(i){return i.asin()}})}),KG="asinh",JG=["typed"],YG=q(KG,JG,t=>{var{typed:e}=t;return e("asinh",{number:t4,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),ZG="atan",eW=["typed"],tW=q(ZG,eW,t=>{var{typed:e}=t;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),FS="atan2",rW=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],nW=q(FS,rW,t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:a,DenseMatrix:i,concat:s}=t,l=Ra({typed:e,equalScalar:n}),u=wn({typed:e}),o=v4({typed:e,equalScalar:n}),c=on({typed:e,equalScalar:n}),f=jr({typed:e,DenseMatrix:i}),d=Zt({typed:e,matrix:r,concat:s});return e(FS,{"number, number":Math.atan2,"BigNumber, BigNumber":(m,p)=>a.atan2(m,p)},d({scalar:"number | BigNumber",SS:o,DS:u,SD:l,Ss:c,sS:f}))}),PS="atanh",aW=["typed","config","Complex"],iW=q(PS,aW,t=>{var{typed:e,config:r,Complex:n}=t;return e(PS,{number:function(i){return i<=1&&i>=-1||r.predictable?r4(i):new n(i,0).atanh()},Complex:function(i){return i.atanh()},BigNumber:function(i){return i.atanh()}})}),cu=q("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(r=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(r,n.valueType())(n.value)})}}),RS="cos",sW=["typed"],oW=q(RS,sW,t=>{var{typed:e}=t,r=cu({typed:e});return e(RS,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},r)}),OS="cosh",lW=["typed"],uW=q(OS,lW,t=>{var{typed:e}=t;return e(OS,{number:r7,"Complex | BigNumber":r=>r.cosh()})}),BS="cot",cW=["typed","BigNumber"],fW=q(BS,cW,t=>{var{typed:e,BigNumber:r}=t,n=cu({typed:e});return e(BS,{number:n4,Complex:a=>a.cot(),BigNumber:a=>new r(1).div(a.tan())},n)}),jS="coth",dW=["typed","BigNumber"],mW=q(jS,dW,t=>{var{typed:e,BigNumber:r}=t;return e(jS,{number:a4,Complex:n=>n.coth(),BigNumber:n=>new r(1).div(n.tanh())})}),kS="csc",hW=["typed","BigNumber"],pW=q(kS,hW,t=>{var{typed:e,BigNumber:r}=t,n=cu({typed:e});return e(kS,{number:i4,Complex:a=>a.csc(),BigNumber:a=>new r(1).div(a.sin())},n)}),$S="csch",vW=["typed","BigNumber"],gW=q($S,vW,t=>{var{typed:e,BigNumber:r}=t;return e($S,{number:s4,Complex:n=>n.csch(),BigNumber:n=>new r(1).div(n.sinh())})}),LS="sec",yW=["typed","BigNumber"],xW=q(LS,yW,t=>{var{typed:e,BigNumber:r}=t,n=cu({typed:e});return e(LS,{number:o4,Complex:a=>a.sec(),BigNumber:a=>new r(1).div(a.cos())},n)}),zS="sech",bW=["typed","BigNumber"],wW=q(zS,bW,t=>{var{typed:e,BigNumber:r}=t;return e(zS,{number:l4,Complex:n=>n.sech(),BigNumber:n=>new r(1).div(n.cosh())})}),VS="sin",NW=["typed"],_W=q(VS,NW,t=>{var{typed:e}=t,r=cu({typed:e});return e(VS,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},r)}),US="sinh",SW=["typed"],EW=q(US,SW,t=>{var{typed:e}=t;return e(US,{number:u4,"Complex | BigNumber":r=>r.sinh()})}),qS="tan",AW=["typed"],DW=q(qS,AW,t=>{var{typed:e}=t,r=cu({typed:e});return e(qS,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},r)}),CW="tanh",TW=["typed"],MW=q(CW,TW,t=>{var{typed:e}=t;return e("tanh",{number:a7,"Complex | BigNumber":r=>r.tanh()})}),HS="setCartesian",IW=["typed","size","subset","compareNatural","Index","DenseMatrix"],FW=q(HS,IW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(HS,{"Array | Matrix, Array | Matrix":function(u,o){var c=[];if(n(r(u),new i(0))!==0&&n(r(o),new i(0))!==0){var f=Ct(Array.isArray(u)?u:u.toArray()).sort(a),d=Ct(Array.isArray(o)?o:o.toArray()).sort(a);c=[];for(var m=0;m<f.length;m++)for(var p=0;p<d.length;p++)c.push([f[m],d[p]])}return Array.isArray(u)&&Array.isArray(o)?c:new s(c)}})}),GS="setDifference",PW=["typed","size","subset","compareNatural","Index","DenseMatrix"],RW=q(GS,PW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(GS,{"Array | Matrix, Array | Matrix":function(u,o){var c;if(n(r(u),new i(0))===0)c=[];else{if(n(r(o),new i(0))===0)return Ct(u.toArray());var f=Hl(Ct(Array.isArray(u)?u:u.toArray()).sort(a)),d=Hl(Ct(Array.isArray(o)?o:o.toArray()).sort(a));c=[];for(var m,p=0;p<f.length;p++){m=!1;for(var h=0;h<d.length;h++)if(a(f[p].value,d[h].value)===0&&f[p].identifier===d[h].identifier){m=!0;break}m||c.push(f[p])}}return Array.isArray(u)&&Array.isArray(o)?Bm(c):new s(Bm(c))}})}),WS="setDistinct",OW=["typed","size","subset","compareNatural","Index","DenseMatrix"],BW=q(WS,OW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(WS,{"Array | Matrix":function(u){var o;if(n(r(u),new i(0))===0)o=[];else{var c=Ct(Array.isArray(u)?u:u.toArray()).sort(a);o=[],o.push(c[0]);for(var f=1;f<c.length;f++)a(c[f],c[f-1])!==0&&o.push(c[f])}return Array.isArray(u)?o:new s(o)}})}),QS="setIntersect",jW=["typed","size","subset","compareNatural","Index","DenseMatrix"],kW=q(QS,jW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(QS,{"Array | Matrix, Array | Matrix":function(u,o){var c;if(n(r(u),new i(0))===0||n(r(o),new i(0))===0)c=[];else{var f=Hl(Ct(Array.isArray(u)?u:u.toArray()).sort(a)),d=Hl(Ct(Array.isArray(o)?o:o.toArray()).sort(a));c=[];for(var m=0;m<f.length;m++)for(var p=0;p<d.length;p++)if(a(f[m].value,d[p].value)===0&&f[m].identifier===d[p].identifier){c.push(f[m]);break}}return Array.isArray(u)&&Array.isArray(o)?Bm(c):new s(Bm(c))}})}),XS="setIsSubset",$W=["typed","size","subset","compareNatural","Index"],LW=q(XS,$W,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(XS,{"Array | Matrix, Array | Matrix":function(l,u){if(n(r(l),new i(0))===0)return!0;if(n(r(u),new i(0))===0)return!1;for(var o=Hl(Ct(Array.isArray(l)?l:l.toArray()).sort(a)),c=Hl(Ct(Array.isArray(u)?u:u.toArray()).sort(a)),f,d=0;d<o.length;d++){f=!1;for(var m=0;m<c.length;m++)if(a(o[d].value,c[m].value)===0&&o[d].identifier===c[m].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),KS="setMultiplicity",zW=["typed","size","subset","compareNatural","Index"],VW=q(KS,zW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(KS,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(l,u){if(n(r(u),new i(0))===0)return 0;for(var o=Ct(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<o.length;f++)a(o[f],l)===0&&c++;return c}})}),JS="setPowerset",UW=["typed","size","subset","compareNatural","Index"],qW=q(JS,UW,t=>{var{typed:e,size:r,subset:n,compareNatural:a,Index:i}=t;return e(JS,{"Array | Matrix":function(o){if(n(r(o),new i(0))===0)return[];for(var c=Ct(Array.isArray(o)?o:o.toArray()).sort(a),f=[],d=0;d.toString(2).length<=c.length;)f.push(s(c,d.toString(2).split("").reverse())),d++;return l(f)}});function s(u,o){for(var c=[],f=0;f<o.length;f++)o[f]==="1"&&c.push(u[f]);return c}function l(u){for(var o=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(o=u[f],u[f]=u[f+1],u[f+1]=o);return u}}),YS="setSize",HW=["typed","compareNatural"],GW=q(YS,HW,t=>{var{typed:e,compareNatural:r}=t;return e(YS,{"Array | Matrix":function(a){return Array.isArray(a)?Ct(a).length:Ct(a.toArray()).length},"Array | Matrix, boolean":function(a,i){if(i===!1||a.length===0)return Array.isArray(a)?Ct(a).length:Ct(a.toArray()).length;for(var s=Ct(Array.isArray(a)?a:a.toArray()).sort(r),l=1,u=1;u<s.length;u++)r(s[u],s[u-1])!==0&&l++;return l}})}),ZS="setSymDifference",WW=["typed","size","concat","subset","setDifference","Index"],QW=q(ZS,WW,t=>{var{typed:e,size:r,concat:n,subset:a,setDifference:i,Index:s}=t;return e(ZS,{"Array | Matrix, Array | Matrix":function(u,o){if(a(r(u),new s(0))===0)return Ct(o);if(a(r(o),new s(0))===0)return Ct(u);var c=Ct(u),f=Ct(o);return n(i(c,f),i(f,c))}})}),eE="setUnion",XW=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],KW=q(eE,XW,t=>{var{typed:e,size:r,concat:n,subset:a,setIntersect:i,setSymDifference:s,Index:l}=t;return e(eE,{"Array | Matrix, Array | Matrix":function(o,c){if(a(r(o),new l(0))===0)return Ct(c);if(a(r(c),new l(0))===0)return Ct(o);var f=Ct(o),d=Ct(c);return n(s(f,d),i(f,d))}})}),tE="add",JW=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],YW=q(tE,JW,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:a,DenseMatrix:i,SparseMatrix:s,concat:l}=t,u=Ms({typed:e}),o=Gy({typed:e,equalScalar:a}),c=Ao({typed:e,DenseMatrix:i}),f=Zt({typed:e,matrix:r,concat:l});return e(tE,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(m,p,h)=>{for(var D=d(m,p),w=0;w<h.length;w++)D=d(D,h[w]);return D})},f({elop:n,DS:u,SS:o,Ss:c}))}),rE="hypot",ZW=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],eQ=q(rE,ZW,t=>{var{typed:e,abs:r,addScalar:n,divideScalar:a,multiplyScalar:i,sqrt:s,smaller:l,isPositive:u}=t;return e(rE,{"... number | BigNumber":o,Array:o,Matrix:c=>o(Ct(c.toArray(),!0))});function o(c){for(var f=0,d=0,m=0;m<c.length;m++){if(pi(c[m]))throw new TypeError("Unexpected type of argument to hypot");var p=r(c[m]);l(d,p)?(f=i(f,i(a(d,p),a(d,p))),f=n(f,1),d=p):f=n(f,u(p)?i(a(p,d),a(p,d)):p)}return i(d,s(f))}}),nE="norm",tQ=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],rQ=q(nE,tQ,t=>{var{typed:e,abs:r,add:n,pow:a,conj:i,sqrt:s,multiply:l,equalScalar:u,larger:o,smaller:c,matrix:f,ctranspose:d,eigs:m}=t;return e(nE,{number:Math.abs,Complex:function(_){return _.abs()},BigNumber:function(_){return _.abs()},boolean:function(_){return Math.abs(_)},Array:function(_){return g(f(_),2)},Matrix:function(_){return g(_,2)},"Array, number | BigNumber | string":function(_,E){return g(f(_),E)},"Matrix, number | BigNumber | string":function(_,E){return g(_,E)}});function p(y){var _=0;return y.forEach(function(E){var C=r(E);o(C,_)&&(_=C)},!0),_}function h(y){var _;return y.forEach(function(E){var C=r(E);(!_||c(C,_))&&(_=C)},!0),_||0}function D(y,_){if(_===Number.POSITIVE_INFINITY||_==="inf")return p(y);if(_===Number.NEGATIVE_INFINITY||_==="-inf")return h(y);if(_==="fro")return g(y,2);if(typeof _=="number"&&!isNaN(_)){if(!u(_,0)){var E=0;return y.forEach(function(C){E=n(a(r(C),_),E)},!0),a(E,1/_)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function w(y){var _=0;return y.forEach(function(E,C){_=n(_,l(E,i(E)))}),r(s(_))}function S(y){var _=[],E=0;return y.forEach(function(C,T){var M=T[1],I=n(_[M]||0,r(C));o(I,E)&&(E=I),_[M]=I},!0),E}function x(y){var _=y.size();if(_[0]!==_[1])throw new RangeError("Invalid matrix dimensions");var E=d(y),C=l(E,y),T=m(C).values.toArray(),M=T[T.length-1];return r(s(M))}function b(y){var _=[],E=0;return y.forEach(function(C,T){var M=T[0],I=n(_[M]||0,r(C));o(I,E)&&(E=I),_[M]=I},!0),E}function N(y,_){if(_===1)return S(y);if(_===Number.POSITIVE_INFINITY||_==="inf")return b(y);if(_==="fro")return w(y);if(_===2)return x(y);throw new Error("Unsupported parameter value "+_)}function g(y,_){var E=y.size();if(E.length===1)return D(y,_);if(E.length===2){if(E[0]&&E[1])return N(y,_);throw new RangeError("Invalid matrix dimensions")}}}),aE="dot",nQ=["typed","addScalar","multiplyScalar","conj","size"],aQ=q(aE,nQ,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:a,size:i}=t;return e(aE,{"Array | DenseMatrix, Array | DenseMatrix":l,"SparseMatrix, SparseMatrix":u});function s(o,c){var f=i(o),d=i(c),m,p;if(f.length===1)m=f[0];else if(f.length===2&&f[1]===1)m=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(m!==p)throw new RangeError("Vectors must have equal length ("+m+" != "+p+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function l(o,c){var f=s(o,c),d=Ye(o)?o._data:o,m=Ye(o)?o._datatype||o.getDataType():void 0,p=Ye(c)?c._data:c,h=Ye(c)?c._datatype||c.getDataType():void 0,D=i(o).length===2,w=i(c).length===2,S=r,x=n;if(m&&h&&m===h&&typeof m=="string"&&m!=="mixed"){var b=m;S=e.find(r,[b,b]),x=e.find(n,[b,b])}if(!D&&!w){for(var N=x(a(d[0]),p[0]),g=1;g<f;g++)N=S(N,x(a(d[g]),p[g]));return N}if(!D&&w){for(var y=x(a(d[0]),p[0][0]),_=1;_<f;_++)y=S(y,x(a(d[_]),p[_][0]));return y}if(D&&!w){for(var E=x(a(d[0][0]),p[0]),C=1;C<f;C++)E=S(E,x(a(d[C][0]),p[C]));return E}if(D&&w){for(var T=x(a(d[0][0]),p[0][0]),M=1;M<f;M++)T=S(T,x(a(d[M][0]),p[M][0]));return T}}function u(o,c){s(o,c);for(var f=o._index,d=o._values,m=c._index,p=c._values,h=0,D=r,w=n,S=0,x=0;S<f.length&&x<m.length;){var b=f[S],N=m[x];if(b<N){S++;continue}if(b>N){x++;continue}b===N&&(h=D(h,w(d[S],p[x])),S++,x++)}return h}}),iQ="trace",sQ=["typed","matrix","add"],oQ=q(iQ,sQ,t=>{var{typed:e,matrix:r,add:n}=t;return e("trace",{Array:function(l){return a(r(l))},SparseMatrix:i,DenseMatrix:a,any:nt});function a(s){var l=s._size,u=s._data;switch(l.length){case 1:if(l[0]===1)return nt(u[0]);throw new RangeError("Matrix must be square (size: "+pt(l)+")");case 2:{var o=l[0],c=l[1];if(o===c){for(var f=0,d=0;d<o;d++)f=n(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+pt(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(l)+")")}}function i(s){var l=s._values,u=s._index,o=s._ptr,c=s._size,f=c[0],d=c[1];if(f===d){var m=0;if(l.length>0)for(var p=0;p<d;p++)for(var h=o[p],D=o[p+1],w=h;w<D;w++){var S=u[w];if(S===p){m=n(m,l[w]);break}if(S>p)break}return m}throw new RangeError("Matrix must be square (size: "+pt(c)+")")}}),iE="index",lQ=["typed","Index"],uQ=q(iE,lQ,t=>{var{typed:e,Index:r}=t;return e(iE,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var i=a.map(function(l){return lt(l)?l.toNumber():Wt(l)||Ye(l)?l.map(function(u){return lt(u)?u.toNumber():u}):l}),s=new r;return r.apply(s,i),s}})}),B4=new Set(["end"]),cQ="Node",fQ=["mathWithTransform"],dQ=q(cQ,fQ,t=>{var{mathWithTransform:e}=t;function r(a){for(var i of[...B4])if(a.has(i))throw new Error('Scope contains an illegal symbol, "'+i+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(i){return this.compile().evaluate(i)}compile(){var i=this._compile(e,{}),s={},l=null;function u(o){var c=Sl(o);return r(c),i(c,s,l)}return{evaluate:u}}_compile(i,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(i){throw new Error("Cannot run forEach on a Node interface")}map(i){throw new Error("Cannot run map on a Node interface")}_ifNode(i){if(!Ht(i))throw new TypeError("Callback function must return a Node");return i}traverse(i){i(this,null,null);function s(l,u){l.forEach(function(o,c,f){u(o,c,f),s(o,u)})}s(this,i)}transform(i){function s(l,u,o){var c=i(l,u,o);return c!==l?c:l.map(s)}return s(this,null,null)}filter(i){var s=[];return this.traverse(function(l,u,o){i(l,u,o)&&s.push(l)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(i){return i.cloneDeep()})}equals(i){return i?this.type===i.type&&Ei(this,i):!1}toString(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toString(i)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toHTML(i)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toTex(i)}_toTex(i){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(i){if(i&&typeof i=="object")switch(typeof i.handler){case"object":case"undefined":return;case"function":return i.handler(this,i);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function In(t){return t&&t.isIndexError?new Fa(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function j4(t){var{subset:e}=t;return function(n,a){try{if(Array.isArray(n))return e(n,a);if(n&&typeof n.subset=="function")return n.subset(a);if(typeof n=="string")return e(n,a);if(typeof n=="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return En(n,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(i){throw In(i)}}}var od="AccessorNode",mQ=["subset","Node"],hQ=q(od,mQ,t=>{var{subset:e,Node:r}=t,n=j4({subset:e});function a(s){return!(ho(s)||ia(s)||Nt(s)||ws(s)||Bh(s)||Si(s)||Qr(s))}class i extends r{constructor(l,u){if(super(),!Ht(l))throw new TypeError('Node expected for parameter "object"');if(!iu(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=l,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return od}get isAccessorNode(){return!0}_compile(l,u){var o=this.object._compile(l,u),c=this.index._compile(l,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(m,p,h){return En(o(m,p,h),f)}}else return function(m,p,h){var D=o(m,p,h),w=c(m,p,D);return n(D,w)}}forEach(l){l(this.object,"object",this),l(this.index,"index",this)}map(l){return new i(this._ifNode(l(this.object,"object",this)),this._ifNode(l(this.index,"index",this)))}clone(){return new i(this.object,this.index)}_toString(l){var u=this.object.toString(l);return a(this.object)&&(u="("+u+")"),u+this.index.toString(l)}_toHTML(l){var u=this.object.toHTML(l);return a(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(l)}_toTex(l){var u=this.object.toTex(l);return a(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(l)}toJSON(){return{mathjs:od,object:this.object,index:this.index}}static fromJSON(l){return new i(l.object,l.index)}}return Mr(i,"name",od),i},{isClass:!0,isNode:!0}),ld="ArrayNode",pQ=["Node"],vQ=q(ld,pQ,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),this.items=a||[],!Array.isArray(this.items)||!this.items.every(Ht))throw new TypeError("Array containing Nodes expected")}get type(){return ld}get isArrayNode(){return!0}_compile(a,i){var s=ds(this.items,function(o){return o._compile(a,i)}),l=a.config.matrix!=="Array";if(l){var u=a.matrix;return function(c,f,d){return u(ds(s,function(m){return m(c,f,d)}))}}else return function(c,f,d){return ds(s,function(m){return m(c,f,d)})}}forEach(a){for(var i=0;i<this.items.length;i++){var s=this.items[i];a(s,"items["+i+"]",this)}}map(a){for(var i=[],s=0;s<this.items.length;s++)i[s]=this._ifNode(a(this.items[s],"items["+s+"]",this));return new r(i)}clone(){return new r(this.items.slice(0))}_toString(a){var i=this.items.map(function(s){return s.toString(a)});return"["+i.join(", ")+"]"}toJSON(){return{mathjs:ld,items:this.items}}static fromJSON(a){return new r(a.items)}_toHTML(a){var i=this.items.map(function(s){return s.toHTML(a)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){function i(s,l){var u=s.some(ia)&&!s.every(ia),o=l||u,c=o?"&":"\\\\",f=s.map(function(d){return d.items?i(d.items,!l):d.toTex(a)}).join(c);return u||!o||o&&!l?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return i(this.items,!1)}}return Mr(r,"name",ld),r},{isClass:!0,isNode:!0});function gQ(t){var{subset:e,matrix:r}=t;return function(a,i,s){try{if(Array.isArray(a)){var l=r(a).subset(i,s).valueOf();return l.forEach((u,o)=>{a[o]=u}),a}else{if(a&&typeof a.subset=="function")return a.subset(i,s);if(typeof a=="string")return e(a,i,s);if(typeof a=="object"){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return zl(a,i.getObjectProperty(),s),a}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw In(u)}}}var Ea=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function ud(t,e){if(!e||e!=="auto")return t;for(var r=t;Si(r);)r=r.content;return r}function Qt(t,e,r,n){var a=t;e!=="keep"&&(a=t.getContent());for(var i=a.getIdentifier(),s=null,l=0;l<Ea.length;l++)if(i in Ea[l]){s=l;break}if(i==="OperatorNode:multiply"&&a.implicit&&r!=="show"){var u=ud(a.args[0],e);!(Nt(u)&&n&&n.getIdentifier()==="OperatorNode:divide"&&Tg(ud(n.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&Tg(ud(u.args[0],e))&&Nt(ud(u.args[1])))&&(s+=1)}return s}function Lu(t,e){var r=t;e!=="keep"&&(r=t.getContent());var n=r.getIdentifier(),a=Qt(r,e);if(a===null)return null;var i=Ea[a][n];if(He(i,"associativity")){if(i.associativity==="left")return"left";if(i.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+i.associativity+"'.")}return null}function uv(t,e,r){var n=r!=="keep"?t.getContent():t,a=r!=="keep"?t.getContent():e,i=n.getIdentifier(),s=a.getIdentifier(),l=Qt(n,r);if(l===null)return null;var u=Ea[l][i];if(He(u,"associativeWith")&&u.associativeWith instanceof Array){for(var o=0;o<u.associativeWith.length;o++)if(u.associativeWith[o]===s)return!0;return!1}return null}function yQ(t){var e="OperatorNode:"+t;for(var r of Ea)if(e in r)return r[e].op;return null}var cd="AssignmentNode",xQ=["subset","?matrix","Node"],bQ=q(cd,xQ,t=>{var{subset:e,matrix:r,Node:n}=t,a=j4({subset:e}),i=gQ({subset:e,matrix:r});function s(u,o,c){o||(o="keep");var f=Qt(u,o,c),d=Qt(u.value,o,c);return o==="all"||d!==null&&d<=f}class l extends n{constructor(o,c,f){if(super(),this.object=o,this.index=f?c:null,this.value=f||c,!Qr(o)&&!ho(o))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Qr(o)&&o.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!iu(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ht(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return cd}get isAssignmentNode(){return!0}_compile(o,c){var f=this.object._compile(o,c),d=this.index?this.index._compile(o,c):null,m=this.value._compile(o,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var h=this.index.getObjectProperty();return function(b,N,g){var y=f(b,N,g),_=m(b,N,g);return zl(y,h,_),_}}else{if(Qr(this.object))return function(b,N,g){var y=f(b,N,g),_=m(b,N,g),E=d(b,N,y);return b.set(p,i(y,E,_)),_};var D=this.object.object._compile(o,c);if(this.object.index.isObjectProperty()){var w=this.object.index.getObjectProperty();return function(b,N,g){var y=D(b,N,g),_=En(y,w),E=d(b,N,_),C=m(b,N,g);return zl(y,w,i(_,E,C)),C}}else{var S=this.object.index._compile(o,c);return function(b,N,g){var y=D(b,N,g),_=S(b,N,y),E=a(y,_),C=d(b,N,E),T=m(b,N,g);return i(y,_,i(E,C,T)),T}}}else{if(!Qr(this.object))throw new TypeError("SymbolNode expected as object");return function(b,N,g){var y=m(b,N,g);return b.set(p,y),y}}}forEach(o){o(this.object,"object",this),this.index&&o(this.index,"index",this),o(this.value,"value",this)}map(o){var c=this._ifNode(o(this.object,"object",this)),f=this.index?this._ifNode(o(this.index,"index",this)):null,d=this._ifNode(o(this.value,"value",this));return new l(c,f,d)}clone(){return new l(this.object,this.index,this.value)}_toString(o){var c=this.object.toString(o),f=this.index?this.index.toString(o):"",d=this.value.toString(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:cd,object:this.object,index:this.index,value:this.value}}static fromJSON(o){return new l(o.object,o.index,o.value)}_toHTML(o){var c=this.object.toHTML(o),f=this.index?this.index.toHTML(o):"",d=this.value.toHTML(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(o){var c=this.object.toTex(o),f=this.index?this.index.toTex(o):"",d=this.value.toTex(o);return s(this,o&&o.parenthesis,o&&o.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return Mr(l,"name",cd),l},{isClass:!0,isNode:!0}),fd="BlockNode",wQ=["ResultSet","Node"],NQ=q(fd,wQ,t=>{var{ResultSet:e,Node:r}=t;class n extends r{constructor(i){if(super(),!Array.isArray(i))throw new Error("Array expected");this.blocks=i.map(function(s){var l=s&&s.node,u=s&&s.visible!==void 0?s.visible:!0;if(!Ht(l))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:l,visible:u}})}get type(){return fd}get isBlockNode(){return!0}_compile(i,s){var l=ds(this.blocks,function(u){return{evaluate:u.node._compile(i,s),visible:u.visible}});return function(o,c,f){var d=[];return yM(l,function(p){var h=p.evaluate(o,c,f);p.visible&&d.push(h)}),new e(d)}}forEach(i){for(var s=0;s<this.blocks.length;s++)i(this.blocks[s].node,"blocks["+s+"].node",this)}map(i){for(var s=[],l=0;l<this.blocks.length;l++){var u=this.blocks[l],o=this._ifNode(i(u.node,"blocks["+l+"].node",this));s[l]={node:o,visible:u.visible}}return new n(s)}clone(){var i=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(i)}_toString(i){return this.blocks.map(function(s){return s.node.toString(i)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:fd,blocks:this.blocks}}static fromJSON(i){return new n(i.blocks)}_toHTML(i){return this.blocks.map(function(s){return s.node.toHTML(i)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(i){return this.blocks.map(function(s){return s.node.toTex(i)+(s.visible?"":";")}).join(`\\;\\;
`)}}return Mr(n,"name",fd),n},{isClass:!0,isNode:!0}),dd="ConditionalNode",_Q=["Node"],SQ=q(dd,_Q,t=>{var{Node:e}=t;function r(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(lt(a))return!a.isZero();if(pi(a))return!!(a.re||a.im);if(Wn(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+Xt(a)+'"')}class n extends e{constructor(i,s,l){if(super(),!Ht(i))throw new TypeError("Parameter condition must be a Node");if(!Ht(s))throw new TypeError("Parameter trueExpr must be a Node");if(!Ht(l))throw new TypeError("Parameter falseExpr must be a Node");this.condition=i,this.trueExpr=s,this.falseExpr=l}get type(){return dd}get isConditionalNode(){return!0}_compile(i,s){var l=this.condition._compile(i,s),u=this.trueExpr._compile(i,s),o=this.falseExpr._compile(i,s);return function(f,d,m){return r(l(f,d,m))?u(f,d,m):o(f,d,m)}}forEach(i){i(this.condition,"condition",this),i(this.trueExpr,"trueExpr",this),i(this.falseExpr,"falseExpr",this)}map(i){return new n(this._ifNode(i(this.condition,"condition",this)),this._ifNode(i(this.trueExpr,"trueExpr",this)),this._ifNode(i(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",l=Qt(this,s,i&&i.implicit),u=this.condition.toString(i),o=Qt(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||o!==null&&o<=l)&&(u="("+u+")");var c=this.trueExpr.toString(i),f=Qt(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=l)&&(c="("+c+")");var d=this.falseExpr.toString(i),m=Qt(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||m!==null&&m<=l)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:dd,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(i){return new n(i.condition,i.trueExpr,i.falseExpr)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",l=Qt(this,s,i&&i.implicit),u=this.condition.toHTML(i),o=Qt(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||o!==null&&o<=l)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(i),f=Qt(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=l)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(i),m=Qt(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||m!==null&&m<=l)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(i){return"\\begin{cases} {"+this.trueExpr.toTex(i)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(i)+"}\\\\{"+this.falseExpr.toTex(i)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Mr(n,"name",dd),n},{isClass:!0,isNode:!0}),Wg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EQ={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},AQ={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},DQ=function(e,r){return Wg({},e,r)},CQ=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.preserveFormatting,n=r===void 0?!1:r,a=e.escapeMapFn,i=a===void 0?DQ:a,s=String(t),l="",u=i(Wg({},EQ),n?Wg({},AQ):{}),o=Object.keys(u),c=function(){var d=!1;o.forEach(function(m,p){d||s.length>=m.length&&s.slice(0,m.length)===m&&(l+=u[o[p]],s=s.slice(m.length,s.length),d=!0)}),d||(l+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return l};const TQ=eh(CQ);var Qg={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Dt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},sE={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Dt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Dt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Dt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Dt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Dt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Dt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Dt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Dt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Dt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Dt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Dt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Dt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Dt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Dt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Dt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Dt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Dt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Dt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Dt.and,"${args[1]}\\right)")},not:{1:Dt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Dt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Dt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Dt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Dt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Dt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Dt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Dt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Dt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Dt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Dt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Dt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Dt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Dt.to,"${args[1]}\\right)")},numeric:function(e,r){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Qg.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},MQ="\\mathrm{${name}}\\left(${args}\\right)",oE={deg:"^\\circ"};function Xg(t){return TQ(t,{preserveFormatting:!0})}function k4(t,e){return e=typeof e>"u"?!1:e,e?He(oE,t)?oE[t]:"\\mathrm{"+Xg(t)+"}":He(Qg,t)?Qg[t]:Xg(t)}var md="ConstantNode",IQ=["Node"],FQ=q(md,IQ,t=>{var{Node:e}=t;class r extends e{constructor(a){super(),this.value=a}get type(){return md}get isConstantNode(){return!0}_compile(a,i){var s=this.value;return function(){return s}}forEach(a){}map(a){return this.clone()}clone(){return new r(this.value)}_toString(a){return pt(this.value,a)}_toHTML(a){var i=this._toString(a);switch(Xt(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+i+"</span>";case"string":return'<span class="math-string">'+i+"</span>";case"boolean":return'<span class="math-boolean">'+i+"</span>";case"null":return'<span class="math-null-symbol">'+i+"</span>";case"undefined":return'<span class="math-undefined">'+i+"</span>";default:return'<span class="math-symbol">'+i+"</span>"}}toJSON(){return{mathjs:md,value:this.value}}static fromJSON(a){return new r(a.value)}_toTex(a){var i=this._toString(a),s=Xt(this.value);switch(s){case"string":return"\\mathtt{"+Xg(i)+"}";case"number":case"BigNumber":{var l=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!l)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=i.toLowerCase().indexOf("e");return u!==-1?i.substring(0,u)+"\\cdot10^{"+i.substring(u+1)+"}":i}case"bigint":return i.toString();case"Fraction":return this.value.toLatex();default:return i}}}return Mr(r,"name",md),r},{isClass:!0,isNode:!0}),hd="FunctionAssignmentNode",PQ=["typed","Node"],RQ=q(hd,PQ,t=>{var{typed:e,Node:r}=t;function n(i,s,l){var u=Qt(i,s,l),o=Qt(i.expr,s,l);return s==="all"||o!==null&&o<=u}class a extends r{constructor(s,l,u){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(l))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ht(u))throw new TypeError('Node expected for parameter "expr"');if(B4.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var o=new Set;for(var c of l){var f=typeof c=="string"?c:c.name;if(o.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));o.add(f)}this.name=s,this.params=l.map(function(d){return d&&d.name||d}),this.types=l.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return hd}get isFunctionAssignmentNode(){return!0}_compile(s,l){var u=Object.create(l);yM(this.params,function(h){u[h]=!0});var o=this.expr,c=o._compile(s,u),f=this.name,d=this.params,m=s2(this.types,","),p=f+"("+s2(this.params,", ")+")";return function(D,w,S){var x={};x[m]=function(){for(var N=Object.create(w),g=0;g<d.length;g++)N[d[g]]=arguments[g];return c(D,N,S)};var b=e(f,x);return b.syntax=p,b.expr=o.toString(),D.set(f,b),b}}forEach(s){s(this.expr,"expr",this)}map(s){var l=this._ifNode(s(this.expr,"expr",this));return new a(this.name,this.params.slice(0),l)}clone(){return new a(this.name,this.params.slice(0),this.expr)}_toString(s){var l=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toString(s);return n(this,l,s&&s.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var s=this.types;return{mathjs:hd,name:this.name,params:this.params.map(function(l,u){return{name:l,type:s[u]}}),expr:this.expr}}static fromJSON(s){return new a(s.name,s.params,s.expr)}_toHTML(s){for(var l=s&&s.parenthesis?s.parenthesis:"keep",u=[],o=0;o<this.params.length;o++)u.push('<span class="math-symbol math-parameter">'+ca(this.params[o])+"</span>");var c=this.expr.toHTML(s);return n(this,l,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ca(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var l=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toTex(s);return n(this,l,s&&s.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(k4).join(",")+"\\right)="+u}}return Mr(a,"name",hd),a},{isClass:!0,isNode:!0}),pd="IndexNode",OQ=["Node","size"],BQ=q(pd,OQ,t=>{var{Node:e,size:r}=t;class n extends e{constructor(i,s){if(super(),this.dimensions=i,this.dotNotation=s||!1,!Array.isArray(i)||!i.every(Ht))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return pd}get isIndexNode(){return!0}_compile(i,s){var l=ds(this.dimensions,function(o,c){var f=o.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(f){var d=Object.create(s);d.end=!0;var m=o._compile(i,d);return function(h,D,w){if(!Ye(w)&&!Wt(w)&&!yr(w))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Xt(w));var S=r(w),x=Object.create(D);return x.end=S[c],m(h,x,w)}}else return o._compile(i,s)}),u=En(i,"index");return function(c,f,d){var m=ds(l,function(p){return p(c,f,d)});return u(...m)}}forEach(i){for(var s=0;s<this.dimensions.length;s++)i(this.dimensions[s],"dimensions["+s+"]",this)}map(i){for(var s=[],l=0;l<this.dimensions.length;l++)s[l]=this._ifNode(i(this.dimensions[l],"dimensions["+l+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Nt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(i){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:pd,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(i){return new n(i.dimensions,i.dotNotation)}_toHTML(i){for(var s=[],l=0;l<this.dimensions.length;l++)s[l]=this.dimensions[l].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ca(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){var s=this.dimensions.map(function(l){return l.toTex(i)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return Mr(n,"name",pd),n},{isClass:!0,isNode:!0}),vd="ObjectNode",jQ=["Node"],kQ=q(vd,jQ,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),this.properties=a||{},a&&(typeof a!="object"||!Object.keys(a).every(function(i){return Ht(a[i])})))throw new TypeError("Object containing Nodes expected")}get type(){return vd}get isObjectNode(){return!0}_compile(a,i){var s={};for(var l in this.properties)if(He(this.properties,l)){var u=ml(l),o=JSON.parse(u),c=En(this.properties,l);s[o]=c._compile(a,i)}return function(d,m,p){var h={};for(var D in s)He(s,D)&&(h[D]=s[D](d,m,p));return h}}forEach(a){for(var i in this.properties)He(this.properties,i)&&a(this.properties[i],"properties["+ml(i)+"]",this)}map(a){var i={};for(var s in this.properties)He(this.properties,s)&&(i[s]=this._ifNode(a(this.properties[s],"properties["+ml(s)+"]",this)));return new r(i)}clone(){var a={};for(var i in this.properties)He(this.properties,i)&&(a[i]=this.properties[i]);return new r(a)}_toString(a){var i=[];for(var s in this.properties)He(this.properties,s)&&i.push(ml(s)+": "+this.properties[s].toString(a));return"{"+i.join(", ")+"}"}toJSON(){return{mathjs:vd,properties:this.properties}}static fromJSON(a){return new r(a.properties)}_toHTML(a){var i=[];for(var s in this.properties)He(this.properties,s)&&i.push('<span class="math-symbol math-property">'+ca(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(a));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(a){var i=[];for(var s in this.properties)He(this.properties,s)&&i.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(a)+"\\\\");var l="\\left\\{\\begin{array}{ll}"+i.join(`
`)+"\\end{array}\\right\\}";return l}}return Mr(r,"name",vd),r},{isClass:!0,isNode:!0});function Xu(t,e){return new U3(t,new Ph(e),new Set(Object.keys(e)))}var gd="OperatorNode",$Q=["Node"],LQ=q(gd,$Q,t=>{var{Node:e}=t;function r(i,s){var l=i;if(s==="auto")for(;Si(l);)l=l.content;return Nt(l)?!0:br(l)?r(l.args[0],s):!1}function n(i,s,l,u,o){var c=Qt(i,s,l),f=Lu(i,s);if(s==="all"||u.length>2&&i.getIdentifier()!=="OperatorNode:add"&&i.getIdentifier()!=="OperatorNode:multiply")return u.map(function(C){switch(C.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var m=Qt(u[0],s,l,i);if(o&&m!==null){var p,h;if(s==="keep"?(p=u[0].getIdentifier(),h=i.getIdentifier()):(p=u[0].getContent().getIdentifier(),h=i.getContent().getIdentifier()),Ea[c][h].latexLeftParens===!1){d=[!1];break}if(Ea[m][p].latexParens===!1){d=[!1];break}}if(m===null){d=[!1];break}if(m<=c){d=[!0];break}d=[!1]}break;case 2:{var D,w=Qt(u[0],s,l,i),S=uv(i,u[0],s);w===null?D=!1:w===c&&f==="right"&&!S||w<c?D=!0:D=!1;var x,b=Qt(u[1],s,l,i),N=uv(i,u[1],s);if(b===null?x=!1:b===c&&f==="left"&&!N||b<c?x=!0:x=!1,o){var g,y,_;s==="keep"?(g=i.getIdentifier(),y=i.args[0].getIdentifier(),_=i.args[1].getIdentifier()):(g=i.getContent().getIdentifier(),y=i.args[0].getContent().getIdentifier(),_=i.args[1].getContent().getIdentifier()),w!==null&&(Ea[c][g].latexLeftParens===!1&&(D=!1),Ea[w][y].latexParens===!1&&(D=!1)),b!==null&&(Ea[c][g].latexRightParens===!1&&(x=!1),Ea[b][_].latexParens===!1&&(x=!1))}d=[D,x]}break;default:(i.getIdentifier()==="OperatorNode:add"||i.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(C){var T=Qt(C,s,l,i),M=uv(i,C,s),I=Lu(C,s);return T===null?!1:c===T&&f===I&&!M?!0:T<c}));break}if(u.length>=2&&i.getIdentifier()==="OperatorNode:multiply"&&i.implicit&&s!=="all"&&l==="hide")for(var E=1;E<d.length;++E)r(u[E],s)&&!d[E-1]&&(s!=="keep"||!Si(u[E-1]))&&(d[E]=!0);return d}class a extends e{constructor(s,l,u,o,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof l!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(Ht))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=o===!0,this.isPercentage=c===!0,this.op=s,this.fn=l,this.args=u||[]}get type(){return gd}get isOperatorNode(){return!0}_compile(s,l){if(typeof this.fn!="string"||!ky(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=En(s,this.fn),o=ds(this.args,function(p){return p._compile(s,l)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(h,D,w){return u(c,s,Xu(h,D))}}else if(o.length===1){var f=o[0];return function(h,D,w){return u(f(h,D,w))}}else if(o.length===2){var d=o[0],m=o[1];return function(h,D,w){return u(d(h,D,w),m(h,D,w))}}else return function(h,D,w){return u.apply(null,ds(o,function(S){return S(h,D,w)}))}}forEach(s){for(var l=0;l<this.args.length;l++)s(this.args[l],"args["+l+"]",this)}map(s){for(var l=[],u=0;u<this.args.length;u++)l[u]=this._ifNode(s(this.args[u],"args["+u+"]",this));return new a(this.op,this.fn,l,this.implicit,this.isPercentage)}clone(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var l=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,l,u,o,!1);if(o.length===1){var f=Lu(this,l),d=o[0].toString(s);c[0]&&(d="("+d+")");var m=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(m?" ":"")+d:f==="left"?d+(m?" ":"")+this.op:d+this.op}else if(o.length===2){var p=o[0].toString(s),h=o[1].toString(s);return c[0]&&(p="("+p+")"),c[1]&&(h="("+h+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?p+" "+h:p+" "+this.op+" "+h}else if(o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var D=o.map(function(w,S){return w=w.toString(s),c[S]&&(w="("+w+")"),w});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?D.join(" "):D.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:gd,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new a(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var l=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,l,u,o,!1);if(o.length===1){var f=Lu(this,l),d=o[0].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ca(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ca(this.op)+"</span>"}else if(o.length===2){var m=o[0].toHTML(s),p=o[1].toHTML(s);return c[0]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:m+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ca(this.op)+"</span>"+p}else{var h=o.map(function(D,w){return D=D.toHTML(s),c[w]&&(D='<span class="math-parenthesis math-round-parenthesis">(</span>'+D+'<span class="math-parenthesis math-round-parenthesis">)</span>'),D});return o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):h.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ca(this.op)+"</span>"):'<span class="math-function">'+ca(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+h.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var l=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",o=this.args,c=n(this,l,u,o,!0),f=Dt[this.fn];if(f=typeof f>"u"?this.op:f,o.length===1){var d=Lu(this,l),m=o[0].toTex(s);return c[0]&&(m="\\left(".concat(m,"\\right)")),d==="right"?f+m:m+f}else if(o.length===2){var p=o[0],h=p.toTex(s);c[0]&&(h="\\left(".concat(h,"\\right)"));var D=o[1],w=D.toTex(s);c[1]&&(w="\\left(".concat(w,"\\right)"));var S;switch(l==="keep"?S=p.getIdentifier():S=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+h+"}{"+w+"}";case"OperatorNode:pow":switch(h="{"+h+"}",w="{"+w+"}",S){case"ConditionalNode":case"OperatorNode:divide":h="\\left(".concat(h,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return h+"~"+w}return h+f+w}else if(o.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var x=o.map(function(b,N){return b=b.toTex(s),c[N]&&(b="\\left(".concat(b,"\\right)")),b});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?x.join("~"):x.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+o.map(function(b){return b.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Mr(a,"name",gd),a},{isClass:!0,isNode:!0}),yd="ParenthesisNode",zQ=["Node"],VQ=q(yd,zQ,t=>{var{Node:e}=t;class r extends e{constructor(a){if(super(),!Ht(a))throw new TypeError('Node expected for parameter "content"');this.content=a}get type(){return yd}get isParenthesisNode(){return!0}_compile(a,i){return this.content._compile(a,i)}getContent(){return this.content.getContent()}forEach(a){a(this.content,"content",this)}map(a){var i=a(this.content,"content",this);return new r(i)}clone(){return new r(this.content)}_toString(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"("+this.content.toString(a)+")":this.content.toString(a)}toJSON(){return{mathjs:yd,content:this.content}}static fromJSON(a){return new r(a.content)}_toHTML(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(a)}_toTex(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"\\left(".concat(this.content.toTex(a),"\\right)"):this.content.toTex(a)}}return Mr(r,"name",yd),r},{isClass:!0,isNode:!0}),xd="RangeNode",UQ=["Node"],qQ=q(xd,UQ,t=>{var{Node:e}=t;function r(a,i,s){var l=Qt(a,i,s),u={},o=Qt(a.start,i,s);if(u.start=o!==null&&o<=l||i==="all",a.step){var c=Qt(a.step,i,s);u.step=c!==null&&c<=l||i==="all"}var f=Qt(a.end,i,s);return u.end=f!==null&&f<=l||i==="all",u}class n extends e{constructor(i,s,l){if(super(),!Ht(i))throw new TypeError("Node expected");if(!Ht(s))throw new TypeError("Node expected");if(l&&!Ht(l))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=i,this.end=s,this.step=l||null}get type(){return xd}get isRangeNode(){return!0}needsEnd(){var i=this.filter(function(s){return Qr(s)&&s.name==="end"});return i.length>0}_compile(i,s){var l=i.range,u=this.start._compile(i,s),o=this.end._compile(i,s);if(this.step){var c=this.step._compile(i,s);return function(d,m,p){return l(u(d,m,p),o(d,m,p),c(d,m,p))}}else return function(d,m,p){return l(u(d,m,p),o(d,m,p))}}forEach(i){i(this.start,"start",this),i(this.end,"end",this),this.step&&i(this.step,"step",this)}map(i){return new n(this._ifNode(i(this.start,"start",this)),this._ifNode(i(this.end,"end",this)),this.step&&this._ifNode(i(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",l=r(this,s,i&&i.implicit),u,o=this.start.toString(i);if(l.start&&(o="("+o+")"),u=o,this.step){var c=this.step.toString(i);l.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(i);return l.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:xd,start:this.start,end:this.end,step:this.step}}static fromJSON(i){return new n(i.start,i.end,i.step)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",l=r(this,s,i&&i.implicit),u,o=this.start.toHTML(i);if(l.start&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=o,this.step){var c=this.step.toHTML(i);l.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(i);return l.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(i){var s=i&&i.parenthesis?i.parenthesis:"keep",l=r(this,s,i&&i.implicit),u=this.start.toTex(i);if(l.start&&(u="\\left(".concat(u,"\\right)")),this.step){var o=this.step.toTex(i);l.step&&(o="\\left(".concat(o,"\\right)")),u+=":"+o}var c=this.end.toTex(i);return l.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return Mr(n,"name",xd),n},{isClass:!0,isNode:!0}),bd="RelationalNode",HQ=["Node"],GQ=q(bd,HQ,t=>{var{Node:e}=t,r={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(i,s){if(super(),!Array.isArray(i))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(i.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=i,this.params=s}get type(){return bd}get isRelationalNode(){return!0}_compile(i,s){var l=this,u=this.params.map(o=>o._compile(i,s));return function(c,f,d){for(var m,p=u[0](c,f,d),h=0;h<l.conditionals.length;h++){m=p,p=u[h+1](c,f,d);var D=En(i,l.conditionals[h]);if(!D(m,p))return!1}return!0}}forEach(i){this.params.forEach((s,l)=>i(s,"params["+l+"]",this),this)}map(i){return new n(this.conditionals.slice(),this.params.map((s,l)=>this._ifNode(i(s,"params["+l+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",l=Qt(this,s,i&&i.implicit),u=this.params.map(function(f,d){var m=Qt(f,s,i&&i.implicit);return s==="all"||m!==null&&m<=l?"("+f.toString(i)+")":f.toString(i)}),o=u[0],c=0;c<this.conditionals.length;c++)o+=" "+r[this.conditionals[c]],o+=" "+u[c+1];return o}toJSON(){return{mathjs:bd,conditionals:this.conditionals,params:this.params}}static fromJSON(i){return new n(i.conditionals,i.params)}_toHTML(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",l=Qt(this,s,i&&i.implicit),u=this.params.map(function(f,d){var m=Qt(f,s,i&&i.implicit);return s==="all"||m!==null&&m<=l?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(i)}),o=u[0],c=0;c<this.conditionals.length;c++)o+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ca(r[this.conditionals[c]])+"</span>"+u[c+1];return o}_toTex(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",l=Qt(this,s,i&&i.implicit),u=this.params.map(function(f,d){var m=Qt(f,s,i&&i.implicit);return s==="all"||m!==null&&m<=l?"\\left("+f.toTex(i)+"\right)":f.toTex(i)}),o=u[0],c=0;c<this.conditionals.length;c++)o+=Dt[this.conditionals[c]]+u[c+1];return o}}return Mr(n,"name",bd),n},{isClass:!0,isNode:!0}),WQ="SymbolNode",QQ=["math","?Unit","Node"],XQ=q(WQ,QQ,t=>{var{math:e,Unit:r,Node:n}=t;function a(s){return r?r.isValuelessUnit(s):!1}class i extends n{constructor(l){if(super(),typeof l!="string")throw new TypeError('String expected for parameter "name"');this.name=l}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(l,u){var o=this.name;if(u[o]===!0)return function(f,d,m){return En(d,o)};if(o in l)return function(f,d,m){return f.has(o)?f.get(o):En(l,o)};var c=a(o);return function(f,d,m){return f.has(o)?f.get(o):c?new r(null,o):i.onUndefinedSymbol(o)}}forEach(l){}map(l){return this.clone()}static onUndefinedSymbol(l){throw new Error("Undefined symbol "+l)}clone(){return new i(this.name)}_toString(l){return this.name}_toHTML(l){var u=ca(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(l){return new i(l.name)}_toTex(l){var u=!1;typeof e[this.name]>"u"&&a(this.name)&&(u=!0);var o=k4(this.name,u);return o[0]==="\\"?o:" "+o}}return i},{isClass:!0,isNode:!0}),wd="FunctionNode",KQ=["math","Node","SymbolNode"],JQ=q(wd,KQ,t=>{var e,{math:r,Node:n,SymbolNode:a}=t,i=u=>pt(u,{truncate:78});function s(u,o,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,m=0,p;(p=d.exec(u))!==null;)if(f+=u.substring(m,p.index),m=p.index,p[0]==="$$")f+="$",m++;else{m+=p[0].length;var h=o[p[1]];if(!h)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof h){case"string":f+=h;break;case"object":if(Ht(h))f+=h.toTex(c);else if(Array.isArray(h))f+=h.map(function(D,w){if(Ht(D))return D.toTex(c);throw new TypeError("Template: "+p[1]+"["+w+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(Ht(h[p[2]]&&h[p[2]]))f+=h[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return f+=u.slice(m),f}class l extends n{constructor(o,c){if(super(),typeof o=="string"&&(o=new a(o)),!Ht(o))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Ht))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=o,this.args=c||[]}get name(){return this.fn.name||""}get type(){return wd}get isFunctionNode(){return!0}_compile(o,c){var f=this.args.map(_=>_._compile(o,c));if(Qr(this.fn)){var d=this.fn.name;if(c[d]){var w=this.args;return function(E,C,T){var M=En(C,d);if(typeof M!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(i(M)));if(M.rawArgs)return M(w,o,Xu(E,C));var I=f.map(j=>j(E,C,T));return M.apply(M,I)}}else{var m=d in o?En(o,d):void 0,p=typeof m=="function"&&m.rawArgs===!0,h=_=>{var E;if(_.has(d))E=_.get(d);else if(d in o)E=En(o,d);else return l.onUndefinedFunction(d);if(typeof E=="function")return E;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(i(E)))};if(p){var D=this.args;return function(E,C,T){var M=h(E);if(M.rawArgs===!0)return M(D,o,Xu(E,C));var I=f.map(j=>j(E,C,T));return M(...I)}}else switch(f.length){case 0:return function(E,C,T){var M=h(E);return M()};case 1:return function(E,C,T){var M=h(E),I=f[0];return M(I(E,C,T))};case 2:return function(E,C,T){var M=h(E),I=f[0],j=f[1];return M(I(E,C,T),j(E,C,T))};default:return function(E,C,T){var M=h(E),I=f.map(j=>j(E,C,T));return M(...I)}}}}else if(ho(this.fn)&&iu(this.fn.index)&&this.fn.index.isObjectProperty()){var S=this.fn.object._compile(o,c),x=this.fn.index.getObjectProperty(),b=this.args;return function(E,C,T){var M=S(E,C,T),I=wk(M,x);if(I!=null&&I.rawArgs)return I(b,o,Xu(E,C));var j=f.map(O=>O(E,C,T));return I.apply(M,j)}}else{var N=this.fn.toString(),g=this.fn._compile(o,c),y=this.args;return function(E,C,T){var M=g(E,C,T);if(typeof M!="function")throw new TypeError("Expression '".concat(N,"' did not evaluate to a function; value is:")+`
  `.concat(i(M)));if(M.rawArgs)return M(y,o,Xu(E,C));var I=f.map(j=>j(E,C,T));return M.apply(M,I)}}}forEach(o){o(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)o(this.args[c],"args["+c+"]",this)}map(o){for(var c=this._ifNode(o(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(o(this.args[d],"args["+d+"]",this));return new l(c,f)}clone(){return new l(this.fn,this.args.slice(0))}toString(o){var c,f=this.fn.toString(o);return o&&typeof o.handler=="object"&&He(o.handler,f)&&(c=o.handler[f](this,o)),typeof c<"u"?c:super.toString(o)}_toString(o){var c=this.args.map(function(d){return d.toString(o)}),f=lf(this.fn)?"("+this.fn.toString(o)+")":this.fn.toString(o);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:wd,fn:this.fn,args:this.args}}_toHTML(o){var c=this.args.map(function(f){return f.toHTML(o)});return'<span class="math-function">'+ca(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(o){var c;return o&&typeof o.handler=="object"&&He(o.handler,this.name)&&(c=o.handler[this.name](this,o)),typeof c<"u"?c:super.toTex(o)}_toTex(o){var c=this.args.map(function(m){return m.toTex(o)}),f;sE[this.name]&&(f=sE[this.name]),r[this.name]&&(typeof r[this.name].toTex=="function"||typeof r[this.name].toTex=="object"||typeof r[this.name].toTex=="string")&&(f=r[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,o);break;case"string":d=s(f,this,o);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,o);break;case"string":d=s(f[c.length],this,o);break}}return typeof d<"u"?d:s(MQ,this,o)}getIdentifier(){return this.type+":"+this.name}}return e=l,Mr(l,"name",wd),Mr(l,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Mr(l,"fromJSON",function(u){return new e(u.fn,u.args)}),l},{isClass:!0,isNode:!0}),lE="parse",YQ=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],ZQ=q(lE,YQ,t=>{var{typed:e,numeric:r,config:n,AccessorNode:a,ArrayNode:i,AssignmentNode:s,BlockNode:l,ConditionalNode:u,ConstantNode:o,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:m,OperatorNode:p,ParenthesisNode:h,RangeNode:D,RelationalNode:w,SymbolNode:S}=t,x=e(lE,{string:function(ne){return ae(ne,{})},"Array | Matrix":function(ne){return b(ne,{})},"string, Object":function(ne,he){var De=he.nodes!==void 0?he.nodes:{};return ae(ne,De)},"Array | Matrix, Object":b});function b(R){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=ne.nodes!==void 0?ne.nodes:{};return ut(R,function(De){if(typeof De!="string")throw new TypeError("String expected");return ae(De,he)})}var N={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},g={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},y={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},_={true:!0,false:!1,null:null,undefined:void 0},E=["NaN","Infinity"],C={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function T(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:N.NULL,nestingLevel:0,conditionalLevel:null}}function M(R,ne){return R.expression.substr(R.index,ne)}function I(R){return M(R,1)}function j(R){R.index++}function O(R){return R.expression.charAt(R.index-1)}function P(R){return R.expression.charAt(R.index+1)}function H(R){for(R.tokenType=N.NULL,R.token="",R.comment="";;){if(I(R)==="#")for(;I(R)!==`
`&&I(R)!=="";)R.comment+=I(R),j(R);if(x.isWhitespace(I(R),R.nestingLevel))j(R);else break}if(I(R)===""){R.tokenType=N.DELIMITER;return}if(I(R)===`
`&&!R.nestingLevel){R.tokenType=N.DELIMITER,R.token=I(R),j(R);return}var ne=I(R),he=M(R,2),De=M(R,3);if(De.length===3&&g[De]){R.tokenType=N.DELIMITER,R.token=De,j(R),j(R),j(R);return}if(he.length===2&&g[he]){R.tokenType=N.DELIMITER,R.token=he,j(R),j(R);return}if(g[ne]){R.tokenType=N.DELIMITER,R.token=ne,j(R);return}if(x.isDigitDot(ne)){R.tokenType=N.NUMBER;var Ge=M(R,2);if(Ge==="0b"||Ge==="0o"||Ge==="0x"){for(R.token+=I(R),j(R),R.token+=I(R),j(R);x.isAlpha(I(R),O(R),P(R))||x.isDigit(I(R));)R.token+=I(R),j(R);if(I(R)===".")for(R.token+=".",j(R);x.isAlpha(I(R),O(R),P(R))||x.isDigit(I(R));)R.token+=I(R),j(R);else if(I(R)==="i")for(R.token+="i",j(R);x.isDigit(I(R));)R.token+=I(R),j(R);return}if(I(R)==="."){if(R.token+=I(R),j(R),!x.isDigit(I(R))){R.tokenType=N.DELIMITER;return}}else{for(;x.isDigit(I(R));)R.token+=I(R),j(R);x.isDecimalMark(I(R),P(R))&&(R.token+=I(R),j(R))}for(;x.isDigit(I(R));)R.token+=I(R),j(R);if(I(R)==="E"||I(R)==="e"){if(x.isDigit(P(R))||P(R)==="-"||P(R)==="+"){if(R.token+=I(R),j(R),(I(R)==="+"||I(R)==="-")&&(R.token+=I(R),j(R)),!x.isDigit(I(R)))throw Ze(R,'Digit expected, got "'+I(R)+'"');for(;x.isDigit(I(R));)R.token+=I(R),j(R);if(x.isDecimalMark(I(R),P(R)))throw Ze(R,'Digit expected, got "'+I(R)+'"')}else if(x.isDecimalMark(P(R),R.expression.charAt(R.index+2)))throw j(R),Ze(R,'Digit expected, got "'+I(R)+'"')}return}if(x.isAlpha(I(R),O(R),P(R))){for(;x.isAlpha(I(R),O(R),P(R))||x.isDigit(I(R));)R.token+=I(R),j(R);He(y,R.token)?R.tokenType=N.DELIMITER:R.tokenType=N.SYMBOL;return}for(R.tokenType=N.UNKNOWN;I(R)!=="";)R.token+=I(R),j(R);throw Ze(R,'Syntax error in part "'+R.token+'"')}function $(R){do H(R);while(R.token===`
`)}function z(R){R.nestingLevel++}function X(R){R.nestingLevel--}x.isAlpha=function(ne,he,De){return x.isValidLatinOrGreek(ne)||x.isValidMathSymbol(ne,De)||x.isValidMathSymbol(he,ne)},x.isValidLatinOrGreek=function(ne){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ne)},x.isValidMathSymbol=function(ne,he){return/^[\uD835]$/.test(ne)&&/^[\uDC00-\uDFFF]$/.test(he)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(he)},x.isWhitespace=function(ne,he){return ne===" "||ne==="	"||ne===" "||ne===`
`&&he>0},x.isDecimalMark=function(ne,he){return ne==="."&&he!=="/"&&he!=="*"&&he!=="^"},x.isDigitDot=function(ne){return ne>="0"&&ne<="9"||ne==="."},x.isDigit=function(ne){return ne>="0"&&ne<="9"};function ae(R,ne){var he=T();Nr(he,{expression:R,extraNodes:ne}),H(he);var De=k(he);if(he.token!=="")throw he.tokenType===N.DELIMITER?lr(he,"Unexpected operator "+he.token):Ze(he,'Unexpected part "'+he.token+'"');return De}function k(R){var ne,he=[],De;for(R.token!==""&&R.token!==`
`&&R.token!==";"&&(ne=Y(R),R.comment&&(ne.comment=R.comment));R.token===`
`||R.token===";";)he.length===0&&ne&&(De=R.token!==";",he.push({node:ne,visible:De})),H(R),R.token!==`
`&&R.token!==";"&&R.token!==""&&(ne=Y(R),R.comment&&(ne.comment=R.comment),De=R.token!==";",he.push({node:ne,visible:De}));return he.length>0?new l(he):(ne||(ne=new o(void 0),R.comment&&(ne.comment=R.comment)),ne)}function Y(R){var ne,he,De,Ge,dt=V(R);if(R.token==="="){if(Qr(dt))return ne=dt.name,$(R),De=Y(R),new s(new S(ne),De);if(ho(dt))return $(R),De=Y(R),new s(dt.object,dt.index,De);if(ws(dt)&&Qr(dt.fn)&&(Ge=!0,he=[],ne=dt.name,dt.args.forEach(function(Ir,ii){Qr(Ir)?he[ii]=Ir.name:Ge=!1}),Ge))return $(R),De=Y(R),new c(ne,he,De);throw Ze(R,"Invalid left hand side of assignment operator =")}return dt}function V(R){for(var ne=ye(R);R.token==="?";){var he=R.conditionalLevel;R.conditionalLevel=R.nestingLevel,$(R);var De=ne,Ge=Y(R);if(R.token!==":")throw Ze(R,"False part of conditional expression expected");R.conditionalLevel=null,$(R);var dt=Y(R);ne=new u(De,Ge,dt),R.conditionalLevel=he}return ne}function ye(R){for(var ne=le(R);R.token==="or";)$(R),ne=new p("or","or",[ne,le(R)]);return ne}function le(R){for(var ne=fe(R);R.token==="xor";)$(R),ne=new p("xor","xor",[ne,fe(R)]);return ne}function fe(R){for(var ne=W(R);R.token==="and";)$(R),ne=new p("and","and",[ne,W(R)]);return ne}function W(R){for(var ne=K(R);R.token==="|";)$(R),ne=new p("|","bitOr",[ne,K(R)]);return ne}function K(R){for(var ne=ee(R);R.token==="^|";)$(R),ne=new p("^|","bitXor",[ne,ee(R)]);return ne}function ee(R){for(var ne=ie(R);R.token==="&";)$(R),ne=new p("&","bitAnd",[ne,ie(R)]);return ne}function ie(R){for(var ne=[oe(R)],he=[],De={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};He(De,R.token);){var Ge={name:R.token,fn:De[R.token]};he.push(Ge),$(R),ne.push(oe(R))}return ne.length===1?ne[0]:ne.length===2?new p(he[0].name,he[0].fn,ne):new w(he.map(dt=>dt.fn),ne)}function oe(R){var ne,he,De,Ge;ne=pe(R);for(var dt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};He(dt,R.token);)he=R.token,De=dt[he],$(R),Ge=[ne,pe(R)],ne=new p(he,De,Ge);return ne}function pe(R){var ne,he,De,Ge;ne=me(R);for(var dt={to:"to",in:"to"};He(dt,R.token);)he=R.token,De=dt[he],$(R),he==="in"&&"])},;".includes(R.token)?ne=new p("*","multiply",[ne,new S("in")],!0):(Ge=[ne,me(R)],ne=new p(he,De,Ge));return ne}function me(R){var ne,he=[];if(R.token===":"?ne=new o(1):ne=Te(R),R.token===":"&&R.conditionalLevel!==R.nestingLevel){for(he.push(ne);R.token===":"&&he.length<3;)$(R),R.token===")"||R.token==="]"||R.token===","||R.token===""?he.push(new S("end")):he.push(Te(R));he.length===3?ne=new D(he[0],he[2],he[1]):ne=new D(he[0],he[1])}return ne}function Te(R){var ne,he,De,Ge;ne=ke(R);for(var dt={"+":"add","-":"subtract"};He(dt,R.token);){he=R.token,De=dt[he],$(R);var Ir=ke(R);Ir.isPercentage?Ge=[ne,new p("*","multiply",[ne,Ir])]:Ge=[ne,Ir],ne=new p(he,De,Ge)}return ne}function ke(R){var ne,he,De,Ge;ne=ze(R),he=ne;for(var dt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};He(dt,R.token);)De=R.token,Ge=dt[De],$(R),he=ze(R),ne=new p(De,Ge,[ne,he]);return ne}function ze(R){var ne,he;for(ne=Oe(R),he=ne;R.tokenType===N.SYMBOL||R.token==="in"&&Nt(ne)||R.token==="in"&&br(ne)&&ne.fn==="unaryMinus"&&Nt(ne.args[0])||R.tokenType===N.NUMBER&&!Nt(he)&&(!br(he)||he.op==="!")||R.token==="(";)he=Oe(R),ne=new p("*","multiply",[ne,he],!0);return ne}function Oe(R){for(var ne=$e(R),he=ne,De=[];R.token==="/"&&Tg(he);)if(De.push(Nr({},R)),$(R),R.tokenType===N.NUMBER)if(De.push(Nr({},R)),$(R),R.tokenType===N.SYMBOL||R.token==="("||R.token==="in")Nr(R,De.pop()),De.pop(),he=$e(R),ne=new p("/","divide",[ne,he]);else{De.pop(),Nr(R,De.pop());break}else{Nr(R,De.pop());break}return ne}function $e(R){var ne=G(R);if(R.token==="%"){var he=Nr({},R);$(R);try{G(R),Nr(R,he)}catch{ne=new p("/","divide",[ne,new o(100)],!1,!0)}}return ne}function G(R){var ne,he,De,Ge={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return He(Ge,R.token)?(De=Ge[R.token],ne=R.token,$(R),he=[G(R)],new p(ne,De,he)):te(R)}function te(R){var ne,he,De,Ge;return ne=ce(R),(R.token==="^"||R.token===".^")&&(he=R.token,De=he==="^"?"pow":"dotPow",$(R),Ge=[ne,G(R)],ne=new p(he,De,Ge)),ne}function ce(R){for(var ne=L(R);R.token==="??";)$(R),ne=new p("??","nullish",[ne,L(R)]);return ne}function L(R){var ne,he,De,Ge;ne=J(R);for(var dt={"!":"factorial","'":"ctranspose"};He(dt,R.token);)he=R.token,De=dt[he],H(R),Ge=[ne],ne=new p(he,De,Ge),ne=se(R,ne);return ne}function J(R){var ne=[];if(R.tokenType===N.SYMBOL&&He(R.extraNodes,R.token)){var he=R.extraNodes[R.token];if(H(R),R.token==="("){if(ne=[],z(R),H(R),R.token!==")")for(ne.push(Y(R));R.token===",";)H(R),ne.push(Y(R));if(R.token!==")")throw Ze(R,"Parenthesis ) expected");X(R),H(R)}return new he(ne)}return re(R)}function re(R){var ne,he;return R.tokenType===N.SYMBOL||R.tokenType===N.DELIMITER&&R.token in y?(he=R.token,H(R),He(_,he)?ne=new o(_[he]):E.includes(he)?ne=new o(r(he,"number")):ne=new S(he),ne=se(R,ne),ne):ue(R)}function se(R,ne,he){for(var De;R.token==="("||R.token==="["||R.token===".";)if(De=[],R.token==="(")if(Qr(ne)||ho(ne)){if(z(R),H(R),R.token!==")")for(De.push(Y(R));R.token===",";)H(R),De.push(Y(R));if(R.token!==")")throw Ze(R,"Parenthesis ) expected");X(R),H(R),ne=new f(ne,De)}else return ne;else if(R.token==="["){if(z(R),H(R),R.token!=="]")for(De.push(Y(R));R.token===",";)H(R),De.push(Y(R));if(R.token!=="]")throw Ze(R,"Parenthesis ] expected");X(R),H(R),ne=new a(ne,new d(De))}else{H(R);var Ge=R.tokenType===N.SYMBOL||R.tokenType===N.DELIMITER&&R.token in y;if(!Ge)throw Ze(R,"Property name expected after dot");De.push(new o(R.token)),H(R);var dt=!0;ne=new a(ne,new d(De,dt))}return ne}function ue(R){var ne,he;return R.token==='"'||R.token==="'"?(he=ve(R,R.token),ne=new o(he),ne=se(R,ne),ne):_e(R)}function ve(R,ne){for(var he="";I(R)!==""&&I(R)!==ne;)if(I(R)==="\\"){j(R);var De=I(R),Ge=C[De];if(Ge!==void 0)he+=Ge,R.index+=1;else if(De==="u"){var dt=R.expression.slice(R.index+1,R.index+5);if(/^[0-9A-Fa-f]{4}$/.test(dt))he+=String.fromCharCode(parseInt(dt,16)),R.index+=5;else throw Ze(R,"Invalid unicode character \\u".concat(dt))}else throw Ze(R,"Bad escape character \\".concat(De))}else he+=I(R),j(R);if(H(R),R.token!==ne)throw Ze(R,"End of string ".concat(ne," expected"));return H(R),he}function _e(R){var ne,he,De,Ge;if(R.token==="["){if(z(R),H(R),R.token!=="]"){var dt=Ee(R);if(R.token===";"){for(De=1,he=[dt];R.token===";";)H(R),R.token!=="]"&&(he[De]=Ee(R),De++);if(R.token!=="]")throw Ze(R,"End of matrix ] expected");X(R),H(R),Ge=he[0].items.length;for(var Ir=1;Ir<De;Ir++)if(he[Ir].items.length!==Ge)throw lr(R,"Column dimensions mismatch ("+he[Ir].items.length+" !== "+Ge+")");ne=new i(he)}else{if(R.token!=="]")throw Ze(R,"End of matrix ] expected");X(R),H(R),ne=dt}}else X(R),H(R),ne=new i([]);return se(R,ne)}return Me(R)}function Ee(R){for(var ne=[Y(R)],he=1;R.token===",";)H(R),R.token!=="]"&&R.token!==";"&&(ne[he]=Y(R),he++);return new i(ne)}function Me(R){if(R.token==="{"){z(R);var ne,he={};do if(H(R),R.token!=="}"){if(R.token==='"'||R.token==="'")ne=ve(R,R.token);else if(R.tokenType===N.SYMBOL||R.tokenType===N.DELIMITER&&R.token in y)ne=R.token,H(R);else throw Ze(R,"Symbol or string expected as object key");if(R.token!==":")throw Ze(R,"Colon : expected after object key");H(R),he[ne]=Y(R)}while(R.token===",");if(R.token!=="}")throw Ze(R,"Comma , or bracket } expected after object value");X(R),H(R);var De=new m(he);return De=se(R,De),De}return Ae(R)}function Ae(R){var ne;if(R.tokenType===N.NUMBER){ne=R.token,H(R);var he=Cs(ne,n),De=r(ne,he);return new o(De)}return ht(R)}function ht(R){var ne;if(R.token==="("){if(z(R),H(R),ne=Y(R),R.token!==")")throw Ze(R,"Parenthesis ) expected");return X(R),H(R),ne=new h(ne),ne=se(R,ne),ne}return gt(R)}function gt(R){throw R.token===""?Ze(R,"Unexpected end of expression"):Ze(R,"Value expected")}function Ut(R){return R.index-R.token.length+1}function Ze(R,ne){var he=Ut(R),De=new SyntaxError(ne+" (char "+he+")");return De.char=he,De}function lr(R,ne){var he=Ut(R),De=new SyntaxError(ne+" (char "+he+")");return De.char=he,De}return e.addConversion({from:"string",to:"Node",convert:x}),x}),uE="compile",eX=["typed","parse"],tX=q(uE,eX,t=>{var{typed:e,parse:r}=t;return e(uE,{string:function(a){return r(a).compile()},"Array | Matrix":function(a){return ut(a,function(i){return r(i).compile()})}})}),cE="evaluate",rX=["typed","parse"],nX=q(cE,rX,t=>{var{typed:e,parse:r}=t;return e(cE,{string:function(a){var i=Uc();return r(a).compile().evaluate(i)},"string, Map | Object":function(a,i){return r(a).compile().evaluate(i)},"Array | Matrix":function(a){var i=Uc();return ut(a,function(s){return r(s).compile().evaluate(i)})},"Array | Matrix, Map | Object":function(a,i){return ut(a,function(s){return r(s).compile().evaluate(i)})}})}),aX="Parser",iX=["evaluate","parse"],sX=q(aX,iX,t=>{var{evaluate:e,parse:r}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Uc(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(i){return e(i,this.scope)},n.prototype.get=function(i){if(this.scope.has(i))return this.scope.get(i)},n.prototype.getAll=function(){return Ek(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function a(i){if(i.length===0)return!1;for(var s=0;s<i.length;s++){var l=i.charAt(s-1),u=i.charAt(s),o=i.charAt(s+1),c=r.isAlpha(u,l,o)||s>0&&r.isDigit(u);if(!c)return!1}return!0}return n.prototype.set=function(i,s){if(!a(i))throw new Error("Invalid variable name: '".concat(i,"'. Variable names must follow the specified rules."));return this.scope.set(i,s),s},n.prototype.remove=function(i){this.scope.delete(i)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var i={mathjs:"Parser",variables:{},functions:{}};for(var[s,l]of this.scope)if(G3(l)){if(!oX(l))throw new Error("Cannot serialize external function ".concat(s));i.functions[s]="".concat(l.syntax," = ").concat(l.expr)}else i.variables[s]=l;return i},n.fromJSON=function(i){var s=new n;return Object.entries(i.variables).forEach(l=>{var[u,o]=l;return s.set(u,o)}),Object.entries(i.functions).forEach(l=>{var[u,o]=l;return s.evaluate(o)}),s},n},{isClass:!0});function oX(t){return typeof t=="function"&&typeof t.syntax=="string"&&typeof t.expr=="string"}var fE="parser",lX=["typed","Parser"],uX=q(fE,lX,t=>{var{typed:e,Parser:r}=t;return e(fE,{"":function(){return new r}})}),dE="lup",cX=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],fX=q(dE,cX,t=>{var{typed:e,matrix:r,abs:n,addScalar:a,divideScalar:i,multiplyScalar:s,subtractScalar:l,larger:u,equalScalar:o,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:m}=t;return e(dE,{DenseMatrix:function(w){return p(w)},SparseMatrix:function(w){return h(w)},Array:function(w){var S=r(w),x=p(S);return{L:x.L.valueOf(),U:x.U.valueOf(),p:x.p}}});function p(D){var w=D._size[0],S=D._size[1],x=Math.min(w,S),b=nt(D._data),N=[],g=[w,x],y=[],_=[x,S],E,C,T,M=[];for(E=0;E<w;E++)M[E]=E;for(C=0;C<S;C++){if(C>0)for(E=0;E<w;E++){var I=Math.min(E,C),j=0;for(T=0;T<I;T++)j=a(j,s(b[E][T],b[T][C]));b[E][C]=l(b[E][C],j)}var O=C,P=0,H=0;for(E=C;E<w;E++){var $=b[E][C],z=n($);u(z,P)&&(O=E,P=z,H=$)}if(C!==O&&(M[C]=[M[O],M[O]=M[C]][0],f._swapRows(C,O,b)),C<w)for(E=C+1;E<w;E++){var X=b[E][C];o(X,0)||(b[E][C]=i(b[E][C],H))}}for(C=0;C<S;C++)for(E=0;E<w;E++){if(C===0&&(E<S&&(y[E]=[]),N[E]=[]),E<C){E<S&&(y[E][C]=b[E][C]),C<w&&(N[E][C]=0);continue}if(E===C){E<S&&(y[E][C]=b[E][C]),C<w&&(N[E][C]=1);continue}E<S&&(y[E][C]=0),C<w&&(N[E][C]=b[E][C])}var ae=new f({data:N,size:g}),k=new f({data:y,size:_}),Y=[];for(E=0,x=M.length;E<x;E++)Y[M[E]]=E;return{L:ae,U:k,p:Y,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function h(D){var w=D._size[0],S=D._size[1],x=Math.min(w,S),b=D._values,N=D._index,g=D._ptr,y=[],_=[],E=[],C=[w,x],T=[],M=[],I=[],j=[x,S],O,P,H,$=[],z=[];for(O=0;O<w;O++)$[O]=O,z[O]=O;var X=function(Y,V){var ye=z[Y],le=z[V];$[ye]=V,$[le]=Y,z[Y]=le,z[V]=ye},ae=function(){var Y=new m;P<w&&(E.push(y.length),y.push(1),_.push(P)),I.push(T.length);var V=g[P],ye=g[P+1];for(H=V;H<ye;H++)O=N[H],Y.set($[O],b[H]);P>0&&Y.forEach(0,P-1,function(K,ee){d._forEachRow(K,y,_,E,function(ie,oe){ie>K&&Y.accumulate(ie,c(s(oe,ee)))})});var le=P,fe=Y.get(P),W=n(fe);Y.forEach(P+1,w-1,function(K,ee){var ie=n(ee);u(ie,W)&&(le=K,W=ie,fe=ee)}),P!==le&&(d._swapRows(P,le,C[1],y,_,E),d._swapRows(P,le,j[1],T,M,I),Y.swap(P,le),X(P,le)),Y.forEach(0,w-1,function(K,ee){K<=P?(T.push(ee),M.push(K)):(ee=i(ee,fe),o(ee,0)||(y.push(ee),_.push(K)))})};for(P=0;P<S;P++)ae();return I.push(T.length),E.push(y.length),{L:new d({values:y,index:_,ptr:E,size:C}),U:new d({values:T,index:M,ptr:I,size:j}),p:$,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),mE="qr",dX=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],mX=q(mE,dX,t=>{var{typed:e,matrix:r,zeros:n,identity:a,isZero:i,equal:s,sign:l,sqrt:u,conj:o,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:m,subtractScalar:p,complex:h}=t;return Nr(e(mE,{DenseMatrix:function(b){return w(b)},SparseMatrix:function(b){return S()},Array:function(b){var N=r(b),g=w(N);return{Q:g.Q.valueOf(),R:g.R.valueOf()}}}),{_denseQRimpl:D});function D(x){var b=x._size[0],N=x._size[1],g=a([b],"dense"),y=g._data,_=x.clone(),E=_._data,C,T,M,I=n([b],"");for(M=0;M<Math.min(N,b);++M){var j=E[M][M],O=c(s(j,0)?1:l(j)),P=o(O),H=0;for(C=M;C<b;C++)H=f(H,m(E[C][M],o(E[C][M])));var $=m(O,u(H));if(!i($)){var z=p(j,$);for(I[M]=1,C=M+1;C<b;C++)I[C]=d(E[C][M],z);var X=c(o(d(z,$))),ae=void 0;for(T=M;T<N;T++){for(ae=0,C=M;C<b;C++)ae=f(ae,m(o(I[C]),E[C][T]));for(ae=m(ae,X),C=M;C<b;C++)E[C][T]=m(p(E[C][T],m(I[C],ae)),P)}for(C=0;C<b;C++){for(ae=0,T=M;T<b;T++)ae=f(ae,m(y[C][T],I[T]));for(ae=m(ae,X),T=M;T<b;++T)y[C][T]=d(p(y[C][T],m(ae,o(I[T]))),P)}}}return{Q:g,R:_,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function w(x){var b=D(x),N=b.R._data;if(x._data.length>0)for(var g=N[0][0].type==="Complex"?h(0):0,y=0;y<N.length;++y)for(var _=0;_<y&&_<(N[0]||[]).length;++_)N[y][_]=g;return b}function S(x){throw new Error("qr not implemented for sparse matrices yet")}});function hX(t,e,r,n){t._values;for(var a=t._index,i=t._ptr,s=t._size,l=t._datatype,u=s[0],o=s[1],c=null,f=[],d=[],m=0,p=0;p<o;p++){d[p]=m;for(var h=r?r[p]:p,D=i[h],w=i[h+1],S=D;S<w;S++){var x=a[S];f[m]=x,m++}}return d[o]=m,t.createSparseMatrix({values:c,index:f,ptr:d,size:[u,o],datatype:l})}function $4(t,e,r,n,a,i,s){var l=0;for(r[s]=t;l>=0;){var u=r[s+l],o=r[n+u];o===-1?(l--,i[e++]=u):(r[n+u]=r[a+o],++l,r[s+l]=o)}return e}function pX(t,e){if(!t)return null;var r=0,n,a=[],i=[],s=0,l=e,u=2*e;for(n=0;n<e;n++)i[s+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(i[l+n]=i[s+t[n]],i[s+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=$4(n,r,i,s,l,a,u));return a}function vX(t,e){if(!t)return null;var r=t._index,n=t._ptr,a=t._size,i=a[0],s=a[1],l=[],u=[],o=0,c=s,f,d;for(f=0;f<i;f++)u[c+f]=-1;for(var m=0;m<s;m++){l[m]=-1,u[o+m]=-1;for(var p=n[m],h=n[m+1],D=p;D<h;D++){var w=r[D];for(f=u[c+w];f!==-1&&f<m;f=d)d=u[o+f],u[o+f]=m,d===-1&&(l[f]=m);u[c+w]=m}}return l}function gX(t,e,r){for(var n=t._values,a=t._index,i=t._ptr,s=t._size,l=s[1],u=0,o=0;o<l;o++){var c=i[o];for(i[o]=u;c<i[o+1];c++)e(a[c],o,n?n[c]:1,r)&&(a[u]=a[c],n&&(n[u]=n[c]),u++)}return i[l]=u,a.splice(u,a.length-u),n&&n.splice(u,n.length-u),u}function Ui(t){return-t-2}var yX="csAmd",xX=["add","multiply","transpose"],bX=q(yX,xX,t=>{var{add:e,multiply:r,transpose:n}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,m=d[0],p=d[1],h=0,D=Math.max(16,10*Math.sqrt(p));D=Math.min(p-2,D);var w=a(c,f,m,p,D);gX(w,u,null);for(var S=w._index,x=w._ptr,b=x[p],N=[],g=[],y=0,_=p+1,E=2*(p+1),C=3*(p+1),T=4*(p+1),M=5*(p+1),I=6*(p+1),j=7*(p+1),O=N,P=i(p,x,g,y,C,O,E,j,_,I,T,M),H=s(p,x,g,M,T,I,D,_,C,O,E),$=0,z,X,ae,k,Y,V,ye,le,fe,W,K,ee,ie,oe,pe,me;H<p;){for(ae=-1;$<p&&(ae=g[C+$])===-1;$++);g[E+ae]!==-1&&(O[g[E+ae]]=-1),g[C+$]=g[E+ae];var Te=g[T+ae],ke=g[_+ae];H+=ke;var ze=0;g[_+ae]=-ke;var Oe=x[ae],$e=Te===0?Oe:b,G=$e;for(k=1;k<=Te+1;k++){for(k>Te?(V=ae,ye=Oe,le=g[y+ae]-Te):(V=S[Oe++],ye=x[V],le=g[y+V]),Y=1;Y<=le;Y++)z=S[ye++],!((fe=g[_+z])<=0)&&(ze+=fe,g[_+z]=-fe,S[G++]=z,g[E+z]!==-1&&(O[g[E+z]]=O[z]),O[z]!==-1?g[E+O[z]]=g[E+z]:g[C+g[M+z]]=g[E+z]);V!==ae&&(x[V]=Ui(ae),g[I+V]=0)}for(Te!==0&&(b=G),g[M+ae]=ze,x[ae]=$e,g[y+ae]=G-$e,g[T+ae]=-2,P=l(P,h,g,I,p),W=$e;W<G;W++)if(z=S[W],!((K=g[T+z])<=0)){fe=-g[_+z];var te=P-fe;for(Oe=x[z],ee=x[z]+K-1;Oe<=ee;Oe++)V=S[Oe],g[I+V]>=P?g[I+V]-=fe:g[I+V]!==0&&(g[I+V]=g[M+V]+te)}for(W=$e;W<G;W++){for(z=S[W],ee=x[z],ie=ee+g[T+z]-1,oe=ee,pe=0,me=0,Oe=ee;Oe<=ie;Oe++)if(V=S[Oe],g[I+V]!==0){var ce=g[I+V]-P;ce>0?(me+=ce,S[oe++]=V,pe+=V):(x[V]=Ui(ae),g[I+V]=0)}g[T+z]=oe-ee+1;var L=oe,J=ee+g[y+z];for(Oe=ie+1;Oe<J;Oe++){X=S[Oe];var re=g[_+X];re<=0||(me+=re,S[oe++]=X,pe+=X)}me===0?(x[z]=Ui(ae),fe=-g[_+z],ze-=fe,ke+=fe,H+=fe,g[_+z]=0,g[T+z]=-1):(g[M+z]=Math.min(g[M+z],me),S[oe]=S[L],S[L]=S[ee],S[ee]=ae,g[y+z]=oe-ee+1,pe=(pe<0?-pe:pe)%p,g[E+z]=g[j+pe],g[j+pe]=z,O[z]=pe)}for(g[M+ae]=ze,h=Math.max(h,ze),P=l(P+h,h,g,I,p),W=$e;W<G;W++)if(z=S[W],!(g[_+z]>=0))for(pe=O[z],z=g[j+pe],g[j+pe]=-1;z!==-1&&g[E+z]!==-1;z=g[E+z],P++){for(le=g[y+z],K=g[T+z],Oe=x[z]+1;Oe<=x[z]+le-1;Oe++)g[I+S[Oe]]=P;var se=z;for(X=g[E+z];X!==-1;){var ue=g[y+X]===le&&g[T+X]===K;for(Oe=x[X]+1;ue&&Oe<=x[X]+le-1;Oe++)g[I+S[Oe]]!==P&&(ue=0);ue?(x[X]=Ui(z),g[_+z]+=g[_+X],g[_+X]=0,g[T+X]=-1,X=g[E+X],g[E+se]=X):(se=X,X=g[E+X])}}for(Oe=$e,W=$e;W<G;W++)z=S[W],!((fe=-g[_+z])<=0)&&(g[_+z]=fe,me=g[M+z]+ze-fe,me=Math.min(me,p-H-fe),g[C+me]!==-1&&(O[g[C+me]]=z),g[E+z]=g[C+me],O[z]=-1,g[C+me]=z,$=Math.min($,me),g[M+z]=me,S[Oe++]=z);g[_+ae]=ke,(g[y+ae]=Oe-$e)===0&&(x[ae]=-1,g[I+ae]=0),Te!==0&&(b=Oe)}for(z=0;z<p;z++)x[z]=Ui(x[z]);for(X=0;X<=p;X++)g[C+X]=-1;for(X=p;X>=0;X--)g[_+X]>0||(g[E+X]=g[C+x[X]],g[C+x[X]]=X);for(V=p;V>=0;V--)g[_+V]<=0||x[V]!==-1&&(g[E+V]=g[C+x[V]],g[C+x[V]]=V);for(ae=0,z=0;z<=p;z++)x[z]===-1&&(ae=$4(z,ae,g,C,E,N,I));return N.splice(N.length-1,1),N};function a(o,c,f,d,m){var p=n(c);if(o===1&&d===f)return e(c,p);if(o===2){for(var h=p._index,D=p._ptr,w=0,S=0;S<f;S++){var x=D[S];if(D[S]=w,!(D[S+1]-x>m))for(var b=D[S+1];x<b;x++)h[w++]=h[x]}return D[f]=w,c=n(p),r(p,c)}return r(p,c)}function i(o,c,f,d,m,p,h,D,w,S,x,b){for(var N=0;N<o;N++)f[d+N]=c[N+1]-c[N];f[d+o]=0;for(var g=0;g<=o;g++)f[m+g]=-1,p[g]=-1,f[h+g]=-1,f[D+g]=-1,f[w+g]=1,f[S+g]=1,f[x+g]=0,f[b+g]=f[d+g];var y=l(0,0,f,S,o);return f[x+o]=-2,c[o]=-1,f[S+o]=0,y}function s(o,c,f,d,m,p,h,D,w,S,x){for(var b=0,N=0;N<o;N++){var g=f[d+N];if(g===0)f[m+N]=-2,b++,c[N]=-1,f[p+N]=0;else if(g>h)f[D+N]=0,f[m+N]=-1,b++,c[N]=Ui(o),f[D+o]++;else{var y=f[w+g];y!==-1&&(S[y]=N),f[x+N]=f[w+g],f[w+g]=N}}return b}function l(o,c,f,d,m){if(o<2||o+c<0){for(var p=0;p<m;p++)f[d+p]!==0&&(f[d+p]=1);o=2}return o}function u(o,c){return o!==c}});function wX(t,e,r,n,a,i,s){var l,u,o=0,c;if(t<=e||r[n+e]<=r[a+t])return-1;r[a+t]=r[n+e];var f=r[i+t];if(r[i+t]=e,f===-1)o=1,c=t;else{for(o=2,c=f;c!==r[s+c];c=r[s+c]);for(l=f;l!==c;l=u)u=r[s+l],r[s+l]=c}return{jleaf:o,q:c}}var NX="csCounts",_X=["transpose"],SX=q(NX,_X,t=>{var{transpose:e}=t;return function(r,n,a,i){if(!r||!n||!a)return null;var s=r._size,l=s[0],u=s[1],o,c,f,d,m,p,h,D=4*u+(i?u+l+1:0),w=[],S=0,x=u,b=2*u,N=3*u,g=4*u,y=5*u+1;for(f=0;f<D;f++)w[f]=-1;var _=[],E=e(r),C=E._index,T=E._ptr;for(f=0;f<u;f++)for(c=a[f],_[c]=w[N+c]===-1?1:0;c!==-1&&w[N+c]===-1;c=n[c])w[N+c]=f;if(i){for(f=0;f<u;f++)w[a[f]]=f;for(o=0;o<l;o++){for(f=u,p=T[o],h=T[o+1],m=p;m<h;m++)f=Math.min(f,w[C[m]]);w[y+o]=w[g+f],w[g+f]=o}}for(o=0;o<u;o++)w[S+o]=o;for(f=0;f<u;f++){for(c=a[f],n[c]!==-1&&_[n[c]]--,d=i?w[g+f]:c;d!==-1;d=i?w[y+d]:-1)for(m=T[d];m<T[d+1];m++){o=C[m];var M=wX(o,c,w,N,x,b,S);M.jleaf>=1&&_[c]++,M.jleaf===2&&_[M.q]--}n[c]!==-1&&(w[S+c]=n[c])}for(c=0;c<u;c++)n[c]!==-1&&(_[n[c]]+=_[c]);return _}}),EX="csSqr",AX=["add","multiply","transpose"],DX=q(EX,AX,t=>{var{add:e,multiply:r,transpose:n}=t,a=bX({add:e,multiply:r,transpose:n}),i=SX({transpose:n});return function(u,o,c){var f=o._ptr,d=o._size,m=d[1],p,h={};if(h.q=a(u,o),u&&!h.q)return null;if(c){var D=u?hX(o,null,h.q):o;h.parent=vX(D);var w=pX(h.parent,m);if(h.cp=i(D,h.parent,w,1),D&&h.parent&&h.cp&&s(D,h))for(h.unz=0,p=0;p<m;p++)h.unz+=h.cp[p]}else h.unz=4*f[m]+m,h.lnz=h.unz;return h};function s(l,u){var o=l._ptr,c=l._index,f=l._size,d=f[0],m=f[1];u.pinv=[],u.leftmost=[];var p=u.parent,h=u.pinv,D=u.leftmost,w=[],S=0,x=d,b=d+m,N=d+2*m,g,y,_,E,C;for(y=0;y<m;y++)w[x+y]=-1,w[b+y]=-1,w[N+y]=0;for(g=0;g<d;g++)D[g]=-1;for(y=m-1;y>=0;y--)for(E=o[y],C=o[y+1],_=E;_<C;_++)D[c[_]]=y;for(g=d-1;g>=0;g--)h[g]=-1,y=D[g],y!==-1&&(w[N+y]++===0&&(w[b+y]=g),w[S+g]=w[x+y],w[x+y]=g);for(u.lnz=0,u.m2=d,y=0;y<m;y++)if(g=w[x+y],u.lnz++,g<0&&(g=u.m2++),h[g]=y,!(--N[y]<=0)){u.lnz+=w[N+y];var T=p[y];T!==-1&&(w[N+T]===0&&(w[b+T]=w[b+y]),w[S+w[b+y]]=w[x+T],w[x+T]=w[S+g],w[N+T]+=w[N+y])}for(g=0;g<d;g++)h[g]<0&&(h[g]=y++);return!0}});function Kg(t,e){return t[e]<0}function L4(t,e){t[e]=Ui(t[e])}function hE(t){return t<0?Ui(t):t}function CX(t,e,r,n,a){var i=e._index,s=e._ptr,l=e._size,u=l[1],o,c,f,d=0;for(n[0]=t;d>=0;){t=n[d];var m=a?a[t]:t;Kg(s,t)||(L4(s,t),n[u+d]=m<0?0:hE(s[m]));var p=1;for(c=n[u+d],f=m<0?0:hE(s[m+1]);c<f;c++)if(o=i[c],!Kg(s,o)){n[u+d]=c,n[++d]=o,p=0;break}p&&(d--,n[--r]=t)}return r}function TX(t,e,r,n,a){var i=t._ptr,s=t._size,l=e._index,u=e._ptr,o=s[1],c,f,d,m=o;for(f=u[r],d=u[r+1],c=f;c<d;c++){var p=l[c];Kg(i,p)||(m=CX(p,t,m,n,a))}for(c=m;c<o;c++)L4(i,n[c]);return m}var MX="csSpsolve",IX=["divideScalar","multiply","subtract"],FX=q(MX,IX,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(i,s,l,u,o,c,f){var d=i._values,m=i._index,p=i._ptr,h=i._size,D=h[1],w=s._values,S=s._index,x=s._ptr,b,N,g,y,_=TX(i,s,l,u,c);for(b=_;b<D;b++)o[u[b]]=0;for(N=x[l],g=x[l+1],b=N;b<g;b++)o[S[b]]=w[b];for(var E=_;E<D;E++){var C=u[E],T=c?c[C]:C;if(!(T<0))for(N=p[T],g=p[T+1],o[C]=e(o[C],d[f?N:g-1]),b=f?N+1:N,y=f?g:g-1;b<y;b++){var M=m[b];o[M]=n(o[M],r(d[b],o[C]))}}return _}}),PX="csLu",RX=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],OX=q(PX,RX,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:a,larger:i,largerEq:s,SparseMatrix:l}=t,u=FX({divideScalar:r,multiply:n,subtract:a});return function(c,f,d){if(!c)return null;var m=c._size,p=m[1],h,D=100,w=100;f&&(h=f.q,D=f.lnz||D,w=f.unz||w);var S=[],x=[],b=[],N=new l({values:S,index:x,ptr:b,size:[p,p]}),g=[],y=[],_=[],E=new l({values:g,index:y,ptr:_,size:[p,p]}),C=[],T,M,I=[],j=[];for(T=0;T<p;T++)I[T]=0,C[T]=-1,b[T+1]=0;D=0,w=0;for(var O=0;O<p;O++){b[O]=D,_[O]=w;var P=h?h[O]:O,H=u(N,c,P,j,I,C,1),$=-1,z=-1;for(M=H;M<p;M++)if(T=j[M],C[T]<0){var X=e(I[T]);i(X,z)&&(z=X,$=T)}else y[w]=C[T],g[w++]=I[T];if($===-1||z<=0)return null;C[P]<0&&s(e(I[P]),n(z,d))&&($=P);var ae=I[$];for(y[w]=O,g[w++]=ae,C[$]=O,x[D]=$,S[D++]=1,M=H;M<p;M++)T=j[M],C[T]<0&&(x[D]=T,S[D++]=r(I[T],ae)),I[T]=0}for(b[p]=D,_[p]=w,M=0;M<D;M++)x[M]=C[x[M]];return S.splice(D,S.length-D),x.splice(D,x.length-D),g.splice(w,g.length-w),y.splice(w,y.length-w),{L:N,U:E,pinv:C}}}),pE="slu",BX=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],jX=q(pE,BX,t=>{var{typed:e,abs:r,add:n,multiply:a,transpose:i,divideScalar:s,subtract:l,larger:u,largerEq:o,SparseMatrix:c}=t,f=DX({add:n,multiply:a,transpose:i}),d=OX({abs:r,divideScalar:s,multiply:a,subtract:l,larger:u,largerEq:o,SparseMatrix:c});return e(pE,{"SparseMatrix, number, number":function(p,h,D){if(!We(h)||h<0||h>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(D<0||D>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var w=f(h,p,!1),S=d(p,w,D);return{L:S.L,U:S.U,p:S.pinv,q:w.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function vE(t,e){var r,n=e.length,a=[];if(t)for(r=0;r<n;r++)a[t[r]]=e[r];else for(r=0;r<n;r++)a[r]=e[r];return a}var gE="lusolve",kX=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],$X=q(gE,kX,t=>{var{typed:e,matrix:r,lup:n,slu:a,usolve:i,lsolve:s,DenseMatrix:l}=t,u=cf({DenseMatrix:l});return e(gE,{"Array, Array | Matrix":function(d,m){d=r(d);var p=n(d),h=c(p.L,p.U,p.p,null,m);return h.valueOf()},"DenseMatrix, Array | Matrix":function(d,m){var p=n(d);return c(p.L,p.U,p.p,null,m)},"SparseMatrix, Array | Matrix":function(d,m){var p=n(d);return c(p.L,p.U,p.p,null,m)},"SparseMatrix, Array | Matrix, number, number":function(d,m,p,h){var D=a(d,p,h);return c(D.L,D.U,D.p,D.q,m)},"Object, Array | Matrix":function(d,m){return c(d.L,d.U,d.p,d.q,m)}});function o(f){if(Ye(f))return f;if(Wt(f))return r(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,m,p,h){f=o(f),d=o(d),m&&(h=u(f,h,!0),h._data=vE(m,h._data));var D=s(f,h),w=i(d,D);return p&&(w._data=vE(p,w._data)),w}}),yE="polynomialRoot",LX=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],zX=q(yE,LX,t=>{var{typed:e,isZero:r,equalScalar:n,add:a,subtract:i,multiply:s,divide:l,sqrt:u,unaryMinus:o,cbrt:c,typeOf:f,im:d,re:m}=t;return e(yE,{"number|Complex, ...number|Complex":(p,h)=>{for(var D=[p,...h];D.length>0&&r(D[D.length-1]);)D.pop();if(D.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(h,"] must have a non-zero non-constant coefficient"));switch(D.length){case 2:return[o(l(D[0],D[1]))];case 3:{var[w,S,x]=D,b=s(2,x),N=s(S,S),g=s(4,x,w);if(n(N,g))return[l(o(S),b)];var y=u(i(N,g));return[l(i(y,S),b),l(i(o(y),S),b)]}case 4:{var[_,E,C,T]=D,M=o(s(3,T)),I=s(C,C),j=s(3,T,E),O=a(s(2,C,C,C),s(27,T,T,_)),P=s(9,T,C,E);if(n(I,j)&&n(O,P))return[l(C,M)];var H=i(I,j),$=i(O,P),z=a(s(18,T,C,E,_),s(C,C,E,E)),X=a(s(4,C,C,C,_),s(4,T,E,E,E),s(27,T,T,_,_));if(n(z,X))return[l(i(s(4,T,C,E),a(s(9,T,T,_),s(C,C,C))),s(T,H)),l(i(s(9,T,_),s(C,E)),s(2,H))];var ae;n(I,j)?ae=$:ae=l(a($,u(i(s($,$),s(4,H,H,H)))),2);var k=!0,Y=c(ae,k).toArray().map(V=>l(a(C,V,l(H,V)),M));return Y.map(V=>f(V)==="Complex"&&n(m(V),m(V)+d(V))?m(V):V)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(D))}}})}),VX="Help",UX=["evaluate"],qX=q(VX,UX,t=>{var{evaluate:e}=t;function r(n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var n=this.doc||{},a=`
`;if(n.name&&(a+="Name: "+n.name+`

`),n.category&&(a+="Category: "+n.category+`

`),n.description&&(a+=`Description:
    `+n.description+`

`),n.syntax&&(a+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){a+=`Examples:
`;for(var i=!1,s=e("config()"),l={config:f=>(i=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<n.examples.length;u++){var o=n.examples[u];a+="    "+o+`
`;var c=void 0;try{c=e(o,l)}catch(f){c=f}c!==void 0&&!H3(c)&&(a+="        "+pt(c,{precision:14})+`
`)}a+=`
`,i&&e("config(originalConfig)",{originalConfig:s})}return n.mayThrow&&n.mayThrow.length&&(a+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(a+="See also: "+n.seealso.join(", ")+`
`),a},r.prototype.toJSON=function(){var n=nt(this.doc);return n.mathjs="Help",n},r.fromJSON=function(n){var a={};return Object.keys(n).filter(i=>i!=="mathjs").forEach(i=>{a[i]=n[i]}),new r(a)},r.prototype.valueOf=r.prototype.toString,r},{isClass:!0}),HX="Chain",GX=["?on","math","typed"],WX=q(HX,GX,t=>{var{on:e,math:r,typed:n}=t;function a(o){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");Q3(o)?this.value=o.value:this.value=o}a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return pt(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(o){return new a(o.value)};function i(o,c){typeof c=="function"&&(a.prototype[o]=l(c))}function s(o,c){kk(a.prototype,o,function(){var d=c();if(typeof d=="function")return l(d)})}function l(o){return function(){if(arguments.length===0)return new a(o(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(n.isTypedFunction(o)){var d=n.resolve(o,c);if(d.params.length===1)throw new Error("chain function "+o.name+" cannot match rest parameter between chain value and additional arguments.");return new a(d.implementation.apply(o,c))}return new a(o.apply(o,c))}}a.createProxy=function(o,c){if(typeof o=="string")i(o,c);else{var f=function(p){He(o,p)&&u[p]===void 0&&s(p,()=>o[p])};for(var d in o)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return a.createProxy(r),e&&e("import",function(o,c,f){f||s(o,c)}),a},{isClass:!0}),xE={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},QX={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},XX={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},KX={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},JX={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},YX={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},ZX={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},eK={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},tK={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},rK={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},nK={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},bE={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},aK={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},iK={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},sK={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},oK={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},lK={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},uK={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},cK={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},fK={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},dK={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},mK={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},hK={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},pK={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},vK={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},gK={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},yK={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},xK={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},bK={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},wK={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},NK={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},_K={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},SK={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},EK={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},AK={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},DK={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},CK={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},TK={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},MK={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},IK={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},FK={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},PK={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},RK={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},OK={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},BK={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},jK={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},kK={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},$K={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},LK={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},zK={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},VK={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},UK={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},qK={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},HK={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},GK={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},WK={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},QK={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},XK={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},KK={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},JK={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},YK={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},ZK={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},eJ={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},tJ={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},rJ={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},nJ={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},aJ={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},iJ={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},sJ={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},oJ={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},lJ={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},uJ={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},cJ={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},fJ={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},dJ={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},mJ={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},hJ={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pJ={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},vJ={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},gJ={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},yJ={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},xJ={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},bJ={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},wJ={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},NJ={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},_J={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},SJ={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},EJ={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},AJ={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},DJ={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},CJ={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},TJ={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},MJ={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},IJ={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},FJ={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},PJ={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},RJ={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},OJ={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},BJ={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},jJ={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},kJ={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},$J={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},LJ={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},zJ={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},VJ={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},UJ={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},qJ={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},HJ={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},GJ={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},WJ={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},QJ={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},XJ={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},KJ={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},JJ={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},YJ={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},ZJ={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},eY={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},tY={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},rY={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},nY={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},aY={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},iY={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},sY={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},oY={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},lY={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},uY={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},cY={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},fY={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},dY={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},mY={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},hY={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},pY={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},vY={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},gY={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},yY={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},xY={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},bY={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},wY={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},NY={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},_Y={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},SY={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},EY={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},AY={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},DY={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},CY={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},TY={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},MY={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},IY={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},FY={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},PY={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},RY={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},OY={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},BY={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},jY={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},kY={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},$Y={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},LY={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},zY={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},VY={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},UY={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},qY={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},HY={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},GY={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},WY={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},QY={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},XY={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},KY={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},JY={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},YY={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},ZY={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},eZ={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},tZ={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},rZ={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},nZ={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},aZ={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},iZ={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},sZ={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},oZ={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},lZ={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},uZ={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},cZ={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},fZ={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},dZ={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},mZ={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},hZ={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},pZ={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},vZ={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},gZ={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},yZ={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},xZ={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},bZ={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},wZ={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},NZ={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},_Z={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},SZ={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},EZ={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},AZ={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},DZ={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},CZ={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},TZ={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},MZ={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},IZ={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},FZ={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},PZ={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},RZ={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},OZ={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},BZ={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},jZ={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},kZ={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},$Z={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},LZ={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},zZ={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},VZ={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},UZ={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},qZ={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},HZ={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},GZ={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},WZ={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},QZ={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},XZ={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},KZ={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},JZ={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},YZ={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},ZZ={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},eee={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},tee={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},ree={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},nee={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},aee={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},iee={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},see={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},oee={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},lee={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},uee={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},cee={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},fee={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},dee={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},mee={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},hee={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},pee={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},vee={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},gee={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},yee={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},xee={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},bee={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},wee={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},Nee={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},_ee={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},See={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},Eee={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},Aee={bignumber:uK,bigint:cK,boolean:fK,complex:dK,createUnit:mK,fraction:hK,index:pK,matrix:vK,number:gK,sparse:yK,splitUnit:xK,string:bK,unit:wK,e:xE,E:xE,false:QX,i:XX,Infinity:KX,LN2:YX,LN10:JX,LOG2E:eK,LOG10E:ZX,NaN:tK,null:rK,pi:bE,PI:bE,phi:nK,SQRT1_2:aK,SQRT2:iK,tau:sK,true:oK,version:lK,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:EK,lsolve:DK,lsolveAll:CK,lup:TK,lusolve:MK,leafCount:AK,polynomialRoot:IK,resolve:RK,simplify:OK,simplifyConstant:BK,simplifyCore:jK,symbolicEqual:$K,rationalize:PK,slu:kK,usolve:LK,usolveAll:zK,qr:FK,abs:VK,add:UK,cbrt:qK,ceil:HK,cube:GK,divide:WK,dotDivide:QK,dotMultiply:XK,dotPow:KK,exp:JK,expm:YK,expm1:ZK,fix:eJ,floor:tJ,gcd:rJ,hypot:nJ,lcm:iJ,log:sJ,log2:uJ,log1p:lJ,log10:oJ,mod:cJ,multiply:fJ,norm:dJ,nthRoot:mJ,nthRoots:hJ,pow:pJ,round:vJ,sign:gJ,sqrt:yJ,sqrtm:xJ,square:_J,subtract:SJ,unaryMinus:EJ,unaryPlus:AJ,xgcd:DJ,invmod:aJ,bitAnd:CJ,bitNot:TJ,bitOr:MJ,bitXor:IJ,leftShift:FJ,rightArithShift:PJ,rightLogShift:RJ,bellNumbers:OJ,catalan:BJ,composition:jJ,stirlingS2:kJ,config:NK,import:_K,typed:SK,arg:$J,conj:LJ,re:VJ,im:zJ,evaluate:UJ,help:WJ,parse:HJ,parser:qJ,compile:GJ,distance:QJ,intersect:XJ,and:KJ,not:JJ,nullish:YJ,or:ZJ,xor:eY,mapSlices:tY,concat:nY,count:aY,cross:iY,column:rY,ctranspose:sY,det:oY,diag:lY,diff:uY,dot:cY,getMatrixDataType:pY,identity:vY,filter:dY,flatten:mY,forEach:hY,inv:gY,pinv:yY,eigs:fY,kron:xY,matrixFromFunction:NY,matrixFromRows:_Y,matrixFromColumns:wY,map:bY,ones:SY,partitionSelect:EY,range:AY,resize:CY,reshape:DY,rotate:TY,rotationMatrix:MY,row:IY,size:FY,sort:PY,squeeze:RY,subset:OY,trace:BY,transpose:jY,zeros:kY,fft:$Y,ifft:LY,sylvester:bJ,schur:wJ,lyap:NJ,solveODE:Eee,combinations:zY,combinationsWithRep:VY,factorial:UY,gamma:qY,kldivergence:GY,lgamma:HY,multinomial:WY,permutations:QY,pickRandom:XY,random:KY,randomInt:JY,compare:YY,compareNatural:ZY,compareText:eZ,deepEqual:tZ,equal:rZ,equalText:nZ,larger:aZ,largerEq:iZ,smaller:sZ,smallerEq:oZ,unequal:lZ,setCartesian:uZ,setDifference:cZ,setDistinct:fZ,setIntersect:dZ,setIsSubset:mZ,setMultiplicity:hZ,setPowerset:pZ,setSize:vZ,setSymDifference:gZ,setUnion:yZ,zpk2tf:xZ,freqz:bZ,erf:wZ,zeta:NZ,cumsum:FZ,mad:_Z,max:SZ,mean:EZ,median:AZ,min:DZ,mode:CZ,prod:TZ,quantileSeq:MZ,std:IZ,sum:PZ,variance:RZ,corr:OZ,acos:BZ,acosh:jZ,acot:kZ,acoth:$Z,acsc:LZ,acsch:zZ,asec:VZ,asech:UZ,asin:qZ,asinh:HZ,atan:GZ,atanh:QZ,atan2:WZ,cos:XZ,cosh:KZ,cot:JZ,coth:YZ,csc:ZZ,csch:eee,sec:tee,sech:ree,sin:nee,sinh:aee,tan:iee,tanh:see,to:oee,toBest:lee,clone:cee,format:fee,bin:uee,oct:Nee,hex:mee,isNaN:pee,isInteger:hee,isNegative:vee,isNumeric:gee,hasNumericValue:dee,isPositive:yee,isPrime:xee,isZero:bee,print:_ee,typeOf:See,numeric:wee},wE="help",Dee=["typed","mathWithTransform","Help"],Cee=q(wE,Dee,t=>{var{typed:e,mathWithTransform:r,Help:n}=t;return e(wE,{any:function(i){var s,l=i;if(typeof i!="string"){for(s in r)if(He(r,s)&&i===r[s]){l=s;break}}var u=En(Aee,l);if(!u){var o=typeof l=="function"?l.name:l;throw new Error('No documentation found on "'+o+'"')}return new n(u)}})}),NE="chain",Tee=["typed","Chain"],Mee=q(NE,Tee,t=>{var{typed:e,Chain:r}=t;return e(NE,{"":function(){return new r},any:function(a){return new r(a)}})}),_E="det",Iee=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Fee=q(_E,Iee,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:a,divideScalar:i,isZero:s,unaryMinus:l}=t;return e(_E,{any:function(c){return nt(c)},"Array | Matrix":function(c){var f;switch(Ye(c)?f=c.size():Array.isArray(c)?(c=r(c),f=c.size()):f=[],f.length){case 0:return nt(c);case 1:if(f[0]===1)return nt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+pt(f)+")");case 2:{var d=f[0],m=f[1];if(d===m)return u(c.clone().valueOf(),d);if(m===0)return 1;throw new RangeError("Matrix must be square (size: "+pt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(f)+")")}}});function u(o,c,f){if(c===1)return nt(o[0][0]);if(c===2)return n(a(o[0][0],o[1][1]),a(o[1][0],o[0][1]));for(var d=!1,m=new Array(c).fill(0).map((y,_)=>_),p=0;p<c;p++){var h=m[p];if(s(o[h][p])){var D=void 0;for(D=p+1;D<c;D++)if(!s(o[m[D]][p])){h=m[D],m[D]=m[p],m[p]=h,d=!d;break}if(D===c)return o[h][p]}for(var w=o[h][p],S=p===0?1:o[m[p-1]][p-1],x=p+1;x<c;x++)for(var b=m[x],N=p+1;N<c;N++)o[b][N]=i(n(a(o[b][N],w),a(o[b][p],o[h][N])),S)}var g=o[m[c-1]][c-1];return d?l(g):g}}),SE="inv",Pee=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Ree=q(SE,Pee,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:a,multiply:i,unaryMinus:s,det:l,identity:u,abs:o}=t;return e(SE,{"Array | Matrix":function(d){var m=Ye(d)?d.size():at(d);switch(m.length){case 1:if(m[0]===1)return Ye(d)?r([n(1,d.valueOf()[0])]):[n(1,d[0])];throw new RangeError("Matrix must be square (size: "+pt(m)+")");case 2:{var p=m[0],h=m[1];if(p===h)return Ye(d)?r(c(d.valueOf(),p,h),d.storage()):c(d,p,h);throw new RangeError("Matrix must be square (size: "+pt(m)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(m)+")")}},any:function(d){return n(1,d)}});function c(f,d,m){var p,h,D,w,S;if(d===1){if(w=f[0][0],w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,w)]]}else if(d===2){var x=l(f);if(x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(f[1][1],x),n(s(f[0][1]),x)],[n(s(f[1][0]),x),n(f[0][0],x)]]}else{var b=f.concat();for(p=0;p<d;p++)b[p]=b[p].concat();for(var N=u(d).valueOf(),g=0;g<m;g++){var y=o(b[g][g]),_=g;for(p=g+1;p<d;)o(b[p][g])>y&&(y=o(b[p][g]),_=p),p++;if(y===0)throw Error("Cannot calculate inverse, determinant is zero");p=_,p!==g&&(S=b[g],b[g]=b[p],b[p]=S,S=N[g],N[g]=N[p],N[p]=S);var E=b[g],C=N[g];for(p=0;p<d;p++){var T=b[p],M=N[p];if(p!==g){if(T[g]!==0){for(D=n(s(T[g]),E[g]),h=g;h<m;h++)T[h]=a(T[h],i(D,E[h]));for(h=0;h<m;h++)M[h]=a(M[h],i(D,C[h]))}}else{for(D=E[g],h=g;h<m;h++)T[h]=n(T[h],D);for(h=0;h<m;h++)M[h]=n(M[h],D)}}}return N}}}),EE="pinv",Oee=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Bee=q(EE,Oee,t=>{var{typed:e,matrix:r,inv:n,deepEqual:a,equal:i,dotDivide:s,dot:l,ctranspose:u,divideScalar:o,multiply:c,add:f,Complex:d}=t;return e(EE,{"Array | Matrix":function(x){var b=Ye(x)?x.size():at(x);switch(b.length){case 1:return w(x)?u(x):b[0]===1?n(x):s(u(x),l(x,x));case 2:{if(w(x))return u(x);var N=b[0],g=b[1];if(N===g)try{return n(x)}catch(y){if(!(y instanceof Error&&y.message.match(/Cannot calculate inverse, determinant is zero/)))throw y}return Ye(x)?r(m(x.valueOf(),N,g),x.storage()):m(x,N,g)}default:throw new RangeError("Matrix must be two dimensional (size: "+pt(b)+")")}},any:function(x){return i(x,0)?nt(x):o(1,x)}});function m(S,x,b){var{C:N,F:g}=h(S,x,b),y=c(n(c(u(N),N)),u(N)),_=c(u(g),n(c(g,u(g))));return c(_,y)}function p(S,x,b){for(var N=nt(S),g=0,y=0;y<x;y++){if(b<=g)return N;for(var _=y;D(N[_][g]);)if(_++,x===_&&(_=y,g++,b===g))return N;[N[_],N[y]]=[N[y],N[_]];for(var E=N[y][g],C=0;C<b;C++)N[y][C]=s(N[y][C],E);for(var T=0;T<x;T++)if(T!==y){E=N[T][g];for(var M=0;M<b;M++)N[T][M]=f(N[T][M],c(-1,c(E,N[y][M])))}g++}return N}function h(S,x,b){var N=p(S,x,b),g=S.map((_,E)=>_.filter((C,T)=>T<x&&!D(l(N[T],N[T])))),y=N.filter((_,E)=>!D(l(N[E],N[E])));return{C:g,F:y}}function D(S){return i(f(S,d(1,1)),f(0,d(1,1)))}function w(S){return a(f(S,d(1,1)),f(c(S,0),d(1,1)))}});function jee(t){var{addScalar:e,subtract:r,flatten:n,multiply:a,multiplyScalar:i,divideScalar:s,sqrt:l,abs:u,bignumber:o,diag:c,size:f,reshape:d,inv:m,qr:p,usolve:h,usolveAll:D,equal:w,complex:S,larger:x,smaller:b,matrixFromColumns:N,dot:g}=t;function y(k,Y,V,ye){var le=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,fe=_(k,Y,V,ye,le);E(k,Y,V,ye,le,fe);var{values:W,C:K}=C(k,Y,V,ye,le);if(le){var ee=T(k,Y,K,fe,W,V,ye);return{values:W,eigenvectors:ee}}return{values:W}}function _(k,Y,V,ye,le){var fe=ye==="BigNumber",W=ye==="Complex",K=fe?o(0):0,ee=fe?o(1):W?S(1):1,ie=fe?o(1):1,oe=fe?o(10):2,pe=i(oe,oe),me;le&&(me=Array(Y).fill(ee));for(var Te=!1;!Te;){Te=!0;for(var ke=0;ke<Y;ke++){for(var ze=K,Oe=K,$e=0;$e<Y;$e++)ke!==$e&&(ze=e(ze,u(k[$e][ke])),Oe=e(Oe,u(k[ke][$e])));if(!w(ze,0)&&!w(Oe,0)){for(var G=ie,te=ze,ce=s(Oe,oe),L=i(Oe,oe);b(te,ce);)te=i(te,pe),G=i(G,oe);for(;x(te,L);)te=s(te,pe),G=s(G,oe);var J=b(s(e(te,Oe),G),i(e(ze,Oe),.95));if(J){Te=!1;for(var re=s(1,G),se=0;se<Y;se++)ke!==se&&(k[ke][se]=i(k[ke][se],re),k[se][ke]=i(k[se][ke],G));le&&(me[ke]=i(me[ke],re))}}}}return le?c(me):null}function E(k,Y,V,ye,le,fe){var W=ye==="BigNumber",K=ye==="Complex",ee=W?o(0):K?S(0):0;W&&(V=o(V));for(var ie=0;ie<Y-2;ie++){for(var oe=0,pe=ee,me=ie+1;me<Y;me++){var Te=k[me][ie];b(u(pe),u(Te))&&(pe=Te,oe=me)}if(!b(u(pe),V)){if(oe!==ie+1){var ke=k[oe];k[oe]=k[ie+1],k[ie+1]=ke;for(var ze=0;ze<Y;ze++){var Oe=k[ze][oe];k[ze][oe]=k[ze][ie+1],k[ze][ie+1]=Oe}if(le){var $e=fe[oe];fe[oe]=fe[ie+1],fe[ie+1]=$e}}for(var G=ie+2;G<Y;G++){var te=s(k[G][ie],pe);if(te!==0){for(var ce=0;ce<Y;ce++)k[G][ce]=r(k[G][ce],i(te,k[ie+1][ce]));for(var L=0;L<Y;L++)k[L][ie+1]=e(k[L][ie+1],i(te,k[L][G]));if(le)for(var J=0;J<Y;J++)fe[G][J]=r(fe[G][J],i(te,fe[ie+1][J]))}}}}return fe}function C(k,Y,V,ye,le){var fe=ye==="BigNumber",W=ye==="Complex",K=fe?o(1):W?S(1):1;fe&&(V=o(V));for(var ee=nt(k),ie=[],oe=Y,pe=[],me=le?c(Array(Y).fill(K)):void 0,Te=le?c(Array(oe).fill(K)):void 0,ke=0;ke<=100;){ke+=1;for(var ze=ee[oe-1][oe-1],Oe=0;Oe<oe;Oe++)ee[Oe][Oe]=r(ee[Oe][Oe],ze);var{Q:$e,R:G}=p(ee);ee=a(G,$e);for(var te=0;te<oe;te++)ee[te][te]=e(ee[te][te],ze);if(le&&(Te=a(Te,$e)),oe===1||b(u(ee[oe-1][oe-2]),V)){ke=0,ie.push(ee[oe-1][oe-1]),le&&(pe.unshift([[1]]),j(Te,Y),me=a(me,Te),oe>1&&(Te=c(Array(oe-1).fill(K)))),oe-=1,ee.pop();for(var ce=0;ce<oe;ce++)ee[ce].pop()}else if(oe===2||b(u(ee[oe-2][oe-3]),V)){ke=0;var L=M(ee[oe-2][oe-2],ee[oe-2][oe-1],ee[oe-1][oe-2],ee[oe-1][oe-1]);ie.push(...L),le&&(pe.unshift(I(ee[oe-2][oe-2],ee[oe-2][oe-1],ee[oe-1][oe-2],ee[oe-1][oe-1],L[0],L[1],V,ye)),j(Te,Y),me=a(me,Te),oe>2&&(Te=c(Array(oe-2).fill(K)))),oe-=2,ee.pop(),ee.pop();for(var J=0;J<oe;J++)ee[J].pop(),ee[J].pop()}if(oe===0)break}if(ie.sort((ue,ve)=>+r(u(ue),u(ve))),ke>100){var re=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ie.join(", "));throw re.values=ie,re.vectors=[],re}var se=le?a(me,O(pe,Y)):void 0;return{values:ie,C:se}}function T(k,Y,V,ye,le,fe,W){var K=m(V),ee=a(K,k,V),ie=W==="BigNumber",oe=W==="Complex",pe=ie?o(0):oe?S(0):0,me=ie?o(1):oe?S(1):1,Te=[],ke=[];for(var ze of le){var Oe=P(Te,ze,w);Oe===-1?(Te.push(ze),ke.push(1)):ke[Oe]+=1}for(var $e=[],G=Te.length,te=Array(Y).fill(pe),ce=c(Array(Y).fill(me)),L=function(){var se=Te[J],ue=r(ee,a(se,ce)),ve=D(ue,te);for(ve.shift();ve.length<ke[J];){var _e=H(ue,Y,ve,fe,W);if(_e===null)break;ve.push(_e)}var Ee=a(m(ye),V);ve=ve.map(Me=>a(Ee,Me)),$e.push(...ve.map(Me=>({value:se,vector:n(Me)})))},J=0;J<G;J++)L();return $e}function M(k,Y,V,ye){var le=e(k,ye),fe=r(i(k,ye),i(Y,V)),W=i(le,.5),K=i(l(r(i(le,le),i(4,fe))),.5);return[e(W,K),r(W,K)]}function I(k,Y,V,ye,le,fe,W,K){var ee=K==="BigNumber",ie=K==="Complex",oe=ee?o(0):ie?S(0):0,pe=ee?o(1):ie?S(1):1;if(b(u(V),W))return[[pe,oe],[oe,pe]];if(x(u(r(le,fe)),W))return[[r(le,ye),r(fe,ye)],[V,V]];var me=r(k,le),Te=r(ye,le);return b(u(Y),W)&&b(u(Te),W)?[[me,pe],[V,oe]]:[[Y,oe],[Te,pe]]}function j(k,Y){for(var V=0;V<k.length;V++)k[V].push(...Array(Y-k[V].length).fill(0));for(var ye=k.length;ye<Y;ye++)k.push(Array(Y).fill(0)),k[ye][ye]=1;return k}function O(k,Y){for(var V=[],ye=0;ye<Y;ye++)V[ye]=Array(Y).fill(0);var le=0;for(var fe of k){for(var W=fe.length,K=0;K<W;K++)for(var ee=0;ee<W;ee++)V[le+K][le+ee]=fe[K][ee];le+=W}return V}function P(k,Y,V){for(var ye=0;ye<k.length;ye++)if(V(k[ye],Y))return ye;return-1}function H(k,Y,V,ye,le){for(var fe=le==="BigNumber"?o(1e3):1e3,W,K=0;K<5;++K){W=$(Y,V,le);try{W=h(k,W)}catch{continue}if(x(X(W),fe))break}if(K>=5)return null;for(K=0;;){var ee=h(k,W);if(b(X(z(W,[ee])),ye))break;if(++K>=10)return null;W=ae(ee)}return W}function $(k,Y,V){var ye=V==="BigNumber",le=V==="Complex",fe=Array(k).fill(0).map(W=>2*Math.random()-1);return ye&&(fe=fe.map(W=>o(W))),le&&(fe=fe.map(W=>S(W))),fe=z(fe,Y),ae(fe,V)}function z(k,Y){var V=f(k);for(var ye of Y)ye=d(ye,V),k=r(k,a(s(g(ye,k),g(ye,ye)),ye));return k}function X(k){return u(l(g(k,k)))}function ae(k,Y){var V=Y==="BigNumber",ye=Y==="Complex",le=V?o(1):ye?S(1):1;return a(s(le,X(k)),k)}return y}function kee(t){var{config:e,addScalar:r,subtract:n,abs:a,atan:i,cos:s,sin:l,multiplyScalar:u,inv:o,bignumber:c,multiply:f,add:d}=t;function m(E,C){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,M=arguments.length>3?arguments[3]:void 0,I=arguments.length>4?arguments[4]:void 0;if(M==="number")return p(E,T,I);if(M==="BigNumber")return h(E,T,I);throw TypeError("Unsupported data type: "+M)}function p(E,C,T){var M=E.length,I=Math.abs(C/M),j,O;if(T){O=new Array(M);for(var P=0;P<M;P++)O[P]=Array(M).fill(0),O[P][P]=1}for(var H=g(E);Math.abs(H[1])>=Math.abs(I);){var $=H[0][0],z=H[0][1];j=D(E[$][$],E[z][z],E[$][z]),E=N(E,j,$,z),T&&(O=S(O,j,$,z)),H=g(E)}for(var X=Array(M).fill(0),ae=0;ae<M;ae++)X[ae]=E[ae][ae];return _(nt(X),O,T)}function h(E,C,T){var M=E.length,I=a(C/M),j,O;if(T){O=new Array(M);for(var P=0;P<M;P++)O[P]=Array(M).fill(0),O[P][P]=1}for(var H=y(E);a(H[1])>=a(I);){var $=H[0][0],z=H[0][1];j=w(E[$][$],E[z][z],E[$][z]),E=b(E,j,$,z),T&&(O=x(O,j,$,z)),H=y(E)}for(var X=Array(M).fill(0),ae=0;ae<M;ae++)X[ae]=E[ae][ae];return _(nt(X),O,T)}function D(E,C,T){var M=C-E;return Math.abs(M)<=e.relTol?Math.PI/4:.5*Math.atan(2*T/(C-E))}function w(E,C,T){var M=n(C,E);return a(M)<=e.relTol?c(-1).acos().div(4):u(.5,i(f(2,T,o(M))))}function S(E,C,T,M){for(var I=E.length,j=Math.cos(C),O=Math.sin(C),P=Array(I).fill(0),H=Array(I).fill(0),$=0;$<I;$++)P[$]=j*E[$][T]-O*E[$][M],H[$]=O*E[$][T]+j*E[$][M];for(var z=0;z<I;z++)E[z][T]=P[z],E[z][M]=H[z];return E}function x(E,C,T,M){for(var I=E.length,j=s(C),O=l(C),P=Array(I).fill(c(0)),H=Array(I).fill(c(0)),$=0;$<I;$++)P[$]=n(u(j,E[$][T]),u(O,E[$][M])),H[$]=r(u(O,E[$][T]),u(j,E[$][M]));for(var z=0;z<I;z++)E[z][T]=P[z],E[z][M]=H[z];return E}function b(E,C,T,M){for(var I=E.length,j=c(s(C)),O=c(l(C)),P=u(j,j),H=u(O,O),$=Array(I).fill(c(0)),z=Array(I).fill(c(0)),X=f(c(2),j,O,E[T][M]),ae=r(n(u(P,E[T][T]),X),u(H,E[M][M])),k=d(u(H,E[T][T]),X,u(P,E[M][M])),Y=0;Y<I;Y++)$[Y]=n(u(j,E[T][Y]),u(O,E[M][Y])),z[Y]=r(u(O,E[T][Y]),u(j,E[M][Y]));E[T][T]=ae,E[M][M]=k,E[T][M]=c(0),E[M][T]=c(0);for(var V=0;V<I;V++)V!==T&&V!==M&&(E[T][V]=$[V],E[V][T]=$[V],E[M][V]=z[V],E[V][M]=z[V]);return E}function N(E,C,T,M){for(var I=E.length,j=Math.cos(C),O=Math.sin(C),P=j*j,H=O*O,$=Array(I).fill(0),z=Array(I).fill(0),X=P*E[T][T]-2*j*O*E[T][M]+H*E[M][M],ae=H*E[T][T]+2*j*O*E[T][M]+P*E[M][M],k=0;k<I;k++)$[k]=j*E[T][k]-O*E[M][k],z[k]=O*E[T][k]+j*E[M][k];E[T][T]=X,E[M][M]=ae,E[T][M]=0,E[M][T]=0;for(var Y=0;Y<I;Y++)Y!==T&&Y!==M&&(E[T][Y]=$[Y],E[Y][T]=$[Y],E[M][Y]=z[Y],E[Y][M]=z[Y]);return E}function g(E){for(var C=E.length,T=0,M=[0,1],I=0;I<C;I++)for(var j=I+1;j<C;j++)Math.abs(T)<Math.abs(E[I][j])&&(T=Math.abs(E[I][j]),M=[I,j]);return[M,T]}function y(E){for(var C=E.length,T=0,M=[0,1],I=0;I<C;I++)for(var j=I+1;j<C;j++)a(T)<a(E[I][j])&&(T=a(E[I][j]),M=[I,j]);return[M,T]}function _(E,C,T){var M=E.length,I=Array(M),j;if(T){j=Array(M);for(var O=0;O<M;O++)j[O]=Array(M)}for(var P=0;P<M;P++){for(var H=0,$=E[0],z=0;z<E.length;z++)a(E[z])<a($)&&(H=z,$=E[H]);if(I[P]=E.splice(H,1)[0],T)for(var X=0;X<M;X++)j[P][X]=C[X][H],C[X].splice(H,1)}if(!T)return{values:I};var ae=j.map((k,Y)=>({value:I[Y],vector:k}));return{values:I,eigenvectors:ae}}return m}var $ee="eigs",Lee=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],zee=q($ee,Lee,t=>{var{config:e,typed:r,matrix:n,addScalar:a,subtract:i,equal:s,abs:l,atan:u,cos:o,sin:c,multiplyScalar:f,divideScalar:d,inv:m,bignumber:p,multiply:h,add:D,larger:w,column:S,flatten:x,number:b,complex:N,sqrt:g,diag:y,size:_,reshape:E,qr:C,usolve:T,usolveAll:M,im:I,re:j,smaller:O,matrixFromColumns:P,dot:H}=t,$=kee({config:e,addScalar:a,subtract:i,abs:l,atan:u,cos:o,sin:c,multiplyScalar:f,inv:m,bignumber:p,multiply:h,add:D}),z=jee({addScalar:a,subtract:i,multiply:h,multiplyScalar:f,flatten:x,divideScalar:d,sqrt:g,abs:l,bignumber:p,diag:y,size:_,reshape:E,qr:C,inv:m,usolve:T,usolveAll:M,equal:s,complex:N,larger:w,smaller:O,matrixFromColumns:P,dot:H});return r("eigs",{Array:function(fe){return X(n(fe))},"Array, number|BigNumber":function(fe,W){return X(n(fe),{precision:W})},"Array, Object"(le,fe){return X(n(le),fe)},Matrix:function(fe){return X(fe,{matricize:!0})},"Matrix, number|BigNumber":function(fe,W){return X(fe,{precision:W,matricize:!0})},"Matrix, Object":function(fe,W){var K={matricize:!0};return Nr(K,W),X(fe,K)}});function X(le){var fe,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K="eigenvectors"in W?W.eigenvectors:!0,ee=(fe=W.precision)!==null&&fe!==void 0?fe:e.relTol,ie=ae(le,ee,K);return W.matricize&&(ie.values=n(ie.values),K&&(ie.eigenvectors=ie.eigenvectors.map(oe=>{var{value:pe,vector:me}=oe;return{value:pe,vector:n(me)}}))),K&&Object.defineProperty(ie,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),ie}function ae(le,fe,W){var K=le.toArray(),ee=le.size();if(ee.length!==2||ee[0]!==ee[1])throw new RangeError("Matrix must be square (size: ".concat(pt(ee),")"));var ie=ee[0];if(Y(K,ie,fe)&&(V(K,ie),k(K,ie,fe))){var oe=ye(le,K,ie);return $(K,ie,fe,oe,W)}var pe=ye(le,K,ie);return z(K,ie,fe,pe,W)}function k(le,fe,W){for(var K=0;K<fe;K++)for(var ee=K;ee<fe;ee++)if(w(p(l(i(le[K][ee],le[ee][K]))),W))return!1;return!0}function Y(le,fe,W){for(var K=0;K<fe;K++)for(var ee=0;ee<fe;ee++)if(w(p(l(I(le[K][ee]))),W))return!1;return!0}function V(le,fe){for(var W=0;W<fe;W++)for(var K=0;K<fe;K++)le[W][K]=j(le[W][K])}function ye(le,fe,W){var K=le.datatype();if(K==="number"||K==="BigNumber"||K==="Complex")return K;for(var ee=!1,ie=!1,oe=!1,pe=0;pe<W;pe++)for(var me=0;me<W;me++){var Te=fe[pe][me];if(Xe(Te)||of(Te))ee=!0;else if(lt(Te))ie=!0;else if(pi(Te))oe=!0;else throw TypeError("Unsupported type in Matrix: "+Xt(Te))}if(ie&&oe&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),oe){for(var ke=0;ke<W;ke++)for(var ze=0;ze<W;ze++)fe[ke][ze]=N(fe[ke][ze]);return"Complex"}if(ie){for(var Oe=0;Oe<W;Oe++)for(var $e=0;$e<W;$e++)fe[Oe][$e]=p(fe[Oe][$e]);return"BigNumber"}if(ee){for(var G=0;G<W;G++)for(var te=0;te<W;te++)fe[G][te]=b(fe[G][te]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),AE="expm",Vee=["typed","abs","add","identity","inv","multiply"],Uee=q(AE,Vee,t=>{var{typed:e,abs:r,add:n,identity:a,inv:i,multiply:s}=t;return e(AE,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+pt(d)+")");for(var m=d[0],p=1e-15,h=l(f),D=u(h,p),w=D.q,S=D.j,x=s(f,Math.pow(2,-S)),b=a(m),N=a(m),g=1,y=x,_=-1,E=1;E<=w;E++)E>1&&(y=s(y,x),_=-_),g=g*(w-E+1)/((2*w-E+1)*E),b=n(b,s(g,y)),N=n(N,s(g*_,y));for(var C=s(i(N),b),T=0;T<S;T++)C=s(C,C);return to(f)?f.createSparseMatrix(C):C}});function l(c){for(var f=c.size()[0],d=0,m=0;m<f;m++){for(var p=0,h=0;h<f;h++)p+=r(c.get([m,h]));d=Math.max(p,d)}return d}function u(c,f){for(var d=30,m=0;m<d;m++)for(var p=0;p<=m;p++){var h=m-p;if(o(c,p,h)<f)return{q:p,j:h}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function o(c,f,d){for(var m=1,p=2;p<=f;p++)m*=p;for(var h=m,D=f+1;D<=2*f;D++)h*=D;var w=h*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*m*m/(h*w)}}),DE="sqrtm",qee=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Hee=q(DE,qee,t=>{var{typed:e,abs:r,add:n,multiply:a,map:i,sqrt:s,subtract:l,inv:u,size:o,max:c,identity:f}=t,d=1e3,m=1e-6;function p(h){var D,w=0,S=h,x=f(o(h));do{var b=S;if(S=a(.5,n(b,u(x))),x=a(.5,n(x,u(b))),D=c(r(l(S,b))),D>m&&++w>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(D>m);return S}return e(DE,{"Array | Matrix":function(D){var w=Ye(D)?D.size():at(D);switch(w.length){case 1:if(w[0]===1)return i(D,s);throw new RangeError("Matrix must be square (size: "+pt(w)+")");case 2:{var S=w[0],x=w[1];if(S===x)return p(D);throw new RangeError("Matrix must be square (size: "+pt(w)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+pt(w)+")")}}})}),CE="sylvester",Gee=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Wee=q(CE,Gee,t=>{var{typed:e,schur:r,matrixFromColumns:n,matrix:a,multiply:i,range:s,concat:l,transpose:u,index:o,subset:c,add:f,subtract:d,identity:m,lusolve:p,abs:h,config:D}=t;return e(CE,{"Matrix, Matrix, Matrix":w,"Array, Matrix, Matrix":function(x,b,N){return w(a(x),b,N)},"Array, Array, Matrix":function(x,b,N){return w(a(x),a(b),N)},"Array, Matrix, Array":function(x,b,N){return w(a(x),b,a(N))},"Matrix, Array, Matrix":function(x,b,N){return w(x,a(b),N)},"Matrix, Array, Array":function(x,b,N){return w(x,a(b),a(N))},"Matrix, Matrix, Array":function(x,b,N){return w(x,b,a(N))},"Array, Array, Array":function(x,b,N){return w(a(x),a(b),a(N)).toArray()}});function w(S,x,b){for(var N=x.size()[0],g=S.size()[0],y=r(S),_=y.T,E=y.U,C=r(i(-1,x)),T=C.T,M=C.U,I=i(i(u(E),b),M),j=s(0,g),O=[],P=(pe,me)=>l(pe,me,1),H=(pe,me)=>l(pe,me,0),$=0;$<N;$++)if($<N-1&&h(c(T,o($+1,$)))>1e-5){for(var z=H(c(I,o(j,[$])),c(I,o(j,[$+1]))),X=0;X<$;X++)z=f(z,H(i(O[X],c(T,o(X,$))),i(O[X],c(T,o(X,$+1)))));var ae=i(m(g),i(-1,c(T,o($,$)))),k=i(m(g),i(-1,c(T,o($+1,$)))),Y=i(m(g),i(-1,c(T,o($,$+1)))),V=i(m(g),i(-1,c(T,o($+1,$+1)))),ye=H(P(f(_,ae),k),P(Y,f(_,V))),le=p(ye,z);O[$]=le.subset(o(s(0,g),[0])),O[$+1]=le.subset(o(s(g,2*g),[0])),$++}else{for(var fe=c(I,o(j,[$])),W=0;W<$;W++)fe=f(fe,i(O[W],c(T,o(W,$))));var K=c(T,o($,$)),ee=d(_,i(K,m(g)));O[$]=p(ee,fe)}var ie=a(n(...O)),oe=i(E,i(ie,u(M)));return oe}}),TE="schur",Qee=["typed","matrix","identity","multiply","qr","norm","subtract"],Xee=q(TE,Qee,t=>{var{typed:e,matrix:r,identity:n,multiply:a,qr:i,norm:s,subtract:l}=t;return e(TE,{Array:function(c){var f=u(r(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(o){var c=o.size()[0],f=o,d=n(c),m=0,p;do{p=f;var h=i(f),D=h.Q,w=h.R;if(f=a(w,D),d=a(d,D),m++>100)break}while(s(l(f,p))>1e-4);return{U:d,T:f}}}),ME="lyap",Kee=["typed","matrix","sylvester","multiply","transpose"],Jee=q(ME,Kee,t=>{var{typed:e,matrix:r,sylvester:n,multiply:a,transpose:i}=t;return e(ME,{"Matrix, Matrix":function(l,u){return n(l,i(l),a(-1,u))},"Array, Matrix":function(l,u){return n(r(l),i(r(l)),a(-1,u))},"Matrix, Array":function(l,u){return n(l,i(r(l)),r(a(-1,u)))},"Array, Array":function(l,u){return n(r(l),i(r(l)),r(a(-1,u))).toArray()}})}),Yee="divide",Zee=["typed","matrix","multiply","equalScalar","divideScalar","inv"],ete=q(Yee,Zee,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:a,divideScalar:i,inv:s}=t,l=on({typed:e,equalScalar:a}),u=ga({typed:e});return e("divide",X3({"Array | Matrix, Array | Matrix":function(c,f){return n(c,s(f))},"DenseMatrix, any":function(c,f){return u(c,f,i,!1)},"SparseMatrix, any":function(c,f){return l(c,f,i,!1)},"Array, any":function(c,f){return u(r(c),f,i,!1).valueOf()},"any, Array | Matrix":function(c,f){return n(c,s(f))}},i.signatures))}),IE="distance",tte=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],rte=q(IE,tte,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:a,divideScalar:i,deepEqual:s,sqrt:l,abs:u}=t;return e(IE,{"Array, Array, Array":function(N,g,y){if(N.length===2&&g.length===2&&y.length===2){if(!c(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(g))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(y))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(g,y))throw new TypeError("LinePoint1 should not be same with LinePoint2");var _=n(y[1],g[1]),E=n(g[0],y[0]),C=n(a(y[0],g[1]),a(g[0],y[1]));return D(N[0],N[1],_,E,C)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(N,g,y){if(Object.keys(N).length===2&&Object.keys(g).length===2&&Object.keys(y).length===2){if(!c(N))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(g))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(y))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(p(g),p(y)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in N&&"pointY"in N&&"lineOnePtX"in g&&"lineOnePtY"in g&&"lineTwoPtX"in y&&"lineTwoPtY"in y){var _=n(y.lineTwoPtY,g.lineOnePtY),E=n(g.lineOnePtX,y.lineTwoPtX),C=n(a(y.lineTwoPtX,g.lineOnePtY),a(g.lineOnePtX,y.lineTwoPtY));return D(N.pointX,N.pointY,_,E,C)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(N,g){if(N.length===2&&g.length===3){if(!c(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(g))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return D(N[0],N[1],g[0],g[1],g[2])}else if(N.length===3&&g.length===6){if(!f(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(g))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return w(N[0],N[1],N[2],g[0],g[1],g[2],g[3],g[4],g[5])}else if(N.length===g.length&&N.length>0){if(!d(N))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(g))throw new TypeError("All values of an array should be numbers or BigNumbers");return S(N,g)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(N,g){if(Object.keys(N).length===2&&Object.keys(g).length===3){if(!c(N))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(g))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in N&&"pointY"in N&&"xCoeffLine"in g&&"yCoeffLine"in g&&"constant"in g)return D(N.pointX,N.pointY,g.xCoeffLine,g.yCoeffLine,g.constant);throw new TypeError("Key names do not match")}else if(Object.keys(N).length===3&&Object.keys(g).length===6){if(!f(N))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!m(g))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in N&&"pointY"in N&&"x0"in g&&"y0"in g&&"z0"in g&&"a"in g&&"b"in g&&"c"in g)return w(N.pointX,N.pointY,N.pointZ,g.x0,g.y0,g.z0,g.a,g.b,g.c);throw new TypeError("Key names do not match")}else if(Object.keys(N).length===2&&Object.keys(g).length===2){if(!c(N))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(g))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in N&&"pointOneY"in N&&"pointTwoX"in g&&"pointTwoY"in g)return S([N.pointOneX,N.pointOneY],[g.pointTwoX,g.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(N).length===3&&Object.keys(g).length===3){if(!f(N))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(g))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in N&&"pointOneY"in N&&"pointOneZ"in N&&"pointTwoX"in g&&"pointTwoY"in g&&"pointTwoZ"in g)return S([N.pointOneX,N.pointOneY,N.pointOneZ],[g.pointTwoX,g.pointTwoY,g.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(N){if(!h(N))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return x(N)}});function o(b){return typeof b=="number"||lt(b)}function c(b){return b.constructor!==Array&&(b=p(b)),o(b[0])&&o(b[1])}function f(b){return b.constructor!==Array&&(b=p(b)),o(b[0])&&o(b[1])&&o(b[2])}function d(b){return Array.isArray(b)||(b=p(b)),b.every(o)}function m(b){return b.constructor!==Array&&(b=p(b)),o(b[0])&&o(b[1])&&o(b[2])&&o(b[3])&&o(b[4])&&o(b[5])}function p(b){for(var N=Object.keys(b),g=[],y=0;y<N.length;y++)g.push(b[N[y]]);return g}function h(b){if(b[0].length===2&&o(b[0][0])&&o(b[0][1])){if(b.some(N=>N.length!==2||!o(N[0])||!o(N[1])))return!1}else if(b[0].length===3&&o(b[0][0])&&o(b[0][1])&&o(b[0][2])){if(b.some(N=>N.length!==3||!o(N[0])||!o(N[1])||!o(N[2])))return!1}else return!1;return!0}function D(b,N,g,y,_){var E=u(r(r(a(g,b),a(y,N)),_)),C=l(r(a(g,g),a(y,y)));return i(E,C)}function w(b,N,g,y,_,E,C,T,M){var I=[n(a(n(_,N),M),a(n(E,g),T)),n(a(n(E,g),C),a(n(y,b),M)),n(a(n(y,b),T),a(n(_,N),C))];I=l(r(r(a(I[0],I[0]),a(I[1],I[1])),a(I[2],I[2])));var j=l(r(r(a(C,C),a(T,T)),a(M,M)));return i(I,j)}function S(b,N){for(var g=b.length,y=0,_=0,E=0;E<g;E++)_=n(b[E],N[E]),y=r(a(_,_),y);return l(y)}function x(b){for(var N=[],g=[],y=[],_=0;_<b.length-1;_++)for(var E=_+1;E<b.length;E++)b[0].length===2?(g=[b[_][0],b[_][1]],y=[b[E][0],b[E][1]]):b[0].length===3&&(g=[b[_][0],b[_][1],b[_][2]],y=[b[E][0],b[E][1],b[E][2]]),N.push(S(g,y));return N}}),nte="intersect",ate=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],ite=q(nte,ate,t=>{var{typed:e,config:r,abs:n,add:a,addScalar:i,matrix:s,multiply:l,multiplyScalar:u,divideScalar:o,subtract:c,smaller:f,equalScalar:d,flatten:m,isZero:p,isNumeric:h}=t;return e("intersect",{"Array, Array, Array":D,"Array, Array, Array, Array":w,"Matrix, Matrix, Matrix":function(T,M,I){var j=D(T.valueOf(),M.valueOf(),I.valueOf());return j===null?null:s(j)},"Matrix, Matrix, Matrix, Matrix":function(T,M,I,j){var O=w(T.valueOf(),M.valueOf(),I.valueOf(),j.valueOf());return O===null?null:s(O)}});function D(C,T,M){if(C=S(C),T=S(T),M=S(M),!b(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!N(M))throw new TypeError("Array with 4 numbers expected as third argument");return E(C[0],C[1],C[2],T[0],T[1],T[2],M[0],M[1],M[2],M[3])}function w(C,T,M,I){if(C=S(C),T=S(T),M=S(M),I=S(I),C.length===2){if(!x(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!x(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!x(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!x(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return g(C,T,M,I)}else if(C.length===3){if(!b(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!b(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return _(C[0],C[1],C[2],T[0],T[1],T[2],M[0],M[1],M[2],I[0],I[1],I[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function S(C){return C.length===1?C[0]:C.length>1&&Array.isArray(C[0])&&C.every(T=>Array.isArray(T)&&T.length===1)?m(C):C}function x(C){return C.length===2&&h(C[0])&&h(C[1])}function b(C){return C.length===3&&h(C[0])&&h(C[1])&&h(C[2])}function N(C){return C.length===4&&h(C[0])&&h(C[1])&&h(C[2])&&h(C[3])}function g(C,T,M,I){var j=C,O=M,P=c(j,T),H=c(O,I),$=c(u(P[0],H[1]),u(H[0],P[1]));if(p($)||f(n($),r.relTol))return null;var z=u(H[0],j[1]),X=u(H[1],j[0]),ae=u(H[0],O[1]),k=u(H[1],O[0]),Y=o(i(c(c(z,X),ae),k),$);return a(l(P,Y),j)}function y(C,T,M,I,j,O,P,H,$,z,X,ae){var k=u(c(C,T),c(M,I)),Y=u(c(j,O),c(P,H)),V=u(c($,z),c(X,ae));return i(i(k,Y),V)}function _(C,T,M,I,j,O,P,H,$,z,X,ae){var k=y(C,P,z,P,T,H,X,H,M,$,ae,$),Y=y(z,P,I,C,X,H,j,T,ae,$,O,M),V=y(C,P,I,C,T,H,j,T,M,$,O,M),ye=y(z,P,z,P,X,H,X,H,ae,$,ae,$),le=y(I,C,I,C,j,T,j,T,O,M,O,M),fe=c(u(k,Y),u(V,ye)),W=c(u(le,ye),u(Y,Y));if(p(W))return null;var K=o(fe,W),ee=o(i(k,u(K,Y)),ye),ie=i(C,u(K,c(I,C))),oe=i(T,u(K,c(j,T))),pe=i(M,u(K,c(O,M))),me=i(P,u(ee,c(z,P))),Te=i(H,u(ee,c(X,H))),ke=i($,u(ee,c(ae,$)));return d(ie,me)&&d(oe,Te)&&d(pe,ke)?[ie,oe,pe]:null}function E(C,T,M,I,j,O,P,H,$,z){var X=u(C,P),ae=u(I,P),k=u(T,H),Y=u(j,H),V=u(M,$),ye=u(O,$),le=c(c(c(z,X),k),V),fe=c(c(c(i(i(ae,Y),ye),X),k),V),W=o(le,fe),K=i(C,u(W,c(I,C))),ee=i(T,u(W,c(j,T))),ie=i(M,u(W,c(O,M)));return[K,ee,ie]}}),FE="sum",ste=["typed","config","add","numeric"],z4=q(FE,ste,t=>{var{typed:e,config:r,add:n,numeric:a}=t;return e(FE,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":s,"...":function(u){if(su(u))throw new TypeError("Scalar values expected in function sum");return i(u)}});function i(l){var u;return Ss(l,function(o){try{u=u===void 0?o:n(u,o)}catch(c){throw Cn(c,"sum",o)}}),u===void 0&&(u=a(0,r.number)),typeof u=="string"&&(u=a(u,Cs(u,r))),u}function s(l,u){try{var o=Vh(l,u,n);return o}catch(c){throw Cn(c,"sum")}}}),Nd="cumsum",ote=["typed","add","unaryPlus"],V4=q(Nd,ote,t=>{var{typed:e,add:r,unaryPlus:n}=t;return e(Nd,{Array:a,Matrix:function(o){return o.create(a(o.valueOf(),o.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(o,c){return o.create(s(o.valueOf(),c),o.datatype())},"...":function(o){if(su(o))throw new TypeError("All values expected to be scalar in function cumsum");return a(o)}});function a(u){try{return i(u)}catch(o){throw Cn(o,Nd)}}function i(u){if(u.length===0)return[];for(var o=[n(u[0])],c=1;c<u.length;++c)o.push(r(o[c-1],u[c]));return o}function s(u,o){var c=at(u);if(o<0||o>=c.length)throw new Fa(o,c.length);try{return l(u,o)}catch(f){throw Cn(f,Nd)}}function l(u,o){var c,f,d;if(o<=0){var m=u[0][0];if(Array.isArray(m)){for(d=_M(u),f=[],c=0;c<d.length;c++)f[c]=l(d[c],o-1);return f}else return i(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=l(u[c],o-1);return f}}}),PE="mean",lte=["typed","add","divide"],U4=q(PE,lte,t=>{var{typed:e,add:r,divide:n}=t;return e(PE,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":a,"...":function(l){if(su(l))throw new TypeError("Scalar values expected in function mean");return i(l)}});function a(s,l){try{var u=Vh(s,l,r),o=Array.isArray(s)?at(s):s.size();return n(u,o[l])}catch(c){throw Cn(c,"mean")}}function i(s){var l,u=0;if(Ss(s,function(o){try{l=l===void 0?o:r(l,o),u++}catch(c){throw Cn(c,"mean",o)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return n(l,u)}}),RE="median",ute=["typed","add","divide","compare","partitionSelect"],cte=q(RE,ute,t=>{var{typed:e,add:r,divide:n,compare:a,partitionSelect:i}=t;function s(o){try{o=Ct(o.valueOf());var c=o.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=i(o,f+1),m=o[f],p=0;p<f;++p)a(o[p],m)>0&&(m=o[p]);return u(m,d)}else{var h=i(o,(c-1)/2);return l(h)}}catch(D){throw Cn(D,"median")}}var l=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return n(r(c,f),2)}});return e(RE,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(su(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),OE="mad",fte=["typed","abs","map","median","subtract"],dte=q(OE,fte,t=>{var{typed:e,abs:r,map:n,median:a,subtract:i}=t;return e(OE,{"Array | Matrix":s,"...":function(u){return s(u)}});function s(l){if(l=Ct(l.valueOf()),l.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=a(l);return a(n(l,function(o){return r(i(o,u))}))}catch(o){throw o instanceof TypeError&&o.message.includes("median")?new TypeError(o.message.replace("median","mad")):Cn(o,"mad")}}}),cv="unbiased",BE="variance",mte=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],q4=q(BE,mte,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:l}=t;return e(BE,{"Array | Matrix":function(f){return u(f,cv)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return o(f,d,cv)},"Array | Matrix, number | BigNumber, string":o,"...":function(f){return u(f,cv)}});function u(c,f){var d,m=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Ss(c,function(D){try{d=d===void 0?D:r(d,D),m++}catch(w){throw Cn(w,"variance",D)}}),m===0)throw new Error("Cannot calculate variance of an empty array");var p=i(d,m);if(d=void 0,Ss(c,function(D){var w=n(D,p);d=d===void 0?a(w,w):r(d,a(w,w))}),l(d))return d;switch(f){case"uncorrected":return i(d,m);case"biased":return i(d,m+1);case"unbiased":{var h=lt(d)?d.mul(0):0;return m===1?h:i(d,m-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function o(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,m=>u(m,d))}catch(m){throw Cn(m,"variance")}}}),jE="quantileSeq",hte=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],H4=q(jE,hte,t=>{var{typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:l,compare:u,isInteger:o,smaller:c,smallerEq:f,larger:d,mapSlices:m}=t;return e(jE,{"Array | Matrix, number | BigNumber":(S,x)=>h(S,x,!1),"Array | Matrix, number | BigNumber, number":(S,x,b)=>p(S,x,!1,b,h),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(S,x,b,N)=>p(S,x,b,N,h),"Array | Matrix, Array | Matrix":(S,x)=>D(S,x,!1),"Array | Matrix, Array | Matrix, number":(S,x,b)=>p(S,x,!1,b,D),"Array | Matrix, Array | Matrix, boolean":D,"Array | Matrix, Array | Matrix, boolean, number":(S,x,b,N)=>p(S,x,b,N,D)});function p(S,x,b,N,g){return m(S,N,y=>g(y,x,b))}function h(S,x,b){var N,g=S.valueOf();if(c(x,0))throw new Error("N/prob must be non-negative");if(f(x,1))return Xe(x)?w(g,x,b):r(w(g,x,b));if(d(x,1)){if(!o(x))throw new Error("N must be a positive integer");if(d(x,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var y=n(x,1);N=[];for(var _=0;c(_,x);_++){var E=i(_+1,y);N.push(w(g,E,b))}return Xe(x)?N:r(N)}}function D(S,x,b){for(var N=S.valueOf(),g=x.valueOf(),y=[],_=0;_<g.length;++_)y.push(w(N,g[_],b));return y}function w(S,x,b){var N=Ct(S),g=N.length;if(g===0)throw new Error("Cannot calculate quantile of an empty sequence");var y=Xe(x)?x*(g-1):x.times(g-1),_=Xe(x)?Math.floor(y):y.floor().toNumber(),E=Xe(x)?y%1:y.minus(_);if(o(y))return b?N[y]:l(N,Xe(x)?y:y.valueOf());var C,T;if(b)C=N[_],T=N[_+1];else{T=l(N,_+1),C=N[_];for(var M=0;M<_;++M)u(N[M],C)>0&&(C=N[M])}return n(s(C,a(1,E)),s(T,E))}}),kE="std",pte=["typed","map","sqrt","variance"],G4=q(kE,pte,t=>{var{typed:e,map:r,sqrt:n,variance:a}=t;return e(kE,{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(l){return i(l)}});function i(s,l){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=a.apply(null,arguments);return Jn(u)?r(u,n):n(u)}catch(o){throw o instanceof TypeError&&o.message.includes(" variance")?new TypeError(o.message.replace(" variance"," std")):o}}}),$E="corr",vte=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],gte=q($E,vte,t=>{var{typed:e,matrix:r,sqrt:n,sum:a,add:i,subtract:s,multiply:l,pow:u,divide:o}=t;return e($E,{"Array, Array":function(m,p){return c(m,p)},"Matrix, Matrix":function(m,p){var h=c(m.toArray(),p.toArray());return Array.isArray(h)?r(h):h}});function c(d,m){var p=[];if(Array.isArray(d[0])&&Array.isArray(m[0])){if(d.length!==m.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var h=0;h<d.length;h++){if(d[h].length!==m[h].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(f(d[h],m[h]))}return p}else{if(d.length!==m.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,m)}}function f(d,m){var p=d.length,h=a(d),D=a(m),w=d.reduce((g,y,_)=>i(g,l(y,m[_])),0),S=a(d.map(g=>u(g,2))),x=a(m.map(g=>u(g,2))),b=s(l(p,w),l(h,D)),N=n(l(s(l(p,S),u(h,2)),s(l(p,x),u(D,2))));return o(b,N)}}),LE="combinations",yte=["typed"],xte=q(LE,yte,t=>{var{typed:e}=t;return e(LE,{"number, number":qM,"BigNumber, BigNumber":function(n,a){var i=n.constructor,s,l,u=n.minus(a),o=new i(1);if(!zE(n)||!zE(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=o,a.lt(u))for(l=o;l.lte(u);l=l.plus(o))s=s.times(a.plus(l)).dividedBy(l);else for(l=o;l.lte(a);l=l.plus(o))s=s.times(u.plus(l)).dividedBy(l);return s}})});function zE(t){return t.isInteger()&&t.gte(0)}var VE="combinationsWithRep",bte=["typed"],wte=q(VE,bte,t=>{var{typed:e}=t;return e(VE,{"number, number":function(n,a){if(!We(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!We(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<n-1){var i=mi(n,n+a-1);return i/mi(1,a)}var s=mi(a+1,n+a-1);return s/mi(1,n-1)},"BigNumber, BigNumber":function(n,a){var i=n.constructor,s,l,u=new i(1),o=n.minus(u);if(!UE(n)||!UE(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=u,a.lt(o))for(l=u;l.lte(o);l=l.plus(u))s=s.times(a.plus(l)).dividedBy(l);else for(l=u;l.lte(a);l=l.plus(u))s=s.times(o.plus(l)).dividedBy(l);return s}})});function UE(t){return t.isInteger()&&t.gte(0)}var qE="gamma",Nte=["typed","config","multiplyScalar","pow","BigNumber","Complex"],_te=q(qE,Nte,t=>{var{typed:e,config:r,multiplyScalar:n,pow:a,BigNumber:i,Complex:s}=t;function l(o){if(o.im===0)return zm(o.re);if(o.re<.5){var c=new s(1-o.re,-o.im),f=new s(Math.PI*o.re,Math.PI*o.im);return new s(Math.PI).div(f.sin()).div(l(c))}o=new s(o.re-1,o.im);for(var d=new s(Al[0],0),m=1;m<Al.length;++m){var p=new s(Al[m],0);d=d.add(p.div(o.add(m)))}var h=new s(o.re+GM+.5,o.im),D=Math.sqrt(2*Math.PI),w=h.pow(o.add(.5)),S=h.neg().exp();return d.mul(D).mul(w).mul(S)}return e(qE,{number:zm,Complex:l,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new i(1/0):u(c.minus(1));if(!c.isFinite())return new i(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(o){if(o<8)return new i([1,1,2,6,24,120,720,5040][o]);var c=r.precision+(Math.log(o.toNumber())|0),f=i.clone({precision:c});if(o%2===1)return o.times(u(new i(o-1)));for(var d=o,m=new f(o),p=o.toNumber();d>2;)d-=2,p+=d,m=m.times(p);return new i(m.toPrecision(i.precision))}}),HE="lgamma",Ste=["Complex","typed"],Ete=q(HE,Ste,t=>{var{Complex:e,typed:r}=t,n=7,a=7,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return r(HE,{number:Vm,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(o){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(o.isNaN())return new e(NaN,NaN);if(o.im===0)return new e(Vm(o.re),0);if(o.re>=n||Math.abs(o.im)>=a)return l(o);if(o.re<=d){var m=i7(c,o.im)*Math.floor(.5*o.re+.25),p=o.mul(Math.PI).sin().log(),h=s(new e(1-o.re,-o.im));return new e(f,m).sub(p).sub(h)}else return o.im>=0?u(o):u(o.conjugate()).conjugate()}function l(o){for(var c=o.sub(.5).mul(o.log()).sub(o).add(WM),f=new e(1,0).div(o),d=f.div(o),m=i[0],p=i[1],h=2*d.re,D=d.re*d.re+d.im*d.im,w=2;w<8;w++){var S=p;p=-D*m+i[w],m=h*m+S}var x=f.mul(d.mul(m).add(p));return c.add(x)}function u(o){var c=0,f=0,d=o;for(o=o.add(1);o.re<=n;){d=d.mul(o);var m=d.im<0?1:0;m!==0&&f===0&&c++,f=m,o=o.add(1)}return l(o).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),GE="factorial",Ate=["typed","gamma"],Dte=q(GE,Ate,t=>{var{typed:e,gamma:r}=t;return e(GE,{number:function(a){if(a<0)throw new Error("Value must be non-negative");return r(a+1)},BigNumber:function(a){if(a.isNegative())throw new Error("Value must be non-negative");return r(a.plus(1))},"Array | Matrix":e.referToSelf(n=>a=>ut(a,n))})}),WE="kldivergence",Cte=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],Tte=q(WE,Cte,t=>{var{typed:e,matrix:r,divide:n,sum:a,multiply:i,map:s,dotDivide:l,log:u,isNumeric:o}=t;return e(WE,{"Array, Array":function(d,m){return c(r(d),r(m))},"Matrix, Array":function(d,m){return c(d,r(m))},"Array, Matrix":function(d,m){return c(r(d),m)},"Matrix, Matrix":function(d,m){return c(d,m)}});function c(f,d){var m=d.size().length,p=f.size().length;if(m>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(m!==p)throw new Error("Length of two vectors must be equal");var h=a(f);if(h===0)throw new Error("Sum of elements in first object must be non zero");var D=a(d);if(D===0)throw new Error("Sum of elements in second object must be non zero");var w=n(f,a(f)),S=n(d,a(d)),x=a(i(w,s(l(w,S),b=>u(b))));return o(x)?x:Number.NaN}}),QE="multinomial",Mte=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Ite=q(QE,Mte,t=>{var{typed:e,add:r,divide:n,multiply:a,factorial:i,isInteger:s,isPositive:l}=t;return e(QE,{"Array | Matrix":function(o){var c=0,f=1;return Ss(o,function(d){if(!s(d)||!l(d))throw new TypeError("Positive integer value expected in function multinomial");c=r(c,d),f=a(f,i(d))}),n(i(c),f)}})}),XE="permutations",Fte=["typed","factorial"],Pte=q(XE,Fte,t=>{var{typed:e,factorial:r}=t;return e(XE,{"number | BigNumber":r,"number, number":function(a,i){if(!We(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!We(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(i>a)throw new TypeError("second argument k must be less than or equal to first argument n");return mi(a-i+1,a)},"BigNumber, BigNumber":function(a,i){var s,l;if(!KE(a)||!KE(i))throw new TypeError("Positive integer value expected in function permutations");if(i.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var u=a.mul(0).add(1);for(s=u,l=a.minus(i).plus(1);l.lte(a);l=l.plus(1))s=s.times(l);return s}})});function KE(t){return t.isInteger()&&t.gte(0)}var Zy={exports:{}};Zy.exports;(function(t){(function(e,r,n){function a(u){var o=this,c=l();o.next=function(){var f=2091639*o.s0+o.c*23283064365386963e-26;return o.s0=o.s1,o.s1=o.s2,o.s2=f-(o.c=f|0)},o.c=1,o.s0=c(" "),o.s1=c(" "),o.s2=c(" "),o.s0-=c(u),o.s0<0&&(o.s0+=1),o.s1-=c(u),o.s1<0&&(o.s1+=1),o.s2-=c(u),o.s2<0&&(o.s2+=1),c=null}function i(u,o){return o.c=u.c,o.s0=u.s0,o.s1=u.s1,o.s2=u.s2,o}function s(u,o){var c=new a(u),f=o&&o.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function l(){var u=4022871197,o=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return o}r&&r.exports?r.exports=s:this.alea=s})(vo,t)})(Zy);var Rte=Zy.exports,ex={exports:{}};ex.exports;(function(t){(function(e,r,n){function a(l){var u=this,o="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},l===(l|0)?u.x=l:o+=l;for(var c=0;c<o.length+64;c++)u.x^=o.charCodeAt(c)|0,u.next()}function i(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u}function s(l,u){var o=new a(l),c=u&&u.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,p=(d+m)/(1<<21);while(p===0);return p},f.int32=o.next,f.quick=f,c&&(typeof c=="object"&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xor128=s})(vo,t)})(ex);var Ote=ex.exports,tx={exports:{}};tx.exports;(function(t){(function(e,r,n){function a(l){var u=this,o="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,l===(l|0)?u.x=l:o+=l;for(var c=0;c<o.length+64;c++)u.x^=o.charCodeAt(c)|0,c==o.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u.v=l.v,u.d=l.d,u}function s(l,u){var o=new a(l),c=u&&u.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,p=(d+m)/(1<<21);while(p===0);return p},f.int32=o.next,f.quick=f,c&&(typeof c=="object"&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xorwow=s})(vo,t)})(tx);var Bte=tx.exports,rx={exports:{}};rx.exports;(function(t){(function(e,r,n){function a(l){var u=this;u.next=function(){var c=u.x,f=u.i,d,m;return d=c[f],d^=d>>>7,m=d^d<<24,d=c[f+1&7],m^=d^d>>>10,d=c[f+3&7],m^=d^d>>>3,d=c[f+4&7],m^=d^d<<7,d=c[f+7&7],d=d^d<<13,m^=d^d<<9,c[f]=m,u.i=f+1&7,m};function o(c,f){var d,m=[];if(f===(f|0))m[0]=f;else for(f=""+f,d=0;d<f.length;++d)m[d&7]=m[d&7]<<15^f.charCodeAt(d)+m[d+1&7]<<13;for(;m.length<8;)m.push(0);for(d=0;d<8&&m[d]===0;++d);for(d==8?m[7]=-1:m[d],c.x=m,c.i=0,d=256;d>0;--d)c.next()}o(u,l)}function i(l,u){return u.x=l.x.slice(),u.i=l.i,u}function s(l,u){l==null&&(l=+new Date);var o=new a(l),c=u&&u.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,p=(d+m)/(1<<21);while(p===0);return p},f.int32=o.next,f.quick=f,c&&(c.x&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xorshift7=s})(vo,t)})(rx);var jte=rx.exports,nx={exports:{}};nx.exports;(function(t){(function(e,r,n){function a(l){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,m,p;return u.w=c=c+1640531527|0,p=f[d+34&127],m=f[d=d+1&127],p^=p<<13,m^=m<<17,p^=p>>>15,m^=m>>>12,p=f[d]=p^m,u.i=d,p+(c^c>>>16)|0};function o(c,f){var d,m,p,h,D,w=[],S=128;for(f===(f|0)?(m=f,f=null):(f=f+"\0",m=0,S=Math.max(S,f.length)),p=0,h=-32;h<S;++h)f&&(m^=f.charCodeAt((h+32)%f.length)),h===0&&(D=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,h>=0&&(D=D+1640531527|0,d=w[h&127]^=m+D,p=d==0?p+1:0);for(p>=128&&(w[(f&&f.length||0)&127]=-1),p=127,h=4*128;h>0;--h)m=w[p+34&127],d=w[p=p+1&127],m^=m<<13,d^=d<<17,m^=m>>>15,d^=d>>>12,w[p]=m^d;c.w=D,c.X=w,c.i=p}o(u,l)}function i(l,u){return u.i=l.i,u.w=l.w,u.X=l.X.slice(),u}function s(l,u){l==null&&(l=+new Date);var o=new a(l),c=u&&u.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,p=(d+m)/(1<<21);while(p===0);return p},f.int32=o.next,f.quick=f,c&&(c.X&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.xor4096=s})(vo,t)})(nx);var kte=nx.exports,ax={exports:{}};ax.exports;(function(t){(function(e,r,n){function a(l){var u=this,o="";u.next=function(){var f=u.b,d=u.c,m=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-m|0,m=m<<24^m>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-m|0,u.d=m<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,l===Math.floor(l)?(u.a=l/4294967296|0,u.b=l|0):o+=l;for(var c=0;c<o.length+20;c++)u.b^=o.charCodeAt(c)|0,u.next()}function i(l,u){return u.a=l.a,u.b=l.b,u.c=l.c,u.d=l.d,u}function s(l,u){var o=new a(l),c=u&&u.state,f=function(){return(o.next()>>>0)/4294967296};return f.double=function(){do var d=o.next()>>>11,m=(o.next()>>>0)/4294967296,p=(d+m)/(1<<21);while(p===0);return p},f.int32=o.next,f.quick=f,c&&(typeof c=="object"&&i(c,o),f.state=function(){return i(o,{})}),f}r&&r.exports?r.exports=s:this.tychei=s})(vo,t)})(ax);var $te=ax.exports,W4={exports:{}};const Lte={},zte=Object.freeze(Object.defineProperty({__proto__:null,default:Lte},Symbol.toStringTag,{value:"Module"})),Vte=gP(zte);(function(t){(function(e,r,n){var a=256,i=6,s=52,l="random",u=n.pow(a,i),o=n.pow(2,s),c=o*2,f=a-1,d;function m(b,N,g){var y=[];N=N==!0?{entropy:!0}:N||{};var _=w(D(N.entropy?[b,x(r)]:b??S(),3),y),E=new p(y),C=function(){for(var T=E.g(i),M=u,I=0;T<o;)T=(T+I)*a,M*=a,I=E.g(1);for(;T>=c;)T/=2,M/=2,I>>>=1;return(T+I)/M};return C.int32=function(){return E.g(4)|0},C.quick=function(){return E.g(4)/4294967296},C.double=C,w(x(E.S),r),(N.pass||g||function(T,M,I,j){return j&&(j.S&&h(j,E),T.state=function(){return h(E,{})}),I?(n[l]=T,M):T})(C,_,"global"in N?N.global:this==n,N.state)}function p(b){var N,g=b.length,y=this,_=0,E=y.i=y.j=0,C=y.S=[];for(g||(b=[g++]);_<a;)C[_]=_++;for(_=0;_<a;_++)C[_]=C[E=f&E+b[_%g]+(N=C[_])],C[E]=N;(y.g=function(T){for(var M,I=0,j=y.i,O=y.j,P=y.S;T--;)M=P[j=f&j+1],I=I*a+P[f&(P[j]=P[O=f&O+M])+(P[O]=M)];return y.i=j,y.j=O,I})(a)}function h(b,N){return N.i=b.i,N.j=b.j,N.S=b.S.slice(),N}function D(b,N){var g=[],y=typeof b,_;if(N&&y=="object")for(_ in b)try{g.push(D(b[_],N-1))}catch{}return g.length?g:y=="string"?b:b+"\0"}function w(b,N){for(var g=b+"",y,_=0;_<g.length;)N[f&_]=f&(y^=N[f&_]*19)+g.charCodeAt(_++);return x(N)}function S(){try{var b;return d&&(b=d.randomBytes)?b=b(a):(b=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var N=e.navigator,g=N&&N.plugins;return[+new Date,e,g,e.screen,x(r)]}}function x(b){return String.fromCharCode.apply(0,b)}if(w(n.random(),r),t.exports){t.exports=m;try{d=Vte}catch{}}else n["seed"+l]=m})(typeof self<"u"?self:vo,[],Math)})(W4);var Ute=W4.exports,qte=Rte,Hte=Ote,Gte=Bte,Wte=jte,Qte=kte,Xte=$te,Co=Ute;Co.alea=qte;Co.xor128=Hte;Co.xorwow=Gte;Co.xorshift7=Wte;Co.xor4096=Qte;Co.tychei=Xte;var Kte=Co;const Q4=eh(Kte);var Jte=Q4(Date.now());function Gl(t){var e;function r(a){e=a===null?Jte:Q4(String(a))}r(t);function n(){return e()}return n}var JE="pickRandom",Yte=["typed","config","?on"],Zte=q(JE,Yte,t=>{var{typed:e,config:r,on:n}=t,a=Gl(r.randomSeed);return n&&n("config",function(s,l){s.randomSeed!==l.randomSeed&&(a=Gl(s.randomSeed))}),e(JE,{"Array | Matrix":function(l){return i(l,{})},"Array | Matrix, Object":function(l,u){return i(l,u)},"Array | Matrix, number":function(l,u){return i(l,{number:u})},"Array | Matrix, Array | Matrix":function(l,u){return i(l,{weights:u})},"Array | Matrix, Array | Matrix, number":function(l,u,o){return i(l,{number:o,weights:u})},"Array | Matrix, number, Array | Matrix":function(l,u,o){return i(l,{number:u,weights:o})}});function i(s,l){var{number:u,weights:o,elementWise:c=!0}=l,f=typeof u>"u";f&&(u=1);var d=Ye(s)?s.create:Ye(o)?o.create:null;s=s.valueOf(),o&&(o=o.valueOf()),c===!0&&(s=Ct(s),o=Ct(o));var m=0;if(typeof o<"u"){if(o.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var p=0,h=o.length;p<h;p++){if(!Xe(o[p])||o[p]<0)throw new Error("Weights must be an array of positive numbers");m+=o[p]}}for(var D=s.length,w=[],S;w.length<u;){if(typeof o>"u")S=s[Math.floor(a()*D)];else for(var x=a()*m,b=0,N=s.length;b<N;b++)if(x-=o[b],x<0){S=s[b];break}w.push(S)}return f?w[0]:d?d(w):w}});function ix(t,e){var r=[];if(t=t.slice(0),t.length>1)for(var n=0,a=t.shift();n<a;n++)r.push(ix(t,e));else for(var i=0,s=t.shift();i<s;i++)r.push(e());return r}var YE="random",ere=["typed","config","?on"],tre=q(YE,ere,t=>{var{typed:e,config:r,on:n}=t,a=Gl(r.randomSeed);return n&&n("config",function(l,u){l.randomSeed!==u.randomSeed&&(a=Gl(l.randomSeed))}),e(YE,{"":()=>s(0,1),number:l=>s(0,l),"number, number":(l,u)=>s(l,u),"Array | Matrix":l=>i(l,0,1),"Array | Matrix, number":(l,u)=>i(l,0,u),"Array | Matrix, number, number":(l,u,o)=>i(l,u,o)});function i(l,u,o){var c=ix(l.valueOf(),()=>s(u,o));return Ye(l)?l.create(c,"number"):c}function s(l,u){return l+a()*(u-l)}}),ZE="randomInt",rre=["typed","config","log2","?on"],nre=q(ZE,rre,t=>{var{typed:e,config:r,log2:n,on:a}=t,i=Gl(r.randomSeed);return a&&a("config",function(o,c){o.randomSeed!==c.randomSeed&&(i=Gl(o.randomSeed))}),e(ZE,{"":()=>l(0,2),number:o=>l(0,o),"number, number":(o,c)=>l(o,c),bigint:o=>u(0n,o),"bigint, bigint":u,"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,c)=>s(o,0,c),"Array | Matrix, number, number":(o,c,f)=>s(o,c,f)});function s(o,c,f){var d=ix(o.valueOf(),()=>l(c,f));return Ye(o)?o.create(d,"number"):d}function l(o,c){return Math.floor(o+i()*(c-o))}function u(o,c){var f=2n**30n,d=c-o;if(d<=f)return o+BigInt(l(0,Number(d)));for(var m=n(d),p=d;p>=d;){p=0n;for(var h=0;h<m;++h)p=2n*p+(i()<.5?0n:1n)}return o+p}}),eA="stirlingS2",are=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],ire=q(eA,are,t=>{var{typed:e,addScalar:r,subtractScalar:n,multiplyScalar:a,divideScalar:i,pow:s,factorial:l,combinations:u,isNegative:o,isInteger:c,number:f,bignumber:d,larger:m}=t,p=[],h=[];return e(eA,{"number | BigNumber, number | BigNumber":function(w,S){if(!c(w)||o(w)||!c(S)||o(S))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(m(S,w))throw new TypeError("k must be less than or equal to n in function stirlingS2");var x=!(Xe(w)&&Xe(S)),b=x?h:p,N=x?d:f,g=f(w),y=f(S);if(b[g]&&b[g].length>y)return b[g][y];for(var _=0;_<=g;++_)if(b[_]||(b[_]=[N(_===0?1:0)]),_!==0)for(var E=b[_],C=b[_-1],T=E.length;T<=_&&T<=y;++T)T===_?E[T]=1:E[T]=r(a(N(T),C[T]),C[T-1]);return b[g][y]}})}),tA="bellNumbers",sre=["typed","addScalar","isNegative","isInteger","stirlingS2"],ore=q(tA,sre,t=>{var{typed:e,addScalar:r,isNegative:n,isInteger:a,stirlingS2:i}=t;return e(tA,{"number | BigNumber":function(l){if(!a(l)||n(l))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,o=0;o<=l;o++)u=r(u,i(l,o));return u}})}),rA="catalan",lre=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],ure=q(rA,lre,t=>{var{typed:e,addScalar:r,divideScalar:n,multiplyScalar:a,combinations:i,isNegative:s,isInteger:l}=t;return e(rA,{"number | BigNumber":function(o){if(!l(o)||s(o))throw new TypeError("Non-negative integer value expected in function catalan");return n(i(a(o,2),o),r(o,1))}})}),nA="composition",cre=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],fre=q(nA,cre,t=>{var{typed:e,addScalar:r,combinations:n,isPositive:a,isNegative:i,isInteger:s,larger:l}=t;return e(nA,{"number | BigNumber, number | BigNumber":function(o,c){if(!s(o)||!a(o)||!s(c)||!a(c))throw new TypeError("Positive integer value expected in function composition");if(l(c,o))throw new TypeError("k must be less than or equal to n in function composition");return n(r(o,-1),r(c,-1))}})}),aA="leafCount",dre=["parse","typed"],mre=q(aA,dre,t=>{var{parse:e,typed:r}=t;function n(a){var i=0;return a.forEach(s=>{i+=n(s)}),i||1}return r(aA,{Node:function(i){return n(i)}})});function iA(t){return Nt(t)||br(t)&&t.isUnary()&&Nt(t.args[0])}function Ym(t){return!!(Nt(t)||(ws(t)||br(t))&&t.args.every(Ym)||Si(t)&&Ym(t.content))}function sA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sA(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var hre="simplifyUtil",pre=["FunctionNode","OperatorNode","SymbolNode"],sx=q(hre,pre,t=>{var{FunctionNode:e,OperatorNode:r,SymbolNode:n}=t,a=!0,i=!1,s="defaultF",l={add:{trivial:a,total:a,commutative:a,associative:a},unaryPlus:{trivial:a,total:a,commutative:a,associative:a},subtract:{trivial:i,total:a,commutative:i,associative:i},multiply:{trivial:a,total:a,commutative:a,associative:a},divide:{trivial:i,total:a,commutative:i,associative:i},paren:{trivial:a,total:a,commutative:a,associative:i},defaultF:{trivial:i,total:a,commutative:i,associative:i}},u={divide:{total:i},log:{total:i}},o={subtract:{total:i},abs:{trivial:a},log:{total:a}};function c(x,b){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l,g=s;if(typeof x=="string"?g=x:br(x)?g=x.fn.toString():ws(x)?g=x.name:Si(x)&&(g="paren"),He(N,g)){var y=N[g];if(He(y,b))return y[b];if(He(l,g))return l[g][b]}if(He(N,s)){var _=N[s];return He(_,b)?_[b]:l[s][b]}if(He(l,g)){var E=l[g];if(He(E,b))return E[b]}return l[s][b]}function f(x){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l;return c(x,"commutative",b)}function d(x){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l;return c(x,"associative",b)}function m(x,b){var N=fv({},x);for(var g in b)He(x,g)?N[g]=fv(fv({},b[g]),x[g]):N[g]=b[g];return N}function p(x,b){if(!x.args||x.args.length===0)return x;x.args=h(x,b);for(var N=0;N<x.args.length;N++)p(x.args[N],b)}function h(x,b){var N,g=[],y=function(E){for(var C=0;C<E.args.length;C++){var T=E.args[C];br(T)&&N===T.op?y(T):g.push(T)}};return d(x,b)?(N=x.op,y(x),g):x.args}function D(x,b){if(!(!x.args||x.args.length===0)){for(var N=S(x),g=x.args.length,y=0;y<g;y++)D(x.args[y],b);if(g>2&&d(x,b)){for(var _=x.args.pop();x.args.length>0;)_=N([x.args.pop(),_]);x.args=_.args}}}function w(x,b){if(!(!x.args||x.args.length===0)){for(var N=S(x),g=x.args.length,y=0;y<g;y++)w(x.args[y],b);if(g>2&&d(x,b)){for(var _=x.args.shift();x.args.length>0;)_=N([_,x.args.shift()]);x.args=_.args}}}function S(x){return br(x)?function(b){try{return new r(x.op,x.fn,b,x.implicit)}catch(N){return console.error(N),[]}}:function(b){return new e(new n(x.name),b)}}return{createMakeNodeFunction:S,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:m,flatten:p,allChildren:h,unflattenr:D,unflattenl:w,defaultContext:l,realContext:u,positiveContext:o}}),vre="simplify",gre=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],yre=q(vre,gre,t=>{var{typed:e,parse:r,equal:n,resolve:a,simplifyConstant:i,simplifyCore:s,AccessorNode:l,ArrayNode:u,ConstantNode:o,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:m,ParenthesisNode:p,SymbolNode:h,replacer:D}=t,{hasProperty:w,isCommutative:S,isAssociative:x,mergeContext:b,flatten:N,unflattenr:g,unflattenl:y,createMakeNodeFunction:_,defaultContext:E,realContext:C,positiveContext:T}=sx({FunctionNode:c,OperatorNode:m,SymbolNode:h});e.addConversion({from:"Object",to:"Map",convert:Sl});var M=e("simplify",{Node:z,"Node, Map":(W,K)=>z(W,!1,K),"Node, Map, Object":(W,K,ee)=>z(W,!1,K,ee),"Node, Array":z,"Node, Array, Map":z,"Node, Array, Map, Object":z});e.removeConversion({from:"Object",to:"Map",convert:Sl}),M.defaultContext=E,M.realContext=C,M.positiveContext=T;function I(W){return W.transform(function(K){return Si(K)?I(K.content):K})}var j={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};M.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},i,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},i,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function O(W,K){var ee={};if(W.s){var ie=W.s.split("->");if(ie.length===2)ee.l=ie[0],ee.r=ie[1];else throw SyntaxError("Could not parse rule: "+W.s)}else ee.l=W.l,ee.r=W.r;ee.l=I(r(ee.l)),ee.r=I(r(ee.r));for(var oe of["imposeContext","repeat","assuming"])oe in W&&(ee[oe]=W[oe]);if(W.evaluate&&(ee.evaluate=r(W.evaluate)),x(ee.l,K)){var pe=!S(ee.l,K),me;pe&&(me=$());var Te=_(ee.l),ke=$();ee.expanded={},ee.expanded.l=Te([ee.l,ke]),N(ee.expanded.l,K),g(ee.expanded.l,K),ee.expanded.r=Te([ee.r,ke]),pe&&(ee.expandedNC1={},ee.expandedNC1.l=Te([me,ee.l]),ee.expandedNC1.r=Te([me,ee.r]),ee.expandedNC2={},ee.expandedNC2.l=Te([me,ee.expanded.l]),ee.expandedNC2.r=Te([me,ee.expanded.r]))}return ee}function P(W,K){for(var ee=[],ie=0;ie<W.length;ie++){var oe=W[ie],pe=void 0,me=typeof oe;switch(me){case"string":oe={s:oe};case"object":pe=O(oe,K);break;case"function":pe=oe;break;default:throw TypeError("Unsupported type of rule: "+me)}ee.push(pe)}return ee}var H=0;function $(){return new h("_p"+H++)}function z(W,K){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uc(),ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},oe=ie.consoleDebug;K=P(K||M.rules,ie.context);var pe=a(W,ee);pe=I(pe);for(var me={},Te=pe.toString({parenthesis:"all"});!me[Te];){me[Te]=!0,H=0;var ke=Te;oe&&console.log("Working on: ",Te);for(var ze=0;ze<K.length;ze++){var Oe="";if(typeof K[ze]=="function"?(pe=K[ze](pe,ie),oe&&(Oe=K[ze].name)):(N(pe,ie.context),pe=ae(pe,K[ze],ie.context),oe&&(Oe="".concat(K[ze].l.toString()," -> ").concat(K[ze].r.toString()))),oe){var $e=pe.toString({parenthesis:"all"});$e!==ke&&(console.log("Applying",Oe,"produced",$e),ke=$e)}y(pe,ie.context)}Te=pe.toString({parenthesis:"all"})}return pe}function X(W,K,ee){var ie=W;if(W)for(var oe=0;oe<W.length;++oe){var pe=ae(W[oe],K,ee);pe!==W[oe]&&(ie===W&&(ie=W.slice()),ie[oe]=pe)}return ie}function ae(W,K,ee){if(K.assuming){for(var ie in K.assuming)for(var oe in K.assuming[ie])if(w(ie,oe,ee)!==K.assuming[ie][oe])return W}var pe=b(K.imposeContext,ee),me=W;if(me instanceof m||me instanceof c){var Te=X(me.args,K,ee);Te!==me.args&&(me=me.clone(),me.args=Te)}else if(me instanceof p){if(me.content){var ke=ae(me.content,K,ee);ke!==me.content&&(me=new p(ke))}}else if(me instanceof u){var ze=X(me.items,K,ee);ze!==me.items&&(me=new u(ze))}else if(me instanceof l){var Oe=me.object;me.object&&(Oe=ae(me.object,K,ee));var $e=me.index;me.index&&($e=ae(me.index,K,ee)),(Oe!==me.object||$e!==me.index)&&(me=new l(Oe,$e))}else if(me instanceof f){var G=X(me.dimensions,K,ee);G!==me.dimensions&&(me=new f(G))}else if(me instanceof d){var te=!1,ce={};for(var L in me.properties)ce[L]=ae(me.properties[L],K,ee),ce[L]!==me.properties[L]&&(te=!0);te&&(me=new d(ce))}var J=K.r,re=le(K.l,me,pe)[0];if(!re&&K.expanded&&(J=K.expanded.r,re=le(K.expanded.l,me,pe)[0]),!re&&K.expandedNC1&&(J=K.expandedNC1.r,re=le(K.expandedNC1.l,me,pe)[0],re||(J=K.expandedNC2.r,re=le(K.expandedNC2.l,me,pe)[0])),re){var se=me.implicit;me=J.clone(),se&&"implicit"in J&&(me.implicit=!0),me=me.transform(function(ue){return ue.isSymbolNode&&He(re.placeholders,ue.name)?re.placeholders[ue.name].clone():ue})}return K.repeat&&me!==W&&(me=ae(me,K,ee)),me}function k(W,K){var ee=[],ie,oe,pe=_(W);if(S(W,K))for(var me=0;me<W.args.length;me++)oe=W.args.slice(0),oe.splice(me,1),ie=oe.length===1?oe[0]:pe(oe),ee.push(pe([W.args[me],ie]));else for(var Te=1;Te<W.args.length;Te++){var ke=W.args[0];Te>1&&(ke=pe(W.args.slice(0,Te))),oe=W.args.slice(Te),ie=oe.length===1?oe[0]:pe(oe),ee.push(pe([ke,ie]))}return ee}function Y(W,K){var ee={placeholders:{}};if(!W.placeholders&&!K.placeholders)return ee;if(W.placeholders){if(!K.placeholders)return W}else return K;for(var ie in W.placeholders)if(He(W.placeholders,ie)&&(ee.placeholders[ie]=W.placeholders[ie],He(K.placeholders,ie)&&!fe(W.placeholders[ie],K.placeholders[ie])))return null;for(var oe in K.placeholders)He(K.placeholders,oe)&&(ee.placeholders[oe]=K.placeholders[oe]);return ee}function V(W,K){var ee=[];if(W.length===0||K.length===0)return ee;for(var ie,oe=0;oe<W.length;oe++)for(var pe=0;pe<K.length;pe++)ie=Y(W[oe],K[pe]),ie&&ee.push(ie);return ee}function ye(W){if(W.length===0)return W;for(var K=W.reduce(V),ee=[],ie={},oe=0;oe<K.length;oe++){var pe=JSON.stringify(K[oe],D);ie[pe]||(ie[pe]=!0,ee.push(K[oe]))}return ee}function le(W,K,ee,ie){var oe=[{placeholders:{}}];if(W instanceof m&&K instanceof m||W instanceof c&&K instanceof c){if(W instanceof m){if(W.op!==K.op||W.fn!==K.fn)return[]}else if(W instanceof c&&W.name!==K.name)return[];if(K.args.length===1&&W.args.length===1||!x(K,ee)&&K.args.length===W.args.length||ie){for(var pe=[],me=0;me<W.args.length;me++){var Te=le(W.args[me],K.args[me],ee);if(Te.length===0)break;pe.push(Te)}if(pe.length!==W.args.length){if(!S(K,ee)||W.args.length===1)return[];if(W.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var ke=le(W.args[0],K.args[1],ee);if(ke.length===0)return[];var ze=le(W.args[1],K.args[0],ee);if(ze.length===0)return[];pe=[ke,ze]}oe=ye(pe)}else if(K.args.length>=2&&W.args.length===2){for(var Oe=k(K,ee),$e=[],G=0;G<Oe.length;G++){var te=le(W,Oe[G],ee,!0);$e=$e.concat(te)}return $e}else{if(W.args.length>2)throw Error("Unexpected non-binary associative function: "+W.toString());return[]}}else if(W instanceof h){if(W.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(j[W.name]){if(W.name!==K.name)return[]}else switch(W.name[1]>="a"&&W.name[1]<="z"?W.name.substring(0,2):W.name[0]){case"n":case"_p":oe[0].placeholders[W.name]=K;break;case"c":case"cl":if(Nt(K))oe[0].placeholders[W.name]=K;else return[];break;case"v":if(!Nt(K))oe[0].placeholders[W.name]=K;else return[];break;case"vl":if(Qr(K))oe[0].placeholders[W.name]=K;else return[];break;case"cd":if(iA(K))oe[0].placeholders[W.name]=K;else return[];break;case"vd":if(!iA(K))oe[0].placeholders[W.name]=K;else return[];break;case"ce":if(Ym(K))oe[0].placeholders[W.name]=K;else return[];break;case"ve":if(!Ym(K))oe[0].placeholders[W.name]=K;else return[];break;default:throw new Error("Invalid symbol in rule: "+W.name)}}else if(W instanceof o){if(!n(W.value,K.value))return[]}else return[];return oe}function fe(W,K){if(W instanceof o&&K instanceof o){if(!n(W.value,K.value))return!1}else if(W instanceof h&&K instanceof h){if(W.name!==K.name)return!1}else if(W instanceof m&&K instanceof m||W instanceof c&&K instanceof c){if(W instanceof m){if(W.op!==K.op||W.fn!==K.fn)return!1}else if(W instanceof c&&W.name!==K.name)return!1;if(W.args.length!==K.args.length)return!1;for(var ee=0;ee<W.args.length;ee++)if(!fe(W.args[ee],K.args[ee]))return!1}else return!1;return!0}return M}),xre="simplifyConstant",bre=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],wre=q(xre,bre,t=>{var{typed:e,config:r,mathWithTransform:n,matrix:a,fraction:i,bignumber:s,AccessorNode:l,ArrayNode:u,ConstantNode:o,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:m,SymbolNode:p}=t,{isCommutative:h,isAssociative:D,allChildren:w,createMakeNodeFunction:S}=sx({FunctionNode:c,OperatorNode:m,SymbolNode:p}),x=e("simplifyConstant",{Node:O=>y(j(O,{})),"Node, Object":function(P,H){return y(j(P,H))}});function b(O){return of(O)?O.valueOf():O instanceof Array?O.map(b):Ye(O)?a(b(O.valueOf())):O}function N(O,P,H){try{return n[O].apply(null,P)}catch{return P=P.map(b),E(n[O].apply(null,P),H)}}var g=e({Fraction:T,number:function(P){return P<0?C(new o(-P)):new o(P)},BigNumber:function(P){return P<0?C(new o(-P)):new o(P)},bigint:function(P){return P<0n?C(new o(-P)):new o(P)},Complex:function(P){throw new Error("Cannot convert Complex number to Node")},string:function(P){return new o(P)},Matrix:function(P){return new u(P.valueOf().map(H=>g(H)))}});function y(O){return Ht(O)?O:g(O)}function _(O,P){var H=P&&P.exactFractions!==!1;if(H&&isFinite(O)&&i){var $=i(O),z=P&&typeof P.fractionsLimit=="number"?P.fractionsLimit:1/0;if($.valueOf()===O&&$.n<z&&$.d<z)return $}return O}var E=e({"string, Object":function(P,H){var $=Cs(P,r);if($==="BigNumber")return s===void 0&&Xy(),s(P);if($==="bigint")return BigInt(P);if($==="Fraction")return i===void 0&&D4(),i(P);var z=parseFloat(P);return _(z,H)},"Fraction, Object":function(P,H){return P},"BigNumber, Object":function(P,H){return P},"number, Object":function(P,H){return _(P,H)},"bigint, Object":function(P,H){return P},"Complex, Object":function(P,H){return P.im!==0?P:_(P.re,H)},"Matrix, Object":function(P,H){return a(_(P.valueOf()))},"Array, Object":function(P,H){return P.map(_)}});function C(O){return new m("-","unaryMinus",[O])}function T(O){var P=z=>r.number==="BigNumber"&&s?s(z):Number(z),H=O.s*O.n,$=H<0n?new m("-","unaryMinus",[new o(-P(H))]):new o(P(H));return O.d===1n?$:new m("/","divide",[$,new o(P(O.d))])}function M(O,P,H){if(!iu(P))return new l(y(O),y(P));if(ia(O)||Ye(O)){for(var $=Array.from(P.dimensions);$.length>0;)if(Nt($[0])&&typeof $[0].value!="string"){var z=E($.shift().value,H);ia(O)?O=O.items[z-1]:(O=O.valueOf()[z-1],O instanceof Array&&(O=a(O)))}else if($.length>1&&Nt($[1])&&typeof $[1].value!="string"){var X=E($[1].value,H),ae=[],k=ia(O)?O.items:O.valueOf();for(var Y of k)if(ia(Y))ae.push(Y.items[X-1]);else if(Ye(O))ae.push(Y[X-1]);else break;if(ae.length===k.length)ia(O)?O=new u(ae):O=a(ae),$.splice(1,1);else break}else break;return $.length===P.dimensions.length?new l(y(O),P):$.length>0?(P=new f($),new l(y(O),P)):O}if(Bh(O)&&P.dimensions.length===1&&Nt(P.dimensions[0])){var V=P.dimensions[0].value;return V in O.properties?O.properties[V]:new o}return new l(y(O),P)}function I(O,P,H,$){var z=P.shift(),X=P.reduce((ae,k)=>{if(!Ht(k)){var Y=ae.pop();if(Ht(Y))return[Y,k];try{return ae.push(N(O,[Y,k],$)),ae}catch{ae.push(Y)}}ae.push(y(ae.pop()));var V=ae.length===1?ae[0]:H(ae);return[H([V,y(k)])]},[z]);return X.length===1?X[0]:H([X[0],g(X[1])])}function j(O,P){switch(O.type){case"SymbolNode":return O;case"ConstantNode":switch(typeof O.value){case"number":return E(O.value,P);case"bigint":return E(O.value,P);case"string":return O.value;default:if(!isNaN(O.value))return E(O.value,P)}return O;case"FunctionNode":if(n[O.name]&&n[O.name].rawArgs)return O;{var H=["add","multiply"];if(!H.includes(O.name)){var $=O.args.map(ie=>j(ie,P));if(!$.some(Ht))try{return N(O.name,$,P)}catch{}if(O.name==="size"&&$.length===1&&ia($[0])){for(var z=[],X=$[0];ia(X);)z.push(X.items.length),X=X.items[0];return a(z)}return new c(O.name,$.map(y))}}case"OperatorNode":{var ae=O.fn.toString(),k,Y,V=S(O);if(br(O)&&O.isUnary())k=[j(O.args[0],P)],Ht(k[0])?Y=V(k):Y=N(ae,k,P);else if(D(O,P.context))if(k=w(O,P.context),k=k.map(ie=>j(ie,P)),h(ae,P.context)){for(var ye=[],le=[],fe=0;fe<k.length;fe++)Ht(k[fe])?le.push(k[fe]):ye.push(k[fe]);ye.length>1?(Y=I(ae,ye,V,P),le.unshift(Y),Y=I(ae,le,V,P)):Y=I(ae,k,V,P)}else Y=I(ae,k,V,P);else k=O.args.map(ie=>j(ie,P)),Y=I(ae,k,V,P);return Y}case"ParenthesisNode":return j(O.content,P);case"AccessorNode":return M(j(O.object,P),j(O.index,P),P);case"ArrayNode":{var W=O.items.map(ie=>j(ie,P));return W.some(Ht)?new u(W.map(y)):a(W)}case"IndexNode":return new f(O.dimensions.map(ie=>x(ie,P)));case"ObjectNode":{var K={};for(var ee in O.properties)K[ee]=x(O.properties[ee],P);return new d(K)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(O.type))}}return x}),oA="simplifyCore",Nre=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],_re=q(oA,Nre,t=>{var{typed:e,parse:r,equal:n,isZero:a,add:i,subtract:s,multiply:l,divide:u,pow:o,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:m,IndexNode:p,ObjectNode:h,OperatorNode:D,ParenthesisNode:w,SymbolNode:S}=t,x=new d(0),b=new d(1),N=new d(!0),g=new d(!1);function y(T){return br(T)&&["and","not","or"].includes(T.op)}var{hasProperty:_,isCommutative:E}=sx({FunctionNode:m,OperatorNode:D,SymbolNode:S});function C(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=M?M.context:void 0;if(_(T,"trivial",I)){if(ws(T)&&T.args.length===1)return C(T.args[0],M);var j=!1,O=0;if(T.forEach(le=>{++O,O===1&&(j=C(le,M))}),O===1)return j}var P=T;if(ws(P)){var H=yQ(P.name);if(H){if(P.args.length>2&&_(P,"associative",I))for(;P.args.length>2;){var $=P.args.pop(),z=P.args.pop();P.args.push(new D(H,P.name,[$,z]))}P=new D(H,P.name,P.args)}else return new m(C(P.fn),P.args.map(le=>C(le,M)))}if(br(P)&&P.isUnary()){var X=C(P.args[0],M);if(P.op==="~"&&br(X)&&X.isUnary()&&X.op==="~"||P.op==="not"&&br(X)&&X.isUnary()&&X.op==="not"&&y(X.args[0]))return X.args[0];var ae=!0;if(P.op==="-"&&br(X)&&(X.isBinary()&&X.fn==="subtract"&&(P=new D("-","subtract",[X.args[1],X.args[0]]),ae=!1),X.isUnary()&&X.op==="-"))return X.args[0];if(ae)return new D(P.op,P.fn,[X])}if(br(P)&&P.isBinary()){var k=C(P.args[0],M),Y=C(P.args[1],M);if(P.op==="+"){if(Nt(k)&&a(k.value))return Y;if(Nt(Y)&&a(Y.value))return k;br(Y)&&Y.isUnary()&&Y.op==="-"&&(Y=Y.args[0],P=new D("-","subtract",[k,Y]))}if(P.op==="-")return br(Y)&&Y.isUnary()&&Y.op==="-"?C(new D("+","add",[k,Y.args[0]]),M):Nt(k)&&a(k.value)?C(new D("-","unaryMinus",[Y])):Nt(Y)&&a(Y.value)?k:new D(P.op,P.fn,[k,Y]);if(P.op==="*"){if(Nt(k)){if(a(k.value))return x;if(n(k.value,1))return Y}if(Nt(Y)){if(a(Y.value))return x;if(n(Y.value,1))return k;if(E(P,I))return new D(P.op,P.fn,[Y,k],P.implicit)}return new D(P.op,P.fn,[k,Y],P.implicit)}if(P.op==="/")return Nt(k)&&a(k.value)?x:Nt(Y)&&n(Y.value,1)?k:new D(P.op,P.fn,[k,Y]);if(P.op==="^"&&Nt(Y)){if(a(Y.value))return b;if(n(Y.value,1))return k}if(P.op==="and"){if(Nt(k))if(k.value){if(y(Y))return Y;if(Nt(Y))return Y.value?N:g}else return g;if(Nt(Y))if(Y.value){if(y(k))return k}else return g}if(P.op==="or"){if(Nt(k)){if(k.value)return N;if(y(Y))return Y}if(Nt(Y)){if(Y.value)return N;if(y(k))return k}}return new D(P.op,P.fn,[k,Y])}if(br(P))return new D(P.op,P.fn,P.args.map(le=>C(le,M)));if(ia(P))return new f(P.items.map(le=>C(le,M)));if(ho(P))return new c(C(P.object,M),C(P.index,M));if(iu(P))return new p(P.dimensions.map(le=>C(le,M)));if(Bh(P)){var V={};for(var ye in P.properties)V[ye]=C(P.properties[ye],M);return new h(V)}return P}return e(oA,{Node:C,"Node,Object":C})}),Sre="resolve",Ere=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],Are=q(Sre,Ere,t=>{var{typed:e,parse:r,ConstantNode:n,FunctionNode:a,OperatorNode:i,ParenthesisNode:s}=t;function l(u,o){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!o)return u;if(Qr(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=o.get(u.name);if(Ht(d)){var m=new Set(c);return m.add(u.name),l(d,o,m)}else return typeof d=="number"?r(String(d)):d!==void 0?new n(d):u}else if(br(u)){var p=u.args.map(function(D){return l(D,o,c)});return new i(u.op,u.fn,p,u.implicit)}else{if(Si(u))return new s(l(u.content,o,c));if(ws(u)){var h=u.args.map(function(D){return l(D,o,c)});return new a(u.name,h)}}return u.map(D=>l(D,o,c))}return e("resolve",{Node:l,"Node, Map | null | undefined":l,"Node, Object":(u,o)=>l(u,Sl(o)),"Array | Matrix":e.referToSelf(u=>o=>o.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>o=>o.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(o,c)=>u(o,Sl(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(o,c)=>u(o,Sl(c))),"Array | Matrix, Map":e.referToSelf(u=>(o,c)=>o.map(f=>u(f,c)))})}),lA="symbolicEqual",Dre=["parse","simplify","typed","OperatorNode"],Cre=q(lA,Dre,t=>{var{parse:e,simplify:r,typed:n,OperatorNode:a}=t;function i(s,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=new a("-","subtract",[s,l]),c=r(o,{},u);return Nt(c)&&!c.value}return n(lA,{"Node, Node":i,"Node, Node, Object":i})}),uA="derivative",Tre=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Mre=q(uA,Tre,t=>{var{typed:e,config:r,parse:n,simplify:a,equal:i,isZero:s,numeric:l,ConstantNode:u,FunctionNode:o,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function m(b,N){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},y=new Map,_=N.name;function E(T){var M=y.get(T);if(M!==void 0)return M;var I=w(E,T,_);return y.set(T,I),I}var C=S(b,E);return g.simplify?a(C):C}function p(b){var N=n(b);if(!N.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(b)," into a variable in function derivative"));return N}var h=e(uA,{"Node, SymbolNode":m,"Node, SymbolNode, Object":m,"Node, string":(b,N)=>m(b,p(N)),"Node, string, Object":(b,N,g)=>m(b,p(N),g)});h._simplify=!0,h.toTex=function(b){return D.apply(null,b.args)};var D=e("_derivTex",{"Node, SymbolNode":function(N,g){return Nt(N)&&Xt(N.value)==="string"?D(n(N.value).toString(),g.toString(),1):D(N.toTex(),g.toString(),1)},"Node, ConstantNode":function(N,g){if(Xt(g.value)==="string")return D(N,n(g.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(N,g,y){return D(N.toString(),g.name,y.value)},"string, string, number":function(N,g,y){var _;return y===1?_="{d\\over d"+g+"}":_="{d^{"+y+"}\\over d"+g+"^{"+y+"}}",_+"\\left[".concat(N,"\\right]")}}),w=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(N,g,y){return g.name!==y},"function, ParenthesisNode, string":function(N,g,y){return N(g.content,y)},"function, FunctionAssignmentNode, string":function(N,g,y){return g.params.includes(y)?N(g.expr,y):!0},"function, FunctionNode | OperatorNode, string":function(N,g,y){return g.args.every(_=>N(_,y))}}),S=e("_derivative",{"ConstantNode, function":function(){return x(0)},"SymbolNode, function":function(N,g){return g(N)?x(0):x(1)},"ParenthesisNode, function":function(N,g){return new f(S(N.content,g))},"FunctionAssignmentNode, function":function(N,g){return g(N)?x(0):S(N.expr,g)},"FunctionNode, function":function(N,g){if(g(N))return x(0);var y=N.args[0],_,E=!1,C=!1,T;switch(N.name){case"cbrt":E=!0,T=new c("*","multiply",[x(3),new c("^","pow",[y,new c("/","divide",[x(2),x(3)])])]);break;case"sqrt":case"nthRoot":if(N.args.length===1)E=!0,T=new c("*","multiply",[x(2),new o("sqrt",[y])]);else if(N.args.length===2)return _=new c("/","divide",[x(1),N.args[1]]),S(new c("^","pow",[y,_]),g);break;case"log10":_=x(10);case"log":if(!_&&N.args.length===1)T=y.clone(),E=!0;else if(N.args.length===1&&_||N.args.length===2&&g(N.args[1]))T=new c("*","multiply",[y.clone(),new o("log",[_||N.args[1]])]),E=!0;else if(N.args.length===2)return S(new c("/","divide",[new o("log",[y]),new o("log",[N.args[1]])]),g);break;case"pow":if(N.args.length===2)return S(new c("^","pow",[y,N.args[1]]),g);break;case"exp":T=new o("exp",[y.clone()]);break;case"sin":T=new o("cos",[y.clone()]);break;case"cos":T=new c("-","unaryMinus",[new o("sin",[y.clone()])]);break;case"tan":T=new c("^","pow",[new o("sec",[y.clone()]),x(2)]);break;case"sec":T=new c("*","multiply",[N,new o("tan",[y.clone()])]);break;case"csc":C=!0,T=new c("*","multiply",[N,new o("cot",[y.clone()])]);break;case"cot":C=!0,T=new c("^","pow",[new o("csc",[y.clone()]),x(2)]);break;case"asin":E=!0,T=new o("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[y.clone(),x(2)])])]);break;case"acos":E=!0,C=!0,T=new o("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[y.clone(),x(2)])])]);break;case"atan":E=!0,T=new c("+","add",[new c("^","pow",[y.clone(),x(2)]),x(1)]);break;case"asec":E=!0,T=new c("*","multiply",[new o("abs",[y.clone()]),new o("sqrt",[new c("-","subtract",[new c("^","pow",[y.clone(),x(2)]),x(1)])])]);break;case"acsc":E=!0,C=!0,T=new c("*","multiply",[new o("abs",[y.clone()]),new o("sqrt",[new c("-","subtract",[new c("^","pow",[y.clone(),x(2)]),x(1)])])]);break;case"acot":E=!0,C=!0,T=new c("+","add",[new c("^","pow",[y.clone(),x(2)]),x(1)]);break;case"sinh":T=new o("cosh",[y.clone()]);break;case"cosh":T=new o("sinh",[y.clone()]);break;case"tanh":T=new c("^","pow",[new o("sech",[y.clone()]),x(2)]);break;case"sech":C=!0,T=new c("*","multiply",[N,new o("tanh",[y.clone()])]);break;case"csch":C=!0,T=new c("*","multiply",[N,new o("coth",[y.clone()])]);break;case"coth":C=!0,T=new c("^","pow",[new o("csch",[y.clone()]),x(2)]);break;case"asinh":E=!0,T=new o("sqrt",[new c("+","add",[new c("^","pow",[y.clone(),x(2)]),x(1)])]);break;case"acosh":E=!0,T=new o("sqrt",[new c("-","subtract",[new c("^","pow",[y.clone(),x(2)]),x(1)])]);break;case"atanh":E=!0,T=new c("-","subtract",[x(1),new c("^","pow",[y.clone(),x(2)])]);break;case"asech":E=!0,C=!0,T=new c("*","multiply",[y.clone(),new o("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[y.clone(),x(2)])])])]);break;case"acsch":E=!0,C=!0,T=new c("*","multiply",[new o("abs",[y.clone()]),new o("sqrt",[new c("+","add",[new c("^","pow",[y.clone(),x(2)]),x(1)])])]);break;case"acoth":E=!0,C=!0,T=new c("-","subtract",[x(1),new c("^","pow",[y.clone(),x(2)])]);break;case"abs":T=new c("/","divide",[new o(new d("abs"),[y.clone()]),y.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+N.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var M,I;E?(M="/",I="divide"):(M="*",I="multiply");var j=S(y,g);return C&&(j=new c("-","unaryMinus",[j])),new c(M,I,[j,T])},"OperatorNode, function":function(N,g){if(g(N))return x(0);if(N.op==="+")return new c(N.op,N.fn,N.args.map(function(P){return S(P,g)}));if(N.op==="-"){if(N.isUnary())return new c(N.op,N.fn,[S(N.args[0],g)]);if(N.isBinary())return new c(N.op,N.fn,[S(N.args[0],g),S(N.args[1],g)])}if(N.op==="*"){var y=N.args.filter(function(P){return g(P)});if(y.length>0){var _=N.args.filter(function(P){return!g(P)}),E=_.length===1?_[0]:new c("*","multiply",_),C=y.concat(S(E,g));return new c("*","multiply",C)}return new c("+","add",N.args.map(function(P){return new c("*","multiply",N.args.map(function(H){return H===P?S(H,g):H.clone()}))}))}if(N.op==="/"&&N.isBinary()){var T=N.args[0],M=N.args[1];return g(M)?new c("/","divide",[S(T,g),M]):g(T)?new c("*","multiply",[new c("-","unaryMinus",[T]),new c("/","divide",[S(M,g),new c("^","pow",[M.clone(),x(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[S(T,g),M.clone()]),new c("*","multiply",[T.clone(),S(M,g)])]),new c("^","pow",[M.clone(),x(2)])])}if(N.op==="^"&&N.isBinary()){var I=N.args[0],j=N.args[1];if(g(I))return Nt(I)&&(s(I.value)||i(I.value,1))?x(0):new c("*","multiply",[N,new c("*","multiply",[new o("log",[I.clone()]),S(j.clone(),g)])]);if(g(j)){if(Nt(j)){if(s(j.value))return x(0);if(i(j.value,1))return S(I,g)}var O=new c("^","pow",[I.clone(),new c("-","subtract",[j,x(1)])]);return new c("*","multiply",[j.clone(),new c("*","multiply",[S(I,g),O])])}return new c("*","multiply",[new c("^","pow",[I.clone(),j.clone()]),new c("+","add",[new c("*","multiply",[S(I,g),new c("/","divide",[j.clone(),I.clone()])]),new c("*","multiply",[S(j,g),new o("log",[I.clone()])])])])}throw new Error('Cannot process operator "'+N.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function x(b,N){return new u(l(b,Cs(String(b),r)))}return h}),cA="rationalize",Ire=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Fre=q(cA,Ire,t=>{var{config:e,typed:r,equal:n,isZero:a,add:i,subtract:s,multiply:l,divide:u,pow:o,parse:c,simplifyConstant:f,simplifyCore:d,simplify:m,fraction:p,bignumber:h,mathWithTransform:D,matrix:w,AccessorNode:S,ArrayNode:x,ConstantNode:b,FunctionNode:N,IndexNode:g,ObjectNode:y,OperatorNode:_,SymbolNode:E,ParenthesisNode:C}=t;function T(P){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,z=I(),X=M(P,H,!0,z.firstRules),ae=X.variables.length,k={exactFractions:!1},Y={exactFractions:!0};if(P=X.expression,ae>=1){P=j(P);var V,ye,le=!0,fe=!1;P=m(P,z.firstRules,{},k);for(var W;ye=le?z.distrDivRules:z.sucDivRules,P=m(P,ye,{},Y),le=!le,W=P.toString(),W!==V;)fe=!0,V=W;fe&&(P=m(P,z.firstRulesAgain,{},k)),P=m(P,z.finalRules,{},k)}var K=[],ee={};return P.type==="OperatorNode"&&P.isBinary()&&P.op==="/"?(ae===1&&(P.args[0]=O(P.args[0],K),P.args[1]=O(P.args[1])),$&&(ee.numerator=P.args[0],ee.denominator=P.args[1])):(ae===1&&(P=O(P,K)),$&&(ee.numerator=P,ee.denominator=null)),$?(ee.coefficients=K,ee.variables=X.variables,ee.expression=P,ee):P}return r(cA,{Node:T,"Node, boolean":(P,H)=>T(P,{},H),"Node, Object":T,"Node, Object, boolean":T});function M(P,H,$,z){var X=[],ae=m(P,z,H,{exactFractions:!1});$=!!$;var k="+-*"+($?"/":"");V(ae);var Y={};return Y.expression=ae,Y.variables=X,Y;function V(ye){var le=ye.type;if(le==="FunctionNode")throw new Error("There is an unsolved function call");if(le==="OperatorNode")if(ye.op==="^"){if(ye.args[1].type!=="ConstantNode"||!We(parseFloat(ye.args[1].value)))throw new Error("There is a non-integer exponent");V(ye.args[0])}else{if(!k.includes(ye.op))throw new Error("Operator "+ye.op+" invalid in polynomial expression");for(var fe=0;fe<ye.args.length;fe++)V(ye.args[fe])}else if(le==="SymbolNode"){var W=ye.name,K=X.indexOf(W);K===-1&&X.push(W)}else if(le==="ParenthesisNode")V(ye.content);else if(le!=="ConstantNode")throw new Error("type "+le+" is not allowed in polynomial expression")}}function I(){var P=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],H=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],$=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],z=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],X={};return X.firstRules=P.concat(H,z),X.distrDivRules=$,X.sucDivRules=z,X.firstRulesAgain=P.concat(H),X.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],X}function j(P,H,$){var z=P.type,X=arguments.length>1;if(z==="OperatorNode"&&P.isBinary()){var ae=!1,k;if(P.op==="^"&&(P.args[0].type==="ParenthesisNode"||P.args[0].type==="OperatorNode")&&P.args[1].type==="ConstantNode"&&(k=parseFloat(P.args[1].value),ae=k>=2&&We(k)),ae){if(k>2){var Y=P.args[0],V=new _("^","pow",[P.args[0].cloneDeep(),new b(k-1)]);P=new _("*","multiply",[Y,V])}else P=new _("*","multiply",[P.args[0],P.args[0].cloneDeep()]);X&&($==="content"?H.content=P:H.args[$]=P)}}if(z==="ParenthesisNode")j(P.content,P,"content");else if(z!=="ConstantNode"&&z!=="SymbolNode")for(var ye=0;ye<P.args.length;ye++)j(P.args[ye],P,ye);if(!X)return P}function O(P,H){H===void 0&&(H=[]),H[0]=0;var $={};$.cte=1,$.oper="+",$.fire="";var z=0,X="";W(P,null,$),z=H.length-1;for(var ae=!0,k,Y=z;Y>=0;Y--)if(H[Y]!==0){var V=new b(ae?H[Y]:Math.abs(H[Y])),ye=H[Y]<0?"-":"+";if(Y>0){var le=new E(X);if(Y>1){var fe=new b(Y);le=new _("^","pow",[le,fe])}H[Y]===-1&&ae?V=new _("-","unaryMinus",[le]):Math.abs(H[Y])===1?V=le:V=new _("*","multiply",[V,le])}ae?k=V:ye==="+"?k=new _("+","add",[k,V]):k=new _("-","subtract",[k,V]),ae=!1}if(ae)return new b(0);return k;function W(K,ee,ie){var oe=K.type;if(oe==="FunctionNode")throw new Error("There is an unsolved function call");if(oe==="OperatorNode"){if(!"+-*^".includes(K.op))throw new Error("Operator "+K.op+" invalid");if(ee!==null){if((K.fn==="unaryMinus"||K.fn==="pow")&&ee.fn!=="add"&&ee.fn!=="subtract"&&ee.fn!=="multiply")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="multiply")&&ee.fn!=="add"&&ee.fn!=="subtract")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="unaryMinus")&&ie.noFil!==0)throw new Error("Invalid "+K.op+" placing")}(K.op==="^"||K.op==="*")&&(ie.fire=K.op);for(var pe=0;pe<K.args.length;pe++)K.fn==="unaryMinus"&&(ie.oper="-"),(K.op==="+"||K.fn==="subtract")&&(ie.fire="",ie.cte=1,ie.oper=pe===0?"+":K.op),ie.noFil=pe,W(K.args[pe],K,ie)}else if(oe==="SymbolNode"){if(K.name!==X&&X!=="")throw new Error("There is more than one variable");if(X=K.name,ee===null){H[1]=1;return}if(ee.op==="^"&&ie.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ee.op==="*"&&ie.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(ie.fire===""||ie.fire==="*")&&(z<1&&(H[1]=0),H[1]+=ie.cte*(ie.oper==="+"?1:-1),z=Math.max(1,z))}else if(oe==="ConstantNode"){var me=parseFloat(K.value);if(ee===null){H[0]=me;return}if(ee.op==="^"){if(ie.noFil!==1)throw new Error("Constant cannot be powered");if(!We(me)||me<=0)throw new Error("Non-integer exponent is not allowed");for(var Te=z+1;Te<me;Te++)H[Te]=0;me>z&&(H[me]=0),H[me]+=ie.cte*(ie.oper==="+"?1:-1),z=Math.max(me,z);return}ie.cte=me,ie.fire===""&&(H[0]+=ie.cte*(ie.oper==="+"?1:-1))}else throw new Error("Type "+oe+" is not allowed")}}}),fA="zpk2tf",Pre=["typed","add","multiply","Complex","number"],Rre=q(fA,Pre,t=>{var{typed:e,add:r,multiply:n,Complex:a,number:i}=t;return e(fA,{"Array,Array,number":function(o,c,f){return s(o,c,f)},"Array,Array":function(o,c){return s(o,c,1)},"Matrix,Matrix,number":function(o,c,f){return s(o.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(o,c){return s(o.valueOf(),c.valueOf(),1)}});function s(u,o,c){u.some(S=>S.type==="BigNumber")&&(u=u.map(S=>i(S))),o.some(S=>S.type==="BigNumber")&&(o=o.map(S=>i(S)));for(var f=[a(1,0)],d=[a(1,0)],m=0;m<u.length;m++){var p=u[m];typeof p=="number"&&(p=a(p,0)),f=l(f,[a(1,0),a(-p.re,-p.im)])}for(var h=0;h<o.length;h++){var D=o[h];typeof D=="number"&&(D=a(D,0)),d=l(d,[a(1,0),a(-D.re,-D.im)])}for(var w=0;w<f.length;w++)f[w]=n(f[w],c);return[f,d]}function l(u,o){for(var c=[],f=0;f<u.length+o.length-1;f++){c[f]=a(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<o.length&&(c[f]=r(c[f],n(u[d],o[f-d])))}return c}}),dA="freqz",Ore=["typed","add","multiply","Complex","divide","matrix"],Bre=q(dA,Ore,t=>{var{typed:e,add:r,multiply:n,Complex:a,divide:i,matrix:s}=t;return e(dA,{"Array, Array":function(c,f){var d=u(512);return l(c,f,d)},"Array, Array, Array":function(c,f,d){return l(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var m=u(d);return l(c,f,m)},"Matrix, Matrix":function(c,f){var d=u(512),{w:m,h:p}=l(c.valueOf(),f.valueOf(),d);return{w:s(m),h:s(p)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h:m}=l(c.valueOf(),f.valueOf(),d.valueOf());return{h:s(m),w:s(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var m=u(d),{h:p}=l(c.valueOf(),f.valueOf(),m);return{h:s(p),w:s(m)}}});function l(o,c,f){for(var d=[],m=[],p=0;p<f.length;p++){for(var h=a(0,0),D=a(0,0),w=0;w<o.length;w++)h=r(h,n(o[w],a(Math.cos(-w*f[p]),Math.sin(-w*f[p]))));for(var S=0;S<c.length;S++)D=r(D,n(c[S],a(Math.cos(-S*f[p]),Math.sin(-S*f[p]))));d.push(h),m.push(D)}for(var x=[],b=0;b<d.length;b++)x.push(i(d[b],m[b]));return{h:x,w:f}}function u(o){for(var c=[],f=0;f<o;f++)c.push(f/o*Math.PI);return c}}),jre="reviver",kre=["classes"],$re=q(jre,kre,t=>{var{classes:e}=t;return function(n,a){var i=e[a&&a.mathjs];return i&&typeof i.fromJSON=="function"?i.fromJSON(a):a}}),Lre="replacer",zre=[],Vre=q(Lre,zre,()=>function(e,r){return typeof r=="number"&&(!isFinite(r)||isNaN(r))?{mathjs:"number",value:String(r)}:typeof r=="bigint"?{mathjs:"bigint",value:String(r)}:r}),Ure="15.0.0",qre=q("true",[],()=>!0),Hre=q("false",[],()=>!1),Gre=q("null",[],()=>null),Wre=ea("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1/0):1/0}),Qre=ea("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(NaN):NaN}),Xre=ea("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?Yy(r):Q$}),Kre=ea("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?NG(r):X$}),Jre=ea("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?bG(r):K$}),Yre=ea("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?wG(r):J$}),Zre=ea("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).ln():Math.LN2}),ene=ea("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(10).ln():Math.LN10}),tne=ea("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(2).ln()):Math.LOG2E}),rne=ea("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(1).div(new r(10).ln()):Math.LOG10E}),nne=ea("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r("0.5").sqrt():Math.SQRT1_2}),ane=ea("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:r}=t;return e.number==="BigNumber"?new r(2).sqrt():Math.SQRT2}),ine=ea("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),sne=q("version",[],()=>Ure);function ea(t,e,r){return q(t,e,r,{recreateOnConfigChange:!0})}var one=it("speedOfLight","299792458","m s^-1"),lne=it("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),une=it("planckConstant","6.62607015e-34","J s"),cne=it("reducedPlanckConstant","1.0545718176461565e-34","J s"),fne=it("magneticConstant","1.25663706212e-6","N A^-2"),dne=it("electricConstant","8.8541878128e-12","F m^-1"),mne=it("vacuumImpedance","376.730313667","ohm"),hne=it("coulomb","8.987551792261171e9","N m^2 C^-2"),pne=it("coulombConstant","8.987551792261171e9","N m^2 C^-2"),vne=it("elementaryCharge","1.602176634e-19","C"),gne=it("bohrMagneton","9.2740100783e-24","J T^-1"),yne=it("conductanceQuantum","7.748091729863649e-5","S"),xne=it("inverseConductanceQuantum","12906.403729652257","ohm"),bne=it("magneticFluxQuantum","2.0678338484619295e-15","Wb"),wne=it("nuclearMagneton","5.0507837461e-27","J T^-1"),Nne=it("klitzing","25812.807459304513","ohm"),_ne=it("bohrRadius","5.29177210903e-11","m"),Sne=it("classicalElectronRadius","2.8179403262e-15","m"),Ene=it("electronMass","9.1093837015e-31","kg"),Ane=it("fermiCoupling","1.1663787e-5","GeV^-2"),Dne=Gh("fineStructure",.0072973525693),Cne=it("hartreeEnergy","4.3597447222071e-18","J"),Tne=it("protonMass","1.67262192369e-27","kg"),Mne=it("deuteronMass","3.3435830926e-27","kg"),Ine=it("neutronMass","1.6749271613e-27","kg"),Fne=it("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Pne=it("rydberg","10973731.568160","m^-1"),Rne=it("thomsonCrossSection","6.6524587321e-29","m^2"),One=Gh("weakMixingAngle",.2229),Bne=Gh("efimovFactor",22.7),jne=it("atomicMass","1.66053906660e-27","kg"),kne=it("avogadro","6.02214076e23","mol^-1"),$ne=it("boltzmann","1.380649e-23","J K^-1"),Lne=it("faraday","96485.33212331001","C mol^-1"),zne=it("firstRadiation","3.7417718521927573e-16","W m^2"),Vne=it("loschmidt","2.686780111798444e25","m^-3"),Une=it("gasConstant","8.31446261815324","J K^-1 mol^-1"),qne=it("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Hne=it("molarVolume","0.022413969545014137","m^3 mol^-1"),Gne=Gh("sackurTetrode",-1.16487052358),Wne=it("secondRadiation","0.014387768775039337","m K"),Qne=it("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Xne=it("wienDisplacement","2.897771955e-3","m K"),Kne=it("molarMass","0.99999999965e-3","kg mol^-1"),Jne=it("molarMassC12","11.9999999958e-3","kg mol^-1"),Yne=it("gravity","9.80665","m s^-2"),Zne=it("planckLength","1.616255e-35","m"),eae=it("planckMass","2.176435e-8","kg"),tae=it("planckTime","5.391245e-44","s"),rae=it("planckCharge","1.87554603778e-18","C"),nae=it("planckTemperature","1.416785e+32","K");function it(t,e,r){var n=["config","Unit","BigNumber"];return q(t,n,a=>{var{config:i,Unit:s,BigNumber:l}=a,u=i.number==="BigNumber"?new l(e):parseFloat(e),o=new s(u,r);return o.fixPrefix=!0,o})}function Gh(t,e){var r=["config","BigNumber"];return q(t,r,n=>{var{config:a,BigNumber:i}=n;return a.number==="BigNumber"?new i(e):e})}function mA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mA(Object(r),!0).forEach(function(n){Mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var iae="mapSlices",sae=["typed","isInteger"],oae=q(iae,sae,t=>{var{typed:e,isInteger:r}=t,n=Vg({typed:e,isInteger:r});return e("mapSlices",{"...any":function(i){var s=i[1];Xe(s)?i[1]=s-1:lt(s)&&(i[1]=s.minus(1));try{return n.apply(null,i)}catch(l){throw In(l)}}})},aae({isTransformFunction:!0},Vg.meta)),lae="column",uae=["typed","Index","matrix","range"],cae=q(lae,uae,t=>{var{typed:e,Index:r,matrix:n,range:a}=t,i=N4({typed:e,Index:r,matrix:n,range:a});return e("column",{"...any":function(l){var u=l.length-1,o=l[u];Xe(o)&&(l[u]=o-1);try{return i.apply(null,l)}catch(c){throw In(c)}}})},{isTransformFunction:!0});function ox(t,e,r){var n=t.filter(function(u){return Qr(u)&&!(u.name in e)&&!r.has(u.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var a=n.name,i=new Map,s=new U3(r,i,new Set([a])),l=t.compile();return function(o){return i.set(a,o),l.evaluate(s)}}var fae="transformCallback",dae=["typed"],lx=q(fae,dae,t=>{var{typed:e}=t;return function(n,a){return e.isTypedFunction(n)?r(n,a):hA(n,n.length,a)};function r(n,a){var i=Object.fromEntries(Object.entries(n.signatures).map(s=>{var[l,u]=s,o=l.split(",").length;return e.isTypedFunction(u)?[l,r(u,a)]:[l,hA(u,o,a)]}));return typeof n.name=="string"?e(n.name,i):e(i)}});function hA(t,e,r){return e===r?t:e===r+1?function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.slice(0,r),l=pA(a[r]);return t(...s,l)}:e>r+1?function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.slice(0,r),l=pA(a[r]),u=a.slice(r+1);return t(...s,l,...u)}:t}function pA(t){return t.map(e=>e+1)}var mae="filter",hae=["typed"],pae=q(mae,hae,t=>{var{typed:e}=t;function r(a,i,s){var l=_4({typed:e}),u=lx({typed:e});if(a.length===0)return l();var o=a[0];if(a.length===1)return l(o);var c=a.length-1,f=a[c];return o&&(o=n(o,s)),f&&(Qr(f)||lf(f)?f=n(f,s):f=ox(f,i,s)),l(o,u(f,c))}r.rawArgs=!0;function n(a,i){return a.compile().evaluate(i)}return r},{isTransformFunction:!0}),vae="forEach",gae=["typed"],yae=q(vae,gae,t=>{var{typed:e}=t,r=S4({typed:e}),n=lx({typed:e});function a(s,l,u){if(s.length===0)return r();var o=s[0];if(s.length===1)return r(o);var c=s.length-1,f=s[c];return o&&(o=i(o,u)),f&&(Qr(f)||lf(f)?f=i(f,u):f=ox(f,l,u)),r(o,n(f,c))}a.rawArgs=!0;function i(s,l){return s.compile().evaluate(l)}return a},{isTransformFunction:!0}),xae="index",bae=["Index","getMatrixDataType"],wae=q(xae,bae,t=>{var{Index:e,getMatrixDataType:r}=t;return function(){for(var a=[],i=0,s=arguments.length;i<s;i++){var l=arguments[i];if($y(l))l.start--,l.end-=l.step>0?0:2;else if(l&&l.isSet===!0)l=l.map(function(o){return o-1});else if(Wt(l)||Ye(l))r(l)!=="boolean"&&(l=l.map(function(o){return o-1}));else if(Xe(l)||cc(l))l--;else if(lt(l))l=l.toNumber()-1;else if(typeof l!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");a[i]=l}var u=new e;return e.apply(u,a),u}},{isTransformFunction:!0}),Nae="map",_ae=["typed"],Sae=q(Nae,_ae,t=>{var{typed:e}=t,r=E4({typed:e}),n=lx({typed:e});function a(i,s,l){if(i.length===0)return r();if(i.length===1)return r(i[0]);var u=i.length-1,o=i.slice(0,u),c=i[u];return o=o.map(d=>f(d,l)),c&&(Qr(c)||lf(c)?c=f(c,l):c=ox(c,s,l)),r(...o,n(c,u));function f(d,m){return d.compile().evaluate(m)}}return a.rawArgs=!0,a},{isTransformFunction:!0});function Eae(t){return Xe(t)?t-1:lt(t)?t.minus(1):t}function Aae(t){return Xe(t)||lt(t)}function Is(t){if(t.length===2&&Jn(t[0])){t=t.slice();var e=t[1];Aae(e)&&(t[1]=Eae(e))}return t}var Dae="max",Cae=["typed","config","numeric","larger","isNaN"],Tae=q(Dae,Cae,t=>{var{typed:e,config:r,numeric:n,larger:a,isNaN:i}=t,s=R4({typed:e,config:r,numeric:n,larger:a,isNaN:i});return e("max",{"...any":function(u){u=Is(u);try{return s.apply(null,u)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),Mae="mean",Iae=["typed","add","divide"],Fae=q(Mae,Iae,t=>{var{typed:e,add:r,divide:n}=t,a=U4({typed:e,add:r,divide:n});return e("mean",{"...any":function(s){s=Is(s);try{return a.apply(null,s)}catch(l){throw In(l)}}})},{isTransformFunction:!0}),Pae="min",Rae=["typed","config","numeric","smaller","isNaN"],Oae=q(Pae,Rae,t=>{var{typed:e,config:r,numeric:n,smaller:a,isNaN:i}=t,s=O4({typed:e,config:r,numeric:n,smaller:a,isNaN:i});return e("min",{"...any":function(u){u=Is(u);try{return s.apply(null,u)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),Bae="range",jae=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],kae=q(Bae,jae,t=>{var{typed:e,config:r,matrix:n,bignumber:a,equal:i,smaller:s,smallerEq:l,larger:u,largerEq:o,add:c,isZero:f,isPositive:d}=t,m=C4({typed:e,config:r,matrix:n,bignumber:a,equal:i,smaller:s,smallerEq:l,larger:u,largerEq:o,add:c,isZero:f,isPositive:d});return e("range",{"...any":function(h){var D=h.length-1,w=h[D];return typeof w!="boolean"&&h.push(!0),m.apply(null,h)}})},{isTransformFunction:!0}),$ae="row",Lae=["typed","Index","matrix","range"],zae=q($ae,Lae,t=>{var{typed:e,Index:r,matrix:n,range:a}=t,i=T4({typed:e,Index:r,matrix:n,range:a});return e("row",{"...any":function(l){var u=l.length-1,o=l[u];Xe(o)&&(l[u]=o-1);try{return i.apply(null,l)}catch(c){throw In(c)}}})},{isTransformFunction:!0}),Vae="subset",Uae=["typed","matrix","zeros","add"],qae=q(Vae,Uae,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t,i=M4({typed:e,matrix:r,zeros:n,add:a});return e("subset",{"...any":function(l){try{return i.apply(null,l)}catch(u){throw In(u)}}})},{isTransformFunction:!0}),Hae="concat",Gae=["typed","matrix","isInteger"],Wae=q(Hae,Gae,t=>{var{typed:e,matrix:r,isInteger:n}=t,a=w4({typed:e,matrix:r,isInteger:n});return e("concat",{"...any":function(s){var l=s.length-1,u=s[l];Xe(u)?s[l]=u-1:lt(u)&&(s[l]=u.minus(1));try{return a.apply(null,s)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),vA="diff",Qae=["typed","matrix","subtract","number","bignumber"],Xae=q(vA,Qae,t=>{var{typed:e,matrix:r,subtract:n,number:a,bignumber:i}=t,s=A4({typed:e,matrix:r,subtract:n,number:a,bignumber:i});return e(vA,{"...any":function(u){u=Is(u);try{return s.apply(null,u)}catch(o){throw In(o)}}})},{isTransformFunction:!0}),Kae="std",Jae=["typed","map","sqrt","variance"],Yae=q(Kae,Jae,t=>{var{typed:e,map:r,sqrt:n,variance:a}=t,i=G4({typed:e,map:r,sqrt:n,variance:a});return e("std",{"...any":function(l){l=Is(l);try{return i.apply(null,l)}catch(u){throw In(u)}}})},{isTransformFunction:!0}),gA="sum",Zae=["typed","config","add","numeric"],eie=q(gA,Zae,t=>{var{typed:e,config:r,add:n,numeric:a}=t,i=z4({typed:e,config:r,add:n,numeric:a});return e(gA,{"...any":function(l){l=Is(l);try{return i.apply(null,l)}catch(u){throw In(u)}}})},{isTransformFunction:!0}),tie="quantileSeq",rie=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],nie=q(tie,rie,t=>{var{typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:l,compare:u,isInteger:o,smaller:c,smallerEq:f,larger:d,mapSlices:m}=t,p=H4({typed:e,bignumber:r,add:n,subtract:a,divide:i,multiply:s,partitionSelect:l,compare:u,isInteger:o,smaller:c,smallerEq:f,larger:d,mapSlices:m});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(D,w,S)=>p(D,w,h(S)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(D,w,S,x)=>p(D,w,S,h(x)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(D,w,S)=>p(D,w,h(S)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(D,w,S,x)=>p(D,w,S,h(x))});function h(D){return Is([[],D])[1]}},{isTransformFunction:!0}),yA="cumsum",aie=["typed","add","unaryPlus"],iie=q(yA,aie,t=>{var{typed:e,add:r,unaryPlus:n}=t,a=V4({typed:e,add:r,unaryPlus:n});return e(yA,{"...any":function(s){if(s.length===2&&Jn(s[0])){var l=s[1];Xe(l)?s[1]=l-1:lt(l)&&(s[1]=l.minus(1))}try{return a.apply(null,s)}catch(u){throw In(u)}}})},{isTransformFunction:!0}),xA="variance",sie=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],oie=q(xA,sie,t=>{var{typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:l}=t,u=q4({typed:e,add:r,subtract:n,multiply:a,divide:i,mapSlices:s,isNaN:l});return e(xA,{"...any":function(c){c=Is(c);try{return u.apply(null,c)}catch(f){throw In(f)}}})},{isTransformFunction:!0}),bA="print",lie=["typed","matrix","zeros","add"],uie=q(bA,lie,t=>{var{typed:e,matrix:r,zeros:n,add:a}=t,i=F4({typed:e,matrix:r,zeros:n,add:a});return e(bA,{"string, Object | Array":function(u,o){return i(s(u),o)},"string, Object | Array, number | Object":function(u,o,c){return i(s(u),o,c)}});function s(l){return l.replace(I4,u=>{var o=u.slice(1).split("."),c=o.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),cie="and",fie=["typed","matrix","zeros","add","equalScalar","not","concat"],die=q(cie,fie,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,l=P4({typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s});function u(o,c,f){var d=o[0].compile().evaluate(f);if(!Jn(d)&&!l(d,!0))return!1;var m=o[1].compile().evaluate(f);return l(d,m)}return u.rawArgs=!0,u},{isTransformFunction:!0}),mie="or",hie=["typed","matrix","equalScalar","DenseMatrix","concat"],pie=q(mie,hie,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=b4({typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i});function l(u,o,c){var f=u[0].compile().evaluate(c);if(!Jn(f)&&s(f,!1))return!0;var d=u[1].compile().evaluate(c);return s(f,d)}return l.rawArgs=!0,l},{isTransformFunction:!0}),vie="nullish",gie=["typed","matrix","size","flatten","deepEqual"],yie=q(vie,gie,t=>{var{typed:e,matrix:r,size:n,flatten:a,deepEqual:i}=t,s=x4({typed:e,matrix:r,size:n,flatten:a,deepEqual:i});function l(u,o,c){var f=u[0].compile().evaluate(c);if(!Jn(f)&&f!=null&&f!==void 0)return f;var d=u[1].compile().evaluate(c);return s(f,d)}return l.rawArgs=!0,l},{isTransformFunction:!0}),xie="bitAnd",bie=["typed","matrix","zeros","add","equalScalar","not","concat"],wie=q(xie,bie,t=>{var{typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s}=t,l=g4({typed:e,matrix:r,equalScalar:n,zeros:a,not:i,concat:s});function u(o,c,f){var d=o[0].compile().evaluate(f);if(!Jn(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var m=o[1].compile().evaluate(f);return l(d,m)}return u.rawArgs=!0,u},{isTransformFunction:!0}),Nie="bitOr",_ie=["typed","matrix","equalScalar","DenseMatrix","concat"],Sie=q(Nie,_ie,t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i}=t,s=y4({typed:e,matrix:r,equalScalar:n,DenseMatrix:a,concat:i});function l(u,o,c){var f=u[0].compile().evaluate(c);if(!Jn(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return s(f,d)}return l.rawArgs=!0,l},{isTransformFunction:!0}),Pe=o$({config:be}),Jt=d$({}),wA=Jre({BigNumber:Pe,config:be}),Eie=Hre({}),Aie=Dne({BigNumber:Pe,config:be}),To=b$({}),X4=ine({Complex:Jt}),Die=Wre({BigNumber:Pe,config:be}),Cie=ene({BigNumber:Pe,config:be}),Tie=rne({BigNumber:Pe,config:be}),Wh=A$({}),Mie=Qre({BigNumber:Pe,config:be}),Iie=Gre({}),Fie=Yre({BigNumber:Pe,config:be}),Pie=_$({}),K4=f7({}),Rie=nne({BigNumber:Pe,config:be}),Oie=Gne({BigNumber:Pe,config:be}),J4=Kre({BigNumber:Pe,config:be}),Bie=qre({}),jie=sne({}),ft=V$({Matrix:Wh,config:be}),kie=Bne({BigNumber:Pe,config:be}),$ie=Zre({BigNumber:Pe,config:be}),Jg=Xre({BigNumber:Pe,config:be}),Y4=Vre({}),Lie=ane({BigNumber:Pe,config:be}),Z=o7({BigNumber:Pe,Complex:Jt,DenseMatrix:ft,Fraction:To}),zie=One({BigNumber:Pe,config:be}),Fn=nz({typed:Z}),Vie=PG({Complex:Jt,config:be,typed:Z}),Uie=jG({BigNumber:Pe,typed:Z}),qie=zG({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),kr=oz({typed:Z}),Hie=QV({typed:Z}),Gie=WG({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),Wie=YG({typed:Z}),Z4=tW({typed:Z}),Qie=iW({Complex:Jt,config:be,typed:Z}),Xie=CL({typed:Z}),Kie=zV({typed:Z}),Jie=FL({typed:Z}),Yie=q$({typed:Z}),Qh=xte({typed:Z}),Xh=kL({Complex:Jt,typed:Z}),Mo=KV({typed:Z}),ux=oW({typed:Z}),Zie=fW({BigNumber:Pe,typed:Z}),ese=pW({BigNumber:Pe,typed:Z}),tse=_z({typed:Z}),vt=gL({config:be,typed:Z}),rse=vq({typed:Z}),eI=Ez({typed:Z}),nse=Dz({Complex:Jt,typed:Z}),ase=_4({typed:Z}),Io=yU({typed:Z}),ise=S4({typed:Z}),df=Dq({typed:Z}),cx=NU({typed:Z}),sse=Pq({format:df,typed:Z}),fx=YV({typed:Z}),Ln=G$({typed:Z}),Fs=rL({config:be,typed:Z}),Fo=lL({config:be,typed:Z}),ya=cL({equalScalar:vt,typed:Z}),ose=tne({BigNumber:Pe,config:be}),lse=Ete({Complex:Jt,typed:Z}),use=oV({Complex:Jt,config:be,typed:Z}),dx=uV({Complex:Jt,config:be,typed:Z}),Po=E4({typed:Z}),xr=dV({typed:Z}),Zm=rU({typed:Z}),Di=EL({typed:Z}),cse=Iq({format:df,typed:Z}),fse=Zte({config:be,typed:Z}),dse=F4({typed:Z}),mse=tre({config:be,typed:Z}),mx=eU({typed:Z}),hse=xW({BigNumber:Pe,typed:Z}),tI=yV({BigNumber:Pe,Fraction:To,complex:Xh,typed:Z}),Kh=_W({typed:Z}),$r=HU({typed:Z}),Lr=bL({Matrix:Wh,equalScalar:vt,typed:Z}),pse=JL({typed:Z}),vse=_V({typed:Z}),gse=ML({typed:Z}),xa=uz({typed:Z}),yse=DW({typed:Z}),rI=kq({typed:Z}),hx=hL({typed:Z}),xse=OG({Complex:Jt,config:be,typed:Z}),bse=UG({BigNumber:Pe,typed:Z}),wse=HG({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),zn=OL({BigNumber:Pe,typed:Z}),Nse=wte({typed:Z}),_se=uW({typed:Z}),Sse=gW({BigNumber:Pe,typed:Z}),Jh=aQ({addScalar:kr,conj:Mo,multiplyScalar:xr,size:$r,typed:Z}),vi=dL({typed:Z}),Ese=Lq({typed:Z}),Wc=Vg({isInteger:Ln,typed:Z}),Ie=UL({DenseMatrix:ft,Matrix:Wh,SparseMatrix:Lr,typed:Z}),Ase=HL({isZero:ya,matrix:Ie,typed:Z}),qt=hV({addScalar:kr,dot:Jh,equalScalar:vt,matrix:Ie,multiplyScalar:xr,typed:Z}),Dse=IU({BigNumber:Pe,config:be,matrix:Ie,typed:Z}),Cse=nre({config:be,log2:dx,typed:Z}),nI=OU({isInteger:Ln,matrix:Ie,typed:Z}),Tse=wW({BigNumber:Pe,typed:Z}),Mse=EW({typed:Z}),Ise=TG({SparseMatrix:Lr,typed:Z}),Oa=wV({Complex:Jt,config:be,typed:Z}),Fse=WU({typed:Z}),Pse=MW({typed:Z}),mf=ZU({matrix:Ie,typed:Z}),aI=DV({BigNumber:Pe,config:be,matrix:Ie,typed:Z}),tn=nq({BigNumber:Pe,config:be,matrix:Ie,typed:Z}),Rse=$G({BigNumber:Pe,Complex:Jt,config:be,typed:Z}),Ose=XG({Complex:Jt,config:be,typed:Z}),Bse=Tq({format:df,typed:Z}),At=w4({isInteger:Ln,matrix:Ie,typed:Z}),jse=mW({BigNumber:Pe,typed:Z}),px=tq({conj:Mo,transpose:mf,typed:Z}),iI=hU({DenseMatrix:ft,SparseMatrix:Lr,matrix:Ie,typed:Z}),kse=PV({concat:At,equalScalar:vt,matrix:Ie,multiplyScalar:xr,typed:Z}),Un=RH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),hf=zL({Fraction:To,typed:Z}),Ps=SU({BigNumber:Pe,DenseMatrix:ft,SparseMatrix:Lr,config:be,matrix:Ie,typed:Z}),Ro=aL({typed:Z}),$se=AU({matrix:Ie,multiplyScalar:xr,typed:Z}),Yh=QH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,config:be,matrix:Ie,typed:Z}),Lse=yH({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),zse=WL({flatten:Io,matrix:Ie,size:$r,typed:Z}),Vse=_q({isNaN:vi,isNumeric:Ro,typed:Z}),Use=vV({BigNumber:Pe,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),ma=Uq({bignumber:zn,fraction:hf,number:Di}),sI=Eq({config:be,multiplyScalar:xr,numeric:ma,typed:Z}),qse=kU({config:be,matrix:Ie}),Hse=bH({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),fu=Xq({BigNumber:Pe,DenseMatrix:ft,config:be,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),An=$H({DenseMatrix:ft,SparseMatrix:Lr,bignumber:zn,concat:At,config:be,matrix:Ie,typed:Z}),Gse=Bq({concat:At,matrix:Ie,typed:Z}),ni=ZL({typed:Z}),Wse=ZH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,config:be,equalScalar:vt,matrix:Ie,typed:Z}),Qse=sU({DenseMatrix:ft,SparseMatrix:Lr,concat:At,matrix:Ie,typed:Z}),bt=YW({DenseMatrix:ft,SparseMatrix:Lr,addScalar:kr,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Xse=nW({BigNumber:Pe,DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Kse=g4({concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Jse=y4({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Yse=GV({DenseMatrix:ft,SparseMatrix:Lr,concat:At,matrix:Ie,typed:Z}),oI=fz({BigNumber:Pe,Complex:Jt,Fraction:To,config:be,isNegative:Fs,matrix:Ie,typed:Z,unaryMinus:ni}),Oo=EH({BigNumber:Pe,DenseMatrix:ft,Fraction:To,concat:At,config:be,equalScalar:vt,matrix:Ie,typed:Z}),lI=FH({concat:At,matrix:Ie,typed:Z}),Zse=cU({prod:sI,size:$r,typed:Z}),pf=JH({equal:Un,typed:Z}),fr=Hq({numeric:ma,typed:Z}),eoe=jH({compareText:lI,isZero:ya,typed:Z}),uI=m4({DenseMatrix:ft,config:be,equalScalar:vt,matrix:Ie,round:fu,typed:Z,zeros:tn}),toe=eV({BigNumber:Pe,DenseMatrix:ft,concat:At,config:be,equalScalar:vt,matrix:Ie,round:fu,typed:Z,zeros:tn}),roe=sL({isNumeric:Ro,typed:Z}),noe=eQ({abs:Fn,addScalar:kr,divideScalar:fr,isPositive:Fo,multiplyScalar:xr,smaller:An,sqrt:Oa,typed:Z}),cI=uG({DenseMatrix:ft,smaller:An}),vn=dG({ImmutableDenseMatrix:cI,getMatrixDataType:cx}),Dn=HH({DenseMatrix:ft,SparseMatrix:Lr,bignumber:zn,concat:At,config:be,matrix:Ie,typed:Z}),vx=Yq({Complex:Jt,config:be,divideScalar:fr,typeOf:hx,typed:Z}),fI=lH({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:xa,typed:Z}),gx=XL({flatten:Io,matrix:Ie,size:$r,typed:Z}),aoe=O4({config:be,isNaN:vi,numeric:ma,smaller:An,typed:Z}),dI=p4({DenseMatrix:ft,concat:At,config:be,equalScalar:vt,matrix:Ie,round:fu,typed:Z,zeros:tn}),ioe=rH({Complex:Jt,config:be,divideScalar:fr,typed:Z}),soe=x4({deepEqual:pf,flatten:Io,matrix:Ie,size:$r,typed:Z}),ooe=b4({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),Zh=rG({compare:Oo,isNaN:vi,isNumeric:Ro,typed:Z}),yx=mX({addScalar:kr,complex:Xh,conj:Mo,divideScalar:fr,equal:Un,identity:Ps,isZero:ya,matrix:Ie,multiplyScalar:xr,sign:tI,sqrt:Oa,subtractScalar:xa,typed:Z,unaryMinus:ni,zeros:tn}),loe=NH({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z,zeros:tn}),Wl=VH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,config:be,matrix:Ie,typed:Z}),ta=M4({add:bt,matrix:Ie,typed:Z,zeros:tn}),Sr=EV({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,subtractScalar:xa,typed:Z,unaryMinus:ni}),uoe=oQ({add:bt,matrix:Ie,typed:Z}),xx=cH({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:xa,typed:Z}),coe=Rre({Complex:Jt,add:bt,multiply:qt,number:Di,typed:Z}),foe=ure({addScalar:kr,combinations:Qh,divideScalar:fr,isInteger:Ln,isNegative:Fs,multiplyScalar:xr,typed:Z}),ai=TH({compare:Oo,typed:Z}),doe=fre({addScalar:kr,combinations:Qh,isInteger:Ln,isNegative:Fs,isPositive:Fo,larger:Dn,typed:Z}),moe=dU({matrix:Ie,multiply:qt,subtract:Sr,typed:Z}),mI=Fee({divideScalar:fr,isZero:ya,matrix:Ie,multiply:qt,subtractScalar:xa,typed:Z,unaryMinus:ni}),hoe=A4({matrix:Ie,number:Di,subtract:Sr,typed:Z}),poe=rte({abs:Fn,addScalar:kr,deepEqual:pf,divideScalar:fr,multiplyScalar:xr,sqrt:Oa,subtractScalar:xa,typed:Z}),vf=sH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,divideScalar:fr,equalScalar:vt,matrix:Ie,typed:Z}),hI=pG({larger:Dn,smaller:An}),pI=uQ({Index:vn,typed:Z}),voe=ite({abs:Fn,add:bt,addScalar:kr,config:be,divideScalar:fr,equalScalar:vt,flatten:Io,isNumeric:Ro,isZero:ya,matrix:Ie,multiply:qt,multiplyScalar:xr,smaller:An,subtract:Sr,typed:Z}),goe=TV({BigNumber:Pe,add:bt,config:be,equal:Un,isInteger:Ln,mod:dI,smaller:An,typed:Z,xgcd:aI}),yoe=aV({concat:At,equalScalar:vt,matrix:Ie,typed:Z}),xoe=eH({Complex:Jt,config:be,divideScalar:fr,log:vx,typed:Z}),boe=dH({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:xa,typed:Z}),bx=R4({config:be,isNaN:vi,larger:Dn,numeric:ma,typed:Z}),Ql=C4({bignumber:zn,matrix:Ie,add:bt,config:be,equal:Un,isPositive:Fo,isZero:ya,larger:Dn,largerEq:Yh,smaller:An,smallerEq:Wl,typed:Z}),woe=T4({Index:vn,matrix:Ie,range:Ql,typed:Z}),Noe=FW({DenseMatrix:ft,Index:vn,compareNatural:ai,size:$r,subset:ta,typed:Z}),_oe=BW({DenseMatrix:ft,Index:vn,compareNatural:ai,size:$r,subset:ta,typed:Z}),Soe=LW({Index:vn,compareNatural:ai,size:$r,subset:ta,typed:Z}),Eoe=qW({Index:vn,compareNatural:ai,size:$r,subset:ta,typed:Z}),vI=jX({SparseMatrix:Lr,abs:Fn,add:bt,divideScalar:fr,larger:Dn,largerEq:Yh,multiply:qt,subtract:Sr,transpose:mf,typed:Z}),Aoe=aG({compare:Oo,compareNatural:ai,matrix:Ie,typed:Z}),wx=tz({config:be,numeric:ma,typed:Z}),gI=hH({DenseMatrix:ft,divideScalar:fr,equalScalar:vt,matrix:Ie,multiplyScalar:xr,subtractScalar:xa,typed:Z}),Doe=P4({concat:At,equalScalar:vt,matrix:Ie,not:Zm,typed:Z,zeros:tn}),Nx=wz({DenseMatrix:ft,config:be,equalScalar:vt,matrix:Ie,round:fu,typed:Z,zeros:tn}),yI=N4({Index:vn,matrix:Ie,range:Ql,typed:Z}),Coe=V4({add:bt,typed:Z,unaryPlus:wx}),xI=Mz({Complex:Jt,DenseMatrix:ft,ceil:Nx,equalScalar:vt,floor:uI,matrix:Ie,typed:Z,zeros:tn}),bI=RW({DenseMatrix:ft,Index:vn,compareNatural:ai,size:$r,subset:ta,typed:Z}),Toe=VW({Index:vn,compareNatural:ai,size:$r,subset:ta,typed:Z}),wI=QW({Index:vn,concat:At,setDifference:bI,size:$r,subset:ta,typed:Z}),NI=yG({FibonacciHeap:hI,addScalar:kr,equalScalar:vt}),_x=z4({add:bt,config:be,numeric:ma,typed:Z}),Bo=Ree({abs:Fn,addScalar:kr,det:mI,divideScalar:fr,identity:Ps,matrix:Ie,multiply:qt,typed:Z,unaryMinus:ni}),_I=fX({DenseMatrix:ft,Spa:NI,SparseMatrix:Lr,abs:Fn,addScalar:kr,divideScalar:fr,equalScalar:vt,larger:Dn,matrix:Ie,multiplyScalar:xr,subtractScalar:xa,typed:Z,unaryMinus:ni}),Moe=Bee({Complex:Jt,add:bt,ctranspose:px,deepEqual:pf,divideScalar:fr,dot:Jh,dotDivide:vf,equal:Un,inv:Bo,matrix:Ie,multiply:qt,typed:Z}),Ba=Wq({Complex:Jt,config:be,fraction:hf,identity:Ps,inv:Bo,matrix:Ie,multiply:qt,number:Di,typed:Z}),SI=kW({DenseMatrix:ft,Index:vn,compareNatural:ai,size:$r,subset:ta,typed:Z}),Ioe=KW({Index:vn,concat:At,setIntersect:SI,setSymDifference:wI,size:$r,subset:ta,typed:Z}),Foe=Hee({abs:Fn,add:bt,identity:Ps,inv:Bo,map:Po,max:bx,multiply:qt,size:$r,sqrt:Oa,subtract:Sr,typed:Z}),tt=EG({BigNumber:Pe,Complex:Jt,Fraction:To,abs:Fn,addScalar:kr,config:be,divideScalar:fr,equal:Un,fix:xI,format:df,isNumeric:Ro,multiplyScalar:xr,number:Di,pow:Ba,round:fu,subtractScalar:xa,toBest:rI}),Poe=mne({BigNumber:Pe,Unit:tt,config:be}),Roe=Xne({BigNumber:Pe,Unit:tt,config:be}),Ooe=jne({BigNumber:Pe,Unit:tt,config:be}),Boe=gne({BigNumber:Pe,Unit:tt,config:be}),joe=$ne({BigNumber:Pe,Unit:tt,config:be}),koe=yne({BigNumber:Pe,Unit:tt,config:be}),$oe=hne({BigNumber:Pe,Unit:tt,config:be}),Loe=IG({Unit:tt,typed:Z}),zoe=Mne({BigNumber:Pe,Unit:tt,config:be}),Voe=aH({DenseMatrix:ft,SparseMatrix:Lr,concat:At,equalScalar:vt,matrix:Ie,pow:Ba,typed:Z}),Uoe=dne({BigNumber:Pe,Unit:tt,config:be}),qoe=vne({BigNumber:Pe,Unit:tt,config:be}),Hoe=Uee({abs:Fn,add:bt,identity:Ps,inv:Bo,multiply:qt,typed:Z}),Goe=Lne({BigNumber:Pe,Unit:tt,config:be}),EI=iq({addScalar:kr,ceil:Nx,conj:Mo,divideScalar:fr,dotDivide:vf,exp:eI,i:X4,log2:dx,matrix:Ie,multiplyScalar:xr,pow:Ba,tau:J4,typed:Z}),Sx=_te({BigNumber:Pe,Complex:Jt,config:be,multiplyScalar:xr,pow:Ba,typed:Z}),Woe=lne({BigNumber:Pe,Unit:tt,config:be}),Qoe=Cne({BigNumber:Pe,Unit:tt,config:be}),Xoe=oq({conj:Mo,dotDivide:vf,fft:EI,typed:Z}),Koe=Nne({BigNumber:Pe,Unit:tt,config:be}),Joe=Vne({BigNumber:Pe,Unit:tt,config:be}),Yoe=fne({BigNumber:Pe,Unit:tt,config:be}),Zoe=Kne({BigNumber:Pe,Unit:tt,config:be}),ele=qne({BigNumber:Pe,Unit:tt,config:be}),tle=Ine({BigNumber:Pe,Unit:tt,config:be}),rle=wne({BigNumber:Pe,Unit:tt,config:be}),nle=rae({BigNumber:Pe,Unit:tt,config:be}),ale=Zne({BigNumber:Pe,Unit:tt,config:be}),ile=nae({BigNumber:Pe,Unit:tt,config:be}),sle=Tne({BigNumber:Pe,Unit:tt,config:be}),ole=Fne({BigNumber:Pe,Unit:tt,config:be}),lle=cne({BigNumber:Pe,Unit:tt,config:be}),ule=Pne({BigNumber:Pe,Unit:tt,config:be}),cle=Wne({BigNumber:Pe,Unit:tt,config:be}),fle=one({BigNumber:Pe,Unit:tt,config:be}),dle=Qne({BigNumber:Pe,Unit:tt,config:be}),mle=Rne({BigNumber:Pe,Unit:tt,config:be}),hle=kne({BigNumber:Pe,Unit:tt,config:be}),ple=_ne({BigNumber:Pe,Unit:tt,config:be}),vle=pne({BigNumber:Pe,Unit:tt,config:be}),nn=ete({divideScalar:fr,equalScalar:vt,inv:Bo,matrix:Ie,multiply:qt,typed:Z}),gle=Ene({BigNumber:Pe,Unit:tt,config:be}),ti=Dte({gamma:Sx,typed:Z}),yle=zne({BigNumber:Pe,Unit:tt,config:be}),xle=Yne({BigNumber:Pe,Unit:tt,config:be}),ble=xne({BigNumber:Pe,Unit:tt,config:be}),AI=$X({DenseMatrix:ft,lsolve:fI,lup:_I,matrix:Ie,slu:vI,typed:Z,usolve:xx}),wle=bne({BigNumber:Pe,Unit:tt,config:be}),Nle=Jne({BigNumber:Pe,Unit:tt,config:be}),_le=Ite({add:bt,divide:nn,factorial:ti,isInteger:Ln,isPositive:Fo,multiply:qt,typed:Z}),Sle=Pte({factorial:ti,typed:Z}),Ele=eae({BigNumber:Pe,Unit:tt,config:be}),Ale=zX({add:bt,cbrt:oI,divide:nn,equalScalar:vt,im:fx,isZero:ya,multiply:qt,re:mx,sqrt:Oa,subtract:Sr,typeOf:hx,typed:Z,unaryMinus:ni}),Dle=GW({compareNatural:ai,typed:Z}),Cle=mq({abs:Fn,add:bt,bignumber:zn,divide:nn,isNegative:Fs,isPositive:Fo,larger:Dn,map:Po,matrix:Ie,max:bx,multiply:qt,smaller:An,subtract:Sr,typed:Z,unaryMinus:ni}),DI=ire({bignumber:zn,addScalar:kr,combinations:Qh,divideScalar:fr,factorial:ti,isInteger:Ln,isNegative:Fs,larger:Dn,multiplyScalar:xr,number:Di,pow:Ba,subtractScalar:xa,typed:Z}),Tle=DG({Unit:tt,typed:Z}),Mle=ore({addScalar:kr,isInteger:Ln,isNegative:Fs,stirlingS2:DI,typed:Z}),CI=zee({abs:Fn,add:bt,addScalar:kr,atan:Z4,bignumber:zn,column:yI,complex:Xh,config:be,cos:ux,diag:iI,divideScalar:fr,dot:Jh,equal:Un,flatten:Io,im:fx,inv:Bo,larger:Dn,matrix:Ie,matrixFromColumns:gx,multiply:qt,multiplyScalar:xr,number:Di,qr:yx,re:mx,reshape:nI,sin:Kh,size:$r,smaller:An,sqrt:Oa,subtract:Sr,typed:Z,usolve:xx,usolveAll:gI}),Ile=Ane({BigNumber:Pe,Unit:tt,config:be}),Fle=Une({BigNumber:Pe,Unit:tt,config:be}),Ple=Tte({divide:nn,dotDivide:vf,isNumeric:Ro,log:vx,map:Po,matrix:Ie,multiply:qt,sum:_x,typed:Z}),TI=U4({add:bt,divide:nn,typed:Z}),Rle=Hne({BigNumber:Pe,Unit:tt,config:be}),Ole=une({BigNumber:Pe,Unit:tt,config:be}),Ble=H4({bignumber:zn,add:bt,compare:Oo,divide:nn,isInteger:Ln,larger:Dn,mapSlices:Wc,multiply:qt,partitionSelect:Zh,smaller:An,smallerEq:Wl,subtract:Sr,typed:Z}),Ex=q4({add:bt,divide:nn,isNaN:vi,mapSlices:Wc,multiply:qt,subtract:Sr,typed:Z}),jle=Sne({BigNumber:Pe,Unit:tt,config:be}),MI=cte({add:bt,compare:Oo,divide:nn,partitionSelect:Zh,typed:Z}),kle=gte({add:bt,divide:nn,matrix:Ie,mean:TI,multiply:qt,pow:Ba,sqrt:Oa,subtract:Sr,sum:_x,typed:Z}),$le=Bre({Complex:Jt,add:bt,divide:nn,matrix:Ie,multiply:qt,typed:Z}),Lle=dte({abs:Fn,map:Po,median:MI,subtract:Sr,typed:Z}),zle=G4({map:Po,sqrt:Oa,typed:Z,variance:Ex}),Vle=wq({BigNumber:Pe,Complex:Jt,add:bt,config:be,divide:nn,equal:Un,factorial:ti,gamma:Sx,isNegative:Fs,multiply:qt,pi:Jg,pow:Ba,sin:Kh,smallerEq:Wl,subtract:Sr,typed:Z}),Ax=rQ({abs:Fn,add:bt,conj:Mo,ctranspose:px,eigs:CI,equalScalar:vt,larger:Dn,matrix:Ie,multiply:qt,pow:Ba,smaller:An,sqrt:Oa,typed:Z}),II=VU({BigNumber:Pe,DenseMatrix:ft,SparseMatrix:Lr,addScalar:kr,config:be,cos:ux,matrix:Ie,multiplyScalar:xr,norm:Ax,sin:Kh,typed:Z,unaryMinus:ni}),Ule=tae({BigNumber:Pe,Unit:tt,config:be}),FI=Xee({identity:Ps,matrix:Ie,multiply:qt,norm:Ax,qr:yx,subtract:Sr,typed:Z}),qle=LU({multiply:qt,rotationMatrix:II,typed:Z}),PI=Wee({abs:Fn,add:bt,concat:At,identity:Ps,index:pI,lusolve:AI,matrix:Ie,matrixFromColumns:gx,multiply:qt,range:Ql,schur:FI,subset:ta,subtract:Sr,transpose:mf,typed:Z}),Hle=Jee({matrix:Ie,multiply:qt,sylvester:PI,transpose:mf,typed:Z}),du={},gf={},RI={},Nn=dQ({mathWithTransform:gf}),mu=kQ({Node:Nn}),Ci=LQ({Node:Nn}),jo=VQ({Node:Nn}),OI=GQ({Node:Nn}),hu=vQ({Node:Nn}),BI=NQ({Node:Nn,ResultSet:K4}),jI=SQ({Node:Nn}),Rs=FQ({Node:Nn}),kI=qQ({Node:Nn}),Gle=$re({classes:RI}),Dx=WX({math:du,typed:Z}),$I=RQ({Node:Nn,typed:Z}),Wle=Mee({Chain:Dx,typed:Z}),pu=BQ({Node:Nn,size:$r}),vu=hQ({Node:Nn,subset:ta}),LI=bQ({matrix:Ie,Node:Nn,subset:ta}),Os=XQ({Unit:tt,Node:Nn,math:du}),Bs=JQ({Node:Nn,SymbolNode:Os,math:du}),ja=ZQ({AccessorNode:vu,ArrayNode:hu,AssignmentNode:LI,BlockNode:BI,ConditionalNode:jI,ConstantNode:Rs,FunctionAssignmentNode:$I,FunctionNode:Bs,IndexNode:pu,ObjectNode:mu,OperatorNode:Ci,ParenthesisNode:jo,RangeNode:kI,RelationalNode:OI,SymbolNode:Os,config:be,numeric:ma,typed:Z}),zI=Are({ConstantNode:Rs,FunctionNode:Bs,OperatorNode:Ci,ParenthesisNode:jo,parse:ja,typed:Z}),Cx=wre({bignumber:zn,fraction:hf,AccessorNode:vu,ArrayNode:hu,ConstantNode:Rs,FunctionNode:Bs,IndexNode:pu,ObjectNode:mu,OperatorNode:Ci,SymbolNode:Os,config:be,mathWithTransform:gf,matrix:Ie,typed:Z}),Qle=tX({parse:ja,typed:Z}),Tx=_re({AccessorNode:vu,ArrayNode:hu,ConstantNode:Rs,FunctionNode:Bs,IndexNode:pu,ObjectNode:mu,OperatorNode:Ci,ParenthesisNode:jo,SymbolNode:Os,add:bt,divide:nn,equal:Un,isZero:ya,multiply:qt,parse:ja,pow:Ba,subtract:Sr,typed:Z}),js=nX({parse:ja,typed:Z}),VI=qX({evaluate:js}),UI=sX({evaluate:js,parse:ja}),ep=yre({AccessorNode:vu,ArrayNode:hu,ConstantNode:Rs,FunctionNode:Bs,IndexNode:pu,ObjectNode:mu,OperatorNode:Ci,ParenthesisNode:jo,SymbolNode:Os,equal:Un,parse:ja,replacer:Y4,resolve:zI,simplifyConstant:Cx,simplifyCore:Tx,typed:Z}),Xle=Cre({OperatorNode:Ci,parse:ja,simplify:ep,typed:Z}),Kle=mre({parse:ja,typed:Z}),Jle=uX({Parser:UI,typed:Z}),Yle=Fre({bignumber:zn,fraction:hf,AccessorNode:vu,ArrayNode:hu,ConstantNode:Rs,FunctionNode:Bs,IndexNode:pu,ObjectNode:mu,OperatorNode:Ci,ParenthesisNode:jo,SymbolNode:Os,add:bt,config:be,divide:nn,equal:Un,isZero:ya,mathWithTransform:gf,matrix:Ie,multiply:qt,parse:ja,pow:Ba,simplify:ep,simplifyConstant:Cx,simplifyCore:Tx,subtract:Sr,typed:Z}),qI=Mre({ConstantNode:Rs,FunctionNode:Bs,OperatorNode:Ci,ParenthesisNode:jo,SymbolNode:Os,config:be,equal:Un,isZero:ya,numeric:ma,parse:ja,simplify:ep,typed:Z}),Zle=Cee({Help:VI,mathWithTransform:gf,typed:Z});Nr(du,{e:wA,false:Eie,fineStructure:Aie,i:X4,Infinity:Die,LN10:Cie,LOG10E:Tie,NaN:Mie,null:Iie,phi:Fie,SQRT1_2:Rie,sackurTetrode:Oie,tau:J4,true:Bie,E:wA,version:jie,efimovFactor:kie,LN2:$ie,pi:Jg,replacer:Y4,reviver:Gle,SQRT2:Lie,typed:Z,PI:Jg,weakMixingAngle:zie,abs:Fn,acos:Vie,acot:Uie,acsc:qie,addScalar:kr,arg:Hie,asech:Gie,asinh:Wie,atan:Z4,atanh:Qie,bigint:Xie,bitNot:Kie,boolean:Jie,clone:Yie,combinations:Qh,complex:Xh,conj:Mo,cos:ux,cot:Zie,csc:ese,cube:tse,equalScalar:vt,erf:rse,exp:eI,expm1:nse,filter:ase,flatten:Io,forEach:ise,format:df,getMatrixDataType:cx,hex:sse,im:fx,isInteger:Ln,isNegative:Fs,isPositive:Fo,isZero:ya,LOG2E:ose,lgamma:lse,log10:use,log2:dx,map:Po,multiplyScalar:xr,not:Zm,number:Di,oct:cse,pickRandom:fse,print:dse,random:mse,re:mx,sec:hse,sign:tI,sin:Kh,size:$r,splitUnit:pse,square:vse,string:gse,subtractScalar:xa,tan:yse,toBest:rI,typeOf:hx,acosh:xse,acsch:bse,asec:wse,bignumber:zn,chain:Wle,combinationsWithRep:Nse,cosh:_se,csch:Sse,dot:Jh,isNaN:vi,isPrime:Ese,mapSlices:Wc,matrix:Ie,matrixFromFunction:Ase,multiply:qt,ones:Dse,randomInt:Cse,reshape:nI,sech:Tse,sinh:Mse,sparse:Ise,sqrt:Oa,squeeze:Fse,tanh:Pse,transpose:mf,xgcd:aI,zeros:tn,acoth:Rse,asin:Ose,bin:Bse,concat:At,coth:jse,ctranspose:px,diag:iI,dotMultiply:kse,equal:Un,fraction:hf,identity:Ps,isNumeric:Ro,kron:$se,largerEq:Yh,leftShift:Lse,matrixFromRows:zse,mode:Vse,nthRoot:Use,numeric:ma,prod:sI,resize:qse,rightArithShift:Hse,round:fu,smaller:An,to:Gse,unaryMinus:ni,unequal:Wse,xor:Qse,add:bt,atan2:Xse,bitAnd:Kse,bitOr:Jse,bitXor:Yse,cbrt:oI,compare:Oo,compareText:lI,count:Zse,deepEqual:pf,divideScalar:fr,equalText:eoe,floor:uI,gcd:toe,hasNumericValue:roe,hypot:noe,larger:Dn,log:vx,lsolve:fI,matrixFromColumns:gx,min:aoe,mod:dI,nthRoots:ioe,nullish:soe,or:ooe,partitionSelect:Zh,qr:yx,rightLogShift:loe,smallerEq:Wl,subset:ta,subtract:Sr,trace:uoe,usolve:xx,zpk2tf:coe,catalan:foe,compareNatural:ai,composition:doe,cross:moe,det:mI,diff:hoe,distance:poe,dotDivide:vf,index:pI,intersect:voe,invmod:goe,lcm:yoe,log1p:xoe,lsolveAll:boe,max:bx,range:Ql,row:woe,setCartesian:Noe,setDistinct:_oe,setIsSubset:Soe,setPowerset:Eoe,slu:vI,sort:Aoe,unaryPlus:wx,usolveAll:gI,and:Doe,ceil:Nx,column:yI,cumsum:Coe,fix:xI,setDifference:bI,setMultiplicity:Toe,setSymDifference:wI,sum:_x,inv:Bo,lup:_I,pinv:Moe,pow:Ba,setIntersect:SI,setUnion:Ioe,sqrtm:Foe,vacuumImpedance:Poe,wienDisplacement:Roe,atomicMass:Ooe,bohrMagneton:Boe,boltzmann:joe,conductanceQuantum:koe,coulomb:$oe,createUnit:Loe,deuteronMass:zoe,dotPow:Voe,electricConstant:Uoe,elementaryCharge:qoe,expm:Hoe,faraday:Goe,fft:EI,gamma:Sx,gravitationConstant:Woe,hartreeEnergy:Qoe,ifft:Xoe,klitzing:Koe,loschmidt:Joe,magneticConstant:Yoe,molarMass:Zoe,molarPlanckConstant:ele,neutronMass:tle,nuclearMagneton:rle,planckCharge:nle,planckLength:ale,planckTemperature:ile,protonMass:sle,quantumOfCirculation:ole,reducedPlanckConstant:lle,rydberg:ule,secondRadiation:cle,speedOfLight:fle,stefanBoltzmann:dle,thomsonCrossSection:mle,avogadro:hle,bohrRadius:ple,coulombConstant:vle,divide:nn,electronMass:gle,factorial:ti,firstRadiation:yle,gravity:xle,inverseConductanceQuantum:ble,lusolve:AI,magneticFluxQuantum:wle,molarMassC12:Nle,multinomial:_le,parse:ja,permutations:Sle,planckMass:Ele,polynomialRoot:Ale,resolve:zI,setSize:Dle,simplifyConstant:Cx,solveODE:Cle,stirlingS2:DI,unit:Tle,bellNumbers:Mle,compile:Qle,eigs:CI,fermiCoupling:Ile,gasConstant:Fle,kldivergence:Ple,mean:TI,molarVolume:Rle,planckConstant:Ole,quantileSeq:Ble,simplifyCore:Tx,variance:Ex,classicalElectronRadius:jle,evaluate:js,median:MI,simplify:ep,symbolicEqual:Xle,corr:kle,freqz:$le,leafCount:Kle,mad:Lle,parser:Jle,rationalize:Yle,std:zle,zeta:Vle,derivative:qI,norm:Ax,rotationMatrix:II,help:Zle,planckTime:Ule,schur:FI,rotate:qle,sylvester:PI,lyap:Hle,config:be});Nr(gf,du,{mapSlices:oae({isInteger:Ln,typed:Z}),filter:pae({typed:Z}),forEach:yae({typed:Z}),map:Sae({typed:Z}),or:pie({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),and:die({add:bt,concat:At,equalScalar:vt,matrix:Ie,not:Zm,typed:Z,zeros:tn}),concat:Wae({isInteger:Ln,matrix:Ie,typed:Z}),max:Tae({config:be,isNaN:vi,larger:Dn,numeric:ma,typed:Z}),print:uie({add:bt,matrix:Ie,typed:Z,zeros:tn}),sum:eie({add:bt,config:be,numeric:ma,typed:Z}),bitAnd:wie({add:bt,concat:At,equalScalar:vt,matrix:Ie,not:Zm,typed:Z,zeros:tn}),min:Oae({config:be,isNaN:vi,numeric:ma,smaller:An,typed:Z}),nullish:yie({deepEqual:pf,flatten:Io,matrix:Ie,size:$r,typed:Z}),subset:qae({add:bt,matrix:Ie,typed:Z,zeros:tn}),bitOr:Sie({DenseMatrix:ft,concat:At,equalScalar:vt,matrix:Ie,typed:Z}),diff:Xae({bignumber:zn,matrix:Ie,number:Di,subtract:Sr,typed:Z}),index:wae({Index:vn,getMatrixDataType:cx}),range:kae({bignumber:zn,matrix:Ie,add:bt,config:be,equal:Un,isPositive:Fo,isZero:ya,larger:Dn,largerEq:Yh,smaller:An,smallerEq:Wl,typed:Z}),row:zae({Index:vn,matrix:Ie,range:Ql,typed:Z}),column:cae({Index:vn,matrix:Ie,range:Ql,typed:Z}),cumsum:iie({add:bt,typed:Z,unaryPlus:wx}),mean:Fae({add:bt,divide:nn,typed:Z}),quantileSeq:nie({add:bt,bignumber:zn,compare:Oo,divide:nn,isInteger:Ln,larger:Dn,mapSlices:Wc,multiply:qt,partitionSelect:Zh,smaller:An,smallerEq:Wl,subtract:Sr,typed:Z}),variance:oie({add:bt,divide:nn,isNaN:vi,mapSlices:Wc,multiply:qt,subtract:Sr,typed:Z}),std:Yae({map:Po,sqrt:Oa,typed:Z,variance:Ex})});Nr(RI,{BigNumber:Pe,Complex:Jt,Fraction:To,Matrix:Wh,Node:Nn,ObjectNode:mu,OperatorNode:Ci,ParenthesisNode:jo,Range:Pie,RelationalNode:OI,ResultSet:K4,ArrayNode:hu,BlockNode:BI,ConditionalNode:jI,ConstantNode:Rs,DenseMatrix:ft,RangeNode:kI,Chain:Dx,FunctionAssignmentNode:$I,SparseMatrix:Lr,IndexNode:pu,ImmutableDenseMatrix:cI,Index:vn,AccessorNode:vu,AssignmentNode:LI,FibonacciHeap:hI,Spa:NI,Unit:tt,SymbolNode:Os,FunctionNode:Bs,Help:VI,Parser:UI});Dx.createProxy(du);function NA(t,e,r,n){const a=[];let i=0,s=t;for(let l=0;l<=n;l++){const u=js(s,{x:e}),o=u*Math.pow(r-e,l)/ti(l);i+=o,a.push({i:l,fx0:u,term:o}),s=qI(s,"x").toString()}return{result:i,terms:a}}function eue(){const[t,e]=U.useState("e^x"),[r,n]=U.useState(0),[a,i]=U.useState(1),[s,l]=U.useState(3),[u,o]=U.useState("-"),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=U.useState([]),{problems:p,removingIds:h,refresh:D,saveProblem:w,deleteProblem:S}=$t(bk);U.useEffect(()=>{D().catch(console.error)},[D]);const x=()=>{try{const{result:_,terms:E}=NA(t,r,a,s);o(_),m(E),f("สถานะ: คำนวณสำเร็จ")}catch(_){console.error(_),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),o("-"),m([])}},b=()=>{e("e^x"),n(0),i(1),l(3),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},N=async()=>{try{await w({expr:t,x0:r,x:a,n:s,method:"taylor"}),alert("บันทึกแล้ว!")}catch(_){alert("บันทึกไม่สำเร็จ: "+((_==null?void 0:_.message)||String(_)))}},g=_=>{e(_.expr),n(_.x0),i(_.x),l(_.n)},y=_=>{confirm("ลบโจทย์นี้ไหม?")&&S(_.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Taylor Series Approximation",subtitle:"การประมาณค่า f(x) ด้วยอนุพันธ์หลายลำดับ (Taylor Series)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),v.jsx("input",{type:"text",value:t,onChange:_=>e(_.target.value),placeholder:"เช่น e^x, sin(x), x^3 + 2x",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),v.jsx("input",{type:"number",value:r,onChange:_=>n(parseFloat(_.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x"}),v.jsx("input",{type:"number",value:a,onChange:_=>i(parseFloat(_.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนเทอม (n)"}),v.jsx("input",{type:"number",value:s,onChange:_=>l(parseInt(_.target.value)||1),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:b,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:p,onLoad:g,onDelete:y,removingIds:h})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์และกราฟ"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded mb-3",children:v.jsx(sf,{func:_=>NA(t,r,_,s).result,xl:r-2,xr:r+2,iterations:d.map((_,E)=>({i:E,xi:r,fx:_.fx0})),method:"Taylor Series",className:"w-full h-72"})}),d.length>0&&v.jsx("div",{className:"mt-3",children:v.jsx(Vc,{iterations:d.map((_,E)=>({iter:_.i??E,x:a,fx:_.fx0,error:_.term}))})}),u!=="-"&&v.jsx("div",{className:"text-sm text-gray-300",children:v.jsxs("p",{children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(u)})]})})]})]}),d.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Vc,{iterations:d.map((_,E)=>({iter:_.i??E,x:a,fx:_.fx0,error:_.term}))})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Mx="problems_newtonraphson";async function Ix(){const t=Pt(Ue(Ce,Mx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function Fx(t){return jt(Ue(Ce,Mx),{...t,method:"newton",createdAt:kt()})}async function Px(t){return Bt(Tt(Ce,Mx,t))}async function HI(){return Ix()}async function GI(t){return Fx(t)}async function WI(t){return Px(t)}const tue={getNewtonProblems:Ix,saveNewtonProblem:Fx,deleteNewtonProblem:Px,getProblems:HI,save:GI,remove:WI},rue=Object.freeze(Object.defineProperty({__proto__:null,default:tue,deleteNewtonProblem:Px,getNewtonProblems:Ix,getProblems:HI,remove:WI,save:GI,saveNewtonProblem:Fx},Symbol.toStringTag,{value:"Module"}));function nue(t,e,r=1e-6,n=50){try{const a=[];let i=e;for(let s=0;s<=n;s++){let l=t(i);if(!isFinite(l))return{error:"f(x) คำนวณไม่ได้",iterations:a,converged:!1};const u=1e-8,o=(t(i+u)-t(i-u))/(2*u);if(!isFinite(o)||o===0)return{error:"อนุพันธ์เป็นศูนย์หรือคำนวณไม่ได้",iterations:a,converged:!1};const c=i-l/o,f=Math.abs(c-i)/(Math.abs(c)>1e-12?Math.abs(c):1);if(a.push({iter:s,x:i,fx:l,dfx:o,x1:c,error:f}),f<=r)return{root:c,iterations:a,converged:!0};i=c}return{root:i,iterations:a,converged:!1}}catch(a){return{error:String(a),iterations:[],converged:!1}}}function aue(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,l]=U.useState(""),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=U.useState("-"),[p,h]=U.useState("-"),{problems:D,removingIds:w,refresh:S,saveProblem:x,deleteProblem:b}=$t(rue);U.useEffect(()=>{S().catch(console.error)},[S]);const N=()=>{const T=yn(t);if(!T){f("สถานะ: สมการไม่ถูกต้อง");return}const M=parseFloat(r),I=parseFloat(a),j=parseInt(s,10);if(isNaN(M)){f("สถานะ: x0 ไม่ถูกต้อง");return}if(!isFinite(I)||I<=0){f("สถานะ: Error ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(j)||j<=0){f("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const O=nue(T,M,I,j);if(O.error){f("สถานะ: "+O.error);return}o(O.iterations),f("สถานะ: เสร็จสิ้น "+(O.converged?"(Converged)":"(ไม่ Converged)")),h(O.iterations.length),m(Fe(O.root))},g=()=>{e(""),n(""),i(""),l(""),o([]),f("สถานะ: รีเซ็ตแล้ว"),h("-"),m("-")},y=async()=>{if(!t||!r||!a||!s){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await x({expr:t,x0:r,tol:a,maxIter:s,method:"newton_raphson"}),alert("บันทึกแล้ว!")}catch(T){console.error("บันทึกโจทย์ผิดพลาด:",T),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},_=T=>{e(T.expr??""),n(T.x0??""),i(T.tol??""),l(T.maxIter??"")},E=T=>{confirm(`ลบโจทย์นี้ไหม?
${T.expr}`)&&b(T.id)},C=yn(t)||(T=>T);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Newton-Raphson Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน (เวอร์ชันใหม่)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),v.jsx("input",{type:"text",value:t,onChange:T=>e(T.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x₀"}),v.jsx("input",{type:"number",value:r,onChange:T=>n(T.target.value),placeholder:"เช่น 1.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),v.jsx("input",{type:"text",value:a,onChange:T=>i(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:s,onChange:T=>l(T.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-4",children:[v.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:g,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsxs("div",{className:"text-sm mb-2 text-gray-300",children:[v.jsx("div",{children:c}),v.jsxs("div",{children:["Iterations: ",p]}),v.jsxs("div",{children:["Root: ",d]})]}),v.jsx(Lt,{problems:D,onLoad:_,onDelete:E,removingIds:w})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟการลู่เข้าสู่รากของสมการ"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(sf,{func:C,xl:parseFloat(r)-5||-5,xr:parseFloat(r)+5||5,iterations:u,method:"Newton-Raphson",className:"w-full h-72 rounded"})}),v.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เส้นสีฟ้า = f(x), จุดส้ม = ค่าที่ได้ในแต่ละ iteration, จุดสุดท้าย = ค่ารากสุดท้าย"})]})]}),v.jsx("div",{className:"mt-6",children:v.jsx(Vc,{iterations:u})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Rx="problems_secant";async function Ox(){const t=Pt(Ue(Ce,Rx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function Bx(t){return jt(Ue(Ce,Rx),{...t,method:"secant",createdAt:kt()})}async function jx(t){return Bt(Tt(Ce,Rx,t))}async function QI(){return Ox()}async function XI(t){return Bx(t)}async function KI(t){return jx(t)}const iue={getSecantProblems:Ox,saveSecantProblem:Bx,deleteSecantProblem:jx,getProblems:QI,save:XI,remove:KI},sue=Object.freeze(Object.defineProperty({__proto__:null,default:iue,deleteSecantProblem:jx,getProblems:QI,getSecantProblems:Ox,remove:KI,save:XI,saveSecantProblem:Bx},Symbol.toStringTag,{value:"Module"}));function oue(t,e,r,n=1e-6,a=50){try{const i=[];let s=e,l=r,u=t(s),o=t(l);if(!isFinite(u)||!isFinite(o))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};for(let c=0;c<=a;c++){if(o-u===0)return{error:"หารศูนย์ในสูตร Secant",iterations:i,converged:!1};const f=l-o*(l-s)/(o-u),d=t(f),m=Math.abs((f-l)/(Math.abs(f)>1e-12?Math.abs(f):1));if(i.push({iter:c,x0:s,x1:l,x2:f,fx2:d,error:m}),!isFinite(d))return{error:"f(x) คำนวณไม่ได้",iterations:i,converged:!1};if(m<=n)return{root:f,iterations:i,converged:!0};s=l,u=o,l=f,o=d}return{root:l,iterations:i,converged:!1}}catch(i){return{error:String(i),iterations:[],converged:!1}}}function lue(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,l]=U.useState(""),[u,o]=U.useState(""),[c,f]=U.useState([]),[d,m]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[p,h]=U.useState("-"),[D,w]=U.useState("-"),{problems:S,removingIds:x,refresh:b,saveProblem:N,deleteProblem:g}=$t(sue);U.useEffect(()=>{b().catch(console.error)},[b]);const y=()=>{const I=yn(t);if(!I){m("สถานะ: สมการไม่ถูกต้อง");return}const j=parseFloat(r),O=parseFloat(a),P=parseFloat(s),H=parseInt(u,10);if(isNaN(j)||isNaN(O)){m("สถานะ: x0/x1 ไม่ถูกต้อง");return}if(!isFinite(P)||P<=0){m("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(H)||H<=0){m("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const $=oue(I,j,O,P,H);if($.error){m("สถานะ: "+$.error);return}f($.iterations),m("สถานะ: เสร็จสิ้น "+($.converged?"(Converged)":"(ไม่ Converged)")),w($.iterations.length),h(Fe($.root))},_=()=>{e(""),n(""),i(""),l(""),o(""),f([]),m("สถานะ: รีเซ็ตแล้ว"),w("-"),h("-")},E=async()=>{if(!t||!r||!a||!s||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await N({expr:t,x0:r,x1:a,tol:s,maxIter:u,method:"secant"}),alert("บันทึกแล้ว!")}catch(I){console.error("บันทึกโจทย์ผิดพลาด:",I),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},C=I=>{e(I.expr??""),n(I.x0??""),i(I.x1??""),l(I.tol??""),o(I.maxIter??"")},T=I=>{confirm(`ลบโจทย์นี้ไหม?
${I.expr}`)&&g(I.id)},M=yn(t)||(I=>I);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Secant Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน (เวอร์ชันใหม่)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),v.jsx("input",{type:"text",value:t,onChange:I=>e(I.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x₀"}),v.jsx("input",{type:"number",value:r,onChange:I=>n(I.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x₁"}),v.jsx("input",{type:"number",value:a,onChange:I=>i(I.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),v.jsx("input",{type:"text",value:s,onChange:I=>l(I.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:u,onChange:I=>o(I.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-4",children:[v.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:E,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsxs("div",{className:"text-sm mb-2 text-gray-300",children:[v.jsx("div",{children:d}),v.jsxs("div",{children:["Iterations: ",D]}),v.jsxs("div",{children:["Root: ",p]})]}),v.jsx(Lt,{problems:S,onLoad:C,onDelete:T,removingIds:x})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(sf,{func:M,xl:parseFloat(r)-2||-5,xr:parseFloat(a)+2||5,iterations:c,method:"Secant",className:"w-full h-72"})}),v.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["จุดสีเขียว = x₀, จุดสีแดง = x₁, จุดส้ม = x",v.jsx("sub",{children:"i+1"})," แต่ละรอบ, วงกลมใหญ่ = ค่าสุดท้าย"]})]})]}),v.jsx("div",{className:"mt-6",children:v.jsx(Vc,{iterations:c})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const kx="problems_cramer";async function JI(){const t=Pt(Ue(Ce,kx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function YI(t){return jt(Ue(Ce,kx),{...t,method:"cramer",createdAt:kt()})}async function $x(t){return Bt(Tt(Ce,kx,t))}const uue=JI,cue=YI,fue=$x,due=$x,mue=Object.freeze(Object.defineProperty({__proto__:null,del:due,deleteCramerProblem:$x,getCramerProblems:JI,getProblems:uue,remove:fue,save:cue,saveCramerProblem:YI},Symbol.toStringTag,{value:"Module"}));function Yg(t){const e=t.length;if(e===0)return 0;if(e===1)return t[0][0];if(e===2)return t[0][0]*t[1][1]-t[0][1]*t[1][0];let r=0;for(let n=0;n<e;n++){const a=t.slice(1).map(i=>i.filter((s,l)=>l!==n));r+=t[0][n]*Yg(a)*(n%2===0?1:-1)}return r}function hue(t,e){try{if(!Array.isArray(t)||!Array.isArray(e))return{error:"Invalid input"};const r=t.length;if(r===0)return{error:"Empty matrix"};const n=Yg(t);if(!isFinite(n))return{error:"Determinant not finite"};if(Math.abs(n)<1e-12)return{error:"Determinant = 0 (ไม่มีคำตอบหรือมีหลายคำตอบ)"};const a=[];for(let i=0;i<r;i++){const s=t.map((l,u)=>l.map((o,c)=>c===i?e[u]:o));a.push(Yg(s)/n)}return{detA:n,results:a}}catch(r){return{error:String(r)}}}function Ti({iterations:t=[],width:e=800,height:r=320,className:n=""}){const a=U.useRef(null);return U.useEffect(()=>{const i=a.current;if(!i||t.length===0)return;const s=i.getContext("2d"),l=i.width=e,u=i.height=r;s.fillStyle="#061022",s.fillRect(0,0,l,u),s.strokeStyle="rgba(255,255,255,0.1)",s.beginPath(),s.moveTo(40,0),s.lineTo(40,u-30),s.lineTo(l,u-30),s.stroke();const o=t.map((h,D)=>D+1),c=t.map(h=>Math.log10(h.error||1e-16)),f=Math.min(...c),d=Math.max(...c),m=h=>40+(h-1)/(o.length-1)*(l-60),p=h=>u-30-(h-f)/(d-f)*(u-50);s.strokeStyle="#3b82f6",s.beginPath(),o.forEach((h,D)=>{const w=m(h),S=p(c[D]);D===0?s.moveTo(w,S):s.lineTo(w,S)}),s.stroke(),s.fillStyle="#f97316",o.forEach((h,D)=>{const w=m(h),S=p(c[D]);s.beginPath(),s.arc(w,S,3,0,2*Math.PI),s.fill()}),s.fillStyle="#aaa",s.font="12px sans-serif",s.fillText("Iteration",l/2-30,u-5),s.save(),s.translate(15,u/2),s.rotate(-Math.PI/2),s.fillText("log(Error)",0,0),s.restore()},[t,e,r]),v.jsx("canvas",{ref:a,width:e,height:r,className:n})}function Mi({iterations:t=[],solution:e=null,data:r=null}){var s,l,u,o,c,f,d,m,p;const n=Array.isArray(t)&&t.length,a=Array.isArray(e)&&e.length&&typeof e[0]=="number";if(!n&&!a&&!Array.isArray(r))return null;const i=a?e.length:n?((l=(s=t[0])==null?void 0:s.x)==null?void 0:l.length)||((o=(u=t[0])==null?void 0:u.values)==null?void 0:o.length)||0:((f=(c=r[0])==null?void 0:c.x)==null?void 0:f.length)||0;return v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"Iter"}),[...Array(i)].map((h,D)=>v.jsxs("th",{className:"p-2 text-center",children:["x",D+1]},D)),v.jsx("th",{className:"p-2 text-center",children:"Error"})]})}),v.jsx("tbody",{children:n?t.map((h,D)=>{let w=(h==null?void 0:h.error)??(h==null?void 0:h.err)??(h==null?void 0:h.e)??(h==null?void 0:h.term)??null;if(w==null&&D>0){const x=t[D-1],b=(h==null?void 0:h.x)??(h==null?void 0:h.values)??(h==null?void 0:h.solution)??null,N=(x==null?void 0:x.x)??(x==null?void 0:x.values)??(x==null?void 0:x.solution)??null;if(Array.isArray(b)&&Array.isArray(N)&&b.length===N.length){let g=0,y=0;for(let _=0;_<b.length;_++){const E=Number(b[_]),C=Number(N[_]);isFinite(E)&&isFinite(C)&&(g+=(E-C)*(E-C),y+=E*E)}y===0&&(y=1),w=Math.sqrt(g)/Math.sqrt(y)}}const S=(h==null?void 0:h.x)??(h==null?void 0:h.values)??(h==null?void 0:h.solution)??[];return v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900",children:[v.jsx("td",{className:"p-2 text-center font-medium",children:h.iter??D}),(S||[]).map((x,b)=>v.jsx("td",{className:"p-2 text-right",children:Fe(x)},b)),v.jsx("td",{className:"p-2 text-right",children:w!=null?Fe(w):"-"})]},D)}):v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900",children:[v.jsx("td",{className:"p-2 text-center font-medium",children:"result"}),e.map((h,D)=>v.jsx("td",{className:"p-2 text-right",children:Fe(h)},D)),v.jsx("td",{className:"p-2 text-right",children:Array.isArray(t)&&t.length?Fe(((d=t[t.length-1])==null?void 0:d.error)??((m=t[t.length-1])==null?void 0:m.err)??((p=t[t.length-1])==null?void 0:p.e)??"-"):"-"})]})})]})})}function pue(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([]),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(mue);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=hue(r,a);if(g.error){f("สถานะ: "+g.error),l([]);return}l(g.results),o(g.iterations??[]),f(`สถานะ: เสร็จสิ้น (detA = ${Fe(g.detA)})`)}catch(g){console.error(g),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),o([])}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l([]),f("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`,method:"cramer"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.A=="string"?JSON.parse(g.A):g.A||[],_=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(y),i(_),y&&Array.isArray(y)&&e(y.length)}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Cramer's Rule",subtitle:"หาคำตอบของระบบสมการเชิงเส้นโดยใช้ Determinant"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:g=>{const y=Math.max(1,parseInt(g.target.value)||1);e(y),n(Array(y).fill().map(()=>Array(y).fill(0))),i(Array(y).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((g,y)=>v.jsx("tr",{children:g.map((_,E)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:_,onChange:C=>{const T=r.map(M=>[...M]);T[y][E]=parseFloat(C.target.value)||0,n(T)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},E))},y))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((g,y)=>v.jsx("input",{type:"number",value:g,onChange:_=>{const E=[...a];E[y]=parseFloat(_.target.value)||0,i(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},y))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"ภาพรวมการแก้ระบบสมการ"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:s,method:"Cramer's Rule",className:"w-full h-72"})}),s.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:s.map((g,y)=>v.jsxs("li",{children:["x",y+1," = ",Fe(g)]},y))})]})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:s,iterations:u})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Lx="problems_gaussian";async function ZI(){const t=Pt(Ue(Ce,Lx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function eF(t){return jt(Ue(Ce,Lx),{...t,method:"gaussian",createdAt:kt()})}async function zx(t){return Bt(Tt(Ce,Lx,t))}const vue=ZI,gue=eF,yue=zx,xue=zx,bue=Object.freeze(Object.defineProperty({__proto__:null,del:xue,deleteGaussianProblem:zx,getGaussianProblems:ZI,getProblems:vue,remove:yue,save:gue,saveGaussianProblem:eF},Symbol.toStringTag,{value:"Module"}));function wue(t,e){const r=t.length,n=t.map(s=>[...s]),a=[...e];for(let s=0;s<r-1;s++){if(Math.abs(n[s][s])<1e-12)return{error:"Pivot = 0 (ควรใช้ Partial Pivoting)"};for(let l=s+1;l<r;l++){const u=n[l][s]/n[s][s];for(let o=s;o<r;o++)n[l][o]-=u*n[s][o];a[l]-=u*a[s]}}const i=Array(r).fill(0);for(let s=r-1;s>=0;s--){let l=0;for(let u=s+1;u<r;u++)l+=n[s][u]*i[u];if(Math.abs(n[s][s])<1e-12)return{error:"Pivot = 0 ทำให้หารไม่ได้"};i[s]=(a[s]-l)/n[s][s]}return{solution:i}}function Nue(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([]),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(bue);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=wue(r,a);if(g.error){f("สถานะ: "+g.error),l([]),o([]);return}l(g.solution),o(g.iterations??[]),f("สถานะ: เสร็จสิ้น (คำนวณสำเร็จ)")}catch(g){console.error(g),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l([]),f("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`,method:"gaussian"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.A=="string"?JSON.parse(g.A):g.A||[],_=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(y),i(_),y&&Array.isArray(y)&&e(y.length)}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Gaussian Elimination",subtitle:"การกำจัดแบบเกาส์ (Forward Elimination + Back Substitution)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:g=>{const y=Math.max(1,parseInt(g.target.value)||1);e(y),n(Array(y).fill().map(()=>Array(y).fill(0))),i(Array(y).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((g,y)=>v.jsx("tr",{children:g.map((_,E)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:_,onChange:C=>{const T=r.map(M=>[...M]);T[y][E]=parseFloat(C.target.value)||0,n(T)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},E))},y))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((g,y)=>v.jsx("input",{type:"number",value:g,onChange:_=>{const E=[...a];E[y]=parseFloat(_.target.value)||0,i(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},y))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟการลู่เข้าสู่คำตอบ"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:s,method:"Gaussian Elimination",className:"w-full h-72"})}),s.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:s.map((g,y)=>v.jsxs("li",{children:["x",y+1," = ",Fe(g)]},y))})]})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:s,iterations:u})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Vx="problems_gaussjordan";async function tF(){const t=Pt(Ue(Ce,Vx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function rF(t){return jt(Ue(Ce,Vx),{...t,method:"gaussjordan",createdAt:kt()})}async function Ux(t){return Bt(Tt(Ce,Vx,t))}const _ue=tF,Sue=rF,Eue=Ux,Aue=Ux,Due=Object.freeze(Object.defineProperty({__proto__:null,del:Aue,deleteGaussJordanProblem:Ux,getGaussJordanProblems:tF,getProblems:_ue,remove:Eue,save:Sue,saveGaussJordanProblem:rF},Symbol.toStringTag,{value:"Module"}));function Cue(t,e){const r=t.length,n=t.map((i,s)=>[...i,e[s]]);for(let i=0;i<r;i++){if(Math.abs(n[i][i])<1e-12)return{error:"Pivot = 0 (ควรใช้ Partial Pivoting)"};const s=n[i][i];for(let l=0;l<=r;l++)n[i][l]/=s;for(let l=0;l<r;l++){if(l===i)continue;const u=n[l][i];for(let o=0;o<=r;o++)n[l][o]-=u*n[i][o]}}return{solution:n.map(i=>i[r]),matrix:n}}function Tue(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([]),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(Due);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=Cue(r,a);if(g.error){f("สถานะ: "+g.error),l([]),o([]);return}l(g.solution),o(g.iterations??[]),f("สถานะ: เสร็จสิ้น (Reduced Row-Echelon Form สำเร็จ)")}catch(g){console.error(g),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l([]),f("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`,method:"gauss_jordan"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.A=="string"?JSON.parse(g.A):g.A||[],_=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(y),i(_),y&&Array.isArray(y)&&e(y.length)}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Gauss–Jordan Elimination",subtitle:"วิธีการกำจัดแบบเกาส์–จอร์แดน (Reduced Row-Echelon Form)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:g=>{const y=Math.max(1,parseInt(g.target.value)||1);e(y),n(Array(y).fill().map(()=>Array(y).fill(0))),i(Array(y).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((g,y)=>v.jsx("tr",{children:g.map((_,E)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:_,onChange:C=>{const T=r.map(M=>[...M]);T[y][E]=parseFloat(C.target.value)||0,n(T)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},E))},y))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((g,y)=>v.jsx("input",{type:"number",value:g,onChange:_=>{const E=[...a];E[y]=parseFloat(_.target.value)||0,i(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},y))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"การลู่เข้าสู่ผลลัพธ์ (Visualization)"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:s,method:"Gauss-Jordan",className:"w-full h-72"})}),s.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:s.map((g,y)=>v.jsxs("li",{children:["x",y+1," = ",Fe(g)]},y))})]})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:s,iterations:u})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const qx="problems_matrixinversion";async function nF(){const t=Pt(Ue(Ce,qx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function aF(t){return jt(Ue(Ce,qx),{...t,method:"matrixinversion",createdAt:kt()})}async function Hx(t){return Bt(Tt(Ce,qx,t))}const Mue=nF,Iue=aF,Fue=Hx,Pue=Hx,Rue=Object.freeze(Object.defineProperty({__proto__:null,del:Pue,deleteMatrixInversionProblem:Hx,getMatrixInversionProblems:nF,getProblems:Mue,remove:Fue,save:Iue,saveMatrixInversionProblem:aF},Symbol.toStringTag,{value:"Module"}));function Oue(t){return Array.from({length:t},(e,r)=>Array.from({length:t},(n,a)=>r===a?1:0))}function Bue(t){const e=t.length,r=Oue(e),n=t.map((i,s)=>[...i,...r[s]]);for(let i=0;i<e;i++){let s=n[i][i];if(Math.abs(s)<1e-12)return{error:"Pivot = 0 (ไม่สามารถหา Inverse ได้)"};for(let l=0;l<2*e;l++)n[i][l]/=s;for(let l=0;l<e;l++){if(l===i)continue;const u=n[l][i];for(let o=0;o<2*e;o++)n[l][o]-=u*n[i][o]}}return{inverse:n.map(i=>i.slice(e))}}function jue(t,e){const r=t.length,n=Array(r).fill(0);for(let a=0;a<r;a++)for(let i=0;i<r;i++)n[a]+=t[a][i]*e[i];return n}function kue(t,e){const r=Bue(t);return r.error?{error:r.error}:{solution:jue(r.inverse,e),inverse:r.inverse}}function $ue(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([]),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(Rue);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=kue(r,a);if(g.error){f("สถานะ: "+g.error),l([]),o([]);return}l(g.solution),o(g.iterations??[]),f("สถานะ: เสร็จสิ้น (คำนวณ Inverse สำเร็จ)")}catch(g){console.error(g),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l([]),f("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`,method:"matrix_inversion"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.A=="string"?JSON.parse(g.A):g.A||[],_=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(y),i(_),y&&Array.isArray(y)&&e(y.length)}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Matrix Inversion Method",subtitle:"การแก้ระบบสมการเชิงเส้นโดยใช้เมทริกซ์ผกผัน (A⁻¹b)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:g=>{const y=Math.max(1,parseInt(g.target.value)||1);e(y),n(Array(y).fill().map(()=>Array(y).fill(0))),i(Array(y).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((g,y)=>v.jsx("tr",{children:g.map((_,E)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:_,onChange:C=>{const T=r.map(M=>[...M]);T[y][E]=parseFloat(C.target.value)||0,n(T)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},E))},y))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((g,y)=>v.jsx("input",{type:"number",value:g,onChange:_=>{const E=[...a];E[y]=parseFloat(_.target.value)||0,i(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},y))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Visualization (Matrix Inversion)"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:s,method:"Matrix Inversion",className:"w-full h-72"})}),s.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:s.map((g,y)=>v.jsxs("li",{children:["x",y+1," = ",Fe(g)]},y))})]})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:s,iterations:u})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Gx="problems_lu";async function iF(){const t=Pt(Ue(Ce,Gx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function sF(t){return jt(Ue(Ce,Gx),{...t,method:"lu",createdAt:kt()})}async function Wx(t){return Bt(Tt(Ce,Gx,t))}const Lue=iF,zue=sF,Vue=Wx,Uue=Wx,que=Object.freeze(Object.defineProperty({__proto__:null,del:Uue,deleteLUProblem:Wx,getLUProblems:iF,getProblems:Lue,remove:Vue,save:zue,saveLUProblem:sF},Symbol.toStringTag,{value:"Module"}));function Hue(t,e){const r=t.length,n=Array.from({length:r},()=>Array(r).fill(0)),a=Array.from({length:r},()=>Array(r).fill(0));for(let l=0;l<r;l++){for(let u=l;u<r;u++){let o=0;for(let c=0;c<l;c++)o+=n[l][c]*a[c][u];a[l][u]=t[l][u]-o}for(let u=l;u<r;u++)if(l===u)n[l][l]=1;else{let o=0;for(let c=0;c<l;c++)o+=n[u][c]*a[c][l];if(Math.abs(a[l][l])<1e-12)return{error:"Pivot = 0 (ไม่สามารถแยก LU ได้)"};n[u][l]=(t[u][l]-o)/a[l][l]}}const i=Array(r).fill(0);for(let l=0;l<r;l++){let u=0;for(let o=0;o<l;o++)u+=n[l][o]*i[o];i[l]=e[l]-u}const s=Array(r).fill(0);for(let l=r-1;l>=0;l--){let u=0;for(let o=l+1;o<r;o++)u+=a[l][o]*s[o];if(Math.abs(a[l][l])<1e-12)return{error:"Pivot = 0 (หารไม่ได้)"};s[l]=(i[l]-u)/a[l][l]}return{L:n,U:a,solution:s}}function Gue(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([]),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(que);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=Hue(r,a);if(g.error){f("สถานะ: "+g.error),l([]),o([]);return}l(g.solution),o(g.iterations??[]),f("สถานะ: เสร็จสิ้น (LU Decomposition สำเร็จ)")}catch(g){console.error(g),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l([]),f("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`,method:"lu_decomposition"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.A=="string"?JSON.parse(g.A):g.A||[],_=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(y),i(_),y&&Array.isArray(y)&&e(y.length)}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"LU Decomposition Method",subtitle:"การแยกเมทริกซ์เป็น L และ U เพื่อแก้ระบบสมการเชิงเส้น"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:g=>{const y=Math.max(1,parseInt(g.target.value)||1);e(y),n(Array(y).fill().map(()=>Array(y).fill(0))),i(Array(y).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((g,y)=>v.jsx("tr",{children:g.map((_,E)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:_,onChange:C=>{const T=r.map(M=>[...M]);T[y][E]=parseFloat(C.target.value)||0,n(T)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},E))},y))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((g,y)=>v.jsx("input",{type:"number",value:g,onChange:_=>{const E=[...a];E[y]=parseFloat(_.target.value)||0,i(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},y))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Visualization (Matrix Structure)"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:s,method:"LU Decomposition",className:"w-full h-72"})}),s.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:s.map((g,y)=>v.jsxs("li",{children:["x",y+1," = ",Fe(g)]},y))})]})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:s,iterations:u})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Qx="problems_cholesky";async function oF(){const t=Pt(Ue(Ce,Qx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function lF(t){return jt(Ue(Ce,Qx),{...t,method:"cholesky",createdAt:kt()})}async function Xx(t){return Bt(Tt(Ce,Qx,t))}const Wue=oF,Que=lF,Xue=Xx,Kue=Xx,Jue=Object.freeze(Object.defineProperty({__proto__:null,del:Kue,deleteCholeskyProblem:Xx,getCholeskyProblems:oF,getProblems:Wue,remove:Xue,save:Que,saveCholeskyProblem:lF},Symbol.toStringTag,{value:"Module"}));function Yue(t,e){const r=t.length,n=Array.from({length:r},()=>Array(r).fill(0));try{for(let s=0;s<r;s++)for(let l=0;l<=s;l++){let u=0;for(let o=0;o<l;o++)u+=n[s][o]*n[l][o];if(s===l){const o=t[s][s]-u;if(o<=0)return{error:"A ไม่เป็นบวกกำหนดแน่นอน (Positive Definite)"};n[s][l]=Math.sqrt(o)}else n[s][l]=(t[s][l]-u)/n[l][l]}const a=Array(r).fill(0);for(let s=0;s<r;s++){let l=0;for(let u=0;u<s;u++)l+=n[s][u]*a[u];a[s]=(e[s]-l)/n[s][s]}const i=Array(r).fill(0);for(let s=r-1;s>=0;s--){let l=0;for(let u=s+1;u<r;u++)l+=n[u][s]*i[u];i[s]=(a[s]-l)/n[s][s]}return{L:n,solution:i}}catch{return{error:"เกิดข้อผิดพลาดในการคำนวณ"}}}function Zue(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([]),[u,o]=U.useState([]),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(Jue);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=Yue(r,a);if(g.error){f("สถานะ: "+g.error),l([]),o([]);return}l(g.solution),o(g.iterations??[]),f("สถานะ: เสร็จสิ้น (Cholesky Decomposition สำเร็จ)")}catch(g){console.error(g),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l([]),f("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={A:JSON.stringify(r),b:JSON.stringify(a),size:t,expr:`Matrix ${t}x${t}`,method:"cholesky"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.A=="string"?JSON.parse(g.A):g.A||[],_=typeof g.b=="string"?JSON.parse(g.b):g.b||[];n(y),i(_),y&&Array.isArray(y)&&e(y.length)}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Cholesky Decomposition Method",subtitle:"การแยกเมทริกซ์สมมาตรบวกกำหนดแน่นอน A = L·Lᵀ"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:g=>{const y=Math.max(1,parseInt(g.target.value)||1);e(y),n(Array(y).fill().map(()=>Array(y).fill(0))),i(Array(y).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((g,y)=>v.jsx("tr",{children:g.map((_,E)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:_,onChange:C=>{const T=r.map(M=>[...M]);T[y][E]=parseFloat(C.target.value)||0,n(T)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},E))},y))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((g,y)=>v.jsx("input",{type:"number",value:g,onChange:_=>{const E=[...a];E[y]=parseFloat(_.target.value)||0,i(E)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},y))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟโครงสร้างเมทริกซ์"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:s,method:"Cholesky",className:"w-full h-72"})}),s.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:s.map((g,y)=>v.jsxs("li",{children:["x",y+1," = ",Fe(g)]},y))})]})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:s,iterations:u})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Kx="problems_jacobi";async function uF(){const t=Pt(Ue(Ce,Kx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function cF(t){return jt(Ue(Ce,Kx),{...t,method:"jacobi",createdAt:kt()})}async function Jx(t){return Bt(Tt(Ce,Kx,t))}const ece=uF,tce=cF,rce=Jx,nce=Jx,ace=Object.freeze(Object.defineProperty({__proto__:null,del:nce,deleteJacobiProblem:Jx,getJacobiProblems:uF,getProblems:ece,remove:rce,save:tce,saveJacobiProblem:cF},Symbol.toStringTag,{value:"Module"}));function ice(t,e,r,n=1e-6,a=50){const i=t.length;let s=[...r],l=Array(i).fill(0);const u=[];for(let o=1;o<=a;o++){for(let f=0;f<i;f++){let d=0;for(let m=0;m<i;m++)f!==m&&(d+=t[f][m]*s[m]);if(Math.abs(t[f][f])<1e-12)return{error:"Pivot = 0 ที่แถว "+(f+1)};l[f]=(e[f]-d)/t[f][f]}const c=Math.max(...l.map((f,d)=>Math.abs((f-s[d])/(f||1))));if(u.push({iter:o,values:[...l],error:c}),c<n)return{solution:l,iterations:u,converged:!0};s=[...l]}return{solution:l,iterations:u,converged:!1}}function sce(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([0,0,0]),[u,o]=U.useState(1e-6),[c,f]=U.useState(50),[d,m]=U.useState([]),[p,h]=U.useState([]),[D,w]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:S,removingIds:x,refresh:b,saveProblem:N,deleteProblem:g}=$t(ace);U.useEffect(()=>{b().catch(console.error)},[b]);const y=()=>{try{const M=ice(r,a,s,parseFloat(u),parseInt(c));if(M.error){w("สถานะ: "+M.error),m([]),h([]);return}m(M.solution),h(M.iterations??[]),w("สถานะ: เสร็จสิ้น "+(M.converged?"(Converged)":"(ไม่ Converged)"))}catch(M){console.error(M),w("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},_=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l(Array(t).fill(0)),m([]),w("สถานะ: รีเซ็ตแล้ว")},E=async()=>{try{const M={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:u,size:t,expr:`Matrix ${t}x${t}`,method:"jacobi"};await N(M),alert("บันทึกแล้ว!")}catch(M){console.error("save problem failed:",M),alert("บันทึกไม่สำเร็จ: "+((M==null?void 0:M.message)||String(M)))}},C=M=>{try{const I=typeof M.A=="string"?JSON.parse(M.A):M.A||[],j=typeof M.b=="string"?JSON.parse(M.b):M.b||[],O=typeof M.x0=="string"?JSON.parse(M.x0):M.x0||[];n(I),i(j),l(O),I&&Array.isArray(I)&&e(I.length),M.tol&&o(M.tol),M.maxIter&&f(M.maxIter)}catch(I){console.error("failed to parse saved problem",I,M),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},T=M=>{confirm("ลบโจทย์นี้ไหม?")&&g(M.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Jacobi Iteration Method",subtitle:"วิธีการหาคำตอบของระบบสมการเชิงเส้นแบบทำซ้ำ (Iterative Method)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:M=>{const I=Math.max(1,parseInt(M.target.value)||1);e(I),n(Array(I).fill().map(()=>Array(I).fill(0))),i(Array(I).fill(0)),l(Array(I).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((M,I)=>v.jsx("tr",{children:M.map((j,O)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:j,onChange:P=>{const H=r.map($=>[...$]);H[I][O]=parseFloat(P.target.value)||0,n(H)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},O))},I))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((M,I)=>v.jsx("input",{type:"number",value:M,onChange:j=>{const O=[...a];O[I]=parseFloat(j.target.value)||0,i(O)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},I))})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),v.jsx("div",{className:"flex gap-2",children:s.map((M,I)=>v.jsx("input",{type:"number",value:M,onChange:j=>{const O=[...s];O[I]=parseFloat(j.target.value)||0,l(O)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},I))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),v.jsx("input",{type:"text",value:u,onChange:M=>o(M.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:c,onChange:M=>f(M.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:E,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:D}),v.jsx(Lt,{problems:S,onLoad:C,onDelete:T,removingIds:x})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"การลู่เข้าสู่ผลลัพธ์ (Visualization)"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:d,method:"Jacobi",className:"w-full h-72"})}),d.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:d.map((M,I)=>v.jsxs("li",{children:["x",I+1," = ",Fe(M)]},I))})]})]})]}),d.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:d,iterations:p})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const Yx="problems_gaussseidel";async function fF(){const t=Pt(Ue(Ce,Yx),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function dF(t){return jt(Ue(Ce,Yx),{...t,method:"gaussseidel",createdAt:kt()})}async function Zx(t){return Bt(Tt(Ce,Yx,t))}const oce=fF,lce=dF,uce=Zx,cce=Zx,fce=Object.freeze(Object.defineProperty({__proto__:null,del:cce,deleteGaussSeidelProblem:Zx,getGaussSeidelProblems:fF,getProblems:oce,remove:uce,save:lce,saveGaussSeidelProblem:dF},Symbol.toStringTag,{value:"Module"}));function dce(t,e,r,n=1e-6,a=50){const i=t.length,s=[...r],l=[];for(let u=1;u<=a;u++){const o=[...s];for(let f=0;f<i;f++){let d=0;for(let m=0;m<i;m++)f!==m&&(d+=t[f][m]*s[m]);if(Math.abs(t[f][f])<1e-12)return{error:"Pivot = 0 ที่แถว "+(f+1)};s[f]=(e[f]-d)/t[f][f]}const c=Math.max(...s.map((f,d)=>Math.abs((f-o[d])/(f||1))));if(l.push({iter:u,values:[...s],error:c}),c<n)return{solution:s,iterations:l,converged:!0}}return{solution:s,iterations:l,converged:!1}}function mce(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([0,0,0]),[u,o]=U.useState(1e-6),[c,f]=U.useState(50),[d,m]=U.useState([]),[p,h]=U.useState([]),[D,w]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:S,removingIds:x,refresh:b,saveProblem:N,deleteProblem:g}=$t(fce);U.useEffect(()=>{b().catch(console.error)},[b]);const y=()=>{try{const M=dce(r,a,s,parseFloat(u),parseInt(c));if(M.error){w("สถานะ: "+M.error),m([]),h([]);return}m(M.solution),h(M.iterations??[]),w("สถานะ: เสร็จสิ้น "+(M.converged?"(Converged)":"(ไม่ Converged)"))}catch(M){console.error(M),w("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},_=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l(Array(t).fill(0)),m([]),w("สถานะ: รีเซ็ตแล้ว")},E=async()=>{try{const M={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:u,maxIter:c,size:t,expr:`Matrix ${t}x${t}`,method:"gauss_seidel"};await N(M),alert("บันทึกแล้ว!")}catch(M){console.error("save problem failed:",M),alert("บันทึกไม่สำเร็จ: "+((M==null?void 0:M.message)||String(M)))}},C=M=>{try{const I=typeof M.A=="string"?JSON.parse(M.A):M.A||[],j=typeof M.b=="string"?JSON.parse(M.b):M.b||[],O=typeof M.x0=="string"?JSON.parse(M.x0):M.x0||[];n(I),i(j),l(O),I&&Array.isArray(I)&&e(I.length),M.tol&&o(M.tol),M.maxIter&&f(M.maxIter)}catch(I){console.error("failed to parse saved problem",I,M),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},T=M=>{confirm("ลบโจทย์นี้ไหม?")&&g(M.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Gauss–Seidel Iteration Method",subtitle:"วิธีการหาคำตอบแบบทำซ้ำ (ใช้ค่าใหม่ในแต่ละรอบทันที)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:M=>{const I=Math.max(1,parseInt(M.target.value)||1);e(I),n(Array(I).fill().map(()=>Array(I).fill(0))),i(Array(I).fill(0)),l(Array(I).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((M,I)=>v.jsx("tr",{children:M.map((j,O)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:j,onChange:P=>{const H=r.map($=>[...$]);H[I][O]=parseFloat(P.target.value)||0,n(H)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},O))},I))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((M,I)=>v.jsx("input",{type:"number",value:M,onChange:j=>{const O=[...a];O[I]=parseFloat(j.target.value)||0,i(O)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},I))})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),v.jsx("div",{className:"flex gap-2",children:s.map((M,I)=>v.jsx("input",{type:"number",value:M,onChange:j=>{const O=[...s];O[I]=parseFloat(j.target.value)||0,l(O)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},I))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),v.jsx("input",{type:"text",value:u,onChange:M=>o(M.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:c,onChange:M=>f(M.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:E,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:D}),v.jsx(Lt,{problems:S,onLoad:C,onDelete:T,removingIds:x})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"การลู่เข้าสู่ผลลัพธ์ (Visualization)"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:d,method:"Gauss-Seidel",className:"w-full h-72"})}),d.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:d.map((M,I)=>v.jsxs("li",{children:["x",I+1," = ",Fe(M)]},I))})]})]})]}),d.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:d,iterations:p})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const e1="problems_conjugategradient";async function mF(){const t=Pt(Ue(Ce,e1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function hF(t){return jt(Ue(Ce,e1),{...t,method:"conjugategradient",createdAt:kt()})}async function t1(t){return Bt(Tt(Ce,e1,t))}const hce=mF,pce=hF,vce=t1,gce=t1,yce=Object.freeze(Object.defineProperty({__proto__:null,del:gce,deleteConjugateGradientProblem:t1,getConjugateGradientProblems:mF,getProblems:hce,remove:vce,save:pce,saveConjugateGradientProblem:hF},Symbol.toStringTag,{value:"Module"}));function xce(t,e,r,n=1e-6,a=50){const i=t.length;let s=[...r],l=Array(i).fill(0),u=Array(i).fill(0);const o=[];for(let f=0;f<i;f++){let d=0;for(let m=0;m<i;m++)d+=t[f][m]*r[m];l[f]=e[f]-d,u[f]=l[f]}let c=l.reduce((f,d)=>f+d*d,0);for(let f=1;f<=a;f++){const d=Array(i).fill(0);for(let S=0;S<i;S++)for(let x=0;x<i;x++)d[S]+=t[S][x]*u[x];const m=u.reduce((S,x,b)=>S+x*d[b],0);if(m===0)return{error:"เกิดปัญหาในการคำนวณ (division by zero)"};const p=c/m;for(let S=0;S<i;S++)s[S]+=p*u[S];for(let S=0;S<i;S++)l[S]-=p*d[S];const h=l.reduce((S,x)=>S+x*x,0),D=Math.sqrt(h);if(o.push({iter:f,x:[...s],error:D}),Math.sqrt(h)<n)return{solution:s,iterations:o,converged:!0};const w=h/c;for(let S=0;S<i;S++)u[S]=l[S]+w*u[S];c=h}return{solution:s,iterations:o,converged:!1}}function bce(){const[t,e]=U.useState(3),[r,n]=U.useState([[0,0,0],[0,0,0],[0,0,0]]),[a,i]=U.useState([0,0,0]),[s,l]=U.useState([0,0,0]),[u,o]=U.useState(1e-6),[c,f]=U.useState(50),[d,m]=U.useState([]),[p,h]=U.useState([]),[D,w]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:S,removingIds:x,refresh:b,saveProblem:N,deleteProblem:g}=$t(yce);U.useEffect(()=>{b().catch(console.error)},[b]);const y=()=>{try{const M=xce(r,a,s,parseFloat(u),parseInt(c));if(M.error){w("สถานะ: "+M.error),m([]),h([]);return}m(M.solution),h(M.iterations??[]),w("สถานะ: เสร็จสิ้น "+(M.converged?"(Converged)":"(ไม่ Converged)"))}catch(M){console.error(M),w("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},_=()=>{n(Array(t).fill().map(()=>Array(t).fill(0))),i(Array(t).fill(0)),l(Array(t).fill(0)),m([]),w("สถานะ: รีเซ็ตแล้ว")},E=async()=>{try{const M={A:JSON.stringify(r),b:JSON.stringify(a),x0:JSON.stringify(s),tol:u,maxIter:c,size:t,expr:`Matrix ${t}x${t}`,method:"conjugate_gradient"};await N(M),alert("บันทึกแล้ว!")}catch(M){console.error("save problem failed:",M),alert("บันทึกไม่สำเร็จ: "+((M==null?void 0:M.message)||String(M)))}},C=M=>{try{const I=typeof M.A=="string"?JSON.parse(M.A):M.A||[],j=typeof M.b=="string"?JSON.parse(M.b):M.b||[],O=typeof M.x0=="string"?JSON.parse(M.x0):M.x0||[];n(I),i(j),l(O),I&&Array.isArray(I)&&e(I.length),M.tol&&o(M.tol),M.maxIter&&f(M.maxIter)}catch(I){console.error("failed to parse saved problem",I,M),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},T=M=>{confirm("ลบโจทย์นี้ไหม?")&&g(M.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Conjugate Gradient Method",subtitle:"การหาคำตอบของระบบสมการเชิงเส้น (เฉพาะเมทริกซ์สมมาตรบวกกำหนดแน่นอน SPD)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ขนาดเมทริกซ์ (n × n)"}),v.jsx("input",{type:"number",value:t,onChange:M=>{const I=Math.max(1,parseInt(M.target.value)||1);e(I),n(Array(I).fill().map(()=>Array(I).fill(0))),i(Array(I).fill(0)),l(Array(I).fill(0))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Matrix A"}),v.jsx("table",{className:"text-sm border-collapse",children:v.jsx("tbody",{children:r.map((M,I)=>v.jsx("tr",{children:M.map((j,O)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:j,onChange:P=>{const H=r.map($=>[...$]);H[I][O]=parseFloat(P.target.value)||0,n(H)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},O))},I))})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Vector b"}),v.jsx("div",{className:"flex gap-2",children:a.map((M,I)=>v.jsx("input",{type:"number",value:M,onChange:j=>{const O=[...a];O[I]=parseFloat(j.target.value)||0,i(O)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},I))})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x₀"}),v.jsx("div",{className:"flex gap-2",children:s.map((M,I)=>v.jsx("input",{type:"number",value:M,onChange:j=>{const O=[...s];O[I]=parseFloat(j.target.value)||0,l(O)},className:"w-16 px-2 py-1 rounded bg-slate-900 border border-slate-700"},I))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),v.jsx("input",{type:"text",value:u,onChange:M=>o(M.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),v.jsx("input",{type:"number",value:c,onChange:M=>f(M.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:y,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:E,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:D}),v.jsx(Lt,{problems:S,onLoad:C,onDelete:T,removingIds:x})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"การกระจายและการลู่เข้าสู่คำตอบ"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(Ti,{A:r,b:a,solution:d,method:"Conjugate Gradient",className:"w-full h-72"})}),d.length>0&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"ผลลัพธ์ (x):"}),v.jsx("ul",{children:d.map((M,I)=>v.jsxs("li",{children:["x",I+1," = ",Fe(M)]},I))})]})]})]}),d.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(Mi,{A:r,b:a,solution:d,iterations:p})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const r1="problems_lagrange";async function pF(){const t=Pt(Ue(Ce,r1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function vF(t){return jt(Ue(Ce,r1),{...t,method:"lagrange",createdAt:kt()})}async function n1(t){return Bt(Tt(Ce,r1,t))}const wce=pF,Nce=vF,_ce=n1,Sce=n1,Ece=Object.freeze(Object.defineProperty({__proto__:null,del:Sce,deleteLagrangeProblem:n1,getLagrangeProblems:pF,getProblems:wce,remove:_ce,save:Nce,saveLagrangeProblem:vF},Symbol.toStringTag,{value:"Module"}));function Ace(t,e,r){const n=t.length;let a=0,i=[];for(let s=0;s<n;s++){let l=1,u=`L${s}(x) = `;for(let c=0;c<n;c++)s!==c&&(l*=(r-t[c])/(t[s]-t[c]),u+=`((x - ${t[c]})/(${t[s]} - ${t[c]})) `);const o=e[s]*l;a+=o,i.push({i:s,Li:l,term:o,LiStr:u})}return{fx:a,detail:i}}function ks({xs:t=[],ys:e=[],func:r=null,xTarget:n=null,width:a=800,height:i=320,className:s=""}){const l=U.useRef(null);return U.useEffect(()=>{const u=l.current;if(!u||t.length===0||e.length===0)return;const o=Math.min(...t)-1,c=Math.max(...t)+1,f=Math.min(...e)-1,d=Math.max(...e)+1,m=t.map((p,h)=>[p,e[h]]);if(Ry(u,r,m,{width:a,height:i,xmin:o,xmax:c,ymin:f,ymax:d,curveColor:"#60a5fa",pointColor:"#f97316"}),n!==null){const p=u.getContext("2d"),h=S=>(S-o)/(c-o)*a,D=S=>i-(S-f)/(d-f)*i,w=r?r(n):null;w!==null&&(p.fillStyle="#22c55e",p.beginPath(),p.arc(h(n),D(w),5,0,2*Math.PI),p.fill())}},[t,e,r,n,a,i]),v.jsx("canvas",{ref:l,width:a,height:i,className:s})}function $s({steps:t=[],points:e=null,data:r=null}){const n=Array.isArray(t)&&t.length?t:Array.isArray(e)&&e.length?e:Array.isArray(r)?r:[];return!n||n.length===0?null:v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"i"}),v.jsx("th",{className:"p-2 text-center",children:"Lᵢ(x)"}),v.jsx("th",{className:"p-2 text-center",children:"yᵢ·Lᵢ(x)"})]})}),v.jsx("tbody",{children:n.map((a,i)=>v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900 transition-colors",children:[v.jsx("td",{className:"p-2 text-center font-medium",children:a.i??i}),v.jsx("td",{className:"p-2 text-right",children:Fe(a.Li??a.L)}),v.jsx("td",{className:"p-2 text-right",children:Fe(a.term??a.y??a.value??0)})]},a.i??i))})]})})}function Dce(){const[t,e]=U.useState(["","",""]),[r,n]=U.useState(["","",""]),[a,i]=U.useState(""),[s,l]=U.useState(null),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=U.useState([]),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(Ece);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=t.map(T=>parseFloat(T)),y=r.map(T=>parseFloat(T)),_=parseFloat(a);if(g.some(isNaN)||y.some(isNaN)||isNaN(_)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(g.length!==y.length){o("สถานะ: จำนวนค่า x และ y ต้องเท่ากัน");return}const{fx:E,detail:C}=Ace(g,y,_);l(E),f(C),o("สถานะ: คำนวณเสร็จสิ้น")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{e(["","",""]),n(["","",""]),i(""),l(null),f([]),o("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Lagrange(${t.join(",")})`,method:"lagrange"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.xValues=="string"?JSON.parse(g.xValues):g.xValues||[],_=typeof g.yValues=="string"?JSON.parse(g.yValues):g.yValues||[];e(y),n(_),i(g.xTarget||"")}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Lagrange Interpolation",subtitle:"หาค่า f(x) โดยใช้ Lagrange Polynomial"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),v.jsx("input",{type:"number",value:t.length,onChange:g=>{const y=Math.max(2,parseInt(g.target.value)||2);e(Array(y).fill("")),n(Array(y).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),v.jsxs("table",{className:"text-sm border-collapse",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-gray-400",children:[v.jsx("th",{className:"p-1",children:"xᵢ"}),v.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),v.jsx("tbody",{children:t.map((g,y)=>v.jsxs("tr",{children:[v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:t[y],onChange:_=>{const E=[...t];E[y]=_.target.value,e(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:r[y],onChange:_=>{const E=[...r];E[y]=_.target.value,n(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},y))})]})]}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),v.jsx("input",{type:"number",value:a,onChange:g=>i(g.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-400",children:u}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟ Lagrange Polynomial"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:t.map((g,y)=>({x:parseFloat(g),y:parseFloat(r[y])})),xTarget:parseFloat(a),method:"Lagrange",className:"w-full h-72"})}),s!==null?v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(s)})]}):v.jsx("div",{className:"mt-3 text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),s!==null&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:t.map((g,y)=>({x:g,y:r[y]})),method:"Lagrange"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const a1="problems_linear";async function gF(){const t=Pt(Ue(Ce,a1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function yF(t){return jt(Ue(Ce,a1),{...t,method:"linear",createdAt:kt()})}async function i1(t){return Bt(Tt(Ce,a1,t))}const Cce=gF,Tce=yF,Mce=i1,Ice=i1,Fce=Object.freeze(Object.defineProperty({__proto__:null,del:Ice,deleteLinearProblem:i1,getLinearProblems:gF,getProblems:Cce,remove:Mce,save:Tce,saveLinearProblem:yF},Symbol.toStringTag,{value:"Module"}));function Pce(t,e,r,n,a){return e+(n-e)/(r-t)*(a-t)}function Rce(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[a,i]=U.useState(""),[s,l]=U.useState(""),[u,o]=U.useState(""),[c,f]=U.useState(null),[d,m]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:p,removingIds:h,refresh:D,saveProblem:w,deleteProblem:S}=$t(Fce);U.useEffect(()=>{D().catch(console.error)},[D]);const x=()=>{try{const E=parseFloat(t),C=parseFloat(r),T=parseFloat(a),M=parseFloat(s),I=parseFloat(u);if([E,C,T,M,I].some(isNaN)){m("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(E===T){m("สถานะ: ค่า x1 และ x2 ต้องไม่เท่ากัน");return}const j=Pce(E,C,T,M,I);f(j),m("สถานะ: คำนวณเสร็จสิ้น")}catch(E){console.error(E),m("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},b=()=>{e(""),n(""),i(""),l(""),o(""),f(null),m("สถานะ: รีเซ็ตแล้ว")},N=async()=>{try{await w({x1:t,y1:r,x2:a,y2:s,xTarget:u,method:"linear_interp"}),alert("บันทึกแล้ว!")}catch(E){alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},g=E=>{e(E.x1||""),n(E.y1||""),i(E.x2||""),l(E.y2||""),o(E.xTarget||"")},y=E=>{confirm("ลบโจทย์นี้ไหม?")&&S(E.id)},_=[{x:parseFloat(t),y:parseFloat(r)},{x:parseFloat(a),y:parseFloat(s)}].filter(E=>!isNaN(E.x)&&!isNaN(E.y));return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Linear Interpolation",subtitle:"การประมาณค่า f(x) ด้วยเส้นตรงระหว่างจุดสองจุด"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-sm text-gray-400",children:"x₁"}),v.jsx("input",{type:"number",value:t,onChange:E=>e(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-sm text-gray-400",children:"f(x₁)"}),v.jsx("input",{type:"number",value:r,onChange:E=>n(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-sm text-gray-400",children:"x₂"}),v.jsx("input",{type:"number",value:a,onChange:E=>i(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-sm text-gray-400",children:"f(x₂)"}),v.jsx("input",{type:"number",value:s,onChange:E=>l(E.target.value),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),v.jsx("input",{type:"number",value:u,onChange:E=>o(E.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:b,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-400",children:d}),v.jsx(Lt,{problems:p,onLoad:g,onDelete:y,removingIds:h})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟ Linear Interpolation"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:_,xTarget:parseFloat(u),method:"Linear",className:"w-full h-72"})}),c!==null?v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:["f(",u,") ≈ ",v.jsx("b",{children:Fe(c)})]}):v.jsx("div",{className:"mt-3 text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),c!==null&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:_,method:"Linear",result:c,formula:"f(x) = f(x₁) + [(f(x₂) - f(x₁)) / (x₂ - x₁)] · (x - x₁)"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const s1="problems_quadratic";async function xF(){const t=Pt(Ue(Ce,s1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function bF(t){return jt(Ue(Ce,s1),{...t,method:"quadratic",createdAt:kt()})}async function o1(t){return Bt(Tt(Ce,s1,t))}const Oce=xF,Bce=bF,jce=o1,kce=o1,$ce=Object.freeze(Object.defineProperty({__proto__:null,del:kce,deleteQuadraticProblem:o1,getProblems:Oce,getQuadraticProblems:xF,remove:jce,save:Bce,saveQuadraticProblem:bF},Symbol.toStringTag,{value:"Module"}));function Lce(t,e,r){if(t.length!==3||e.length!==3)throw new Error("ต้องมีข้อมูล 3 จุดเท่านั้น");const[n,a,i]=t,[s,l,u]=e,o=(r-a)*(r-i)/((n-a)*(n-i)),c=(r-n)*(r-i)/((a-n)*(a-i)),f=(r-n)*(r-a)/((i-n)*(i-a));return{fx:s*o+l*c+u*f,L0:o,L1:c,L2:f}}function zce(){const[t,e]=U.useState(["","",""]),[r,n]=U.useState(["","",""]),[a,i]=U.useState(""),[s,l]=U.useState(null),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:p}=$t($ce);U.useEffect(()=>{d().catch(console.error)},[d]);const h=()=>{try{const N=t.map(M=>parseFloat(M)),g=r.map(M=>parseFloat(M)),y=parseFloat(a);if(N.some(isNaN)||g.some(isNaN)||isNaN(y)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}const{fx:_,L0:E,L1:C,L2:T}=Lce(N,g,y);l({fx:_,L0:E,L1:C,L2:T}),o("สถานะ: คำนวณเสร็จสิ้น")}catch(N){console.error(N),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},D=()=>{e(["","",""]),n(["","",""]),i(""),l(null),o("สถานะ: รีเซ็ตแล้ว")},w=async()=>{try{const N={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Quadratic(${t.join(",")})`,method:"quadratic_interp"};await m(N),alert("บันทึกแล้ว!")}catch(N){console.error("save problem failed:",N),alert("บันทึกไม่สำเร็จ: "+((N==null?void 0:N.message)||String(N)))}},S=N=>{try{const g=typeof N.xValues=="string"?JSON.parse(N.xValues):N.xValues||[],y=typeof N.yValues=="string"?JSON.parse(N.yValues):N.yValues||[];e(g),n(y),i(N.xTarget||"")}catch(g){console.error("failed to parse saved problem",g,N),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},x=N=>{confirm("ลบโจทย์นี้ไหม?")&&p(N.id)},b=t.map((N,g)=>({x:parseFloat(N),y:parseFloat(r[g])})).filter(N=>!isNaN(N.x)&&!isNaN(N.y));return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Quadratic Interpolation",subtitle:"การประมาณค่า f(x) ด้วยสมการกำลังสองจากสามจุดข้อมูล"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("h3",{className:"text-gray-300 mb-3",children:"ใส่ข้อมูล"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),v.jsxs("table",{className:"text-sm border-collapse",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-gray-400",children:[v.jsx("th",{className:"p-1",children:"xᵢ"}),v.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),v.jsx("tbody",{children:t.map((N,g)=>v.jsxs("tr",{children:[v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:t[g],onChange:y=>{const _=[...t];_[g]=y.target.value,e(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:r[g],onChange:y=>{const _=[...r];_[g]=y.target.value,n(_)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},g))})]})]}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),v.jsx("input",{type:"number",value:a,onChange:N=>i(N.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:D,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-400",children:u}),v.jsx(Lt,{problems:c,onLoad:S,onDelete:x,removingIds:f})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟ Quadratic Interpolation"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:b,xTarget:parseFloat(a),method:"Quadratic",className:"w-full h-72"})}),s?v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:[v.jsxs("p",{children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(s.fx)})]}),v.jsxs("div",{className:"mt-2 text-gray-400",children:[v.jsxs("p",{children:["L₀(x) = ",Fe(s.L0)]}),v.jsxs("p",{children:["L₁(x) = ",Fe(s.L1)]}),v.jsxs("p",{children:["L₂(x) = ",Fe(s.L2)]})]})]}):v.jsx("div",{className:"text-sm text-gray-400 mt-3",children:"ยังไม่มีการคำนวณ"})]})]}),s&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:b,method:"Quadratic"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const l1="problems_polynomial";async function wF(){const t=Pt(Ue(Ce,l1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function NF(t){return jt(Ue(Ce,l1),{...t,method:"polynomial",createdAt:kt()})}async function u1(t){return Bt(Tt(Ce,l1,t))}const Vce=wF,Uce=NF,qce=u1,Hce=u1,Gce=Object.freeze(Object.defineProperty({__proto__:null,del:Hce,deletePolynomialProblem:u1,getPolynomialProblems:wF,getProblems:Vce,remove:qce,save:Uce,savePolynomialProblem:NF},Symbol.toStringTag,{value:"Module"}));function Wce(t,e){const r=t.length,n=Array.from({length:r},()=>Array(r).fill(0));for(let a=0;a<r;a++)n[a][0]=e[a];for(let a=1;a<r;a++)for(let i=0;i<r-a;i++)n[i][a]=(n[i+1][a-1]-n[i][a-1])/(t[i+a]-t[i]);return n}function Qce(t,e,r){const n=t.length;let a=e[0][0];for(let i=1;i<n;i++){let s=e[0][i];for(let l=0;l<i;l++)s*=r-t[l];a+=s}return a}function Xce(t,e,r){const n=Wce(t,e);return{fx:Qce(t,n,r),table:n}}function Kce(){const[t,e]=U.useState(["","","",""]),[r,n]=U.useState(["","","",""]),[a,i]=U.useState(""),[s,l]=U.useState(null),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=U.useState([]),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(Gce);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const y=t.map(M=>parseFloat(M)),_=r.map(M=>parseFloat(M)),E=parseFloat(a);if(y.some(isNaN)||_.some(isNaN)||isNaN(E)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}const{fx:C,coeff:T}=Xce(y,_,E);l(C),f(T),o("สถานะ: คำนวณเสร็จสิ้น")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},S=()=>{e(["","","",""]),n(["","","",""]),i(""),l(null),f([]),o("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const y={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`Polynomial(${t.join(",")})`,method:"polynomial_interp"};await h(y),alert("บันทึกแล้ว!")}catch(y){alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},b=y=>{try{const _=typeof y.xValues=="string"?JSON.parse(y.xValues):y.xValues||[],E=typeof y.yValues=="string"?JSON.parse(y.yValues):y.yValues||[];e(_),n(E),i(y.xTarget||"")}catch{alert("ไม่สามารถโหลดโจทย์ได้")}},N=y=>{confirm("ลบโจทย์นี้ไหม?")&&D(y.id)},g=t.map((y,_)=>({x:parseFloat(y),y:parseFloat(r[_])})).filter(y=>!isNaN(y.x)&&!isNaN(y.y));return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Polynomial Interpolation",subtitle:"การประมาณค่า f(x) โดยใช้ Newton’s Divided Difference Polynomial"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),v.jsx("input",{type:"number",value:t.length,onChange:y=>{const _=Math.max(2,parseInt(y.target.value)||2);e(Array(_).fill("")),n(Array(_).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),v.jsxs("table",{className:"text-sm border-collapse",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-gray-400",children:[v.jsx("th",{className:"p-1",children:"xᵢ"}),v.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),v.jsx("tbody",{children:t.map((y,_)=>v.jsxs("tr",{children:[v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:t[_],onChange:E=>{const C=[...t];C[_]=E.target.value,e(C)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:r[_],onChange:E=>{const C=[...r];C[_]=E.target.value,n(C)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},_))})]})]}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),v.jsx("input",{type:"number",value:a,onChange:y=>i(y.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-400",children:u}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟ Polynomial Interpolation"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:g,xTarget:parseFloat(a),method:"Polynomial",className:"w-full h-72"})}),s!==null?v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(s)}),c.length>0&&v.jsxs("div",{className:"mt-2 text-gray-400",children:[v.jsx("div",{className:"font-semibold text-gray-300",children:"สมการ Polynomial:"}),v.jsxs("code",{children:["f(x) ="," ",c.map((y,_)=>`${Fe(y)}x^${_}`).join(" + ")]})]})]}):v.jsx("div",{className:"text-sm text-gray-400 mt-3",children:"ยังไม่มีการคำนวณ"})]})]}),s!==null&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:g,method:"Polynomial"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const c1="problems_linearspline";async function _F(){const t=Pt(Ue(Ce,c1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function SF(t){return jt(Ue(Ce,c1),{...t,method:"linearspline",createdAt:kt()})}async function f1(t){return Bt(Tt(Ce,c1,t))}const Jce=_F,Yce=SF,Zce=f1,efe=f1,tfe=Object.freeze(Object.defineProperty({__proto__:null,del:efe,deleteLinearSplineProblem:f1,getLinearSplineProblems:_F,getProblems:Jce,remove:Zce,save:Yce,saveLinearSplineProblem:SF},Symbol.toStringTag,{value:"Module"}));function rfe(t,e,r){const n=t.length;let a=[];for(let l=0;l<n-1;l++){const u=(e[l+1]-e[l])/(t[l+1]-t[l]),o=e[l]-u*t[l];a.push({i:l,x1:t[l],x2:t[l+1],slope:u,intercept:o})}let i=a.find(l=>r>=l.x1&&r<=l.x2);if(!i)throw new Error("ค่า x อยู่นอกขอบเขตข้อมูล");return{fx:i.slope*r+i.intercept,segs:a,found:i}}function nfe(){const[t,e]=U.useState(["","",""]),[r,n]=U.useState(["","",""]),[a,i]=U.useState(""),[s,l]=U.useState(null),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=U.useState([]),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(tfe);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const g=t.map(M=>parseFloat(M)),y=r.map(M=>parseFloat(M)),_=parseFloat(a);if(g.some(isNaN)||y.some(isNaN)||isNaN(_)){o("สถานะ: โปรดกรอกข้อมูลให้ครบและเป็นตัวเลข");return}if(g.length<2){o("สถานะ: ต้องมีอย่างน้อย 2 จุดข้อมูล");return}const{fx:E,segs:C,found:T}=rfe(g,y,_);l({fx:E,found:T}),f(C),o("สถานะ: คำนวณเสร็จสิ้น")}catch(g){console.error(g),o("สถานะ: "+(g.message||"เกิดข้อผิดพลาดในการคำนวณ"))}},S=()=>{e(["","",""]),n(["","",""]),i(""),l(null),f([]),o("สถานะ: รีเซ็ตแล้ว")},x=async()=>{try{const g={xValues:JSON.stringify(t),yValues:JSON.stringify(r),xTarget:a,expr:`LinearSpline(${t.join(",")})`,method:"linear_spline"};await h(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.xValues=="string"?JSON.parse(g.xValues):g.xValues||[],_=typeof g.yValues=="string"?JSON.parse(g.yValues):g.yValues||[];e(y),n(_),i(g.xTarget||"")}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Linear Spline Interpolation",subtitle:"การประมาณค่า f(x) ด้วยเส้นตรงระหว่างจุดข้อมูลที่ต่อเนื่องกัน"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนจุดข้อมูล"}),v.jsx("input",{type:"number",value:t.length,onChange:g=>{const y=Math.max(2,parseInt(g.target.value)||2);e(Array(y).fill("")),n(Array(y).fill(""))},className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"overflow-x-auto mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าของ x และ f(x)"}),v.jsxs("table",{className:"text-sm border-collapse",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-gray-400",children:[v.jsx("th",{className:"p-1",children:"xᵢ"}),v.jsx("th",{className:"p-1",children:"f(xᵢ)"})]})}),v.jsx("tbody",{children:t.map((g,y)=>v.jsxs("tr",{children:[v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:t[y],onChange:_=>{const E=[...t];E[y]=_.target.value,e(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:r[y],onChange:_=>{const E=[...r];E[y]=_.target.value,n(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})})]},y))})]})]}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),v.jsx("input",{type:"number",value:a,onChange:g=>i(g.target.value),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-400",children:u}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟ Linear Spline"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:t.map((g,y)=>({x:parseFloat(g),y:parseFloat(r[y])})),xTarget:parseFloat(a),method:"Linear Spline",className:"w-full h-72"})}),s?v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(s.fx)})]}):v.jsx("div",{className:"mt-3 text-sm text-gray-400",children:"ยังไม่มีการคำนวณ"})]})]}),c.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:t.map((g,y)=>({x:parseFloat(g),y:parseFloat(r[y])})),method:"Linear Spline"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const d1="problems_quadraticspline";async function EF(){const t=Pt(Ue(Ce,d1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function AF(t){return jt(Ue(Ce,d1),{...t,method:"quadratic_spline",createdAt:kt()})}async function m1(t){return Bt(Tt(Ce,d1,t))}const afe=EF,ife=AF,sfe=m1,ofe=m1,lfe=Object.freeze(Object.defineProperty({__proto__:null,del:ofe,deleteQuadraticSplineProblem:m1,getProblems:afe,getQuadraticSplineProblems:EF,remove:sfe,save:ife,saveQuadraticSplineProblem:AF},Symbol.toStringTag,{value:"Module"}));function ufe(t,e){if(t.length<3)return{error:"ต้องมีจุดอย่างน้อย 3 จุด"};const r=t.length-1,n=[],a=[],i=[];for(let o=0;o<r;o++){const c=t[o].x,f=t[o+1].x,d=t[o].y,m=t[o+1].y,p=f-c;if(p===0)return{error:"ค่าของ x ซ้ำกัน"};n[o]=d,a[o]=(m-d)/p,i[o]=0}let s=0;for(let o=0;o<r;o++)if(e>=t[o].x&&e<=t[o+1].x){s=o;break}const l=e-t[s].x,u=n[s]+a[s]*l+i[s]*l*l;return{a:n,b:a,c:i,y:u}}function cfe(){const[t,e]=U.useState([{x:0,y:0},{x:1,y:1},{x:2,y:4}]),[r,n]=U.useState(""),[a,i]=U.useState(null),[s,l]=U.useState([]),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:p}=$t(lfe);U.useEffect(()=>{d().catch(console.error)},[d]);const h=()=>{try{const g=parseFloat(r);if(isNaN(g)){o("กรุณากรอกค่า x ให้ถูกต้อง");return}const y=ufe(t,g);if(y.error){o("สถานะ: "+y.error),i(null);return}i(y.y),l(y.segments||[]),o("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},D=()=>{e([{x:0,y:0},{x:1,y:1},{x:2,y:4}]),n(""),i(null),l([]),o("สถานะ: รีเซ็ตแล้ว")},w=()=>{e([...t,{x:0,y:0}])},S=g=>{if(t.length<=3)return alert("ต้องมีอย่างน้อย 3 จุด");e(t.filter((y,_)=>_!==g))},x=async()=>{try{const g={points:JSON.stringify(t),xValue:r,expr:`Quadratic Spline (${t.length} points)`,method:"quadratic_spline"};await m(g),alert("บันทึกแล้ว!")}catch(g){console.error("save problem failed:",g),alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{const y=typeof g.points=="string"?JSON.parse(g.points):g.points||[];e(y),n(g.xValue||"")}catch(y){console.error("failed to parse saved problem",y,g),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&p(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Quadratic Spline Interpolation",subtitle:"การประมาณค่า f(x) ด้วย Quadratic Spline"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),v.jsx("table",{className:"text-sm border-collapse mb-3",children:v.jsx("tbody",{children:t.map((g,y)=>v.jsxs("tr",{children:[v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:g.x,onChange:_=>{const E=[...t];E[y].x=parseFloat(_.target.value)||0,e(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:g.y,onChange:_=>{const E=[...t];E[y].y=parseFloat(_.target.value)||0,e(E)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("button",{onClick:()=>S(y),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},y))})}),v.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการหาค่า y"}),v.jsx("input",{type:"number",value:r,onChange:g=>n(g.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:D,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:u}),v.jsx(Lt,{problems:c,onLoad:b,onDelete:N,removingIds:f})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟ Quadratic Spline"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:t,xTarget:parseFloat(r),method:"Quadratic Spline",className:"w-full h-72"})}),a!==null?v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:["y(",r,") ≈ ",v.jsx("b",{children:Fe(a)})]}):v.jsx("div",{className:"text-sm text-gray-400 mt-3",children:"ยังไม่มีการคำนวณ"})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:t,method:"Quadratic Spline"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const h1="problems_cubicspline";async function DF(){const t=Pt(Ue(Ce,h1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function CF(t){return jt(Ue(Ce,h1),{...t,method:"cubic_spline",createdAt:kt()})}async function p1(t){return Bt(Tt(Ce,h1,t))}const ffe=DF,dfe=CF,mfe=p1,hfe=p1,pfe=Object.freeze(Object.defineProperty({__proto__:null,del:hfe,deleteCubicSplineProblem:p1,getCubicSplineProblems:DF,getProblems:ffe,remove:mfe,save:dfe,saveCubicSplineProblem:CF},Symbol.toStringTag,{value:"Module"}));function vfe(t,e){const r=t.length;if(r<3)return{error:"ต้องมีจุดอย่างน้อย 3 จุด"};const n=[],a=[],i=[],s=[],l=[],u=[],o=[],c=[],f=[];for(let h=0;h<r;h++)u[h]=t[h].y;for(let h=0;h<r-1;h++)n[h]=t[h+1].x-t[h].x;if(n.some(h=>h===0))return{error:"ค่าของ x ซ้ำกัน"};for(let h=1;h<r-1;h++)a[h]=3/n[h]*(u[h+1]-u[h])-3/n[h-1]*(u[h]-u[h-1]);i[0]=1,s[0]=0,l[0]=0;for(let h=1;h<r-1;h++)i[h]=2*(t[h+1].x-t[h-1].x)-n[h-1]*s[h-1],s[h]=n[h]/i[h],l[h]=(a[h]-n[h-1]*l[h-1])/i[h];i[r-1]=1,l[r-1]=0,c[r-1]=0;for(let h=r-2;h>=0;h--)c[h]=l[h]-s[h]*c[h+1],o[h]=(u[h+1]-u[h])/n[h]-n[h]*(c[h+1]+2*c[h])/3,f[h]=(c[h+1]-c[h])/(3*n[h]);let d=r-2;for(let h=0;h<r-1;h++)if(e>=t[h].x&&e<=t[h+1].x){d=h;break}const m=e-t[d].x,p=u[d]+o[d]*m+c[d]*m**2+f[d]*m**3;return{a:u,b:o,c,d:f,y:p}}function gfe(){const[t,e]=U.useState([{x:0,y:0},{x:1,y:1},{x:2,y:4},{x:3,y:9}]),[r,n]=U.useState(""),[a,i]=U.useState(null),[s,l]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:u,removingIds:o,refresh:c,saveProblem:f,deleteProblem:d}=$t(pfe);U.useEffect(()=>{c().catch(console.error)},[c]);const m=()=>{try{const b=parseFloat(r);if(isNaN(b)){l("กรุณากรอกค่า x ให้ถูกต้อง");return}const N=vfe(t,b);if(N.error){l("สถานะ: "+N.error),i(null);return}i(N.y),l("สถานะ: คำนวณสำเร็จ")}catch(b){console.error(b),l("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},p=()=>{e([{x:0,y:0},{x:1,y:1},{x:2,y:4},{x:3,y:9}]),n(""),i(null),l("สถานะ: รีเซ็ตแล้ว")},h=()=>e([...t,{x:0,y:0}]),D=b=>{if(t.length<=3)return alert("ต้องมีอย่างน้อย 3 จุด");e(t.filter((N,g)=>g!==b))},w=async()=>{try{const b={points:JSON.stringify(t),xValue:r,expr:`Cubic Spline (${t.length} points)`,method:"cubic_spline"};await f(b),alert("บันทึกแล้ว!")}catch(b){console.error("save problem failed:",b),alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},S=b=>{try{const N=typeof b.points=="string"?JSON.parse(b.points):b.points||[];e(N),n(b.xValue||"")}catch(N){console.error("failed to parse saved problem",N,b),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},x=b=>{confirm("ลบโจทย์นี้ไหม?")&&d(b.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Cubic Spline",subtitle:"ประมาณค่า y ด้วย Cubic Spline Interpolation"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),v.jsx("table",{className:"text-sm border-collapse mb-3",children:v.jsx("tbody",{children:t.map((b,N)=>v.jsxs("tr",{children:[v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:b.x,onChange:g=>{const y=[...t];y[N].x=parseFloat(g.target.value)||0,e(y)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:b.y,onChange:g=>{const y=[...t];y[N].y=parseFloat(g.target.value)||0,e(y)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("button",{onClick:()=>D(N),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},N))})}),v.jsx("button",{onClick:h,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการหาค่า y"}),v.jsx("input",{type:"number",value:r,onChange:b=>n(b.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:m,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:p,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:s}),v.jsx(Lt,{problems:u,onLoad:S,onDelete:x,removingIds:o})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟ Cubic Spline"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:t,xTarget:parseFloat(r),method:"Cubic Spline",className:"w-full h-72"})}),a!==null?v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:["y(",r,") ≈ ",v.jsx("b",{children:Fe(a)})]}):v.jsx("div",{className:"mt-3 text-sm text-gray-400",children:"ยังไม่มีผลลัพธ์"})]})]}),t.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:t,method:"Cubic Spline"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const v1="problems_singlelinear";async function TF(){const t=Pt(Ue(Ce,v1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function MF(t){return jt(Ue(Ce,v1),{...t,method:"single_linear",createdAt:kt()})}async function g1(t){return Bt(Tt(Ce,v1,t))}const yfe=TF,xfe=MF,bfe=g1,wfe=g1,Nfe=Object.freeze(Object.defineProperty({__proto__:null,del:wfe,deleteSingleLinearProblem:g1,getProblems:yfe,getSingleLinearProblems:TF,remove:bfe,save:xfe,saveSingleLinearProblem:MF},Symbol.toStringTag,{value:"Module"}));function _fe(t,e){const r=t.length;if(r<2)return{error:"ต้องมีข้อมูลอย่างน้อย 2 จุด"};const n=t.reduce((c,f)=>c+f.x,0),a=t.reduce((c,f)=>c+f.y,0),i=t.reduce((c,f)=>c+f.x*f.y,0),s=t.reduce((c,f)=>c+f.x*f.x,0),l=(r*i-n*a)/(r*s-n**2),u=(a-l*n)/r,o=u+l*e;return{a:u,b:l,yPred:o}}function y1({xs:t=[],ys:e=[],fitFunc:r=null,width:n=800,height:a=320,className:i=""}){const s=U.useRef(null);return U.useEffect(()=>{const l=s.current;if(!l||t.length===0||e.length===0)return;const u=Math.min(...t)-1,o=Math.max(...t)+1,c=Math.min(...e)-1,f=Math.max(...e)+1,d=t.map((m,p)=>[m,e[p]]);Ry(l,r,d,{width:n,height:a,xmin:u,xmax:o,ymin:c,ymax:f,curveColor:"#22c55e",pointColor:"#f97316"})},[t,e,r,n,a]),v.jsx("canvas",{ref:s,width:n,height:a,className:i})}function x1({data:t=[],rows:e=null,table:r=null}){const n=Array.isArray(t)&&t.length?t:Array.isArray(e)&&e.length?e:Array.isArray(r)?r:[];if(!n||n.length===0)return null;const a=Array.isArray(e)&&e.length?e:Array.isArray(r)&&r.length?r:Array.isArray(t)?t:[];return!a||a.length===0?null:v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"x"}),v.jsx("th",{className:"p-2 text-center",children:"y"}),v.jsx("th",{className:"p-2 text-center",children:"ŷ (Predicted)"}),v.jsx("th",{className:"p-2 text-center",children:"Error"})]})}),v.jsx("tbody",{children:a.map((i,s)=>{let l=(i==null?void 0:i.err)??(i==null?void 0:i.error)??(i==null?void 0:i.e)??(i==null?void 0:i.term)??null;if(l==null&&s>0){a[s-1];const u=(i==null?void 0:i.pred)??(i==null?void 0:i.ypred)??(i==null?void 0:i.yhat)??(i==null?void 0:i.estimated)??null,o=(i==null?void 0:i.y)??(i==null?void 0:i.yi)??(i==null?void 0:i.y1)??null;isFinite(u)&&isFinite(o)&&(l=Math.abs((u-o)/(o===0?1:o)))}return v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900",children:[v.jsx("td",{className:"p-2 text-center",children:i.index??s}),v.jsx("td",{className:"p-2 text-right",children:Fe(i.x??i.xi??i.x1)}),v.jsx("td",{className:"p-2 text-right",children:Fe(i.y??i.yi??i.y1)}),v.jsx("td",{className:"p-2 text-right",children:Fe(i.pred??i.ypred??i.yhat??i.estimated)}),v.jsx("td",{className:"p-2 text-right",children:l!=null?Fe(l):"-"})]},s)})})]})})}function Sfe(){const[t,e]=U.useState([{x:1,y:1},{x:2,y:2},{x:3,y:2.5}]),[r,n]=U.useState(""),[a,i]=U.useState(null),[s,l]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:u,removingIds:o,refresh:c,saveProblem:f,deleteProblem:d}=$t(Nfe);U.useEffect(()=>{c().catch(console.error)},[c]);const m=()=>{try{const b=parseFloat(r);if(isNaN(b)){l("กรุณากรอกค่า x ที่ต้องการทำนาย");return}const N=_fe(t,b);if(N.error){l("สถานะ: "+N.error),i(null);return}i(N),l("สถานะ: คำนวณสำเร็จ")}catch(b){console.error(b),l("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},p=()=>{e([{x:1,y:1},{x:2,y:2},{x:3,y:2.5}]),n(""),i(null),l("สถานะ: รีเซ็ตแล้ว")},h=()=>{e([...t,{x:0,y:0}])},D=b=>{if(t.length<=2)return alert("ต้องมีอย่างน้อย 2 จุด");e(t.filter((N,g)=>g!==b))},w=async()=>{try{const b={points:JSON.stringify(t),xPredict:r,expr:`Single Linear Regression (${t.length} points)`,method:"single_linear_regression"};await f(b),alert("บันทึกแล้ว!")}catch(b){console.error("save problem failed:",b),alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},S=b=>{try{const N=typeof b.points=="string"?JSON.parse(b.points):b.points||[];e(N),n(b.xPredict||"")}catch(N){console.error("failed to parse saved problem",N,b),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},x=b=>{confirm("ลบโจทย์นี้ไหม?")&&d(b.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Single Linear Regression",subtitle:"การหาสมการเส้นตรงที่เหมาะสมกับข้อมูล (y = a + bx)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จุดข้อมูล (x, y)"}),v.jsx("table",{className:"text-sm border-collapse mb-3",children:v.jsx("tbody",{children:t.map((b,N)=>v.jsxs("tr",{children:[v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:b.x,onChange:g=>{const y=[...t];y[N].x=parseFloat(g.target.value)||0,e(y)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:b.y,onChange:g=>{const y=[...t];y[N].y=parseFloat(g.target.value)||0,e(y)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("button",{onClick:()=>D(N),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},N))})}),v.jsx("button",{onClick:h,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มจุด"}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x ที่ต้องการทำนาย (xₚ)"}),v.jsx("input",{type:"number",value:r,onChange:b=>n(b.target.value),className:"w-32 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:m,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:p,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:s}),v.jsx(Lt,{problems:u,onLoad:S,onDelete:x,removingIds:o})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟ Single Linear Regression"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(y1,{xValues:t.map(b=>b.x),yValues:t.map(b=>b.y),params:a?{a:a.a,b:a.b}:{},model:"linear",className:"w-full h-72"})}),a?v.jsxs("div",{className:"text-sm text-gray-300 space-y-1 mt-3",children:[v.jsxs("div",{children:["a = ",Fe(a.a)]}),v.jsxs("div",{children:["b = ",Fe(a.b)]}),v.jsxs("div",{children:["สมการ: y = ",Fe(a.a)," + ",Fe(a.b),"x"]}),v.jsxs("div",{children:["y(",r,") ="," ",v.jsx("span",{className:"font-semibold",children:Fe(a.yPred)})]})]}):v.jsx("div",{className:"text-sm text-gray-400 mt-3",children:"ยังไม่มีผลลัพธ์"})]})]}),a&&v.jsx("div",{className:"mt-6",children:v.jsx(x1,{xValues:t.map(b=>b.x),yValues:t.map(b=>b.y),params:{a:a.a,b:a.b},model:"linear"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const b1="problems_multiplelinear";async function IF(){const t=Pt(Ue(Ce,b1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function FF(t){return jt(Ue(Ce,b1),{...t,method:"multiple_linear",createdAt:kt()})}async function w1(t){return Bt(Tt(Ce,b1,t))}const Efe=IF,Afe=FF,Dfe=w1,Cfe=w1,Tfe=Object.freeze(Object.defineProperty({__proto__:null,del:Cfe,deleteMultipleLinearProblem:w1,getMultipleLinearProblems:IF,getProblems:Efe,remove:Dfe,save:Afe,saveMultipleLinearProblem:FF},Symbol.toStringTag,{value:"Module"}));function Mfe(t,e){const r=t.length,n=t.map(s=>s.slice()),a=e.slice();for(let s=0;s<r;s++){let l=s,u=Math.abs(n[s][s]);for(let o=s+1;o<r;o++){const c=Math.abs(n[o][s]);c>u&&(u=c,l=o)}if(u<1e-15)throw new Error("Matrix is singular or ill-conditioned.");l!==s&&([n[s],n[l]]=[n[l],n[s]],[a[s],a[l]]=[a[l],a[s]]);for(let o=s+1;o<r;o++){const c=n[o][s]/n[s][s];n[o][s]=0;for(let f=s+1;f<r;f++)n[o][f]-=c*n[s][f];a[o]-=c*a[s]}}const i=Array(r).fill(0);for(let s=r-1;s>=0;s--){let l=a[s];for(let u=s+1;u<r;u++)l-=n[s][u]*i[u];i[s]=l/n[s][s]}return i}function Ife(t){const e=t.length,r=t[0].length,n=Array.from({length:r},()=>Array(e).fill(0));for(let a=0;a<e;a++)for(let i=0;i<r;i++)n[i][a]=t[a][i];return n}function _A(t,e){const r=t.length,n=t[0].length,a=e[0].length,i=Array.from({length:r},()=>Array(a).fill(0));for(let s=0;s<r;s++)for(let l=0;l<a;l++){let u=0;for(let o=0;o<n;o++)u+=t[s][o]*e[o][l];i[s][l]=u}return i}function Ffe(t){const e=t.length;if(e<2)return{error:"ต้องมีข้อมูลอย่างน้อย 2 แถว"};t[0].x.length;const r=t.map(p=>[1,...p.x]),n=t.map(p=>[p.y]),a=Ife(r),i=_A(a,r),s=_A(a,n).map(p=>p[0]),l=Mfe(i,s),u=r.map(p=>p.reduce((h,D,w)=>h+D*l[w],0)),o=n.map(p=>p[0]),c=o.reduce((p,h)=>p+h,0)/e,f=o.reduce((p,h)=>p+(h-c)**2,0),d=o.reduce((p,h,D)=>p+(h-u[D])**2,0),m=f>0?1-d/f:1;return{coef:l,r2:m,yHat:u}}function SA(t,e){return t[0]+e.reduce((r,n,a)=>r+t[a+1]*n,0)}function Pfe(){const[t,e]=U.useState(2),[r,n]=U.useState([{x:[1,2],y:5},{x:[2,0],y:4},{x:[3,1],y:7}]),[a,i]=U.useState(Array(2).fill(0)),[s,l]=U.useState(null),[u,o]=U.useState(null),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(Tfe);U.useEffect(()=>{p().catch(console.error)},[p]);const w=T=>{n(M=>M.map(I=>{const j=I.x.slice(0,T);for(;j.length<T;)j.push(0);return{...I,x:j}})),i(M=>{const I=M.slice(0,T);for(;I.length<T;)I.push(0);return I})},S=T=>{const M=Math.max(1,Math.min(8,parseInt(T)||1));e(M),w(M)},x=()=>{n([...r,{x:Array(t).fill(0),y:0}])},b=T=>{if(r.length<=2)return alert("ต้องมีอย่างน้อย 2 แถว");n(r.filter((M,I)=>I!==T))},N=()=>{try{const T=Ffe(r);if(T.error){l(null),o(null),f("สถานะ: "+T.error);return}l(T),f("สถานะ: คำนวณโมเดลสำเร็จ (R² = "+Fe(T.r2)+")"),a.every(M=>Number.isFinite(parseFloat(M)))&&o(SA(T.coef,a.map(M=>parseFloat(M))))}catch(T){console.error(T),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},g=()=>{if(!(s!=null&&s.coef))return alert("โปรดคำนวณโมเดลก่อน");const T=a.map(M=>parseFloat(M)||0);o(SA(s.coef,T))},y=()=>{e(2),n([{x:[1,2],y:5},{x:[2,0],y:4},{x:[3,1],y:7}]),i([0,0]),l(null),o(null),f("สถานะ: รีเซ็ตแล้ว")},_=async()=>{try{const T={features:t,rows:JSON.stringify(r),xPredict:JSON.stringify(a),expr:`Multiple Linear (${t} features, ${r.length} rows)`};await h(T),alert("บันทึกแล้ว!")}catch(T){console.error("save problem failed:",T),alert("บันทึกไม่สำเร็จ: "+((T==null?void 0:T.message)||String(T)))}},E=T=>{try{const M=T.features||1,I=typeof T.rows=="string"?JSON.parse(T.rows):T.rows||[],j=typeof T.xPredict=="string"?JSON.parse(T.xPredict):T.xPredict||[];e(M),n(I),i(j&&Array.isArray(j)?j:Array(M).fill(0)),l(null),o(null),f("สถานะ: โหลดโจทย์แล้ว (โปรดกดคำนวณ)"),w(M)}catch(M){console.error("failed to parse saved problem",M,T),alert("ไม่สามารถโหลดโจทย์: ข้อมูลที่บันทึกไม่ถูกต้อง")}},C=T=>{confirm("ลบโจทย์นี้ไหม?")&&D(T.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Multiple Linear Regression",subtitle:"การถดถอยเชิงเส้นพหุคูณ: y = a + b₁x₁ + ... + b_m x_m"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"จำนวนตัวแปรอิสระ (m)"}),v.jsx("input",{type:"number",value:t,onChange:T=>S(T.target.value),className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ตารางข้อมูล"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"text-sm border-collapse mb-3",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[Array.from({length:t},(T,M)=>v.jsxs("th",{className:"px-2 py-1 text-left text-gray-400",children:["x",M+1]},M)),v.jsx("th",{className:"px-2 py-1 text-left text-gray-400",children:"y"}),v.jsx("th",{})]})}),v.jsx("tbody",{children:r.map((T,M)=>v.jsxs("tr",{children:[T.x.map((I,j)=>v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:I,onChange:O=>{const P=r.map(H=>({...H,x:[...H.x]}));P[M].x[j]=parseFloat(O.target.value)||0,n(P)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})},j)),v.jsx("td",{className:"p-1",children:v.jsx("input",{type:"number",value:T.y,onChange:I=>{const j=r.map(O=>({...O,x:[...O.x]}));j[M].y=parseFloat(I.target.value)||0,n(j)},className:"w-20 px-2 py-1 rounded bg-slate-900 border border-slate-700"})}),v.jsx("td",{className:"p-1",children:v.jsx("button",{onClick:()=>b(M),className:"text-red-400 hover:text-red-300 text-xs",children:"ลบ"})})]},M))})]})}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"เพิ่มแถวข้อมูล"}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการทำนาย (xₚ1..xₚm)"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((T,M)=>v.jsx("input",{type:"number",value:T,onChange:I=>{const j=a.slice();j[M]=parseFloat(I.target.value)||0,i(j)},className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"},M))})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณโมเดล"}),v.jsx("button",{onClick:g,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"ทำนายค่า yₚ"}),v.jsx("button",{onClick:y,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:_,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2",children:c}),v.jsx(Lt,{problems:d,onLoad:E,onDelete:C,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),s!=null&&s.coef?v.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[v.jsxs("div",{children:["Intercept (a) = ",Fe(s.coef[0])]}),s.coef.slice(1).map((T,M)=>v.jsxs("div",{children:["b",M+1," = ",Fe(T)]},M)),v.jsxs("div",{children:["R² = ",v.jsx("span",{className:"font-semibold",children:Fe(s.r2)})]}),u!==null&&v.jsxs("div",{className:"mt-2",children:["yₚ = ",v.jsx("span",{className:"font-semibold",children:Fe(u)})]})]}):v.jsx("div",{className:"text-sm text-gray-400",children:"ยังไม่มีโมเดล"}),v.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Multiple Linear Regression แก้ด้วย Normal Equation: (XᵀX)w = Xᵀy แล้วคำนวณสัมประสิทธิ์ w = [a, b₁, …, b_m]."})]})]}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const N1="problems_polynomialreg";async function PF(){const t=Pt(Ue(Ce,N1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function RF(t){return jt(Ue(Ce,N1),{...t,method:"polynomialreg",createdAt:kt()})}async function _1(t){return Bt(Tt(Ce,N1,t))}const Rfe=PF,Ofe=RF,Bfe=_1,jfe=_1,kfe=Object.freeze(Object.defineProperty({__proto__:null,del:jfe,deletePolynomialRegProblem:_1,getPolynomialRegProblems:PF,getProblems:Rfe,remove:Bfe,save:Ofe,savePolynomialRegProblem:RF},Symbol.toStringTag,{value:"Module"}));function $fe(t,e,r){t.length;const n=Array.from({length:r+1},(s,l)=>Array.from({length:r+1},(u,o)=>t.reduce((c,f)=>c+Math.pow(f,l+o),0))),a=Array.from({length:r+1},(s,l)=>e.reduce((u,o,c)=>u+o*Math.pow(t[c],l),0)),i=n.map((s,l)=>[...s,a[l]]);for(let s=0;s<=r;s++){let l=s;for(let o=s+1;o<=r;o++)Math.abs(i[o][s])>Math.abs(i[l][s])&&(l=o);[i[s],i[l]]=[i[l],i[s]];const u=i[s][s];if(Math.abs(u)<1e-12)throw new Error("Pivot เป็นศูนย์ — ไม่สามารถแก้สมการได้");for(let o=s;o<=r+1;o++)i[s][o]/=u;for(let o=0;o<=r;o++)if(o!==s){const c=i[o][s];for(let f=s;f<=r+1;f++)i[o][f]-=c*i[s][f]}}return i.map(s=>s[r+1])}function Lfe(){const[t,e]=U.useState([1,2,3,4]),[r,n]=U.useState([2.2,2.8,3.6,4.5]),[a,i]=U.useState(2),[s,l]=U.useState([]),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:p}=$t(kfe);U.useEffect(()=>{d().catch(console.error)},[d]);const h=()=>{try{const b=$fe(t,r,a);l(b),o("สถานะ: คำนวณเสร็จสิ้น")}catch(b){console.error(b),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),l([])}},D=()=>{e([1,2,3,4]),n([2.2,2.8,3.6,4.5]),i(2),l([]),o("สถานะ: รีเซ็ตแล้ว")},w=async()=>{try{const b={x:JSON.stringify(t),y:JSON.stringify(r),degree:a,expr:`Polynomial Regression (deg=${a})`,method:"polynomial_regression"};await m(b),alert("บันทึกแล้ว!")}catch(b){alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},S=b=>{try{e(JSON.parse(b.x)),n(JSON.parse(b.y)),i(b.degree)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},x=b=>{confirm("ลบโจทย์นี้ไหม?")&&p(b.id)};return t.map((b,N)=>({x:parseFloat(b),y:parseFloat(r[N])})),v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Polynomial Regression",subtitle:"การประมาณค่าแบบพหุนาม (Polynomial Least Squares Regression)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ลำดับของพหุนาม (degree)"}),v.jsx("input",{type:"number",value:a,onChange:b=>i(Math.max(1,parseInt(b.target.value)||1)),className:"w-24 px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),v.jsx("textarea",{value:t.join(", "),onChange:b=>e(b.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า y (คั่นด้วย ,)"}),v.jsx("textarea",{value:r.join(", "),onChange:b=>n(b.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:D,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm text-gray-300 mb-2",children:u}),v.jsx(Lt,{problems:c,onLoad:S,onDelete:x,removingIds:f})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟ Polynomial Regression"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(y1,{xValues:t,yValues:r,params:{coeffs:s},model:"polynomial",degree:a,className:"w-full h-72"})}),s.length>0&&v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:[v.jsx("div",{className:"font-semibold",children:"สมการพหุนาม:"}),v.jsxs("div",{children:["y ="," ",s.map((b,N)=>`${Fe(b)}${N===0?"":`x^${N}`}`).join(" + ")]})]})]})]}),s.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(x1,{xValues:t,yValues:r,params:{coeffs:s},model:"polynomial"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const S1="problems_nonlinearreg";async function OF(){const t=Pt(Ue(Ce,S1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function BF(t){return jt(Ue(Ce,S1),{...t,method:"nonlinearreg",createdAt:kt()})}async function E1(t){return Bt(Tt(Ce,S1,t))}const zfe=OF,Vfe=BF,Ufe=E1,qfe=E1,Hfe=Object.freeze(Object.defineProperty({__proto__:null,del:qfe,deleteNonlinearRegProblem:E1,getNonlinearRegProblems:OF,getProblems:zfe,remove:Ufe,save:Vfe,saveNonlinearRegProblem:BF},Symbol.toStringTag,{value:"Module"}));function Gfe(t,e){const r=t.length,n=t.reduce((o,c)=>o+c,0),a=e.reduce((o,c)=>o+c,0),i=t.reduce((o,c,f)=>o+c*e[f],0),s=t.reduce((o,c)=>o+c*c,0),l=(r*i-n*a)/(r*s-n**2);return{a:(a-l*n)/r,b:l}}function Wfe(t,e,r){if(t.length<2)throw new Error("ต้องมีข้อมูลอย่างน้อย 2 จุด");let a=[],i=[];if(r==="exponential")a=t,i=e.map(c=>Math.log(c));else if(r==="power")a=t.map(c=>Math.log(c)),i=e.map(c=>Math.log(c));else throw new Error("ไม่รู้จักโมเดลที่เลือก");const{a:s,b:l}=Gfe(a,i);return{a:Math.exp(s),b:l}}function Qfe(){const[t,e]=U.useState([1,2,3,4,5]),[r,n]=U.useState([2.7,7.4,20.1,54.6,148.4]),[a,i]=U.useState("exponential"),[s,l]=U.useState(null),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:p}=$t(Hfe);U.useEffect(()=>{d().catch(console.error)},[d]);const h=()=>{try{const b=Wfe(t,r,a);l(b),o("สถานะ: คำนวณเสร็จสิ้น")}catch(b){console.error(b),l(null),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},D=()=>{e([1,2,3,4,5]),n([2.7,7.4,20.1,54.6,148.4]),i("exponential"),l(null),o("สถานะ: รีเซ็ตแล้ว")},w=async()=>{try{const b={x:JSON.stringify(t),y:JSON.stringify(r),model:a,expr:`Nonlinear Regression (${a})`,method:"nonlinear_regression"};await m(b),alert("บันทึกแล้ว!")}catch(b){alert("บันทึกไม่สำเร็จ: "+((b==null?void 0:b.message)||String(b)))}},S=b=>{try{e(JSON.parse(b.x)),n(JSON.parse(b.y)),i(b.model||"exponential")}catch{alert("ไม่สามารถโหลดโจทย์ได้")}},x=b=>{confirm("ลบโจทย์นี้ไหม?")&&p(b.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Nonlinear Regression",subtitle:"การประมาณค่าแบบไม่เชิงเส้น (Exponential / Power Model)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"เลือกโมเดล"}),v.jsxs("select",{value:a,onChange:b=>i(b.target.value),className:"w-full mb-3 px-2 py-1 rounded bg-slate-900 border border-slate-700",children:[v.jsx("option",{value:"exponential",children:"Exponential (y = a·e^(b·x))"}),v.jsx("option",{value:"power",children:"Power (y = a·x^b)"})]}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x"}),v.jsx("textarea",{value:t.join(", "),onChange:b=>e(b.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า y"}),v.jsx("textarea",{value:r.join(", "),onChange:b=>n(b.target.value.split(",").map(N=>parseFloat(N.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:D,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:u}),v.jsx(Lt,{problems:c,onLoad:S,onDelete:x,removingIds:f})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟและสมการที่ได้"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(y1,{xValues:t,yValues:r,params:s,model:a,className:"w-full h-72"})}),s&&v.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[v.jsx("div",{className:"mb-2",children:"สมการที่ได้:"}),a==="exponential"?v.jsxs("div",{children:["y = ",Fe(s.a)," · e^(",Fe(s.b),"x)"]}):v.jsxs("div",{children:["y = ",Fe(s.a)," · x^",Fe(s.b)]})]})]})]}),s&&v.jsx("div",{className:"mt-6",children:v.jsx(x1,{xValues:t,yValues:r,params:s,model:a})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const A1="problems_single_trapezoidal";async function jF(){const t=Pt(Ue(Ce,A1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function kF(t){return jt(Ue(Ce,A1),{...t,method:"single_trapezoidal",createdAt:kt()})}async function D1(t){return Bt(Tt(Ce,A1,t))}const Xfe=jF,Kfe=kF,Jfe=D1,Yfe=D1,Zfe=Object.freeze(Object.defineProperty({__proto__:null,del:Yfe,deleteSingleTrapezoidalProblem:D1,getProblems:Xfe,getSingleTrapezoidalProblems:jF,remove:Jfe,save:Kfe,saveSingleTrapezoidalProblem:kF},Symbol.toStringTag,{value:"Module"}));function ede(t,e,r){const n=s=>{try{return js(t,{x:s})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}};return(r-e)/2*(n(e)+n(r))}function tp({func:t,a:e,b:r,n=10,width:a=800,height:i=320,className:s=""}){const l=U.useRef(null);return U.useEffect(()=>{const u=l.current;if(!u||!t)return;const o=Array.from({length:n+1},(b,N)=>e+(r-e)*N/n),c=o.map(t),f=e-1,d=r+1,m=Math.min(...c,0)-1,p=Math.max(...c)+1,h=u.getContext("2d"),D=u.width=a,w=u.height=i,S=b=>(b-f)/(d-f)*D,x=b=>w-(b-m)/(p-m)*w;h.fillStyle="#061022",h.fillRect(0,0,D,w),h.fillStyle="rgba(34,197,94,0.25)";for(let b=0;b<o.length-1;b++){const N=o[b],g=o[b+1],y=c[b],_=c[b+1];h.beginPath(),h.moveTo(S(N),x(0)),h.lineTo(S(N),x(y)),h.lineTo(S(g),x(_)),h.lineTo(S(g),x(0)),h.closePath(),h.fill()}h.strokeStyle="#3b82f6",h.lineWidth=2,h.beginPath(),o.forEach((b,N)=>{const g=S(b),y=x(c[N]);N===0?h.moveTo(g,y):h.lineTo(g,y)}),h.stroke()},[t,e,r,n,a,i]),v.jsx("canvas",{ref:l,width:a,height:i,className:s})}function rp({rows:t=[],table:e=null,method:r="",...n}){const a=Array.isArray(t)&&t.length?t:Array.isArray(e)?e:[];if(!a||a.length===0)return null;const i=a.length-1;return v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"i"}),v.jsx("th",{className:"p-2 text-center",children:"xᵢ"}),v.jsx("th",{className:"p-2 text-center",children:"f(xᵢ)"}),v.jsx("th",{className:"p-2 text-center",children:"Weight"})]})}),v.jsx("tbody",{children:a.map((s,l)=>{let u=s==null?void 0:s.weight;if(u===void 0){const o=(r||"").toLowerCase();o.includes("simpson")?u=l===0||l===i?1:l%2===1?4:2:o.includes("trapezoid")||o.includes("trapezoidal")||o.includes("trapez")?u=l===0||l===i?1:2:u=(s==null?void 0:s.weight)??""}return v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900 transition-colors",children:[v.jsx("td",{className:"p-2 text-center font-medium",children:l}),v.jsx("td",{className:"p-2 text-right",children:Fe(s.x)}),v.jsx("td",{className:"p-2 text-right",children:Fe(s.fx)}),v.jsx("td",{className:"p-2 text-right",children:u})]},l)})})]})})}function tde(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,l]=U.useState("-"),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:c,removingIds:f,refresh:d,saveProblem:m,deleteProblem:p}=$t(Zfe);U.useEffect(()=>{d().catch(console.error)},[d]);const h=()=>{const N=yn(t);if(!N){o("สถานะ: ฟังก์ชันไม่ถูกต้อง");return}try{const{I:g,h:y,fa:_,fb:E}=ede(r,a,N);l(g),o(`สถานะ: คำนวณสำเร็จ (h = ${Fe(y)}, f(a)=${Fe(_)}, f(b)=${Fe(E)})`)}catch(g){console.error(g),l("-"),o("สถานะ: "+(g.message||"เกิดข้อผิดพลาดในการคำนวณ"))}},D=()=>{e("x^2 + 1"),n(0),i(2),l("-"),o("สถานะ: รีเซ็ตแล้ว")},w=async()=>{try{await m({expr:t,a:r,b:a,method:"single_trapezoidal"}),alert("บันทึกแล้ว!")}catch(N){alert("บันทึกไม่สำเร็จ: "+((N==null?void 0:N.message)||String(N)))}},S=N=>{e(N.expr),n(N.a),i(N.b)},x=N=>{confirm("ลบโจทย์นี้ไหม?")&&p(N.id)},b=yn(t)||(N=>N);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Single Trapezoidal Rule",subtitle:"การอินทิเกรตเชิงตัวเลขแบบ Trapezoidal (ช่วงเดียว)"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),v.jsx("input",{type:"text",value:t,onChange:N=>e(N.target.value),placeholder:"กรอกสมการ เช่น x^2 + 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),v.jsx("input",{type:"number",value:r,onChange:N=>n(parseFloat(N.target.value)),className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),v.jsx("input",{type:"number",value:a,onChange:N=>i(parseFloat(N.target.value)),className:"w-24 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:h,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:D,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:w,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm text-gray-300 mb-2",children:u}),v.jsx(Lt,{problems:c,onLoad:S,onDelete:x,removingIds:f})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟและผลลัพธ์"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded mb-3",children:v.jsx(tp,{func:b,a:r,b:a,n:1,method:"Single Trapezoidal",className:"w-full h-72"})}),s!=="-"&&v.jsxs("div",{className:"text-sm text-gray-300",children:[v.jsxs("p",{children:["h = ",Fe(a-r)]}),v.jsxs("p",{children:["f(a) = ",Fe(b(r)),", f(b) = ",Fe(b(a))]}),v.jsxs("p",{className:"mt-2",children:["ค่าประมาณของ I ≈ ",v.jsx("b",{children:Fe(s)})]}),v.jsx("p",{className:"text-gray-400 mt-1",children:"ใช้สูตร: I = (h / 2) [f(a) + f(b)]"})]})]})]}),s!=="-"&&v.jsx("div",{className:"mt-6",children:v.jsx(rp,{rows:[{x:r,fx:b(r)},{x:a,fx:b(a)}],method:"Single Trapezoidal"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const C1="problems_composite_trapezoidal";async function $F(){const t=Pt(Ue(Ce,C1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function LF(t){return jt(Ue(Ce,C1),{...t,method:"composite_trapezoidal",createdAt:kt()})}async function T1(t){return Bt(Tt(Ce,C1,t))}const rde=$F,nde=LF,ade=T1,ide=T1,sde=Object.freeze(Object.defineProperty({__proto__:null,del:ide,deleteCompositeTrapezoidalProblem:T1,getCompositeTrapezoidalProblems:$F,getProblems:rde,remove:ade,save:nde,saveCompositeTrapezoidalProblem:LF},Symbol.toStringTag,{value:"Module"}));function ode(t,e,r,n){const a=(e-t)/r;let i=n(t)+n(e);const s=[{i:0,x:t,fx:n(t)}];for(let u=1;u<r;u++){const o=t+u*a;i+=2*n(o),s.push({i:u,x:o,fx:n(o)})}return s.push({i:r,x:e,fx:n(e)}),{I:a/2*i,h:a,rows:s}}function lde(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,l]=U.useState(4),[u,o]=U.useState("-"),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=U.useState([]),{problems:p,removingIds:h,refresh:D,saveProblem:w,deleteProblem:S}=$t(sde);U.useEffect(()=>{D().catch(console.error)},[D]);const x=C=>{try{return js(t,{x:C})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},b=()=>{try{const{I:C,h:T,rows:M}=ode(r,a,s,x);o(C),m(M),f(`สถานะ: คำนวณสำเร็จ (h = ${Fe(T)})`)}catch(C){console.error(C),o("-"),f("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),m([])}},N=()=>{e("x^2 + 1"),n(0),i(2),l(4),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},g=async()=>{try{await w({expr:t,a:r,b:a,n:s,method:"composite_trapezoidal"}),alert("บันทึกแล้ว!")}catch(C){alert("บันทึกไม่สำเร็จ: "+((C==null?void 0:C.message)||String(C)))}},y=C=>{e(C.expr),n(C.a),i(C.b),l(C.n)},_=C=>{confirm("ลบโจทย์นี้ไหม?")&&S(C.id)},E=yn(t)||(C=>C);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Composite Trapezoidal Rule",subtitle:"การอินทิเกรตเชิงตัวเลขแบบหลายช่วงด้วย Trapezoidal Rule"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),v.jsx("input",{type:"text",value:t,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),v.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),v.jsx("input",{type:"number",value:r,onChange:C=>n(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),v.jsx("input",{type:"number",value:a,onChange:C=>i(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n"}),v.jsx("input",{type:"number",value:s,onChange:C=>l(Math.max(1,parseInt(C.target.value)||1)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:b,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:N,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:p,onLoad:y,onDelete:_,removingIds:h})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"พื้นที่ใต้กราฟ (Trapezoidal Rule)"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(tp,{func:E,a:r,b:a,table:d,method:"Trapezoidal",className:"w-full h-72"})}),u!=="-"&&v.jsxs("div",{className:"mt-3 text-gray-300 text-sm",children:["ค่าประมาณของ I ≈ ",v.jsx("b",{children:Fe(u)})]})]})]}),d.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(rp,{table:d,method:"Trapezoidal"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const M1="problems_simpson";async function zF(){const t=Pt(Ue(Ce,M1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function VF(t){return jt(Ue(Ce,M1),{...t,method:"simpson",createdAt:kt()})}async function I1(t){return Bt(Tt(Ce,M1,t))}const ude=zF,cde=VF,fde=I1,dde=I1,mde=Object.freeze(Object.defineProperty({__proto__:null,del:dde,deleteSimpsonProblem:I1,getProblems:ude,getSimpsonProblems:zF,remove:fde,save:cde,saveSimpsonProblem:VF},Symbol.toStringTag,{value:"Module"}));function hde(t,e,r,n){if(n%2!==0)throw new Error("n ต้องเป็นจำนวนคู่เท่านั้น");const a=o=>{try{return js(t,{x:o})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},i=(r-e)/n;let s=a(e)+a(r);const l=[{i:0,x:e,fx:a(e)}];for(let o=1;o<n;o++){const c=e+o*i,f=a(c);s+=o%2===0?2*f:4*f,l.push({i:o,x:c,fx:f})}return l.push({i:n,x:r,fx:a(r)}),{I:i/3*s,h:i,rows:l}}function pde(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,l]=U.useState(4),[u,o]=U.useState("-"),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=U.useState([]),{problems:p,removingIds:h,refresh:D,saveProblem:w,deleteProblem:S}=$t(mde);U.useEffect(()=>{D().catch(console.error)},[D]);const x=()=>{const E=yn(t);if(!E){f("สถานะ: ฟังก์ชันไม่ถูกต้อง");return}try{const{I:C,h:T,rows:M}=hde(r,a,s,E);o(C),m(M),f(`สถานะ: คำนวณสำเร็จ (h = ${Fe(T)})`)}catch(C){console.error(C),o("-"),f("สถานะ: "+(C.message||"เกิดข้อผิดพลาดในการคำนวณ")),m([])}},b=()=>{e("x^2 + 1"),n(0),i(2),l(4),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},N=async()=>{try{await w({expr:t,a:r,b:a,n:s,method:"simpson"}),alert("บันทึกแล้ว!")}catch(E){alert("บันทึกไม่สำเร็จ: "+((E==null?void 0:E.message)||String(E)))}},g=E=>{e(E.expr),n(E.a),i(E.b),l(E.n)},y=E=>{confirm("ลบโจทย์นี้ไหม?")&&S(E.id)},_=yn(t)||(E=>E);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Simpson’s Rule (1/3)",subtitle:"การอินทิเกรตเชิงตัวเลขด้วย Simpson’s Composite Rule"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),v.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),placeholder:"กรอกสมการ เช่น x^2 + 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),v.jsx("input",{type:"number",value:r,onChange:E=>n(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),v.jsx("input",{type:"number",value:a,onChange:E=>i(parseFloat(E.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n (คู่)"}),v.jsx("input",{type:"number",value:s,onChange:E=>l(Math.max(2,parseInt(E.target.value)||2)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:b,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:N,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm text-gray-300 mb-2",children:c}),v.jsx(Lt,{problems:p,onLoad:g,onDelete:y,removingIds:h})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟและผลลัพธ์"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded mb-3",children:v.jsx(tp,{func:_,a:r,b:a,n:s,method:"Simpson’s Rule",className:"w-full h-72"})}),u!=="-"&&v.jsxs("div",{className:"text-sm text-gray-300",children:[v.jsxs("p",{children:["ค่าประมาณของ I ≈ ",v.jsx("b",{children:Fe(u)})]}),v.jsx("p",{className:"text-gray-400 mt-1",children:"ใช้สูตร I = (h/3)[f(x₀) + 4∑f(xᵢ_คี่) + 2∑f(xᵢ_คู่) + f(xₙ)]"})]})]})]}),d.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(rp,{rows:d,method:"Simpson’s Rule"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const F1="problems_composite_simpson";async function UF(){const t=Pt(Ue(Ce,F1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function qF(t){return jt(Ue(Ce,F1),{...t,method:"composite_simpson",createdAt:kt()})}async function P1(t){return Bt(Tt(Ce,F1,t))}const vde=UF,gde=qF,yde=P1,xde=P1,bde=Object.freeze(Object.defineProperty({__proto__:null,del:xde,deleteCompositeSimpsonProblem:P1,getCompositeSimpsonProblems:UF,getProblems:vde,remove:yde,save:gde,saveCompositeSimpsonProblem:qF},Symbol.toStringTag,{value:"Module"}));function wde(t,e,r,n){if(r%2!==0)throw new Error("n ต้องเป็นจำนวนคู่เท่านั้น");const a=(e-t)/r;let i=n(t)+n(e);const s=[{i:0,x:t,fx:n(t)}];for(let u=1;u<r;u++){const o=t+u*a,c=n(o);i+=u%2===0?2*c:4*c,s.push({i:u,x:o,fx:c})}return s.push({i:r,x:e,fx:n(e)}),{I:a/3*i,h:a,rows:s}}function Nde(){const[t,e]=U.useState("x^2 + 1"),[r,n]=U.useState(0),[a,i]=U.useState(2),[s,l]=U.useState(4),[u,o]=U.useState("-"),[c,f]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[d,m]=U.useState([]),{problems:p,removingIds:h,refresh:D,saveProblem:w,deleteProblem:S}=$t(bde);U.useEffect(()=>{D().catch(console.error)},[D]);const x=C=>{try{return js(t,{x:C})}catch{throw new Error("ไม่สามารถประเมินสมการได้")}},b=()=>{try{const{I:C,h:T,rows:M}=wde(r,a,s,x);o(C),m(M),f(`สถานะ: คำนวณสำเร็จ (h = ${Fe(T)})`)}catch(C){console.error(C),o("-"),f("สถานะ: "+(C.message||"เกิดข้อผิดพลาดในการคำนวณ")),m([])}},N=()=>{e("x^2 + 1"),n(0),i(2),l(4),o("-"),f("สถานะ: รีเซ็ตแล้ว"),m([])},g=async()=>{try{await w({expr:t,a:r,b:a,n:s,method:"composite_simpson"}),alert("บันทึกแล้ว!")}catch(C){alert("บันทึกไม่สำเร็จ: "+((C==null?void 0:C.message)||String(C)))}},y=C=>{e(C.expr),n(C.a),i(C.b),l(C.n)},_=C=>{confirm("ลบโจทย์นี้ไหม?")&&S(C.id)},E=yn(t)||(C=>C);return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Composite Simpson’s Rule (1/3)",subtitle:"การอินทิเกรตเชิงตัวเลขแบบหลายช่วงด้วย Simpson’s Rule"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ฟังก์ชัน f(x)"}),v.jsx("input",{type:"text",value:t,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3",placeholder:"กรอกสมการ เช่น x^2 + 1"}),v.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"a"}),v.jsx("input",{type:"number",value:r,onChange:C=>n(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"b"}),v.jsx("input",{type:"number",value:a,onChange:C=>i(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"n (คู่)"}),v.jsx("input",{type:"number",value:s,onChange:C=>l(Math.max(2,parseInt(C.target.value)||2)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:b,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:N,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:g,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:c}),v.jsx(Lt,{problems:p,onLoad:y,onDelete:_,removingIds:h})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"พื้นที่ใต้กราฟ (Simpson’s Rule)"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(tp,{func:E,a:r,b:a,table:d,method:"Simpson",className:"w-full h-72"})}),u!=="-"&&v.jsxs("div",{className:"mt-3 text-gray-300 text-sm",children:["ค่าประมาณของ I ≈ ",v.jsx("b",{children:Fe(u)})]})]})]}),d.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(rp,{table:d,method:"Simpson"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const R1="problems_first_divided";async function HF(){const t=Pt(Ue(Ce,R1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function GF(t){return jt(Ue(Ce,R1),{...t,method:"first_divided",createdAt:kt()})}async function O1(t){return Bt(Tt(Ce,R1,t))}const _de=HF,Sde=GF,Ede=O1,Ade=O1,Dde=Object.freeze(Object.defineProperty({__proto__:null,del:Ade,deleteFirstDividedProblem:O1,getFirstDividedProblems:HF,getProblems:_de,remove:Ede,save:Sde,saveFirstDividedProblem:GF},Symbol.toStringTag,{value:"Module"}));function Cde(t,e,r,n,a){const i=(n-r)/(e-t),s=r+i*(a-t);return{f01:i,Px:s}}function np({func:t,x:e,h:r=.5,width:n=800,height:a=320,className:i=""}){const s=U.useRef(null);return U.useEffect(()=>{const l=s.current;if(!l||!t)return;const u=e-3,o=e+3,c=Array.from({length:200},(g,y)=>u+(o-u)*y/199),f=c.map(t),d=Math.min(...f)-1,m=Math.max(...f)+1,p=l.getContext("2d"),h=l.width=n,D=l.height=a,w=g=>(g-u)/(o-u)*h,S=g=>D-(g-d)/(m-d)*D;p.fillStyle="#061022",p.fillRect(0,0,h,D),p.strokeStyle="#3b82f6",p.beginPath(),c.forEach((g,y)=>{const _=w(g),E=S(t(g));y===0?p.moveTo(_,E):p.lineTo(_,E)}),p.stroke();const x=(t(e+r)-t(e-r))/(2*r),b=t(e),N=g=>x*(g-e)+b;p.strokeStyle="#22c55e",p.beginPath();for(let g=0;g<c.length;g++){const y=c[g],_=w(y),E=S(N(y));g===0?p.moveTo(_,E):p.lineTo(_,E)}p.stroke(),p.fillStyle="#f97316",p.beginPath(),p.arc(w(e),S(b),5,0,2*Math.PI),p.fill()},[t,e,r,n,a]),v.jsx("canvas",{ref:s,width:n,height:a,className:i})}function ap({steps:t=[],table:e=null,data:r=null}){var a,i;let n=Array.isArray(t)&&t.length?t:Array.isArray(e)&&e.length?e:Array.isArray(r)?r:[];if(!n||n.length===0)return null;if(Array.isArray(n[0])&&n.every(Array.isArray)){const s=n,l=s[0].length,u=[];for(let o=0;o<l;o++)u.push({x:void 0,fx:s[0][o],d1:((a=s[1])==null?void 0:a[o])??void 0,d2:((i=s[2])==null?void 0:i[o])??void 0});n=u}return v.jsx("div",{className:"bg-slate-800 rounded-xl shadow-md p-4 mt-6 overflow-x-auto",children:v.jsxs("table",{className:"w-full text-sm border-collapse",children:[v.jsx("thead",{className:"bg-slate-700 text-gray-300",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2 text-center",children:"xᵢ"}),v.jsx("th",{className:"p-2 text-center",children:"f(xᵢ)"}),v.jsx("th",{className:"p-2 text-center",children:"Δf"}),v.jsx("th",{className:"p-2 text-center",children:"Δ²f"})]})}),v.jsx("tbody",{children:n.map((s,l)=>v.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-900 transition-colors",children:[v.jsx("td",{className:"p-2 text-right",children:Fe(s.x)}),v.jsx("td",{className:"p-2 text-right",children:Fe(s.fx)}),v.jsx("td",{className:"p-2 text-right",children:s.d1!==void 0?Fe(s.d1):"-"}),v.jsx("td",{className:"p-2 text-right",children:s.d2!==void 0?Fe(s.d2):"-"})]},l))})]})})}function Tde(){const[t,e]=U.useState(1),[r,n]=U.useState(2),[a,i]=U.useState(2),[s,l]=U.useState(5),[u,o]=U.useState(1.5),[c,f]=U.useState("-"),[d,m]=U.useState("-"),[p,h]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:D,removingIds:w,refresh:S,saveProblem:x,deleteProblem:b}=$t(Dde);U.useEffect(()=>{S().catch(console.error)},[S]);const N=()=>{try{const{f01:C,Px:T}=Cde(t,r,a,s,u);m(C),f(T),h("สถานะ: คำนวณเสร็จสิ้น")}catch(C){console.error(C),h("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},g=()=>{e(1),n(2),i(2),l(5),o(1.5),f("-"),m("-"),h("สถานะ: รีเซ็ตแล้ว")},y=async()=>{try{await x({x0:t,x1:r,fx0:a,fx1:s,x:u,method:"first_divided"}),alert("บันทึกแล้ว!")}catch(C){alert("บันทึกไม่สำเร็จ: "+((C==null?void 0:C.message)||String(C)))}},_=C=>{e(C.x0),n(C.x1),i(C.fx0),l(C.fx1),o(C.x)},E=C=>{confirm("ลบโจทย์นี้ไหม?")&&b(C.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"First Divided-Difference",subtitle:"การประมาณเชิงเส้นด้วย Newton’s First Divided-Difference"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₀"}),v.jsx("input",{type:"number",value:t,onChange:C=>e(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x₀)"}),v.jsx("input",{type:"number",value:a,onChange:C=>i(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"x₁"}),v.jsx("input",{type:"number",value:r,onChange:C=>n(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x₁)"}),v.jsx("input",{type:"number",value:s,onChange:C=>l(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),v.jsx("input",{type:"number",value:u,onChange:C=>o(parseFloat(C.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:N,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:g,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:y,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:p}),v.jsx(Lt,{problems:D,onLoad:_,onDelete:E,removingIds:w})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟการประมาณเชิงเส้น"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(np,{xValues:[t,r],yValues:[a,s],xTarget:u,method:"first",className:"w-full h-72"})}),d!=="-"&&v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:[v.jsxs("p",{children:["f[x₀, x₁] = ",Fe(d)]}),v.jsxs("p",{children:["f(",u,") ≈ ",v.jsx("b",{children:Fe(c)})]})]})]})]}),d!=="-"&&v.jsx("div",{className:"mt-6",children:v.jsx(ap,{table:[[a,s]]})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const B1="problems_second_divided";async function WF(){const t=Pt(Ue(Ce,B1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function QF(t){return jt(Ue(Ce,B1),{...t,method:"second_divided",createdAt:kt()})}async function j1(t){return Bt(Tt(Ce,B1,t))}const Mde=WF,Ide=QF,Fde=j1,Pde=j1,Rde=Object.freeze(Object.defineProperty({__proto__:null,del:Pde,deleteSecondDividedProblem:j1,getProblems:Mde,getSecondDividedProblems:WF,remove:Fde,save:Ide,saveSecondDividedProblem:QF},Symbol.toStringTag,{value:"Module"}));function Ode(t,e,r,n,a,i,s){const l=(a-n)/(e-t),u=(i-a)/(r-e),o=(u-l)/(r-t),c=n+l*(s-t)+o*(s-t)*(s-e);return{f01:l,f12:u,f012:o,Px:c}}function Bde(){const[t,e]=U.useState(1),[r,n]=U.useState(2),[a,i]=U.useState(3),[s,l]=U.useState(2),[u,o]=U.useState(5),[c,f]=U.useState(10),[d,m]=U.useState(2.5),[p,h]=U.useState("-"),[D,w]=U.useState("-"),[S,x]=U.useState("-"),[b,N]=U.useState("-"),[g,y]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),{problems:_,removingIds:E,refresh:C,saveProblem:T,deleteProblem:M}=$t(Rde);U.useEffect(()=>{C().catch(console.error)},[C]);const I=()=>{try{const{f01:z,f12:X,f012:ae,Px:k}=Ode(t,r,a,s,u,c,d);h(z),w(X),x(ae),N(k),y("สถานะ: คำนวณสำเร็จ")}catch(z){console.error(z),y("สถานะ: เกิดข้อผิดพลาดในการคำนวณ")}},j=()=>{e(1),n(2),i(3),l(2),o(5),f(10),m(2.5),N("-"),h("-"),w("-"),x("-"),y("สถานะ: รีเซ็ตแล้ว")},O=async()=>{try{await T({x0:t,x1:r,x2:a,fx0:s,fx1:u,fx2:c,x:d,method:"second_divided"}),alert("บันทึกแล้ว!")}catch(z){alert("บันทึกไม่สำเร็จ: "+((z==null?void 0:z.message)||String(z)))}},P=z=>{e(z.x0),n(z.x1),i(z.x2),l(z.fx0),o(z.fx1),f(z.fx2),m(z.x)},H=z=>{confirm("ลบโจทย์นี้ไหม?")&&M(z.id)},$=[{x:t,y:s},{x:r,y:u},{x:a,y:c}];return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Second Divided-Difference",subtitle:"การประมาณค่า f(x) ด้วย Newton’s Second Divided-Difference"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[0,1,2].map(z=>v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:["x",EA(z)]}),v.jsx("input",{type:"number",value:[t,r,a][z],onChange:X=>{const ae=parseFloat(X.target.value);z===0?e(ae):z===1?n(ae):i(ae)},className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"}),v.jsxs("label",{className:"block text-sm text-gray-400 mb-1 mt-1",children:["f(x",EA(z),")"]}),v.jsx("input",{type:"number",value:[s,u,c][z],onChange:X=>{const ae=parseFloat(X.target.value);z===0?l(ae):z===1?o(ae):f(ae)},className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700"})]},z))}),v.jsxs("div",{className:"mb-3",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ต้องการหาค่า f(x) ที่ x ="}),v.jsx("input",{type:"number",value:d,onChange:z=>m(parseFloat(z.target.value)),className:"w-32 px-2 py-1 rounded bg-slate-900 border border-slate-700"})]}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:I,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:j,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:O,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-400",children:g}),v.jsx(Lt,{problems:_,onLoad:P,onDelete:H,removingIds:E})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟ Second Divided-Difference"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(ks,{points:$,xTarget:parseFloat(d),method:"Second Divided-Difference",className:"w-full h-72"})}),S!=="-"&&v.jsxs("div",{className:"text-sm text-gray-300 mt-3",children:[v.jsxs("p",{children:["f[x₀, x₁] = ",Fe(p)]}),v.jsxs("p",{children:["f[x₁, x₂] = ",Fe(D)]}),v.jsxs("p",{children:["f[x₀, x₁, x₂] = ",Fe(S)]}),v.jsxs("p",{className:"mt-2",children:["f(",d,") ≈ ",v.jsx("b",{children:Fe(b)})]})]})]})]}),b!=="-"&&v.jsx("div",{className:"mt-6",children:v.jsx($s,{points:$,method:"Second Divided-Difference"})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function EA(t){return["₀","₁","₂"][t]}const k1="problems_forward_divided";async function XF(){const t=Pt(Ue(Ce,k1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function KF(t){return jt(Ue(Ce,k1),{...t,method:"forward_divided",createdAt:kt()})}async function $1(t){return Bt(Tt(Ce,k1,t))}const jde=XF,kde=KF,$de=$1,Lde=$1,zde=Object.freeze(Object.defineProperty({__proto__:null,del:Lde,deleteForwardDividedProblem:$1,getForwardDividedProblems:XF,getProblems:jde,remove:$de,save:kde,saveForwardDividedProblem:KF},Symbol.toStringTag,{value:"Module"}));function Vde(t){const e=t.length,r=[t.slice()];for(let n=1;n<e;n++){const a=r[n-1],i=[];for(let s=0;s<a.length-1;s++)i.push(a[s+1]-a[s]);r.push(i)}return r}function Ude(t,e,r){const n=t.length,a=t[1]-t[0],i=Vde(e),s=(r-t[0])/a;let l=e[0];for(let u=1;u<n;u++){let o=i[u][0];for(let c=0;c<u;c++)o*=s-c;l+=o/ti(u)}return{result:l,table:i}}function qde(){const[t,e]=U.useState([1,2,3,4]),[r,n]=U.useState([1,8,27,64]),[a,i]=U.useState(2.5),[s,l]=U.useState("-"),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=U.useState([]),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(zde);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const{result:g,table:y}=Ude(t,r,a);l(g),f(y),o("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ"),l("-"),f([])}},S=()=>{e([1,2,3,4]),n([1,8,27,64]),i(2.5),l("-"),o("สถานะ: รีเซ็ตแล้ว"),f([])},x=async()=>{try{const g={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"forward_divided"};await h(g),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{e(JSON.parse(g.x)),n(JSON.parse(g.y)),i(g.xFind)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Forward Divided-Difference",subtitle:"Newton’s Forward Difference Interpolation"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),v.jsx("textarea",{value:t.join(", "),onChange:g=>e(g.target.value.split(",").map(y=>parseFloat(y.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),v.jsx("textarea",{value:r.join(", "),onChange:g=>n(g.target.value.split(",").map(y=>parseFloat(y.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),v.jsx("input",{type:"number",value:a,onChange:g=>i(parseFloat(g.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:u}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟ Newton’s Forward Difference"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(np,{xValues:t,yValues:r,xTarget:a,method:"forward",className:"w-full h-72"})}),s!=="-"&&v.jsxs("div",{className:"mt-3 text-sm text-gray-300",children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(s)})]})]})]}),c.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(ap,{table:c})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const L1="problems_backward_divided";async function JF(){const t=Pt(Ue(Ce,L1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function YF(t){return jt(Ue(Ce,L1),{...t,method:"backward_divided",createdAt:kt()})}async function z1(t){return Bt(Tt(Ce,L1,t))}const Hde=JF,Gde=YF,Wde=z1,Qde=z1,Xde=Object.freeze(Object.defineProperty({__proto__:null,del:Qde,deleteBackwardDividedProblem:z1,getBackwardDividedProblems:JF,getProblems:Hde,remove:Wde,save:Gde,saveBackwardDividedProblem:YF},Symbol.toStringTag,{value:"Module"}));function ZF(t){const e=t.length,r=[t.slice()];for(let n=1;n<e;n++){const a=r[n-1],i=[];for(let s=1;s<a.length;s++)i.push(a[s]-a[s-1]);r.push(i)}return r}function Kde(t,e,r){const n=t.length;if(n===0)return{error:"Empty input"};const a=t[1]-t[0],i=ZF(e),s=(r-t[n-1])/a;let l=e[n-1];for(let u=1;u<n;u++){let o=i[u][i[u].length-1];for(let c=0;c<u;c++)o*=s+c;l+=o/ti(u)}return{result:l,table:i}}function Jde(){const[t,e]=U.useState([1,2,3,4]),[r,n]=U.useState([1,8,27,64]),[a,i]=U.useState(3.5),[s,l]=U.useState("-"),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=U.useState([]),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(Xde);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const{result:y,table:_}=Kde(t,r,a);l(y),f(_),o("สถานะ: คำนวณสำเร็จ ✅")}catch(y){console.error(y),o("สถานะ: เกิดข้อผิดพลาดในการคำนวณ ❌"),l("-"),f([])}},S=()=>{e([1,2,3,4]),n([1,8,27,64]),i(3.5),l("-"),o("สถานะ: รีเซ็ตแล้ว"),f([])},x=async()=>{try{const y={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"backward_divided"};await h(y),alert("บันทึกแล้ว!")}catch(y){alert("บันทึกไม่สำเร็จ: "+((y==null?void 0:y.message)||String(y)))}},b=y=>{try{e(JSON.parse(y.x)),n(JSON.parse(y.y)),i(y.xFind)}catch{alert("ไม่สามารถโหลดโจทย์: ข้อมูลไม่ถูกต้อง")}},N=y=>{confirm("ลบโจทย์นี้ไหม?")&&D(y.id)},g=y=>{const _=t.length,E=t[1]-t[0],C=ZF(r),T=t[_-1];let M=(y-T)/E,I=r[_-1],j=1;for(let O=1;O<_;O++)j*=(M+O-1)/O,I+=j*C[O][_-1];return I};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Backward Divided-Difference",subtitle:"Newton’s Backward Difference Interpolation"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),v.jsx("textarea",{value:t.join(", "),onChange:y=>e(y.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),v.jsx("textarea",{value:r.join(", "),onChange:y=>n(y.target.value.split(",").map(_=>parseFloat(_.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),v.jsx("input",{type:"number",value:a,onChange:y=>i(parseFloat(y.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-400",children:u}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"ผลลัพธ์"}),v.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["ใช้สูตร Newton’s Backward Difference:",v.jsx("br",{}),"P(x) = fₙ + u∇fₙ + (u(u+1)/2!)∇²fₙ + (u(u+1)(u+2)/3!)∇³fₙ + ...",v.jsx("br",{}),"โดย u = (x - xₙ)/h"]}),c.length>0&&v.jsx(ap,{steps:c.map((y,_)=>({x:_,fx:y[y.length-1],d1:_===1?y[y.length-1]:void 0,d2:_===2?y[y.length-1]:void 0}))}),s!=="-"&&v.jsxs("div",{className:"text-sm text-gray-300 mt-4",children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(s)})]}),v.jsxs("div",{className:"mt-6",children:[v.jsx("h3",{className:"text-gray-300 mb-2",children:"กราฟการประมาณค่า"}),v.jsx(np,{func:y=>g(y),xPoints:t,width:760,height:300,className:"rounded"})]})]})]}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}const V1="problems_central_divided";async function eP(){const t=Pt(Ue(Ce,V1),Rt("createdAt","desc"));return(await Ot(t)).docs.map(r=>({id:r.id,...r.data()}))}async function tP(t){return jt(Ue(Ce,V1),{...t,method:"central_divided",createdAt:kt()})}async function U1(t){return Bt(Tt(Ce,V1,t))}const Yde=eP,Zde=tP,eme=U1,tme=U1,rme=Object.freeze(Object.defineProperty({__proto__:null,del:tme,deleteCentralDividedProblem:U1,getCentralDividedProblems:eP,getProblems:Yde,remove:eme,save:Zde,saveCentralDividedProblem:tP},Symbol.toStringTag,{value:"Module"}));function nme(t){const e=t.length,r=[t.slice()];for(let n=1;n<e;n++){const a=r[n-1],i=[];for(let s=0;s<a.length-1;s++)i.push(a[s+1]-a[s]);r.push(i)}return r}function ame(t,e,r){const n=t.length;if(n<3)throw new Error("ต้องมีข้อมูลอย่างน้อย 3 จุด");const a=t[1]-t[0],i=Math.floor(n/2),s=(r-t[i])/a,l=nme(e);let u=e[i];for(let o=1;o<n&&o<6;o++)if(o%2!==0){const c=Math.floor(o/2);let f=s;for(let d=1;d<o;d++)f*=(s*s-d*d)/(2*d+1);f*=l[o][i-c],u+=f/ti(o)}else{const c=o/2;let f=1;for(let d=0;d<c;d++)f*=s*s-d*d;f*=l[o][i-c],u+=f/ti(o)}return{result:u,table:l,u:s,h:a,m:i}}function ime(){const[t,e]=U.useState([1,2,3,4,5]),[r,n]=U.useState([1,8,27,64,125]),[a,i]=U.useState(3),[s,l]=U.useState("-"),[u,o]=U.useState("สถานะ: ยังไม่ได้คำนวณ"),[c,f]=U.useState([]),{problems:d,removingIds:m,refresh:p,saveProblem:h,deleteProblem:D}=$t(rme);U.useEffect(()=>{p().catch(console.error)},[p]);const w=()=>{try{const{result:g,table:y}=ame(t,r,a);l(g),f(y),o("สถานะ: คำนวณสำเร็จ")}catch(g){console.error(g),o("สถานะ: "+(g.message||"เกิดข้อผิดพลาดในการคำนวณ")),l("-"),f([])}},S=()=>{e([1,2,3,4,5]),n([1,8,27,64,125]),i(3),l("-"),o("สถานะ: รีเซ็ตแล้ว"),f([])},x=async()=>{try{const g={x:JSON.stringify(t),y:JSON.stringify(r),xFind:a,method:"central_divided"};await h(g),alert("บันทึกแล้ว!")}catch(g){alert("บันทึกไม่สำเร็จ: "+((g==null?void 0:g.message)||String(g)))}},b=g=>{try{e(JSON.parse(g.x)),n(JSON.parse(g.y)),i(g.xFind)}catch{alert("ไม่สามารถโหลดโจทย์ได้")}},N=g=>{confirm("ลบโจทย์นี้ไหม?")&&D(g.id)};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx(Mt,{title:"Central Divided-Difference",subtitle:"Newton’s Central Difference Interpolation"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x (คั่นด้วย ,)"}),v.jsx("textarea",{value:t.join(", "),onChange:g=>e(g.target.value.split(",").map(y=>parseFloat(y.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า f(x) (คั่นด้วย ,)"}),v.jsx("textarea",{value:r.join(", "),onChange:g=>n(g.target.value.split(",").map(y=>parseFloat(y.trim())||0)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3 text-sm"}),v.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าที่ต้องการประมาณ (x)"}),v.jsx("input",{type:"number",value:a,onChange:g=>i(parseFloat(g.target.value)),className:"w-full px-2 py-1 rounded bg-slate-900 border border-slate-700 mb-3"}),v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("button",{onClick:w,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),v.jsx("button",{onClick:S,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),v.jsx("button",{onClick:x,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"บันทึกโจทย์"}),v.jsx("div",{className:"text-sm mb-2 text-gray-300",children:u}),v.jsx(Lt,{problems:d,onLoad:b,onDelete:N,removingIds:m})]}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟข้อมูล"}),v.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:v.jsx(np,{xValues:t,yValues:r,xTarget:a,method:"central",className:"w-full h-72"})}),s!=="-"&&v.jsxs("div",{className:"mt-3 text-gray-300 text-sm",children:["f(",a,") ≈ ",v.jsx("b",{children:Fe(s)})]})]})]}),c.length>0&&v.jsx("div",{className:"mt-6",children:v.jsx(ap,{table:c})}),v.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© By KaiMaiRuh"})]})}function sme(){return v.jsx(q6,{basename:"/Numerical-web",children:v.jsxs(j6,{children:[v.jsx(wt,{path:"/",element:v.jsx(X6,{})}),v.jsx(wt,{path:"/bisection",element:v.jsx(ck,{})}),v.jsx(wt,{path:"/falseposition",element:v.jsx(hk,{})}),v.jsx(wt,{path:"/onepoint",element:v.jsx(pk,{})}),v.jsx(wt,{path:"/taylor",element:v.jsx(eue,{})}),v.jsx(wt,{path:"/newtonraphson",element:v.jsx(aue,{})}),v.jsx(wt,{path:"/secant",element:v.jsx(lue,{})}),v.jsx(wt,{path:"/cramer",element:v.jsx(pue,{})}),v.jsx(wt,{path:"/gaussian",element:v.jsx(Nue,{})}),v.jsx(wt,{path:"/gaussjordan",element:v.jsx(Tue,{})}),v.jsx(wt,{path:"/matrixinversion",element:v.jsx($ue,{})}),v.jsx(wt,{path:"/ludecomposition",element:v.jsx(Gue,{})}),v.jsx(wt,{path:"/cholesky",element:v.jsx(Zue,{})}),v.jsx(wt,{path:"/jacobi",element:v.jsx(sce,{})}),v.jsx(wt,{path:"/gaussseidel",element:v.jsx(mce,{})}),v.jsx(wt,{path:"/conjugategradient",element:v.jsx(bce,{})}),v.jsx(wt,{path:"/lagrangeinterp",element:v.jsx(Dce,{})}),v.jsx(wt,{path:"/linearinterp",element:v.jsx(Rce,{})}),v.jsx(wt,{path:"/quadraticinterp",element:v.jsx(zce,{})}),v.jsx(wt,{path:"/polynomialinterp",element:v.jsx(Kce,{})}),v.jsx(wt,{path:"/linearspline",element:v.jsx(nfe,{})}),v.jsx(wt,{path:"/quadraticspline",element:v.jsx(cfe,{})}),v.jsx(wt,{path:"/cubicspline",element:v.jsx(gfe,{})}),v.jsx(wt,{path:"/singlelinear",element:v.jsx(Sfe,{})}),v.jsx(wt,{path:"/multiplelinear",element:v.jsx(Pfe,{})}),v.jsx(wt,{path:"/polynomialreg",element:v.jsx(Lfe,{})}),v.jsx(wt,{path:"/nonlinearreg",element:v.jsx(Qfe,{})}),v.jsx(wt,{path:"/singletrapezoidal",element:v.jsx(tde,{})}),v.jsx(wt,{path:"/compositetrapezoidal",element:v.jsx(lde,{})}),v.jsx(wt,{path:"/simpsonsrule",element:v.jsx(pde,{})}),v.jsx(wt,{path:"/compositesimpson",element:v.jsx(Nde,{})}),v.jsx(wt,{path:"/firstdivided",element:v.jsx(Tde,{})}),v.jsx(wt,{path:"/seconddivided",element:v.jsx(Bde,{})}),v.jsx(wt,{path:"/forwarddivided",element:v.jsx(qde,{})}),v.jsx(wt,{path:"/backwarddivided",element:v.jsx(Jde,{})}),v.jsx(wt,{path:"/centraldivided",element:v.jsx(ime,{})})]})})}kC(document.getElementById("root")).render(v.jsx(U.StrictMode,{children:v.jsx(sme,{})}));
