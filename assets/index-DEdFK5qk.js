function Z0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function eE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hg={exports:{}},hl={},fg={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),tE=Symbol.for("react.portal"),nE=Symbol.for("react.fragment"),rE=Symbol.for("react.strict_mode"),iE=Symbol.for("react.profiler"),sE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),aE=Symbol.for("react.forward_ref"),lE=Symbol.for("react.suspense"),uE=Symbol.for("react.memo"),cE=Symbol.for("react.lazy"),jd=Symbol.iterator;function hE(t){return t===null||typeof t!="object"?null:(t=jd&&t[jd]||t["@@iterator"],typeof t=="function"?t:null)}var dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pg=Object.assign,mg={};function ji(t,e,n){this.props=t,this.context=e,this.refs=mg,this.updater=n||dg}ji.prototype.isReactComponent={};ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gg(){}gg.prototype=ji.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=mg,this.updater=n||dg}var ah=oh.prototype=new gg;ah.constructor=oh;pg(ah,ji.prototype);ah.isPureReactComponent=!0;var Fd=Array.isArray,yg=Object.prototype.hasOwnProperty,lh={current:null},vg={key:!0,ref:!0,__self:!0,__source:!0};function _g(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yg.call(e,r)&&!vg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:yo,type:t,key:s,ref:o,props:i,_owner:lh.current}}function fE(t,e){return{$$typeof:yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===yo}function dE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ud=/\/+/g;function au(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dE(""+t.key):e.toString(36)}function la(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yo:case tE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+au(o,0):r,Fd(i)?(n="",t!=null&&(n=t.replace(Ud,"$&/")+"/"),la(i,e,n,"",function(h){return h})):i!=null&&(uh(i)&&(i=fE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ud,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Fd(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+au(s,l);o+=la(s,e,n,u,i)}else if(u=hE(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+au(s,l++),o+=la(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fo(t,e,n){if(t==null)return t;var r=[],i=0;return la(t,r,"","",function(s){return e.call(n,s,i++)}),r}function pE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},ua={transition:null},mE={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:ua,ReactCurrentOwner:lh};function Eg(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Fo,forEach:function(t,e,n){Fo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fo(t,function(){e++}),e},toArray:function(t){return Fo(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=ji;de.Fragment=nE;de.Profiler=iE;de.PureComponent=oh;de.StrictMode=rE;de.Suspense=lE;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mE;de.act=Eg;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)yg.call(e,u)&&!vg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:yo,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:oE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sE,_context:t},t.Consumer=t};de.createElement=_g;de.createFactory=function(t){var e=_g.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:aE,render:t}};de.isValidElement=uh;de.lazy=function(t){return{$$typeof:cE,_payload:{_status:-1,_result:t},_init:pE}};de.memo=function(t,e){return{$$typeof:uE,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=ua.transition;ua.transition={};try{t()}finally{ua.transition=e}};de.unstable_act=Eg;de.useCallback=function(t,e){return Tt.current.useCallback(t,e)};de.useContext=function(t){return Tt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Tt.current.useEffect(t,e)};de.useId=function(){return Tt.current.useId()};de.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Tt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};de.useRef=function(t){return Tt.current.useRef(t)};de.useState=function(t){return Tt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Tt.current.useTransition()};de.version="18.3.1";fg.exports=de;var j=fg.exports;const gE=eE(j),yE=Z0({__proto__:null,default:gE},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE=j,_E=Symbol.for("react.element"),EE=Symbol.for("react.fragment"),wE=Object.prototype.hasOwnProperty,TE=vE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xE={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wE.call(e,r)&&!xE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_E,type:t,key:s,ref:o,props:i,_owner:TE.current}}hl.Fragment=EE;hl.jsx=wg;hl.jsxs=wg;hg.exports=hl;var E=hg.exports,Tg={exports:{}},Mt={},xg={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,B){var H=b.length;b.push(B);e:for(;0<H;){var Z=H-1>>>1,O=b[Z];if(0<i(O,B))b[Z]=B,b[H]=O,H=Z;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var B=b[0],H=b.pop();if(H!==B){b[0]=H;e:for(var Z=0,O=b.length,he=O>>>1;Z<he;){var oe=2*(Z+1)-1,Ie=b[oe],ce=oe+1,re=b[ce];if(0>i(Ie,H))ce<O&&0>i(re,Ie)?(b[Z]=re,b[ce]=H,Z=ce):(b[Z]=Ie,b[oe]=H,Z=oe);else if(ce<O&&0>i(re,H))b[Z]=re,b[ce]=H,Z=ce;else break e}}return B}function i(b,B){var H=b.sortIndex-B.sortIndex;return H!==0?H:b.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,p=null,_=3,C=!1,N=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(b){for(var B=n(h);B!==null;){if(B.callback===null)r(h);else if(B.startTime<=b)r(h),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(h)}}function L(b){if(P=!1,R(b),!N)if(n(u)!==null)N=!0,ae(z);else{var B=n(h);B!==null&&V(L,B.startTime-b)}}function z(b,B){N=!1,P&&(P=!1,A(m),m=-1),C=!0;var H=_;try{for(R(B),p=n(u);p!==null&&(!(p.expirationTime>B)||b&&!v());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,_=p.priorityLevel;var O=Z(p.expirationTime<=B);B=t.unstable_now(),typeof O=="function"?p.callback=O:p===n(u)&&r(u),R(B)}else r(u);p=n(u)}if(p!==null)var he=!0;else{var oe=n(h);oe!==null&&V(L,oe.startTime-B),he=!1}return he}finally{p=null,_=H,C=!1}}var q=!1,I=null,m=-1,g=5,T=-1;function v(){return!(t.unstable_now()-T<g)}function S(){if(I!==null){var b=t.unstable_now();T=b;var B=!0;try{B=I(!0,b)}finally{B?w():(q=!1,I=null)}}else q=!1}var w;if(typeof x=="function")w=function(){x(S)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,pe=X.port2;X.port1.onmessage=S,w=function(){pe.postMessage(null)}}else w=function(){D(S,0)};function ae(b){I=b,q||(q=!0,w())}function V(b,B){m=D(function(){b(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){N||C||(N=!0,ae(z))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(b){switch(_){case 1:case 2:case 3:var B=3;break;default:B=_}var H=_;_=B;try{return b()}finally{_=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,B){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var H=_;_=b;try{return B()}finally{_=H}},t.unstable_scheduleCallback=function(b,B,H){var Z=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,b){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=H+O,b={id:d++,callback:B,priorityLevel:b,startTime:H,expirationTime:O,sortIndex:-1},H>Z?(b.sortIndex=H,e(h,b),n(u)===null&&b===n(h)&&(P?(A(m),m=-1):P=!0,V(L,H-Z))):(b.sortIndex=O,e(u,b),N||C||(N=!0,ae(z))),b},t.unstable_shouldYield=v,t.unstable_wrapCallback=function(b){var B=_;return function(){var H=_;_=B;try{return b.apply(this,arguments)}finally{_=H}}}})(Ig);xg.exports=Ig;var IE=xg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=j,bt=IE;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sg=new Set,Us={};function Fr(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(Us[t]=e,t=0;t<e.length;t++)Sg.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=Object.prototype.hasOwnProperty,AE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bd={},zd={};function CE(t){return $u.call(zd,t)?!0:$u.call(Bd,t)?!1:AE.test(t)?zd[t]=!0:(Bd[t]=!0,!1)}function RE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PE(t,e,n,r){if(e===null||typeof e>"u"||RE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,hh);ct[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,hh);ct[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,hh);ct[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fh(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PE(e,n,i,r)&&(n=null),r||i===null?CE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pn=SE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uo=Symbol.for("react.element"),ni=Symbol.for("react.portal"),ri=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),Ag=Symbol.for("react.provider"),Cg=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),Wu=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),Rg=Symbol.for("react.offscreen"),$d=Symbol.iterator;function hs(t){return t===null||typeof t!="object"?null:(t=$d&&t[$d]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,lu;function _s(t){if(lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lu=e&&e[1]||""}return`
`+lu+t}var uu=!1;function cu(t,e){if(!t||uu)return"";uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{uu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_s(t):""}function NE(t){switch(t.tag){case 5:return _s(t.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return t=cu(t.type,!1),t;case 11:return t=cu(t.type.render,!1),t;case 1:return t=cu(t.type,!0),t;default:return""}}function Qu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ri:return"Fragment";case ni:return"Portal";case qu:return"Profiler";case dh:return"StrictMode";case Hu:return"Suspense";case Wu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cg:return(t.displayName||"Context")+".Consumer";case Ag:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:Qu(t.type)||"Memo";case On:e=t._payload,t=t._init;try{return Qu(t(e))}catch{}}return null}function kE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qu(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VE(t){var e=Pg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=VE(t))}function Ng(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Pg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gu(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kg(t,e){e=e.checked,e!=null&&fh(t,"checked",e,!1)}function Ku(t,e){kg(t,e);var n=sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xu(t,e.type,sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xu(t,e,n){(e!=="number"||Aa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Es=Array.isArray;function pi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Yu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Es(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sr(n)}}function Vg(t,e){var n=sr(e.value),r=sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zo,bg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DE=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(t){DE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),As[e]=As[t]})});function Mg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||As.hasOwnProperty(t)&&As[t]?(""+e).trim():e+"px"}function Lg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Mg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bE=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zu(t,e){if(e){if(bE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nc=null,mi=null,gi=null;function Gd(t){if(t=Eo(t)){if(typeof nc!="function")throw Error($(280));var e=t.stateNode;e&&(e=gl(e),nc(t.stateNode,t.type,e))}}function Og(t){mi?gi?gi.push(t):gi=[t]:mi=t}function jg(){if(mi){var t=mi,e=gi;if(gi=mi=null,Gd(t),e)for(t=0;t<e.length;t++)Gd(e[t])}}function Fg(t,e){return t(e)}function Ug(){}var hu=!1;function Bg(t,e,n){if(hu)return t(e,n);hu=!0;try{return Fg(t,e,n)}finally{hu=!1,(mi!==null||gi!==null)&&(Ug(),jg())}}function zs(t,e){var n=t.stateNode;if(n===null)return null;var r=gl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var rc=!1;if(Tn)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){rc=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{rc=!1}function ME(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var Cs=!1,Ca=null,Ra=!1,ic=null,LE={onError:function(t){Cs=!0,Ca=t}};function OE(t,e,n,r,i,s,o,l,u){Cs=!1,Ca=null,ME.apply(LE,arguments)}function jE(t,e,n,r,i,s,o,l,u){if(OE.apply(this,arguments),Cs){if(Cs){var h=Ca;Cs=!1,Ca=null}else throw Error($(198));Ra||(Ra=!0,ic=h)}}function Ur(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kd(t){if(Ur(t)!==t)throw Error($(188))}function FE(t){var e=t.alternate;if(!e){if(e=Ur(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Kd(i),t;if(s===r)return Kd(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function $g(t){return t=FE(t),t!==null?qg(t):null}function qg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qg(t);if(e!==null)return e;t=t.sibling}return null}var Hg=bt.unstable_scheduleCallback,Xd=bt.unstable_cancelCallback,UE=bt.unstable_shouldYield,BE=bt.unstable_requestPaint,$e=bt.unstable_now,zE=bt.unstable_getCurrentPriorityLevel,yh=bt.unstable_ImmediatePriority,Wg=bt.unstable_UserBlockingPriority,Pa=bt.unstable_NormalPriority,$E=bt.unstable_LowPriority,Qg=bt.unstable_IdlePriority,fl=null,ln=null;function qE(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(fl,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:QE,HE=Math.log,WE=Math.LN2;function QE(t){return t>>>=0,t===0?32:31-(HE(t)/WE|0)|0}var $o=64,qo=4194304;function ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Na(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ws(l):(s&=o,s!==0&&(r=ws(s)))}else o=n&~i,o!==0?r=ws(o):s!==0&&(r=ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),i=1<<n,r|=t[n],e&=~i;return r}function GE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Yt(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=GE(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function sc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gg(){var t=$o;return $o<<=1,!($o&4194240)&&($o=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function XE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function Kg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xg,_h,Yg,Jg,Zg,oc=!1,Ho=[],Hn=null,Wn=null,Qn=null,$s=new Map,qs=new Map,Fn=[],YE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yd(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":$s.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qs.delete(e.pointerId)}}function ds(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Eo(e),e!==null&&_h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JE(t,e,n,r,i){switch(e){case"focusin":return Hn=ds(Hn,t,e,n,r,i),!0;case"dragenter":return Wn=ds(Wn,t,e,n,r,i),!0;case"mouseover":return Qn=ds(Qn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return $s.set(s,ds($s.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qs.set(s,ds(qs.get(s)||null,t,e,n,r,i)),!0}return!1}function ey(t){var e=Ar(t.target);if(e!==null){var n=Ur(e);if(n!==null){if(e=n.tag,e===13){if(e=zg(n),e!==null){t.blockedOn=e,Zg(t.priority,function(){Yg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ca(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tc=r,n.target.dispatchEvent(r),tc=null}else return e=Eo(n),e!==null&&_h(e),t.blockedOn=n,!1;e.shift()}return!0}function Jd(t,e,n){ca(t)&&n.delete(e)}function ZE(){oc=!1,Hn!==null&&ca(Hn)&&(Hn=null),Wn!==null&&ca(Wn)&&(Wn=null),Qn!==null&&ca(Qn)&&(Qn=null),$s.forEach(Jd),qs.forEach(Jd)}function ps(t,e){t.blockedOn===e&&(t.blockedOn=null,oc||(oc=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,ZE)))}function Hs(t){function e(i){return ps(i,t)}if(0<Ho.length){ps(Ho[0],t);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&ps(Hn,t),Wn!==null&&ps(Wn,t),Qn!==null&&ps(Qn,t),$s.forEach(e),qs.forEach(e),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)ey(n),n.blockedOn===null&&Fn.shift()}var yi=Pn.ReactCurrentBatchConfig,ka=!0;function ew(t,e,n,r){var i=xe,s=yi.transition;yi.transition=null;try{xe=1,Eh(t,e,n,r)}finally{xe=i,yi.transition=s}}function tw(t,e,n,r){var i=xe,s=yi.transition;yi.transition=null;try{xe=4,Eh(t,e,n,r)}finally{xe=i,yi.transition=s}}function Eh(t,e,n,r){if(ka){var i=ac(t,e,n,r);if(i===null)Tu(t,e,r,Va,n),Yd(t,r);else if(JE(i,t,e,n,r))r.stopPropagation();else if(Yd(t,r),e&4&&-1<YE.indexOf(t)){for(;i!==null;){var s=Eo(i);if(s!==null&&Xg(s),s=ac(t,e,n,r),s===null&&Tu(t,e,r,Va,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tu(t,e,r,null,n)}}var Va=null;function ac(t,e,n,r){if(Va=null,t=gh(r),t=Ar(t),t!==null)if(e=Ur(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Va=t,null}function ty(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zE()){case yh:return 1;case Wg:return 4;case Pa:case $E:return 16;case Qg:return 536870912;default:return 16}default:return 16}}var Bn=null,wh=null,ha=null;function ny(){if(ha)return ha;var t,e=wh,n=e.length,r,i="value"in Bn?Bn.value:Bn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ha=i.slice(t,1<r?1-r:void 0)}function fa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wo(){return!0}function Zd(){return!1}function Lt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wo:Zd,this.isPropagationStopped=Zd,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Th=Lt(Fi),_o=je({},Fi,{view:0,detail:0}),nw=Lt(_o),du,pu,ms,dl=je({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ms&&(ms&&t.type==="mousemove"?(du=t.screenX-ms.screenX,pu=t.screenY-ms.screenY):pu=du=0,ms=t),du)},movementY:function(t){return"movementY"in t?t.movementY:pu}}),ep=Lt(dl),rw=je({},dl,{dataTransfer:0}),iw=Lt(rw),sw=je({},_o,{relatedTarget:0}),mu=Lt(sw),ow=je({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),aw=Lt(ow),lw=je({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uw=Lt(lw),cw=je({},Fi,{data:0}),tp=Lt(cw),hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dw[t])?!!e[t]:!1}function xh(){return pw}var mw=je({},_o,{key:function(t){if(t.key){var e=hw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xh,charCode:function(t){return t.type==="keypress"?fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gw=Lt(mw),yw=je({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),np=Lt(yw),vw=je({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xh}),_w=Lt(vw),Ew=je({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ww=Lt(Ew),Tw=je({},dl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xw=Lt(Tw),Iw=[9,13,27,32],Ih=Tn&&"CompositionEvent"in window,Rs=null;Tn&&"documentMode"in document&&(Rs=document.documentMode);var Sw=Tn&&"TextEvent"in window&&!Rs,ry=Tn&&(!Ih||Rs&&8<Rs&&11>=Rs),rp=" ",ip=!1;function iy(t,e){switch(t){case"keyup":return Iw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ii=!1;function Aw(t,e){switch(t){case"compositionend":return sy(e);case"keypress":return e.which!==32?null:(ip=!0,rp);case"textInput":return t=e.data,t===rp&&ip?null:t;default:return null}}function Cw(t,e){if(ii)return t==="compositionend"||!Ih&&iy(t,e)?(t=ny(),ha=wh=Bn=null,ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ry&&e.locale!=="ko"?null:e.data;default:return null}}var Rw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rw[t.type]:e==="textarea"}function oy(t,e,n,r){Og(r),e=Da(e,"onChange"),0<e.length&&(n=new Th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ps=null,Ws=null;function Pw(t){yy(t,0)}function pl(t){var e=ai(t);if(Ng(e))return t}function Nw(t,e){if(t==="change")return e}var ay=!1;if(Tn){var gu;if(Tn){var yu="oninput"in document;if(!yu){var op=document.createElement("div");op.setAttribute("oninput","return;"),yu=typeof op.oninput=="function"}gu=yu}else gu=!1;ay=gu&&(!document.documentMode||9<document.documentMode)}function ap(){Ps&&(Ps.detachEvent("onpropertychange",ly),Ws=Ps=null)}function ly(t){if(t.propertyName==="value"&&pl(Ws)){var e=[];oy(e,Ws,t,gh(t)),Bg(Pw,e)}}function kw(t,e,n){t==="focusin"?(ap(),Ps=e,Ws=n,Ps.attachEvent("onpropertychange",ly)):t==="focusout"&&ap()}function Vw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pl(Ws)}function Dw(t,e){if(t==="click")return pl(e)}function bw(t,e){if(t==="input"||t==="change")return pl(e)}function Mw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:Mw;function Qs(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$u.call(e,i)||!Zt(t[i],e[i]))return!1}return!0}function lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function up(t,e){var n=lp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lp(n)}}function uy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cy(){for(var t=window,e=Aa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Aa(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lw(t){var e=cy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uy(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=up(n,s);var o=up(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ow=Tn&&"documentMode"in document&&11>=document.documentMode,si=null,lc=null,Ns=null,uc=!1;function cp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uc||si==null||si!==Aa(r)||(r=si,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ns&&Qs(Ns,r)||(Ns=r,r=Da(lc,"onSelect"),0<r.length&&(e=new Th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=si)))}function Qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oi={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},vu={},hy={};Tn&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function ml(t){if(vu[t])return vu[t];if(!oi[t])return t;var e=oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hy)return vu[t]=e[n];return t}var fy=ml("animationend"),dy=ml("animationiteration"),py=ml("animationstart"),my=ml("transitionend"),gy=new Map,hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(t,e){gy.set(t,e),Fr(e,[t])}for(var _u=0;_u<hp.length;_u++){var Eu=hp[_u],jw=Eu.toLowerCase(),Fw=Eu[0].toUpperCase()+Eu.slice(1);dr(jw,"on"+Fw)}dr(fy,"onAnimationEnd");dr(dy,"onAnimationIteration");dr(py,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(my,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function fp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jE(r,e,void 0,t),t.currentTarget=null}function yy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,h),s=u}}}if(Ra)throw t=ic,Ra=!1,ic=null,t}function Ve(t,e){var n=e[pc];n===void 0&&(n=e[pc]=new Set);var r=t+"__bubble";n.has(r)||(vy(e,t,2,!1),n.add(r))}function wu(t,e,n){var r=0;e&&(r|=4),vy(n,t,r,e)}var Go="_reactListening"+Math.random().toString(36).slice(2);function Gs(t){if(!t[Go]){t[Go]=!0,Sg.forEach(function(n){n!=="selectionchange"&&(Uw.has(n)||wu(n,!1,t),wu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Go]||(e[Go]=!0,wu("selectionchange",!1,e))}}function vy(t,e,n,r){switch(ty(e)){case 1:var i=ew;break;case 4:i=tw;break;default:i=Eh}n=i.bind(null,e,n,t),i=void 0,!rc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ar(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Bg(function(){var h=s,d=gh(n),p=[];e:{var _=gy.get(t);if(_!==void 0){var C=Th,N=t;switch(t){case"keypress":if(fa(n)===0)break e;case"keydown":case"keyup":C=gw;break;case"focusin":N="focus",C=mu;break;case"focusout":N="blur",C=mu;break;case"beforeblur":case"afterblur":C=mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ep;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=_w;break;case fy:case dy:case py:C=aw;break;case my:C=ww;break;case"scroll":C=nw;break;case"wheel":C=xw;break;case"copy":case"cut":case"paste":C=uw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=np}var P=(e&4)!==0,D=!P&&t==="scroll",A=P?_!==null?_+"Capture":null:_;P=[];for(var x=h,R;x!==null;){R=x;var L=R.stateNode;if(R.tag===5&&L!==null&&(R=L,A!==null&&(L=zs(x,A),L!=null&&P.push(Ks(x,L,R)))),D)break;x=x.return}0<P.length&&(_=new C(_,N,null,n,d),p.push({event:_,listeners:P}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",_&&n!==tc&&(N=n.relatedTarget||n.fromElement)&&(Ar(N)||N[xn]))break e;if((C||_)&&(_=d.window===d?d:(_=d.ownerDocument)?_.defaultView||_.parentWindow:window,C?(N=n.relatedTarget||n.toElement,C=h,N=N?Ar(N):null,N!==null&&(D=Ur(N),N!==D||N.tag!==5&&N.tag!==6)&&(N=null)):(C=null,N=h),C!==N)){if(P=ep,L="onMouseLeave",A="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(P=np,L="onPointerLeave",A="onPointerEnter",x="pointer"),D=C==null?_:ai(C),R=N==null?_:ai(N),_=new P(L,x+"leave",C,n,d),_.target=D,_.relatedTarget=R,L=null,Ar(d)===h&&(P=new P(A,x+"enter",N,n,d),P.target=R,P.relatedTarget=D,L=P),D=L,C&&N)t:{for(P=C,A=N,x=0,R=P;R;R=Yr(R))x++;for(R=0,L=A;L;L=Yr(L))R++;for(;0<x-R;)P=Yr(P),x--;for(;0<R-x;)A=Yr(A),R--;for(;x--;){if(P===A||A!==null&&P===A.alternate)break t;P=Yr(P),A=Yr(A)}P=null}else P=null;C!==null&&dp(p,_,C,P,!1),N!==null&&D!==null&&dp(p,D,N,P,!0)}}e:{if(_=h?ai(h):window,C=_.nodeName&&_.nodeName.toLowerCase(),C==="select"||C==="input"&&_.type==="file")var z=Nw;else if(sp(_))if(ay)z=bw;else{z=Vw;var q=kw}else(C=_.nodeName)&&C.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(z=Dw);if(z&&(z=z(t,h))){oy(p,z,n,d);break e}q&&q(t,_,h),t==="focusout"&&(q=_._wrapperState)&&q.controlled&&_.type==="number"&&Xu(_,"number",_.value)}switch(q=h?ai(h):window,t){case"focusin":(sp(q)||q.contentEditable==="true")&&(si=q,lc=h,Ns=null);break;case"focusout":Ns=lc=si=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,cp(p,n,d);break;case"selectionchange":if(Ow)break;case"keydown":case"keyup":cp(p,n,d)}var I;if(Ih)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else ii?iy(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(ry&&n.locale!=="ko"&&(ii||m!=="onCompositionStart"?m==="onCompositionEnd"&&ii&&(I=ny()):(Bn=d,wh="value"in Bn?Bn.value:Bn.textContent,ii=!0)),q=Da(h,m),0<q.length&&(m=new tp(m,t,null,n,d),p.push({event:m,listeners:q}),I?m.data=I:(I=sy(n),I!==null&&(m.data=I)))),(I=Sw?Aw(t,n):Cw(t,n))&&(h=Da(h,"onBeforeInput"),0<h.length&&(d=new tp("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=I))}yy(p,e)})}function Ks(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Da(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zs(t,n),s!=null&&r.unshift(Ks(t,s,i)),s=zs(t,e),s!=null&&r.push(Ks(t,s,i))),t=t.return}return r}function Yr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=zs(n,s),u!=null&&o.unshift(Ks(n,u,l))):i||(u=zs(n,s),u!=null&&o.push(Ks(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Bw=/\r\n?/g,zw=/\u0000|\uFFFD/g;function pp(t){return(typeof t=="string"?t:""+t).replace(Bw,`
`).replace(zw,"")}function Ko(t,e,n){if(e=pp(e),pp(t)!==e&&n)throw Error($(425))}function ba(){}var cc=null,hc=null;function fc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,mp=typeof Promise=="function"?Promise:void 0,qw=typeof queueMicrotask=="function"?queueMicrotask:typeof mp<"u"?function(t){return mp.resolve(null).then(t).catch(Hw)}:dc;function Hw(t){setTimeout(function(){throw t})}function xu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hs(e)}function Gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ui=Math.random().toString(36).slice(2),an="__reactFiber$"+Ui,Xs="__reactProps$"+Ui,xn="__reactContainer$"+Ui,pc="__reactEvents$"+Ui,Ww="__reactListeners$"+Ui,Qw="__reactHandles$"+Ui;function Ar(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gp(t);t!==null;){if(n=t[an])return n;t=gp(t)}return e}t=n,n=t.parentNode}return null}function Eo(t){return t=t[an]||t[xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function gl(t){return t[Xs]||null}var mc=[],li=-1;function pr(t){return{current:t}}function be(t){0>li||(t.current=mc[li],mc[li]=null,li--)}function Ce(t,e){li++,mc[li]=t.current,t.current=e}var or={},vt=pr(or),Ct=pr(!1),Vr=or;function Si(t,e){var n=t.type.contextTypes;if(!n)return or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function Ma(){be(Ct),be(vt)}function yp(t,e,n){if(vt.current!==or)throw Error($(168));Ce(vt,e),Ce(Ct,n)}function _y(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,kE(t)||"Unknown",i));return je({},n,r)}function La(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,Vr=vt.current,Ce(vt,t),Ce(Ct,Ct.current),!0}function vp(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=_y(t,e,Vr),r.__reactInternalMemoizedMergedChildContext=t,be(Ct),be(vt),Ce(vt,t)):be(Ct),Ce(Ct,n)}var vn=null,yl=!1,Iu=!1;function Ey(t){vn===null?vn=[t]:vn.push(t)}function Gw(t){yl=!0,Ey(t)}function mr(){if(!Iu&&vn!==null){Iu=!0;var t=0,e=xe;try{var n=vn;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vn=null,yl=!1}catch(i){throw vn!==null&&(vn=vn.slice(t+1)),Hg(yh,mr),i}finally{xe=e,Iu=!1}}return null}var ui=[],ci=0,Oa=null,ja=0,Ot=[],jt=0,Dr=null,_n=1,En="";function Tr(t,e){ui[ci++]=ja,ui[ci++]=Oa,Oa=t,ja=e}function wy(t,e,n){Ot[jt++]=_n,Ot[jt++]=En,Ot[jt++]=Dr,Dr=t;var r=_n;t=En;var i=32-Yt(r)-1;r&=~(1<<i),n+=1;var s=32-Yt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_n=1<<32-Yt(e)+i|n<<i|r,En=s+t}else _n=1<<s|n<<i|r,En=t}function Ah(t){t.return!==null&&(Tr(t,1),wy(t,1,0))}function Ch(t){for(;t===Oa;)Oa=ui[--ci],ui[ci]=null,ja=ui[--ci],ui[ci]=null;for(;t===Dr;)Dr=Ot[--jt],Ot[jt]=null,En=Ot[--jt],Ot[jt]=null,_n=Ot[--jt],Ot[jt]=null}var Dt=null,Vt=null,Me=!1,Kt=null;function Ty(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _p(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Vt=Gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:_n,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Vt=null,!0):!1;default:return!1}}function gc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yc(t){if(Me){var e=Vt;if(e){var n=e;if(!_p(t,e)){if(gc(t))throw Error($(418));e=Gn(n.nextSibling);var r=Dt;e&&_p(t,e)?Ty(r,n):(t.flags=t.flags&-4097|2,Me=!1,Dt=t)}}else{if(gc(t))throw Error($(418));t.flags=t.flags&-4097|2,Me=!1,Dt=t}}}function Ep(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function Xo(t){if(t!==Dt)return!1;if(!Me)return Ep(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fc(t.type,t.memoizedProps)),e&&(e=Vt)){if(gc(t))throw xy(),Error($(418));for(;e;)Ty(t,e),e=Gn(e.nextSibling)}if(Ep(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=Gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Dt?Gn(t.stateNode.nextSibling):null;return!0}function xy(){for(var t=Vt;t;)t=Gn(t.nextSibling)}function Ai(){Vt=Dt=null,Me=!1}function Rh(t){Kt===null?Kt=[t]:Kt.push(t)}var Kw=Pn.ReactCurrentBatchConfig;function gs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wp(t){var e=t._init;return e(t._payload)}function Iy(t){function e(A,x){if(t){var R=A.deletions;R===null?(A.deletions=[x],A.flags|=16):R.push(x)}}function n(A,x){if(!t)return null;for(;x!==null;)e(A,x),x=x.sibling;return null}function r(A,x){for(A=new Map;x!==null;)x.key!==null?A.set(x.key,x):A.set(x.index,x),x=x.sibling;return A}function i(A,x){return A=Jn(A,x),A.index=0,A.sibling=null,A}function s(A,x,R){return A.index=R,t?(R=A.alternate,R!==null?(R=R.index,R<x?(A.flags|=2,x):R):(A.flags|=2,x)):(A.flags|=1048576,x)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,x,R,L){return x===null||x.tag!==6?(x=ku(R,A.mode,L),x.return=A,x):(x=i(x,R),x.return=A,x)}function u(A,x,R,L){var z=R.type;return z===ri?d(A,x,R.props.children,L,R.key):x!==null&&(x.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===On&&wp(z)===x.type)?(L=i(x,R.props),L.ref=gs(A,x,R),L.return=A,L):(L=_a(R.type,R.key,R.props,null,A.mode,L),L.ref=gs(A,x,R),L.return=A,L)}function h(A,x,R,L){return x===null||x.tag!==4||x.stateNode.containerInfo!==R.containerInfo||x.stateNode.implementation!==R.implementation?(x=Vu(R,A.mode,L),x.return=A,x):(x=i(x,R.children||[]),x.return=A,x)}function d(A,x,R,L,z){return x===null||x.tag!==7?(x=kr(R,A.mode,L,z),x.return=A,x):(x=i(x,R),x.return=A,x)}function p(A,x,R){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ku(""+x,A.mode,R),x.return=A,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uo:return R=_a(x.type,x.key,x.props,null,A.mode,R),R.ref=gs(A,null,x),R.return=A,R;case ni:return x=Vu(x,A.mode,R),x.return=A,x;case On:var L=x._init;return p(A,L(x._payload),R)}if(Es(x)||hs(x))return x=kr(x,A.mode,R,null),x.return=A,x;Yo(A,x)}return null}function _(A,x,R,L){var z=x!==null?x.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return z!==null?null:l(A,x,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Uo:return R.key===z?u(A,x,R,L):null;case ni:return R.key===z?h(A,x,R,L):null;case On:return z=R._init,_(A,x,z(R._payload),L)}if(Es(R)||hs(R))return z!==null?null:d(A,x,R,L,null);Yo(A,R)}return null}function C(A,x,R,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return A=A.get(R)||null,l(x,A,""+L,z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Uo:return A=A.get(L.key===null?R:L.key)||null,u(x,A,L,z);case ni:return A=A.get(L.key===null?R:L.key)||null,h(x,A,L,z);case On:var q=L._init;return C(A,x,R,q(L._payload),z)}if(Es(L)||hs(L))return A=A.get(R)||null,d(x,A,L,z,null);Yo(x,L)}return null}function N(A,x,R,L){for(var z=null,q=null,I=x,m=x=0,g=null;I!==null&&m<R.length;m++){I.index>m?(g=I,I=null):g=I.sibling;var T=_(A,I,R[m],L);if(T===null){I===null&&(I=g);break}t&&I&&T.alternate===null&&e(A,I),x=s(T,x,m),q===null?z=T:q.sibling=T,q=T,I=g}if(m===R.length)return n(A,I),Me&&Tr(A,m),z;if(I===null){for(;m<R.length;m++)I=p(A,R[m],L),I!==null&&(x=s(I,x,m),q===null?z=I:q.sibling=I,q=I);return Me&&Tr(A,m),z}for(I=r(A,I);m<R.length;m++)g=C(I,A,m,R[m],L),g!==null&&(t&&g.alternate!==null&&I.delete(g.key===null?m:g.key),x=s(g,x,m),q===null?z=g:q.sibling=g,q=g);return t&&I.forEach(function(v){return e(A,v)}),Me&&Tr(A,m),z}function P(A,x,R,L){var z=hs(R);if(typeof z!="function")throw Error($(150));if(R=z.call(R),R==null)throw Error($(151));for(var q=z=null,I=x,m=x=0,g=null,T=R.next();I!==null&&!T.done;m++,T=R.next()){I.index>m?(g=I,I=null):g=I.sibling;var v=_(A,I,T.value,L);if(v===null){I===null&&(I=g);break}t&&I&&v.alternate===null&&e(A,I),x=s(v,x,m),q===null?z=v:q.sibling=v,q=v,I=g}if(T.done)return n(A,I),Me&&Tr(A,m),z;if(I===null){for(;!T.done;m++,T=R.next())T=p(A,T.value,L),T!==null&&(x=s(T,x,m),q===null?z=T:q.sibling=T,q=T);return Me&&Tr(A,m),z}for(I=r(A,I);!T.done;m++,T=R.next())T=C(I,A,m,T.value,L),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?m:T.key),x=s(T,x,m),q===null?z=T:q.sibling=T,q=T);return t&&I.forEach(function(S){return e(A,S)}),Me&&Tr(A,m),z}function D(A,x,R,L){if(typeof R=="object"&&R!==null&&R.type===ri&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Uo:e:{for(var z=R.key,q=x;q!==null;){if(q.key===z){if(z=R.type,z===ri){if(q.tag===7){n(A,q.sibling),x=i(q,R.props.children),x.return=A,A=x;break e}}else if(q.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===On&&wp(z)===q.type){n(A,q.sibling),x=i(q,R.props),x.ref=gs(A,q,R),x.return=A,A=x;break e}n(A,q);break}else e(A,q);q=q.sibling}R.type===ri?(x=kr(R.props.children,A.mode,L,R.key),x.return=A,A=x):(L=_a(R.type,R.key,R.props,null,A.mode,L),L.ref=gs(A,x,R),L.return=A,A=L)}return o(A);case ni:e:{for(q=R.key;x!==null;){if(x.key===q)if(x.tag===4&&x.stateNode.containerInfo===R.containerInfo&&x.stateNode.implementation===R.implementation){n(A,x.sibling),x=i(x,R.children||[]),x.return=A,A=x;break e}else{n(A,x);break}else e(A,x);x=x.sibling}x=Vu(R,A.mode,L),x.return=A,A=x}return o(A);case On:return q=R._init,D(A,x,q(R._payload),L)}if(Es(R))return N(A,x,R,L);if(hs(R))return P(A,x,R,L);Yo(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,x!==null&&x.tag===6?(n(A,x.sibling),x=i(x,R),x.return=A,A=x):(n(A,x),x=ku(R,A.mode,L),x.return=A,A=x),o(A)):n(A,x)}return D}var Ci=Iy(!0),Sy=Iy(!1),Fa=pr(null),Ua=null,hi=null,Ph=null;function Nh(){Ph=hi=Ua=null}function kh(t){var e=Fa.current;be(Fa),t._currentValue=e}function vc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vi(t,e){Ua=t,Ph=hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(Ph!==t)if(t={context:t,memoizedValue:e,next:null},hi===null){if(Ua===null)throw Error($(308));hi=t,Ua.dependencies={lanes:0,firstContext:t}}else hi=hi.next=t;return e}var Cr=null;function Vh(t){Cr===null?Cr=[t]:Cr.push(t)}function Ay(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vh(e)):(n.next=i.next,i.next=n),e.interleaved=n,In(t,r)}function In(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jn=!1;function Dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,In(t,n)}return i=r.interleaved,i===null?(e.next=e,Vh(r)):(e.next=i.next,i.next=e),r.interleaved=e,In(t,n)}function da(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}function Tp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ba(t,e,n,r){var i=t.updateQueue;jn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,d=h=u=null,l=s;do{var _=l.lane,C=l.eventTime;if((r&_)===_){d!==null&&(d=d.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,P=l;switch(_=e,C=n,P.tag){case 1:if(N=P.payload,typeof N=="function"){p=N.call(C,p,_);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=P.payload,_=typeof N=="function"?N.call(C,p,_):N,_==null)break e;p=je({},p,_);break e;case 2:jn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else C={eventTime:C,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=C,u=p):d=d.next=C,o|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(d===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mr|=o,t.lanes=o,t.memoizedState=p}}function xp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var wo={},un=pr(wo),Ys=pr(wo),Js=pr(wo);function Rr(t){if(t===wo)throw Error($(174));return t}function bh(t,e){switch(Ce(Js,e),Ce(Ys,t),Ce(un,wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ju(e,t)}be(un),Ce(un,e)}function Ri(){be(un),be(Ys),be(Js)}function Ry(t){Rr(Js.current);var e=Rr(un.current),n=Ju(e,t.type);e!==n&&(Ce(Ys,t),Ce(un,n))}function Mh(t){Ys.current===t&&(be(un),be(Ys))}var Le=pr(0);function za(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function Lh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var pa=Pn.ReactCurrentDispatcher,Au=Pn.ReactCurrentBatchConfig,br=0,Oe=null,Xe=null,nt=null,$a=!1,ks=!1,Zs=0,Xw=0;function ft(){throw Error($(321))}function Oh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zt(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,i,s){if(br=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pa.current=t===null||t.memoizedState===null?e1:t1,t=n(r,i),ks){s=0;do{if(ks=!1,Zs=0,25<=s)throw Error($(301));s+=1,nt=Xe=null,e.updateQueue=null,pa.current=n1,t=n(r,i)}while(ks)}if(pa.current=qa,e=Xe!==null&&Xe.next!==null,br=0,nt=Xe=Oe=null,$a=!1,e)throw Error($(300));return t}function Fh(){var t=Zs!==0;return Zs=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Oe.memoizedState=nt=t:nt=nt.next=t,nt}function qt(){if(Xe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=nt===null?Oe.memoizedState:nt.next;if(e!==null)nt=e,Xe=t;else{if(t===null)throw Error($(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},nt===null?Oe.memoizedState=nt=t:nt=nt.next=t}return nt}function eo(t,e){return typeof e=="function"?e(t):e}function Cu(t){var e=qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var d=h.lane;if((br&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Oe.lanes|=d,Mr|=d}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Zt(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Oe.lanes|=s,Mr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ru(t){var e=qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Zt(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Py(){}function Ny(t,e){var n=Oe,r=qt(),i=e(),s=!Zt(r.memoizedState,i);if(s&&(r.memoizedState=i,At=!0),r=r.queue,Uh(Dy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,to(9,Vy.bind(null,n,r,i,e),void 0,null),it===null)throw Error($(349));br&30||ky(n,e,i)}return i}function ky(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vy(t,e,n,r){e.value=n,e.getSnapshot=r,by(e)&&My(t)}function Dy(t,e,n){return n(function(){by(e)&&My(t)})}function by(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zt(t,n)}catch{return!0}}function My(t){var e=In(t,1);e!==null&&Jt(e,t,1,-1)}function Ip(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:t},e.queue=t,t=t.dispatch=Zw.bind(null,Oe,t),[e.memoizedState,t]}function to(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ly(){return qt().memoizedState}function ma(t,e,n,r){var i=sn();Oe.flags|=t,i.memoizedState=to(1|e,n,void 0,r===void 0?null:r)}function vl(t,e,n,r){var i=qt();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var o=Xe.memoizedState;if(s=o.destroy,r!==null&&Oh(r,o.deps)){i.memoizedState=to(e,n,s,r);return}}Oe.flags|=t,i.memoizedState=to(1|e,n,s,r)}function Sp(t,e){return ma(8390656,8,t,e)}function Uh(t,e){return vl(2048,8,t,e)}function Oy(t,e){return vl(4,2,t,e)}function jy(t,e){return vl(4,4,t,e)}function Fy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uy(t,e,n){return n=n!=null?n.concat([t]):null,vl(4,4,Fy.bind(null,e,t),n)}function Bh(){}function By(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zy(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $y(t,e,n){return br&21?(Zt(n,e)||(n=Gg(),Oe.lanes|=n,Mr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function Yw(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Au.transition;Au.transition={};try{t(!1),e()}finally{xe=n,Au.transition=r}}function qy(){return qt().memoizedState}function Jw(t,e,n){var r=Yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hy(t))Wy(e,n);else if(n=Ay(t,e,n,r),n!==null){var i=wt();Jt(n,t,r,i),Qy(n,e,r)}}function Zw(t,e,n){var r=Yn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hy(t))Wy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Zt(l,o)){var u=e.interleaved;u===null?(i.next=i,Vh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ay(t,e,i,r),n!==null&&(i=wt(),Jt(n,t,r,i),Qy(n,e,r))}}function Hy(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Wy(t,e){ks=$a=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}var qa={readContext:$t,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},e1={readContext:$t,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:Sp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ma(4194308,4,Fy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ma(4194308,4,t,e)},useInsertionEffect:function(t,e){return ma(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Jw.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:Ip,useDebugValue:Bh,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=Ip(!1),e=t[0];return t=Yw.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=sn();if(Me){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),it===null)throw Error($(349));br&30||ky(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Sp(Dy.bind(null,r,s,t),[t]),r.flags|=2048,to(9,Vy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sn(),e=it.identifierPrefix;if(Me){var n=En,r=_n;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t1={readContext:$t,useCallback:By,useContext:$t,useEffect:Uh,useImperativeHandle:Uy,useInsertionEffect:Oy,useLayoutEffect:jy,useMemo:zy,useReducer:Cu,useRef:Ly,useState:function(){return Cu(eo)},useDebugValue:Bh,useDeferredValue:function(t){var e=qt();return $y(e,Xe.memoizedState,t)},useTransition:function(){var t=Cu(eo)[0],e=qt().memoizedState;return[t,e]},useMutableSource:Py,useSyncExternalStore:Ny,useId:qy,unstable_isNewReconciler:!1},n1={readContext:$t,useCallback:By,useContext:$t,useEffect:Uh,useImperativeHandle:Uy,useInsertionEffect:Oy,useLayoutEffect:jy,useMemo:zy,useReducer:Ru,useRef:Ly,useState:function(){return Ru(eo)},useDebugValue:Bh,useDeferredValue:function(t){var e=qt();return Xe===null?e.memoizedState=t:$y(e,Xe.memoizedState,t)},useTransition:function(){var t=Ru(eo)[0],e=qt().memoizedState;return[t,e]},useMutableSource:Py,useSyncExternalStore:Ny,useId:qy,unstable_isNewReconciler:!1};function Qt(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _c(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _l={isMounted:function(t){return(t=t._reactInternals)?Ur(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=Yn(t),s=wn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Kn(t,s,i),e!==null&&(Jt(e,t,i,r),da(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=Yn(t),s=wn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Kn(t,s,i),e!==null&&(Jt(e,t,i,r),da(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Yn(t),i=wn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Kn(t,i,r),e!==null&&(Jt(e,t,r,n),da(e,t,r))}};function Ap(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qs(n,r)||!Qs(i,s):!0}function Gy(t,e,n){var r=!1,i=or,s=e.contextType;return typeof s=="object"&&s!==null?s=$t(s):(i=Rt(e)?Vr:vt.current,r=e.contextTypes,s=(r=r!=null)?Si(t,i):or),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_l,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_l.enqueueReplaceState(e,e.state,null)}function Ec(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Dh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$t(s):(s=Rt(e)?Vr:vt.current,i.context=Si(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_c(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_l.enqueueReplaceState(i,i.state,null),Ba(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pi(t,e){try{var n="",r=e;do n+=NE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r1=typeof WeakMap=="function"?WeakMap:Map;function Ky(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wa||(Wa=!0,kc=r),wc(t,e)},n}function Xy(t,e,n){n=wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){wc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wc(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new r1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=y1.bind(null,t,e,n),e.then(t,t))}function Pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Np(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,Kn(n,e,1))),n.lanes|=1),t)}var i1=Pn.ReactCurrentOwner,At=!1;function Et(t,e,n,r){e.child=t===null?Sy(e,null,n,r):Ci(e,t.child,n,r)}function kp(t,e,n,r,i){n=n.render;var s=e.ref;return vi(e,i),r=jh(t,e,n,r,s,i),n=Fh(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Me&&n&&Ah(e),e.flags|=1,Et(t,e,r,i),e.child)}function Vp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Kh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Yy(t,e,s,r,i)):(t=_a(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(o,r)&&t.ref===e.ref)return Sn(t,e,i)}return e.flags|=1,t=Jn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Yy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qs(s,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Sn(t,e,i)}return Tc(t,e,n,r,i)}function Jy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(di,kt),kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(di,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(di,kt),kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(di,kt),kt|=r;return Et(t,e,i,n),e.child}function Zy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tc(t,e,n,r,i){var s=Rt(n)?Vr:vt.current;return s=Si(e,s),vi(e,i),n=jh(t,e,n,r,s,i),r=Fh(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Me&&r&&Ah(e),e.flags|=1,Et(t,e,n,i),e.child)}function Dp(t,e,n,r,i){if(Rt(n)){var s=!0;La(e)}else s=!1;if(vi(e,i),e.stateNode===null)ga(t,e),Gy(e,n,r),Ec(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=$t(h):(h=Rt(n)?Vr:vt.current,h=Si(e,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Cp(e,o,r,h),jn=!1;var _=e.memoizedState;o.state=_,Ba(e,r,o,i),u=e.memoizedState,l!==r||_!==u||Ct.current||jn?(typeof d=="function"&&(_c(e,n,d,r),u=e.memoizedState),(l=jn||Ap(e,n,l,r,_,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Qt(e.type,l),o.props=h,p=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=$t(u):(u=Rt(n)?Vr:vt.current,u=Si(e,u));var C=n.getDerivedStateFromProps;(d=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||_!==u)&&Cp(e,o,r,u),jn=!1,_=e.memoizedState,o.state=_,Ba(e,r,o,i);var N=e.memoizedState;l!==p||_!==N||Ct.current||jn?(typeof C=="function"&&(_c(e,n,C,r),N=e.memoizedState),(h=jn||Ap(e,n,h,r,_,N,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return xc(t,e,n,r,s,i)}function xc(t,e,n,r,i,s){Zy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&vp(e,n,!1),Sn(t,e,s);r=e.stateNode,i1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ci(e,t.child,null,s),e.child=Ci(e,null,l,s)):Et(t,e,l,s),e.memoizedState=r.state,i&&vp(e,n,!0),e.child}function ev(t){var e=t.stateNode;e.pendingContext?yp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yp(t,e.context,!1),bh(t,e.containerInfo)}function bp(t,e,n,r,i){return Ai(),Rh(i),e.flags|=256,Et(t,e,n,r),e.child}var Ic={dehydrated:null,treeContext:null,retryLane:0};function Sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function tv(t,e,n){var r=e.pendingProps,i=Le.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Le,i&1),t===null)return yc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tl(o,r,0,null),t=kr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sc(n),e.memoizedState=Ic,t):zh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return s1(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Jn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Jn(l,s):(s=kr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Sc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ic,r}return s=t.child,t=s.sibling,r=Jn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=Tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jo(t,e,n,r){return r!==null&&Rh(r),Ci(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s1(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Pu(Error($(422))),Jo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tl({mode:"visible",children:r.children},i,0,null),s=kr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ci(e,t.child,null,o),e.child.memoizedState=Sc(o),e.memoizedState=Ic,s);if(!(e.mode&1))return Jo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error($(419)),r=Pu(s,r,void 0),Jo(t,e,o,r)}if(l=(o&t.childLanes)!==0,At||l){if(r=it,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,In(t,i),Jt(r,t,i,-1))}return Gh(),r=Pu(Error($(421))),Jo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=v1.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Vt=Gn(i.nextSibling),Dt=e,Me=!0,Kt=null,t!==null&&(Ot[jt++]=_n,Ot[jt++]=En,Ot[jt++]=Dr,_n=t.id,En=t.overflow,Dr=e),e=zh(e,r.children),e.flags|=4096,e)}function Mp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vc(t.return,e,n)}function Nu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Et(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mp(t,n,e);else if(t.tag===19)Mp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&za(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Nu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&za(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Nu(e,!0,n,null,s);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ga(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o1(t,e,n){switch(e.tag){case 3:ev(e),Ai();break;case 5:Ry(e);break;case 1:Rt(e.type)&&La(e);break;case 4:bh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Fa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?tv(t,e,n):(Ce(Le,Le.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);Ce(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,Jy(t,e,n)}return Sn(t,e,n)}var rv,Ac,iv,sv;rv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ac=function(){};iv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rr(un.current);var s=null;switch(n){case"input":i=Gu(t,i),r=Gu(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=Yu(t,i),r=Yu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ba)}Zu(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Us.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Us.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ve("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};sv=function(t,e,n,r){n!==r&&(e.flags|=4)};function ys(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function a1(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Rt(e.type)&&Ma(),dt(e),null;case 3:return r=e.stateNode,Ri(),be(Ct),be(vt),Lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(bc(Kt),Kt=null))),Ac(t,e),dt(e),null;case 5:Mh(e);var i=Rr(Js.current);if(n=e.type,t!==null&&e.stateNode!=null)iv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return dt(e),null}if(t=Rr(un.current),Xo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[an]=e,r[Xs]=s,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<Ts.length;i++)Ve(Ts[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":qd(r,s),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ve("invalid",r);break;case"textarea":Wd(r,s),Ve("invalid",r)}Zu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ko(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ko(r.textContent,l,t),i=["children",""+l]):Us.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":Bo(r),Hd(r,s,!0);break;case"textarea":Bo(r),Qd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ba)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[an]=e,t[Xs]=r,rv(t,e,!1,!1),e.stateNode=t;e:{switch(o=ec(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),i=r;break;case"iframe":case"object":case"embed":Ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ts.length;i++)Ve(Ts[i],t);i=r;break;case"source":Ve("error",t),i=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=r;break;case"details":Ve("toggle",t),i=r;break;case"input":qd(t,r),i=Gu(t,r),Ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":Wd(t,r),i=Yu(t,r),Ve("invalid",t);break;default:i=r}Zu(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Lg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&bg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bs(t,u):typeof u=="number"&&Bs(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Us.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ve("scroll",t):u!=null&&fh(t,s,u,o))}switch(n){case"input":Bo(t),Hd(t,r,!1);break;case"textarea":Bo(t),Qd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?pi(t,!!r.multiple,s,!1):r.defaultValue!=null&&pi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ba)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)sv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Rr(Js.current),Rr(un.current),Xo(e)){if(r=e.stateNode,n=e.memoizedProps,r[an]=e,(s=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:Ko(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ko(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=e,e.stateNode=r}return dt(e),null;case 13:if(be(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Vt!==null&&e.mode&1&&!(e.flags&128))xy(),Ai(),e.flags|=98560,s=!1;else if(s=Xo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[an]=e}else Ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else Kt!==null&&(bc(Kt),Kt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?Ye===0&&(Ye=3):Gh())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Ri(),Ac(t,e),t===null&&Gs(e.stateNode.containerInfo),dt(e),null;case 10:return kh(e.type._context),dt(e),null;case 17:return Rt(e.type)&&Ma(),dt(e),null;case 19:if(be(Le),s=e.memoizedState,s===null)return dt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ys(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=za(t),o!==null){for(e.flags|=128,ys(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Le,Le.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>Ni&&(e.flags|=128,r=!0,ys(s,!1),e.lanes=4194304)}else{if(!r)if(t=za(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ys(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return dt(e),null}else 2*$e()-s.renderingStartTime>Ni&&n!==1073741824&&(e.flags|=128,r=!0,ys(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=Le.current,Ce(Le,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Qh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function l1(t,e){switch(Ch(e),e.tag){case 1:return Rt(e.type)&&Ma(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ri(),be(Ct),be(vt),Lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mh(e),null;case 13:if(be(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Le),null;case 4:return Ri(),null;case 10:return kh(e.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var Zo=!1,gt=!1,u1=typeof WeakSet=="function"?WeakSet:Set,K=null;function fi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function Cc(t,e,n){try{n()}catch(r){Be(t,e,r)}}var Lp=!1;function c1(t,e){if(cc=ka,t=cy(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,d=0,p=t,_=null;t:for(;;){for(var C;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(C=p.firstChild)!==null;)_=p,p=C;for(;;){if(p===t)break t;if(_===n&&++h===i&&(l=o),_===s&&++d===r&&(u=o),(C=p.nextSibling)!==null)break;p=_,_=p.parentNode}p=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hc={focusedElem:t,selectionRange:n},ka=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var P=N.memoizedProps,D=N.memoizedState,A=e.stateNode,x=A.getSnapshotBeforeUpdate(e.elementType===e.type?P:Qt(e.type,P),D);A.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(L){Be(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return N=Lp,Lp=!1,N}function Vs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cc(e,n,s)}i=i.next}while(i!==r)}}function El(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ov(t){var e=t.alternate;e!==null&&(t.alternate=null,ov(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[Xs],delete e[pc],delete e[Ww],delete e[Qw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function av(t){return t.tag===5||t.tag===3||t.tag===4}function Op(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||av(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ba));else if(r!==4&&(t=t.child,t!==null))for(Pc(t,e,n),t=t.sibling;t!==null;)Pc(t,e,n),t=t.sibling}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}var ot=null,Gt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)lv(t,e,n),n=n.sibling}function lv(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(fl,n)}catch{}switch(n.tag){case 5:gt||fi(n,e);case 6:var r=ot,i=Gt;ot=null,Ln(t,e,n),ot=r,Gt=i,ot!==null&&(Gt?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(Gt?(t=ot,n=n.stateNode,t.nodeType===8?xu(t.parentNode,n):t.nodeType===1&&xu(t,n),Hs(t)):xu(ot,n.stateNode));break;case 4:r=ot,i=Gt,ot=n.stateNode.containerInfo,Gt=!0,Ln(t,e,n),ot=r,Gt=i;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Cc(n,e,o),i=i.next}while(i!==r)}Ln(t,e,n);break;case 1:if(!gt&&(fi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Be(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Ln(t,e,n),gt=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function jp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new u1),e.forEach(function(r){var i=_1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,Gt=!1;break e;case 3:ot=l.stateNode.containerInfo,Gt=!0;break e;case 4:ot=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(ot===null)throw Error($(160));lv(s,o,i),ot=null,Gt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Be(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uv(e,t),e=e.sibling}function uv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wt(e,t),rn(t),r&4){try{Vs(3,t,t.return),El(3,t)}catch(P){Be(t,t.return,P)}try{Vs(5,t,t.return)}catch(P){Be(t,t.return,P)}}break;case 1:Wt(e,t),rn(t),r&512&&n!==null&&fi(n,n.return);break;case 5:if(Wt(e,t),rn(t),r&512&&n!==null&&fi(n,n.return),t.flags&32){var i=t.stateNode;try{Bs(i,"")}catch(P){Be(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&kg(i,s),ec(l,o);var h=ec(l,s);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?Lg(i,p):d==="dangerouslySetInnerHTML"?bg(i,p):d==="children"?Bs(i,p):fh(i,d,p,h)}switch(l){case"input":Ku(i,s);break;case"textarea":Vg(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?pi(i,!!s.multiple,C,!1):_!==!!s.multiple&&(s.defaultValue!=null?pi(i,!!s.multiple,s.defaultValue,!0):pi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xs]=s}catch(P){Be(t,t.return,P)}}break;case 6:if(Wt(e,t),rn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Be(t,t.return,P)}}break;case 3:if(Wt(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hs(e.containerInfo)}catch(P){Be(t,t.return,P)}break;case 4:Wt(e,t),rn(t);break;case 13:Wt(e,t),rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hh=$e())),r&4&&jp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(h=gt)||d,Wt(e,t),gt=h):Wt(e,t),rn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(K=t,d=t.child;d!==null;){for(p=K=d;K!==null;){switch(_=K,C=_.child,_.tag){case 0:case 11:case 14:case 15:Vs(4,_,_.return);break;case 1:fi(_,_.return);var N=_.stateNode;if(typeof N.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(P){Be(r,n,P)}}break;case 5:fi(_,_.return);break;case 22:if(_.memoizedState!==null){Up(p);continue}}C!==null?(C.return=_,K=C):Up(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Mg("display",o))}catch(P){Be(t,t.return,P)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(P){Be(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Wt(e,t),rn(t),r&4&&jp(t);break;case 21:break;default:Wt(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(av(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bs(i,""),r.flags&=-33);var s=Op(t);Nc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Op(t);Pc(t,l,o);break;default:throw Error($(161))}}catch(u){Be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h1(t,e,n){K=t,cv(t)}function cv(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zo;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||gt;l=Zo;var h=gt;if(Zo=o,(gt=u)&&!h)for(K=i;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?Bp(i):u!==null?(u.return=o,K=u):Bp(i);for(;s!==null;)K=s,cv(s),s=s.sibling;K=i,Zo=l,gt=h}Fp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):Fp(t)}}function Fp(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||El(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Qt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&xp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Hs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}gt||e.flags&512&&Rc(e)}catch(_){Be(e,e.return,_)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Up(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Bp(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{El(4,e)}catch(u){Be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Be(e,i,u)}}var s=e.return;try{Rc(e)}catch(u){Be(e,s,u)}break;case 5:var o=e.return;try{Rc(e)}catch(u){Be(e,o,u)}}}catch(u){Be(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var f1=Math.ceil,Ha=Pn.ReactCurrentDispatcher,$h=Pn.ReactCurrentOwner,zt=Pn.ReactCurrentBatchConfig,we=0,it=null,He=null,ut=0,kt=0,di=pr(0),Ye=0,no=null,Mr=0,wl=0,qh=0,Ds=null,St=null,Hh=0,Ni=1/0,yn=null,Wa=!1,kc=null,Xn=null,ea=!1,zn=null,Qa=0,bs=0,Vc=null,ya=-1,va=0;function wt(){return we&6?$e():ya!==-1?ya:ya=$e()}function Yn(t){return t.mode&1?we&2&&ut!==0?ut&-ut:Kw.transition!==null?(va===0&&(va=Gg()),va):(t=xe,t!==0||(t=window.event,t=t===void 0?16:ty(t.type)),t):1}function Jt(t,e,n,r){if(50<bs)throw bs=0,Vc=null,Error($(185));vo(t,n,r),(!(we&2)||t!==it)&&(t===it&&(!(we&2)&&(wl|=n),Ye===4&&Un(t,ut)),Pt(t,r),n===1&&we===0&&!(e.mode&1)&&(Ni=$e()+500,yl&&mr()))}function Pt(t,e){var n=t.callbackNode;KE(t,e);var r=Na(t,t===it?ut:0);if(r===0)n!==null&&Xd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xd(n),e===1)t.tag===0?Gw(zp.bind(null,t)):Ey(zp.bind(null,t)),qw(function(){!(we&6)&&mr()}),n=null;else{switch(Kg(r)){case 1:n=yh;break;case 4:n=Wg;break;case 16:n=Pa;break;case 536870912:n=Qg;break;default:n=Pa}n=vv(n,hv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hv(t,e){if(ya=-1,va=0,we&6)throw Error($(327));var n=t.callbackNode;if(_i()&&t.callbackNode!==n)return null;var r=Na(t,t===it?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ga(t,r);else{e=r;var i=we;we|=2;var s=dv();(it!==t||ut!==e)&&(yn=null,Ni=$e()+500,Nr(t,e));do try{m1();break}catch(l){fv(t,l)}while(!0);Nh(),Ha.current=s,we=i,He!==null?e=0:(it=null,ut=0,e=Ye)}if(e!==0){if(e===2&&(i=sc(t),i!==0&&(r=i,e=Dc(t,i))),e===1)throw n=no,Nr(t,0),Un(t,r),Pt(t,$e()),n;if(e===6)Un(t,r);else{if(i=t.current.alternate,!(r&30)&&!d1(i)&&(e=Ga(t,r),e===2&&(s=sc(t),s!==0&&(r=s,e=Dc(t,s))),e===1))throw n=no,Nr(t,0),Un(t,r),Pt(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:xr(t,St,yn);break;case 3:if(Un(t,r),(r&130023424)===r&&(e=Hh+500-$e(),10<e)){if(Na(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dc(xr.bind(null,t,St,yn),e);break}xr(t,St,yn);break;case 4:if(Un(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Yt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*f1(r/1960))-r,10<r){t.timeoutHandle=dc(xr.bind(null,t,St,yn),r);break}xr(t,St,yn);break;case 5:xr(t,St,yn);break;default:throw Error($(329))}}}return Pt(t,$e()),t.callbackNode===n?hv.bind(null,t):null}function Dc(t,e){var n=Ds;return t.current.memoizedState.isDehydrated&&(Nr(t,e).flags|=256),t=Ga(t,e),t!==2&&(e=St,St=n,e!==null&&bc(e)),t}function bc(t){St===null?St=t:St.push.apply(St,t)}function d1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Un(t,e){for(e&=~qh,e&=~wl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function zp(t){if(we&6)throw Error($(327));_i();var e=Na(t,0);if(!(e&1))return Pt(t,$e()),null;var n=Ga(t,e);if(t.tag!==0&&n===2){var r=sc(t);r!==0&&(e=r,n=Dc(t,r))}if(n===1)throw n=no,Nr(t,0),Un(t,e),Pt(t,$e()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xr(t,St,yn),Pt(t,$e()),null}function Wh(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Ni=$e()+500,yl&&mr())}}function Lr(t){zn!==null&&zn.tag===0&&!(we&6)&&_i();var e=we;we|=1;var n=zt.transition,r=xe;try{if(zt.transition=null,xe=1,t)return t()}finally{xe=r,zt.transition=n,we=e,!(we&6)&&mr()}}function Qh(){kt=di.current,be(di)}function Nr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$w(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ma();break;case 3:Ri(),be(Ct),be(vt),Lh();break;case 5:Mh(r);break;case 4:Ri();break;case 13:be(Le);break;case 19:be(Le);break;case 10:kh(r.type._context);break;case 22:case 23:Qh()}n=n.return}if(it=t,He=t=Jn(t.current,null),ut=kt=e,Ye=0,no=null,qh=wl=Mr=0,St=Ds=null,Cr!==null){for(e=0;e<Cr.length;e++)if(n=Cr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Cr=null}return t}function fv(t,e){do{var n=He;try{if(Nh(),pa.current=qa,$a){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$a=!1}if(br=0,nt=Xe=Oe=null,ks=!1,Zs=0,$h.current=null,n===null||n.return===null){Ye=1,no=e,He=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=ut,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var _=d.alternate;_?(d.updateQueue=_.updateQueue,d.memoizedState=_.memoizedState,d.lanes=_.lanes):(d.updateQueue=null,d.memoizedState=null)}var C=Pp(o);if(C!==null){C.flags&=-257,Np(C,o,l,s,e),C.mode&1&&Rp(s,h,e),e=C,u=h;var N=e.updateQueue;if(N===null){var P=new Set;P.add(u),e.updateQueue=P}else N.add(u);break e}else{if(!(e&1)){Rp(s,h,e),Gh();break e}u=Error($(426))}}else if(Me&&l.mode&1){var D=Pp(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Np(D,o,l,s,e),Rh(Pi(u,l));break e}}s=u=Pi(u,l),Ye!==4&&(Ye=2),Ds===null?Ds=[s]:Ds.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=Ky(s,u,e);Tp(s,A);break e;case 1:l=u;var x=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Xn===null||!Xn.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=Xy(s,l,e);Tp(s,L);break e}}s=s.return}while(s!==null)}mv(n)}catch(z){e=z,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function dv(){var t=Ha.current;return Ha.current=qa,t===null?qa:t}function Gh(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),it===null||!(Mr&268435455)&&!(wl&268435455)||Un(it,ut)}function Ga(t,e){var n=we;we|=2;var r=dv();(it!==t||ut!==e)&&(yn=null,Nr(t,e));do try{p1();break}catch(i){fv(t,i)}while(!0);if(Nh(),we=n,Ha.current=r,He!==null)throw Error($(261));return it=null,ut=0,Ye}function p1(){for(;He!==null;)pv(He)}function m1(){for(;He!==null&&!UE();)pv(He)}function pv(t){var e=yv(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?mv(t):He=e,$h.current=null}function mv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l1(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,He=null;return}}else if(n=a1(n,e,kt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ye===0&&(Ye=5)}function xr(t,e,n){var r=xe,i=zt.transition;try{zt.transition=null,xe=1,g1(t,e,n,r)}finally{zt.transition=i,xe=r}return null}function g1(t,e,n,r){do _i();while(zn!==null);if(we&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(XE(t,s),t===it&&(He=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ea||(ea=!0,vv(Pa,function(){return _i(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zt.transition,zt.transition=null;var o=xe;xe=1;var l=we;we|=4,$h.current=null,c1(t,n),uv(n,t),Lw(hc),ka=!!cc,hc=cc=null,t.current=n,h1(n),BE(),we=l,xe=o,zt.transition=s}else t.current=n;if(ea&&(ea=!1,zn=t,Qa=i),s=t.pendingLanes,s===0&&(Xn=null),qE(n.stateNode),Pt(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wa)throw Wa=!1,t=kc,kc=null,t;return Qa&1&&t.tag!==0&&_i(),s=t.pendingLanes,s&1?t===Vc?bs++:(bs=0,Vc=t):bs=0,mr(),null}function _i(){if(zn!==null){var t=Kg(Qa),e=zt.transition,n=xe;try{if(zt.transition=null,xe=16>t?16:t,zn===null)var r=!1;else{if(t=zn,zn=null,Qa=0,we&6)throw Error($(331));var i=we;for(we|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(K=h;K!==null;){var d=K;switch(d.tag){case 0:case 11:case 15:Vs(8,d,s)}var p=d.child;if(p!==null)p.return=d,K=p;else for(;K!==null;){d=K;var _=d.sibling,C=d.return;if(ov(d),d===h){K=null;break}if(_!==null){_.return=C,K=_;break}K=C}}}var N=s.alternate;if(N!==null){var P=N.child;if(P!==null){N.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vs(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,K=A;break e}K=s.return}}var x=t.current;for(K=x;K!==null;){o=K;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,K=R;else e:for(o=x;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:El(9,l)}}catch(z){Be(l,l.return,z)}if(l===o){K=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,K=L;break e}K=l.return}}if(we=i,mr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(fl,t)}catch{}r=!0}return r}finally{xe=n,zt.transition=e}}return!1}function $p(t,e,n){e=Pi(n,e),e=Ky(t,e,1),t=Kn(t,e,1),e=wt(),t!==null&&(vo(t,1,e),Pt(t,e))}function Be(t,e,n){if(t.tag===3)$p(t,t,n);else for(;e!==null;){if(e.tag===3){$p(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=Pi(n,t),t=Xy(e,t,1),e=Kn(e,t,1),t=wt(),e!==null&&(vo(e,1,t),Pt(e,t));break}}e=e.return}}function y1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ut&n)===n&&(Ye===4||Ye===3&&(ut&130023424)===ut&&500>$e()-Hh?Nr(t,0):qh|=n),Pt(t,e)}function gv(t,e){e===0&&(t.mode&1?(e=qo,qo<<=1,!(qo&130023424)&&(qo=4194304)):e=1);var n=wt();t=In(t,e),t!==null&&(vo(t,e,n),Pt(t,n))}function v1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gv(t,n)}function _1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),gv(t,n)}var yv;yv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,o1(t,e,n);At=!!(t.flags&131072)}else At=!1,Me&&e.flags&1048576&&wy(e,ja,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ga(t,e),t=e.pendingProps;var i=Si(e,vt.current);vi(e,n),i=jh(null,e,r,t,i,n);var s=Fh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(s=!0,La(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dh(e),i.updater=_l,e.stateNode=i,i._reactInternals=e,Ec(e,r,t,n),e=xc(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&Ah(e),Et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ga(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=w1(r),t=Qt(r,t),i){case 0:e=Tc(null,e,r,t,n);break e;case 1:e=Dp(null,e,r,t,n);break e;case 11:e=kp(null,e,r,t,n);break e;case 14:e=Vp(null,e,r,Qt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),Tc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),Dp(t,e,r,i,n);case 3:e:{if(ev(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Cy(t,e),Ba(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pi(Error($(423)),e),e=bp(t,e,r,n,i);break e}else if(r!==i){i=Pi(Error($(424)),e),e=bp(t,e,r,n,i);break e}else for(Vt=Gn(e.stateNode.containerInfo.firstChild),Dt=e,Me=!0,Kt=null,n=Sy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ai(),r===i){e=Sn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return Ry(e),t===null&&yc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,fc(r,i)?o=null:s!==null&&fc(r,s)&&(e.flags|=32),Zy(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&yc(e),null;case 13:return tv(t,e,n);case 4:return bh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ci(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),kp(t,e,r,i,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(Fa,r._currentValue),r._currentValue=o,s!==null)if(Zt(s.value,o)){if(s.children===i.children&&!Ct.current){e=Sn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=wn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),vc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),vc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vi(e,n),i=$t(i),r=r(i),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,i=Qt(r,e.pendingProps),i=Qt(r.type,i),Vp(t,e,r,i,n);case 15:return Yy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),ga(t,e),e.tag=1,Rt(r)?(t=!0,La(e)):t=!1,vi(e,n),Gy(e,r,i),Ec(e,r,i,n),xc(null,e,r,!0,t,n);case 19:return nv(t,e,n);case 22:return Jy(t,e,n)}throw Error($(156,e.tag))};function vv(t,e){return Hg(t,e)}function E1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new E1(t,e,n,r)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w1(t){if(typeof t=="function")return Kh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _a(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Kh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ri:return kr(n.children,i,s,e);case dh:o=8,i|=8;break;case qu:return t=Bt(12,n,e,i|2),t.elementType=qu,t.lanes=s,t;case Hu:return t=Bt(13,n,e,i),t.elementType=Hu,t.lanes=s,t;case Wu:return t=Bt(19,n,e,i),t.elementType=Wu,t.lanes=s,t;case Rg:return Tl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ag:o=10;break e;case Cg:o=9;break e;case ph:o=11;break e;case mh:o=14;break e;case On:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Bt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function kr(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function Tl(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=Rg,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function Vu(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function T1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xh(t,e,n,r,i,s,o,l,u){return t=new T1(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Bt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(s),t}function x1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _v(t){if(!t)return or;t=t._reactInternals;e:{if(Ur(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Rt(n))return _y(t,n,e)}return e}function Ev(t,e,n,r,i,s,o,l,u){return t=Xh(n,r,!0,t,i,s,o,l,u),t.context=_v(null),n=t.current,r=wt(),i=Yn(n),s=wn(r,i),s.callback=e??null,Kn(n,s,i),t.current.lanes=i,vo(t,i,r),Pt(t,r),t}function xl(t,e,n,r){var i=e.current,s=wt(),o=Yn(i);return n=_v(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kn(i,e,o),t!==null&&(Jt(t,i,o,s),da(t,i,o)),o}function Ka(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){qp(t,e),(t=t.alternate)&&qp(t,e)}function I1(){return null}var wv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jh(t){this._internalRoot=t}Il.prototype.render=Jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));xl(t,e,null,null)};Il.prototype.unmount=Jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){xl(null,t,null,null)}),e[xn]=null}};function Il(t){this._internalRoot=t}Il.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&ey(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hp(){}function S1(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Ka(o);s.call(h)}}var o=Ev(e,r,t,0,null,!1,!1,"",Hp);return t._reactRootContainer=o,t[xn]=o.current,Gs(t.nodeType===8?t.parentNode:t),Lr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Ka(u);l.call(h)}}var u=Xh(t,0,!1,null,null,!1,!1,"",Hp);return t._reactRootContainer=u,t[xn]=u.current,Gs(t.nodeType===8?t.parentNode:t),Lr(function(){xl(e,u,n,r)}),u}function Al(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Ka(o);l.call(u)}}xl(e,o,t,i)}else o=S1(n,e,t,i,r);return Ka(o)}Xg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ws(e.pendingLanes);n!==0&&(vh(e,n|1),Pt(e,$e()),!(we&6)&&(Ni=$e()+500,mr()))}break;case 13:Lr(function(){var r=In(t,1);if(r!==null){var i=wt();Jt(r,t,1,i)}}),Yh(t,1)}};_h=function(t){if(t.tag===13){var e=In(t,134217728);if(e!==null){var n=wt();Jt(e,t,134217728,n)}Yh(t,134217728)}};Yg=function(t){if(t.tag===13){var e=Yn(t),n=In(t,e);if(n!==null){var r=wt();Jt(n,t,e,r)}Yh(t,e)}};Jg=function(){return xe};Zg=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};nc=function(t,e,n){switch(e){case"input":if(Ku(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gl(r);if(!i)throw Error($(90));Ng(r),Ku(r,i)}}}break;case"textarea":Vg(t,n);break;case"select":e=n.value,e!=null&&pi(t,!!n.multiple,e,!1)}};Fg=Wh;Ug=Lr;var A1={usingClientEntryPoint:!1,Events:[Eo,ai,gl,Og,jg,Wh]},vs={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C1={bundleType:vs.bundleType,version:vs.version,rendererPackageName:vs.rendererPackageName,rendererConfig:vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$g(t),t===null?null:t.stateNode},findFiberByHostInstance:vs.findFiberByHostInstance||I1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{fl=ta.inject(C1),ln=ta}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A1;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error($(200));return x1(t,e,null,n)};Mt.createRoot=function(t,e){if(!Zh(t))throw Error($(299));var n=!1,r="",i=wv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xh(t,1,!1,null,null,n,!1,r,i),t[xn]=e.current,Gs(t.nodeType===8?t.parentNode:t),new Jh(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=$g(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return Lr(t)};Mt.hydrate=function(t,e,n){if(!Sl(e))throw Error($(200));return Al(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=wv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ev(e,null,t,1,n??null,i,!1,s,o),t[xn]=e.current,Gs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Il(e)};Mt.render=function(t,e,n){if(!Sl(e))throw Error($(200));return Al(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!Sl(t))throw Error($(40));return t._reactRootContainer?(Lr(function(){Al(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0):!1};Mt.unstable_batchedUpdates=Wh;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sl(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Al(t,e,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function Tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tv)}catch(t){console.error(t)}}Tv(),Tg.exports=Mt;var R1=Tg.exports,xv,Wp=R1;xv=Wp.createRoot,Wp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ro(){return ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ro.apply(this,arguments)}var $n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($n||($n={}));const Qp="popstate";function P1(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Mc("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xa(i)}return k1(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Iv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function N1(){return Math.random().toString(36).substr(2,8)}function Gp(t,e){return{usr:t.state,key:t.key,idx:e}}function Mc(t,e,n,r){return n===void 0&&(n=null),ro({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bi(e):e,{state:n,key:e&&e.key||r||N1()})}function Xa(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function k1(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=$n.Pop,u=null,h=d();h==null&&(h=0,o.replaceState(ro({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function p(){l=$n.Pop;let D=d(),A=D==null?null:D-h;h=D,u&&u({action:l,location:P.location,delta:A})}function _(D,A){l=$n.Push;let x=Mc(P.location,D,A);h=d()+1;let R=Gp(x,h),L=P.createHref(x);try{o.pushState(R,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(L)}s&&u&&u({action:l,location:P.location,delta:1})}function C(D,A){l=$n.Replace;let x=Mc(P.location,D,A);h=d();let R=Gp(x,h),L=P.createHref(x);o.replaceState(R,"",L),s&&u&&u({action:l,location:P.location,delta:0})}function N(D){let A=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof D=="string"?D:Xa(D);return x=x.replace(/ $/,"%20"),Ge(A,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,A)}let P={get action(){return l},get location(){return t(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Qp,p),u=D,()=>{i.removeEventListener(Qp,p),u=null}},createHref(D){return e(i,D)},createURL:N,encodeLocation(D){let A=N(D);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:_,replace:C,go(D){return o.go(D)}};return P}var Kp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kp||(Kp={}));function V1(t,e,n){return n===void 0&&(n="/"),D1(t,e,n)}function D1(t,e,n,r){let i=typeof e=="string"?Bi(e):e,s=ef(i.pathname||"/",n);if(s==null)return null;let o=Sv(t);b1(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=W1(s);l=$1(o[u],h)}return l}function Sv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ge(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Zn([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(Ge(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Sv(s.children,e,d,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:B1(h,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of Av(s.path))i(s,o,u)}),e}function Av(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Av(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function b1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:z1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const M1=/^:[\w-]+$/,L1=3,O1=2,j1=1,F1=10,U1=-2,Xp=t=>t==="*";function B1(t,e){let n=t.split("/"),r=n.length;return n.some(Xp)&&(r+=U1),e&&(r+=O1),n.filter(i=>!Xp(i)).reduce((i,s)=>i+(M1.test(s)?L1:s===""?j1:F1),r)}function z1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function $1(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=q1({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),_=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Zn([s,p.pathname]),pathnameBase:X1(Zn([s,p.pathnameBase])),route:_}),p.pathnameBase!=="/"&&(s=Zn([s,p.pathnameBase]))}return o}function q1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=H1(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,d,p)=>{let{paramName:_,isOptional:C}=d;if(_==="*"){let P=l[p]||"";o=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const N=l[p];return C&&!N?h[_]=void 0:h[_]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function H1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Iv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function W1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Iv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ef(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Q1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Bi(t):t;return{pathname:n?n.startsWith("/")?n:G1(n,e):e,search:Y1(r),hash:J1(i)}}function G1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Du(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function K1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cv(t,e){let n=K1(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Rv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Bi(t):(i=ro({},t),Ge(!i.pathname||!i.pathname.includes("?"),Du("?","pathname","search",i)),Ge(!i.pathname||!i.pathname.includes("#"),Du("#","pathname","hash",i)),Ge(!i.search||!i.search.includes("#"),Du("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),p-=1;i.pathname=_.join("/")}l=p>=0?e[p]:"/"}let u=Q1(i,l),h=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}const Zn=t=>t.join("/").replace(/\/\/+/g,"/"),X1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,J1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Z1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Pv=["post","put","patch","delete"];new Set(Pv);const eT=["get",...Pv];new Set(eT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function io(){return io=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},io.apply(this,arguments)}const tf=j.createContext(null),tT=j.createContext(null),Br=j.createContext(null),Cl=j.createContext(null),zr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Nv=j.createContext(null);function nT(t,e){let{relative:n}=e===void 0?{}:e;To()||Ge(!1);let{basename:r,navigator:i}=j.useContext(Br),{hash:s,pathname:o,search:l}=Vv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Zn([r,o])),i.createHref({pathname:u,search:l,hash:s})}function To(){return j.useContext(Cl)!=null}function Rl(){return To()||Ge(!1),j.useContext(Cl).location}function kv(t){j.useContext(Br).static||j.useLayoutEffect(t)}function rT(){let{isDataRoute:t}=j.useContext(zr);return t?gT():iT()}function iT(){To()||Ge(!1);let t=j.useContext(tf),{basename:e,future:n,navigator:r}=j.useContext(Br),{matches:i}=j.useContext(zr),{pathname:s}=Rl(),o=JSON.stringify(Cv(i,n.v7_relativeSplatPath)),l=j.useRef(!1);return kv(()=>{l.current=!0}),j.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let p=Rv(h,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Zn([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,s,t])}function Vv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Br),{matches:i}=j.useContext(zr),{pathname:s}=Rl(),o=JSON.stringify(Cv(i,r.v7_relativeSplatPath));return j.useMemo(()=>Rv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function sT(t,e){return oT(t,e)}function oT(t,e,n,r){To()||Ge(!1);let{navigator:i}=j.useContext(Br),{matches:s}=j.useContext(zr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Rl(),d;if(e){var p;let D=typeof e=="string"?Bi(e):e;u==="/"||(p=D.pathname)!=null&&p.startsWith(u)||Ge(!1),d=D}else d=h;let _=d.pathname||"/",C=_;if(u!=="/"){let D=u.replace(/^\//,"").split("/");C="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let N=V1(t,{pathname:C}),P=hT(N&&N.map(D=>Object.assign({},D,{params:Object.assign({},l,D.params),pathname:Zn([u,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?u:Zn([u,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),s,n,r);return e&&P?j.createElement(Cl.Provider,{value:{location:io({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:$n.Pop}},P):P}function aT(){let t=mT(),e=Z1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const lT=j.createElement(aT,null);class uT extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(zr.Provider,{value:this.props.routeContext},j.createElement(Nv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cT(t){let{routeContext:e,match:n,children:r}=t,i=j.useContext(tf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(zr.Provider,{value:e},r)}function hT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);d>=0||Ge(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:_,errors:C}=n,N=p.route.loader&&_[p.route.id]===void 0&&(!C||C[p.route.id]===void 0);if(p.route.lazy||N){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,p,_)=>{let C,N=!1,P=null,D=null;n&&(C=l&&p.route.id?l[p.route.id]:void 0,P=p.route.errorElement||lT,u&&(h<0&&_===0?(yT("route-fallback"),N=!0,D=null):h===_&&(N=!0,D=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,_+1)),x=()=>{let R;return C?R=P:N?R=D:p.route.Component?R=j.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=d,j.createElement(cT,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?j.createElement(uT,{location:n.location,revalidation:n.revalidation,component:P,error:C,children:x(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):x()},null)}var Dv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Dv||{}),bv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bv||{});function fT(t){let e=j.useContext(tf);return e||Ge(!1),e}function dT(t){let e=j.useContext(tT);return e||Ge(!1),e}function pT(t){let e=j.useContext(zr);return e||Ge(!1),e}function Mv(t){let e=pT(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function mT(){var t;let e=j.useContext(Nv),n=dT(),r=Mv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function gT(){let{router:t}=fT(Dv.UseNavigateStable),e=Mv(bv.UseNavigateStable),n=j.useRef(!1);return kv(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,io({fromRouteId:e},s)))},[t,e])}const Yp={};function yT(t,e,n){Yp[t]||(Yp[t]=!0)}function vT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ir(t){Ge(!1)}function _T(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$n.Pop,navigator:s,static:o=!1,future:l}=t;To()&&Ge(!1);let u=e.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:u,navigator:s,static:o,future:io({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Bi(r));let{pathname:d="/",search:p="",hash:_="",state:C=null,key:N="default"}=r,P=j.useMemo(()=>{let D=ef(d,u);return D==null?null:{location:{pathname:D,search:p,hash:_,state:C,key:N},navigationType:i}},[u,d,p,_,C,N,i]);return P==null?null:j.createElement(Br.Provider,{value:h},j.createElement(Cl.Provider,{children:n,value:P}))}function ET(t){let{children:e,location:n}=t;return sT(Lc(e),n)}new Promise(()=>{});function Lc(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,i)=>{if(!j.isValidElement(r))return;let s=[...e,i];if(r.type===j.Fragment){n.push.apply(n,Lc(r.props.children,s));return}r.type!==Ir&&Ge(!1),!r.props.index||!r.props.children||Ge(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lc(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oc(){return Oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oc.apply(this,arguments)}function wT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function TT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xT(t,e){return t.button===0&&(!e||e==="_self")&&!TT(t)}const IT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ST="6";try{window.__reactRouterVersion=ST}catch{}const AT="startTransition",Jp=yE[AT];function CT(t){let{basename:e,children:n,future:r,window:i}=t,s=j.useRef();s.current==null&&(s.current=P1({window:i,v5Compat:!0}));let o=s.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},d=j.useCallback(p=>{h&&Jp?Jp(()=>u(p)):u(p)},[u,h]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.useEffect(()=>vT(r),[r]),j.createElement(_T,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const RT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NT=j.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:p}=e,_=wT(e,IT),{basename:C}=j.useContext(Br),N,P=!1;if(typeof h=="string"&&PT.test(h)&&(N=h,RT))try{let R=new URL(window.location.href),L=h.startsWith("//")?new URL(R.protocol+h):new URL(h),z=ef(L.pathname,C);L.origin===R.origin&&z!=null?h=z+L.search+L.hash:P=!0}catch{}let D=nT(h,{relative:i}),A=kT(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:p});function x(R){r&&r(R),R.defaultPrevented||A(R)}return j.createElement("a",Oc({},_,{href:N||D,onClick:P||s?r:x,ref:n,target:u}))});var Zp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Zp||(Zp={}));var em;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(em||(em={}));function kT(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=rT(),h=Rl(),d=Vv(t,{relative:o});return j.useCallback(p=>{if(xT(p,n)){p.preventDefault();let _=r!==void 0?r:Xa(h)===Xa(d);u(t,{replace:_,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,d,r,i,n,t,s,o,l])}function VT(){const t=[{title:"1. Root of Equation",topics:[{id:"bisection",name:"Bisection Method",path:"/bisection"},{id:"falsepo",name:"False-Position Method",path:"/falsepo"},{id:"onepoint",name:"One-Point Method",path:"/onepoint"},{id:"newtonrap",name:"Newton Raphson Method",path:"/newtonrap"},{id:"secant",name:"Secant Method",path:"/secant"}]},{title:"2. Linear System",topics:[{id:"gauss-elim",name:"Gauss Elimination",path:"/gauss-elim"},{id:"gauss-jordan",name:"Gauss-Jordan",path:"/gauss-jordan"},{id:"lu",name:"LU Decomposition",path:"/lu"}]},{title:"3. Interpolation",topics:[{id:"lagrange",name:"Lagrange",path:"/lagrange"},{id:"newton-interp",name:"Newton Interpolation",path:"/newton-interp"}]},{title:"4. Regression",topics:[{id:"linear-reg",name:"Linear Regression",path:"/linear-reg"},{id:"poly-reg",name:"Polynomial Regression",path:"/poly-reg"}]},{title:"5. Integration",topics:[{id:"trapezoidal",name:"Trapezoidal Rule",path:"/trapezoidal"},{id:"simpson",name:"Simpson’s Rule",path:"/simpson"}]},{title:"6. Differentiation",topics:[{id:"forward-diff",name:"Forward Difference",path:"/forward-diff"},{id:"backward-diff",name:"Backward Difference",path:"/backward-diff"},{id:"central-diff",name:"Central Difference",path:"/central-diff"}]}];return E.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center p-6 bg-slate-900",children:[E.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-8 text-center fade-in",children:"Numerical Methods"}),E.jsx("div",{className:"flex justify-center items-center w-full",children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:t.map(e=>E.jsxs("div",{className:`bg-slate-800 rounded-xl p-5 shadow-lg border border-cyan-700 w-72\r
                         transform transition-all duration-300 fade-in-delay1\r
                         hover:scale-105 hover:shadow-2xl glow-btn`,children:[E.jsx("h2",{className:"text-lg font-semibold text-cyan-300 mb-3 text-center",children:e.title}),E.jsx("ul",{className:"space-y-2",children:e.topics.map(n=>E.jsx("li",{className:"bg-slate-700 p-2 rounded-md hover:bg-slate-600 transition-colors",children:E.jsx(NT,{to:n.path,className:"block text-center",children:n.name})},n.id))})]},e.title))})})]})}const DT=()=>{};var tm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,C=h&63;u||(C=64,o||(_=64)),r.push(n[d],n[p],n[_],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new MT;const _=s<<2|l>>4;if(r.push(_),h!==64){const C=l<<4&240|h>>2;if(r.push(C),p!==64){const N=h<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LT=function(t){const e=Lv(t);return Ov.encodeByteArray(e,!0)},Ya=function(t){return LT(t).replace(/\./g,"")},OT=function(t){try{return Ov.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=()=>jT().__FIREBASE_DEFAULTS__,UT=()=>{if(typeof process>"u"||typeof tm>"u")return;const t=tm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OT(t[1]);return e&&JSON.parse(e)},nf=()=>{try{return DT()||FT()||UT()||BT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zT=t=>{var e,n;return(n=(e=nf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$T=t=>{const e=zT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jv=()=>{var t;return(t=nf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ya(JSON.stringify(n)),Ya(JSON.stringify(o)),""].join(".")}const Ms={};function QT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ms))Ms[e]?t.emulator.push(e):t.prod.push(e);return t}function GT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nm=!1;function KT(t,e){if(typeof window>"u"||typeof document>"u"||!rf(window.location.host)||Ms[t]===e||Ms[t]||nm)return;Ms[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",s=QT().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,C){_.setAttribute("width","24"),_.setAttribute("id",C),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{nm=!0,o()},_}function d(_,C){_.setAttribute("id",C),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){const _=GT(r),C=n("text"),N=document.getElementById(C)||document.createElement("span"),P=n("learnmore"),D=document.getElementById(P)||document.createElement("a"),A=n("preprendIcon"),x=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const R=_.element;l(R),d(D,P);const L=h();u(x,A),R.append(x,N,D,L),document.body.appendChild(R)}s?(N.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YT(){var e;const t=(e=nf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JT(){return!YT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZT(){try{return typeof indexedDB=="object"}catch{return!1}}function ex(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="FirebaseError";class zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tx,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fv.prototype.create)}}class Fv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?nx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new zi(i,l,r)}}function nx(t,e){return t.replace(rx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const rx=/\{\$([^}]+)}/g;function Ja(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rm(s)&&rm(o)){if(!Ja(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t){return t&&t._delegate?t._delegate:t}class so{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ox(e))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sr){return this.instances.has(e)}getOptions(e=Sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sr){return this.component?this.component.multipleInstances?e:Sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sx(t){return t===Sr?void 0:t}function ox(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ix(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const lx={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},ux=Ee.INFO,cx={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},hx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=cx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uv{constructor(e){this.name=e,this._logLevel=ux,this._logHandler=hx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const fx=(t,e)=>e.some(n=>t instanceof n);let im,sm;function dx(){return im||(im=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function px(){return sm||(sm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bv=new WeakMap,jc=new WeakMap,zv=new WeakMap,bu=new WeakMap,sf=new WeakMap;function mx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(er(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bv.set(n,t)}).catch(()=>{}),sf.set(e,t),e}function gx(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yx(t){Fc=t(Fc)}function vx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mu(this),e,...n);return zv.set(r,e.sort?e.sort():[e]),er(r)}:px().includes(t)?function(...e){return t.apply(Mu(this),e),er(Bv.get(this))}:function(...e){return er(t.apply(Mu(this),e))}}function _x(t){return typeof t=="function"?vx(t):(t instanceof IDBTransaction&&gx(t),fx(t,dx())?new Proxy(t,Fc):t)}function er(t){if(t instanceof IDBRequest)return mx(t);if(bu.has(t))return bu.get(t);const e=_x(t);return e!==t&&(bu.set(t,e),sf.set(e,t)),e}const Mu=t=>sf.get(t);function Ex(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=er(o);return r&&o.addEventListener("upgradeneeded",u=>{r(er(o.result),u.oldVersion,u.newVersion,er(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const wx=["get","getKey","getAll","getAllKeys","count"],Tx=["put","add","delete","clear"],Lu=new Map;function om(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lu.get(e))return Lu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Tx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wx.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Lu.set(e,s),s}yx(t=>({...t,get:(e,n,r)=>om(e,n)||t.get(e,n,r),has:(e,n)=>!!om(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ix(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ix(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",am="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new Uv("@firebase/app"),Sx="@firebase/app-compat",Ax="@firebase/analytics-compat",Cx="@firebase/analytics",Rx="@firebase/app-check-compat",Px="@firebase/app-check",Nx="@firebase/auth",kx="@firebase/auth-compat",Vx="@firebase/database",Dx="@firebase/data-connect",bx="@firebase/database-compat",Mx="@firebase/functions",Lx="@firebase/functions-compat",Ox="@firebase/installations",jx="@firebase/installations-compat",Fx="@firebase/messaging",Ux="@firebase/messaging-compat",Bx="@firebase/performance",zx="@firebase/performance-compat",$x="@firebase/remote-config",qx="@firebase/remote-config-compat",Hx="@firebase/storage",Wx="@firebase/storage-compat",Qx="@firebase/firestore",Gx="@firebase/ai",Kx="@firebase/firestore-compat",Xx="firebase",Yx="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="[DEFAULT]",Jx={[Uc]:"fire-core",[Sx]:"fire-core-compat",[Cx]:"fire-analytics",[Ax]:"fire-analytics-compat",[Px]:"fire-app-check",[Rx]:"fire-app-check-compat",[Nx]:"fire-auth",[kx]:"fire-auth-compat",[Vx]:"fire-rtdb",[Dx]:"fire-data-connect",[bx]:"fire-rtdb-compat",[Mx]:"fire-fn",[Lx]:"fire-fn-compat",[Ox]:"fire-iid",[jx]:"fire-iid-compat",[Fx]:"fire-fcm",[Ux]:"fire-fcm-compat",[Bx]:"fire-perf",[zx]:"fire-perf-compat",[$x]:"fire-rc",[qx]:"fire-rc-compat",[Hx]:"fire-gcs",[Wx]:"fire-gcs-compat",[Qx]:"fire-fst",[Kx]:"fire-fst-compat",[Gx]:"fire-vertex","fire-js":"fire-js",[Xx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Map,Zx=new Map,zc=new Map;function lm(t,e){try{t.container.addComponent(e)}catch(n){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function el(t){const e=t.name;if(zc.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;zc.set(e,t);for(const n of Za.values())lm(n,t);for(const n of Zx.values())lm(n,t);return!0}function eI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tI(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Fv("app","Firebase",nI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new so("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=Yx;function $v(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Bc,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw tr.create("bad-app-name",{appName:String(i)});if(n||(n=jv()),!n)throw tr.create("no-options");const s=Za.get(i);if(s){if(Ja(n,s.options)&&Ja(r,s.config))return s;throw tr.create("duplicate-app",{appName:i})}const o=new ax(i);for(const u of zc.values())o.addComponent(u);const l=new rI(n,r,o);return Za.set(i,l),l}function sI(t=Bc){const e=Za.get(t);if(!e&&t===Bc&&jv())return $v();if(!e)throw tr.create("no-app",{appName:t});return e}function Ei(t,e,n){let r=Jx[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(o.join(" "));return}el(new so(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="firebase-heartbeat-database",aI=1,oo="firebase-heartbeat-store";let Ou=null;function qv(){return Ou||(Ou=Ex(oI,aI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw tr.create("idb-open",{originalErrorMessage:t.message})})),Ou}async function lI(t){try{const n=(await qv()).transaction(oo),r=await n.objectStore(oo).get(Hv(t));return await n.done,r}catch(e){if(e instanceof zi)An.warn(e.message);else{const n=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});An.warn(n.message)}}}async function um(t,e){try{const r=(await qv()).transaction(oo,"readwrite");await r.objectStore(oo).put(e,Hv(t)),await r.done}catch(n){if(n instanceof zi)An.warn(n.message);else{const r=tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});An.warn(r.message)}}}function Hv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=1024,cI=30;class hI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>cI){const o=pI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){An.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cm(),{heartbeatsToSend:r,unsentEntries:i}=fI(this._heartbeatsCache.heartbeats),s=Ya(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return An.warn(n),""}}}function cm(){return new Date().toISOString().substring(0,10)}function fI(t,e=uI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZT()?ex().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return um(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return um(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function hm(t){return Ya(JSON.stringify({version:2,heartbeats:t})).length}function pI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t){el(new so("platform-logger",e=>new xx(e),"PRIVATE")),el(new so("heartbeat",e=>new hI(e),"PRIVATE")),Ei(Uc,am,t),Ei(Uc,am,"esm2020"),Ei("fire-js","")}mI("");var gI="firebase",yI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(gI,yI,"app");var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nr,Wv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,m){function g(){}g.prototype=m.prototype,I.F=m.prototype,I.prototype=new g,I.prototype.constructor=I,I.D=function(T,v,S){for(var w=Array(arguments.length-2),X=2;X<arguments.length;X++)w[X-2]=arguments[X];return m.prototype[v].apply(T,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,m,g){g||(g=0);const T=Array(16);if(typeof m=="string")for(var v=0;v<16;++v)T[v]=m.charCodeAt(g++)|m.charCodeAt(g++)<<8|m.charCodeAt(g++)<<16|m.charCodeAt(g++)<<24;else for(v=0;v<16;++v)T[v]=m[g++]|m[g++]<<8|m[g++]<<16|m[g++]<<24;m=I.g[0],g=I.g[1],v=I.g[2];let S=I.g[3],w;w=m+(S^g&(v^S))+T[0]+3614090360&4294967295,m=g+(w<<7&4294967295|w>>>25),w=S+(v^m&(g^v))+T[1]+3905402710&4294967295,S=m+(w<<12&4294967295|w>>>20),w=v+(g^S&(m^g))+T[2]+606105819&4294967295,v=S+(w<<17&4294967295|w>>>15),w=g+(m^v&(S^m))+T[3]+3250441966&4294967295,g=v+(w<<22&4294967295|w>>>10),w=m+(S^g&(v^S))+T[4]+4118548399&4294967295,m=g+(w<<7&4294967295|w>>>25),w=S+(v^m&(g^v))+T[5]+1200080426&4294967295,S=m+(w<<12&4294967295|w>>>20),w=v+(g^S&(m^g))+T[6]+2821735955&4294967295,v=S+(w<<17&4294967295|w>>>15),w=g+(m^v&(S^m))+T[7]+4249261313&4294967295,g=v+(w<<22&4294967295|w>>>10),w=m+(S^g&(v^S))+T[8]+1770035416&4294967295,m=g+(w<<7&4294967295|w>>>25),w=S+(v^m&(g^v))+T[9]+2336552879&4294967295,S=m+(w<<12&4294967295|w>>>20),w=v+(g^S&(m^g))+T[10]+4294925233&4294967295,v=S+(w<<17&4294967295|w>>>15),w=g+(m^v&(S^m))+T[11]+2304563134&4294967295,g=v+(w<<22&4294967295|w>>>10),w=m+(S^g&(v^S))+T[12]+1804603682&4294967295,m=g+(w<<7&4294967295|w>>>25),w=S+(v^m&(g^v))+T[13]+4254626195&4294967295,S=m+(w<<12&4294967295|w>>>20),w=v+(g^S&(m^g))+T[14]+2792965006&4294967295,v=S+(w<<17&4294967295|w>>>15),w=g+(m^v&(S^m))+T[15]+1236535329&4294967295,g=v+(w<<22&4294967295|w>>>10),w=m+(v^S&(g^v))+T[1]+4129170786&4294967295,m=g+(w<<5&4294967295|w>>>27),w=S+(g^v&(m^g))+T[6]+3225465664&4294967295,S=m+(w<<9&4294967295|w>>>23),w=v+(m^g&(S^m))+T[11]+643717713&4294967295,v=S+(w<<14&4294967295|w>>>18),w=g+(S^m&(v^S))+T[0]+3921069994&4294967295,g=v+(w<<20&4294967295|w>>>12),w=m+(v^S&(g^v))+T[5]+3593408605&4294967295,m=g+(w<<5&4294967295|w>>>27),w=S+(g^v&(m^g))+T[10]+38016083&4294967295,S=m+(w<<9&4294967295|w>>>23),w=v+(m^g&(S^m))+T[15]+3634488961&4294967295,v=S+(w<<14&4294967295|w>>>18),w=g+(S^m&(v^S))+T[4]+3889429448&4294967295,g=v+(w<<20&4294967295|w>>>12),w=m+(v^S&(g^v))+T[9]+568446438&4294967295,m=g+(w<<5&4294967295|w>>>27),w=S+(g^v&(m^g))+T[14]+3275163606&4294967295,S=m+(w<<9&4294967295|w>>>23),w=v+(m^g&(S^m))+T[3]+4107603335&4294967295,v=S+(w<<14&4294967295|w>>>18),w=g+(S^m&(v^S))+T[8]+1163531501&4294967295,g=v+(w<<20&4294967295|w>>>12),w=m+(v^S&(g^v))+T[13]+2850285829&4294967295,m=g+(w<<5&4294967295|w>>>27),w=S+(g^v&(m^g))+T[2]+4243563512&4294967295,S=m+(w<<9&4294967295|w>>>23),w=v+(m^g&(S^m))+T[7]+1735328473&4294967295,v=S+(w<<14&4294967295|w>>>18),w=g+(S^m&(v^S))+T[12]+2368359562&4294967295,g=v+(w<<20&4294967295|w>>>12),w=m+(g^v^S)+T[5]+4294588738&4294967295,m=g+(w<<4&4294967295|w>>>28),w=S+(m^g^v)+T[8]+2272392833&4294967295,S=m+(w<<11&4294967295|w>>>21),w=v+(S^m^g)+T[11]+1839030562&4294967295,v=S+(w<<16&4294967295|w>>>16),w=g+(v^S^m)+T[14]+4259657740&4294967295,g=v+(w<<23&4294967295|w>>>9),w=m+(g^v^S)+T[1]+2763975236&4294967295,m=g+(w<<4&4294967295|w>>>28),w=S+(m^g^v)+T[4]+1272893353&4294967295,S=m+(w<<11&4294967295|w>>>21),w=v+(S^m^g)+T[7]+4139469664&4294967295,v=S+(w<<16&4294967295|w>>>16),w=g+(v^S^m)+T[10]+3200236656&4294967295,g=v+(w<<23&4294967295|w>>>9),w=m+(g^v^S)+T[13]+681279174&4294967295,m=g+(w<<4&4294967295|w>>>28),w=S+(m^g^v)+T[0]+3936430074&4294967295,S=m+(w<<11&4294967295|w>>>21),w=v+(S^m^g)+T[3]+3572445317&4294967295,v=S+(w<<16&4294967295|w>>>16),w=g+(v^S^m)+T[6]+76029189&4294967295,g=v+(w<<23&4294967295|w>>>9),w=m+(g^v^S)+T[9]+3654602809&4294967295,m=g+(w<<4&4294967295|w>>>28),w=S+(m^g^v)+T[12]+3873151461&4294967295,S=m+(w<<11&4294967295|w>>>21),w=v+(S^m^g)+T[15]+530742520&4294967295,v=S+(w<<16&4294967295|w>>>16),w=g+(v^S^m)+T[2]+3299628645&4294967295,g=v+(w<<23&4294967295|w>>>9),w=m+(v^(g|~S))+T[0]+4096336452&4294967295,m=g+(w<<6&4294967295|w>>>26),w=S+(g^(m|~v))+T[7]+1126891415&4294967295,S=m+(w<<10&4294967295|w>>>22),w=v+(m^(S|~g))+T[14]+2878612391&4294967295,v=S+(w<<15&4294967295|w>>>17),w=g+(S^(v|~m))+T[5]+4237533241&4294967295,g=v+(w<<21&4294967295|w>>>11),w=m+(v^(g|~S))+T[12]+1700485571&4294967295,m=g+(w<<6&4294967295|w>>>26),w=S+(g^(m|~v))+T[3]+2399980690&4294967295,S=m+(w<<10&4294967295|w>>>22),w=v+(m^(S|~g))+T[10]+4293915773&4294967295,v=S+(w<<15&4294967295|w>>>17),w=g+(S^(v|~m))+T[1]+2240044497&4294967295,g=v+(w<<21&4294967295|w>>>11),w=m+(v^(g|~S))+T[8]+1873313359&4294967295,m=g+(w<<6&4294967295|w>>>26),w=S+(g^(m|~v))+T[15]+4264355552&4294967295,S=m+(w<<10&4294967295|w>>>22),w=v+(m^(S|~g))+T[6]+2734768916&4294967295,v=S+(w<<15&4294967295|w>>>17),w=g+(S^(v|~m))+T[13]+1309151649&4294967295,g=v+(w<<21&4294967295|w>>>11),w=m+(v^(g|~S))+T[4]+4149444226&4294967295,m=g+(w<<6&4294967295|w>>>26),w=S+(g^(m|~v))+T[11]+3174756917&4294967295,S=m+(w<<10&4294967295|w>>>22),w=v+(m^(S|~g))+T[2]+718787259&4294967295,v=S+(w<<15&4294967295|w>>>17),w=g+(S^(v|~m))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(v+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+v&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.v=function(I,m){m===void 0&&(m=I.length);const g=m-this.blockSize,T=this.C;let v=this.h,S=0;for(;S<m;){if(v==0)for(;S<=g;)i(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<m;)if(T[v++]=I.charCodeAt(S++),v==this.blockSize){i(this,T),v=0;break}}else for(;S<m;)if(T[v++]=I[S++],v==this.blockSize){i(this,T),v=0;break}}this.h=v,this.o+=m},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;m=this.o*8;for(var g=I.length-8;g<I.length;++g)I[g]=m&255,m/=256;for(this.v(I),I=Array(16),m=0,g=0;g<4;++g)for(let T=0;T<32;T+=8)I[m++]=this.g[g]>>>T&255;return I};function s(I,m){var g=l;return Object.prototype.hasOwnProperty.call(g,I)?g[I]:g[I]=m(I)}function o(I,m){this.h=m;const g=[];let T=!0;for(let v=I.length-1;v>=0;v--){const S=I[v]|0;T&&S==m||(g[v]=S,T=!1)}this.g=g}var l={};function u(I){return-128<=I&&I<128?s(I,function(m){return new o([m|0],m<0?-1:0)}):new o([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return D(h(-I));const m=[];let g=1;for(let T=0;I>=g;T++)m[T]=I/g|0,g*=4294967296;return new o(m,0)}function d(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return D(d(I.substring(1),m));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const g=h(Math.pow(m,8));let T=p;for(let S=0;S<I.length;S+=8){var v=Math.min(8,I.length-S);const w=parseInt(I.substring(S,S+v),m);v<8?(v=h(Math.pow(m,v)),T=T.j(v).add(h(w))):(T=T.j(g),T=T.add(h(w)))}return T}var p=u(0),_=u(1),C=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-D(this).m();let I=0,m=1;for(let g=0;g<this.g.length;g++){const T=this.i(g);I+=(T>=0?T:4294967296+T)*m,m*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(P(this))return"-"+D(this).toString(I);const m=h(Math.pow(I,6));var g=this;let T="";for(;;){const v=L(g,m).g;g=A(g,v.j(m));let S=((g.g.length>0?g.g[0]:g.h)>>>0).toString(I);if(g=v,N(g))return S+T;for(;S.length<6;)S="0"+S;T=S+T}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(let m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=A(this,I),P(I)?-1:N(I)?0:1};function D(I){const m=I.g.length,g=[];for(let T=0;T<m;T++)g[T]=~I.g[T];return new o(g,~I.h).add(_)}t.abs=function(){return P(this)?D(this):this},t.add=function(I){const m=Math.max(this.g.length,I.g.length),g=[];let T=0;for(let v=0;v<=m;v++){let S=T+(this.i(v)&65535)+(I.i(v)&65535),w=(S>>>16)+(this.i(v)>>>16)+(I.i(v)>>>16);T=w>>>16,S&=65535,w&=65535,g[v]=w<<16|S}return new o(g,g[g.length-1]&-2147483648?-1:0)};function A(I,m){return I.add(D(m))}t.j=function(I){if(N(this)||N(I))return p;if(P(this))return P(I)?D(this).j(D(I)):D(D(this).j(I));if(P(I))return D(this.j(D(I)));if(this.l(C)<0&&I.l(C)<0)return h(this.m()*I.m());const m=this.g.length+I.g.length,g=[];for(var T=0;T<2*m;T++)g[T]=0;for(T=0;T<this.g.length;T++)for(let v=0;v<I.g.length;v++){const S=this.i(T)>>>16,w=this.i(T)&65535,X=I.i(v)>>>16,pe=I.i(v)&65535;g[2*T+2*v]+=w*pe,x(g,2*T+2*v),g[2*T+2*v+1]+=S*pe,x(g,2*T+2*v+1),g[2*T+2*v+1]+=w*X,x(g,2*T+2*v+1),g[2*T+2*v+2]+=S*X,x(g,2*T+2*v+2)}for(I=0;I<m;I++)g[I]=g[2*I+1]<<16|g[2*I];for(I=m;I<2*m;I++)g[I]=0;return new o(g,0)};function x(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function R(I,m){this.g=I,this.h=m}function L(I,m){if(N(m))throw Error("division by zero");if(N(I))return new R(p,p);if(P(I))return m=L(D(I),m),new R(D(m.g),D(m.h));if(P(m))return m=L(I,D(m)),new R(D(m.g),m.h);if(I.g.length>30){if(P(I)||P(m))throw Error("slowDivide_ only works with positive integers.");for(var g=_,T=m;T.l(I)<=0;)g=z(g),T=z(T);var v=q(g,1),S=q(T,1);for(T=q(T,2),g=q(g,2);!N(T);){var w=S.add(T);w.l(I)<=0&&(v=v.add(g),S=w),T=q(T,1),g=q(g,1)}return m=A(I,v.j(m)),new R(v,m)}for(v=p;I.l(m)>=0;){for(g=Math.max(1,Math.floor(I.m()/m.m())),T=Math.ceil(Math.log(g)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),S=h(g),w=S.j(m);P(w)||w.l(I)>0;)g-=T,S=h(g),w=S.j(m);N(S)&&(S=_),v=v.add(S),I=A(I,w)}return new R(v,I)}t.B=function(I){return L(this,I).h},t.and=function(I){const m=Math.max(this.g.length,I.g.length),g=[];for(let T=0;T<m;T++)g[T]=this.i(T)&I.i(T);return new o(g,this.h&I.h)},t.or=function(I){const m=Math.max(this.g.length,I.g.length),g=[];for(let T=0;T<m;T++)g[T]=this.i(T)|I.i(T);return new o(g,this.h|I.h)},t.xor=function(I){const m=Math.max(this.g.length,I.g.length),g=[];for(let T=0;T<m;T++)g[T]=this.i(T)^I.i(T);return new o(g,this.h^I.h)};function z(I){const m=I.g.length+1,g=[];for(let T=0;T<m;T++)g[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(g,I.h)}function q(I,m){const g=m>>5;m%=32;const T=I.g.length-g,v=[];for(let S=0;S<T;S++)v[S]=m>0?I.i(S+g)>>>m|I.i(S+g+1)<<32-m:I.i(S+g);return new o(v,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Wv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,nr=o}).apply(typeof fm<"u"?fm:typeof self<"u"?self:typeof window<"u"?window:{});var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qv,xs,Gv,Ea,$c,Kv,Xv,Yv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof na=="object"&&na];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var k=a[y];if(!(k in f))break e;f=f[k]}a=a[a.length-1],y=f[a],c=c(y),c!=y&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(c){var f=[],y;for(y in c)Object.prototype.hasOwnProperty.call(c,y)&&f.push([y,c[y]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function d(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function p(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(y,k,M){for(var W=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)W[ue-2]=arguments[ue];return c.prototype[k].apply(y,W)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function C(a){const c=a.length;if(c>0){const f=Array(c);for(let y=0;y<c;y++)f[y]=a[y];return f}return[]}function N(a,c){for(let y=1;y<arguments.length;y++){const k=arguments[y];var f=typeof k;if(f=f!="object"?f:k?Array.isArray(k)?"array":f:"null",f=="array"||f=="object"&&typeof k.length=="number"){f=a.length||0;const M=k.length||0;a.length=f+M;for(let W=0;W<M;W++)a[f+W]=k[W]}else a.push(k)}}class P{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function D(a){o.setTimeout(()=>{throw a},0)}function A(){var a=I;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class x{constructor(){this.h=this.g=null}add(c,f){const y=R.get();y.set(c,f),this.h?this.h.next=y:this.g=y,this.h=y}}var R=new P(()=>new L,a=>a.reset());class L{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let z,q=!1,I=new x,m=()=>{const a=Promise.resolve(void 0);z=()=>{a.then(g)}};function g(){for(var a;a=A();){try{a.h.call(a.g)}catch(f){D(f)}var c=R;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}q=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function X(a,c){v.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}p(X,v),X.prototype.init=function(a,c){const f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),ae=0;function V(a,c,f,y,k){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!y,this.ha=k,this.key=++ae,this.da=this.fa=!1}function b(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function B(a,c,f){for(const y in a)c.call(f,a[y],y,a)}function H(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function Z(a){const c={};for(const f in a)c[f]=a[f];return c}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(a,c){let f,y;for(let k=1;k<arguments.length;k++){y=arguments[k];for(f in y)a[f]=y[f];for(let M=0;M<O.length;M++)f=O[M],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function oe(a){this.src=a,this.g={},this.h=0}oe.prototype.add=function(a,c,f,y,k){const M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);const W=ce(a,c,y,k);return W>-1?(c=a[W],f||(c.fa=!1)):(c=new V(c,this.src,M,!!y,k),c.fa=f,a.push(c)),c};function Ie(a,c){const f=c.type;if(f in a.g){var y=a.g[f],k=Array.prototype.indexOf.call(y,c,void 0),M;(M=k>=0)&&Array.prototype.splice.call(y,k,1),M&&(b(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ce(a,c,f,y){for(let k=0;k<a.length;++k){const M=a[k];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==y)return k}return-1}var re="closure_lm_"+(Math.random()*1e6|0),ve={};function Re(a,c,f,y,k){if(Array.isArray(c)){for(let M=0;M<c.length;M++)Re(a,c[M],f,y,k);return null}return f=Y(f),a&&a[pe]?a.J(c,f,l(y)?!!y.capture:!1,k):me(a,c,f,!1,y,k)}function me(a,c,f,y,k,M){if(!c)throw Error("Invalid event type");const W=l(k)?!!k.capture:!!k;let ue=Ht(a);if(ue||(a[re]=ue=new oe(a)),f=ue.add(c,f,y,W,M),f.proxy)return f;if(y=ee(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)S||(k=W),k===void 0&&(k=!1),a.addEventListener(c.toString(),y,k);else if(a.attachEvent)a.attachEvent(Ne(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ee(){function a(f){return c.call(a.src,a.listener,f)}const c=st;return a}function fe(a,c,f,y,k){if(Array.isArray(c))for(var M=0;M<c.length;M++)fe(a,c[M],f,y,k);else y=l(y)?!!y.capture:!!y,f=Y(f),a&&a[pe]?(a=a.i,M=String(c).toString(),M in a.g&&(c=a.g[M],f=ce(c,f,y,k),f>-1&&(b(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[M],a.h--)))):a&&(a=Ht(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ce(c,f,y,k)),(f=a>-1?c[a]:null)&&Pe(f))}function Pe(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[pe])Ie(c.i,a);else{var f=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(f,y,a.capture):c.detachEvent?c.detachEvent(Ne(f),y):c.addListener&&c.removeListener&&c.removeListener(y),(f=Ht(c))?(Ie(f,a),f.h==0&&(f.src=null,c[re]=null)):b(a)}}}function Ne(a){return a in ve?ve[a]:ve[a]="on"+a}function st(a,c){if(a.da)a=!0;else{c=new X(c,this);const f=a.listener,y=a.ha||a.src;a.fa&&Pe(a),a=f.call(y,c)}return a}function Ht(a){return a=a[re],a instanceof oe?a:null}var gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Y(a){return typeof a=="function"?a:(a[gn]||(a[gn]=function(c){return a.handleEvent(c)}),a[gn])}function le(){T.call(this),this.i=new oe(this),this.M=this,this.G=null}p(le,T),le.prototype[pe]=!0,le.prototype.removeEventListener=function(a,c,f,y){fe(this,a,c,f,y)};function te(a,c){var f,y=a.G;if(y)for(f=[];y;y=y.G)f.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new v(c,a);else if(c instanceof v)c.target=c.target||a;else{var k=c;c=new v(y,a),he(c,k)}k=!0;let M,W;if(f)for(W=f.length-1;W>=0;W--)M=c.g=f[W],k=Ze(M,y,!0,c)&&k;if(M=c.g=a,k=Ze(M,y,!0,c)&&k,k=Ze(M,y,!1,c)&&k,f)for(W=0;W<f.length;W++)M=c.g=f[W],k=Ze(M,y,!1,c)&&k}le.prototype.N=function(){if(le.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let y=0;y<f.length;y++)b(f[y]);delete a.g[c],a.h--}}this.G=null},le.prototype.J=function(a,c,f,y){return this.i.add(String(a),c,!1,f,y)},le.prototype.K=function(a,c,f,y){return this.i.add(String(a),c,!0,f,y)};function Ze(a,c,f,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let k=!0;for(let M=0;M<c.length;++M){const W=c[M];if(W&&!W.da&&W.capture==f){const ue=W.listener,Ke=W.ha||W.src;W.fa&&Ie(a.i,W),k=ue.call(Ke,y)!==!1&&k}}return k&&!y.defaultPrevented}function gr(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function qf(a){a.g=gr(()=>{a.g=null,a.i&&(a.i=!1,qf(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class R0 extends T{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:qf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ki(a){T.call(this),this.h=a,this.g={}}p(Ki,T);var Hf=[];function Wf(a){B(a.g,function(c,f){this.g.hasOwnProperty(f)&&Pe(c)},a),a.g={}}Ki.prototype.N=function(){Ki.Z.N.call(this),Wf(this)},Ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ql=o.JSON.stringify,P0=o.JSON.parse,N0=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Qf(){}function Gf(){}var Xi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hl(){v.call(this,"d")}p(Hl,v);function Wl(){v.call(this,"c")}p(Wl,v);var yr={},Kf=null;function Ro(){return Kf=Kf||new le}yr.Ia="serverreachability";function Xf(a){v.call(this,yr.Ia,a)}p(Xf,v);function Yi(a){const c=Ro();te(c,new Xf(c))}yr.STAT_EVENT="statevent";function Yf(a,c){v.call(this,yr.STAT_EVENT,a),this.stat=c}p(Yf,v);function _t(a){const c=Ro();te(c,new Yf(c,a))}yr.Ja="timingevent";function Jf(a,c){v.call(this,yr.Ja,a),this.size=c}p(Jf,v);function Ji(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function Zi(){this.g=!0}Zi.prototype.ua=function(){this.g=!1};function k0(a,c,f,y,k,M){a.info(function(){if(a.g)if(M){var W="",ue=M.split("&");for(let Se=0;Se<ue.length;Se++){var Ke=ue[Se].split("=");if(Ke.length>1){const et=Ke[0];Ke=Ke[1];const nn=et.split("_");W=nn.length>=2&&nn[1]=="type"?W+(et+"="+Ke+"&"):W+(et+"=redacted&")}}}else W=null;else W=M;return"XMLHTTP REQ ("+y+") [attempt "+k+"]: "+c+`
`+f+`
`+W})}function V0(a,c,f,y,k,M,W){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+k+"]: "+c+`
`+f+`
`+M+" "+W})}function Gr(a,c,f,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+b0(a,f)+(y?" "+y:"")})}function D0(a,c){a.info(function(){return"TIMEOUT: "+c})}Zi.prototype.info=function(){};function b0(a,c){if(!a.g)return c;if(!c)return null;try{const M=JSON.parse(c);if(M){for(a=0;a<M.length;a++)if(Array.isArray(M[a])){var f=M[a];if(!(f.length<2)){var y=f[1];if(Array.isArray(y)&&!(y.length<1)){var k=y[0];if(k!="noop"&&k!="stop"&&k!="close")for(let W=1;W<y.length;W++)y[W]=""}}}}return ql(M)}catch{return c}}var Po={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ed;function Ql(){}p(Ql,Qf),Ql.prototype.g=function(){return new XMLHttpRequest},ed=new Ql;function es(a){return encodeURIComponent(String(a))}function M0(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function Nn(a,c,f,y){this.j=a,this.i=c,this.l=f,this.S=y||1,this.V=new Ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new td}function td(){this.i=null,this.g="",this.h=!1}var nd={},Gl={};function Kl(a,c,f){a.M=1,a.A=ko(tn(c)),a.u=f,a.R=!0,rd(a,null)}function rd(a,c){a.F=Date.now(),No(a),a.B=tn(a.A);var f=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),gd(f.i,"t",y),a.C=0,f=a.j.L,a.h=new td,a.g=bd(a.j,f?c:null,!a.u),a.P>0&&(a.O=new R0(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,y=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(Hf[0]=k.toString()),k=Hf);for(let M=0;M<k.length;M++){const W=Re(f,k[M],y||c.handleEvent,!1,c.h||c);if(!W)break;c.g[W.key]=W}c=a.J?Z(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Yi(),k0(a.i,a.v,a.B,a.l,a.S,a.u)}Nn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Dn(a)==3?c.j():this.Y(a)},Nn.prototype.Y=function(a){try{if(a==this.g)e:{const ue=Dn(this.g),Ke=this.g.ya(),Se=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||xd(this.g)))){this.K||ue!=4||Ke==7||(Ke==8||Se<=0?Yi(3):Yi(2)),Xl(this);var c=this.g.ca();this.X=c;var f=L0(this);if(this.o=c==200,V0(this.i,this.v,this.B,this.l,this.S,ue,c),this.o){if(this.U&&!this.L){t:{if(this.g){var y,k=this.g;if((y=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(y)){var M=y;break t}}M=null}if(a=M)Gr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yl(this,a);else{this.o=!1,this.m=3,_t(12),vr(this),ts(this);break e}}if(this.R){a=!0;let et;for(;!this.K&&this.C<f.length;)if(et=O0(this,f),et==Gl){ue==4&&(this.m=4,_t(14),a=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(et==nd){this.m=4,_t(15),Gr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Gr(this.i,this.l,et,null),Yl(this,et);if(id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,_t(16),a=!1),this.o=this.o&&a,!a)Gr(this.i,this.l,f,"[Invalid Chunked Response]"),vr(this),ts(this);else if(f.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),su(W),W.P=!0,_t(11))}}else Gr(this.i,this.l,f,null),Yl(this,f);ue==4&&vr(this),this.o&&!this.K&&(ue==4?Nd(this.j,this):(this.o=!1,No(this)))}else Y0(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),vr(this),ts(this)}}}catch{}finally{}};function L0(a){if(!id(a))return a.g.la();const c=xd(a.g);if(c==="")return"";let f="";const y=c.length,k=Dn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return vr(a),ts(a),"";a.h.i=new o.TextDecoder}for(let M=0;M<y;M++)a.h.h=!0,f+=a.h.i.decode(c[M],{stream:!(k&&M==y-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function id(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function O0(a,c){var f=a.C,y=c.indexOf(`
`,f);return y==-1?Gl:(f=Number(c.substring(f,y)),isNaN(f)?nd:(y+=1,y+f>c.length?Gl:(c=c.slice(y,y+f),a.C=y+f,c)))}Nn.prototype.cancel=function(){this.K=!0,vr(this)};function No(a){a.T=Date.now()+a.H,sd(a,a.H)}function sd(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ji(h(a.aa,a),c)}function Xl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Nn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(D0(this.i,this.B),this.M!=2&&(Yi(),_t(17)),vr(this),this.m=2,ts(this)):sd(this,this.T-a)};function ts(a){a.j.I==0||a.K||Nd(a.j,a)}function vr(a){Xl(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,Wf(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function Yl(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||Jl(f.h,a))){if(!a.L&&Jl(f.h,a)&&f.I==3){try{var y=f.Ba.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var k=y;if(k[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Lo(f),bo(f);else break e;iu(f),_t(18)}}else f.xa=k[1],0<f.xa-f.K&&k[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ji(h(f.Va,f),6e3));ld(f.h)<=1&&f.ta&&(f.ta=void 0)}else Er(f,11)}else if((a.L||f.g==a)&&Lo(f),!w(c))for(k=f.Ba.g.parse(c),c=0;c<k.length;c++){let Se=k[c];const et=Se[0];if(!(et<=f.K))if(f.K=et,Se=Se[1],f.I==2)if(Se[0]=="c"){f.M=Se[1],f.ba=Se[2];const nn=Se[3];nn!=null&&(f.ka=nn,f.j.info("VER="+f.ka));const wr=Se[4];wr!=null&&(f.za=wr,f.j.info("SVER="+f.za));const bn=Se[5];bn!=null&&typeof bn=="number"&&bn>0&&(y=1.5*bn,f.O=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Mn=a.g;if(Mn){const jo=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var M=y.h;M.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Zl(M,M.h),M.h=null))}if(y.G){const ou=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;ou&&(y.wa=ou,ke(y.J,y.G,ou))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),y=f;var W=a;if(y.na=Dd(y,y.L?y.ba:null,y.W),W.L){ud(y.h,W);var ue=W,Ke=y.O;Ke&&(ue.H=Ke),ue.D&&(Xl(ue),No(ue)),y.g=W}else Rd(y);f.i.length>0&&Mo(f)}else Se[0]!="stop"&&Se[0]!="close"||Er(f,7);else f.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Er(f,7):ru(f):Se[0]!="noop"&&f.l&&f.l.qa(Se),f.A=0)}}Yi(4)}catch{}}var j0=class{constructor(a,c){this.g=a,this.map=c}};function od(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ad(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ld(a){return a.h?1:a.g?a.g.size:0}function Jl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Zl(a,c){a.g?a.g.add(c):a.h=c}function ud(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}od.prototype.cancel=function(){if(this.i=cd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function cd(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return C(a.i)}var hd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function F0(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const y=a[f].indexOf("=");let k,M=null;y>=0?(k=a[f].substring(0,y),M=a[f].substring(y+1)):k=a[f],c(k,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function kn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof kn?(this.l=a.l,ns(this,a.j),this.o=a.o,this.g=a.g,rs(this,a.u),this.h=a.h,eu(this,yd(a.i)),this.m=a.m):a&&(c=String(a).match(hd))?(this.l=!1,ns(this,c[1]||"",!0),this.o=is(c[2]||""),this.g=is(c[3]||"",!0),rs(this,c[4]),this.h=is(c[5]||"",!0),eu(this,c[6]||"",!0),this.m=is(c[7]||"")):(this.l=!1,this.i=new os(null,this.l))}kn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(ss(c,fd,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ss(c,fd,!0),"@"),a.push(es(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ss(f,f.charAt(0)=="/"?z0:B0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ss(f,q0)),a.join("")},kn.prototype.resolve=function(a){const c=tn(this);let f=!!a.j;f?ns(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var y=a.h;if(f)rs(c,a.u);else if(f=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var k=c.h.lastIndexOf("/");k!=-1&&(y=c.h.slice(0,k+1)+y)}if(k=y,k==".."||k==".")y="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){y=k.lastIndexOf("/",0)==0,k=k.split("/");const M=[];for(let W=0;W<k.length;){const ue=k[W++];ue=="."?y&&W==k.length&&M.push(""):ue==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),y&&W==k.length&&M.push("")):(M.push(ue),y=!0)}y=M.join("/")}else y=k}return f?c.h=y:f=a.i.toString()!=="",f?eu(c,yd(a.i)):f=!!a.m,f&&(c.m=a.m),c};function tn(a){return new kn(a)}function ns(a,c,f){a.j=f?is(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function rs(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function eu(a,c,f){c instanceof os?(a.i=c,H0(a.i,a.l)):(f||(c=ss(c,$0)),a.i=new os(c,a.l))}function ke(a,c,f){a.i.set(c,f)}function ko(a){return ke(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function is(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ss(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,U0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function U0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fd=/[#\/\?@]/g,B0=/[#\?:]/g,z0=/[#\?]/g,$0=/[#\?@]/g,q0=/#/g;function os(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&F0(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=os.prototype,t.add=function(a,c){_r(this),this.i=null,a=Kr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function dd(a,c){_r(a),c=Kr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function pd(a,c){return _r(a),c=Kr(a,c),a.g.has(c)}t.forEach=function(a,c){_r(this),this.g.forEach(function(f,y){f.forEach(function(k){a.call(c,k,y,this)},this)},this)};function md(a,c){_r(a);let f=[];if(typeof c=="string")pd(a,c)&&(f=f.concat(a.g.get(Kr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return _r(this),this.i=null,a=Kr(this,a),pd(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=md(this,a),a.length>0?String(a[0]):c):c};function gd(a,c,f){dd(a,c),f.length>0&&(a.i=null,a.g.set(Kr(a,c),C(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let y=0;y<c.length;y++){var f=c[y];const k=es(f);f=md(this,f);for(let M=0;M<f.length;M++){let W=k;f[M]!==""&&(W+="="+es(f[M])),a.push(W)}}return this.i=a.join("&")};function yd(a){const c=new os;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function Kr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function H0(a,c){c&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(f,y){const k=y.toLowerCase();y!=k&&(dd(this,y),gd(this,k,f))},a)),a.j=c}function W0(a,c){const f=new Zi;if(o.Image){const y=new Image;y.onload=d(Vn,f,"TestLoadImage: loaded",!0,c,y),y.onerror=d(Vn,f,"TestLoadImage: error",!1,c,y),y.onabort=d(Vn,f,"TestLoadImage: abort",!1,c,y),y.ontimeout=d(Vn,f,"TestLoadImage: timeout",!1,c,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function Q0(a,c){const f=new Zi,y=new AbortController,k=setTimeout(()=>{y.abort(),Vn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(M=>{clearTimeout(k),M.ok?Vn(f,"TestPingServer: ok",!0,c):Vn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),Vn(f,"TestPingServer: error",!1,c)})}function Vn(a,c,f,y,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),y(f)}catch{}}function G0(){this.g=new N0}function tu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(tu,Qf),tu.prototype.g=function(){return new Vo(this.i,this.h)};function Vo(a,c){le.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Vo,le),t=Vo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,ls(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ls(this)),this.g&&(this.readyState=3,ls(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vd(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function vd(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?as(this):ls(this),this.readyState==3&&vd(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,as(this))},t.Na=function(a){this.g&&(this.response=a,as(this))},t.ga=function(){this.g&&as(this)};function as(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ls(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function ls(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function _d(a){let c="";return B(a,function(f,y){c+=y,c+=":",c+=f,c+=`\r
`}),c}function nu(a,c,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=_d(f),typeof a=="string"?f!=null&&es(f):ke(a,c,f))}function Ue(a){le.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ue,le);var K0=/^https?$/i,X0=["POST","PUT"];t=Ue.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ed.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(M){Ed(this,M);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var k in y)f.set(k,y[k]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())f.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(X0,c,void 0)>=0)||y||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,W]of f)this.g.setRequestHeader(M,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(M){Ed(this,M)}};function Ed(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,wd(a),Do(a)}function wd(a){a.A||(a.A=!0,te(a,"complete"),te(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,te(this,"complete"),te(this,"abort"),Do(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Do(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Td(this):this.Xa())},t.Xa=function(){Td(this)};function Td(a){if(a.h&&typeof s<"u"){if(a.v&&Dn(a)==4)setTimeout(a.Ca.bind(a),0);else if(te(a,"readystatechange"),Dn(a)==4){a.h=!1;try{const M=a.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var y;if(y=M===0){let W=String(a.D).match(hd)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),y=!K0.test(W?W.toLowerCase():"")}f=y}if(f)te(a,"complete"),te(a,"success");else{a.o=6;try{var k=Dn(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",wd(a)}}finally{Do(a)}}}}function Do(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||te(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Dn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Dn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),P0(c)}};function xd(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Y0(a){const c={};a=(a.g&&Dn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var f=M0(a[y]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[k]||[];c[k]=M,M.push(f)}H(c,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function us(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Id(a){this.za=0,this.i=[],this.j=new Zi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=us("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=us("baseRetryDelayMs",5e3,a),this.Za=us("retryDelaySeedMs",1e4,a),this.Ta=us("forwardChannelMaxRetries",2,a),this.va=us("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new od(a&&a.concurrentRequestLimit),this.Ba=new G0,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Id.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,y){_t(0),this.W=a,this.H=c||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.J=Dd(this,null,this.W),Mo(this)};function ru(a){if(Sd(a),a.I==3){var c=a.V++,f=tn(a.J);if(ke(f,"SID",a.M),ke(f,"RID",c),ke(f,"TYPE","terminate"),cs(a,f),c=new Nn(a,a.j,c),c.M=2,c.A=ko(tn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=bd(c.j,null),c.g.ea(c.A)),c.F=Date.now(),No(c)}Vd(a)}function bo(a){a.g&&(su(a),a.g.cancel(),a.g=null)}function Sd(a){bo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Lo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Mo(a){if(!ad(a.h)&&!a.m){a.m=!0;var c=a.Ea;z||m(),q||(z(),q=!0),I.add(c,a),a.D=0}}function J0(a,c){return ld(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ji(h(a.Ea,a,c),kd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new Nn(this,this.j,a);let M=this.o;if(this.U&&(M?(M=Z(M),he(M,this.U)):M=this.U),this.u!==null||this.R||(k.J=M,M=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Cd(this,k,c),f=tn(this.J),ke(f,"RID",a),ke(f,"CVER",22),this.G&&ke(f,"X-HTTP-Session-Id",this.G),cs(this,f),M&&(this.R?c="headers="+es(_d(M))+"&"+c:this.u&&nu(f,this.u,M)),Zl(this.h,k),this.Ra&&ke(f,"TYPE","init"),this.S?(ke(f,"$req",c),ke(f,"SID","null"),k.U=!0,Kl(k,f,null)):Kl(k,f,c),this.I=2}}else this.I==3&&(a?Ad(this,a):this.i.length==0||ad(this.h)||Ad(this))};function Ad(a,c){var f;c?f=c.l:f=a.V++;const y=tn(a.J);ke(y,"SID",a.M),ke(y,"RID",f),ke(y,"AID",a.K),cs(a,y),a.u&&a.o&&nu(y,a.u,a.o),f=new Nn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Cd(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Zl(a.h,f),Kl(f,y,c)}function cs(a,c){a.H&&B(a.H,function(f,y){ke(c,y,f)}),a.l&&B({},function(f,y){ke(c,y,f)})}function Cd(a,c,f){f=Math.min(a.i.length,f);const y=a.l?h(a.l.Ka,a.l,a):null;e:{var k=a.i;let ue=-1;for(;;){const Ke=["count="+f];ue==-1?f>0?(ue=k[0].g,Ke.push("ofs="+ue)):ue=0:Ke.push("ofs="+ue);let Se=!0;for(let et=0;et<f;et++){var M=k[et].g;const nn=k[et].map;if(M-=ue,M<0)ue=Math.max(0,k[et].g-100),Se=!1;else try{M="req"+M+"_"||"";try{var W=nn instanceof Map?nn:Object.entries(nn);for(const[wr,bn]of W){let Mn=bn;l(bn)&&(Mn=ql(bn)),Ke.push(M+wr+"="+encodeURIComponent(Mn))}}catch(wr){throw Ke.push(M+"type="+encodeURIComponent("_badmap")),wr}}catch{y&&y(nn)}}if(Se){W=Ke.join("&");break e}}W=void 0}return a=a.i.splice(0,f),c.G=a,W}function Rd(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;z||m(),q||(z(),q=!0),I.add(c,a),a.A=0}}function iu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ji(h(a.Da,a),kd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Pd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ji(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),bo(this),Pd(this))};function su(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Pd(a){a.g=new Nn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=tn(a.na);ke(c,"RID","rpc"),ke(c,"SID",a.M),ke(c,"AID",a.K),ke(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&ke(c,"TO",a.ia),ke(c,"TYPE","xmlhttp"),cs(a,c),a.u&&a.o&&nu(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=ko(tn(c)),f.u=null,f.R=!0,rd(f,a)}t.Va=function(){this.C!=null&&(this.C=null,bo(this),iu(this),_t(19))};function Lo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Nd(a,c){var f=null;if(a.g==c){Lo(a),su(a),a.g=null;var y=2}else if(Jl(a.h,c))f=c.G,ud(a.h,c),y=1;else return;if(a.I!=0){if(c.o)if(y==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var k=a.D;y=Ro(),te(y,new Jf(y,f)),Mo(a)}else Rd(a);else if(k=c.m,k==3||k==0&&c.X>0||!(y==1&&J0(a,c)||y==2&&iu(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),k){case 1:Er(a,5);break;case 4:Er(a,10);break;case 3:Er(a,6);break;default:Er(a,2)}}}function kd(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function Er(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),y=a.Ua;const k=!y;y=new kn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ns(y,"https"),ko(y),k?W0(y.toString(),f):Q0(y.toString(),f)}else _t(2);a.I=0,a.l&&a.l.pa(c),Vd(a),Sd(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Vd(a){if(a.I=0,a.ja=[],a.l){const c=cd(a.h);(c.length!=0||a.i.length!=0)&&(N(a.ja,c),N(a.ja,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.oa()}}function Dd(a,c,f){var y=f instanceof kn?tn(f):new kn(f);if(y.g!="")c&&(y.g=c+"."+y.g),rs(y,y.u);else{var k=o.location;y=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;const M=new kn(null);y&&ns(M,y),c&&(M.g=c),k&&rs(M,k),f&&(M.h=f),y=M}return f=a.G,c=a.wa,f&&c&&ke(y,f,c),ke(y,"VER",a.ka),cs(a,y),y}function bd(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Ue(new tu({ab:f})):new Ue(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Md(){}t=Md.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Oo(){}Oo.prototype.g=function(a,c){return new Nt(a,c)};function Nt(a,c){le.call(this),this.g=new Id(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!w(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Xr(this)}p(Nt,le),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){ru(this.g)},Nt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=ql(a),a=f);c.i.push(new j0(c.Ya++,a)),c.I==3&&Mo(c)},Nt.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,Nt.Z.N.call(this)};function Ld(a){Hl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}p(Ld,Hl);function Od(){Wl.call(this),this.status=1}p(Od,Wl);function Xr(a){this.g=a}p(Xr,Md),Xr.prototype.ra=function(){te(this.g,"a")},Xr.prototype.qa=function(a){te(this.g,new Ld(a))},Xr.prototype.pa=function(a){te(this.g,new Od)},Xr.prototype.oa=function(){te(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Yv=function(){return new Oo},Xv=function(){return Ro()},Kv=yr,$c={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,Ea=Po,Zf.COMPLETE="complete",Gv=Zf,Gf.EventType=Xi,Xi.OPEN="a",Xi.CLOSE="b",Xi.ERROR="c",Xi.MESSAGE="d",le.prototype.listen=le.prototype.J,xs=Gf,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,Qv=Ue}).apply(typeof na<"u"?na:typeof self<"u"?self:typeof window<"u"?window:{});const dm="@firebase/firestore",pm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Uv("@firebase/firestore");function Jr(){return Or.logLevel}function G(t,...e){if(Or.logLevel<=Ee.DEBUG){const n=e.map(of);Or.debug(`Firestore (${$i}): ${t}`,...n)}}function Cn(t,...e){if(Or.logLevel<=Ee.ERROR){const n=e.map(of);Or.error(`Firestore (${$i}): ${t}`,...n)}}function Vi(t,...e){if(Or.logLevel<=Ee.WARN){const n=e.map(of);Or.warn(`Firestore (${$i}): ${t}`,...n)}}function of(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Jv(t,r,n)}function Jv(t,e,n){let r=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cn(r),new Error(r)}function Te(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Jv(e,i,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class _I{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new Zv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class wI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Te(this.o===void 0,3512);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=II(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function qc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return ju(i)===ju(s)?ge(i,s):ju(i)?1:-1}return ge(t.length,e.length)}const SI=55296,AI=57343;function ju(t){const e=t.charCodeAt(0);return e>=SI&&e<=AI}function Di(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="__name__";class on{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return on.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof on?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=on.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ge(e.length,n.length)}static compareSegments(e,n){const r=on.isNumericId(e),i=on.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?on.extractNumericId(e).compare(on.extractNumericId(n)):qc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}}class Ae extends on{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const CI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends on{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return CI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gm}static keyField(){return new lt([gm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ae.fromString(e))}static fromName(e){return new J(Ae.fromString(e).popFirst(5))}static empty(){return new J(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RI(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ym(t){if(!J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vm(t){if(J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function t_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function ao(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pl(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t,e){const n={typeString:t};return e&&(n.value=e),n}function xo(t,e){if(!t_(t))throw new Q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=-62135596800,Em=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Em);return new De(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_m)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Em}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xo(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_m;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Qe("string",De._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new De(0,0))}static max(){return new ie(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=-1;function PI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new ar(i,J.empty(),e)}function NI(t){return new ar(t.readTime,t.key,lo)}class ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ar(ie.min(),J.empty(),lo)}static max(){return new ar(ie.max(),J.empty(),lo)}}function kI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==VI)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function bI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=-1;function kl(t){return t==null}function tl(t){return t===0&&1/t==-1/0}function MI(t){return typeof t=="number"&&Number.isInteger(t)&&!tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="";function LI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wm(e)),e=OI(t.get(n),e);return wm(e)}function OI(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case n_:n+="";break;default:n+=s}}return n}function wm(t){return t+n_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $r(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ra(this.root,e,this.comparator,!0)}}class ra{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??at.RED,this.left=i??at.EMPTY,this.right=s??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new at(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return at.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xm(this.data.getIterator())}getIteratorFrom(e){return new xm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class xm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Xt([])}unionWith(e){let n=new Je(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new i_("Invalid base64 string: "+s):s}}(e);return new ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const jI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(Te(!!t,39018),typeof t=="string"){let e=0;const n=jI.exec(t);if(Te(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ur(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="server_timestamp",o_="__type__",a_="__previous_value__",l_="__local_write_time__";function uf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[o_])==null?void 0:r.stringValue)===s_}function Vl(t){const e=t.mapValue.fields[a_];return uf(e)?Vl(e):e}function uo(t){const e=lr(t.mapValue.fields[l_].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,r,i,s,o,l,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const nl="(default)";class co{constructor(e,n){this.projectId=e,this.database=n||nl}static empty(){return new co("","")}get isDefaultDatabase(){return this.database===nl}isEqual(e){return e instanceof co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="__type__",UI="__max__",ia={mapValue:{}},c_="__vector__",rl="value";function cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uf(t)?4:zI(t)?9007199254740991:BI(t)?10:11:ne(28295,{value:t})}function mn(t,e){if(t===e)return!0;const n=cr(t);if(n!==cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uo(t).isEqual(uo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=lr(i.timestampValue),l=lr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ur(i.bytesValue).isEqual(ur(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ze(i.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ze(i.integerValue)===ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ze(i.doubleValue),l=ze(s.doubleValue);return o===l?tl(o)===tl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Di(t.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Tm(o)!==Tm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!mn(o[u],l[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function ho(t,e){return(t.values||[]).find(n=>mn(n,e))!==void 0}function bi(t,e){if(t===e)return 0;const n=cr(t),r=cr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=ze(s.integerValue||s.doubleValue),u=ze(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Im(t.timestampValue,e.timestampValue);case 4:return Im(uo(t),uo(e));case 5:return qc(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ur(s),u=ur(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ge(l[h],u[h]);if(d!==0)return d}return ge(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ge(ze(s.latitude),ze(o.latitude));return l!==0?l:ge(ze(s.longitude),ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sm(t.arrayValue,e.arrayValue);case 10:return function(s,o){var _,C,N,P;const l=s.fields||{},u=o.fields||{},h=(_=l[rl])==null?void 0:_.arrayValue,d=(C=u[rl])==null?void 0:C.arrayValue,p=ge(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((P=d==null?void 0:d.values)==null?void 0:P.length)||0);return p!==0?p:Sm(h,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ia.mapValue&&o===ia.mapValue)return 0;if(s===ia.mapValue)return 1;if(o===ia.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const _=qc(u[p],d[p]);if(_!==0)return _;const C=bi(l[u[p]],h[d[p]]);if(C!==0)return C}return ge(u.length,d.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function Im(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=lr(t),r=lr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function Sm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=bi(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Mi(t){return Hc(t)}function Hc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Hc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Hc(n.fields[o])}`;return i+"}"}(t.mapValue):ne(61005,{value:t})}function wa(t){switch(cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vl(t);return e?16+wa(e):16;case 5:return 2*t.stringValue.length;case 6:return ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+wa(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return $r(r.fields,(s,o)=>{i+=s.length+wa(o)}),i}(t.mapValue);default:throw ne(13486,{value:t})}}function Am(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wc(t){return!!t&&"integerValue"in t}function cf(t){return!!t&&"arrayValue"in t}function Cm(t){return!!t&&"nullValue"in t}function Rm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ta(t){return!!t&&"mapValue"in t}function BI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[u_])==null?void 0:r.stringValue)===c_}function Ls(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $r(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ls(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ls(t.arrayValue.values[n]);return e}return{...t}}function zI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===UI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ta(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ls(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Ls(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ta(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ta(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$r(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ft(Ls(this.value))}}function h_(t){const e=[];return $r(t.fields,(n,r)=>{const i=new lt([n]);if(Ta(r)){const s=h_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new yt(e,0,ie.min(),ie.min(),ie.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,i){return new yt(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new yt(e,2,n,ie.min(),ie.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,ie.min(),ie.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.position=e,this.inclusive=n}}function Pm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=bi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n="asc"){this.field=e,this.dir=n}}function $I(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{}class We extends f_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HI(e,n,r):n==="array-contains"?new GI(e,r):n==="in"?new KI(e,r):n==="not-in"?new XI(e,r):n==="array-contains-any"?new YI(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new WI(e,r):new QI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bi(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class en extends f_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new en(e,n)}matches(e){return d_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d_(t){return t.op==="and"}function p_(t){return qI(t)&&d_(t)}function qI(t){for(const e of t.filters)if(e instanceof en)return!1;return!0}function Qc(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Mi(t.value);if(p_(t))return t.filters.map(e=>Qc(e)).join(",");{const e=t.filters.map(n=>Qc(n)).join(",");return`${t.op}(${e})`}}function m_(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&mn(r.value,i.value)}(t,e):t instanceof en?function(r,i){return i instanceof en&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&m_(o,i.filters[l]),!0):!1}(t,e):void ne(19439)}function g_(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Mi(n.value)}`}(t):t instanceof en?function(n){return n.op.toString()+" {"+n.getFilters().map(g_).join(" ,")+"}"}(t):"Filter"}class HI extends We{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class WI extends We{constructor(e,n){super(e,"in",n),this.keys=y_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QI extends We{constructor(e,n){super(e,"not-in",n),this.keys=y_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function y_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class GI extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cf(n)&&ho(n.arrayValue,this.value)}}class KI extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ho(this.value.arrayValue,n)}}class XI extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ho(this.value.arrayValue,n)}}class YI extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ho(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function km(t,e=null,n=[],r=[],i=null,s=null,o=null){return new JI(t,e,n,r,i,s,o)}function hf(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mi(r)).join(",")),e.Te=n}return e.Te}function ff(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$I(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!m_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nm(t.startAt,e.startAt)&&Nm(t.endAt,e.endAt)}function Gc(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZI(t,e,n,r,i,s,o,l){return new Wi(t,e,n,r,i,s,o,l)}function v_(t){return new Wi(t)}function Vm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __(t){return t.collectionGroup!==null}function Os(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Je(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new fo(s,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new fo(lt.keyField(),r))}return e.Ie}function cn(t){const e=se(t);return e.Ee||(e.Ee=eS(e,Os(t))),e.Ee}function eS(t,e){if(t.limitType==="F")return km(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new fo(i.field,s)});const n=t.endAt?new il(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new il(t.startAt.position,t.startAt.inclusive):null;return km(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kc(t,e){const n=t.filters.concat([e]);return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xc(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dl(t,e){return ff(cn(t),cn(e))&&t.limitType===e.limitType}function E_(t){return`${hf(cn(t))}|lt:${t.limitType}`}function Zr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>g_(i)).join(", ")}]`),kl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mi(i)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function bl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Os(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Pm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Os(r),i)||r.endAt&&!function(o,l,u){const h=Pm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Os(r),i))}(t,e)}function tS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w_(t){return(e,n)=>{let r=!1;for(const i of Os(t)){const s=nS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nS(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?bi(u,h):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return r_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Fe(J.comparator);function Rn(){return rS}const T_=new Fe(J.comparator);function Is(...t){let e=T_;for(const n of t)e=e.insert(n.key,n);return e}function x_(t){let e=T_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pr(){return js()}function I_(){return js()}function js(){return new qr(t=>t.toString(),(t,e)=>t.isEqual(e))}const iS=new Fe(J.comparator),sS=new Je(J.comparator);function ye(...t){let e=sS;for(const n of t)e=e.add(n);return e}const oS=new Je(ge);function aS(){return oS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function S_(t){return{integerValue:""+t}}function lS(t,e){return MI(e)?S_(e):df(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this._=void 0}}function uS(t,e,n){return t instanceof po?function(i,s){const o={fields:{[o_]:{stringValue:s_},[l_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&uf(s)&&(s=Vl(s)),s&&(o.fields[a_]=s),{mapValue:o}}(n,e):t instanceof mo?C_(t,e):t instanceof go?R_(t,e):function(i,s){const o=A_(i,s),l=Dm(o)+Dm(i.Ae);return Wc(o)&&Wc(i.Ae)?S_(l):df(i.serializer,l)}(t,e)}function cS(t,e,n){return t instanceof mo?C_(t,e):t instanceof go?R_(t,e):n}function A_(t,e){return t instanceof sl?function(r){return Wc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class po extends Ml{}class mo extends Ml{constructor(e){super(),this.elements=e}}function C_(t,e){const n=P_(e);for(const r of t.elements)n.some(i=>mn(i,r))||n.push(r);return{arrayValue:{values:n}}}class go extends Ml{constructor(e){super(),this.elements=e}}function R_(t,e){let n=P_(e);for(const r of t.elements)n=n.filter(i=>!mn(i,r));return{arrayValue:{values:n}}}class sl extends Ml{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Dm(t){return ze(t.integerValue||t.doubleValue)}function P_(t){return cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.field=e,this.transform=n}}function fS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof mo&&i instanceof mo||r instanceof go&&i instanceof go?Di(r.elements,i.elements,mn):r instanceof sl&&i instanceof sl?mn(r.Ae,i.Ae):r instanceof po&&i instanceof po}(t.transform,e.transform)}class dS{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ll{}function N_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pf(t.key,hn.none()):new Io(t.key,t.data,hn.none());{const n=t.data,r=Ft.empty();let i=new Je(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hr(t.key,r,new Xt(i.toArray()),hn.none())}}function pS(t,e,n){t instanceof Io?function(i,s,o){const l=i.value.clone(),u=Mm(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(i,s,o){if(!xa(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Mm(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(k_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fs(t,e,n,r){return t instanceof Io?function(s,o,l,u){if(!xa(s.precondition,o))return l;const h=s.value.clone(),d=Lm(s.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hr?function(s,o,l,u){if(!xa(s.precondition,o))return l;const h=Lm(s.fieldTransforms,u,o),d=o.data;return d.setAll(k_(s)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return xa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function mS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=A_(r.transform,i||null);s!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,s))}return n||null}function bm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Di(r,i,(s,o)=>fS(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Io extends Ll{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hr extends Ll{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function k_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Mm(t,e,n){const r=new Map;Te(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,cS(o,l,n[i]))}return r}function Lm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,uS(s,o,e))}return r}class pf extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gS extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&pS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=I_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=N_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Di(this.mutations,e.mutations,(n,r)=>bm(n,r))&&Di(this.baseMutations,e.baseMutations,(n,r)=>bm(n,r))}}class mf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return iS}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new mf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,_e;function ES(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function V_(t){if(t===void 0)return Cn("GRPC error has no .code"),F.UNKNOWN;switch(t){case qe.OK:return F.OK;case qe.CANCELLED:return F.CANCELLED;case qe.UNKNOWN:return F.UNKNOWN;case qe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case qe.INTERNAL:return F.INTERNAL;case qe.UNAVAILABLE:return F.UNAVAILABLE;case qe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case qe.NOT_FOUND:return F.NOT_FOUND;case qe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case qe.ABORTED:return F.ABORTED;case qe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case qe.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(_e=qe||(qe={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new nr([4294967295,4294967295],0);function Om(t){const e=wS().encode(t),n=new Wv;return n.update(e),new Uint8Array(n.digest())}function jm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nr([n,r],0),new nr([i,s],0)]}class gf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ss(`Invalid padding: ${n}`);if(r<0)throw new Ss(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ss(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ss(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(nr.fromNumber(r)));return i.compare(TS)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Om(e),[r,i]=jm(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gf(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Om(e),[r,i]=jm(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ss extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,So.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ol(ie.min(),i,new Fe(ge),Rn(),ye())}}class So{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new So(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class D_{constructor(e,n){this.targetId=e,this.Ce=n}}class b_{constructor(e,n,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Fm{constructor(){this.ve=0,this.Fe=Um(),this.Me=ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ye(),n=ye(),r=ye();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:s})}}),new So(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Um()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.Je=sa(),this.He=sa(),this.Ye=new Fe(ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Gc(s))if(r===0){const o=new J(s.path);this.et(n,o,yt.newNoDocument(o,ie.min()))}else Te(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ur(r).toUint8Array()}catch(u){if(u instanceof i_)return Vi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new gf(o,i,s)}catch(u){return Vi(u instanceof Ss?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Gc(l.target)){const u=new J(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,yt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ye();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ol(e,n,this.Ye,this.je,r);return this.je=Rn(),this.Je=sa(),this.He=sa(),this.Ye=new Fe(ge),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Fm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Je(ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Je(ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function sa(){return new Fe(J.comparator)}function Um(){return new Fe(J.comparator)}const IS={asc:"ASCENDING",desc:"DESCENDING"},SS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AS={and:"AND",or:"OR"};class CS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yc(t,e){return t.useProto3Json||kl(e)?e:{value:e}}function ol(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RS(t,e){return ol(t,e.toTimestamp())}function fn(t){return Te(!!t,49232),ie.fromTimestamp(function(n){const r=lr(n);return new De(r.seconds,r.nanos)}(t))}function yf(t,e){return Jc(t,e).canonicalString()}function Jc(t,e){const n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L_(t){const e=Ae.fromString(t);return Te(B_(e),10190,{key:e.toString()}),e}function Zc(t,e){return yf(t.databaseId,e.path)}function Fu(t,e){const n=L_(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(j_(n))}function O_(t,e){return yf(t.databaseId,e)}function PS(t){const e=L_(t);return e.length===4?Ae.emptyPath():j_(e)}function eh(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function j_(t){return Te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Bm(t,e,n){return{name:Zc(t,e),fields:n.value.mapValue.fields}}function NS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ne(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(Te(d===void 0||typeof d=="string",58123),ht.fromBase64String(d||"")):(Te(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ht.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?F.UNKNOWN:V_(h.code);return new Q(d,h.message||"")}(o);n=new b_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fu(t,r.document.name),s=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):ie.min(),l=new Ft({mapValue:{fields:r.document.fields}}),u=yt.newFoundDocument(i,s,o,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Ia(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fu(t,r.document),s=r.readTime?fn(r.readTime):ie.min(),o=yt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Ia([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fu(t,r.document),s=r.removedTargetIds||[];n=new Ia([],s,i,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _S(i,s),l=r.targetId;n=new D_(l,o)}}return n}function kS(t,e){let n;if(e instanceof Io)n={update:Bm(t,e.key,e.value)};else if(e instanceof pf)n={delete:Zc(t,e.key)};else if(e instanceof Hr)n={update:Bm(t,e.key,e.data),updateMask:US(e.fieldMask)};else{if(!(e instanceof gS))return ne(16599,{Vt:e.type});n={verify:Zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof po)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof go)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne(27497)}(t,e.precondition)),n}function VS(t,e){return t&&t.length>0?(Te(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?fn(i.updateTime):fn(s);return o.isEqual(ie.min())&&(o=fn(s)),new dS(o,i.transformResults||[])}(n,e))):[]}function DS(t,e){return{documents:[O_(t,e.path)]}}function bS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O_(t,i);const s=function(h){if(h.length!==0)return U_(en.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(d=>function(_){return{field:ei(_.field),direction:OS(_.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Yc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function MS(t){let e=PS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const _=F_(p);return _ instanceof en&&p_(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(_=>function(N){return new fo(ti(N.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,kl(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(p){const _=!!p.before,C=p.values||[];return new il(C,_)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const _=!p.before,C=p.values||[];return new il(C,_)}(n.endAt)),ZI(e,i,o,s,l,"F",u,h)}function LS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ti(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ti(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ti(n.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ti(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(ti(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return en.create(n.compositeFilter.filters.map(r=>F_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function OS(t){return IS[t]}function jS(t){return SS[t]}function FS(t){return AS[t]}function ei(t){return{fieldPath:t.canonicalString()}}function ti(t){return lt.fromServerFormat(t.fieldPath)}function U_(t){return t instanceof We?function(n){if(n.op==="=="){if(Rm(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NAN"}};if(Cm(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rm(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NAN"}};if(Cm(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(n.field),op:jS(n.op),value:n.value}}}(t):t instanceof en?function(n){const r=n.getFilters().map(i=>U_(i));return r.length===1?r[0]:{compositeFilter:{op:FS(n.op),filters:r}}}(t):ne(54877,{filter:t})}function US(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function B_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r,i,s=ie.min(),o=ie.min(),l=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.yt=e}}function zS(t){const e=MS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.Cn=new qS}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ar.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class qS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Je(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},z_=41943040;class It{static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(z_,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Li(0)}static cr(){return new Li(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="LruGarbageCollector",HS=1048576;function qm([t,e],[n,r]){const i=ge(t,n);return i===0?ge(e,r):i}class WS{constructor(e){this.Ir=e,this.buffer=new Je(qm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G($m,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hi(n)?G($m,"Ignoring IndexedDB error during garbage collection: ",n):await qi(n)}await this.Vr(3e5)})}}class GS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Nl.ce);const r=new WS(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(zm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zm):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Jr()<=Ee.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function KS(t,e){return new GS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.changes=new qr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fs(r.mutation,i,Xt.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Pr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Is();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Pr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Rn();const o=js(),l=function(){return js()}();return n.forEach((u,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Hr)?s=s.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Fs(d.mutation,h,d.mutation.getFieldMask(),De.now())):o.set(h.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>l.set(h,new YS(d,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=js();let i=new Fe((o,l)=>o-l),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||Xt.empty();d=l.applyToLocalView(h,d),r.set(u,d);const p=(i.get(l.batchId)||ye()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=I_();d.forEach(_=>{if(!s.has(_)){const C=N_(n.get(_),r.get(_));C!==null&&p.set(_,C),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):__(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Pr());let l=lo,u=s;return o.next(h=>U.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(_=>{u=u.insert(d,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ye())).next(d=>({batchId:l,changes:x_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Is();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Is();return this.indexManager.getCollectionParents(e,s).next(l=>U.forEach(l,u=>{const h=function(p,_){return new Wi(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,yt.newInvalidDocument(d)))});let l=Is();return o.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Fs(d.mutation,h,Xt.empty(),De.now()),bl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:zS(i.bundledQuery),readTime:fn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.overlays=new Fe(J.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pr();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Pr(),s=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Pr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Pr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=i)););return U.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vS(n,r));let s=this.qr.get(n);s===void 0&&(s=ye(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Qr=new Je(tt.$r),this.Ur=new Je(tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new tt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Ae([])),r=new tt(n,e),i=new tt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Ae([])),r=new tt(n,e),i=new tt(n,e+1);let s=ye();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new tt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ge(e.Yr,n.Yr)}static Kr(e,n){return ge(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Je(tt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yS(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new tt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?lf:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),i=new tt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(ge);return n.forEach(i=>{const s=new tt(i,0),o=new tt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new tt(new J(s),0);let l=new Je(ge);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Yr)),!0)},o),U.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,i=>{const s=new tt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new tt(n,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.ri=e,this.docs=function(){return new Fe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rn();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||kI(NI(d),r)<=0||(i.has(d.key)||bl(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new iA(this)}getSize(e){return U.resolve(this.size)}}class iA extends XS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.persistence=e,this.si=new qr(n=>hf(n),ff),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.oi=0,this._i=new vf,this.targetCount=0,this.ai=Li.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Li(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nl(0),this.li=!1,this.li=!0,this.hi=new tA,this.referenceDelegate=e(this),this.Pi=new sA(this),this.indexManager=new $S,this.remoteDocumentCache=function(i){return new rA(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new BS(n),this.Ii=new ZS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new nA(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new oA(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class oA extends DI{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Ri=new vf,this.Vi=null}static mi(e){return new _f(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const i=J.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class al{constructor(e,n){this.persistence=e,this.pi=new qr(r=>LI(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=KS(this,n)}static mi(e,n){return new al(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,ie.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wa(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ef(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return JT()?8:bI(XT())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new aA;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Jr()<=Ee.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Jr()<=Ee.DEBUG&&G("QueryEngine","Query:",Zr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Jr()<=Ee.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):U.resolve())}ys(e,n){if(Vm(n))return U.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xc(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,Xc(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return Vm(n)||i.isEqual(ie.min())?U.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?U.resolve(null):(Jr()<=Ee.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zr(n)),this.vs(e,o,n,PI(i,lo)).next(l=>l))})}Ds(e,n){let r=new Je(w_(e));return n.forEach((i,s)=>{bl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Jr()<=Ee.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Zr(n)),this.ps.getDocumentsMatchingQuery(e,n,ar.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="LocalStore",uA=3e8;class cA{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Fe(ge),this.xs=new qr(s=>hf(s),ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function hA(t,e,n,r){return new cA(t,e,n,r)}async function q_(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ye();for(const h of i){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function fA(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,_=p.keys();let C=U.resolve();return _.forEach(N=>{C=C.next(()=>d.getEntry(u,N)).next(P=>{const D=h.docVersions.get(N);Te(D!==null,48541),P.version.compareTo(D)<0&&(p.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),d.addEntry(P)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ye();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function H_(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function dA(t,e){const n=se(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((d,p)=>{const _=i.get(p);if(!_)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let C=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(ht.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(d.resumeToken,r)),i=i.insert(p,C),function(P,D,A){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=uA?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(_,C,d)&&l.push(n.Pi.updateTargetData(s,C))});let u=Rn(),h=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(pA(s,o,e.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!r.isEqual(ie.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return U.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=i,s))}function pA(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):G(wf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function mA(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gA(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function th(t,e,n){const r=se(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Hi(o))throw o;G(wf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Hm(t,e,n){const r=se(t);let i=ie.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const p=se(u),_=p.xs.get(d);return _!==void 0?U.resolve(p.Ms.get(_)):p.Pi.getTargetData(h,d)}(r,o,cn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ie.min(),n?s:ye())).next(l=>(yA(r,tS(e),l),{documents:l,Qs:s})))}function yA(t,e,n){let r=t.Os.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Wm{constructor(){this.activeTargetIds=aS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vA{constructor(){this.Mo=new Wm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="ConnectivityMonitor";class Gm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(Qm,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){G(Qm,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa=null;function nh(){return oa===null?oa=function(){return 268435456+Math.round(2147483648*Math.random())}():oa++,"0x"+oa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="RestConnection",EA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===nl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=nh(),l=this.zo(e,n.toUriEncodedString());G(Uu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:h}=new URL(l),d=rf(h);return this.Jo(e,l,u,r,d).then(p=>(G(Uu,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Vi(Uu,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$i}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=EA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class xA extends wA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=nh();return new Promise((l,u)=>{const h=new Qv;h.setWithCredentials(!0),h.listenOnce(Gv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ea.NO_ERROR:const p=h.getResponseJson();G(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Ea.TIMEOUT:G(pt,`RPC '${e}' ${o} timed out`),u(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ea.HTTP_ERROR:const _=h.getStatus();if(G(pt,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const N=C==null?void 0:C.error;if(N&&N.status&&N.message){const P=function(A){const x=A.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(N.status);u(new Q(P,N.message))}else u(new Q(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{G(pt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);G(pt,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",d,r,15)})}T_(e,n,r){const i=nh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Yv(),l=Xv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");G(pt,`Creating RPC '${e}' stream ${i}: ${d}`,u);const p=o.createWebChannel(d,u);this.I_(p);let _=!1,C=!1;const N=new TA({Yo:D=>{C?G(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(G(pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),G(pt,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},Zo:()=>p.close()}),P=(D,A,x)=>{D.listen(A,R=>{try{x(R)}catch(L){setTimeout(()=>{throw L},0)}})};return P(p,xs.EventType.OPEN,()=>{C||(G(pt,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),P(p,xs.EventType.CLOSE,()=>{C||(C=!0,G(pt,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(p))}),P(p,xs.EventType.ERROR,D=>{C||(C=!0,Vi(pt,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),N.a_(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),P(p,xs.EventType.MESSAGE,D=>{var A;if(!C){const x=D.data[0];Te(!!x,16349);const R=x,L=(R==null?void 0:R.error)||((A=R[0])==null?void 0:A.error);if(L){G(pt,`RPC '${e}' stream ${i} received error:`,L);const z=L.status;let q=function(g){const T=qe[g];if(T!==void 0)return V_(T)}(z),I=L.message;q===void 0&&(q=F.INTERNAL,I="Unknown error status: "+z+" with message "+L.message),C=!0,N.a_(new Q(q,I)),p.close()}else G(pt,`RPC '${e}' stream ${i} received:`,x),N.u_(x)}}),P(l,Kv.STAT_EVENT,D=>{D.stat===$c.PROXY?G(pt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===$c.NOPROXY&&G(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){return new CS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="PersistentStream";class Q_{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Cn(n.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(Km,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(G(Km,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IA extends Q_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NS(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?fn(o.readTime):ie.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=eh(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Gc(u)?{documents:DS(s,u)}:{query:bS(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=M_(s,o.resumeToken);const h=Yc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=ol(s,o.snapshotVersion.toTimestamp());const h=Yc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=LS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=eh(this.serializer),n.removeTarget=e,this.q_(n)}}class SA extends Q_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=VS(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=eh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kS(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{}class CA extends AA{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Jc(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(F.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Jc(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class RA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cn(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="RemoteStore";class PA{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Wr(this)&&(G(jr,"Restarting streams for network reachability change."),await async function(u){const h=se(u);h.Ea.add(4),await Ao(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Fl(h)}(this))})}),this.Ra=new RA(r,i)}}async function Fl(t){if(Wr(t))for(const e of t.da)await e(!0)}async function Ao(t){for(const e of t.da)await e(!1)}function G_(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sf(n)?If(n):Qi(n).O_()&&xf(n,e))}function Tf(t,e){const n=se(t),r=Qi(n);n.Ia.delete(e),r.O_()&&K_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Wr(n)&&n.Ra.set("Unknown"))}function xf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qi(t).Y_(e)}function K_(t,e){t.Va.Ue(e),Qi(t).Z_(e)}function If(t){t.Va=new xS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qi(t).start(),t.Ra.ua()}function Sf(t){return Wr(t)&&!Qi(t).x_()&&t.Ia.size>0}function Wr(t){return se(t).Ea.size===0}function X_(t){t.Va=void 0}async function NA(t){t.Ra.set("Online")}async function kA(t){t.Ia.forEach((e,n)=>{xf(t,e)})}async function VA(t,e){X_(t),Sf(t)?(t.Ra.ha(e),If(t)):t.Ra.set("Unknown")}async function DA(t,e,n){if(t.Ra.set("Online"),e instanceof b_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){G(jr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ll(t,r)}else if(e instanceof Ia?t.Va.Ze(e):e instanceof D_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ie.min()))try{const r=await H_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(ht.EMPTY_BYTE_STRING,d.snapshotVersion)),K_(s,u);const p=new qn(d.target,u,h,d.sequenceNumber);xf(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(jr,"Failed to raise snapshot:",r),await ll(t,r)}}async function ll(t,e,n){if(!Hi(e))throw e;t.Ea.add(1),await Ao(t),t.Ra.set("Offline"),n||(n=()=>H_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(jr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fl(t)})}function Y_(t,e){return e().catch(n=>ll(t,n,e))}async function Ul(t){const e=se(t),n=hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lf;for(;bA(e);)try{const i=await mA(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,MA(e,i)}catch(i){await ll(e,i)}J_(e)&&Z_(e)}function bA(t){return Wr(t)&&t.Ta.length<10}function MA(t,e){t.Ta.push(e);const n=hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function J_(t){return Wr(t)&&!hr(t).x_()&&t.Ta.length>0}function Z_(t){hr(t).start()}async function LA(t){hr(t).ra()}async function OA(t){const e=hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function jA(t,e,n){const r=t.Ta.shift(),i=mf.from(r,e,n);await Y_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ul(t)}async function FA(t,e){e&&hr(t).X_&&await async function(r,i){if(function(o){return ES(o)&&o!==F.ABORTED}(i.code)){const s=r.Ta.shift();hr(r).B_(),await Y_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ul(r)}}(t,e),J_(t)&&Z_(t)}async function Xm(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),G(jr,"RemoteStore received new credentials");const r=Wr(n);n.Ea.add(3),await Ao(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fl(n)}async function UA(t,e){const n=se(t);e?(n.Ea.delete(2),await Fl(n)):e||(n.Ea.add(2),await Ao(n),n.Ra.set("Unknown"))}function Qi(t){return t.ma||(t.ma=function(n,r,i){const s=se(n);return s.sa(),new IA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:NA.bind(null,t),t_:kA.bind(null,t),r_:VA.bind(null,t),H_:DA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Sf(t)?If(t):t.Ra.set("Unknown")):(await t.ma.stop(),X_(t))})),t.ma}function hr(t){return t.fa||(t.fa=function(n,r,i){const s=se(n);return s.sa(),new SA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:LA.bind(null,t),r_:FA.bind(null,t),ta:OA.bind(null,t),na:jA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ul(t)):(await t.fa.stop(),t.Ta.length>0&&(G(jr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Af(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(t,e){if(Cn("AsyncQueue",`${e}: ${t}`),Hi(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{static emptySet(e){return new wi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Is(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.ga=new Fe(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oi{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Oi(e,n,wi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class zA{constructor(){this.queries=Jm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=se(n),s=i.queries;i.queries=Jm(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Jm(){return new qr(t=>E_(t),Dl)}async function $A(t,e){const n=se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new BA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Cf(o,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Rf(n)}async function qA(t,e){const n=se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HA(t,e){const n=se(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&Rf(n)}function WA(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Rf(t){t.Ca.forEach(e=>{e.next()})}var rh,Zm;(Zm=rh||(rh={})).Ma="default",Zm.Cache="cache";class QA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.key=e}}class t0{constructor(e){this.key=e}}class GA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ye(),this.mutatedKeys=ye(),this.eu=w_(e),this.tu=new wi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ym,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const _=i.get(d),C=bl(this.query,p)?p:null,N=!!_&&this.mutatedKeys.has(_.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;_&&C?_.data.isEqual(C.data)?N!==P&&(r.track({type:3,doc:C}),D=!0):this.su(_,C)||(r.track({type:2,doc:C}),D=!0,(u&&this.eu(C,u)>0||h&&this.eu(C,h)<0)&&(l=!0)):!_&&C?(r.track({type:0,doc:C}),D=!0):_&&!C&&(r.track({type:1,doc:_}),D=!0,(u||h)&&(l=!0)),D&&(C?(o=o.add(C),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(C,N){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:D})}};return P(C)-P(N)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Oi(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ym,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ye(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new t0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new e0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pf="SyncEngine";class KA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XA{constructor(e){this.key=e,this.hu=!1}}class YA{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qr(l=>E_(l),Dl),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(J.comparator),this.Au=new Map,this.Ru=new vf,this.Vu={},this.mu=new Map,this.fu=Li.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JA(t,e,n=!0){const r=a0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await n0(r,e,n,!0),i}async function ZA(t,e){const n=a0(t);await n0(n,e,!0,!1)}async function n0(t,e,n,r){const i=await gA(t.localStore,cn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await eC(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&G_(t.remoteStore,i),l}async function eC(t,e,n,r,i){t.pu=(p,_,C)=>async function(P,D,A,x){let R=D.view.ru(A);R.Cs&&(R=await Hm(P.localStore,D.query,!1).then(({documents:I})=>D.view.ru(I,R)));const L=x&&x.targetChanges.get(D.targetId),z=x&&x.targetMismatches.get(D.targetId)!=null,q=D.view.applyChanges(R,P.isPrimaryClient,L,z);return tg(P,D.targetId,q.au),q.snapshot}(t,p,_,C);const s=await Hm(t.localStore,e,!0),o=new GA(e,s.Qs),l=o.ru(s.documents),u=So.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);tg(t,n,h.au);const d=new KA(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function tC(t,e,n){const r=se(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Dl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await th(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Tf(r.remoteStore,i.targetId),ih(r,i.targetId)}).catch(qi)):(ih(r,i.targetId),await th(r.localStore,i.targetId,!0))}async function nC(t,e){const n=se(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tf(n.remoteStore,r.targetId))}async function rC(t,e,n){const r=cC(t);try{const i=await function(o,l){const u=se(o),h=De.now(),d=l.reduce((C,N)=>C.add(N.key),ye());let p,_;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let N=Rn(),P=ye();return u.Ns.getEntries(C,d).next(D=>{N=D,N.forEach((A,x)=>{x.isValidDocument()||(P=P.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,N)).next(D=>{p=D;const A=[];for(const x of l){const R=mS(x,p.get(x.key).overlayedDocument);R!=null&&A.push(new Hr(x.key,R,h_(R.value.mapValue),hn.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,A,l)}).next(D=>{_=D;const A=D.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(C,D.batchId,A)})}).then(()=>({batchId:_.batchId,changes:x_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Fe(ge)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,i.batchId,n),await Co(r,i.changes),await Ul(r.remoteStore)}catch(i){const s=Cf(i,"Failed to persist write");n.reject(s)}}async function r0(t,e){const n=se(t);try{const r=await dA(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Te(o.hu,14607):i.removedDocuments.size>0&&(Te(o.hu,42227),o.hu=!1))}),await Co(n,r,e)}catch(r){await qi(r)}}function eg(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=se(o);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const _ of p.Sa)_.va(l)&&(h=!0)}),h&&Rf(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iC(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Fe(J.comparator);o=o.insert(s,yt.newNoDocument(s,ie.min()));const l=ye().add(s),u=new Ol(ie.min(),new Map,new Fe(ge),o,l);await r0(r,u),r.du=r.du.remove(s),r.Au.delete(e),Nf(r)}else await th(r.localStore,e,!1).then(()=>ih(r,e,n)).catch(qi)}async function sC(t,e){const n=se(t),r=e.batch.batchId;try{const i=await fA(n.localStore,e);s0(n,r,null),i0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Co(n,i)}catch(i){await qi(i)}}async function oC(t,e,n){const r=se(t);try{const i=await function(o,l){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(Te(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);s0(r,e,n),i0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Co(r,i)}catch(i){await qi(i)}}function i0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function s0(t,e,n){const r=se(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ih(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||o0(t,r)})}function o0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Tf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Nf(t))}function tg(t,e,n){for(const r of n)r instanceof e0?(t.Ru.addReference(r.key,e),aC(t,r)):r instanceof t0?(G(Pf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||o0(t,r.key)):ne(19791,{wu:r})}function aC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(G(Pf,"New document in limbo: "+n),t.Eu.add(r),Nf(t))}function Nf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Ae.fromString(e)),r=t.fu.next();t.Au.set(r,new XA(n)),t.du=t.du.insert(n,r),G_(t.remoteStore,new qn(cn(v_(n.path)),r,"TargetPurposeLimboResolution",Nl.ce))}}async function Co(t,e,n){const r=se(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Ef.As(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const d=se(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(h,_=>U.forEach(_.Es,C=>d.persistence.referenceDelegate.addReference(p,_.targetId,C)).next(()=>U.forEach(_.ds,C=>d.persistence.referenceDelegate.removeReference(p,_.targetId,C)))))}catch(p){if(!Hi(p))throw p;G(wf,"Failed to update sequence numbers: "+p)}for(const p of h){const _=p.targetId;if(!p.fromCache){const C=d.Ms.get(_),N=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(_,P)}}}(r.localStore,s))}async function lC(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){G(Pf,"User change. New user:",e.toKey());const r=await q_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new Q(F.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Co(n,r.Ls)}}function uC(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return ye().add(r.key);{let i=ye();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function a0(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iC.bind(null,e),e.Pu.H_=HA.bind(null,e.eventManager),e.Pu.yu=WA.bind(null,e.eventManager),e}function cC(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oC.bind(null,e),e}class ul{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return hA(this.persistence,new lA,e.initialUser,this.serializer)}Cu(e){return new $_(_f.mi,this.serializer)}Du(e){return new vA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ul.provider={build:()=>new ul};class hC extends ul{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Te(this.persistence.referenceDelegate instanceof al,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new $_(r=>al.mi(r,n),this.serializer)}}class sh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lC.bind(null,this.syncEngine),await UA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zA}()}createDatastore(e){const n=jl(e.databaseInfo.databaseId),r=function(s){return new xA(s)}(e.databaseInfo);return function(s,o,l,u){return new CA(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new PA(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>eg(this.syncEngine,n,0),function(){return Gm.v()?new Gm:new _A}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,d){const p=new YA(i,s,o,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=se(i);G(jr,"RemoteStore shutting down."),s.Ea.add(5),await Ao(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}sh.provider={build:()=>new sh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class dC{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mt.UNAUTHENTICATED,this.clientId=af.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G(fr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(fr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zu(t,e){t.asyncQueue.verifyOperationInProgress(),G(fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await q_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ng(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pC(t);G(fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xm(e.remoteStore,i)),t._onlineComponents=e}async function pC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(fr,"Using user provided OfflineComponentProvider");try{await zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vi("Error using user provided cache. Falling back to memory cache: "+n),await zu(t,new ul)}}else G(fr,"Using default OfflineComponentProvider"),await zu(t,new hC(void 0));return t._offlineComponents}async function l0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(fr,"Using user provided OnlineComponentProvider"),await ng(t,t._uninitializedComponentsProvider._online)):(G(fr,"Using default OnlineComponentProvider"),await ng(t,new sh))),t._onlineComponents}function mC(t){return l0(t).then(e=>e.syncEngine)}async function gC(t){const e=await l0(t),n=e.eventManager;return n.onListen=JA.bind(null,e.syncEngine),n.onUnlisten=tC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nC.bind(null,e.syncEngine),n}function yC(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const d=new fC({next:_=>{d.Nu(),o.enqueueAndForget(()=>qA(s,p)),_.fromCache&&u.source==="server"?h.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new QA(l,d,{includeMetadataChanges:!0,qa:!0});return $A(s,p)}(await gC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="firestore.googleapis.com",ig=!0;class sg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c0,this.ssl=ig}else this.host=e.host,this.ssl=e.ssl??ig;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=z_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HS)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vI;switch(r.type){case"firstParty":return new TI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rg.get(n);r&&(G("ComponentProvider","Removing Datastore"),rg.delete(n),r.terminate())}(this),Promise.resolve()}}function vC(t,e,n,r={}){var h;t=ao(t,Bl);const i=rf(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(HT(`https://${l}`),KT("Firestore",!0)),s.host!==c0&&s.host!==l&&Vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Ja(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=mt.MOCK_USER;else{d=WT(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new mt(_)}t._authCredentials=new _I(new Zv(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qr(this.firestore,e,this._query)}}class rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(xo(n,rt._jsonSchema))return new rt(e,r||null,new J(Ae.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:Qe("string",rt._jsonSchemaVersion),referencePath:Qe("string")};class ir extends Qr{constructor(e,n,r){super(e,n,v_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new J(e))}withConverter(e){return new ir(this.firestore,e,this._path)}}function zl(t,e,...n){if(t=ki(t),e_("collection","path",e),t instanceof Bl){const r=Ae.fromString(e,...n);return vm(r),new ir(t,null,r)}{if(!(t instanceof rt||t instanceof ir))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return vm(r),new ir(t.firestore,null,r)}}function kf(t,e,...n){if(t=ki(t),arguments.length===1&&(e=af.newId()),e_("doc","path",e),t instanceof Bl){const r=Ae.fromString(e,...n);return ym(r),new rt(t,null,new J(r))}{if(!(t instanceof rt||t instanceof ir))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return ym(r),new rt(t.firestore,t instanceof ir?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="AsyncQueue";class ag{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W_(this,"async_queue_retry"),this._c=()=>{const r=Bu();r&&G(og,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hi(e))throw e;G(og,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Cn("INTERNAL UNHANDLED ERROR: ",lg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Af.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:lg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function lg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class $l extends Bl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ag,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ag(e),this._firestoreClient=void 0,await e}}}function _C(t,e){const n=typeof t=="object"?t:sI(),r=typeof t=="string"?t:nl,i=eI(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=$T("firestore");s&&vC(i,...s)}return i}function h0(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EC(t),t._firestoreClient}function EC(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,h,d){return new FI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,u0(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new dC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ut(ht.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ut(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ut._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xo(e,Ut._jsonSchema))return Ut.fromBase64String(e.bytes)}}Ut._jsonSchemaVersion="firestore/bytes/1.0",Ut._jsonSchema={type:Qe("string",Ut._jsonSchemaVersion),bytes:Qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dn._jsonSchemaVersion}}static fromJSON(e){if(xo(e,dn._jsonSchema))return new dn(e.latitude,e.longitude)}}dn._jsonSchemaVersion="firestore/geoPoint/1.0",dn._jsonSchema={type:Qe("string",dn._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xo(e,pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pn(e.vectorValues);throw new Q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pn._jsonSchemaVersion="firestore/vectorValue/1.0",pn._jsonSchema={type:Qe("string",pn._jsonSchemaVersion),vectorValues:Qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=/^__.*__$/;class TC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Io(e,this.data,n,this.fieldTransforms)}}function f0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class bf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(f0(this.Ac)&&wC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jl(e)}Cc(e,n,r,i=!1){return new bf({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d0(t){const e=t._freezeSettings(),n=jl(t._databaseId);return new xC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IC(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);g0("Data must be an object, but it was:",o,r);const l=p0(r,o);let u,h;if(s.merge)u=new Xt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const _=AC(e,p,n);if(!o.contains(_))throw new Q(F.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);RC(d,_)||d.push(_)}u=new Xt(d),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new TC(new Ft(l),u,h)}class Mf extends Df{_toFieldTransform(e){return new hS(e.path,new po)}isEqual(e){return e instanceof Mf}}function SC(t,e,n,r=!1){return Lf(n,t.Cc(r?4:3,e))}function Lf(t,e){if(m0(t=ki(t)))return g0("Unsupported field value:",e,t),p0(t,e);if(t instanceof Df)return function(r,i){if(!f0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Lf(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ki(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=De.fromDate(r);return{timestampValue:ol(i.serializer,s)}}if(r instanceof De){const s=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ol(i.serializer,s)}}if(r instanceof dn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ut)return{bytesValue:M_(i.serializer,r._byteString)};if(r instanceof rt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pn)return function(o,l){return{mapValue:{fields:{[u_]:{stringValue:c_},[rl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return df(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Pl(r)}`)}(t,e)}function p0(t,e){const n={};return r_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$r(t,(r,i)=>{const s=Lf(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function m0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof dn||t instanceof Ut||t instanceof rt||t instanceof Df||t instanceof pn)}function g0(t,e,n){if(!m0(n)||!t_(n)){const r=Pl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function AC(t,e,n){if((e=ki(e))instanceof Vf)return e._internalPath;if(typeof e=="string")return y0(t,e);throw cl("Field path arguments must be of type string or ",t,!1,void 0,n)}const CC=new RegExp("[~\\*/\\[\\]]");function y0(t,e,n){if(e.search(CC)>=0)throw cl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vf(...e.split("."))._internalPath}catch{throw cl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Q(F.INVALID_ARGUMENT,l+t+u)}function RC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Of("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PC extends v0{data(){return super.data()}}function Of(t,e){return typeof e=="string"?y0(t,e):e instanceof Vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jf{}class _0 extends jf{}function E0(t,e,...n){let r=[];e instanceof jf&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Uf).length,l=s.filter(u=>u instanceof Ff).length;if(o>1||o>0&&l>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ff extends _0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ff(e,n,r)}_apply(e){const n=this._parse(e);return T0(e._query,n),new Qr(e.firestore,e.converter,Kc(e._query,n))}_parse(e){const n=d0(e.firestore);return function(s,o,l,u,h,d,p){let _;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){cg(p,d);const N=[];for(const P of p)N.push(ug(u,s,P));_={arrayValue:{values:N}}}else _=ug(u,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||cg(p,d),_=SC(l,o,p,d==="in"||d==="not-in");return We.create(h,d,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Uf extends jf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:en.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)T0(o,u),o=Kc(o,u)}(e._query,n),new Qr(e.firestore,e.converter,Kc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bf extends _0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Bf(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fo(s,o)}(e._query,this._field,this._direction);return new Qr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Wi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function w0(t,e="asc"){const n=e,r=Of("orderBy",t);return Bf._create(r,n)}function ug(t,e,n){if(typeof(n=ki(n))=="string"){if(n==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__(e)&&n.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!J.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Am(t,new J(r))}if(n instanceof rt)return Am(t,n._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pl(n)}.`)}function cg(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T0(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kC{convertValue(e,n="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $r(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[rl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>ze(o.doubleValue));return new pn(n)}convertGeoPoint(e){return new dn(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uo(e));default:return null}}convertTimestamp(e){const n=lr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);Te(B_(r),9688,{name:e});const i=new co(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||Cn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ti extends v0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Of("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ti._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ti._jsonSchema={type:Qe("string",Ti._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class Sa extends Ti{data(e={}){return super.data(e)}}class xi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new aa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Sa(this._firestore,this._userDataWriter,r.key,r,new aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Sa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new aa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Sa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new aa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:DC(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=af.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}xi._jsonSchemaVersion="firestore/querySnapshot/1.0",xi._jsonSchema={type:Qe("string",xi._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class bC extends kC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function x0(t){t=ao(t,Qr);const e=ao(t.firestore,$l),n=h0(e),r=new bC(e);return NC(t._query),yC(n,t._query).then(i=>new xi(e,r,t,i))}function I0(t){return A0(ao(t.firestore,$l),[new pf(t._key,hn.none())])}function S0(t,e){const n=ao(t.firestore,$l),r=kf(t),i=VC(t.converter,e);return A0(n,[IC(d0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function A0(t,e){return function(r,i){const s=new rr;return r.asyncQueue.enqueueAndForget(async()=>rC(await mC(r),i,s)),s.promise}(h0(t),e)}function C0(){return new Mf("serverTimestamp")}(function(e,n=!0){(function(i){$i=i})(iI),el(new so("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new $l(new EI(r.getProvider("auth-internal")),new xI(o,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new co(h.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ei(dm,pm,e),Ei(dm,pm,"esm2020")})();const MC={apiKey:"AIzaSyBUabFVbZsdvJxSNLz9E6uooOHmHAYztMQ",authDomain:"numerical-web-fe12a.firebaseapp.com",projectId:"numerical-web-fe12a",storageBucket:"numerical-web-fe12a.appspot.com",messagingSenderId:"450601861029",appId:"1:450601861029:web:8ad42bf62f220abb7a324c"},LC=$v(MC),Gi=_C(LC),zf="problems_bisection";async function OC(){const t=E0(zl(Gi,zf),w0("createdAt","desc"));return(await x0(t)).docs.map(n=>({id:n.id,...n.data()}))}async function jC(t){return S0(zl(Gi,zf),{...t,method:"bisection",createdAt:C0()})}async function FC(t){return I0(kf(Gi,zf,t))}function UC(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,l]=j.useState(""),[u,h]=j.useState(""),[d,p]=j.useState([]),[_,C]=j.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=j.useState("-"),[D,A]=j.useState("-"),[x,R]=j.useState([]),[L,z]=j.useState(new Set),q=j.useRef(null);function I(V){if(!V||!V.trim())return null;let b=V.replace(/\^/g,"**");b=b.replace(/\bln\s*\(/gi,"log("),b=b.replace(/\bpi\b/gi,"PI"),b=b.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+b+"); }")}catch{return null}}function m(V,b,B,H,Z){let O=V(b),he=V(B);if(!isFinite(O)||!isFinite(he))return{error:"f(x) ไม่สามารถประเมินค่าได้"};if(O*he>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย"};const oe=[];let Ie=null;for(let ce=0;ce<=Z;ce++){const re=(b+B)/2,ve=V(re);let Re=null;if(Ie!==null){const me=Math.abs(re)>1e-12?Math.abs(re):1;Re=Math.abs(re-Ie)/me}if(oe.push({iter:ce,xl:b,xr:B,x1:re,fx1:ve,error:Re}),!isFinite(ve))return{error:"f(x1) คำนวณไม่ได้"};if(Math.abs(ve)===0||Re!==null&&Re<=H)return{root:re,iterations:oe,converged:!0};O*ve<0?(B=re,he=ve):(b=re,O=ve),Ie=re}return{root:(b+B)/2,iterations:oe,converged:!1}}function g(V){return V===null||Number.isNaN(V)?"-":isFinite(V)?Number(V).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(V)}function T(V,b,B,H){const Z=q.current,O=Z.getContext("2d"),he=Z.width,oe=Z.height;O.clearRect(0,0,he,oe),O.fillStyle="#061022",O.fillRect(0,0,he,oe);const Ie=(B-b)*.2||1,ce=b-Ie,re=B+Ie,ve=500;let Re=[],me=[],ee=1/0,fe=-1/0;for(let Y=0;Y<ve;Y++){const le=ce+(re-ce)*Y/(ve-1);let te;try{te=V(le)}catch{te=NaN}Re.push(le),me.push(te),isFinite(te)&&(te<ee&&(ee=te),te>fe&&(fe=te))}ee===1/0&&(ee=-1,fe=1);const Pe=(fe-ee)*.2||1;ee-=Pe,fe+=Pe;const Ne=Y=>(Y-ce)/(re-ce)*he,st=Y=>oe-(Y-ee)/(fe-ee)*oe;if(O.strokeStyle="rgba(255,255,255,0.1)",ee<0&&fe>0){const Y=st(0);O.beginPath(),O.moveTo(0,Y),O.lineTo(he,Y),O.stroke()}if(ce<0&&re>0){const Y=Ne(0);O.beginPath(),O.moveTo(Y,0),O.lineTo(Y,oe),O.stroke()}O.beginPath(),O.lineWidth=2,O.strokeStyle="#8ab4ff";let Ht=!1;for(let Y=0;Y<ve;Y++){const le=Re[Y],te=me[Y];if(!isFinite(te)){Ht=!1;continue}const Ze=Ne(le),gr=st(te);Ht?O.lineTo(Ze,gr):(O.moveTo(Ze,gr),Ht=!0)}O.stroke(),H.forEach(Y=>{const le=Ne(Y.x1),te=st(Y.fx1);O.beginPath(),O.arc(le,te,3,0,2*Math.PI),O.fillStyle="#f97316",O.fill()});const gn=(Y,le,te)=>{const Ze=Ne(Y);O.beginPath(),O.moveTo(Ze,0),O.lineTo(Ze,oe),O.strokeStyle=le,O.stroke(),O.fillStyle=le,O.font="12px sans-serif",O.fillText(te+"="+g(Y),Ze+6,18)};if(gn(b,"#22c55e","XL"),gn(B,"#ef4444","XR"),H.length){const Y=H[H.length-1],le=Ne(Y.x1),te=st(Y.fx1);O.beginPath(),O.arc(le,te,6,0,2*Math.PI),O.fillStyle="#fb923c",O.fill()}}async function v(){const V=await OC();R(V)}j.useEffect(()=>{v().catch(console.error),T(I("x"),-5,5,[])},[]);const S=async()=>{if(!t||!n||!i||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await jC({expr:t,xl:n,xr:i,tol:o,maxIter:u}),await v(),alert("บันทึกแล้ว!")}catch(V){console.error("บันทึกโจทย์ผิดพลาด:",V),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},w=V=>{e(V.expr??""),r(V.xl??""),s(V.xr??""),l(V.tol??""),h(V.maxIter??"")},X=async V=>{if(confirm(`ลบโจทย์นี้ไหม?
${V.expr}`))try{z(b=>new Set(b).add(V.id)),setTimeout(async()=>{await FC(V.id),await v(),z(b=>{const B=new Set(b);return B.delete(V.id),B})},480)}catch(b){console.error("ลบโจทย์ผิดพลาด:",b),alert("ลบไม่สำเร็จ"),z(B=>{const H=new Set(B);return H.delete(V.id),H})}},pe=()=>{const V=I(t);if(!V){C("สถานะ: สมการไม่ถูกต้อง");return}const b=parseFloat(n),B=parseFloat(i),H=parseFloat(o),Z=parseInt(u,10);if(isNaN(b)||isNaN(B)){C("สถานะ: XL/XR ไม่ถูกต้อง");return}if(b>=B){C("สถานะ: ต้องมี XL < XR");return}if(!isFinite(H)||H<=0){C("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(Z)||Z<=0){C("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const O=m(V,b,B,H,Z);if(O.error){C("สถานะ: "+O.error);return}p(O.iterations),C("สถานะ: เสร็จสิ้น "+(O.converged?"(converged)":"(ไม่ converged)")),A(Math.max(0,O.iterations.length-1)),P(g(O.root)),T(V,b,B,O.iterations)},ae=()=>{e(""),r(""),s(""),l(""),h(""),p([]),C("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-"),T(I("x"),-5,5,[])};return E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[E.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Bisection Method"}),E.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:V=>e(V.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),E.jsx("input",{type:"number",value:n,onChange:V=>r(V.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),E.jsx("input",{type:"number",value:i,onChange:V=>s(V.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),E.jsx("input",{type:"text",value:o,onChange:V=>l(V.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:u,onChange:V=>h(V.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:pe,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),E.jsx("button",{onClick:ae,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),E.jsx("button",{onClick:S,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"💾 บันทึกโจทย์นี้"}),E.jsxs("div",{className:"text-sm mb-2",children:[E.jsx("div",{children:_}),E.jsxs("div",{children:["Iterations: ",D]}),E.jsxs("div",{children:["Root: ",N]})]}),x.length>0&&E.jsxs("div",{className:"mt-2",children:[E.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"📘 โจทย์ที่บันทึกไว้:"}),E.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:x.map(V=>E.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${L.has(V.id)?"fade-out":""}`,children:[E.jsx("span",{className:"truncate",children:V.expr}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>w(V),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),E.jsx("button",{onClick:()=>X(V),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},V.id))})]})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),E.jsx("canvas",{ref:q,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),E.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = x1 ทุก iteration (วงใหญ่ = x1 สุดท้าย)"})]})]}),d.length>0&&E.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto fade-in-delay2",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"xl"}),E.jsx("th",{className:"p-2 text-right",children:"xr"}),E.jsx("th",{className:"p-2 text-right",children:"x1"}),E.jsx("th",{className:"p-2 text-right",children:"f(x1)"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:d.map(V=>E.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[E.jsx("td",{className:"p-2 text-right",children:V.iter}),E.jsx("td",{className:"p-2 text-right",children:g(V.xl)}),E.jsx("td",{className:"p-2 text-right",children:g(V.xr)}),E.jsx("td",{className:"p-2 text-right",children:g(V.x1)}),E.jsx("td",{className:"p-2 text-right",children:g(V.fx1)}),E.jsx("td",{className:"p-2 text-right",children:V.error===null?"-":g(V.error)})]},V.iter))})]})}),E.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© Numerical Web — ฝีมือคุณ"})]})}const $f="problems_falseposition";async function BC(){const t=E0(zl(Gi,$f),w0("createdAt","desc"));return(await x0(t)).docs.map(n=>({id:n.id,...n.data()}))}async function zC(t){return S0(zl(Gi,$f),{...t,method:"falseposition",createdAt:C0()})}async function $C(t){return I0(kf(Gi,$f,t))}function qC(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,l]=j.useState(""),[u,h]=j.useState(""),[d,p]=j.useState([]),[_,C]=j.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=j.useState("-"),[D,A]=j.useState("-"),[x,R]=j.useState([]),[L,z]=j.useState(new Set),q=j.useRef(null);function I(V){if(!V||!V.trim())return null;let b=V.replace(/\^/g,"**");b=b.replace(/\bln\s*\(/gi,"log("),b=b.replace(/\bpi\b/gi,"PI"),b=b.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+b+"); }")}catch{return null}}function m(V,b,B,H,Z){let O=V(b),he=V(B);if(!isFinite(O)||!isFinite(he))return{error:"f(x) ไม่สามารถประเมินค่าได้"};if(O*he>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย"};const oe=[];let Ie=null;for(let ce=0;ce<=Z;ce++){const re=(b*he-B*O)/(he-O),ve=V(re);let Re=null;if(Ie!==null){const me=Math.abs(re)>1e-12?Math.abs(re):1;Re=Math.abs(re-Ie)/me}if(oe.push({iter:ce,xl:b,xr:B,x1:re,fx1:ve,error:Re}),!isFinite(ve))return{error:"f(x1) คำนวณไม่ได้"};if(Math.abs(ve)===0||Re!==null&&Re<=H)return{root:re,iterations:oe,converged:!0};O*ve<0?(B=re,he=ve):(b=re,O=ve),Ie=re}return{root:(b*he-B*O)/(he-O),iterations:oe,converged:!1}}function g(V){return V===null||Number.isNaN(V)?"-":isFinite(V)?Number(V).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(V)}function T(V,b,B,H){const Z=q.current;if(!Z)return;const O=Z.getContext("2d"),he=Z.width,oe=Z.height;O.clearRect(0,0,he,oe),O.fillStyle="#0d1117",O.fillRect(0,0,he,oe);const Ie=(B-b)*.2||1,ce=b-Ie,re=B+Ie,ve=500;let Re=[],me=[],ee=1/0,fe=-1/0;for(let Y=0;Y<ve;Y++){const le=ce+(re-ce)*Y/(ve-1);let te;try{te=V(le)}catch{te=NaN}Re.push(le),me.push(te),isFinite(te)&&(te<ee&&(ee=te),te>fe&&(fe=te))}ee===1/0&&(ee=-1,fe=1);const Pe=(fe-ee)*.2||1;ee-=Pe,fe+=Pe;const Ne=Y=>(Y-ce)/(re-ce)*he,st=Y=>oe-(Y-ee)/(fe-ee)*oe;if(O.strokeStyle="rgba(255,255,255,0.15)",ee<0&&fe>0){const Y=st(0);O.beginPath(),O.moveTo(0,Y),O.lineTo(he,Y),O.stroke()}if(ce<0&&re>0){const Y=Ne(0);O.beginPath(),O.moveTo(Y,0),O.lineTo(Y,oe),O.stroke()}O.beginPath(),O.lineWidth=2,O.strokeStyle="#58a6ff";let Ht=!1;for(let Y=0;Y<ve;Y++){const le=Re[Y],te=me[Y];if(!isFinite(te)){Ht=!1;continue}const Ze=Ne(le),gr=st(te);Ht?O.lineTo(Ze,gr):(O.moveTo(Ze,gr),Ht=!0)}O.stroke(),H.forEach(Y=>{const le=Ne(Y.x1),te=st(Y.fx1);O.beginPath(),O.arc(le,te,3,0,2*Math.PI),O.fillStyle="#f97316",O.fill()});const gn=(Y,le,te)=>{const Ze=Ne(Y);O.beginPath(),O.moveTo(Ze,0),O.lineTo(Ze,oe),O.strokeStyle=le,O.stroke(),O.fillStyle=le,O.font="12px sans-serif",O.fillText(te+"="+g(Y),Ze+6,18)};if(gn(b,"#22c55e","XL"),gn(B,"#ef4444","XR"),H.length){const Y=H[H.length-1],le=Ne(Y.x1),te=st(Y.fx1);O.beginPath(),O.arc(le,te,6,0,2*Math.PI),O.fillStyle="#fb923c",O.fill()}}async function v(){const V=await BC();R(V)}j.useEffect(()=>{v().catch(console.error),T(I("x"),-5,5,[])},[]);const S=async()=>{if(!t||!n||!i||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await zC({expr:t,xl:n,xr:i,tol:o,maxIter:u}),await v(),alert("บันทึกแล้ว!")}catch(V){console.error("บันทึกโจทย์ผิดพลาด:",V),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},w=V=>{e(V.expr??""),r(V.xl??""),s(V.xr??""),l(V.tol??""),h(V.maxIter??"")},X=async V=>{if(confirm(`ลบโจทย์นี้ไหม?
${V.expr}`))try{z(b=>new Set(b).add(V.id)),setTimeout(async()=>{await $C(V.id),await v(),z(b=>{const B=new Set(b);return B.delete(V.id),B})},480)}catch(b){console.error("ลบโจทย์ผิดพลาด:",b),alert("ลบไม่สำเร็จ"),z(B=>{const H=new Set(B);return H.delete(V.id),H})}},pe=()=>{const V=I(t);if(!V){C("สถานะ: สมการไม่ถูกต้อง");return}const b=parseFloat(n),B=parseFloat(i),H=parseFloat(o),Z=parseInt(u,10);if(isNaN(b)||isNaN(B)){C("สถานะ: XL/XR ไม่ถูกต้อง");return}if(b>=B){C("สถานะ: ต้องมี XL < XR");return}if(!isFinite(H)||H<=0){C("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(Z)||Z<=0){C("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const O=m(V,b,B,H,Z);if(O.error){C("สถานะ: "+O.error);return}p(O.iterations),C("สถานะ: เสร็จสิ้น "+(O.converged?"(converged)":"(ไม่ converged)")),A(Math.max(0,O.iterations.length-1)),P(g(O.root)),T(V,b,B,O.iterations)},ae=()=>{e(""),r(""),s(""),l(""),h(""),p([]),C("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-"),T(I("x"),-5,5,[])};return E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[E.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"False Position Method"}),E.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-[#161b22] rounded-lg p-4 border border-[#30363d] fade-in-delay1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:V=>e(V.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] mb-3 text-gray-200"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),E.jsx("input",{type:"number",value:n,onChange:V=>r(V.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),E.jsx("input",{type:"number",value:i,onChange:V=>s(V.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),E.jsx("input",{type:"text",value:o,onChange:V=>l(V.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:u,onChange:V=>h(V.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:pe,className:"btn-primary glow-btn flex-1 py-2 rounded font-semibold",children:"คำนวณ"}),E.jsx("button",{onClick:ae,className:"btn-danger flex-1 border border-[#30363d] py-2 rounded",children:"รีเซ็ต"})]}),E.jsx("button",{onClick:S,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"💾 บันทึกโจทย์นี้"}),E.jsxs("div",{className:"text-sm mb-2",children:[E.jsx("div",{children:_}),E.jsxs("div",{children:["Iterations: ",D]}),E.jsxs("div",{children:["Root: ",N]})]}),x.length>0&&E.jsxs("div",{className:"mt-2",children:[E.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"📘 โจทย์ที่บันทึกไว้:"}),E.jsx("ul",{className:"text-xs text-gray-300 bg-[#0d1117] rounded p-2 max-h-48 overflow-auto border border-[#30363d]",children:x.map(V=>E.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-[#30363d] py-1 ${L.has(V.id)?"fade-out":""}`,children:[E.jsx("span",{className:"truncate",children:V.expr}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>w(V),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),E.jsx("button",{onClick:()=>X(V),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},V.id))})]})]}),E.jsxs("div",{className:"bg-[#161b22] rounded-lg p-4 border border-[#30363d] fade-in-delay2",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),E.jsx("canvas",{ref:q,width:800,height:320,className:"w-full h-72 bg-[#0d1117] rounded"}),E.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = X1 ทุก iteration (วงใหญ่ = X1 สุดท้าย)"})]})]}),d.length>0&&E.jsx("div",{className:"bg-[#161b22] rounded-lg p-4 border border-[#30363d] mt-6 overflow-auto fade-in-delay2",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-[#161b22] text-[#8b949e]",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"xl"}),E.jsx("th",{className:"p-2 text-right",children:"xr"}),E.jsx("th",{className:"p-2 text-right",children:"x1"}),E.jsx("th",{className:"p-2 text-right",children:"f(x1)"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:d.map(V=>E.jsxs("tr",{className:"border-b border-[#30363d] text-gray-100 hover:bg-[#1c2330]",children:[E.jsx("td",{className:"p-2 text-right",children:V.iter}),E.jsx("td",{className:"p-2 text-right",children:g(V.xl)}),E.jsx("td",{className:"p-2 text-right",children:g(V.xr)}),E.jsx("td",{className:"p-2 text-right",children:g(V.x1)}),E.jsx("td",{className:"p-2 text-right",children:g(V.fx1)}),E.jsx("td",{className:"p-2 text-right",children:V.error===null?"-":g(V.error)})]},V.iter))})]})}),E.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© Numerical Web — ฝีมือคุณ"})]})}function HC(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,l]=j.useState(""),[u,h]=j.useState([]),[d,p]=j.useState("สถานะ: ยังไม่ได้คำนวณ"),[_,C]=j.useState("-"),[N,P]=j.useState("-"),[D,A]=j.useState(null),[x,R]=j.useState("");function L(v){if(!v||!v.trim())return null;let S=v.replace(/\^/g,"**");S=S.replace(/\bln\s*\(/gi,"log("),S=S.replace(/\bpi\b/gi,"PI"),S=S.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+S+"); }")}catch{return null}}function z(v){return v===null?"-":isFinite(v)?Number(v).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(v)}function q(v,S){const w=Math.cbrt(Number.EPSILON)*(Math.abs(S)+1),X=v(S+w),pe=v(S-w);return(X-pe)/(2*w)}function I(v,S){try{const w=q(v,S);return!isFinite(w)||w===0?.5:1/Math.max(1,Math.abs(w))}catch{return .5}}function m(v,S,w,X,pe){let ae=[],V=S;ae.push({iter:0,x:V,error:null});for(let b=1;b<=X;b++){const B=V-pe*v(V),H=Math.abs((B-V)/B);if(ae.push({iter:b,x:B,error:H}),!isFinite(B))return{error:"ค่า x ไม่เป็นจำนวนจำกัด (อาจ Diverge)"};if(H<=w)return{root:B,iterations:ae,converged:!0,lambda:pe};V=B}return{root:ae[ae.length-1].x,iterations:ae,converged:!1,lambda:pe}}j.useEffect(()=>{const v=L(t),S=parseFloat(n);if(!v||!isFinite(S)){A(null),R("");return}const w=I(v,S);A(w);const X=t.replace(/\s+/g," ").trim();R(`f2(x) = x - (${w.toPrecision(6)}) * [ ${X||"f(x)"} ]`)},[t,n]);const g=()=>{const v=L(t);if(!v){p("สถานะ: f(x) ไม่ถูกต้อง");return}const S=parseFloat(n),w=parseFloat(i),X=parseInt(o,10);if(!isFinite(S)){p("สถานะ: ค่าเริ่มต้น x0 ไม่ถูกต้อง");return}if(!isFinite(w)||w<=0){p("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(X)||X<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const pe=I(v,S),ae=m(v,S,w,X,pe);if(ae.error){p("สถานะ: "+ae.error),h([]),P("-"),C("-");return}h(ae.iterations),p("สถานะ: เสร็จสิ้น "+(ae.converged?"(converged)":"(ไม่ converged)")),P(ae.iterations.length),C(z(ae.root)),A(ae.lambda);const V=t.replace(/\s+/g," ").trim();R(`f2(x) = x - (${ae.lambda.toPrecision(6)}) * [ ${V||"f(x)"} ]`)},T=()=>{e(""),r(""),s(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),C("-"),A(null),R("")};return E.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[E.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4",children:[E.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"One-Point Iteration"}),E.jsx("div",{className:"text-sm text-gray-400",children:"แปลง f(x) → f2(x) อัตโนมัติ"})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x)"}),E.jsx("input",{type:"text",value:t,onChange:v=>e(v.target.value),placeholder:"เช่น x^3 + x - 1,  sin(x) - x/2,  ln(x) - 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x0"}),E.jsx("input",{type:"number",value:n,onChange:v=>r(v.target.value),placeholder:"เช่น 0.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),E.jsx("input",{type:"text",value:i,onChange:v=>s(v.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:o,onChange:v=>l(v.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"rounded-md bg-slate-900 border border-slate-700 p-3 text-sm text-gray-300 mb-4",children:[E.jsx("div",{className:"font-semibold text-cyan-300 mb-1",children:"f2(x) ที่ใช้ในการคำนวณ"}),E.jsx("div",{className:"break-words",children:x||"— (กรอก f(x) และ x0 เพื่อดู f2(x))"}),D!==null&&E.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["λ (อัตโนมัติ) = ",z(D)]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:g,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),E.jsx("button",{onClick:T,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),E.jsxs("div",{className:"text-sm mb-3",children:[E.jsx("div",{children:d}),E.jsxs("div",{children:["Iterations: ",N]}),E.jsxs("div",{children:["Root: ",_]})]}),u.length>0&&E.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"x"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:u.map(v=>E.jsxs("tr",{className:"border-b border-slate-700",children:[E.jsx("td",{className:"p-2 text-right",children:v.iter}),E.jsx("td",{className:"p-2 text-right",children:z(v.x)}),E.jsx("td",{className:"p-2 text-right",children:v.error===null?"-":z(v.error)})]},v.iter))})]})}),E.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:[E.jsx("div",{children:"หมายเหตุ: ใช้หน่วยเรเดียนสำหรับ sin/cos/tan; เขียนคูณให้ชัด เช่น 2*x (ไม่ใช่ 2x)"}),E.jsx("div",{children:"ตัวอย่าง f(x): x^3 + x - 1,  e^(-x) - x,  ln(x) - 1,  sin(x) - x/2"})]})]})]})}function WC(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,l]=j.useState(""),[u,h]=j.useState([]),[d,p]=j.useState("สถานะ: ยังไม่ได้คำนวณ"),[_,C]=j.useState("-"),[N,P]=j.useState("-"),D=j.useRef(null);function A(m){if(!m||!m.trim())return null;let g=m.replace(/\^/g,"**");g=g.replace(/\bln\s*\(/gi,"log("),g=g.replace(/\bpi\b/gi,"PI"),g=g.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+g+"); }")}catch{return null}}function x(m,g){return(m(g+1e-6)-m(g-1e-6))/(2*1e-6)}function R(m,g,T,v){let S=[],w=g,X=m(w);S.push({iter:0,x:w,fx:X,error:null});for(let pe=1;pe<=v;pe++){let ae=x(m,w);if(ae===0)return{error:"f'(x) = 0 หารด้วยศูนย์ไม่ได้"};let V=w-X/ae,b=m(V),B=Math.abs(V-w)/Math.abs(V);if(S.push({iter:pe,x:V,fx:b,error:B}),Math.abs(b)<T||B<T)return{root:V,iterations:S,converged:!0};w=V,X=b}return{root:w,iterations:S,converged:!1}}function L(m){return m===null?"-":isFinite(m)?Number(m).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(m)}function z(m,g){const T=D.current,v=T.getContext("2d"),S=T.width,w=T.height;if(v.clearRect(0,0,S,w),v.fillStyle="#061022",v.fillRect(0,0,S,w),g.length===0)return;const X=g.map(me=>me.x),pe=g.map(me=>me.fx),ae=Math.min(...X),V=Math.max(...X),b=(V-ae)*.3||1,B=ae-b,H=V+b,Z=Math.min(...pe),O=Math.max(...pe),he=(O-Z)*.3||1,oe=Z-he,Ie=O+he,ce=me=>(me-B)/(H-B)*S,re=me=>w-(me-oe)/(Ie-oe)*w;if(v.strokeStyle="rgba(255,255,255,0.1)",oe<0&&Ie>0){const me=re(0);v.beginPath(),v.moveTo(0,me),v.lineTo(S,me),v.stroke()}if(B<0&&H>0){const me=ce(0);v.beginPath(),v.moveTo(me,0),v.lineTo(me,w),v.stroke()}v.beginPath(),v.lineWidth=2,v.strokeStyle="#8ab4ff";const ve=500;let Re=!1;for(let me=0;me<ve;me++){const ee=B+(H-B)*me/(ve-1);let fe;try{fe=m(ee)}catch{fe=NaN}if(!isFinite(fe)){Re=!1;continue}const Pe=ce(ee),Ne=re(fe);Re?v.lineTo(Pe,Ne):(v.moveTo(Pe,Ne),Re=!0)}v.stroke(),g.forEach((me,ee)=>{const fe=ce(me.x),Pe=re(me.fx);if(ee<g.length-1){const Ne=g[ee+1].x;v.beginPath(),v.moveTo(fe,Pe),v.lineTo(ce(Ne),re(0)),v.strokeStyle="#22c55e",v.setLineDash([4,4]),v.stroke(),v.setLineDash([])}v.beginPath(),v.moveTo(fe,Pe),v.lineTo(fe,re(0)),v.strokeStyle="rgba(255,255,255,0.2)",v.stroke(),v.fillStyle="#e2e8f0",v.font="12px sans-serif",v.fillText("x"+ee,fe-10,re(0)+14),v.beginPath(),v.arc(fe,Pe,ee===g.length-1?6:3,0,2*Math.PI),v.fillStyle=ee===g.length-1?"#fb923c":"#f97316",v.fill()})}const q=()=>{const m=A(t);if(!m){p("สถานะ: สมการไม่ถูกต้อง");return}const g=parseFloat(n),T=parseFloat(i),v=parseInt(o,10);if(isNaN(g)){p("สถานะ: x0 ไม่ถูกต้อง");return}if(!isFinite(T)||T<=0){p("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(v)||v<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const S=R(m,g,T,v);if(S.error){p("สถานะ: "+S.error);return}h(S.iterations),p("สถานะ: เสร็จสิ้น "+(S.converged?"(converged)":"(ไม่ converged)")),P(S.iterations.length),C(L(S.root)),z(m,S.iterations)},I=()=>{e(""),r(""),s(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),C("-"),z(()=>0,[])};return j.useEffect(()=>{z(()=>0,[])},[]),E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4",children:[E.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Newton-Raphson Method"}),E.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:m=>e(m.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"mb-3",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),E.jsx("input",{type:"number",value:n,onChange:m=>r(m.target.value),placeholder:"เช่น 1.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),E.jsx("input",{type:"text",value:i,onChange:m=>s(m.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:o,onChange:m=>l(m.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:q,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),E.jsx("button",{onClick:I,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),E.jsxs("div",{className:"text-sm",children:[E.jsx("div",{children:d}),E.jsxs("div",{children:["Iterations: ",N]}),E.jsxs("div",{children:["Root: ",_]})]}),u.length>0&&E.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"x"}),E.jsx("th",{className:"p-2 text-right",children:"f(x)"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:u.map(m=>E.jsxs("tr",{className:"border-b border-slate-700",children:[E.jsx("td",{className:"p-2 text-right",children:m.iter}),E.jsx("td",{className:"p-2 text-right",children:L(m.x)}),E.jsx("td",{className:"p-2 text-right",children:L(m.fx)}),E.jsx("td",{className:"p-2 text-right",children:m.error===null?"-":L(m.error)})]},m.iter))})]})})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Iterations"}),E.jsx("canvas",{ref:D,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),E.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["จุดส้ม = ค่าที่ได้ในแต่ละ iteration, จุดส้มใหญ่ = ค่าสุดท้าย เส้นเขียว = เส้นสัมผัส f(x) ที่ x",E.jsx("sub",{children:"i"}),", Label = x0, x1, x2 …"]})]})]})]})}function QC(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,l]=j.useState(""),[u,h]=j.useState(""),[d,p]=j.useState([]),[_,C]=j.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=j.useState("-"),[D,A]=j.useState("-"),x=j.useRef(null);function R(g){if(!g||!g.trim())return null;let T=g.replace(/\^/g,"**");T=T.replace(/\bln\s*\(/gi,"log("),T=T.replace(/\bpi\b/gi,"PI"),T=T.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+T+"); }")}catch{return null}}function L(g,T,v,S,w){let X=[],pe=g(T),ae=g(v);X.push({iter:0,x:T,fx:pe,error:null}),X.push({iter:1,x:v,fx:ae,error:null});for(let V=2;V<=w;V++){if(ae-pe===0)return{error:"หารด้วยศูนย์ (f1 - f0 = 0)"};let b=v-ae*(v-T)/(ae-pe),B=g(b),H=Math.abs(b-v)/Math.abs(b);if(X.push({iter:V,x:b,fx:B,error:H}),Math.abs(B)<S||H<S)return{root:b,iterations:X,converged:!0};T=v,pe=ae,v=b,ae=B}return{root:v,iterations:X,converged:!1}}function z(g){return g===null?"-":isFinite(g)?Number(g).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(g)}function q(g,T){const v=x.current,S=v.getContext("2d"),w=v.width,X=v.height;if(S.clearRect(0,0,w,X),S.fillStyle="#061022",S.fillRect(0,0,w,X),T.length===0)return;const pe=T.map(ee=>ee.x),ae=T.map(ee=>ee.fx),V=Math.min(...pe),b=Math.max(...pe),B=Math.min(...ae),H=Math.max(...ae),Z=(b-V)*.3||1,O=(H-B)*.3||1,he=V-Z,oe=b+Z,Ie=B-O,ce=H+O,re=ee=>(ee-he)/(oe-he)*w,ve=ee=>X-(ee-Ie)/(ce-Ie)*X;if(S.strokeStyle="rgba(255,255,255,0.1)",Ie<0&&ce>0){const ee=ve(0);S.beginPath(),S.moveTo(0,ee),S.lineTo(w,ee),S.stroke()}if(he<0&&oe>0){const ee=re(0);S.beginPath(),S.moveTo(ee,0),S.lineTo(ee,X),S.stroke()}S.beginPath(),S.lineWidth=2,S.strokeStyle="#8ab4ff";const Re=500;let me=!1;for(let ee=0;ee<Re;ee++){const fe=he+(oe-he)*ee/(Re-1);let Pe;try{Pe=g(fe)}catch{Pe=NaN}if(!isFinite(Pe)){me=!1;continue}const Ne=re(fe),st=ve(Pe);me?S.lineTo(Ne,st):(S.moveTo(Ne,st),me=!0)}S.stroke(),T.forEach((ee,fe)=>{const Pe=re(ee.x),Ne=ve(ee.fx);if(fe>0){const st=T[fe-1];S.beginPath(),S.moveTo(re(st.x),ve(st.fx)),S.lineTo(Pe,Ne),S.strokeStyle="#22c55e",S.setLineDash([4,4]),S.stroke(),S.setLineDash([])}S.beginPath(),S.arc(Pe,Ne,fe===T.length-1?6:3,0,2*Math.PI),S.fillStyle=fe===T.length-1?"#fb923c":"#f97316",S.fill(),S.fillStyle="#e2e8f0",S.font="12px sans-serif",S.fillText("x"+fe,Pe-10,ve(0)+14)})}const I=()=>{const g=R(t);if(!g){C("สถานะ: สมการไม่ถูกต้อง");return}const T=parseFloat(n),v=parseFloat(i),S=parseFloat(o),w=parseInt(u,10);if(isNaN(T)||isNaN(v)){C("สถานะ: x0/x1 ไม่ถูกต้อง");return}if(!isFinite(S)||S<=0){C("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(w)||w<=0){C("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const X=L(g,T,v,S,w);if(X.error){C("สถานะ: "+X.error);return}p(X.iterations),C("สถานะ: เสร็จสิ้น "+(X.converged?"(converged)":"(ไม่ converged)")),A(X.iterations.length),P(z(X.root)),q(g,X.iterations)},m=()=>{e(""),r(""),s(""),l(""),h(""),p([]),C("สถานะ: รีเซ็ตแล้ว"),A("-"),P("-"),q(()=>0,[])};return j.useEffect(()=>{q(()=>0,[])},[]),E.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[E.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4",children:[E.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Secant Method"}),E.jsx("div",{className:"text-sm text-gray-400",children:"ตาราง + กราฟ แสดงการทำงาน"})]}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),E.jsx("input",{type:"text",value:t,onChange:g=>e(g.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),E.jsx("input",{type:"number",value:n,onChange:g=>r(g.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x1"}),E.jsx("input",{type:"number",value:i,onChange:g=>s(g.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-3",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),E.jsx("input",{type:"text",value:o,onChange:g=>l(g.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),E.jsx("input",{type:"number",value:u,onChange:g=>h(g.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),E.jsxs("div",{className:"flex gap-3 mb-4",children:[E.jsx("button",{onClick:I,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),E.jsx("button",{onClick:m,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),E.jsxs("div",{className:"text-sm",children:[E.jsx("div",{children:_}),E.jsxs("div",{children:["Iterations: ",D]}),E.jsxs("div",{children:["Root: ",N]})]}),d.length>0&&E.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:E.jsxs("table",{className:"w-full text-sm border-collapse",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[E.jsx("th",{className:"p-2 text-right",children:"iter"}),E.jsx("th",{className:"p-2 text-right",children:"x"}),E.jsx("th",{className:"p-2 text-right",children:"f(x)"}),E.jsx("th",{className:"p-2 text-right",children:"error"})]})}),E.jsx("tbody",{children:d.map(g=>E.jsxs("tr",{className:"border-b border-slate-700",children:[E.jsx("td",{className:"p-2 text-right",children:g.iter}),E.jsx("td",{className:"p-2 text-right",children:z(g.x)}),E.jsx("td",{className:"p-2 text-right",children:z(g.fx)}),E.jsx("td",{className:"p-2 text-right",children:g.error===null?"-":z(g.error)})]},g.iter))})]})})]}),E.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[E.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Secant"}),E.jsx("canvas",{ref:x,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),E.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เส้นเขียว = เส้น secant ระหว่างแต่ละจุด, จุดส้ม = ค่าที่ได้, จุดส้มใหญ่ = ค่าสุดท้าย Label = x0, x1, x2 …"})]})]})]})}function GC(){return E.jsx(CT,{basename:"/Numerical-web",children:E.jsxs(ET,{children:[E.jsx(Ir,{path:"/",element:E.jsx(VT,{})}),E.jsx(Ir,{path:"/bisection",element:E.jsx(UC,{})}),E.jsx(Ir,{path:"/falsepo",element:E.jsx(qC,{})}),E.jsx(Ir,{path:"/onepoint",element:E.jsx(HC,{})}),E.jsx(Ir,{path:"/newtonrap",element:E.jsx(WC,{})}),E.jsx(Ir,{path:"/secant",element:E.jsx(QC,{})})]})})}xv(document.getElementById("root")).render(E.jsx(j.StrictMode,{children:E.jsx(GC,{})}));
