function lE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function uE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dg={exports:{}},cl={},pg={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=Symbol.for("react.element"),cE=Symbol.for("react.portal"),hE=Symbol.for("react.fragment"),fE=Symbol.for("react.strict_mode"),dE=Symbol.for("react.profiler"),pE=Symbol.for("react.provider"),mE=Symbol.for("react.context"),gE=Symbol.for("react.forward_ref"),yE=Symbol.for("react.suspense"),vE=Symbol.for("react.memo"),_E=Symbol.for("react.lazy"),Ud=Symbol.iterator;function EE(t){return t===null||typeof t!="object"?null:(t=Ud&&t[Ud]||t["@@iterator"],typeof t=="function"?t:null)}var mg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gg=Object.assign,yg={};function bi(t,e,n){this.props=t,this.context=e,this.refs=yg,this.updater=n||mg}bi.prototype.isReactComponent={};bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vg(){}vg.prototype=bi.prototype;function ah(t,e,n){this.props=t,this.context=e,this.refs=yg,this.updater=n||mg}var lh=ah.prototype=new vg;lh.constructor=ah;gg(lh,bi.prototype);lh.isPureReactComponent=!0;var Bd=Array.isArray,_g=Object.prototype.hasOwnProperty,uh={current:null},Eg={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_g.call(e,r)&&!Eg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:fo,type:t,key:s,ref:o,props:i,_owner:uh.current}}function wE(t,e){return{$$typeof:fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ch(t){return typeof t=="object"&&t!==null&&t.$$typeof===fo}function TE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zd=/\/+/g;function lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TE(""+t.key):e.toString(36)}function oa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fo:case cE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+lu(o,0):r,Bd(i)?(n="",t!=null&&(n=t.replace(zd,"$&/")+"/"),oa(i,e,n,"",function(h){return h})):i!=null&&(ch(i)&&(i=wE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(zd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Bd(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+lu(s,l);o+=oa(s,e,n,u,i)}else if(u=EE(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+lu(s,l++),o+=oa(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lo(t,e,n){if(t==null)return t;var r=[],i=0;return oa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},aa={transition:null},IE={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:aa,ReactCurrentOwner:uh};function Tg(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Lo,forEach:function(t,e,n){Lo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lo(t,function(){e++}),e},toArray:function(t){return Lo(t,function(e){return e})||[]},only:function(t){if(!ch(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=bi;re.Fragment=hE;re.Profiler=dE;re.PureComponent=ah;re.StrictMode=fE;re.Suspense=yE;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IE;re.act=Tg;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=uh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)_g.call(e,u)&&!Eg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:fo,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:mE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pE,_context:t},t.Consumer=t};re.createElement=wg;re.createFactory=function(t){var e=wg.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:gE,render:t}};re.isValidElement=ch;re.lazy=function(t){return{$$typeof:_E,_payload:{_status:-1,_result:t},_init:xE}};re.memo=function(t,e){return{$$typeof:vE,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=aa.transition;aa.transition={};try{t()}finally{aa.transition=e}};re.unstable_act=Tg;re.useCallback=function(t,e){return mt.current.useCallback(t,e)};re.useContext=function(t){return mt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};re.useEffect=function(t,e){return mt.current.useEffect(t,e)};re.useId=function(){return mt.current.useId()};re.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return mt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};re.useRef=function(t){return mt.current.useRef(t)};re.useState=function(t){return mt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return mt.current.useTransition()};re.version="18.3.1";pg.exports=re;var M=pg.exports;const SE=uE(M),AE=lE({__proto__:null,default:SE},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE=M,RE=Symbol.for("react.element"),PE=Symbol.for("react.fragment"),NE=Object.prototype.hasOwnProperty,kE=CE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VE={key:!0,ref:!0,__self:!0,__source:!0};function xg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)NE.call(e,r)&&!VE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:RE,type:t,key:s,ref:o,props:i,_owner:kE.current}}cl.Fragment=PE;cl.jsx=xg;cl.jsxs=xg;dg.exports=cl;var A=dg.exports,Ig={exports:{}},Nt={},Sg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,H){var X=j.length;j.push(H);e:for(;0<X;){var ce=X-1>>>1,de=j[ce];if(0<i(de,H))j[ce]=H,j[X]=de,X=ce;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],X=j.pop();if(X!==H){j[0]=X;e:for(var ce=0,de=j.length,nt=de>>>1;ce<nt;){var Ve=2*(ce+1)-1,yt=j[Ve],je=Ve+1,De=j[je];if(0>i(yt,X))je<de&&0>i(De,yt)?(j[ce]=De,j[je]=X,ce=je):(j[ce]=yt,j[Ve]=X,ce=Ve);else if(je<de&&0>i(De,X))j[ce]=De,j[je]=X,ce=je;else break e}}return H}function i(j,H){var X=j.sortIndex-H.sortIndex;return X!==0?X:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,p=null,g=3,S=!1,N=!1,P=!1,V=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(j){for(var H=n(h);H!==null;){if(H.callback===null)r(h);else if(H.startTime<=j)r(h),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(h)}}function D(j){if(P=!1,R(j),!N)if(n(u)!==null)N=!0,G(F);else{var H=n(h);H!==null&&J(D,H.startTime-j)}}function F(j,H){N=!1,P&&(P=!1,C(m),m=-1),S=!0;var X=g;try{for(R(H),p=n(u);p!==null&&(!(p.expirationTime>H)||j&&!_());){var ce=p.callback;if(typeof ce=="function"){p.callback=null,g=p.priorityLevel;var de=ce(p.expirationTime<=H);H=t.unstable_now(),typeof de=="function"?p.callback=de:p===n(u)&&r(u),R(H)}else r(u);p=n(u)}if(p!==null)var nt=!0;else{var Ve=n(h);Ve!==null&&J(D,Ve.startTime-H),nt=!1}return nt}finally{p=null,g=X,S=!1}}var B=!1,I=null,m=-1,E=5,x=-1;function _(){return!(t.unstable_now()-x<E)}function y(){if(I!==null){var j=t.unstable_now();x=j;var H=!0;try{H=I(!0,j)}finally{H?w():(B=!1,I=null)}}else B=!1}var w;if(typeof T=="function")w=function(){T(y)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=y,w=function(){Y.postMessage(null)}}else w=function(){V(y,0)};function G(j){I=j,B||(B=!0,w())}function J(j,H){m=V(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){N||S||(N=!0,G(F))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(j){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var X=g;g=H;try{return j()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=g;g=j;try{return H()}finally{g=X}},t.unstable_scheduleCallback=function(j,H,X){var ce=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,j){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=X+de,j={id:d++,callback:H,priorityLevel:j,startTime:X,expirationTime:de,sortIndex:-1},X>ce?(j.sortIndex=X,e(h,j),n(u)===null&&j===n(h)&&(P?(C(m),m=-1):P=!0,J(D,X-ce))):(j.sortIndex=de,e(u,j),N||S||(N=!0,G(F))),j},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(j){var H=g;return function(){var X=g;g=H;try{return j.apply(this,arguments)}finally{g=X}}}})(Ag);Sg.exports=Ag;var DE=Sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE=M,Pt=DE;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cg=new Set,Os={};function Mr(t,e){Ei(t,e),Ei(t+"Capture",e)}function Ei(t,e){for(Os[t]=e,t=0;t<e.length;t++)Cg.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qu=Object.prototype.hasOwnProperty,ME=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$d={},qd={};function OE(t){return qu.call(qd,t)?!0:qu.call($d,t)?!1:ME.test(t)?qd[t]=!0:($d[t]=!0,!1)}function LE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FE(t,e,n,r){if(e===null||typeof e>"u"||LE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var hh=/[\-:]([a-z])/g;function fh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hh,fh);et[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hh,fh);et[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hh,fh);et[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dh(t,e,n,r){var i=et.hasOwnProperty(e)?et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FE(e,n,i,r)&&(n=null),r||i===null?OE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var In=bE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fo=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),ph=Symbol.for("react.strict_mode"),Hu=Symbol.for("react.profiler"),Rg=Symbol.for("react.provider"),Pg=Symbol.for("react.context"),mh=Symbol.for("react.forward_ref"),Wu=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),gh=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),Ng=Symbol.for("react.offscreen"),Hd=Symbol.iterator;function as(t){return t===null||typeof t!="object"?null:(t=Hd&&t[Hd]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,uu;function ms(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var cu=!1;function hu(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ms(t):""}function jE(t){switch(t.tag){case 5:return ms(t.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function Gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zr:return"Fragment";case Jr:return"Portal";case Hu:return"Profiler";case ph:return"StrictMode";case Wu:return"Suspense";case Qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pg:return(t.displayName||"Context")+".Consumer";case Rg:return(t._context.displayName||"Context")+".Provider";case mh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gh:return e=t.displayName||null,e!==null?e:Gu(t.type)||"Memo";case Vn:e=t._payload,t=t._init;try{return Gu(t(e))}catch{}}return null}function UE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gu(e);case 8:return e===ph?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BE(t){var e=kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jo(t){t._valueTracker||(t._valueTracker=BE(t))}function Vg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ia(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ku(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dg(t,e){e=e.checked,e!=null&&dh(t,"checked",e,!1)}function Xu(t,e){Dg(t,e);var n=tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yu(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yu(t,e,n){(e!=="number"||Ia(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gs=Array.isArray;function ci(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ju(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(gs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function bg(t,e){var n=tr(e.value),r=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Kd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uo,Og=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zE=["Webkit","ms","Moz","O"];Object.keys(Ts).forEach(function(t){zE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ts[e]=Ts[t]})});function Lg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ts.hasOwnProperty(t)&&Ts[t]?(""+e).trim():e+"px"}function Fg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Lg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var $E=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ec(t,e){if(e){if($E[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function tc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=null;function yh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rc=null,hi=null,fi=null;function Xd(t){if(t=go(t)){if(typeof rc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=ml(e),rc(t.stateNode,t.type,e))}}function jg(t){hi?fi?fi.push(t):fi=[t]:hi=t}function Ug(){if(hi){var t=hi,e=fi;if(fi=hi=null,Xd(t),e)for(t=0;t<e.length;t++)Xd(e[t])}}function Bg(t,e){return t(e)}function zg(){}var fu=!1;function $g(t,e,n){if(fu)return t(e,n);fu=!0;try{return Bg(t,e,n)}finally{fu=!1,(hi!==null||fi!==null)&&(zg(),Ug())}}function Fs(t,e){var n=t.stateNode;if(n===null)return null;var r=ml(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ic=!1;if(yn)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){ic=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{ic=!1}function qE(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var xs=!1,Sa=null,Aa=!1,sc=null,HE={onError:function(t){xs=!0,Sa=t}};function WE(t,e,n,r,i,s,o,l,u){xs=!1,Sa=null,qE.apply(HE,arguments)}function QE(t,e,n,r,i,s,o,l,u){if(WE.apply(this,arguments),xs){if(xs){var h=Sa;xs=!1,Sa=null}else throw Error(U(198));Aa||(Aa=!0,sc=h)}}function Or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yd(t){if(Or(t)!==t)throw Error(U(188))}function GE(t){var e=t.alternate;if(!e){if(e=Or(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yd(i),t;if(s===r)return Yd(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Hg(t){return t=GE(t),t!==null?Wg(t):null}function Wg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wg(t);if(e!==null)return e;t=t.sibling}return null}var Qg=Pt.unstable_scheduleCallback,Jd=Pt.unstable_cancelCallback,KE=Pt.unstable_shouldYield,XE=Pt.unstable_requestPaint,ke=Pt.unstable_now,YE=Pt.unstable_getCurrentPriorityLevel,vh=Pt.unstable_ImmediatePriority,Gg=Pt.unstable_UserBlockingPriority,Ca=Pt.unstable_NormalPriority,JE=Pt.unstable_LowPriority,Kg=Pt.unstable_IdlePriority,hl=null,nn=null;function ZE(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(hl,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:nw,ew=Math.log,tw=Math.LN2;function nw(t){return t>>>=0,t===0?32:31-(ew(t)/tw|0)|0}var Bo=64,zo=4194304;function ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ra(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ys(l):(s&=o,s!==0&&(r=ys(s)))}else o=n&~i,o!==0?r=ys(o):s!==0&&(r=ys(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),i=1<<n,r|=t[n],e&=~i;return r}function rw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Wt(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=rw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function oc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xg(){var t=Bo;return Bo<<=1,!(Bo&4194240)&&(Bo=64),t}function du(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function po(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function sw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _h(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function Yg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jg,Eh,Zg,ey,ty,ac=!1,$o=[],Bn=null,zn=null,$n=null,js=new Map,Us=new Map,bn=[],ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zd(t,e){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":js.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(e.pointerId)}}function us(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=go(e),e!==null&&Eh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aw(t,e,n,r,i){switch(e){case"focusin":return Bn=us(Bn,t,e,n,r,i),!0;case"dragenter":return zn=us(zn,t,e,n,r,i),!0;case"mouseover":return $n=us($n,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return js.set(s,us(js.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Us.set(s,us(Us.get(s)||null,t,e,n,r,i)),!0}return!1}function ny(t){var e=Tr(t.target);if(e!==null){var n=Or(e);if(n!==null){if(e=n.tag,e===13){if(e=qg(n),e!==null){t.blockedOn=e,ty(t.priority,function(){Zg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function la(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nc=r,n.target.dispatchEvent(r),nc=null}else return e=go(n),e!==null&&Eh(e),t.blockedOn=n,!1;e.shift()}return!0}function ep(t,e,n){la(t)&&n.delete(e)}function lw(){ac=!1,Bn!==null&&la(Bn)&&(Bn=null),zn!==null&&la(zn)&&(zn=null),$n!==null&&la($n)&&($n=null),js.forEach(ep),Us.forEach(ep)}function cs(t,e){t.blockedOn===e&&(t.blockedOn=null,ac||(ac=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,lw)))}function Bs(t){function e(i){return cs(i,t)}if(0<$o.length){cs($o[0],t);for(var n=1;n<$o.length;n++){var r=$o[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bn!==null&&cs(Bn,t),zn!==null&&cs(zn,t),$n!==null&&cs($n,t),js.forEach(e),Us.forEach(e),n=0;n<bn.length;n++)r=bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bn.length&&(n=bn[0],n.blockedOn===null);)ny(n),n.blockedOn===null&&bn.shift()}var di=In.ReactCurrentBatchConfig,Pa=!0;function uw(t,e,n,r){var i=fe,s=di.transition;di.transition=null;try{fe=1,wh(t,e,n,r)}finally{fe=i,di.transition=s}}function cw(t,e,n,r){var i=fe,s=di.transition;di.transition=null;try{fe=4,wh(t,e,n,r)}finally{fe=i,di.transition=s}}function wh(t,e,n,r){if(Pa){var i=lc(t,e,n,r);if(i===null)xu(t,e,r,Na,n),Zd(t,r);else if(aw(i,t,e,n,r))r.stopPropagation();else if(Zd(t,r),e&4&&-1<ow.indexOf(t)){for(;i!==null;){var s=go(i);if(s!==null&&Jg(s),s=lc(t,e,n,r),s===null&&xu(t,e,r,Na,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xu(t,e,r,null,n)}}var Na=null;function lc(t,e,n,r){if(Na=null,t=yh(r),t=Tr(t),t!==null)if(e=Or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Na=t,null}function ry(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YE()){case vh:return 1;case Gg:return 4;case Ca:case JE:return 16;case Kg:return 536870912;default:return 16}default:return 16}}var Ln=null,Th=null,ua=null;function iy(){if(ua)return ua;var t,e=Th,n=e.length,r,i="value"in Ln?Ln.value:Ln.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ua=i.slice(t,1<r?1-r:void 0)}function ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function tp(){return!1}function kt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qo:tp,this.isPropagationStopped=tp,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),e}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=kt(Mi),mo=Se({},Mi,{view:0,detail:0}),hw=kt(mo),pu,mu,hs,fl=Se({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ih,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hs&&(hs&&t.type==="mousemove"?(pu=t.screenX-hs.screenX,mu=t.screenY-hs.screenY):mu=pu=0,hs=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:mu}}),np=kt(fl),fw=Se({},fl,{dataTransfer:0}),dw=kt(fw),pw=Se({},mo,{relatedTarget:0}),gu=kt(pw),mw=Se({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),gw=kt(mw),yw=Se({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vw=kt(yw),_w=Se({},Mi,{data:0}),rp=kt(_w),Ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ww={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tw[t])?!!e[t]:!1}function Ih(){return xw}var Iw=Se({},mo,{key:function(t){if(t.key){var e=Ew[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ww[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ih,charCode:function(t){return t.type==="keypress"?ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sw=kt(Iw),Aw=Se({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ip=kt(Aw),Cw=Se({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ih}),Rw=kt(Cw),Pw=Se({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nw=kt(Pw),kw=Se({},fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vw=kt(kw),Dw=[9,13,27,32],Sh=yn&&"CompositionEvent"in window,Is=null;yn&&"documentMode"in document&&(Is=document.documentMode);var bw=yn&&"TextEvent"in window&&!Is,sy=yn&&(!Sh||Is&&8<Is&&11>=Is),sp=" ",op=!1;function oy(t,e){switch(t){case"keyup":return Dw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ay(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ei=!1;function Mw(t,e){switch(t){case"compositionend":return ay(e);case"keypress":return e.which!==32?null:(op=!0,sp);case"textInput":return t=e.data,t===sp&&op?null:t;default:return null}}function Ow(t,e){if(ei)return t==="compositionend"||!Sh&&oy(t,e)?(t=iy(),ua=Th=Ln=null,ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sy&&e.locale!=="ko"?null:e.data;default:return null}}var Lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Lw[t.type]:e==="textarea"}function ly(t,e,n,r){jg(r),e=ka(e,"onChange"),0<e.length&&(n=new xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ss=null,zs=null;function Fw(t){_y(t,0)}function dl(t){var e=ri(t);if(Vg(e))return t}function jw(t,e){if(t==="change")return e}var uy=!1;if(yn){var yu;if(yn){var vu="oninput"in document;if(!vu){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),vu=typeof lp.oninput=="function"}yu=vu}else yu=!1;uy=yu&&(!document.documentMode||9<document.documentMode)}function up(){Ss&&(Ss.detachEvent("onpropertychange",cy),zs=Ss=null)}function cy(t){if(t.propertyName==="value"&&dl(zs)){var e=[];ly(e,zs,t,yh(t)),$g(Fw,e)}}function Uw(t,e,n){t==="focusin"?(up(),Ss=e,zs=n,Ss.attachEvent("onpropertychange",cy)):t==="focusout"&&up()}function Bw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dl(zs)}function zw(t,e){if(t==="click")return dl(e)}function $w(t,e){if(t==="input"||t==="change")return dl(e)}function qw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:qw;function $s(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qu.call(e,i)||!Gt(t[i],e[i]))return!1}return!0}function cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hp(t,e){var n=cp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cp(n)}}function hy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fy(){for(var t=window,e=Ia();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ia(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hw(t){var e=fy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hy(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hp(n,s);var o=hp(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ww=yn&&"documentMode"in document&&11>=document.documentMode,ti=null,uc=null,As=null,cc=!1;function fp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cc||ti==null||ti!==Ia(r)||(r=ti,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),As&&$s(As,r)||(As=r,r=ka(uc,"onSelect"),0<r.length&&(e=new xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ti)))}function Ho(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ni={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionend:Ho("Transition","TransitionEnd")},_u={},dy={};yn&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function pl(t){if(_u[t])return _u[t];if(!ni[t])return t;var e=ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dy)return _u[t]=e[n];return t}var py=pl("animationend"),my=pl("animationiteration"),gy=pl("animationstart"),yy=pl("transitionend"),vy=new Map,dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){vy.set(t,e),Mr(e,[t])}for(var Eu=0;Eu<dp.length;Eu++){var wu=dp[Eu],Qw=wu.toLowerCase(),Gw=wu[0].toUpperCase()+wu.slice(1);ur(Qw,"on"+Gw)}ur(py,"onAnimationEnd");ur(my,"onAnimationIteration");ur(gy,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(yy,"onTransitionEnd");Ei("onMouseEnter",["mouseout","mouseover"]);Ei("onMouseLeave",["mouseout","mouseover"]);Ei("onPointerEnter",["pointerout","pointerover"]);Ei("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kw=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function pp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QE(r,e,void 0,t),t.currentTarget=null}function _y(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;pp(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;pp(i,l,h),s=u}}}if(Aa)throw t=sc,Aa=!1,sc=null,t}function _e(t,e){var n=e[mc];n===void 0&&(n=e[mc]=new Set);var r=t+"__bubble";n.has(r)||(Ey(e,t,2,!1),n.add(r))}function Tu(t,e,n){var r=0;e&&(r|=4),Ey(n,t,r,e)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function qs(t){if(!t[Wo]){t[Wo]=!0,Cg.forEach(function(n){n!=="selectionchange"&&(Kw.has(n)||Tu(n,!1,t),Tu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wo]||(e[Wo]=!0,Tu("selectionchange",!1,e))}}function Ey(t,e,n,r){switch(ry(e)){case 1:var i=uw;break;case 4:i=cw;break;default:i=wh}n=i.bind(null,e,n,t),i=void 0,!ic||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Tr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}$g(function(){var h=s,d=yh(n),p=[];e:{var g=vy.get(t);if(g!==void 0){var S=xh,N=t;switch(t){case"keypress":if(ca(n)===0)break e;case"keydown":case"keyup":S=Sw;break;case"focusin":N="focus",S=gu;break;case"focusout":N="blur",S=gu;break;case"beforeblur":case"afterblur":S=gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=dw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Rw;break;case py:case my:case gy:S=gw;break;case yy:S=Nw;break;case"scroll":S=hw;break;case"wheel":S=Vw;break;case"copy":case"cut":case"paste":S=vw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=ip}var P=(e&4)!==0,V=!P&&t==="scroll",C=P?g!==null?g+"Capture":null:g;P=[];for(var T=h,R;T!==null;){R=T;var D=R.stateNode;if(R.tag===5&&D!==null&&(R=D,C!==null&&(D=Fs(T,C),D!=null&&P.push(Hs(T,D,R)))),V)break;T=T.return}0<P.length&&(g=new S(g,N,null,n,d),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==nc&&(N=n.relatedTarget||n.fromElement)&&(Tr(N)||N[vn]))break e;if((S||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,S?(N=n.relatedTarget||n.toElement,S=h,N=N?Tr(N):null,N!==null&&(V=Or(N),N!==V||N.tag!==5&&N.tag!==6)&&(N=null)):(S=null,N=h),S!==N)){if(P=np,D="onMouseLeave",C="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=ip,D="onPointerLeave",C="onPointerEnter",T="pointer"),V=S==null?g:ri(S),R=N==null?g:ri(N),g=new P(D,T+"leave",S,n,d),g.target=V,g.relatedTarget=R,D=null,Tr(d)===h&&(P=new P(C,T+"enter",N,n,d),P.target=R,P.relatedTarget=V,D=P),V=D,S&&N)t:{for(P=S,C=N,T=0,R=P;R;R=Qr(R))T++;for(R=0,D=C;D;D=Qr(D))R++;for(;0<T-R;)P=Qr(P),T--;for(;0<R-T;)C=Qr(C),R--;for(;T--;){if(P===C||C!==null&&P===C.alternate)break t;P=Qr(P),C=Qr(C)}P=null}else P=null;S!==null&&mp(p,g,S,P,!1),N!==null&&V!==null&&mp(p,V,N,P,!0)}}e:{if(g=h?ri(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var F=jw;else if(ap(g))if(uy)F=$w;else{F=Bw;var B=Uw}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=zw);if(F&&(F=F(t,h))){ly(p,F,n,d);break e}B&&B(t,g,h),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Yu(g,"number",g.value)}switch(B=h?ri(h):window,t){case"focusin":(ap(B)||B.contentEditable==="true")&&(ti=B,uc=h,As=null);break;case"focusout":As=uc=ti=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,fp(p,n,d);break;case"selectionchange":if(Ww)break;case"keydown":case"keyup":fp(p,n,d)}var I;if(Sh)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else ei?oy(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(sy&&n.locale!=="ko"&&(ei||m!=="onCompositionStart"?m==="onCompositionEnd"&&ei&&(I=iy()):(Ln=d,Th="value"in Ln?Ln.value:Ln.textContent,ei=!0)),B=ka(h,m),0<B.length&&(m=new rp(m,t,null,n,d),p.push({event:m,listeners:B}),I?m.data=I:(I=ay(n),I!==null&&(m.data=I)))),(I=bw?Mw(t,n):Ow(t,n))&&(h=ka(h,"onBeforeInput"),0<h.length&&(d=new rp("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=I))}_y(p,e)})}function Hs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ka(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Fs(t,n),s!=null&&r.unshift(Hs(t,s,i)),s=Fs(t,e),s!=null&&r.push(Hs(t,s,i))),t=t.return}return r}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Fs(n,s),u!=null&&o.unshift(Hs(n,u,l))):i||(u=Fs(n,s),u!=null&&o.push(Hs(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Xw=/\r\n?/g,Yw=/\u0000|\uFFFD/g;function gp(t){return(typeof t=="string"?t:""+t).replace(Xw,`
`).replace(Yw,"")}function Qo(t,e,n){if(e=gp(e),gp(t)!==e&&n)throw Error(U(425))}function Va(){}var hc=null,fc=null;function dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,Jw=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,Zw=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(t){return yp.resolve(null).then(t).catch(e1)}:pc;function e1(t){setTimeout(function(){throw t})}function Iu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bs(e)}function qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),tn="__reactFiber$"+Oi,Ws="__reactProps$"+Oi,vn="__reactContainer$"+Oi,mc="__reactEvents$"+Oi,t1="__reactListeners$"+Oi,n1="__reactHandles$"+Oi;function Tr(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vp(t);t!==null;){if(n=t[tn])return n;t=vp(t)}return e}t=n,n=t.parentNode}return null}function go(t){return t=t[tn]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function ml(t){return t[Ws]||null}var gc=[],ii=-1;function cr(t){return{current:t}}function we(t){0>ii||(t.current=gc[ii],gc[ii]=null,ii--)}function ye(t,e){ii++,gc[ii]=t.current,t.current=e}var nr={},ct=cr(nr),wt=cr(!1),Rr=nr;function wi(t,e){var n=t.type.contextTypes;if(!n)return nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function Da(){we(wt),we(ct)}function _p(t,e,n){if(ct.current!==nr)throw Error(U(168));ye(ct,e),ye(wt,n)}function wy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,UE(t)||"Unknown",i));return Se({},n,r)}function ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nr,Rr=ct.current,ye(ct,t),ye(wt,wt.current),!0}function Ep(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=wy(t,e,Rr),r.__reactInternalMemoizedMergedChildContext=t,we(wt),we(ct),ye(ct,t)):we(wt),ye(wt,n)}var dn=null,gl=!1,Su=!1;function Ty(t){dn===null?dn=[t]:dn.push(t)}function r1(t){gl=!0,Ty(t)}function hr(){if(!Su&&dn!==null){Su=!0;var t=0,e=fe;try{var n=dn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dn=null,gl=!1}catch(i){throw dn!==null&&(dn=dn.slice(t+1)),Qg(vh,hr),i}finally{fe=e,Su=!1}}return null}var si=[],oi=0,Ma=null,Oa=0,Dt=[],bt=0,Pr=null,pn=1,mn="";function vr(t,e){si[oi++]=Oa,si[oi++]=Ma,Ma=t,Oa=e}function xy(t,e,n){Dt[bt++]=pn,Dt[bt++]=mn,Dt[bt++]=Pr,Pr=t;var r=pn;t=mn;var i=32-Wt(r)-1;r&=~(1<<i),n+=1;var s=32-Wt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pn=1<<32-Wt(e)+i|n<<i|r,mn=s+t}else pn=1<<s|n<<i|r,mn=t}function Ch(t){t.return!==null&&(vr(t,1),xy(t,1,0))}function Rh(t){for(;t===Ma;)Ma=si[--oi],si[oi]=null,Oa=si[--oi],si[oi]=null;for(;t===Pr;)Pr=Dt[--bt],Dt[bt]=null,mn=Dt[--bt],Dt[bt]=null,pn=Dt[--bt],Dt[bt]=null}var Rt=null,Ct=null,Te=!1,qt=null;function Iy(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Ct=qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,Ct=null,!0):!1;default:return!1}}function yc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vc(t){if(Te){var e=Ct;if(e){var n=e;if(!wp(t,e)){if(yc(t))throw Error(U(418));e=qn(n.nextSibling);var r=Rt;e&&wp(t,e)?Iy(r,n):(t.flags=t.flags&-4097|2,Te=!1,Rt=t)}}else{if(yc(t))throw Error(U(418));t.flags=t.flags&-4097|2,Te=!1,Rt=t}}}function Tp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function Go(t){if(t!==Rt)return!1;if(!Te)return Tp(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dc(t.type,t.memoizedProps)),e&&(e=Ct)){if(yc(t))throw Sy(),Error(U(418));for(;e;)Iy(t,e),e=qn(e.nextSibling)}if(Tp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Rt?qn(t.stateNode.nextSibling):null;return!0}function Sy(){for(var t=Ct;t;)t=qn(t.nextSibling)}function Ti(){Ct=Rt=null,Te=!1}function Ph(t){qt===null?qt=[t]:qt.push(t)}var i1=In.ReactCurrentBatchConfig;function fs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ko(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xp(t){var e=t._init;return e(t._payload)}function Ay(t){function e(C,T){if(t){var R=C.deletions;R===null?(C.deletions=[T],C.flags|=16):R.push(T)}}function n(C,T){if(!t)return null;for(;T!==null;)e(C,T),T=T.sibling;return null}function r(C,T){for(C=new Map;T!==null;)T.key!==null?C.set(T.key,T):C.set(T.index,T),T=T.sibling;return C}function i(C,T){return C=Gn(C,T),C.index=0,C.sibling=null,C}function s(C,T,R){return C.index=R,t?(R=C.alternate,R!==null?(R=R.index,R<T?(C.flags|=2,T):R):(C.flags|=2,T)):(C.flags|=1048576,T)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function l(C,T,R,D){return T===null||T.tag!==6?(T=Vu(R,C.mode,D),T.return=C,T):(T=i(T,R),T.return=C,T)}function u(C,T,R,D){var F=R.type;return F===Zr?d(C,T,R.props.children,D,R.key):T!==null&&(T.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Vn&&xp(F)===T.type)?(D=i(T,R.props),D.ref=fs(C,T,R),D.return=C,D):(D=ya(R.type,R.key,R.props,null,C.mode,D),D.ref=fs(C,T,R),D.return=C,D)}function h(C,T,R,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=Du(R,C.mode,D),T.return=C,T):(T=i(T,R.children||[]),T.return=C,T)}function d(C,T,R,D,F){return T===null||T.tag!==7?(T=Cr(R,C.mode,D,F),T.return=C,T):(T=i(T,R),T.return=C,T)}function p(C,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Vu(""+T,C.mode,R),T.return=C,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fo:return R=ya(T.type,T.key,T.props,null,C.mode,R),R.ref=fs(C,null,T),R.return=C,R;case Jr:return T=Du(T,C.mode,R),T.return=C,T;case Vn:var D=T._init;return p(C,D(T._payload),R)}if(gs(T)||as(T))return T=Cr(T,C.mode,R,null),T.return=C,T;Ko(C,T)}return null}function g(C,T,R,D){var F=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return F!==null?null:l(C,T,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Fo:return R.key===F?u(C,T,R,D):null;case Jr:return R.key===F?h(C,T,R,D):null;case Vn:return F=R._init,g(C,T,F(R._payload),D)}if(gs(R)||as(R))return F!==null?null:d(C,T,R,D,null);Ko(C,R)}return null}function S(C,T,R,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return C=C.get(R)||null,l(T,C,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Fo:return C=C.get(D.key===null?R:D.key)||null,u(T,C,D,F);case Jr:return C=C.get(D.key===null?R:D.key)||null,h(T,C,D,F);case Vn:var B=D._init;return S(C,T,R,B(D._payload),F)}if(gs(D)||as(D))return C=C.get(R)||null,d(T,C,D,F,null);Ko(T,D)}return null}function N(C,T,R,D){for(var F=null,B=null,I=T,m=T=0,E=null;I!==null&&m<R.length;m++){I.index>m?(E=I,I=null):E=I.sibling;var x=g(C,I,R[m],D);if(x===null){I===null&&(I=E);break}t&&I&&x.alternate===null&&e(C,I),T=s(x,T,m),B===null?F=x:B.sibling=x,B=x,I=E}if(m===R.length)return n(C,I),Te&&vr(C,m),F;if(I===null){for(;m<R.length;m++)I=p(C,R[m],D),I!==null&&(T=s(I,T,m),B===null?F=I:B.sibling=I,B=I);return Te&&vr(C,m),F}for(I=r(C,I);m<R.length;m++)E=S(I,C,m,R[m],D),E!==null&&(t&&E.alternate!==null&&I.delete(E.key===null?m:E.key),T=s(E,T,m),B===null?F=E:B.sibling=E,B=E);return t&&I.forEach(function(_){return e(C,_)}),Te&&vr(C,m),F}function P(C,T,R,D){var F=as(R);if(typeof F!="function")throw Error(U(150));if(R=F.call(R),R==null)throw Error(U(151));for(var B=F=null,I=T,m=T=0,E=null,x=R.next();I!==null&&!x.done;m++,x=R.next()){I.index>m?(E=I,I=null):E=I.sibling;var _=g(C,I,x.value,D);if(_===null){I===null&&(I=E);break}t&&I&&_.alternate===null&&e(C,I),T=s(_,T,m),B===null?F=_:B.sibling=_,B=_,I=E}if(x.done)return n(C,I),Te&&vr(C,m),F;if(I===null){for(;!x.done;m++,x=R.next())x=p(C,x.value,D),x!==null&&(T=s(x,T,m),B===null?F=x:B.sibling=x,B=x);return Te&&vr(C,m),F}for(I=r(C,I);!x.done;m++,x=R.next())x=S(I,C,m,x.value,D),x!==null&&(t&&x.alternate!==null&&I.delete(x.key===null?m:x.key),T=s(x,T,m),B===null?F=x:B.sibling=x,B=x);return t&&I.forEach(function(y){return e(C,y)}),Te&&vr(C,m),F}function V(C,T,R,D){if(typeof R=="object"&&R!==null&&R.type===Zr&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Fo:e:{for(var F=R.key,B=T;B!==null;){if(B.key===F){if(F=R.type,F===Zr){if(B.tag===7){n(C,B.sibling),T=i(B,R.props.children),T.return=C,C=T;break e}}else if(B.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Vn&&xp(F)===B.type){n(C,B.sibling),T=i(B,R.props),T.ref=fs(C,B,R),T.return=C,C=T;break e}n(C,B);break}else e(C,B);B=B.sibling}R.type===Zr?(T=Cr(R.props.children,C.mode,D,R.key),T.return=C,C=T):(D=ya(R.type,R.key,R.props,null,C.mode,D),D.ref=fs(C,T,R),D.return=C,C=D)}return o(C);case Jr:e:{for(B=R.key;T!==null;){if(T.key===B)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){n(C,T.sibling),T=i(T,R.children||[]),T.return=C,C=T;break e}else{n(C,T);break}else e(C,T);T=T.sibling}T=Du(R,C.mode,D),T.return=C,C=T}return o(C);case Vn:return B=R._init,V(C,T,B(R._payload),D)}if(gs(R))return N(C,T,R,D);if(as(R))return P(C,T,R,D);Ko(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,T!==null&&T.tag===6?(n(C,T.sibling),T=i(T,R),T.return=C,C=T):(n(C,T),T=Vu(R,C.mode,D),T.return=C,C=T),o(C)):n(C,T)}return V}var xi=Ay(!0),Cy=Ay(!1),La=cr(null),Fa=null,ai=null,Nh=null;function kh(){Nh=ai=Fa=null}function Vh(t){var e=La.current;we(La),t._currentValue=e}function _c(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pi(t,e){Fa=t,Nh=ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(Nh!==t)if(t={context:t,memoizedValue:e,next:null},ai===null){if(Fa===null)throw Error(U(308));ai=t,Fa.dependencies={lanes:0,firstContext:t}}else ai=ai.next=t;return e}var xr=null;function Dh(t){xr===null?xr=[t]:xr.push(t)}function Ry(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dh(e)):(n.next=i.next,i.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function bh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Py(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_n(t,n)}return i=r.interleaved,i===null?(e.next=e,Dh(r)):(e.next=i.next,i.next=e),r.interleaved=e,_n(t,n)}function ha(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}function Ip(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ja(t,e,n,r){var i=t.updateQueue;Dn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,d=h=u=null,l=s;do{var g=l.lane,S=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,P=l;switch(g=e,S=n,P.tag){case 1:if(N=P.payload,typeof N=="function"){p=N.call(S,p,g);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=P.payload,g=typeof N=="function"?N.call(S,p,g):N,g==null)break e;p=Se({},p,g);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=S,u=p):d=d.next=S,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);kr|=o,t.lanes=o,t.memoizedState=p}}function Sp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var yo={},rn=cr(yo),Qs=cr(yo),Gs=cr(yo);function Ir(t){if(t===yo)throw Error(U(174));return t}function Mh(t,e){switch(ye(Gs,e),ye(Qs,t),ye(rn,yo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zu(e,t)}we(rn),ye(rn,e)}function Ii(){we(rn),we(Qs),we(Gs)}function Ny(t){Ir(Gs.current);var e=Ir(rn.current),n=Zu(e,t.type);e!==n&&(ye(Qs,t),ye(rn,n))}function Oh(t){Qs.current===t&&(we(rn),we(Qs))}var xe=cr(0);function Ua(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Au=[];function Lh(){for(var t=0;t<Au.length;t++)Au[t]._workInProgressVersionPrimary=null;Au.length=0}var fa=In.ReactCurrentDispatcher,Cu=In.ReactCurrentBatchConfig,Nr=0,Ie=null,ze=null,Qe=null,Ba=!1,Cs=!1,Ks=0,s1=0;function it(){throw Error(U(321))}function Fh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,i,s){if(Nr=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fa.current=t===null||t.memoizedState===null?u1:c1,t=n(r,i),Cs){s=0;do{if(Cs=!1,Ks=0,25<=s)throw Error(U(301));s+=1,Qe=ze=null,e.updateQueue=null,fa.current=h1,t=n(r,i)}while(Cs)}if(fa.current=za,e=ze!==null&&ze.next!==null,Nr=0,Qe=ze=Ie=null,Ba=!1,e)throw Error(U(300));return t}function Uh(){var t=Ks!==0;return Ks=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ie.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Ut(){if(ze===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Qe===null?Ie.memoizedState:Qe.next;if(e!==null)Qe=e,ze=t;else{if(t===null)throw Error(U(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Qe===null?Ie.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Xs(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=Ut(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var d=h.lane;if((Nr&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Ie.lanes|=d,kr|=d}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Gt(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ie.lanes|=s,kr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Gt(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ky(){}function Vy(t,e){var n=Ie,r=Ut(),i=e(),s=!Gt(r.memoizedState,i);if(s&&(r.memoizedState=i,Et=!0),r=r.queue,Bh(My.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Ys(9,by.bind(null,n,r,i,e),void 0,null),Ke===null)throw Error(U(349));Nr&30||Dy(n,e,i)}return i}function Dy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function by(t,e,n,r){e.value=n,e.getSnapshot=r,Oy(e)&&Ly(t)}function My(t,e,n){return n(function(){Oy(e)&&Ly(t)})}function Oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function Ly(t){var e=_n(t,1);e!==null&&Qt(e,t,1,-1)}function Ap(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},e.queue=t,t=t.dispatch=l1.bind(null,Ie,t),[e.memoizedState,t]}function Ys(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fy(){return Ut().memoizedState}function da(t,e,n,r){var i=Zt();Ie.flags|=t,i.memoizedState=Ys(1|e,n,void 0,r===void 0?null:r)}function yl(t,e,n,r){var i=Ut();r=r===void 0?null:r;var s=void 0;if(ze!==null){var o=ze.memoizedState;if(s=o.destroy,r!==null&&Fh(r,o.deps)){i.memoizedState=Ys(e,n,s,r);return}}Ie.flags|=t,i.memoizedState=Ys(1|e,n,s,r)}function Cp(t,e){return da(8390656,8,t,e)}function Bh(t,e){return yl(2048,8,t,e)}function jy(t,e){return yl(4,2,t,e)}function Uy(t,e){return yl(4,4,t,e)}function By(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zy(t,e,n){return n=n!=null?n.concat([t]):null,yl(4,4,By.bind(null,e,t),n)}function zh(){}function $y(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qy(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hy(t,e,n){return Nr&21?(Gt(n,e)||(n=Xg(),Ie.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function o1(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Cu.transition;Cu.transition={};try{t(!1),e()}finally{fe=n,Cu.transition=r}}function Wy(){return Ut().memoizedState}function a1(t,e,n){var r=Qn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qy(t))Gy(e,n);else if(n=Ry(t,e,n,r),n!==null){var i=pt();Qt(n,t,r,i),Ky(n,e,r)}}function l1(t,e,n){var r=Qn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qy(t))Gy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Gt(l,o)){var u=e.interleaved;u===null?(i.next=i,Dh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ry(t,e,i,r),n!==null&&(i=pt(),Qt(n,t,r,i),Ky(n,e,r))}}function Qy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Gy(t,e){Cs=Ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ky(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}var za={readContext:jt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},u1={readContext:jt,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Cp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,da(4194308,4,By.bind(null,e,t),n)},useLayoutEffect:function(t,e){return da(4194308,4,t,e)},useInsertionEffect:function(t,e){return da(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=a1.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:Ap,useDebugValue:zh,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=Ap(!1),e=t[0];return t=o1.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=Zt();if(Te){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ke===null)throw Error(U(349));Nr&30||Dy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Cp(My.bind(null,r,s,t),[t]),r.flags|=2048,Ys(9,by.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zt(),e=Ke.identifierPrefix;if(Te){var n=mn,r=pn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ks++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=s1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c1={readContext:jt,useCallback:$y,useContext:jt,useEffect:Bh,useImperativeHandle:zy,useInsertionEffect:jy,useLayoutEffect:Uy,useMemo:qy,useReducer:Ru,useRef:Fy,useState:function(){return Ru(Xs)},useDebugValue:zh,useDeferredValue:function(t){var e=Ut();return Hy(e,ze.memoizedState,t)},useTransition:function(){var t=Ru(Xs)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Vy,useId:Wy,unstable_isNewReconciler:!1},h1={readContext:jt,useCallback:$y,useContext:jt,useEffect:Bh,useImperativeHandle:zy,useInsertionEffect:jy,useLayoutEffect:Uy,useMemo:qy,useReducer:Pu,useRef:Fy,useState:function(){return Pu(Xs)},useDebugValue:zh,useDeferredValue:function(t){var e=Ut();return ze===null?e.memoizedState=t:Hy(e,ze.memoizedState,t)},useTransition:function(){var t=Pu(Xs)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Vy,useId:Wy,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ec(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vl={isMounted:function(t){return(t=t._reactInternals)?Or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=Qn(t),s=gn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(Qt(e,t,i,r),ha(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=Qn(t),s=gn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(Qt(e,t,i,r),ha(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Qn(t),i=gn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hn(t,i,r),e!==null&&(Qt(e,t,r,n),ha(e,t,r))}};function Rp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$s(n,r)||!$s(i,s):!0}function Xy(t,e,n){var r=!1,i=nr,s=e.contextType;return typeof s=="object"&&s!==null?s=jt(s):(i=Tt(e)?Rr:ct.current,r=e.contextTypes,s=(r=r!=null)?wi(t,i):nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Pp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vl.enqueueReplaceState(e,e.state,null)}function wc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jt(s):(s=Tt(e)?Rr:ct.current,i.context=wi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ec(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vl.enqueueReplaceState(i,i.state,null),ja(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Si(t,e){try{var n="",r=e;do n+=jE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Nu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f1=typeof WeakMap=="function"?WeakMap:Map;function Yy(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qa||(qa=!0,Vc=r),Tc(t,e)},n}function Jy(t,e,n){n=gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Tc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Tc(t,e),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Np(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=A1.bind(null,t,e,n),e.then(t,t))}function kp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var d1=In.ReactCurrentOwner,Et=!1;function dt(t,e,n,r){e.child=t===null?Cy(e,null,n,r):xi(e,t.child,n,r)}function Dp(t,e,n,r,i){n=n.render;var s=e.ref;return pi(e,i),r=jh(t,e,n,r,s,i),n=Uh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(Te&&n&&Ch(e),e.flags|=1,dt(t,e,r,i),e.child)}function bp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Xh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Zy(t,e,s,r,i)):(t=ya(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(o,r)&&t.ref===e.ref)return En(t,e,i)}return e.flags|=1,t=Gn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Zy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($s(s,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,En(t,e,i)}return xc(t,e,n,r,i)}function ev(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(ui,At),At|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(ui,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(ui,At),At|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(ui,At),At|=r;return dt(t,e,i,n),e.child}function tv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xc(t,e,n,r,i){var s=Tt(n)?Rr:ct.current;return s=wi(e,s),pi(e,i),n=jh(t,e,n,r,s,i),r=Uh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(Te&&r&&Ch(e),e.flags|=1,dt(t,e,n,i),e.child)}function Mp(t,e,n,r,i){if(Tt(n)){var s=!0;ba(e)}else s=!1;if(pi(e,i),e.stateNode===null)pa(t,e),Xy(e,n,r),wc(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=jt(h):(h=Tt(n)?Rr:ct.current,h=wi(e,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Pp(e,o,r,h),Dn=!1;var g=e.memoizedState;o.state=g,ja(e,r,o,i),u=e.memoizedState,l!==r||g!==u||wt.current||Dn?(typeof d=="function"&&(Ec(e,n,d,r),u=e.memoizedState),(l=Dn||Rp(e,n,l,r,g,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Py(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:zt(e.type,l),o.props=h,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=jt(u):(u=Tt(n)?Rr:ct.current,u=wi(e,u));var S=n.getDerivedStateFromProps;(d=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Pp(e,o,r,u),Dn=!1,g=e.memoizedState,o.state=g,ja(e,r,o,i);var N=e.memoizedState;l!==p||g!==N||wt.current||Dn?(typeof S=="function"&&(Ec(e,n,S,r),N=e.memoizedState),(h=Dn||Rp(e,n,h,r,g,N,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ic(t,e,n,r,s,i)}function Ic(t,e,n,r,i,s){tv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ep(e,n,!1),En(t,e,s);r=e.stateNode,d1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xi(e,t.child,null,s),e.child=xi(e,null,l,s)):dt(t,e,l,s),e.memoizedState=r.state,i&&Ep(e,n,!0),e.child}function nv(t){var e=t.stateNode;e.pendingContext?_p(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_p(t,e.context,!1),Mh(t,e.containerInfo)}function Op(t,e,n,r,i){return Ti(),Ph(i),e.flags|=256,dt(t,e,n,r),e.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Ac(t){return{baseLanes:t,cachePool:null,transitions:null}}function rv(t,e,n){var r=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(xe,i&1),t===null)return vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wl(o,r,0,null),t=Cr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ac(n),e.memoizedState=Sc,t):$h(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return p1(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Gn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Gn(l,s):(s=Cr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ac(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Sc,r}return s=t.child,t=s.sibling,r=Gn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $h(t,e){return e=wl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xo(t,e,n,r){return r!==null&&Ph(r),xi(e,t.child,null,n),t=$h(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function p1(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Nu(Error(U(422))),Xo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wl({mode:"visible",children:r.children},i,0,null),s=Cr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xi(e,t.child,null,o),e.child.memoizedState=Ac(o),e.memoizedState=Sc,s);if(!(e.mode&1))return Xo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=Nu(s,r,void 0),Xo(t,e,o,r)}if(l=(o&t.childLanes)!==0,Et||l){if(r=Ke,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_n(t,i),Qt(r,t,i,-1))}return Kh(),r=Nu(Error(U(421))),Xo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=C1.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ct=qn(i.nextSibling),Rt=e,Te=!0,qt=null,t!==null&&(Dt[bt++]=pn,Dt[bt++]=mn,Dt[bt++]=Pr,pn=t.id,mn=t.overflow,Pr=e),e=$h(e,r.children),e.flags|=4096,e)}function Lp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_c(t.return,e,n)}function ku(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lp(t,n,e);else if(t.tag===19)Lp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ua(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ku(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ua(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ku(e,!0,n,null,s);break;case"together":ku(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function m1(t,e,n){switch(e.tag){case 3:nv(e),Ti();break;case 5:Ny(e);break;case 1:Tt(e.type)&&ba(e);break;case 4:Mh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(La,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?rv(t,e,n):(ye(xe,xe.current&1),t=En(t,e,n),t!==null?t.sibling:null);ye(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,ev(t,e,n)}return En(t,e,n)}var sv,Cc,ov,av;sv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cc=function(){};ov=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ir(rn.current);var s=null;switch(n){case"input":i=Ku(t,i),r=Ku(t,r),s=[];break;case"select":i=Se({},i,{value:void 0}),r=Se({},r,{value:void 0}),s=[];break;case"textarea":i=Ju(t,i),r=Ju(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Va)}ec(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Os.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Os.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&_e("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};av=function(t,e,n,r){n!==r&&(e.flags|=4)};function ds(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function g1(t,e,n){var r=e.pendingProps;switch(Rh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return Tt(e.type)&&Da(),st(e),null;case 3:return r=e.stateNode,Ii(),we(wt),we(ct),Lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Go(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qt!==null&&(Mc(qt),qt=null))),Cc(t,e),st(e),null;case 5:Oh(e);var i=Ir(Gs.current);if(n=e.type,t!==null&&e.stateNode!=null)ov(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return st(e),null}if(t=Ir(rn.current),Go(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tn]=e,r[Ws]=s,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<vs.length;i++)_e(vs[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Wd(r,s),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_e("invalid",r);break;case"textarea":Gd(r,s),_e("invalid",r)}ec(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,l,t),i=["children",""+l]):Os.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":jo(r),Qd(r,s,!0);break;case"textarea":jo(r),Kd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Va)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tn]=e,t[Ws]=r,sv(t,e,!1,!1),e.stateNode=t;e:{switch(o=tc(n,r),n){case"dialog":_e("cancel",t),_e("close",t),i=r;break;case"iframe":case"object":case"embed":_e("load",t),i=r;break;case"video":case"audio":for(i=0;i<vs.length;i++)_e(vs[i],t);i=r;break;case"source":_e("error",t),i=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),i=r;break;case"details":_e("toggle",t),i=r;break;case"input":Wd(t,r),i=Ku(t,r),_e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Se({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Gd(t,r),i=Ju(t,r),_e("invalid",t);break;default:i=r}ec(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Fg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Og(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ls(t,u):typeof u=="number"&&Ls(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Os.hasOwnProperty(s)?u!=null&&s==="onScroll"&&_e("scroll",t):u!=null&&dh(t,s,u,o))}switch(n){case"input":jo(t),Qd(t,r,!1);break;case"textarea":jo(t),Kd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ci(t,!!r.multiple,s,!1):r.defaultValue!=null&&ci(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)av(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ir(Gs.current),Ir(rn.current),Go(e)){if(r=e.stateNode,n=e.memoizedProps,r[tn]=e,(s=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Qo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=e,e.stateNode=r}return st(e),null;case 13:if(we(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Ct!==null&&e.mode&1&&!(e.flags&128))Sy(),Ti(),e.flags|=98560,s=!1;else if(s=Go(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[tn]=e}else Ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),s=!1}else qt!==null&&(Mc(qt),qt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?$e===0&&($e=3):Kh())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return Ii(),Cc(t,e),t===null&&qs(e.stateNode.containerInfo),st(e),null;case 10:return Vh(e.type._context),st(e),null;case 17:return Tt(e.type)&&Da(),st(e),null;case 19:if(we(xe),s=e.memoizedState,s===null)return st(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ds(s,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ua(t),o!==null){for(e.flags|=128,ds(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ke()>Ai&&(e.flags|=128,r=!0,ds(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ua(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ds(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return st(e),null}else 2*ke()-s.renderingStartTime>Ai&&n!==1073741824&&(e.flags|=128,r=!0,ds(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,n=xe.current,ye(xe,r?n&1|2:n&1),e):(st(e),null);case 22:case 23:return Gh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function y1(t,e){switch(Rh(e),e.tag){case 1:return Tt(e.type)&&Da(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ii(),we(wt),we(ct),Lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Oh(e),null;case 13:if(we(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(xe),null;case 4:return Ii(),null;case 10:return Vh(e.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var Yo=!1,lt=!1,v1=typeof WeakSet=="function"?WeakSet:Set,Q=null;function li(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Rc(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Fp=!1;function _1(t,e){if(hc=Pa,t=fy(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,d=0,p=t,g=null;t:for(;;){for(var S;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(S=p.firstChild)!==null;)g=p,p=S;for(;;){if(p===t)break t;if(g===n&&++h===i&&(l=o),g===s&&++d===r&&(u=o),(S=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(fc={focusedElem:t,selectionRange:n},Pa=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var P=N.memoizedProps,V=N.memoizedState,C=e.stateNode,T=C.getSnapshotBeforeUpdate(e.elementType===e.type?P:zt(e.type,P),V);C.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Pe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return N=Fp,Fp=!1,N}function Rs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Rc(e,n,s)}i=i.next}while(i!==r)}}function _l(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lv(t){var e=t.alternate;e!==null&&(t.alternate=null,lv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[Ws],delete e[mc],delete e[t1],delete e[n1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uv(t){return t.tag===5||t.tag===3||t.tag===4}function jp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Va));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kc(t,e,n),t=t.sibling;t!==null;)kc(t,e,n),t=t.sibling}var Xe=null,$t=!1;function kn(t,e,n){for(n=n.child;n!==null;)cv(t,e,n),n=n.sibling}function cv(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(hl,n)}catch{}switch(n.tag){case 5:lt||li(n,e);case 6:var r=Xe,i=$t;Xe=null,kn(t,e,n),Xe=r,$t=i,Xe!==null&&($t?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&($t?(t=Xe,n=n.stateNode,t.nodeType===8?Iu(t.parentNode,n):t.nodeType===1&&Iu(t,n),Bs(t)):Iu(Xe,n.stateNode));break;case 4:r=Xe,i=$t,Xe=n.stateNode.containerInfo,$t=!0,kn(t,e,n),Xe=r,$t=i;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Rc(n,e,o),i=i.next}while(i!==r)}kn(t,e,n);break;case 1:if(!lt&&(li(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}kn(t,e,n);break;case 21:kn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,kn(t,e,n),lt=r):kn(t,e,n);break;default:kn(t,e,n)}}function Up(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new v1),e.forEach(function(r){var i=R1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,$t=!1;break e;case 3:Xe=l.stateNode.containerInfo,$t=!0;break e;case 4:Xe=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if(Xe===null)throw Error(U(160));cv(s,o,i),Xe=null,$t=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Pe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hv(e,t),e=e.sibling}function hv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),Jt(t),r&4){try{Rs(3,t,t.return),_l(3,t)}catch(P){Pe(t,t.return,P)}try{Rs(5,t,t.return)}catch(P){Pe(t,t.return,P)}}break;case 1:Bt(e,t),Jt(t),r&512&&n!==null&&li(n,n.return);break;case 5:if(Bt(e,t),Jt(t),r&512&&n!==null&&li(n,n.return),t.flags&32){var i=t.stateNode;try{Ls(i,"")}catch(P){Pe(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Dg(i,s),tc(l,o);var h=tc(l,s);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?Fg(i,p):d==="dangerouslySetInnerHTML"?Og(i,p):d==="children"?Ls(i,p):dh(i,d,p,h)}switch(l){case"input":Xu(i,s);break;case"textarea":bg(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?ci(i,!!s.multiple,S,!1):g!==!!s.multiple&&(s.defaultValue!=null?ci(i,!!s.multiple,s.defaultValue,!0):ci(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ws]=s}catch(P){Pe(t,t.return,P)}}break;case 6:if(Bt(e,t),Jt(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Pe(t,t.return,P)}}break;case 3:if(Bt(e,t),Jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(e.containerInfo)}catch(P){Pe(t,t.return,P)}break;case 4:Bt(e,t),Jt(t);break;case 13:Bt(e,t),Jt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Wh=ke())),r&4&&Up(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(h=lt)||d,Bt(e,t),lt=h):Bt(e,t),Jt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(p=Q=d;Q!==null;){switch(g=Q,S=g.child,g.tag){case 0:case 11:case 14:case 15:Rs(4,g,g.return);break;case 1:li(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(P){Pe(r,n,P)}}break;case 5:li(g,g.return);break;case 22:if(g.memoizedState!==null){zp(p);continue}}S!==null?(S.return=g,Q=S):zp(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Lg("display",o))}catch(P){Pe(t,t.return,P)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(P){Pe(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Bt(e,t),Jt(t),r&4&&Up(t);break;case 21:break;default:Bt(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ls(i,""),r.flags&=-33);var s=jp(t);kc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=jp(t);Nc(t,l,o);break;default:throw Error(U(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E1(t,e,n){Q=t,fv(t)}function fv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yo;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||lt;l=Yo;var h=lt;if(Yo=o,(lt=u)&&!h)for(Q=i;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?$p(i):u!==null?(u.return=o,Q=u):$p(i);for(;s!==null;)Q=s,fv(s),s=s.sibling;Q=i,Yo=l,lt=h}Bp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):Bp(t)}}function Bp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||_l(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Sp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Bs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}lt||e.flags&512&&Pc(e)}catch(g){Pe(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function zp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function $p(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_l(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pe(e,i,u)}}var s=e.return;try{Pc(e)}catch(u){Pe(e,s,u)}break;case 5:var o=e.return;try{Pc(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var w1=Math.ceil,$a=In.ReactCurrentDispatcher,qh=In.ReactCurrentOwner,Ft=In.ReactCurrentBatchConfig,le=0,Ke=null,Me=null,Ze=0,At=0,ui=cr(0),$e=0,Js=null,kr=0,El=0,Hh=0,Ps=null,_t=null,Wh=0,Ai=1/0,fn=null,qa=!1,Vc=null,Wn=null,Jo=!1,Fn=null,Ha=0,Ns=0,Dc=null,ma=-1,ga=0;function pt(){return le&6?ke():ma!==-1?ma:ma=ke()}function Qn(t){return t.mode&1?le&2&&Ze!==0?Ze&-Ze:i1.transition!==null?(ga===0&&(ga=Xg()),ga):(t=fe,t!==0||(t=window.event,t=t===void 0?16:ry(t.type)),t):1}function Qt(t,e,n,r){if(50<Ns)throw Ns=0,Dc=null,Error(U(185));po(t,n,r),(!(le&2)||t!==Ke)&&(t===Ke&&(!(le&2)&&(El|=n),$e===4&&Mn(t,Ze)),xt(t,r),n===1&&le===0&&!(e.mode&1)&&(Ai=ke()+500,gl&&hr()))}function xt(t,e){var n=t.callbackNode;iw(t,e);var r=Ra(t,t===Ke?Ze:0);if(r===0)n!==null&&Jd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jd(n),e===1)t.tag===0?r1(qp.bind(null,t)):Ty(qp.bind(null,t)),Zw(function(){!(le&6)&&hr()}),n=null;else{switch(Yg(r)){case 1:n=vh;break;case 4:n=Gg;break;case 16:n=Ca;break;case 536870912:n=Kg;break;default:n=Ca}n=Ev(n,dv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dv(t,e){if(ma=-1,ga=0,le&6)throw Error(U(327));var n=t.callbackNode;if(mi()&&t.callbackNode!==n)return null;var r=Ra(t,t===Ke?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wa(t,r);else{e=r;var i=le;le|=2;var s=mv();(Ke!==t||Ze!==e)&&(fn=null,Ai=ke()+500,Ar(t,e));do try{I1();break}catch(l){pv(t,l)}while(!0);kh(),$a.current=s,le=i,Me!==null?e=0:(Ke=null,Ze=0,e=$e)}if(e!==0){if(e===2&&(i=oc(t),i!==0&&(r=i,e=bc(t,i))),e===1)throw n=Js,Ar(t,0),Mn(t,r),xt(t,ke()),n;if(e===6)Mn(t,r);else{if(i=t.current.alternate,!(r&30)&&!T1(i)&&(e=Wa(t,r),e===2&&(s=oc(t),s!==0&&(r=s,e=bc(t,s))),e===1))throw n=Js,Ar(t,0),Mn(t,r),xt(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:_r(t,_t,fn);break;case 3:if(Mn(t,r),(r&130023424)===r&&(e=Wh+500-ke(),10<e)){if(Ra(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pc(_r.bind(null,t,_t,fn),e);break}_r(t,_t,fn);break;case 4:if(Mn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Wt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w1(r/1960))-r,10<r){t.timeoutHandle=pc(_r.bind(null,t,_t,fn),r);break}_r(t,_t,fn);break;case 5:_r(t,_t,fn);break;default:throw Error(U(329))}}}return xt(t,ke()),t.callbackNode===n?dv.bind(null,t):null}function bc(t,e){var n=Ps;return t.current.memoizedState.isDehydrated&&(Ar(t,e).flags|=256),t=Wa(t,e),t!==2&&(e=_t,_t=n,e!==null&&Mc(e)),t}function Mc(t){_t===null?_t=t:_t.push.apply(_t,t)}function T1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e){for(e&=~Hh,e&=~El,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function qp(t){if(le&6)throw Error(U(327));mi();var e=Ra(t,0);if(!(e&1))return xt(t,ke()),null;var n=Wa(t,e);if(t.tag!==0&&n===2){var r=oc(t);r!==0&&(e=r,n=bc(t,r))}if(n===1)throw n=Js,Ar(t,0),Mn(t,e),xt(t,ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,_t,fn),xt(t,ke()),null}function Qh(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ai=ke()+500,gl&&hr())}}function Vr(t){Fn!==null&&Fn.tag===0&&!(le&6)&&mi();var e=le;le|=1;var n=Ft.transition,r=fe;try{if(Ft.transition=null,fe=1,t)return t()}finally{fe=r,Ft.transition=n,le=e,!(le&6)&&hr()}}function Gh(){At=ui.current,we(ui)}function Ar(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Jw(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Rh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Da();break;case 3:Ii(),we(wt),we(ct),Lh();break;case 5:Oh(r);break;case 4:Ii();break;case 13:we(xe);break;case 19:we(xe);break;case 10:Vh(r.type._context);break;case 22:case 23:Gh()}n=n.return}if(Ke=t,Me=t=Gn(t.current,null),Ze=At=e,$e=0,Js=null,Hh=El=kr=0,_t=Ps=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xr=null}return t}function pv(t,e){do{var n=Me;try{if(kh(),fa.current=za,Ba){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ba=!1}if(Nr=0,Qe=ze=Ie=null,Cs=!1,Ks=0,qh.current=null,n===null||n.return===null){$e=1,Js=e,Me=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var S=kp(o);if(S!==null){S.flags&=-257,Vp(S,o,l,s,e),S.mode&1&&Np(s,h,e),e=S,u=h;var N=e.updateQueue;if(N===null){var P=new Set;P.add(u),e.updateQueue=P}else N.add(u);break e}else{if(!(e&1)){Np(s,h,e),Kh();break e}u=Error(U(426))}}else if(Te&&l.mode&1){var V=kp(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Vp(V,o,l,s,e),Ph(Si(u,l));break e}}s=u=Si(u,l),$e!==4&&($e=2),Ps===null?Ps=[s]:Ps.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=Yy(s,u,e);Ip(s,C);break e;case 1:l=u;var T=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Wn===null||!Wn.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=Jy(s,l,e);Ip(s,D);break e}}s=s.return}while(s!==null)}yv(n)}catch(F){e=F,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function mv(){var t=$a.current;return $a.current=za,t===null?za:t}function Kh(){($e===0||$e===3||$e===2)&&($e=4),Ke===null||!(kr&268435455)&&!(El&268435455)||Mn(Ke,Ze)}function Wa(t,e){var n=le;le|=2;var r=mv();(Ke!==t||Ze!==e)&&(fn=null,Ar(t,e));do try{x1();break}catch(i){pv(t,i)}while(!0);if(kh(),le=n,$a.current=r,Me!==null)throw Error(U(261));return Ke=null,Ze=0,$e}function x1(){for(;Me!==null;)gv(Me)}function I1(){for(;Me!==null&&!KE();)gv(Me)}function gv(t){var e=_v(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?yv(t):Me=e,qh.current=null}function yv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y1(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Me=null;return}}else if(n=g1(n,e,At),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);$e===0&&($e=5)}function _r(t,e,n){var r=fe,i=Ft.transition;try{Ft.transition=null,fe=1,S1(t,e,n,r)}finally{Ft.transition=i,fe=r}return null}function S1(t,e,n,r){do mi();while(Fn!==null);if(le&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sw(t,s),t===Ke&&(Me=Ke=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jo||(Jo=!0,Ev(Ca,function(){return mi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ft.transition,Ft.transition=null;var o=fe;fe=1;var l=le;le|=4,qh.current=null,_1(t,n),hv(n,t),Hw(fc),Pa=!!hc,fc=hc=null,t.current=n,E1(n),XE(),le=l,fe=o,Ft.transition=s}else t.current=n;if(Jo&&(Jo=!1,Fn=t,Ha=i),s=t.pendingLanes,s===0&&(Wn=null),ZE(n.stateNode),xt(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qa)throw qa=!1,t=Vc,Vc=null,t;return Ha&1&&t.tag!==0&&mi(),s=t.pendingLanes,s&1?t===Dc?Ns++:(Ns=0,Dc=t):Ns=0,hr(),null}function mi(){if(Fn!==null){var t=Yg(Ha),e=Ft.transition,n=fe;try{if(Ft.transition=null,fe=16>t?16:t,Fn===null)var r=!1;else{if(t=Fn,Fn=null,Ha=0,le&6)throw Error(U(331));var i=le;for(le|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:Rs(8,d,s)}var p=d.child;if(p!==null)p.return=d,Q=p;else for(;Q!==null;){d=Q;var g=d.sibling,S=d.return;if(lv(d),d===h){Q=null;break}if(g!==null){g.return=S,Q=g;break}Q=S}}}var N=s.alternate;if(N!==null){var P=N.child;if(P!==null){N.child=null;do{var V=P.sibling;P.sibling=null,P=V}while(P!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rs(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,Q=C;break e}Q=s.return}}var T=t.current;for(Q=T;Q!==null;){o=Q;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,Q=R;else e:for(o=T;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_l(9,l)}}catch(F){Pe(l,l.return,F)}if(l===o){Q=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,Q=D;break e}Q=l.return}}if(le=i,hr(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(hl,t)}catch{}r=!0}return r}finally{fe=n,Ft.transition=e}}return!1}function Hp(t,e,n){e=Si(n,e),e=Yy(t,e,1),t=Hn(t,e,1),e=pt(),t!==null&&(po(t,1,e),xt(t,e))}function Pe(t,e,n){if(t.tag===3)Hp(t,t,n);else for(;e!==null;){if(e.tag===3){Hp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){t=Si(n,t),t=Jy(e,t,1),e=Hn(e,t,1),t=pt(),e!==null&&(po(e,1,t),xt(e,t));break}}e=e.return}}function A1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Ze&n)===n&&($e===4||$e===3&&(Ze&130023424)===Ze&&500>ke()-Wh?Ar(t,0):Hh|=n),xt(t,e)}function vv(t,e){e===0&&(t.mode&1?(e=zo,zo<<=1,!(zo&130023424)&&(zo=4194304)):e=1);var n=pt();t=_n(t,e),t!==null&&(po(t,e,n),xt(t,n))}function C1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vv(t,n)}function R1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),vv(t,n)}var _v;_v=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,m1(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Te&&e.flags&1048576&&xy(e,Oa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pa(t,e),t=e.pendingProps;var i=wi(e,ct.current);pi(e,n),i=jh(null,e,r,t,i,n);var s=Uh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(s=!0,ba(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bh(e),i.updater=vl,e.stateNode=i,i._reactInternals=e,wc(e,r,t,n),e=Ic(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&Ch(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=N1(r),t=zt(r,t),i){case 0:e=xc(null,e,r,t,n);break e;case 1:e=Mp(null,e,r,t,n);break e;case 11:e=Dp(null,e,r,t,n);break e;case 14:e=bp(null,e,r,zt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),xc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Mp(t,e,r,i,n);case 3:e:{if(nv(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Py(t,e),ja(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Si(Error(U(423)),e),e=Op(t,e,r,n,i);break e}else if(r!==i){i=Si(Error(U(424)),e),e=Op(t,e,r,n,i);break e}else for(Ct=qn(e.stateNode.containerInfo.firstChild),Rt=e,Te=!0,qt=null,n=Cy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===i){e=En(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return Ny(e),t===null&&vc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,dc(r,i)?o=null:s!==null&&dc(r,s)&&(e.flags|=32),tv(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&vc(e),null;case 13:return rv(t,e,n);case 4:return Mh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xi(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Dp(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ye(La,r._currentValue),r._currentValue=o,s!==null)if(Gt(s.value,o)){if(s.children===i.children&&!wt.current){e=En(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=gn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),_c(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),_c(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pi(e,n),i=jt(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=zt(r,e.pendingProps),i=zt(r.type,i),bp(t,e,r,i,n);case 15:return Zy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),pa(t,e),e.tag=1,Tt(r)?(t=!0,ba(e)):t=!1,pi(e,n),Xy(e,r,i),wc(e,r,i,n),Ic(null,e,r,!0,t,n);case 19:return iv(t,e,n);case 22:return ev(t,e,n)}throw Error(U(156,e.tag))};function Ev(t,e){return Qg(t,e)}function P1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new P1(t,e,n,r)}function Xh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N1(t){if(typeof t=="function")return Xh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mh)return 11;if(t===gh)return 14}return 2}function Gn(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ya(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Xh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zr:return Cr(n.children,i,s,e);case ph:o=8,i|=8;break;case Hu:return t=Lt(12,n,e,i|2),t.elementType=Hu,t.lanes=s,t;case Wu:return t=Lt(13,n,e,i),t.elementType=Wu,t.lanes=s,t;case Qu:return t=Lt(19,n,e,i),t.elementType=Qu,t.lanes=s,t;case Ng:return wl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rg:o=10;break e;case Pg:o=9;break e;case mh:o=11;break e;case gh:o=14;break e;case Vn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cr(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function wl(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=Ng,t.lanes=n,t.stateNode={isHidden:!1},t}function Vu(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function k1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=du(0),this.expirationTimes=du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yh(t,e,n,r,i,s,o,l,u){return t=new k1(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Lt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(s),t}function V1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wv(t){if(!t)return nr;t=t._reactInternals;e:{if(Or(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Tt(n))return wy(t,n,e)}return e}function Tv(t,e,n,r,i,s,o,l,u){return t=Yh(n,r,!0,t,i,s,o,l,u),t.context=wv(null),n=t.current,r=pt(),i=Qn(n),s=gn(r,i),s.callback=e??null,Hn(n,s,i),t.current.lanes=i,po(t,i,r),xt(t,r),t}function Tl(t,e,n,r){var i=e.current,s=pt(),o=Qn(i);return n=wv(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(i,e,o),t!==null&&(Qt(t,i,o,s),ha(t,i,o)),o}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jh(t,e){Wp(t,e),(t=t.alternate)&&Wp(t,e)}function D1(){return null}var xv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zh(t){this._internalRoot=t}xl.prototype.render=Zh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Tl(t,e,null,null)};xl.prototype.unmount=Zh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vr(function(){Tl(null,t,null,null)}),e[vn]=null}};function xl(t){this._internalRoot=t}xl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ey();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bn.length&&e!==0&&e<bn[n].priority;n++);bn.splice(n,0,t),n===0&&ny(t)}};function ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function b1(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Qa(o);s.call(h)}}var o=Tv(e,r,t,0,null,!1,!1,"",Qp);return t._reactRootContainer=o,t[vn]=o.current,qs(t.nodeType===8?t.parentNode:t),Vr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Qa(u);l.call(h)}}var u=Yh(t,0,!1,null,null,!1,!1,"",Qp);return t._reactRootContainer=u,t[vn]=u.current,qs(t.nodeType===8?t.parentNode:t),Vr(function(){Tl(e,u,n,r)}),u}function Sl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Qa(o);l.call(u)}}Tl(e,o,t,i)}else o=b1(n,e,t,i,r);return Qa(o)}Jg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ys(e.pendingLanes);n!==0&&(_h(e,n|1),xt(e,ke()),!(le&6)&&(Ai=ke()+500,hr()))}break;case 13:Vr(function(){var r=_n(t,1);if(r!==null){var i=pt();Qt(r,t,1,i)}}),Jh(t,1)}};Eh=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=pt();Qt(e,t,134217728,n)}Jh(t,134217728)}};Zg=function(t){if(t.tag===13){var e=Qn(t),n=_n(t,e);if(n!==null){var r=pt();Qt(n,t,e,r)}Jh(t,e)}};ey=function(){return fe};ty=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};rc=function(t,e,n){switch(e){case"input":if(Xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ml(r);if(!i)throw Error(U(90));Vg(r),Xu(r,i)}}}break;case"textarea":bg(t,n);break;case"select":e=n.value,e!=null&&ci(t,!!n.multiple,e,!1)}};Bg=Qh;zg=Vr;var M1={usingClientEntryPoint:!1,Events:[go,ri,ml,jg,Ug,Qh]},ps={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O1={bundleType:ps.bundleType,version:ps.version,rendererPackageName:ps.rendererPackageName,rendererConfig:ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hg(t),t===null?null:t.stateNode},findFiberByHostInstance:ps.findFiberByHostInstance||D1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{hl=Zo.inject(O1),nn=Zo}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M1;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(e))throw Error(U(200));return V1(t,e,null,n)};Nt.createRoot=function(t,e){if(!ef(t))throw Error(U(299));var n=!1,r="",i=xv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yh(t,1,!1,null,null,n,!1,r,i),t[vn]=e.current,qs(t.nodeType===8?t.parentNode:t),new Zh(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Hg(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Vr(t)};Nt.hydrate=function(t,e,n){if(!Il(e))throw Error(U(200));return Sl(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!ef(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=xv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tv(e,null,t,1,n??null,i,!1,s,o),t[vn]=e.current,qs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xl(e)};Nt.render=function(t,e,n){if(!Il(e))throw Error(U(200));return Sl(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!Il(t))throw Error(U(40));return t._reactRootContainer?(Vr(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};Nt.unstable_batchedUpdates=Qh;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Il(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Sl(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function Iv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iv)}catch(t){console.error(t)}}Iv(),Ig.exports=Nt;var L1=Ig.exports,Sv,Gp=L1;Sv=Gp.createRoot,Gp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zs.apply(this,arguments)}var jn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jn||(jn={}));const Kp="popstate";function F1(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Oc("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ga(i)}return U1(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Av(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j1(){return Math.random().toString(36).substr(2,8)}function Xp(t,e){return{usr:t.state,key:t.key,idx:e}}function Oc(t,e,n,r){return n===void 0&&(n=null),Zs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Li(e):e,{state:n,key:e&&e.key||r||j1()})}function Ga(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Li(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function U1(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=jn.Pop,u=null,h=d();h==null&&(h=0,o.replaceState(Zs({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function p(){l=jn.Pop;let V=d(),C=V==null?null:V-h;h=V,u&&u({action:l,location:P.location,delta:C})}function g(V,C){l=jn.Push;let T=Oc(P.location,V,C);h=d()+1;let R=Xp(T,h),D=P.createHref(T);try{o.pushState(R,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(D)}s&&u&&u({action:l,location:P.location,delta:1})}function S(V,C){l=jn.Replace;let T=Oc(P.location,V,C);h=d();let R=Xp(T,h),D=P.createHref(T);o.replaceState(R,"",D),s&&u&&u({action:l,location:P.location,delta:0})}function N(V){let C=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof V=="string"?V:Ga(V);return T=T.replace(/ $/,"%20"),Fe(C,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,C)}let P={get action(){return l},get location(){return t(i,o)},listen(V){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Kp,p),u=V,()=>{i.removeEventListener(Kp,p),u=null}},createHref(V){return e(i,V)},createURL:N,encodeLocation(V){let C=N(V);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:S,go(V){return o.go(V)}};return P}var Yp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Yp||(Yp={}));function B1(t,e,n){return n===void 0&&(n="/"),z1(t,e,n)}function z1(t,e,n,r){let i=typeof e=="string"?Li(e):e,s=tf(i.pathname||"/",n);if(s==null)return null;let o=Cv(t);$1(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=tT(s);l=J1(o[u],h)}return l}function Cv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Fe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Kn([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(Fe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Cv(s.children,e,d,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:X1(h,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of Rv(s.path))i(s,o,u)}),e}function Rv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Rv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function $1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Y1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const q1=/^:[\w-]+$/,H1=3,W1=2,Q1=1,G1=10,K1=-2,Jp=t=>t==="*";function X1(t,e){let n=t.split("/"),r=n.length;return n.some(Jp)&&(r+=K1),e&&(r+=W1),n.filter(i=>!Jp(i)).reduce((i,s)=>i+(q1.test(s)?H1:s===""?Q1:G1),r)}function Y1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function J1(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=Z1({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Kn([s,p.pathname]),pathnameBase:sT(Kn([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Kn([s,p.pathnameBase]))}return o}function Z1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=eT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,d,p)=>{let{paramName:g,isOptional:S}=d;if(g==="*"){let P=l[p]||"";o=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const N=l[p];return S&&!N?h[g]=void 0:h[g]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function eT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Av(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function tT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Av(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function tf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function nT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Li(t):t;return{pathname:n?n.startsWith("/")?n:rT(n,e):e,search:oT(r),hash:aT(i)}}function rT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pv(t,e){let n=iT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Nv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Li(t):(i=Zs({},t),Fe(!i.pathname||!i.pathname.includes("?"),bu("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),bu("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),bu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=nT(i,l),h=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}const Kn=t=>t.join("/").replace(/\/\/+/g,"/"),sT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,aT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kv=["post","put","patch","delete"];new Set(kv);const uT=["get",...kv];new Set(uT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eo(){return eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eo.apply(this,arguments)}const nf=M.createContext(null),cT=M.createContext(null),Lr=M.createContext(null),Al=M.createContext(null),Fr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Vv=M.createContext(null);function hT(t,e){let{relative:n}=e===void 0?{}:e;vo()||Fe(!1);let{basename:r,navigator:i}=M.useContext(Lr),{hash:s,pathname:o,search:l}=bv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Kn([r,o])),i.createHref({pathname:u,search:l,hash:s})}function vo(){return M.useContext(Al)!=null}function Cl(){return vo()||Fe(!1),M.useContext(Al).location}function Dv(t){M.useContext(Lr).static||M.useLayoutEffect(t)}function fT(){let{isDataRoute:t}=M.useContext(Fr);return t?ST():dT()}function dT(){vo()||Fe(!1);let t=M.useContext(nf),{basename:e,future:n,navigator:r}=M.useContext(Lr),{matches:i}=M.useContext(Fr),{pathname:s}=Cl(),o=JSON.stringify(Pv(i,n.v7_relativeSplatPath)),l=M.useRef(!1);return Dv(()=>{l.current=!0}),M.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let p=Nv(h,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Kn([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,s,t])}function bv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Lr),{matches:i}=M.useContext(Fr),{pathname:s}=Cl(),o=JSON.stringify(Pv(i,r.v7_relativeSplatPath));return M.useMemo(()=>Nv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function pT(t,e){return mT(t,e)}function mT(t,e,n,r){vo()||Fe(!1);let{navigator:i}=M.useContext(Lr),{matches:s}=M.useContext(Fr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Cl(),d;if(e){var p;let V=typeof e=="string"?Li(e):e;u==="/"||(p=V.pathname)!=null&&p.startsWith(u)||Fe(!1),d=V}else d=h;let g=d.pathname||"/",S=g;if(u!=="/"){let V=u.replace(/^\//,"").split("/");S="/"+g.replace(/^\//,"").split("/").slice(V.length).join("/")}let N=B1(t,{pathname:S}),P=ET(N&&N.map(V=>Object.assign({},V,{params:Object.assign({},l,V.params),pathname:Kn([u,i.encodeLocation?i.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?u:Kn([u,i.encodeLocation?i.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),s,n,r);return e&&P?M.createElement(Al.Provider,{value:{location:eo({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:jn.Pop}},P):P}function gT(){let t=IT(),e=lT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const yT=M.createElement(gT,null);class vT extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Fr.Provider,{value:this.props.routeContext},M.createElement(Vv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _T(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(nf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Fr.Provider,{value:e},r)}function ET(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);d>=0||Fe(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:g,errors:S}=n,N=p.route.loader&&g[p.route.id]===void 0&&(!S||S[p.route.id]===void 0);if(p.route.lazy||N){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,p,g)=>{let S,N=!1,P=null,V=null;n&&(S=l&&p.route.id?l[p.route.id]:void 0,P=p.route.errorElement||yT,u&&(h<0&&g===0?(AT("route-fallback"),N=!0,V=null):h===g&&(N=!0,V=p.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,g+1)),T=()=>{let R;return S?R=P:N?R=V:p.route.Component?R=M.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=d,M.createElement(_T,{match:p,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(vT,{location:n.location,revalidation:n.revalidation,component:P,error:S,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):T()},null)}var Mv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Mv||{}),Ov=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ov||{});function wT(t){let e=M.useContext(nf);return e||Fe(!1),e}function TT(t){let e=M.useContext(cT);return e||Fe(!1),e}function xT(t){let e=M.useContext(Fr);return e||Fe(!1),e}function Lv(t){let e=xT(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function IT(){var t;let e=M.useContext(Vv),n=TT(),r=Lv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ST(){let{router:t}=wT(Mv.UseNavigateStable),e=Lv(Ov.UseNavigateStable),n=M.useRef(!1);return Dv(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,eo({fromRouteId:e},s)))},[t,e])}const Zp={};function AT(t,e,n){Zp[t]||(Zp[t]=!0)}function CT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Er(t){Fe(!1)}function RT(t){let{basename:e="/",children:n=null,location:r,navigationType:i=jn.Pop,navigator:s,static:o=!1,future:l}=t;vo()&&Fe(!1);let u=e.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:s,static:o,future:eo({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Li(r));let{pathname:d="/",search:p="",hash:g="",state:S=null,key:N="default"}=r,P=M.useMemo(()=>{let V=tf(d,u);return V==null?null:{location:{pathname:V,search:p,hash:g,state:S,key:N},navigationType:i}},[u,d,p,g,S,N,i]);return P==null?null:M.createElement(Lr.Provider,{value:h},M.createElement(Al.Provider,{children:n,value:P}))}function PT(t){let{children:e,location:n}=t;return pT(Lc(e),n)}new Promise(()=>{});function Lc(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,Lc(r.props.children,s));return}r.type!==Er&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lc(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fc.apply(this,arguments)}function NT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VT(t,e){return t.button===0&&(!e||e==="_self")&&!kT(t)}const DT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bT="6";try{window.__reactRouterVersion=bT}catch{}const MT="startTransition",em=AE[MT];function OT(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=F1({window:i,v5Compat:!0}));let o=s.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},d=M.useCallback(p=>{h&&em?em(()=>u(p)):u(p)},[u,h]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.useEffect(()=>CT(r),[r]),M.createElement(RT,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const LT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jT=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:p}=e,g=NT(e,DT),{basename:S}=M.useContext(Lr),N,P=!1;if(typeof h=="string"&&FT.test(h)&&(N=h,LT))try{let R=new URL(window.location.href),D=h.startsWith("//")?new URL(R.protocol+h):new URL(h),F=tf(D.pathname,S);D.origin===R.origin&&F!=null?h=F+D.search+D.hash:P=!0}catch{}let V=hT(h,{relative:i}),C=UT(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:p});function T(R){r&&r(R),R.defaultPrevented||C(R)}return M.createElement("a",Fc({},g,{href:N||V,onClick:P||s?r:T,ref:n,target:u}))});var tm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tm||(tm={}));var nm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nm||(nm={}));function UT(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=fT(),h=Cl(),d=bv(t,{relative:o});return M.useCallback(p=>{if(VT(p,n)){p.preventDefault();let g=r!==void 0?r:Ga(h)===Ga(d);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,d,r,i,n,t,s,o,l])}function BT(){const t=[{title:"1. Root of Equation",topics:[{id:"bisection",name:"Bisection Method",path:"/bisection"},{id:"falsepo",name:"False-Position Method",path:"/falsepo"},{id:"onepoint",name:"One-Point Method",path:"/onepoint"},{id:"newtonrap",name:"Newton Raphson Method",path:"/newtonrap"},{id:"secant",name:"Secant Method",path:"/secant"}]},{title:"2. Linear System",topics:[{id:"gauss-elim",name:"Gauss Elimination",path:"/gauss-elim"},{id:"gauss-jordan",name:"Gauss-Jordan",path:"/gauss-jordan"},{id:"lu",name:"LU Decomposition",path:"/lu"}]},{title:"3. Interpolation",topics:[{id:"lagrange",name:"Lagrange",path:"/lagrange"},{id:"newton-interp",name:"Newton Interpolation",path:"/newton-interp"}]},{title:"4. Regression",topics:[{id:"linear-reg",name:"Linear Regression",path:"/linear-reg"},{id:"poly-reg",name:"Polynomial Regression",path:"/poly-reg"}]},{title:"5. Integration",topics:[{id:"trapezoidal",name:"Trapezoidal Rule",path:"/trapezoidal"},{id:"simpson",name:"Simpson’s Rule",path:"/simpson"}]},{title:"6. Differentiation",topics:[{id:"forward-diff",name:"Forward Difference",path:"/forward-diff"},{id:"backward-diff",name:"Backward Difference",path:"/backward-diff"},{id:"central-diff",name:"Central Difference",path:"/central-diff"}]}];return A.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center p-6 bg-slate-900",children:[A.jsx("h1",{className:"text-3xl font-bold text-cyan-400 mb-8 text-center fade-in",children:"Numerical Methods"}),A.jsx("div",{className:"flex justify-center items-center w-full",children:A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:t.map(e=>A.jsxs("div",{className:`bg-slate-800 rounded-xl p-5 shadow-lg border border-cyan-700 w-72\r
                         transform transition-all duration-300 fade-in-delay1\r
                         hover:scale-105 hover:shadow-2xl glow-btn`,children:[A.jsx("h2",{className:"text-lg font-semibold text-cyan-300 mb-3 text-center",children:e.title}),A.jsx("ul",{className:"space-y-2",children:e.topics.map(n=>A.jsx("li",{className:"bg-slate-700 p-2 rounded-md hover:bg-slate-600 transition-colors",children:A.jsx(jT,{to:n.path,className:"block text-center",children:n.name})},n.id))})]},e.title))})})]})}const zT=()=>{};var rm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$T=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,d=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(g=64)),r.push(n[d],n[p],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$T(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new qT;const g=s<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),p!==64){const N=h<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HT=function(t){const e=Fv(t);return jv.encodeByteArray(e,!0)},Ka=function(t){return HT(t).replace(/\./g,"")},WT=function(t){try{return jv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=()=>QT().__FIREBASE_DEFAULTS__,KT=()=>{if(typeof process>"u"||typeof rm>"u")return;const t=rm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WT(t[1]);return e&&JSON.parse(e)},rf=()=>{try{return zT()||GT()||KT()||XT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YT=t=>{var e,n;return(n=(e=rf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},JT=t=>{const e=YT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uv=()=>{var t;return(t=rf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ex(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ka(JSON.stringify(n)),Ka(JSON.stringify(o)),""].join(".")}const ks={};function nx(){const t={prod:[],emulator:[]};for(const e of Object.keys(ks))ks[e]?t.emulator.push(e):t.prod.push(e);return t}function rx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let im=!1;function ix(t,e){if(typeof window>"u"||typeof document>"u"||!sf(window.location.host)||ks[t]===e||ks[t]||im)return;ks[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=nx().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{im=!0,o()},g}function d(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=rx(r),S=n("text"),N=document.getElementById(S)||document.createElement("span"),P=n("learnmore"),V=document.getElementById(P)||document.createElement("a"),C=n("preprendIcon"),T=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const R=g.element;l(R),d(V,P);const D=h();u(T,C),R.append(T,N,V,D),document.body.appendChild(R)}s?(N.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ox(){var e;const t=(e=rf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ax(){return!ox()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lx(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="FirebaseError";class Fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cx,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bv.prototype.create)}}class Bv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?hx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Fi(i,l,r)}}function hx(t,e){return t.replace(fx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fx=/\{\$([^}]+)}/g;function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(sm(s)&&sm(o)){if(!Xa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function sm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){return t&&t._delegate?t._delegate:t}class to{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mx(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:px(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function px(t){return t===wr?void 0:t}function mx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const yx={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},vx=ae.INFO,_x={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},Ex=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_x[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zv{constructor(e){this.name=e,this._logLevel=vx,this._logHandler=Ex,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const wx=(t,e)=>e.some(n=>t instanceof n);let om,am;function Tx(){return om||(om=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xx(){return am||(am=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $v=new WeakMap,jc=new WeakMap,qv=new WeakMap,Mu=new WeakMap,of=new WeakMap;function Ix(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$v.set(n,t)}).catch(()=>{}),of.set(e,t),e}function Sx(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jc.set(t,e)}let Uc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ax(t){Uc=t(Uc)}function Cx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ou(this),e,...n);return qv.set(r,e.sort?e.sort():[e]),Xn(r)}:xx().includes(t)?function(...e){return t.apply(Ou(this),e),Xn($v.get(this))}:function(...e){return Xn(t.apply(Ou(this),e))}}function Rx(t){return typeof t=="function"?Cx(t):(t instanceof IDBTransaction&&Sx(t),wx(t,Tx())?new Proxy(t,Uc):t)}function Xn(t){if(t instanceof IDBRequest)return Ix(t);if(Mu.has(t))return Mu.get(t);const e=Rx(t);return e!==t&&(Mu.set(t,e),of.set(e,t)),e}const Ou=t=>of.get(t);function Px(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Xn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Xn(o.result),u.oldVersion,u.newVersion,Xn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Nx=["get","getKey","getAll","getAllKeys","count"],kx=["put","add","delete","clear"],Lu=new Map;function lm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lu.get(e))return Lu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nx.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Lu.set(e,s),s}Ax(t=>({...t,get:(e,n,r)=>lm(e,n)||t.get(e,n,r),has:(e,n)=>!!lm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Dx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bc="@firebase/app",um="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new zv("@firebase/app"),bx="@firebase/app-compat",Mx="@firebase/analytics-compat",Ox="@firebase/analytics",Lx="@firebase/app-check-compat",Fx="@firebase/app-check",jx="@firebase/auth",Ux="@firebase/auth-compat",Bx="@firebase/database",zx="@firebase/data-connect",$x="@firebase/database-compat",qx="@firebase/functions",Hx="@firebase/functions-compat",Wx="@firebase/installations",Qx="@firebase/installations-compat",Gx="@firebase/messaging",Kx="@firebase/messaging-compat",Xx="@firebase/performance",Yx="@firebase/performance-compat",Jx="@firebase/remote-config",Zx="@firebase/remote-config-compat",eI="@firebase/storage",tI="@firebase/storage-compat",nI="@firebase/firestore",rI="@firebase/ai",iI="@firebase/firestore-compat",sI="firebase",oI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="[DEFAULT]",aI={[Bc]:"fire-core",[bx]:"fire-core-compat",[Ox]:"fire-analytics",[Mx]:"fire-analytics-compat",[Fx]:"fire-app-check",[Lx]:"fire-app-check-compat",[jx]:"fire-auth",[Ux]:"fire-auth-compat",[Bx]:"fire-rtdb",[zx]:"fire-data-connect",[$x]:"fire-rtdb-compat",[qx]:"fire-fn",[Hx]:"fire-fn-compat",[Wx]:"fire-iid",[Qx]:"fire-iid-compat",[Gx]:"fire-fcm",[Kx]:"fire-fcm-compat",[Xx]:"fire-perf",[Yx]:"fire-perf-compat",[Jx]:"fire-rc",[Zx]:"fire-rc-compat",[eI]:"fire-gcs",[tI]:"fire-gcs-compat",[nI]:"fire-fst",[iI]:"fire-fst-compat",[rI]:"fire-vertex","fire-js":"fire-js",[sI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new Map,lI=new Map,$c=new Map;function cm(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if($c.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;$c.set(e,t);for(const n of Ya.values())cm(n,t);for(const n of lI.values())cm(n,t);return!0}function uI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cI(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new Bv("app","Firebase",hI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=oI;function Hv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:zc,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Yn.create("bad-app-name",{appName:String(i)});if(n||(n=Uv()),!n)throw Yn.create("no-options");const s=Ya.get(i);if(s){if(Xa(n,s.options)&&Xa(r,s.config))return s;throw Yn.create("duplicate-app",{appName:i})}const o=new gx(i);for(const u of $c.values())o.addComponent(u);const l=new fI(n,r,o);return Ya.set(i,l),l}function pI(t=zc){const e=Ya.get(t);if(!e&&t===zc&&Uv())return Hv();if(!e)throw Yn.create("no-app",{appName:t});return e}function gi(t,e,n){let r=aI[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(o.join(" "));return}Ja(new to(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebase-heartbeat-database",gI=1,no="firebase-heartbeat-store";let Fu=null;function Wv(){return Fu||(Fu=Px(mI,gI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yn.create("idb-open",{originalErrorMessage:t.message})})),Fu}async function yI(t){try{const n=(await Wv()).transaction(no),r=await n.objectStore(no).get(Qv(t));return await n.done,r}catch(e){if(e instanceof Fi)wn.warn(e.message);else{const n=Yn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function hm(t,e){try{const r=(await Wv()).transaction(no,"readwrite");await r.objectStore(no).put(e,Qv(t)),await r.done}catch(n){if(n instanceof Fi)wn.warn(n.message);else{const r=Yn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function Qv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=1024,_I=30;class EI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>_I){const o=xI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fm(),{heartbeatsToSend:r,unsentEntries:i}=wI(this._heartbeatsCache.heartbeats),s=Ka(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wn.warn(n),""}}}function fm(){return new Date().toISOString().substring(0,10)}function wI(t,e=vI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lx()?ux().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dm(t){return Ka(JSON.stringify({version:2,heartbeats:t})).length}function xI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){Ja(new to("platform-logger",e=>new Vx(e),"PRIVATE")),Ja(new to("heartbeat",e=>new EI(e),"PRIVATE")),gi(Bc,um,t),gi(Bc,um,"esm2020"),gi("fire-js","")}II("");var SI="firebase",AI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(SI,AI,"app");var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jn,Gv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,m){function E(){}E.prototype=m.prototype,I.F=m.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(x,_,y){for(var w=Array(arguments.length-2),z=2;z<arguments.length;z++)w[z-2]=arguments[z];return m.prototype[_].apply(x,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,m,E){E||(E=0);const x=Array(16);if(typeof m=="string")for(var _=0;_<16;++_)x[_]=m.charCodeAt(E++)|m.charCodeAt(E++)<<8|m.charCodeAt(E++)<<16|m.charCodeAt(E++)<<24;else for(_=0;_<16;++_)x[_]=m[E++]|m[E++]<<8|m[E++]<<16|m[E++]<<24;m=I.g[0],E=I.g[1],_=I.g[2];let y=I.g[3],w;w=m+(y^E&(_^y))+x[0]+3614090360&4294967295,m=E+(w<<7&4294967295|w>>>25),w=y+(_^m&(E^_))+x[1]+3905402710&4294967295,y=m+(w<<12&4294967295|w>>>20),w=_+(E^y&(m^E))+x[2]+606105819&4294967295,_=y+(w<<17&4294967295|w>>>15),w=E+(m^_&(y^m))+x[3]+3250441966&4294967295,E=_+(w<<22&4294967295|w>>>10),w=m+(y^E&(_^y))+x[4]+4118548399&4294967295,m=E+(w<<7&4294967295|w>>>25),w=y+(_^m&(E^_))+x[5]+1200080426&4294967295,y=m+(w<<12&4294967295|w>>>20),w=_+(E^y&(m^E))+x[6]+2821735955&4294967295,_=y+(w<<17&4294967295|w>>>15),w=E+(m^_&(y^m))+x[7]+4249261313&4294967295,E=_+(w<<22&4294967295|w>>>10),w=m+(y^E&(_^y))+x[8]+1770035416&4294967295,m=E+(w<<7&4294967295|w>>>25),w=y+(_^m&(E^_))+x[9]+2336552879&4294967295,y=m+(w<<12&4294967295|w>>>20),w=_+(E^y&(m^E))+x[10]+4294925233&4294967295,_=y+(w<<17&4294967295|w>>>15),w=E+(m^_&(y^m))+x[11]+2304563134&4294967295,E=_+(w<<22&4294967295|w>>>10),w=m+(y^E&(_^y))+x[12]+1804603682&4294967295,m=E+(w<<7&4294967295|w>>>25),w=y+(_^m&(E^_))+x[13]+4254626195&4294967295,y=m+(w<<12&4294967295|w>>>20),w=_+(E^y&(m^E))+x[14]+2792965006&4294967295,_=y+(w<<17&4294967295|w>>>15),w=E+(m^_&(y^m))+x[15]+1236535329&4294967295,E=_+(w<<22&4294967295|w>>>10),w=m+(_^y&(E^_))+x[1]+4129170786&4294967295,m=E+(w<<5&4294967295|w>>>27),w=y+(E^_&(m^E))+x[6]+3225465664&4294967295,y=m+(w<<9&4294967295|w>>>23),w=_+(m^E&(y^m))+x[11]+643717713&4294967295,_=y+(w<<14&4294967295|w>>>18),w=E+(y^m&(_^y))+x[0]+3921069994&4294967295,E=_+(w<<20&4294967295|w>>>12),w=m+(_^y&(E^_))+x[5]+3593408605&4294967295,m=E+(w<<5&4294967295|w>>>27),w=y+(E^_&(m^E))+x[10]+38016083&4294967295,y=m+(w<<9&4294967295|w>>>23),w=_+(m^E&(y^m))+x[15]+3634488961&4294967295,_=y+(w<<14&4294967295|w>>>18),w=E+(y^m&(_^y))+x[4]+3889429448&4294967295,E=_+(w<<20&4294967295|w>>>12),w=m+(_^y&(E^_))+x[9]+568446438&4294967295,m=E+(w<<5&4294967295|w>>>27),w=y+(E^_&(m^E))+x[14]+3275163606&4294967295,y=m+(w<<9&4294967295|w>>>23),w=_+(m^E&(y^m))+x[3]+4107603335&4294967295,_=y+(w<<14&4294967295|w>>>18),w=E+(y^m&(_^y))+x[8]+1163531501&4294967295,E=_+(w<<20&4294967295|w>>>12),w=m+(_^y&(E^_))+x[13]+2850285829&4294967295,m=E+(w<<5&4294967295|w>>>27),w=y+(E^_&(m^E))+x[2]+4243563512&4294967295,y=m+(w<<9&4294967295|w>>>23),w=_+(m^E&(y^m))+x[7]+1735328473&4294967295,_=y+(w<<14&4294967295|w>>>18),w=E+(y^m&(_^y))+x[12]+2368359562&4294967295,E=_+(w<<20&4294967295|w>>>12),w=m+(E^_^y)+x[5]+4294588738&4294967295,m=E+(w<<4&4294967295|w>>>28),w=y+(m^E^_)+x[8]+2272392833&4294967295,y=m+(w<<11&4294967295|w>>>21),w=_+(y^m^E)+x[11]+1839030562&4294967295,_=y+(w<<16&4294967295|w>>>16),w=E+(_^y^m)+x[14]+4259657740&4294967295,E=_+(w<<23&4294967295|w>>>9),w=m+(E^_^y)+x[1]+2763975236&4294967295,m=E+(w<<4&4294967295|w>>>28),w=y+(m^E^_)+x[4]+1272893353&4294967295,y=m+(w<<11&4294967295|w>>>21),w=_+(y^m^E)+x[7]+4139469664&4294967295,_=y+(w<<16&4294967295|w>>>16),w=E+(_^y^m)+x[10]+3200236656&4294967295,E=_+(w<<23&4294967295|w>>>9),w=m+(E^_^y)+x[13]+681279174&4294967295,m=E+(w<<4&4294967295|w>>>28),w=y+(m^E^_)+x[0]+3936430074&4294967295,y=m+(w<<11&4294967295|w>>>21),w=_+(y^m^E)+x[3]+3572445317&4294967295,_=y+(w<<16&4294967295|w>>>16),w=E+(_^y^m)+x[6]+76029189&4294967295,E=_+(w<<23&4294967295|w>>>9),w=m+(E^_^y)+x[9]+3654602809&4294967295,m=E+(w<<4&4294967295|w>>>28),w=y+(m^E^_)+x[12]+3873151461&4294967295,y=m+(w<<11&4294967295|w>>>21),w=_+(y^m^E)+x[15]+530742520&4294967295,_=y+(w<<16&4294967295|w>>>16),w=E+(_^y^m)+x[2]+3299628645&4294967295,E=_+(w<<23&4294967295|w>>>9),w=m+(_^(E|~y))+x[0]+4096336452&4294967295,m=E+(w<<6&4294967295|w>>>26),w=y+(E^(m|~_))+x[7]+1126891415&4294967295,y=m+(w<<10&4294967295|w>>>22),w=_+(m^(y|~E))+x[14]+2878612391&4294967295,_=y+(w<<15&4294967295|w>>>17),w=E+(y^(_|~m))+x[5]+4237533241&4294967295,E=_+(w<<21&4294967295|w>>>11),w=m+(_^(E|~y))+x[12]+1700485571&4294967295,m=E+(w<<6&4294967295|w>>>26),w=y+(E^(m|~_))+x[3]+2399980690&4294967295,y=m+(w<<10&4294967295|w>>>22),w=_+(m^(y|~E))+x[10]+4293915773&4294967295,_=y+(w<<15&4294967295|w>>>17),w=E+(y^(_|~m))+x[1]+2240044497&4294967295,E=_+(w<<21&4294967295|w>>>11),w=m+(_^(E|~y))+x[8]+1873313359&4294967295,m=E+(w<<6&4294967295|w>>>26),w=y+(E^(m|~_))+x[15]+4264355552&4294967295,y=m+(w<<10&4294967295|w>>>22),w=_+(m^(y|~E))+x[6]+2734768916&4294967295,_=y+(w<<15&4294967295|w>>>17),w=E+(y^(_|~m))+x[13]+1309151649&4294967295,E=_+(w<<21&4294967295|w>>>11),w=m+(_^(E|~y))+x[4]+4149444226&4294967295,m=E+(w<<6&4294967295|w>>>26),w=y+(E^(m|~_))+x[11]+3174756917&4294967295,y=m+(w<<10&4294967295|w>>>22),w=_+(m^(y|~E))+x[2]+718787259&4294967295,_=y+(w<<15&4294967295|w>>>17),w=E+(y^(_|~m))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(_+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+_&4294967295,I.g[3]=I.g[3]+y&4294967295}r.prototype.v=function(I,m){m===void 0&&(m=I.length);const E=m-this.blockSize,x=this.C;let _=this.h,y=0;for(;y<m;){if(_==0)for(;y<=E;)i(this,I,y),y+=this.blockSize;if(typeof I=="string"){for(;y<m;)if(x[_++]=I.charCodeAt(y++),_==this.blockSize){i(this,x),_=0;break}}else for(;y<m;)if(x[_++]=I[y++],_==this.blockSize){i(this,x),_=0;break}}this.h=_,this.o+=m},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;m=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=m&255,m/=256;for(this.v(I),I=Array(16),m=0,E=0;E<4;++E)for(let x=0;x<32;x+=8)I[m++]=this.g[E]>>>x&255;return I};function s(I,m){var E=l;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=m(I)}function o(I,m){this.h=m;const E=[];let x=!0;for(let _=I.length-1;_>=0;_--){const y=I[_]|0;x&&y==m||(E[_]=y,x=!1)}this.g=E}var l={};function u(I){return-128<=I&&I<128?s(I,function(m){return new o([m|0],m<0?-1:0)}):new o([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return V(h(-I));const m=[];let E=1;for(let x=0;I>=E;x++)m[x]=I/E|0,E*=4294967296;return new o(m,0)}function d(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return V(d(I.substring(1),m));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=h(Math.pow(m,8));let x=p;for(let y=0;y<I.length;y+=8){var _=Math.min(8,I.length-y);const w=parseInt(I.substring(y,y+_),m);_<8?(_=h(Math.pow(m,_)),x=x.j(_).add(h(w))):(x=x.j(E),x=x.add(h(w)))}return x}var p=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-V(this).m();let I=0,m=1;for(let E=0;E<this.g.length;E++){const x=this.i(E);I+=(x>=0?x:4294967296+x)*m,m*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(P(this))return"-"+V(this).toString(I);const m=h(Math.pow(I,6));var E=this;let x="";for(;;){const _=D(E,m).g;E=C(E,_.j(m));let y=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=_,N(E))return y+x;for(;y.length<6;)y="0"+y;x=y+x}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(let m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=C(this,I),P(I)?-1:N(I)?0:1};function V(I){const m=I.g.length,E=[];for(let x=0;x<m;x++)E[x]=~I.g[x];return new o(E,~I.h).add(g)}t.abs=function(){return P(this)?V(this):this},t.add=function(I){const m=Math.max(this.g.length,I.g.length),E=[];let x=0;for(let _=0;_<=m;_++){let y=x+(this.i(_)&65535)+(I.i(_)&65535),w=(y>>>16)+(this.i(_)>>>16)+(I.i(_)>>>16);x=w>>>16,y&=65535,w&=65535,E[_]=w<<16|y}return new o(E,E[E.length-1]&-2147483648?-1:0)};function C(I,m){return I.add(V(m))}t.j=function(I){if(N(this)||N(I))return p;if(P(this))return P(I)?V(this).j(V(I)):V(V(this).j(I));if(P(I))return V(this.j(V(I)));if(this.l(S)<0&&I.l(S)<0)return h(this.m()*I.m());const m=this.g.length+I.g.length,E=[];for(var x=0;x<2*m;x++)E[x]=0;for(x=0;x<this.g.length;x++)for(let _=0;_<I.g.length;_++){const y=this.i(x)>>>16,w=this.i(x)&65535,z=I.i(_)>>>16,Y=I.i(_)&65535;E[2*x+2*_]+=w*Y,T(E,2*x+2*_),E[2*x+2*_+1]+=y*Y,T(E,2*x+2*_+1),E[2*x+2*_+1]+=w*z,T(E,2*x+2*_+1),E[2*x+2*_+2]+=y*z,T(E,2*x+2*_+2)}for(I=0;I<m;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=m;I<2*m;I++)E[I]=0;return new o(E,0)};function T(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function R(I,m){this.g=I,this.h=m}function D(I,m){if(N(m))throw Error("division by zero");if(N(I))return new R(p,p);if(P(I))return m=D(V(I),m),new R(V(m.g),V(m.h));if(P(m))return m=D(I,V(m)),new R(V(m.g),m.h);if(I.g.length>30){if(P(I)||P(m))throw Error("slowDivide_ only works with positive integers.");for(var E=g,x=m;x.l(I)<=0;)E=F(E),x=F(x);var _=B(E,1),y=B(x,1);for(x=B(x,2),E=B(E,2);!N(x);){var w=y.add(x);w.l(I)<=0&&(_=_.add(E),y=w),x=B(x,1),E=B(E,1)}return m=C(I,_.j(m)),new R(_,m)}for(_=p;I.l(m)>=0;){for(E=Math.max(1,Math.floor(I.m()/m.m())),x=Math.ceil(Math.log(E)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),y=h(E),w=y.j(m);P(w)||w.l(I)>0;)E-=x,y=h(E),w=y.j(m);N(y)&&(y=g),_=_.add(y),I=C(I,w)}return new R(_,I)}t.B=function(I){return D(this,I).h},t.and=function(I){const m=Math.max(this.g.length,I.g.length),E=[];for(let x=0;x<m;x++)E[x]=this.i(x)&I.i(x);return new o(E,this.h&I.h)},t.or=function(I){const m=Math.max(this.g.length,I.g.length),E=[];for(let x=0;x<m;x++)E[x]=this.i(x)|I.i(x);return new o(E,this.h|I.h)},t.xor=function(I){const m=Math.max(this.g.length,I.g.length),E=[];for(let x=0;x<m;x++)E[x]=this.i(x)^I.i(x);return new o(E,this.h^I.h)};function F(I){const m=I.g.length+1,E=[];for(let x=0;x<m;x++)E[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(E,I.h)}function B(I,m){const E=m>>5;m%=32;const x=I.g.length-E,_=[];for(let y=0;y<x;y++)_[y]=m>0?I.i(y+E)>>>m|I.i(y+E+1)<<32-m:I.i(y+E);return new o(_,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Gv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Jn=o}).apply(typeof pm<"u"?pm:typeof self<"u"?self:typeof window<"u"?window:{});var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kv,_s,Xv,va,qc,Yv,Jv,Zv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ea=="object"&&ea];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var k=a[v];if(!(k in f))break e;f=f[k]}a=a[a.length-1],v=f[a],c=c(v),c!=v&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(c){var f=[],v;for(v in c)Object.prototype.hasOwnProperty.call(c,v)&&f.push([v,c[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function d(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,k,b){for(var $=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)$[ne-2]=arguments[ne];return c.prototype[k].apply(v,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const c=a.length;if(c>0){const f=Array(c);for(let v=0;v<c;v++)f[v]=a[v];return f}return[]}function N(a,c){for(let v=1;v<arguments.length;v++){const k=arguments[v];var f=typeof k;if(f=f!="object"?f:k?Array.isArray(k)?"array":f:"null",f=="array"||f=="object"&&typeof k.length=="number"){f=a.length||0;const b=k.length||0;a.length=f+b;for(let $=0;$<b;$++)a[f+$]=k[$]}else a.push(k)}}class P{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function V(a){o.setTimeout(()=>{throw a},0)}function C(){var a=I;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class T{constructor(){this.h=this.g=null}add(c,f){const v=R.get();v.set(c,f),this.h?this.h.next=v:this.g=v,this.h=v}}var R=new P(()=>new D,a=>a.reset());class D{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,B=!1,I=new T,m=()=>{const a=Promise.resolve(void 0);F=()=>{a.then(E)}};function E(){for(var a;a=C();){try{a.h.call(a.g)}catch(f){V(f)}var c=R;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}B=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function z(a,c){_.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}p(z,_),z.prototype.init=function(a,c){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),G=0;function J(a,c,f,v,k){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!v,this.ha=k,this.key=++G,this.da=this.fa=!1}function j(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function H(a,c,f){for(const v in a)c.call(f,a[v],v,a)}function X(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function ce(a){const c={};for(const f in a)c[f]=a[f];return c}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(a,c){let f,v;for(let k=1;k<arguments.length;k++){v=arguments[k];for(f in v)a[f]=v[f];for(let b=0;b<de.length;b++)f=de[b],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function Ve(a){this.src=a,this.g={},this.h=0}Ve.prototype.add=function(a,c,f,v,k){const b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);const $=je(a,c,v,k);return $>-1?(c=a[$],f||(c.fa=!1)):(c=new J(c,this.src,b,!!v,k),c.fa=f,a.push(c)),c};function yt(a,c){const f=c.type;if(f in a.g){var v=a.g[f],k=Array.prototype.indexOf.call(v,c,void 0),b;(b=k>=0)&&Array.prototype.splice.call(v,k,1),b&&(j(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function je(a,c,f,v){for(let k=0;k<a.length;++k){const b=a[k];if(!b.da&&b.listener==c&&b.capture==!!f&&b.ha==v)return k}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Vt={};function hn(a,c,f,v,k){if(Array.isArray(c)){for(let b=0;b<c.length;b++)hn(a,c[b],f,v,k);return null}return f=Hf(f),a&&a[Y]?a.J(c,f,l(v)?!!v.capture:!1,k):me(a,c,f,!1,v,k)}function me(a,c,f,v,k,b){if(!c)throw Error("Invalid event type");const $=l(k)?!!k.capture:!!k;let ne=$l(a);if(ne||(a[De]=ne=new Ve(a)),f=ne.add(c,f,v,$,b),f.proxy)return f;if(v=ue(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)y||(k=$),k===void 0&&(k=!1),a.addEventListener(c.toString(),v,k);else if(a.attachEvent)a.attachEvent(It(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ue(){function a(f){return c.call(a.src,a.listener,f)}const c=fr;return a}function Ce(a,c,f,v,k){if(Array.isArray(c))for(var b=0;b<c.length;b++)Ce(a,c[b],f,v,k);else v=l(v)?!!v.capture:!!v,f=Hf(f),a&&a[Y]?(a=a.i,b=String(c).toString(),b in a.g&&(c=a.g[b],f=je(c,f,v,k),f>-1&&(j(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[b],a.h--)))):a&&(a=$l(a))&&(c=a.g[c.toString()],a=-1,c&&(a=je(c,f,v,k)),(f=a>-1?c[a]:null)&&Ue(f))}function Ue(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Y])yt(c.i,a);else{var f=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(f,v,a.capture):c.detachEvent?c.detachEvent(It(f),v):c.addListener&&c.removeListener&&c.removeListener(v),(f=$l(c))?(yt(f,a),f.h==0&&(f.src=null,c[De]=null)):j(a)}}}function It(a){return a in Vt?Vt[a]:Vt[a]="on"+a}function fr(a,c){if(a.da)a=!0;else{c=new z(c,this);const f=a.listener,v=a.ha||a.src;a.fa&&Ue(a),a=f.call(v,c)}return a}function $l(a){return a=a[De],a instanceof Ve?a:null}var ql="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hf(a){return typeof a=="function"?a:(a[ql]||(a[ql]=function(c){return a.handleEvent(c)}),a[ql])}function rt(){x.call(this),this.i=new Ve(this),this.M=this,this.G=null}p(rt,x),rt.prototype[Y]=!0,rt.prototype.removeEventListener=function(a,c,f,v){Ce(this,a,c,f,v)};function ht(a,c){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new _(c,a);else if(c instanceof _)c.target=c.target||a;else{var k=c;c=new _(v,a),nt(c,k)}k=!0;let b,$;if(f)for($=f.length-1;$>=0;$--)b=c.g=f[$],k=So(b,v,!0,c)&&k;if(b=c.g=a,k=So(b,v,!0,c)&&k,k=So(b,v,!1,c)&&k,f)for($=0;$<f.length;$++)b=c.g=f[$],k=So(b,v,!1,c)&&k}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let v=0;v<f.length;v++)j(f[v]);delete a.g[c],a.h--}}this.G=null},rt.prototype.J=function(a,c,f,v){return this.i.add(String(a),c,!1,f,v)},rt.prototype.K=function(a,c,f,v){return this.i.add(String(a),c,!0,f,v)};function So(a,c,f,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let k=!0;for(let b=0;b<c.length;++b){const $=c[b];if($&&!$.da&&$.capture==f){const ne=$.listener,Be=$.ha||$.src;$.fa&&yt(a.i,$),k=ne.call(Be,v)!==!1&&k}}return k&&!v.defaultPrevented}function O0(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Wf(a){a.g=O0(()=>{a.g=null,a.i&&(a.i=!1,Wf(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class L0 extends x{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Wf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(a){x.call(this),this.h=a,this.g={}}p(Hi,x);var Qf=[];function Gf(a){H(a.g,function(c,f){this.g.hasOwnProperty(f)&&Ue(c)},a),a.g={}}Hi.prototype.N=function(){Hi.Z.N.call(this),Gf(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hl=o.JSON.stringify,F0=o.JSON.parse,j0=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Kf(){}function Xf(){}var Wi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wl(){_.call(this,"d")}p(Wl,_);function Ql(){_.call(this,"c")}p(Ql,_);var dr={},Yf=null;function Ao(){return Yf=Yf||new rt}dr.Ia="serverreachability";function Jf(a){_.call(this,dr.Ia,a)}p(Jf,_);function Qi(a){const c=Ao();ht(c,new Jf(c))}dr.STAT_EVENT="statevent";function Zf(a,c){_.call(this,dr.STAT_EVENT,a),this.stat=c}p(Zf,_);function ft(a){const c=Ao();ht(c,new Zf(c,a))}dr.Ja="timingevent";function ed(a,c){_.call(this,dr.Ja,a),this.size=c}p(ed,_);function Gi(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function U0(a,c,f,v,k,b){a.info(function(){if(a.g)if(b){var $="",ne=b.split("&");for(let pe=0;pe<ne.length;pe++){var Be=ne[pe].split("=");if(Be.length>1){const He=Be[0];Be=Be[1];const Yt=He.split("_");$=Yt.length>=2&&Yt[1]=="type"?$+(He+"="+Be+"&"):$+(He+"=redacted&")}}}else $=null;else $=b;return"XMLHTTP REQ ("+v+") [attempt "+k+"]: "+c+`
`+f+`
`+$})}function B0(a,c,f,v,k,b,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+k+"]: "+c+`
`+f+`
`+b+" "+$})}function qr(a,c,f,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+$0(a,f)+(v?" "+v:"")})}function z0(a,c){a.info(function(){return"TIMEOUT: "+c})}Ki.prototype.info=function(){};function $0(a,c){if(!a.g)return c;if(!c)return null;try{const b=JSON.parse(c);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var f=b[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var k=v[0];if(k!="noop"&&k!="stop"&&k!="close")for(let $=1;$<v.length;$++)v[$]=""}}}}return Hl(b)}catch{return c}}var Co={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},td={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nd;function Gl(){}p(Gl,Kf),Gl.prototype.g=function(){return new XMLHttpRequest},nd=new Gl;function Xi(a){return encodeURIComponent(String(a))}function q0(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function Sn(a,c,f,v){this.j=a,this.i=c,this.l=f,this.S=v||1,this.V=new Hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rd}function rd(){this.i=null,this.g="",this.h=!1}var id={},Kl={};function Xl(a,c,f){a.M=1,a.A=Po(Xt(c)),a.u=f,a.R=!0,sd(a,null)}function sd(a,c){a.F=Date.now(),Ro(a),a.B=Xt(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),vd(f.i,"t",v),a.C=0,f=a.j.L,a.h=new rd,a.g=Od(a.j,f?c:null,!a.u),a.P>0&&(a.O=new L0(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,v=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(Qf[0]=k.toString()),k=Qf);for(let b=0;b<k.length;b++){const $=hn(f,k[b],v||c.handleEvent,!1,c.h||c);if(!$)break;c.g[$.key]=$}c=a.J?ce(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Qi(),U0(a.i,a.v,a.B,a.l,a.S,a.u)}Sn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Rn(a)==3?c.j():this.Y(a)},Sn.prototype.Y=function(a){try{if(a==this.g)e:{const ne=Rn(this.g),Be=this.g.ya(),pe=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||Sd(this.g)))){this.K||ne!=4||Be==7||(Be==8||pe<=0?Qi(3):Qi(2)),Yl(this);var c=this.g.ca();this.X=c;var f=H0(this);if(this.o=c==200,B0(this.i,this.v,this.B,this.l,this.S,ne,c),this.o){if(this.U&&!this.L){t:{if(this.g){var v,k=this.g;if((v=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(v)){var b=v;break t}}b=null}if(a=b)qr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jl(this,a);else{this.o=!1,this.m=3,ft(12),pr(this),Yi(this);break e}}if(this.R){a=!0;let He;for(;!this.K&&this.C<f.length;)if(He=W0(this,f),He==Kl){ne==4&&(this.m=4,ft(14),a=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(He==id){this.m=4,ft(15),qr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else qr(this.i,this.l,He,null),Jl(this,He);if(od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||f.length!=0||this.h.h||(this.m=1,ft(16),a=!1),this.o=this.o&&a,!a)qr(this.i,this.l,f,"[Invalid Chunked Response]"),pr(this),Yi(this);else if(f.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),ou($),$.P=!0,ft(11))}}else qr(this.i,this.l,f,null),Jl(this,f);ne==4&&pr(this),this.o&&!this.K&&(ne==4?Vd(this.j,this):(this.o=!1,Ro(this)))}else oE(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),pr(this),Yi(this)}}}catch{}finally{}};function H0(a){if(!od(a))return a.g.la();const c=Sd(a.g);if(c==="")return"";let f="";const v=c.length,k=Rn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return pr(a),Yi(a),"";a.h.i=new o.TextDecoder}for(let b=0;b<v;b++)a.h.h=!0,f+=a.h.i.decode(c[b],{stream:!(k&&b==v-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function od(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function W0(a,c){var f=a.C,v=c.indexOf(`
`,f);return v==-1?Kl:(f=Number(c.substring(f,v)),isNaN(f)?id:(v+=1,v+f>c.length?Kl:(c=c.slice(v,v+f),a.C=v+f,c)))}Sn.prototype.cancel=function(){this.K=!0,pr(this)};function Ro(a){a.T=Date.now()+a.H,ad(a,a.H)}function ad(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Gi(h(a.aa,a),c)}function Yl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Sn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(z0(this.i,this.B),this.M!=2&&(Qi(),ft(17)),pr(this),this.m=2,Yi(this)):ad(this,this.T-a)};function Yi(a){a.j.I==0||a.K||Vd(a.j,a)}function pr(a){Yl(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,Gf(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function Jl(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||Zl(f.h,a))){if(!a.L&&Zl(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var k=v;if(k[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)bo(f),Vo(f);else break e;su(f),ft(18)}}else f.xa=k[1],0<f.xa-f.K&&k[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Gi(h(f.Va,f),6e3));cd(f.h)<=1&&f.ta&&(f.ta=void 0)}else gr(f,11)}else if((a.L||f.g==a)&&bo(f),!w(c))for(k=f.Ba.g.parse(c),c=0;c<k.length;c++){let pe=k[c];const He=pe[0];if(!(He<=f.K))if(f.K=He,pe=pe[1],f.I==2)if(pe[0]=="c"){f.M=pe[1],f.ba=pe[2];const Yt=pe[3];Yt!=null&&(f.ka=Yt,f.j.info("VER="+f.ka));const yr=pe[4];yr!=null&&(f.za=yr,f.j.info("SVER="+f.za));const Pn=pe[5];Pn!=null&&typeof Pn=="number"&&Pn>0&&(v=1.5*Pn,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Nn=a.g;if(Nn){const Oo=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var b=v.h;b.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(eu(b,b.h),b.h=null))}if(v.G){const au=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(v.wa=au,ve(v.J,v.G,au))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var $=a;if(v.na=Md(v,v.L?v.ba:null,v.W),$.L){hd(v.h,$);var ne=$,Be=v.O;Be&&(ne.H=Be),ne.D&&(Yl(ne),Ro(ne)),v.g=$}else Nd(v);f.i.length>0&&Do(f)}else pe[0]!="stop"&&pe[0]!="close"||gr(f,7);else f.I==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?gr(f,7):iu(f):pe[0]!="noop"&&f.l&&f.l.qa(pe),f.A=0)}}Qi(4)}catch{}}var Q0=class{constructor(a,c){this.g=a,this.map=c}};function ld(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ud(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function cd(a){return a.h?1:a.g?a.g.size:0}function Zl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function eu(a,c){a.g?a.g.add(c):a.h=c}function hd(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}ld.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function fd(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return S(a.i)}var dd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function G0(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let k,b=null;v>=0?(k=a[f].substring(0,v),b=a[f].substring(v+1)):k=a[f],c(k,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function An(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof An?(this.l=a.l,Ji(this,a.j),this.o=a.o,this.g=a.g,Zi(this,a.u),this.h=a.h,tu(this,_d(a.i)),this.m=a.m):a&&(c=String(a).match(dd))?(this.l=!1,Ji(this,c[1]||"",!0),this.o=es(c[2]||""),this.g=es(c[3]||"",!0),Zi(this,c[4]),this.h=es(c[5]||"",!0),tu(this,c[6]||"",!0),this.m=es(c[7]||"")):(this.l=!1,this.i=new ns(null,this.l))}An.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(ts(c,pd,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ts(c,pd,!0),"@"),a.push(Xi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ts(f,f.charAt(0)=="/"?Y0:X0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ts(f,Z0)),a.join("")},An.prototype.resolve=function(a){const c=Xt(this);let f=!!a.j;f?Ji(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var v=a.h;if(f)Zi(c,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var k=c.h.lastIndexOf("/");k!=-1&&(v=c.h.slice(0,k+1)+v)}if(k=v,k==".."||k==".")v="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){v=k.lastIndexOf("/",0)==0,k=k.split("/");const b=[];for(let $=0;$<k.length;){const ne=k[$++];ne=="."?v&&$==k.length&&b.push(""):ne==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),v&&$==k.length&&b.push("")):(b.push(ne),v=!0)}v=b.join("/")}else v=k}return f?c.h=v:f=a.i.toString()!=="",f?tu(c,_d(a.i)):f=!!a.m,f&&(c.m=a.m),c};function Xt(a){return new An(a)}function Ji(a,c,f){a.j=f?es(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Zi(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function tu(a,c,f){c instanceof ns?(a.i=c,eE(a.i,a.l)):(f||(c=ts(c,J0)),a.i=new ns(c,a.l))}function ve(a,c,f){a.i.set(c,f)}function Po(a){return ve(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function es(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ts(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,K0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function K0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pd=/[#\/\?@]/g,X0=/[#\?:]/g,Y0=/[#\?]/g,J0=/[#\?@]/g,Z0=/#/g;function ns(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function mr(a){a.g||(a.g=new Map,a.h=0,a.i&&G0(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=ns.prototype,t.add=function(a,c){mr(this),this.i=null,a=Hr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function md(a,c){mr(a),c=Hr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function gd(a,c){return mr(a),c=Hr(a,c),a.g.has(c)}t.forEach=function(a,c){mr(this),this.g.forEach(function(f,v){f.forEach(function(k){a.call(c,k,v,this)},this)},this)};function yd(a,c){mr(a);let f=[];if(typeof c=="string")gd(a,c)&&(f=f.concat(a.g.get(Hr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return mr(this),this.i=null,a=Hr(this,a),gd(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=yd(this,a),a.length>0?String(a[0]):c):c};function vd(a,c,f){md(a,c),f.length>0&&(a.i=null,a.g.set(Hr(a,c),S(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let v=0;v<c.length;v++){var f=c[v];const k=Xi(f);f=yd(this,f);for(let b=0;b<f.length;b++){let $=k;f[b]!==""&&($+="="+Xi(f[b])),a.push($)}}return this.i=a.join("&")};function _d(a){const c=new ns;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function Hr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function eE(a,c){c&&!a.j&&(mr(a),a.i=null,a.g.forEach(function(f,v){const k=v.toLowerCase();v!=k&&(md(this,v),vd(this,k,f))},a)),a.j=c}function tE(a,c){const f=new Ki;if(o.Image){const v=new Image;v.onload=d(Cn,f,"TestLoadImage: loaded",!0,c,v),v.onerror=d(Cn,f,"TestLoadImage: error",!1,c,v),v.onabort=d(Cn,f,"TestLoadImage: abort",!1,c,v),v.ontimeout=d(Cn,f,"TestLoadImage: timeout",!1,c,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function nE(a,c){const f=new Ki,v=new AbortController,k=setTimeout(()=>{v.abort(),Cn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(b=>{clearTimeout(k),b.ok?Cn(f,"TestPingServer: ok",!0,c):Cn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),Cn(f,"TestPingServer: error",!1,c)})}function Cn(a,c,f,v,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),v(f)}catch{}}function rE(){this.g=new j0}function nu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(nu,Kf),nu.prototype.g=function(){return new No(this.i,this.h)};function No(a,c){rt.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(No,rt),t=No.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,is(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ed(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ed(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?rs(this):is(this),this.readyState==3&&Ed(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,rs(this))},t.Na=function(a){this.g&&(this.response=a,rs(this))},t.ga=function(){this.g&&rs(this)};function rs(a){a.readyState=4,a.l=null,a.j=null,a.B=null,is(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function is(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(No.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wd(a){let c="";return H(a,function(f,v){c+=v,c+=":",c+=f,c+=`\r
`}),c}function ru(a,c,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=wd(f),typeof a=="string"?f!=null&&Xi(f):ve(a,c,f))}function Re(a){rt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Re,rt);var iE=/^https?$/i,sE=["POST","PUT"];t=Re.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nd.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(b){Td(this,b);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var k in v)f.set(k,v[k]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const b of v.keys())f.set(b,v.get(b));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(sE,c,void 0)>=0)||v||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,$]of f)this.g.setRequestHeader(b,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){Td(this,b)}};function Td(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,xd(a),ko(a)}function xd(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ht(this,"complete"),ht(this,"abort"),ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ko(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Id(this):this.Xa())},t.Xa=function(){Id(this)};function Id(a){if(a.h&&typeof s<"u"){if(a.v&&Rn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ht(a,"readystatechange"),Rn(a)==4){a.h=!1;try{const b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var v;if(v=b===0){let $=String(a.D).match(dd)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),v=!iE.test($?$.toLowerCase():"")}f=v}if(f)ht(a,"complete"),ht(a,"success");else{a.o=6;try{var k=Rn(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",xd(a)}}finally{ko(a)}}}}function ko(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||ht(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Rn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),F0(c)}};function Sd(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function oE(a){const c={};a=(a.g&&Rn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(w(a[v]))continue;var f=q0(a[v]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const b=c[k]||[];c[k]=b,b.push(f)}X(c,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Ad(a){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ss("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ss("baseRetryDelayMs",5e3,a),this.Za=ss("retryDelaySeedMs",1e4,a),this.Ta=ss("forwardChannelMaxRetries",2,a),this.va=ss("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ld(a&&a.concurrentRequestLimit),this.Ba=new rE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ad.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,v){ft(0),this.W=a,this.H=c||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=Md(this,null,this.W),Do(this)};function iu(a){if(Cd(a),a.I==3){var c=a.V++,f=Xt(a.J);if(ve(f,"SID",a.M),ve(f,"RID",c),ve(f,"TYPE","terminate"),os(a,f),c=new Sn(a,a.j,c),c.M=2,c.A=Po(Xt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Od(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ro(c)}bd(a)}function Vo(a){a.g&&(ou(a),a.g.cancel(),a.g=null)}function Cd(a){Vo(a),a.v&&(o.clearTimeout(a.v),a.v=null),bo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Do(a){if(!ud(a.h)&&!a.m){a.m=!0;var c=a.Ea;F||m(),B||(F(),B=!0),I.add(c,a),a.D=0}}function aE(a,c){return cd(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Gi(h(a.Ea,a,c),Dd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new Sn(this,this.j,a);let b=this.o;if(this.U&&(b?(b=ce(b),nt(b,this.U)):b=this.U),this.u!==null||this.R||(k.J=b,b=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Pd(this,k,c),f=Xt(this.J),ve(f,"RID",a),ve(f,"CVER",22),this.G&&ve(f,"X-HTTP-Session-Id",this.G),os(this,f),b&&(this.R?c="headers="+Xi(wd(b))+"&"+c:this.u&&ru(f,this.u,b)),eu(this.h,k),this.Ra&&ve(f,"TYPE","init"),this.S?(ve(f,"$req",c),ve(f,"SID","null"),k.U=!0,Xl(k,f,null)):Xl(k,f,c),this.I=2}}else this.I==3&&(a?Rd(this,a):this.i.length==0||ud(this.h)||Rd(this))};function Rd(a,c){var f;c?f=c.l:f=a.V++;const v=Xt(a.J);ve(v,"SID",a.M),ve(v,"RID",f),ve(v,"AID",a.K),os(a,v),a.u&&a.o&&ru(v,a.u,a.o),f=new Sn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Pd(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),eu(a.h,f),Xl(f,v,c)}function os(a,c){a.H&&H(a.H,function(f,v){ve(c,v,f)}),a.l&&H({},function(f,v){ve(c,v,f)})}function Pd(a,c,f){f=Math.min(a.i.length,f);const v=a.l?h(a.l.Ka,a.l,a):null;e:{var k=a.i;let ne=-1;for(;;){const Be=["count="+f];ne==-1?f>0?(ne=k[0].g,Be.push("ofs="+ne)):ne=0:Be.push("ofs="+ne);let pe=!0;for(let He=0;He<f;He++){var b=k[He].g;const Yt=k[He].map;if(b-=ne,b<0)ne=Math.max(0,k[He].g-100),pe=!1;else try{b="req"+b+"_"||"";try{var $=Yt instanceof Map?Yt:Object.entries(Yt);for(const[yr,Pn]of $){let Nn=Pn;l(Pn)&&(Nn=Hl(Pn)),Be.push(b+yr+"="+encodeURIComponent(Nn))}}catch(yr){throw Be.push(b+"type="+encodeURIComponent("_badmap")),yr}}catch{v&&v(Yt)}}if(pe){$=Be.join("&");break e}}$=void 0}return a=a.i.splice(0,f),c.G=a,$}function Nd(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;F||m(),B||(F(),B=!0),I.add(c,a),a.A=0}}function su(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Gi(h(a.Da,a),Dd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,kd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Gi(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),Vo(this),kd(this))};function ou(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function kd(a){a.g=new Sn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Xt(a.na);ve(c,"RID","rpc"),ve(c,"SID",a.M),ve(c,"AID",a.K),ve(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&ve(c,"TO",a.ia),ve(c,"TYPE","xmlhttp"),os(a,c),a.u&&a.o&&ru(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Po(Xt(c)),f.u=null,f.R=!0,sd(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Vo(this),su(this),ft(19))};function bo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Vd(a,c){var f=null;if(a.g==c){bo(a),ou(a),a.g=null;var v=2}else if(Zl(a.h,c))f=c.G,hd(a.h,c),v=1;else return;if(a.I!=0){if(c.o)if(v==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var k=a.D;v=Ao(),ht(v,new ed(v,f)),Do(a)}else Nd(a);else if(k=c.m,k==3||k==0&&c.X>0||!(v==1&&aE(a,c)||v==2&&su(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),k){case 1:gr(a,5);break;case 4:gr(a,10);break;case 3:gr(a,6);break;default:gr(a,2)}}}function Dd(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function gr(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),v=a.Ua;const k=!v;v=new An(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ji(v,"https"),Po(v),k?tE(v.toString(),f):nE(v.toString(),f)}else ft(2);a.I=0,a.l&&a.l.pa(c),bd(a),Cd(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function bd(a){if(a.I=0,a.ja=[],a.l){const c=fd(a.h);(c.length!=0||a.i.length!=0)&&(N(a.ja,c),N(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function Md(a,c,f){var v=f instanceof An?Xt(f):new An(f);if(v.g!="")c&&(v.g=c+"."+v.g),Zi(v,v.u);else{var k=o.location;v=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;const b=new An(null);v&&Ji(b,v),c&&(b.g=c),k&&Zi(b,k),f&&(b.h=f),v=b}return f=a.G,c=a.wa,f&&c&&ve(v,f,c),ve(v,"VER",a.ka),os(a,v),v}function Od(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Re(new nu({ab:f})):new Re(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ld(){}t=Ld.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(a,c){return new St(a,c)};function St(a,c){rt.call(this),this.g=new Ad(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!w(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Wr(this)}p(St,rt),St.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){iu(this.g)},St.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Hl(a),a=f);c.i.push(new Q0(c.Ya++,a)),c.I==3&&Do(c)},St.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,St.Z.N.call(this)};function Fd(a){Wl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}p(Fd,Wl);function jd(){Ql.call(this),this.status=1}p(jd,Ql);function Wr(a){this.g=a}p(Wr,Ld),Wr.prototype.ra=function(){ht(this.g,"a")},Wr.prototype.qa=function(a){ht(this.g,new Fd(a))},Wr.prototype.pa=function(a){ht(this.g,new jd)},Wr.prototype.oa=function(){ht(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Zv=function(){return new Mo},Jv=function(){return Ao()},Yv=dr,qc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,va=Co,td.COMPLETE="complete",Xv=td,Xf.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",rt.prototype.listen=rt.prototype.J,_s=Xf,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,Kv=Re}).apply(typeof ea<"u"?ea:typeof self<"u"?self:typeof window<"u"?window:{});const mm="@firebase/firestore",gm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new zv("@firebase/firestore");function Gr(){return Dr.logLevel}function W(t,...e){if(Dr.logLevel<=ae.DEBUG){const n=e.map(af);Dr.debug(`Firestore (${ji}): ${t}`,...n)}}function Tn(t,...e){if(Dr.logLevel<=ae.ERROR){const n=e.map(af);Dr.error(`Firestore (${ji}): ${t}`,...n)}}function Ri(t,...e){if(Dr.logLevel<=ae.WARN){const n=e.map(af);Dr.warn(`Firestore (${ji}): ${t}`,...n)}}function af(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,e_(t,r,n)}function e_(t,e,n){let r=`FIRESTORE (${ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tn(r),new Error(r)}function he(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||e_(e,i,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class RI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PI{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new t_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class NI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new NI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ym{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){he(this.o===void 0,3512);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ym(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ym(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=DI(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Hc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return ju(i)===ju(s)?ie(i,s):ju(i)?1:-1}return ie(t.length,e.length)}const bI=55296,MI=57343;function ju(t){const e=t.charCodeAt(0);return e>=bI&&e<=MI}function Pi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="__name__";class en{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return en.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof en?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=en.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ie(e.length,n.length)}static compareSegments(e,n){const r=en.isNumericId(e),i=en.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?en.extractNumericId(e).compare(en.extractNumericId(n)):Hc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jn.fromString(e.substring(4,e.length-2))}}class ge extends en{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const OI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends en{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return OI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vm}static keyField(){return new Je([vm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ge.fromString(e))}static fromName(e){return new K(ge.fromString(e).popFirst(5))}static empty(){return new K(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e,n){if(!n)throw new q(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LI(t,e,n,r){if(e===!0&&r===!0)throw new q(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _m(t){if(!K.isDocumentKey(t))throw new q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Em(t){if(K.isDocumentKey(t))throw new q(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function r_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function ro(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rl(t);throw new q(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t,e){const n={typeString:t};return e&&(n.value=e),n}function _o(t,e){if(!r_(t))throw new q(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new q(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=-62135596800,Tm=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Tm);return new Ee(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wm)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tm}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_o(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:Le("string",Ee._jsonSchemaVersion),seconds:Le("number"),nanoseconds:Le("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ee(0,0))}static max(){return new ee(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=-1;function FI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new rr(i,K.empty(),e)}function jI(t){return new rr(t.readTime,t.key,io)}class rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(ee.min(),K.empty(),io)}static max(){return new rr(ee.max(),K.empty(),io)}}function UI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==BI)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function $I(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=-1;function Nl(t){return t==null}function Za(t){return t===0&&1/t==-1/0}function qI(t){return typeof t=="number"&&Number.isInteger(t)&&!Za(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="";function HI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xm(e)),e=WI(t.get(n),e);return xm(e)}function WI(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case i_:n+="";break;default:n+=s}}return n}function xm(t){return t+i_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function s_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ta(this.root,e,this.comparator,!0)}}class ta{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ye.RED,this.left=i??Ye.EMPTY,this.right=s??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ye(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ye.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sm(this.data.getIterator())}getIteratorFrom(e){return new Sm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class Sm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new qe(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new o_("Invalid base64 string: "+s):s}}(e);return new tt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const QI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(t){if(he(!!t,39018),typeof t=="string"){let e=0;const n=QI.exec(t);if(he(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="server_timestamp",l_="__type__",u_="__previous_value__",c_="__local_write_time__";function cf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[l_])==null?void 0:r.stringValue)===a_}function kl(t){const e=t.mapValue.fields[u_];return cf(e)?kl(e):e}function so(t){const e=ir(t.mapValue.fields[c_].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,i,s,o,l,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const el="(default)";class oo{constructor(e,n){this.projectId=e,this.database=n||el}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===el}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="__type__",KI="__max__",na={mapValue:{}},f_="__vector__",tl="value";function or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cf(t)?4:YI(t)?9007199254740991:XI(t)?10:11:Z(28295,{value:t})}function cn(t,e){if(t===e)return!0;const n=or(t);if(n!==or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ir(i.timestampValue),l=ir(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return sr(i.bytesValue).isEqual(sr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ne(i.doubleValue),l=Ne(s.doubleValue);return o===l?Za(o)===Za(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Pi(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Im(o)!==Im(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!cn(o[u],l[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function ao(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function Ni(t,e){if(t===e)return 0;const n=or(t),r=or(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ne(s.integerValue||s.doubleValue),u=Ne(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Am(t.timestampValue,e.timestampValue);case 4:return Am(so(t),so(e));case 5:return Hc(t.stringValue,e.stringValue);case 6:return function(s,o){const l=sr(s),u=sr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ie(l[h],u[h]);if(d!==0)return d}return ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ie(Ne(s.latitude),Ne(o.latitude));return l!==0?l:ie(Ne(s.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cm(t.arrayValue,e.arrayValue);case 10:return function(s,o){var g,S,N,P;const l=s.fields||{},u=o.fields||{},h=(g=l[tl])==null?void 0:g.arrayValue,d=(S=u[tl])==null?void 0:S.arrayValue,p=ie(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((P=d==null?void 0:d.values)==null?void 0:P.length)||0);return p!==0?p:Cm(h,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===na.mapValue&&o===na.mapValue)return 0;if(s===na.mapValue)return 1;if(o===na.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const g=Hc(u[p],d[p]);if(g!==0)return g;const S=Ni(l[u[p]],h[d[p]]);if(S!==0)return S}return ie(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function Am(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=ir(t),r=ir(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function Cm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ni(n[i],r[i]);if(s)return s}return ie(n.length,r.length)}function ki(t){return Wc(t)}function Wc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Wc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Wc(n.fields[o])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function _a(t){switch(or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kl(t);return e?16+_a(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+_a(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return jr(r.fields,(s,o)=>{i+=s.length+_a(o)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function Rm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qc(t){return!!t&&"integerValue"in t}function hf(t){return!!t&&"arrayValue"in t}function Pm(t){return!!t&&"nullValue"in t}function Nm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ea(t){return!!t&&"mapValue"in t}function XI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[h_])==null?void 0:r.stringValue)===f_}function Vs(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vs(t.arrayValue.values[n]);return e}return{...t}}function YI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===KI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ea(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vs(n)}setAll(e){let n=Je.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Vs(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ea(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ea(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){jr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mt(Vs(this.value))}}function d_(t){const e=[];return jr(t.fields,(n,r)=>{const i=new Je([n]);if(Ea(r)){const s=d_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ee.min(),ee.min(),ee.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,i){return new ut(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new ut(e,2,n,ee.min(),ee.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ee.min(),ee.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.position=e,this.inclusive=n}}function km(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ni(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n="asc"){this.field=e,this.dir=n}}function JI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{}class Oe extends p_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eS(e,n,r):n==="array-contains"?new rS(e,r):n==="in"?new iS(e,r):n==="not-in"?new sS(e,r):n==="array-contains-any"?new oS(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tS(e,r):new nS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ni(n,this.value)):n!==null&&or(this.value)===or(n)&&this.matchesComparison(Ni(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends p_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kt(e,n)}matches(e){return m_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function m_(t){return t.op==="and"}function g_(t){return ZI(t)&&m_(t)}function ZI(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function Gc(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+ki(t.value);if(g_(t))return t.filters.map(e=>Gc(e)).join(",");{const e=t.filters.map(n=>Gc(n)).join(",");return`${t.op}(${e})`}}function y_(t,e){return t instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&cn(r.value,i.value)}(t,e):t instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&y_(o,i.filters[l]),!0):!1}(t,e):void Z(19439)}function v_(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${ki(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(v_).join(" ,")+"}"}(t):"Filter"}class eS extends Oe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class tS extends Oe{constructor(e,n){super(e,"in",n),this.keys=__("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nS extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=__("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function __(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class rS extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hf(n)&&ao(n.arrayValue,this.value)}}class iS extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ao(this.value.arrayValue,n)}}class sS extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ao(this.value.arrayValue,n)}}class oS extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ao(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Dm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new aS(t,e,n,r,i,s,o)}function ff(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ki(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ki(r)).join(",")),e.Te=n}return e.Te}function df(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!y_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vm(t.startAt,e.startAt)&&Vm(t.endAt,e.endAt)}function Kc(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lS(t,e,n,r,i,s,o,l){return new zi(t,e,n,r,i,s,o,l)}function E_(t){return new zi(t)}function bm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function w_(t){return t.collectionGroup!==null}function Ds(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qe(Je.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new lo(s,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new lo(Je.keyField(),r))}return e.Ie}function sn(t){const e=te(t);return e.Ee||(e.Ee=uS(e,Ds(t))),e.Ee}function uS(t,e){if(t.limitType==="F")return Dm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lo(i.field,s)});const n=t.endAt?new nl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nl(t.startAt.position,t.startAt.inclusive):null;return Dm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xc(t,e){const n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yc(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vl(t,e){return df(sn(t),sn(e))&&t.limitType===e.limitType}function T_(t){return`${ff(sn(t))}|lt:${t.limitType}`}function Kr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>v_(i)).join(", ")}]`),Nl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ki(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ki(i)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Dl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ds(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=km(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Ds(r),i)||r.endAt&&!function(o,l,u){const h=km(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Ds(r),i))}(t,e)}function cS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x_(t){return(e,n)=>{let r=!1;for(const i of Ds(t)){const s=hS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function hS(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ni(u,h):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return s_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=new Ae(K.comparator);function xn(){return fS}const I_=new Ae(K.comparator);function Es(...t){let e=I_;for(const n of t)e=e.insert(n.key,n);return e}function S_(t){let e=I_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return bs()}function A_(){return bs()}function bs(){return new Ur(t=>t.toString(),(t,e)=>t.isEqual(e))}const dS=new Ae(K.comparator),pS=new qe(K.comparator);function se(...t){let e=pS;for(const n of t)e=e.add(n);return e}const mS=new qe(ie);function gS(){return mS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Za(e)?"-0":e}}function C_(t){return{integerValue:""+t}}function yS(t,e){return qI(e)?C_(e):pf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this._=void 0}}function vS(t,e,n){return t instanceof uo?function(i,s){const o={fields:{[l_]:{stringValue:a_},[c_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cf(s)&&(s=kl(s)),s&&(o.fields[u_]=s),{mapValue:o}}(n,e):t instanceof co?P_(t,e):t instanceof ho?N_(t,e):function(i,s){const o=R_(i,s),l=Mm(o)+Mm(i.Ae);return Qc(o)&&Qc(i.Ae)?C_(l):pf(i.serializer,l)}(t,e)}function _S(t,e,n){return t instanceof co?P_(t,e):t instanceof ho?N_(t,e):n}function R_(t,e){return t instanceof rl?function(r){return Qc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class uo extends bl{}class co extends bl{constructor(e){super(),this.elements=e}}function P_(t,e){const n=k_(e);for(const r of t.elements)n.some(i=>cn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ho extends bl{constructor(e){super(),this.elements=e}}function N_(t,e){let n=k_(e);for(const r of t.elements)n=n.filter(i=>!cn(i,r));return{arrayValue:{values:n}}}class rl extends bl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Mm(t){return Ne(t.integerValue||t.doubleValue)}function k_(t){return hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.field=e,this.transform=n}}function wS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof co&&i instanceof co||r instanceof ho&&i instanceof ho?Pi(r.elements,i.elements,cn):r instanceof rl&&i instanceof rl?cn(r.Ae,i.Ae):r instanceof uo&&i instanceof uo}(t.transform,e.transform)}class TS{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ml{}function V_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mf(t.key,on.none()):new Eo(t.key,t.data,on.none());{const n=t.data,r=Mt.empty();let i=new qe(Je.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Br(t.key,r,new Ht(i.toArray()),on.none())}}function xS(t,e,n){t instanceof Eo?function(i,s,o){const l=i.value.clone(),u=Lm(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Br?function(i,s,o){if(!wa(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Lm(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(D_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ms(t,e,n,r){return t instanceof Eo?function(s,o,l,u){if(!wa(s.precondition,o))return l;const h=s.value.clone(),d=Fm(s.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Br?function(s,o,l,u){if(!wa(s.precondition,o))return l;const h=Fm(s.fieldTransforms,u,o),d=o.data;return d.setAll(D_(s)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return wa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function IS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=R_(r.transform,i||null);s!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,s))}return n||null}function Om(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pi(r,i,(s,o)=>wS(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eo extends Ml{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Br extends Ml{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function D_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lm(t,e,n){const r=new Map;he(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,_S(o,l,n[i]))}return r}function Fm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,vS(s,o,e))}return r}class mf extends Ml{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SS extends Ml{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&xS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ms(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ms(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=A_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=V_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Pi(this.mutations,e.mutations,(n,r)=>Om(n,r))&&Pi(this.baseMutations,e.baseMutations,(n,r)=>Om(n,r))}}class gf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){he(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return dS}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new gf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,oe;function PS(t){switch(t){case O.OK:return Z(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function b_(t){if(t===void 0)return Tn("GRPC error has no .code"),O.UNKNOWN;switch(t){case be.OK:return O.OK;case be.CANCELLED:return O.CANCELLED;case be.UNKNOWN:return O.UNKNOWN;case be.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case be.INTERNAL:return O.INTERNAL;case be.UNAVAILABLE:return O.UNAVAILABLE;case be.UNAUTHENTICATED:return O.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case be.NOT_FOUND:return O.NOT_FOUND;case be.ALREADY_EXISTS:return O.ALREADY_EXISTS;case be.PERMISSION_DENIED:return O.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case be.ABORTED:return O.ABORTED;case be.OUT_OF_RANGE:return O.OUT_OF_RANGE;case be.UNIMPLEMENTED:return O.UNIMPLEMENTED;case be.DATA_LOSS:return O.DATA_LOSS;default:return Z(39323,{code:t})}}(oe=be||(be={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Jn([4294967295,4294967295],0);function jm(t){const e=NS().encode(t),n=new Gv;return n.update(e),new Uint8Array(n.digest())}function Um(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jn([n,r],0),new Jn([i,s],0)]}class yf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ws(`Invalid padding: ${n}`);if(r<0)throw new ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ws(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Jn.fromNumber(r)));return i.compare(kS)===1&&(i=new Jn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jm(e),[r,i]=Um(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new yf(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=jm(e),[r,i]=Um(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ws extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ol(ee.min(),i,new Ae(ie),xn(),se())}}class wo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wo(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class M_{constructor(e,n){this.targetId=e,this.Ce=n}}class O_{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Bm{constructor(){this.ve=0,this.Fe=zm(),this.Me=tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new wo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=zm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VS{constructor(e){this.Ge=e,this.ze=new Map,this.je=xn(),this.Je=ra(),this.He=ra(),this.Ye=new Ae(ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Kc(s))if(r===0){const o=new K(s.path);this.et(n,o,ut.newNoDocument(o,ee.min()))}else he(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=sr(r).toUint8Array()}catch(u){if(u instanceof o_)return Ri("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new yf(o,i,s)}catch(u){return Ri(u instanceof ws?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Kc(l.target)){const u=new K(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ut.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=se();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ol(e,n,this.Ye,this.je,r);return this.je=xn(),this.Je=ra(),this.He=ra(),this.Ye=new Ae(ie),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Bm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ra(){return new Ae(K.comparator)}function zm(){return new Ae(K.comparator)}const DS={asc:"ASCENDING",desc:"DESCENDING"},bS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MS={and:"AND",or:"OR"};class OS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jc(t,e){return t.useProto3Json||Nl(e)?e:{value:e}}function il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LS(t,e){return il(t,e.toTimestamp())}function an(t){return he(!!t,49232),ee.fromTimestamp(function(n){const r=ir(n);return new Ee(r.seconds,r.nanos)}(t))}function vf(t,e){return Zc(t,e).canonicalString()}function Zc(t,e){const n=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function F_(t){const e=ge.fromString(t);return he($_(e),10190,{key:e.toString()}),e}function eh(t,e){return vf(t.databaseId,e.path)}function Uu(t,e){const n=F_(e);if(n.get(1)!==t.databaseId.projectId)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(U_(n))}function j_(t,e){return vf(t.databaseId,e)}function FS(t){const e=F_(t);return e.length===4?ge.emptyPath():U_(e)}function th(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function U_(t){return he(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $m(t,e,n){return{name:eh(t,e),fields:n.value.mapValue.fields}}function jS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(he(d===void 0||typeof d=="string",58123),tt.fromBase64String(d||"")):(he(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),tt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?O.UNKNOWN:b_(h.code);return new q(d,h.message||"")}(o);n=new O_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uu(t,r.document.name),s=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):ee.min(),l=new Mt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(i,s,o,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Ta(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Uu(t,r.document),s=r.readTime?an(r.readTime):ee.min(),o=ut.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Ta([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Uu(t,r.document),s=r.removedTargetIds||[];n=new Ta([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new RS(i,s),l=r.targetId;n=new M_(l,o)}}return n}function US(t,e){let n;if(e instanceof Eo)n={update:$m(t,e.key,e.value)};else if(e instanceof mf)n={delete:eh(t,e.key)};else if(e instanceof Br)n={update:$m(t,e.key,e.data),updateMask:KS(e.fieldMask)};else{if(!(e instanceof SS))return Z(16599,{Vt:e.type});n={verify:eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof co)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ho)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:LS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function BS(t,e){return t&&t.length>0?(he(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?an(i.updateTime):an(s);return o.isEqual(ee.min())&&(o=an(s)),new TS(o,i.transformResults||[])}(n,e))):[]}function zS(t,e){return{documents:[j_(t,e.path)]}}function $S(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=j_(t,i);const s=function(h){if(h.length!==0)return z_(Kt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:Xr(g.field),direction:WS(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Jc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function qS(t){let e=FS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){he(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const g=B_(p);return g instanceof Kt&&g_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(N){return new lo(Yr(N.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Nl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,S=p.values||[];return new nl(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,S=p.values||[];return new nl(S,g)}(n.endAt)),lS(e,i,o,s,l,"F",u,h)}function HS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function B_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yr(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yr(n.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yr(n.unaryFilter.field);return Oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yr(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(Yr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>B_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function WS(t){return DS[t]}function QS(t){return bS[t]}function GS(t){return MS[t]}function Xr(t){return{fieldPath:t.canonicalString()}}function Yr(t){return Je.fromServerFormat(t.fieldPath)}function z_(t){return t instanceof Oe?function(n){if(n.op==="=="){if(Nm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NAN"}};if(Pm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NOT_NAN"}};if(Pm(n.value))return{unaryFilter:{field:Xr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(n.field),op:QS(n.op),value:n.value}}}(t):t instanceof Kt?function(n){const r=n.getFilters().map(i=>z_(i));return r.length===1?r[0]:{compositeFilter:{op:GS(n.op),filters:r}}}(t):Z(54877,{filter:t})}function KS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r,i,s=ee.min(),o=ee.min(),l=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.yt=e}}function YS(t){const e=qS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.Cn=new ZS}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(rr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class ZS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(q_,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vi(0)}static cr(){return new Vi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="LruGarbageCollector",eA=1048576;function Wm([t,e],[n,r]){const i=ie(t,n);return i===0?ie(e,r):i}class tA{constructor(e){this.Ir=e,this.buffer=new qe(Wm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Wm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(Hm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bi(n)?W(Hm,"Ignoring IndexedDB error during garbage collection: ",n):await Ui(n)}await this.Vr(3e5)})}}class rA{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Pl.ce);const r=new tA(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(qm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qm):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Gr()<=ae.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function iA(t,e){return new rA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.changes=new Ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ms(r.mutation,i,Ht.empty(),Ee.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=Sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Es();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=xn();const o=bs(),l=function(){return bs()}();return n.forEach((u,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Br)?s=s.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Ms(d.mutation,h,d.mutation.getFieldMask(),Ee.now())):o.set(h.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>l.set(h,new oA(d,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=bs();let i=new Ae((o,l)=>o-l),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||Ht.empty();d=l.applyToLocalView(h,d),r.set(u,d);const p=(i.get(l.batchId)||se()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=A_();d.forEach(g=>{if(!s.has(g)){const S=V_(n.get(g),r.get(g));S!==null&&p.set(g,S),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):w_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Sr());let l=io,u=s;return o.next(h=>L.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,se())).next(d=>({batchId:l,changes:S_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Es();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Es();return this.indexManager.getCollectionParents(e,s).next(l=>L.forEach(l,u=>{const h=function(p,g){return new zi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,ut.newInvalidDocument(d)))});let l=Es();return o.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Ms(d.mutation,h,Ht.empty(),Ee.now()),Dl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:an(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:YS(i.bundledQuery),readTime:an(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.overlays=new Ae(K.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Sr(),s=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Sr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Sr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=i)););return L.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new CS(n,r));let s=this.qr.get(n);s===void 0&&(s=se(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this.Qr=new qe(We.$r),this.Ur=new qe(We.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new We(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new ge([])),r=new We(n,e),i=new We(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new ge([])),r=new We(n,e),i=new We(n,e+1);let s=se();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new We(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||ie(e.Yr,n.Yr)}static Kr(e,n){return ie(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(We.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AS(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new We(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?uf:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ie);return n.forEach(i=>{const s=new We(i,0),o=new We(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new We(new K(s),0);let l=new qe(ie);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){he(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new We(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new We(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.ri=e,this.docs=function(){return new Ae(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=xn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ut.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xn();const o=n.path,l=new K(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||UI(jI(d),r)<=0||(i.has(d.key)||Dl(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dA(this)}getSize(e){return L.resolve(this.size)}}class dA extends sA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.persistence=e,this.si=new Ur(n=>ff(n),df),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new _f,this.targetCount=0,this.ai=Vi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pl(0),this.li=!1,this.li=!0,this.hi=new cA,this.referenceDelegate=e(this),this.Pi=new pA(this),this.indexManager=new JS,this.remoteDocumentCache=function(i){return new fA(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new XS(n),this.Ii=new lA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new hA(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new mA(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class mA extends zI{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Ri=new _f,this.Vi=null}static mi(e){return new Ef(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=K.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class sl{constructor(e,n){this.persistence=e,this.pi=new Ur(r=>HI(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=iA(this,n)}static mi(e,n){return new sl(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,ee.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_a(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ax()?8:$I(sx())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new gA;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Gr()<=ae.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Gr()<=ae.DEBUG&&W("QueryEngine","Query:",Kr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Gr()<=ae.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):L.resolve())}ys(e,n){if(bm(n))return L.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yc(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,Yc(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return bm(n)||i.isEqual(ee.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(Gr()<=ae.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Kr(n)),this.vs(e,o,n,FI(i,io)).next(l=>l))})}Ds(e,n){let r=new qe(x_(e));return n.forEach((i,s)=>{Dl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Gr()<=ae.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Kr(n)),this.ps.getDocumentsMatchingQuery(e,n,rr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="LocalStore",vA=3e8;class _A{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ae(ie),this.xs=new Ur(s=>ff(s),df),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function EA(t,e,n,r){return new _A(t,e,n,r)}async function W_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=se();for(const h of i){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function wA(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,g=p.keys();let S=L.resolve();return g.forEach(N=>{S=S.next(()=>d.getEntry(u,N)).next(P=>{const V=h.docVersions.get(N);he(V!==null,48541),P.version.compareTo(V)<0&&(p.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),d.addEntry(P)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=se();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Q_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function TA(t,e){const n=te(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,p)));let S=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?S=S.withResumeToken(tt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),i=i.insert(p,S),function(P,V,C){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=vA?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,S,d)&&l.push(n.Pi.updateTargetData(s,S))});let u=xn(),h=se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(xA(s,o,e.documentUpdates).next(d=>{u=d.ks,h=d.qs})),!r.isEqual(ee.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return L.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=i,s))}function xA(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W(Tf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function IA(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SA(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Un(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function nh(t,e,n){const r=te(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Bi(o))throw o;W(Tf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Qm(t,e,n){const r=te(t);let i=ee.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const p=te(u),g=p.xs.get(d);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,d)}(r,o,sn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:se())).next(l=>(AA(r,cS(e),l),{documents:l,Qs:s})))}function AA(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Gm{constructor(){this.activeTargetIds=gS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CA{constructor(){this.Mo=new Gm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="ConnectivityMonitor";class Xm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(Km,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(Km,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=null;function rh(){return ia===null?ia=function(){return 268435456+Math.round(2147483648*Math.random())}():ia++,"0x"+ia.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="RestConnection",PA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===el?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=rh(),l=this.zo(e,n.toUriEncodedString());W(Bu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:h}=new URL(l),d=sf(h);return this.Jo(e,l,u,r,d).then(p=>(W(Bu,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ri(Bu,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ji}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=PA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class VA extends NA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=rh();return new Promise((l,u)=>{const h=new Kv;h.setWithCredentials(!0),h.listenOnce(Xv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case va.NO_ERROR:const p=h.getResponseJson();W(ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case va.TIMEOUT:W(ot,`RPC '${e}' ${o} timed out`),u(new q(O.DEADLINE_EXCEEDED,"Request time out"));break;case va.HTTP_ERROR:const g=h.getStatus();if(W(ot,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S==null?void 0:S.error;if(N&&N.status&&N.message){const P=function(C){const T=C.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(T)>=0?T:O.UNKNOWN}(N.status);u(new q(P,N.message))}else u(new q(O.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new q(O.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{W(ot,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);W(ot,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",d,r,15)})}T_(e,n,r){const i=rh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zv(),l=Jv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");W(ot,`Creating RPC '${e}' stream ${i}: ${d}`,u);const p=o.createWebChannel(d,u);this.I_(p);let g=!1,S=!1;const N=new kA({Yo:V=>{S?W(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(g||(W(ot,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),W(ot,`RPC '${e}' stream ${i} sending:`,V),p.send(V))},Zo:()=>p.close()}),P=(V,C,T)=>{V.listen(C,R=>{try{T(R)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,_s.EventType.OPEN,()=>{S||(W(ot,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),P(p,_s.EventType.CLOSE,()=>{S||(S=!0,W(ot,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(p))}),P(p,_s.EventType.ERROR,V=>{S||(S=!0,Ri(ot,`RPC '${e}' stream ${i} transport errored. Name:`,V.name,"Message:",V.message),N.a_(new q(O.UNAVAILABLE,"The operation could not be completed")))}),P(p,_s.EventType.MESSAGE,V=>{var C;if(!S){const T=V.data[0];he(!!T,16349);const R=T,D=(R==null?void 0:R.error)||((C=R[0])==null?void 0:C.error);if(D){W(ot,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let B=function(E){const x=be[E];if(x!==void 0)return b_(x)}(F),I=D.message;B===void 0&&(B=O.INTERNAL,I="Unknown error status: "+F+" with message "+D.message),S=!0,N.a_(new q(B,I)),p.close()}else W(ot,`RPC '${e}' stream ${i} received:`,T),N.u_(T)}}),P(l,Yv.STAT_EVENT,V=>{V.stat===qc.PROXY?W(ot,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===qc.NOPROXY&&W(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function zu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t){return new OS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="PersistentStream";class K_{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new q(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(Ym,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(Ym,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DA extends K_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=jS(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?an(o.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=th(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Kc(u)?{documents:zS(s,u)}:{query:$S(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=L_(s,o.resumeToken);const h=Jc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=il(s,o.snapshotVersion.toTimestamp());const h=Jc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=HS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=th(this.serializer),n.removeTarget=e,this.q_(n)}}class bA extends K_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=BS(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=th(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>US(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class OA extends MA{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Zc(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(O.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Zc(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(O.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class LA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tn(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="RemoteStore";class FA{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{zr(this)&&(W(br,"Restarting streams for network reachability change."),await async function(u){const h=te(u);h.Ea.add(4),await To(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Fl(h)}(this))})}),this.Ra=new LA(r,i)}}async function Fl(t){if(zr(t))for(const e of t.da)await e(!0)}async function To(t){for(const e of t.da)await e(!1)}function X_(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Af(n)?Sf(n):$i(n).O_()&&If(n,e))}function xf(t,e){const n=te(t),r=$i(n);n.Ia.delete(e),r.O_()&&Y_(n,e),n.Ia.size===0&&(r.O_()?r.L_():zr(n)&&n.Ra.set("Unknown"))}function If(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$i(t).Y_(e)}function Y_(t,e){t.Va.Ue(e),$i(t).Z_(e)}function Sf(t){t.Va=new VS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$i(t).start(),t.Ra.ua()}function Af(t){return zr(t)&&!$i(t).x_()&&t.Ia.size>0}function zr(t){return te(t).Ea.size===0}function J_(t){t.Va=void 0}async function jA(t){t.Ra.set("Online")}async function UA(t){t.Ia.forEach((e,n)=>{If(t,e)})}async function BA(t,e){J_(t),Af(t)?(t.Ra.ha(e),Sf(t)):t.Ra.set("Unknown")}async function zA(t,e,n){if(t.Ra.set("Online"),e instanceof O_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){W(br,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(t,r)}else if(e instanceof Ta?t.Va.Ze(e):e instanceof M_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await Q_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(tt.EMPTY_BYTE_STRING,d.snapshotVersion)),Y_(s,u);const p=new Un(d.target,u,h,d.sequenceNumber);If(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(br,"Failed to raise snapshot:",r),await ol(t,r)}}async function ol(t,e,n){if(!Bi(e))throw e;t.Ea.add(1),await To(t),t.Ra.set("Offline"),n||(n=()=>Q_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(br,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fl(t)})}function Z_(t,e){return e().catch(n=>ol(t,n,e))}async function jl(t){const e=te(t),n=ar(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:uf;for(;$A(e);)try{const i=await IA(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,qA(e,i)}catch(i){await ol(e,i)}e0(e)&&t0(e)}function $A(t){return zr(t)&&t.Ta.length<10}function qA(t,e){t.Ta.push(e);const n=ar(t);n.O_()&&n.X_&&n.ea(e.mutations)}function e0(t){return zr(t)&&!ar(t).x_()&&t.Ta.length>0}function t0(t){ar(t).start()}async function HA(t){ar(t).ra()}async function WA(t){const e=ar(t);for(const n of t.Ta)e.ea(n.mutations)}async function QA(t,e,n){const r=t.Ta.shift(),i=gf.from(r,e,n);await Z_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await jl(t)}async function GA(t,e){e&&ar(t).X_&&await async function(r,i){if(function(o){return PS(o)&&o!==O.ABORTED}(i.code)){const s=r.Ta.shift();ar(r).B_(),await Z_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await jl(r)}}(t,e),e0(t)&&t0(t)}async function Jm(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W(br,"RemoteStore received new credentials");const r=zr(n);n.Ea.add(3),await To(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fl(n)}async function KA(t,e){const n=te(t);e?(n.Ea.delete(2),await Fl(n)):e||(n.Ea.add(2),await To(n),n.Ra.set("Unknown"))}function $i(t){return t.ma||(t.ma=function(n,r,i){const s=te(n);return s.sa(),new DA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:jA.bind(null,t),t_:UA.bind(null,t),r_:BA.bind(null,t),H_:zA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Af(t)?Sf(t):t.Ra.set("Unknown")):(await t.ma.stop(),J_(t))})),t.ma}function ar(t){return t.fa||(t.fa=function(n,r,i){const s=te(n);return s.sa(),new bA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:HA.bind(null,t),r_:GA.bind(null,t),ta:WA.bind(null,t),na:QA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await jl(t)):(await t.fa.stop(),t.Ta.length>0&&(W(br,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Cf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rf(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),Bi(t))return new q(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{static emptySet(e){return new yi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Es(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.ga=new Ae(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Di{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Di(e,n,yi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class YA{constructor(){this.queries=eg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=eg(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new q(O.ABORTED,"Firestore shutting down"))}}function eg(){return new Ur(t=>T_(t),Vl)}async function JA(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new XA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Rf(o,`Initialization of query '${Kr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Pf(n)}async function ZA(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function eC(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&Pf(n)}function tC(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Pf(t){t.Ca.forEach(e=>{e.next()})}var ih,tg;(tg=ih||(ih={})).Ma="default",tg.Cache="cache";class nC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Di(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Di.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.key=e}}class r0{constructor(e){this.key=e}}class rC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=x_(e),this.tu=new yi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Zm,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),S=Dl(this.query,p)?p:null,N=!!g&&this.mutatedKeys.has(g.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;g&&S?g.data.isEqual(S.data)?N!==P&&(r.track({type:3,doc:S}),V=!0):this.su(g,S)||(r.track({type:2,doc:S}),V=!0,(u&&this.eu(S,u)>0||h&&this.eu(S,h)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),V=!0):g&&!S&&(r.track({type:1,doc:g}),V=!0,(u||h)&&(l=!0)),V&&(S?(o=o.add(S),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(S,N){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:V})}};return P(S)-P(N)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Di(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new r0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new n0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Di.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Nf="SyncEngine";class iC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sC{constructor(e){this.key=e,this.hu=!1}}class oC{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ur(l=>T_(l),Vl),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(K.comparator),this.Au=new Map,this.Ru=new _f,this.Vu={},this.mu=new Map,this.fu=Vi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aC(t,e,n=!0){const r=u0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await i0(r,e,n,!0),i}async function lC(t,e){const n=u0(t);await i0(n,e,!0,!1)}async function i0(t,e,n,r){const i=await SA(t.localStore,sn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await uC(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&X_(t.remoteStore,i),l}async function uC(t,e,n,r,i){t.pu=(p,g,S)=>async function(P,V,C,T){let R=V.view.ru(C);R.Cs&&(R=await Qm(P.localStore,V.query,!1).then(({documents:I})=>V.view.ru(I,R)));const D=T&&T.targetChanges.get(V.targetId),F=T&&T.targetMismatches.get(V.targetId)!=null,B=V.view.applyChanges(R,P.isPrimaryClient,D,F);return rg(P,V.targetId,B.au),B.snapshot}(t,p,g,S);const s=await Qm(t.localStore,e,!0),o=new rC(e,s.Qs),l=o.ru(s.documents),u=wo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);rg(t,n,h.au);const d=new iC(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function cC(t,e,n){const r=te(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Vl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xf(r.remoteStore,i.targetId),sh(r,i.targetId)}).catch(Ui)):(sh(r,i.targetId),await nh(r.localStore,i.targetId,!0))}async function hC(t,e){const n=te(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xf(n.remoteStore,r.targetId))}async function fC(t,e,n){const r=_C(t);try{const i=await function(o,l){const u=te(o),h=Ee.now(),d=l.reduce((S,N)=>S.add(N.key),se());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=xn(),P=se();return u.Ns.getEntries(S,d).next(V=>{N=V,N.forEach((C,T)=>{T.isValidDocument()||(P=P.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,N)).next(V=>{p=V;const C=[];for(const T of l){const R=IS(T,p.get(T.key).overlayedDocument);R!=null&&C.push(new Br(T.key,R,d_(R.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,C,l)}).next(V=>{g=V;const C=V.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(S,V.batchId,C)})}).then(()=>({batchId:g.batchId,changes:S_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ae(ie)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,i.batchId,n),await xo(r,i.changes),await jl(r.remoteStore)}catch(i){const s=Rf(i,"Failed to persist write");n.reject(s)}}async function s0(t,e){const n=te(t);try{const r=await TA(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?he(o.hu,14607):i.removedDocuments.size>0&&(he(o.hu,42227),o.hu=!1))}),await xo(n,r,e)}catch(r){await Ui(r)}}function ng(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const g of p.Sa)g.va(l)&&(h=!0)}),h&&Pf(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dC(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ae(K.comparator);o=o.insert(s,ut.newNoDocument(s,ee.min()));const l=se().add(s),u=new Ol(ee.min(),new Map,new Ae(ie),o,l);await s0(r,u),r.du=r.du.remove(s),r.Au.delete(e),kf(r)}else await nh(r.localStore,e,!1).then(()=>sh(r,e,n)).catch(Ui)}async function pC(t,e){const n=te(t),r=e.batch.batchId;try{const i=await wA(n.localStore,e);a0(n,r,null),o0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xo(n,i)}catch(i){await Ui(i)}}async function mC(t,e,n){const r=te(t);try{const i=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(he(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);a0(r,e,n),o0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xo(r,i)}catch(i){await Ui(i)}}function o0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function a0(t,e,n){const r=te(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function sh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||l0(t,r)})}function l0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),kf(t))}function rg(t,e,n){for(const r of n)r instanceof n0?(t.Ru.addReference(r.key,e),gC(t,r)):r instanceof r0?(W(Nf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||l0(t,r.key)):Z(19791,{wu:r})}function gC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(Nf,"New document in limbo: "+n),t.Eu.add(r),kf(t))}function kf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ge.fromString(e)),r=t.fu.next();t.Au.set(r,new sC(n)),t.du=t.du.insert(n,r),X_(t.remoteStore,new Un(sn(E_(n.path)),r,"TargetPurposeLimboResolution",Pl.ce))}}async function xo(t,e,n){const r=te(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=wf.As(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const d=te(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(h,g=>L.forEach(g.Es,S=>d.persistence.referenceDelegate.addReference(p,g.targetId,S)).next(()=>L.forEach(g.ds,S=>d.persistence.referenceDelegate.removeReference(p,g.targetId,S)))))}catch(p){if(!Bi(p))throw p;W(Tf,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const S=d.Ms.get(g),N=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(g,P)}}}(r.localStore,s))}async function yC(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W(Nf,"User change. New user:",e.toKey());const r=await W_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new q(O.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xo(n,r.Ls)}}function vC(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function u0(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=s0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dC.bind(null,e),e.Pu.H_=eC.bind(null,e.eventManager),e.Pu.yu=tC.bind(null,e.eventManager),e}function _C(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mC.bind(null,e),e}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ll(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return EA(this.persistence,new yA,e.initialUser,this.serializer)}Cu(e){return new H_(Ef.mi,this.serializer)}Du(e){return new CA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class EC extends al{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){he(this.persistence.referenceDelegate instanceof sl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new nA(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new H_(r=>sl.mi(r,n),this.serializer)}}class oh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ng(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yC.bind(null,this.syncEngine),await KA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YA}()}createDatastore(e){const n=Ll(e.databaseInfo.databaseId),r=function(s){return new VA(s)}(e.databaseInfo);return function(s,o,l,u){return new OA(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new FA(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ng(this.syncEngine,n,0),function(){return Xm.v()?new Xm:new RA}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,d){const p=new oC(i,s,o,l,u,h);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);W(br,"RemoteStore shutting down."),s.Ea.add(5),await To(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}oh.provider={build:()=>new oh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="FirestoreClient";class TC{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(lr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(lr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $u(t,e){t.asyncQueue.verifyOperationInProgress(),W(lr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await W_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ig(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xC(t);W(lr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Jm(e.remoteStore,i)),t._onlineComponents=e}async function xC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(lr,"Using user provided OfflineComponentProvider");try{await $u(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ri("Error using user provided cache. Falling back to memory cache: "+n),await $u(t,new al)}}else W(lr,"Using default OfflineComponentProvider"),await $u(t,new EC(void 0));return t._offlineComponents}async function c0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(lr,"Using user provided OnlineComponentProvider"),await ig(t,t._uninitializedComponentsProvider._online)):(W(lr,"Using default OnlineComponentProvider"),await ig(t,new oh))),t._onlineComponents}function IC(t){return c0(t).then(e=>e.syncEngine)}async function SC(t){const e=await c0(t),n=e.eventManager;return n.onListen=aC.bind(null,e.syncEngine),n.onUnlisten=cC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hC.bind(null,e.syncEngine),n}function AC(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const d=new wC({next:g=>{d.Nu(),o.enqueueAndForget(()=>ZA(s,p)),g.fromCache&&u.source==="server"?h.reject(new q(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new nC(l,d,{includeMetadataChanges:!0,qa:!0});return JA(s,p)}(await SC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="firestore.googleapis.com",og=!0;class ag{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f0,this.ssl=og}else this.host=e.host,this.ssl=e.ssl??og;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eA)throw new q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ul{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ag({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ag(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CI;switch(r.type){case"firstParty":return new kI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sg.get(n);r&&(W("ComponentProvider","Removing Datastore"),sg.delete(n),r.terminate())}(this),Promise.resolve()}}function CC(t,e,n,r={}){var h;t=ro(t,Ul);const i=sf(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(ex(`https://${l}`),ix("Firestore",!0)),s.host!==f0&&s.host!==l&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Xa(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=at.MOCK_USER;else{d=tx(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new at(g)}t._authCredentials=new RI(new t_(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $r(this.firestore,e,this._query)}}class Ge{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_o(n,Ge._jsonSchema))return new Ge(e,r||null,new K(ge.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:Le("string",Ge._jsonSchemaVersion),referencePath:Le("string")};class er extends $r{constructor(e,n,r){super(e,n,E_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new K(e))}withConverter(e){return new er(this.firestore,e,this._path)}}function Bl(t,e,...n){if(t=Ci(t),n_("collection","path",e),t instanceof Ul){const r=ge.fromString(e,...n);return Em(r),new er(t,null,r)}{if(!(t instanceof Ge||t instanceof er))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return Em(r),new er(t.firestore,null,r)}}function Vf(t,e,...n){if(t=Ci(t),arguments.length===1&&(e=lf.newId()),n_("doc","path",e),t instanceof Ul){const r=ge.fromString(e,...n);return _m(r),new Ge(t,null,new K(r))}{if(!(t instanceof Ge||t instanceof er))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return _m(r),new Ge(t.firestore,t instanceof er?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="AsyncQueue";class ug{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G_(this,"async_queue_retry"),this._c=()=>{const r=zu();r&&W(lg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=zu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=zu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bi(e))throw e;W(lg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Tn("INTERNAL UNHANDLED ERROR: ",cg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Cf.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:cg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function cg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class zl extends Ul{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ug,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ug(e),this._firestoreClient=void 0,await e}}}function RC(t,e){const n=typeof t=="object"?t:pI(),r=typeof t=="string"?t:el,i=uI(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=JT("firestore");s&&CC(i,...s)}return i}function d0(t){if(t._terminated)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PC(t),t._firestoreClient}function PC(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,h,d){return new GI(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,h0(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ot(tt.fromBase64String(e))}catch(n){throw new q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ot(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ot._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_o(e,Ot._jsonSchema))return Ot.fromBase64String(e.bytes)}}Ot._jsonSchemaVersion="firestore/bytes/1.0",Ot._jsonSchema={type:Le("string",Ot._jsonSchemaVersion),bytes:Le("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(_o(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:Le("string",ln._jsonSchemaVersion),latitude:Le("number"),longitude:Le("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_o(e,un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new un(e.vectorValues);throw new q(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}un._jsonSchemaVersion="firestore/vectorValue/1.0",un._jsonSchema={type:Le("string",un._jsonSchemaVersion),vectorValues:Le("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^__.*__$/;class kC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eo(e,this.data,n,this.fieldTransforms)}}function p0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Mf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ll(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(p0(this.Ac)&&NC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ll(e)}Cc(e,n,r,i=!1){return new Mf({Ac:e,methodName:n,Dc:r,path:Je.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function m0(t){const e=t._freezeSettings(),n=Ll(t._databaseId);return new VC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DC(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);v0("Data must be an object, but it was:",o,r);const l=g0(r,o);let u,h;if(s.merge)u=new Ht(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const g=MC(e,p,n);if(!o.contains(g))throw new q(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);LC(d,g)||d.push(g)}u=new Ht(d),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new kC(new Mt(l),u,h)}class Of extends bf{_toFieldTransform(e){return new ES(e.path,new uo)}isEqual(e){return e instanceof Of}}function bC(t,e,n,r=!1){return Lf(n,t.Cc(r?4:3,e))}function Lf(t,e){if(y0(t=Ci(t)))return v0("Unsupported field value:",e,t),g0(t,e);if(t instanceof bf)return function(r,i){if(!p0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Lf(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ci(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ee.fromDate(r);return{timestampValue:il(i.serializer,s)}}if(r instanceof Ee){const s=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:il(i.serializer,s)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ot)return{bytesValue:L_(i.serializer,r._byteString)};if(r instanceof Ge){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof un)return function(o,l){return{mapValue:{fields:{[h_]:{stringValue:f_},[tl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return pf(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Rl(r)}`)}(t,e)}function g0(t,e){const n={};return s_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,(r,i)=>{const s=Lf(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function y0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof ln||t instanceof Ot||t instanceof Ge||t instanceof bf||t instanceof un)}function v0(t,e,n){if(!y0(n)||!r_(n)){const r=Rl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function MC(t,e,n){if((e=Ci(e))instanceof Df)return e._internalPath;if(typeof e=="string")return _0(t,e);throw ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const OC=new RegExp("[~\\*/\\[\\]]");function _0(t,e,n){if(e.search(OC)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Df(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ll(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new q(O.INVALID_ARGUMENT,l+t+u)}function LC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FC extends E0{data(){return super.data()}}function Ff(t,e){return typeof e=="string"?_0(t,e):e instanceof Df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jf{}class w0 extends jf{}function T0(t,e,...n){let r=[];e instanceof jf&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Bf).length,l=s.filter(u=>u instanceof Uf).length;if(o>1||o>0&&l>0)throw new q(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Uf extends w0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uf(e,n,r)}_apply(e){const n=this._parse(e);return I0(e._query,n),new $r(e.firestore,e.converter,Xc(e._query,n))}_parse(e){const n=m0(e.firestore);return function(s,o,l,u,h,d,p){let g;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){fg(p,d);const N=[];for(const P of p)N.push(hg(u,s,P));g={arrayValue:{values:N}}}else g=hg(u,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||fg(p,d),g=bC(l,o,p,d==="in"||d==="not-in");return Oe.create(h,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Bf extends jf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)I0(o,u),o=Xc(o,u)}(e._query,n),new $r(e.firestore,e.converter,Xc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zf extends w0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zf(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lo(s,o)}(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new zi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function x0(t,e="asc"){const n=e,r=Ff("orderBy",t);return zf._create(r,n)}function hg(t,e,n){if(typeof(n=Ci(n))=="string"){if(n==="")throw new q(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w_(e)&&n.indexOf("/")!==-1)throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!K.isDocumentKey(r))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rm(t,new K(r))}if(n instanceof Ge)return Rm(t,n._key);throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rl(n)}.`)}function fg(t,e){if(!Array.isArray(t)||t.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I0(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UC{convertValue(e,n="none"){switch(or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[tl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ne(o.doubleValue));return new un(n)}convertGeoPoint(e){return new ln(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const n=ir(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);he($_(r),9688,{name:e});const i=new oo(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Tn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vi extends E0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ff("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",vi._jsonSchema={type:Le("string",vi._jsonSchemaVersion),bundleSource:Le("string","DocumentSnapshot"),bundleName:Le("string"),bundle:Le("string")};class xa extends vi{data(e={}){return super.data(e)}}class _i{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new sa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xa(this._firestore,this._userDataWriter,r.key,r,new sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new xa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new sa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new xa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new sa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:zC(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_i._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}_i._jsonSchemaVersion="firestore/querySnapshot/1.0",_i._jsonSchema={type:Le("string",_i._jsonSchemaVersion),bundleSource:Le("string","QuerySnapshot"),bundleName:Le("string"),bundle:Le("string")};class $C extends UC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ot(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function S0(t){t=ro(t,$r);const e=ro(t.firestore,zl),n=d0(e),r=new $C(e);return jC(t._query),AC(n,t._query).then(i=>new _i(e,r,t,i))}function A0(t){return R0(ro(t.firestore,zl),[new mf(t._key,on.none())])}function C0(t,e){const n=ro(t.firestore,zl),r=Vf(t),i=BC(t.converter,e);return R0(n,[DC(m0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function R0(t,e){return function(r,i){const s=new Zn;return r.asyncQueue.enqueueAndForget(async()=>fC(await IC(r),i,s)),s.promise}(d0(t),e)}function P0(){return new Of("serverTimestamp")}(function(e,n=!0){(function(i){ji=i})(dI),Ja(new to("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new zl(new PI(r.getProvider("auth-internal")),new VI(o,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(h.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),gi(mm,gm,e),gi(mm,gm,"esm2020")})();const qC={apiKey:"AIzaSyBUabFVbZsdvJxSNLz9E6uooOHmHAYztMQ",authDomain:"numerical-web-fe12a.firebaseapp.com",projectId:"numerical-web-fe12a",storageBucket:"numerical-web-fe12a.appspot.com",messagingSenderId:"450601861029",appId:"1:450601861029:web:8ad42bf62f220abb7a324c"},HC=Hv(qC),qi=RC(HC),$f="problems_bisection";async function WC(){const t=T0(Bl(qi,$f),x0("createdAt","desc"));return(await S0(t)).docs.map(n=>({id:n.id,...n.data()}))}async function QC(t){return C0(Bl(qi,$f),{...t,method:"bisection",createdAt:P0()})}async function GC(t){return A0(Vf(qi,$f,t))}const KC=Object.freeze(Object.defineProperty({__proto__:null,deleteBisectionProblem:GC,getBisectionProblems:WC,saveBisectionProblem:QC},Symbol.toStringTag,{value:"Module"}));function N0(t){const[e,n]=M.useState([]),[r,i]=M.useState(new Set),s=M.useCallback(async()=>{if(!t||typeof t.get!="function"){const d=(t==null?void 0:t.getBisectionProblems)||(t==null?void 0:t.getFalsePositionProblems)||(t==null?void 0:t.getProblems)||(t==null?void 0:t.get);if(!d)return;const p=await d();n(p);return}const h=await t.get();n(h)},[t]),o=M.useCallback(async h=>{if(!t)throw new Error("service required");const d=t.saveBisectionProblem||t.saveFalsePositionProblem||t.save||t.add;if(!d)throw new Error("save method not found on service");await d(h),await s()},[t,s]),l=M.useCallback(async h=>{if(!t)throw new Error("service required");const d=t.deleteBisectionProblem||t.deleteFalsePositionProblem||t.delete||t.remove;if(!d)throw new Error("delete method not found on service");await d(h),await s()},[t,s]),u=M.useCallback((h,d=480)=>{i(p=>new Set(p).add(h)),setTimeout(async()=>{try{await l(h)}finally{i(p=>{const g=new Set(p);return g.delete(h),g})}},d)},[l]);return{problems:e,removingIds:r,refresh:s,saveProblem:o,deleteProblem:u}}function On(t){return t===null||Number.isNaN(t)?"-":isFinite(t)?Number(t).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(t)}function ul(t){if(!t||!t.trim())return null;let e=t.replace(/\^/g,"**");e=e.replace(/\bln\s*\(/gi,"log("),e=e.replace(/\bpi\b/gi,"PI"),e=e.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+e+"); }")}catch{return null}}function XC(t,e,n,r=1e-6,i=50){try{let s=t(e),o=t(n);if(!isFinite(s)||!isFinite(o))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(s*o>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const l=[];let u=null;for(let h=0;h<=i;h++){const d=(e+n)/2,p=t(d);if(!isFinite(p))return{error:"f(x1) คำนวณไม่ได้",iterations:l,converged:!1};let g=null;if(u!==null){const S=Math.abs(d)>1e-12?Math.abs(d):1;g=Math.abs(d-u)/S}if(l.push({iter:h,xl:e,xr:n,x1:d,fx1:p,error:g}),Math.abs(p)===0||g!==null&&g<=r)return{root:d,iterations:l,converged:!0};s*p<0?(n=d,o=p):(e=d,s=p),u=d}return{root:(e+n)/2,iterations:l,converged:!1}}catch(s){return{error:String(s),iterations:[],converged:!1}}}function YC(t,e,n=-5,r=5,i=[],s={}){if(!t)return;const{width:o=800,height:l=320,bg:u="#061022",curveColor:h="#8ab4ff",axesColor:d="rgba(255,255,255,0.08)",pointColor:p="#f97316",lastPointColor:g="#fb923c"}=s,S=t.getContext("2d"),N=t.width=o,P=t.height=l;S.clearRect(0,0,N,P),S.fillStyle=u,S.fillRect(0,0,N,P);const V=e||(z=>z),C=(r-n)*.2||1,T=n-C,R=r+C,D=500;let F=[],B=[],I=1/0,m=-1/0;for(let z=0;z<D;z++){const Y=T+(R-T)*z/(D-1);let G;try{G=V(Y)}catch{G=NaN}F.push(Y),B.push(G),isFinite(G)&&(G<I&&(I=G),G>m&&(m=G))}I===1/0&&(I=-1,m=1);const E=(m-I)*.2||1;I-=E,m+=E;const x=z=>(z-T)/(R-T)*N,_=z=>P-(z-I)/(m-I)*P;if(S.strokeStyle=d,I<0&&m>0){const z=_(0);S.beginPath(),S.moveTo(0,z),S.lineTo(N,z),S.stroke()}if(T<0&&R>0){const z=x(0);S.beginPath(),S.moveTo(z,0),S.lineTo(z,P),S.stroke()}S.beginPath(),S.lineWidth=2,S.strokeStyle=h;let y=!1;for(let z=0;z<D;z++){const Y=F[z],G=B[z];if(!isFinite(G)){y=!1;continue}const J=x(Y),j=_(G);y?S.lineTo(J,j):(S.moveTo(J,j),y=!0)}S.stroke(),i.forEach(z=>{const Y=x(z.x1),G=_(z.fx1);S.beginPath(),S.arc(Y,G,3,0,2*Math.PI),S.fillStyle=p,S.fill()});const w=(z,Y,G)=>{const J=x(z);S.beginPath(),S.moveTo(J,0),S.lineTo(J,P),S.strokeStyle=Y,S.stroke(),S.fillStyle=Y,S.font="12px sans-serif",S.fillText(G+"="+On(z),J+6,18)};if(w(n,"#22c55e","XL"),w(r,"#ef4444","XR"),i.length){const z=i[i.length-1],Y=x(z.x1),G=_(z.fx1);S.beginPath(),S.arc(Y,G,6,0,2*Math.PI),S.fillStyle=g,S.fill()}}function k0({func:t,xl:e=-5,xr:n=5,iterations:r=[],width:i=800,height:s=320,className:o=""}){const l=M.useRef(null);return M.useEffect(()=>{const u=l.current;YC(u,t,e,n,r,{width:i,height:s})},[t,e,n,r,i,s]),A.jsx("canvas",{ref:l,width:i,height:s,className:o})}function V0({iterations:t=[]}){return!t||t.length===0?null:A.jsx("div",{className:"bg-slate-800 rounded-lg p-4 shadow mt-6 overflow-auto",children:A.jsxs("table",{className:"w-full text-sm border-collapse",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-slate-700 text-gray-200",children:[A.jsx("th",{className:"p-2 text-right",children:"iter"}),A.jsx("th",{className:"p-2 text-right",children:"xl"}),A.jsx("th",{className:"p-2 text-right",children:"xr"}),A.jsx("th",{className:"p-2 text-right",children:"x1"}),A.jsx("th",{className:"p-2 text-right",children:"f(x1)"}),A.jsx("th",{className:"p-2 text-right",children:"error"})]})}),A.jsx("tbody",{children:t.map(e=>A.jsxs("tr",{className:"border-b border-slate-700 text-gray-100",children:[A.jsx("td",{className:"p-2 text-right",children:e.iter}),A.jsx("td",{className:"p-2 text-right",children:On(e.xl)}),A.jsx("td",{className:"p-2 text-right",children:On(e.xr)}),A.jsx("td",{className:"p-2 text-right",children:On(e.x1)}),A.jsx("td",{className:"p-2 text-right",children:On(e.fx1)}),A.jsx("td",{className:"p-2 text-right",children:e.error===null?"-":On(e.error)})]},e.iter))})]})})}function Io({title:t,subtitle:e}){return A.jsxs("header",{className:"flex items-center justify-between gap-4 mb-4 fade-in",children:[A.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:t}),e&&A.jsx("div",{className:"text-sm text-gray-400",children:e})]})}function JC(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[g,S]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,C]=M.useState("-"),{problems:T,removingIds:R,refresh:D,saveProblem:F,deleteProblem:B}=N0(KC);M.useEffect(()=>{D().catch(console.error)},[D]);const I=async()=>{if(!t||!n||!i||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await F({expr:t,xl:n,xr:i,tol:o,maxIter:u}),alert("บันทึกแล้ว!")}catch(y){console.error("บันทึกโจทย์ผิดพลาด:",y),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},m=y=>{e(y.expr??""),r(y.xl??""),s(y.xr??""),l(y.tol??""),h(y.maxIter??"")},E=y=>{if(confirm(`ลบโจทย์นี้ไหม?
${y.expr}`))try{B(y.id)}catch(w){console.error("ลบโจทย์ผิดพลาด:",w),alert("ลบไม่สำเร็จ")}},x=()=>{const y=ul(t);if(!y){S("สถานะ: สมการไม่ถูกต้อง");return}const w=parseFloat(n),z=parseFloat(i),Y=parseFloat(o),G=parseInt(u,10);if(isNaN(w)||isNaN(z)){S("สถานะ: XL/XR ไม่ถูกต้อง");return}if(w>=z){S("สถานะ: ต้องมี XL < XR");return}if(!isFinite(Y)||Y<=0){S("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(G)||G<=0){S("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const J=XC(y,w,z,Y,G);if(J.error){S("สถานะ: "+J.error);return}p(J.iterations),S("สถานะ: เสร็จสิ้น "+(J.converged?"(converged)":"(ไม่ converged)")),C(Math.max(0,J.iterations.length-1)),P(On(J.root))},_=()=>{e(""),r(""),s(""),l(""),h(""),p([]),S("สถานะ: รีเซ็ตแล้ว"),C("-"),P("-")};return A.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[A.jsx(Io,{title:"Bisection Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน",actions:[{label:"💾 Save",onClick:I,variant:"primary",title:"Save current problem"}]}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),A.jsx("input",{type:"text",value:t,onChange:y=>e(y.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),A.jsxs("div",{className:"flex gap-3 mb-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),A.jsx("input",{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),A.jsx("input",{type:"number",value:i,onChange:y=>s(y.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),A.jsxs("div",{className:"flex gap-3 mb-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),A.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),A.jsx("input",{type:"number",value:u,onChange:y=>h(y.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),A.jsxs("div",{className:"flex gap-3 mb-4",children:[A.jsx("button",{onClick:x,className:"flex-1 btn-primary glow-btn py-2 rounded font-semibold",children:"คำนวณ"}),A.jsx("button",{onClick:_,className:"flex-1 btn-danger border border-slate-600 py-2 rounded",children:"รีเซ็ต"})]}),A.jsx("button",{onClick:I,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"💾 บันทึกโจทย์นี้"}),A.jsxs("div",{className:"text-sm mb-2",children:[A.jsx("div",{children:g}),A.jsxs("div",{children:["Iterations: ",V]}),A.jsxs("div",{children:["Root: ",N]})]}),T.length>0&&A.jsxs("div",{className:"mt-2",children:[A.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"📘 โจทย์ที่บันทึกไว้:"}),A.jsx("ul",{className:"text-xs text-gray-300 bg-slate-900 rounded p-2 max-h-48 overflow-auto",children:T.map(y=>A.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-slate-700 py-1 ${R.has(y.id)?"fade-out":""}`,children:[A.jsx("span",{className:"truncate",children:y.expr}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>m(y),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),A.jsx("button",{onClick:()=>E(y),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},y.id))})]})]}),A.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow fade-in-delay2",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),A.jsx("div",{className:"w-full h-72 bg-slate-900 rounded",children:A.jsx(k0,{func:ul(t)||(y=>y),xl:parseFloat(n)||-5,xr:parseFloat(i)||5,iterations:d,className:"w-full h-72 rounded"})}),A.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = x1 ทุก iteration (วงใหญ่ = x1 สุดท้าย)"})]})]}),A.jsx(V0,{iterations:d}),A.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© Numerical Web — ฝีมือคุณ"})]})}const qf="problems_falseposition";async function D0(){const t=T0(Bl(qi,qf),x0("createdAt","desc"));return(await S0(t)).docs.map(n=>({id:n.id,...n.data()}))}async function b0(t){return C0(Bl(qi,qf),{...t,method:"falseposition",createdAt:P0()})}async function M0(t){return A0(Vf(qi,qf,t))}const ZC={getFalsePositionProblems:D0,saveFalsePositionProblem:b0,deleteFalsePositionProblem:M0},eR=Object.freeze(Object.defineProperty({__proto__:null,default:ZC,deleteFalsePositionProblem:M0,getFalsePositionProblems:D0,saveFalsePositionProblem:b0},Symbol.toStringTag,{value:"Module"}));function tR(t,e,n,r=1e-6,i=50){try{let s=t(e),o=t(n);if(!isFinite(s)||!isFinite(o))return{error:"f(x) ไม่สามารถประเมินค่าได้",iterations:[],converged:!1};if(s*o>0)return{error:"f(a) และ f(b) ต้องต่างเครื่องหมาย",iterations:[],converged:!1};const l=[];let u=null,h=null;for(let d=0;d<=i;d++){u=(e*o-n*s)/(o-s);const p=t(u);if(!isFinite(p))return{error:"f(x1) คำนวณไม่ได้",iterations:l,converged:!1};const g=h===null?null:Math.abs((u-h)/(Math.abs(u)>1e-12?Math.abs(u):1));if(l.push({iter:d,xl:e,xr:n,x1:u,fx1:p,error:g}),Math.abs(p)===0||g!==null&&g<=r)return{root:u,iterations:l,converged:!0};s*p<0?(n=u,o=p):(e=u,s=p),h=u}return{root:u,iterations:l,converged:!1}}catch(s){return{error:String(s),iterations:[],converged:!1}}}function nR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[g,S]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,C]=M.useState("-"),{problems:T,removingIds:R,refresh:D,saveProblem:F,deleteProblem:B}=N0(eR);M.useEffect(()=>{D().catch(console.error)},[D]);const I=async()=>{if(!t||!n||!i||!o||!u){alert("กรอกให้ครบก่อนบันทึกนะ");return}try{await F({expr:t,xl:n,xr:i,tol:o,maxIter:u}),alert("บันทึกแล้ว!")}catch(y){console.error("บันทึกโจทย์ผิดพลาด:",y),alert("บันทึกไม่สำเร็จ ลองเช็ค Firestore rules/console")}},m=y=>{e(y.expr??""),r(y.xl??""),s(y.xr??""),l(y.tol??""),h(y.maxIter??"")},E=y=>{if(confirm(`ลบโจทย์นี้ไหม?
${y.expr}`))try{B(y.id)}catch(w){console.error("ลบโจทย์ผิดพลาด:",w),alert("ลบไม่สำเร็จ")}},x=()=>{const y=ul(t);if(!y){S("สถานะ: สมการไม่ถูกต้อง");return}const w=parseFloat(n),z=parseFloat(i),Y=parseFloat(o),G=parseInt(u,10);if(isNaN(w)||isNaN(z)){S("สถานะ: XL/XR ไม่ถูกต้อง");return}if(w>=z){S("สถานะ: ต้องมี XL < XR");return}if(!isFinite(Y)||Y<=0){S("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(G)||G<=0){S("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const J=tR(y,w,z,Y,G);if(J.error){S("สถานะ: "+J.error);return}p(J.iterations),S("สถานะ: เสร็จสิ้น "+(J.converged?"(converged)":"(ไม่ converged)")),C(Math.max(0,J.iterations.length-1)),P(On(J.root))},_=()=>{e(""),r(""),s(""),l(""),h(""),p([]),S("สถานะ: รีเซ็ตแล้ว"),C("-"),P("-")};return A.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[A.jsx(Io,{title:"False Position Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-[#161b22] rounded-lg p-4 border border-[#30363d] fade-in-delay1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),A.jsx("input",{type:"text",value:t,onChange:y=>e(y.target.value),placeholder:"เช่น x^3 - x - 2 หรือ sin(x)",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] mb-3 text-gray-200"}),A.jsxs("div",{className:"flex gap-3 mb-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XL"}),A.jsx("input",{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า XR"}),A.jsx("input",{type:"number",value:i,onChange:y=>s(y.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]})]}),A.jsxs("div",{className:"flex gap-3 mb-4",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error (เช่น 1e-6)"}),A.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),A.jsx("input",{type:"number",value:u,onChange:y=>h(y.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-[#0d1117] border border-[#30363d] text-gray-200"})]})]}),A.jsxs("div",{className:"flex gap-3 mb-4",children:[A.jsx("button",{onClick:x,className:"btn-primary glow-btn flex-1 py-2 rounded font-semibold",children:"คำนวณ"}),A.jsx("button",{onClick:_,className:"btn-danger flex-1 border border-[#30363d] py-2 rounded",children:"รีเซ็ต"})]}),A.jsx("button",{onClick:I,className:"w-full btn-primary glow-btn py-2 rounded mb-3",children:"💾 บันทึกโจทย์นี้"}),A.jsxs("div",{className:"text-sm mb-2",children:[A.jsx("div",{children:g}),A.jsxs("div",{children:["Iterations: ",V]}),A.jsxs("div",{children:["Root: ",N]})]}),T.length>0&&A.jsxs("div",{className:"mt-2",children:[A.jsx("h2",{className:"text-sm text-gray-400 mb-2",children:"📘 โจทย์ที่บันทึกไว้:"}),A.jsx("ul",{className:"text-xs text-gray-300 bg-[#0d1117] rounded p-2 max-h-48 overflow-auto border border-[#30363d]",children:T.map(y=>A.jsxs("li",{className:`flex items-center justify-between gap-2 border-b border-[#30363d] py-1 ${R.has(y.id)?"fade-out":""}`,children:[A.jsx("span",{className:"truncate",children:y.expr}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>m(y),className:"text-slate-900 btn-primary px-2 py-0.5 rounded",children:"โหลด"}),A.jsx("button",{onClick:()=>E(y),className:"text-slate-900 btn-danger px-2 py-0.5 rounded glow-btn",children:"ลบ"})]})]},y.id))})]})]}),A.jsxs("div",{className:"bg-[#161b22] rounded-lg p-4 border border-[#30363d] fade-in-delay2",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน"}),A.jsx("div",{className:"w-full h-72 bg-[#0d1117] rounded",children:A.jsx(k0,{func:ul(t)||(y=>y),xl:parseFloat(n)||-5,xr:parseFloat(i)||5,iterations:d,className:"w-full h-72 rounded"})}),A.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เขียว = XL, แดง = XR, ส้ม = X1 ทุก iteration (วงใหญ่ = X1 สุดท้าย)"})]})]}),A.jsx(V0,{iterations:d}),A.jsx("div",{className:"text-sm text-gray-400 mt-6 fade-in-delay3",children:"© Numerical Web — ฝีมือคุณ"})]})}function rR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState([]),[d,p]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[g,S]=M.useState("-"),[N,P]=M.useState("-"),[V,C]=M.useState(null),[T,R]=M.useState("");function D(_){if(!_||!_.trim())return null;let y=_.replace(/\^/g,"**");y=y.replace(/\bln\s*\(/gi,"log("),y=y.replace(/\bpi\b/gi,"PI"),y=y.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+y+"); }")}catch{return null}}function F(_){return _===null?"-":isFinite(_)?Number(_).toPrecision(8).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(_)}function B(_,y){const w=Math.cbrt(Number.EPSILON)*(Math.abs(y)+1),z=_(y+w),Y=_(y-w);return(z-Y)/(2*w)}function I(_,y){try{const w=B(_,y);return!isFinite(w)||w===0?.5:1/Math.max(1,Math.abs(w))}catch{return .5}}function m(_,y,w,z,Y){let G=[],J=y;G.push({iter:0,x:J,error:null});for(let j=1;j<=z;j++){const H=J-Y*_(J),X=Math.abs((H-J)/H);if(G.push({iter:j,x:H,error:X}),!isFinite(H))return{error:"ค่า x ไม่เป็นจำนวนจำกัด (อาจ Diverge)"};if(X<=w)return{root:H,iterations:G,converged:!0,lambda:Y};J=H}return{root:G[G.length-1].x,iterations:G,converged:!1,lambda:Y}}M.useEffect(()=>{const _=D(t),y=parseFloat(n);if(!_||!isFinite(y)){C(null),R("");return}const w=I(_,y);C(w);const z=t.replace(/\s+/g," ").trim();R(`f2(x) = x - (${w.toPrecision(6)}) * [ ${z||"f(x)"} ]`)},[t,n]);const E=()=>{const _=D(t);if(!_){p("สถานะ: f(x) ไม่ถูกต้อง");return}const y=parseFloat(n),w=parseFloat(i),z=parseInt(o,10);if(!isFinite(y)){p("สถานะ: ค่าเริ่มต้น x0 ไม่ถูกต้อง");return}if(!isFinite(w)||w<=0){p("สถานะ: Error (tol) ต้องเป็นจำนวนบวก เช่น 1e-6");return}if(!Number.isInteger(z)||z<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก เช่น 50");return}const Y=I(_,y),G=m(_,y,w,z,Y);if(G.error){p("สถานะ: "+G.error),h([]),P("-"),S("-");return}h(G.iterations),p("สถานะ: เสร็จสิ้น "+(G.converged?"(converged)":"(ไม่ converged)")),P(G.iterations.length),S(F(G.root)),C(G.lambda);const J=t.replace(/\s+/g," ").trim();R(`f2(x) = x - (${G.lambda.toPrecision(6)}) * [ ${J||"f(x)"} ]`)},x=()=>{e(""),r(""),s(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),S("-"),C(null),R("")};return A.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[A.jsx(Io,{title:"One-Point Iteration",subtitle:"แปลง f(x) → f2(x) อัตโนมัติ"}),A.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"f(x)"}),A.jsx("input",{type:"text",value:t,onChange:_=>e(_.target.value),placeholder:"เช่น x^3 + x - 1,  sin(x) - x/2,  ln(x) - 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),A.jsxs("div",{className:"flex gap-3 mb-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่าเริ่มต้น x0"}),A.jsx("input",{type:"number",value:n,onChange:_=>r(_.target.value),placeholder:"เช่น 0.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),A.jsx("input",{type:"text",value:i,onChange:_=>s(_.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),A.jsx("input",{type:"number",value:o,onChange:_=>l(_.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),A.jsxs("div",{className:"rounded-md bg-slate-900 border border-slate-700 p-3 text-sm text-gray-300 mb-4",children:[A.jsx("div",{className:"font-semibold text-cyan-300 mb-1",children:"f2(x) ที่ใช้ในการคำนวณ"}),A.jsx("div",{className:"break-words",children:T||"— (กรอก f(x) และ x0 เพื่อดู f2(x))"}),V!==null&&A.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["λ (อัตโนมัติ) = ",F(V)]})]}),A.jsxs("div",{className:"flex gap-3 mb-4",children:[A.jsx("button",{onClick:E,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),A.jsx("button",{onClick:x,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),A.jsxs("div",{className:"text-sm mb-3",children:[A.jsx("div",{children:d}),A.jsxs("div",{children:["Iterations: ",N]}),A.jsxs("div",{children:["Root: ",g]})]}),u.length>0&&A.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:A.jsxs("table",{className:"w-full text-sm border-collapse",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[A.jsx("th",{className:"p-2 text-right",children:"iter"}),A.jsx("th",{className:"p-2 text-right",children:"x"}),A.jsx("th",{className:"p-2 text-right",children:"error"})]})}),A.jsx("tbody",{children:u.map(_=>A.jsxs("tr",{className:"border-b border-slate-700",children:[A.jsx("td",{className:"p-2 text-right",children:_.iter}),A.jsx("td",{className:"p-2 text-right",children:F(_.x)}),A.jsx("td",{className:"p-2 text-right",children:_.error===null?"-":F(_.error)})]},_.iter))})]})}),A.jsxs("div",{className:"text-xs text-gray-400 mt-4",children:[A.jsx("div",{children:"หมายเหตุ: ใช้หน่วยเรเดียนสำหรับ sin/cos/tan; เขียนคูณให้ชัด เช่น 2*x (ไม่ใช่ 2x)"}),A.jsx("div",{children:"ตัวอย่าง f(x): x^3 + x - 1,  e^(-x) - x,  ln(x) - 1,  sin(x) - x/2"})]})]})]})}function iR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState([]),[d,p]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[g,S]=M.useState("-"),[N,P]=M.useState("-"),V=M.useRef(null);function C(m){if(!m||!m.trim())return null;let E=m.replace(/\^/g,"**");E=E.replace(/\bln\s*\(/gi,"log("),E=E.replace(/\bpi\b/gi,"PI"),E=E.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+E+"); }")}catch{return null}}function T(m,E){return(m(E+1e-6)-m(E-1e-6))/(2*1e-6)}function R(m,E,x,_){let y=[],w=E,z=m(w);y.push({iter:0,x:w,fx:z,error:null});for(let Y=1;Y<=_;Y++){let G=T(m,w);if(G===0)return{error:"f'(x) = 0 หารด้วยศูนย์ไม่ได้"};let J=w-z/G,j=m(J),H=Math.abs(J-w)/Math.abs(J);if(y.push({iter:Y,x:J,fx:j,error:H}),Math.abs(j)<x||H<x)return{root:J,iterations:y,converged:!0};w=J,z=j}return{root:w,iterations:y,converged:!1}}function D(m){return m===null?"-":isFinite(m)?Number(m).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(m)}function F(m,E){const x=V.current,_=x.getContext("2d"),y=x.width,w=x.height;if(_.clearRect(0,0,y,w),_.fillStyle="#061022",_.fillRect(0,0,y,w),E.length===0)return;const z=E.map(me=>me.x),Y=E.map(me=>me.fx),G=Math.min(...z),J=Math.max(...z),j=(J-G)*.3||1,H=G-j,X=J+j,ce=Math.min(...Y),de=Math.max(...Y),nt=(de-ce)*.3||1,Ve=ce-nt,yt=de+nt,je=me=>(me-H)/(X-H)*y,De=me=>w-(me-Ve)/(yt-Ve)*w;if(_.strokeStyle="rgba(255,255,255,0.1)",Ve<0&&yt>0){const me=De(0);_.beginPath(),_.moveTo(0,me),_.lineTo(y,me),_.stroke()}if(H<0&&X>0){const me=je(0);_.beginPath(),_.moveTo(me,0),_.lineTo(me,w),_.stroke()}_.beginPath(),_.lineWidth=2,_.strokeStyle="#8ab4ff";const Vt=500;let hn=!1;for(let me=0;me<Vt;me++){const ue=H+(X-H)*me/(Vt-1);let Ce;try{Ce=m(ue)}catch{Ce=NaN}if(!isFinite(Ce)){hn=!1;continue}const Ue=je(ue),It=De(Ce);hn?_.lineTo(Ue,It):(_.moveTo(Ue,It),hn=!0)}_.stroke(),E.forEach((me,ue)=>{const Ce=je(me.x),Ue=De(me.fx);if(ue<E.length-1){const It=E[ue+1].x;_.beginPath(),_.moveTo(Ce,Ue),_.lineTo(je(It),De(0)),_.strokeStyle="#22c55e",_.setLineDash([4,4]),_.stroke(),_.setLineDash([])}_.beginPath(),_.moveTo(Ce,Ue),_.lineTo(Ce,De(0)),_.strokeStyle="rgba(255,255,255,0.2)",_.stroke(),_.fillStyle="#e2e8f0",_.font="12px sans-serif",_.fillText("x"+ue,Ce-10,De(0)+14),_.beginPath(),_.arc(Ce,Ue,ue===E.length-1?6:3,0,2*Math.PI),_.fillStyle=ue===E.length-1?"#fb923c":"#f97316",_.fill()})}const B=()=>{const m=C(t);if(!m){p("สถานะ: สมการไม่ถูกต้อง");return}const E=parseFloat(n),x=parseFloat(i),_=parseInt(o,10);if(isNaN(E)){p("สถานะ: x0 ไม่ถูกต้อง");return}if(!isFinite(x)||x<=0){p("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(_)||_<=0){p("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const y=R(m,E,x,_);if(y.error){p("สถานะ: "+y.error);return}h(y.iterations),p("สถานะ: เสร็จสิ้น "+(y.converged?"(converged)":"(ไม่ converged)")),P(y.iterations.length),S(D(y.root)),F(m,y.iterations)},I=()=>{e(""),r(""),s(""),l(""),h([]),p("สถานะ: รีเซ็ตแล้ว"),P("-"),S("-"),F(()=>0,[])};return M.useEffect(()=>{F(()=>0,[])},[]),A.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[A.jsx(Io,{title:"Newton-Raphson Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),A.jsx("input",{type:"text",value:t,onChange:m=>e(m.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),A.jsxs("div",{className:"mb-3",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),A.jsx("input",{type:"number",value:n,onChange:m=>r(m.target.value),placeholder:"เช่น 1.5",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex gap-3 mb-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),A.jsx("input",{type:"text",value:i,onChange:m=>s(m.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),A.jsx("input",{type:"number",value:o,onChange:m=>l(m.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),A.jsxs("div",{className:"flex gap-3 mb-4",children:[A.jsx("button",{onClick:B,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),A.jsx("button",{onClick:I,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),A.jsxs("div",{className:"text-sm",children:[A.jsx("div",{children:d}),A.jsxs("div",{children:["Iterations: ",N]}),A.jsxs("div",{children:["Root: ",g]})]}),u.length>0&&A.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:A.jsxs("table",{className:"w-full text-sm border-collapse",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[A.jsx("th",{className:"p-2 text-right",children:"iter"}),A.jsx("th",{className:"p-2 text-right",children:"x"}),A.jsx("th",{className:"p-2 text-right",children:"f(x)"}),A.jsx("th",{className:"p-2 text-right",children:"error"})]})}),A.jsx("tbody",{children:u.map(m=>A.jsxs("tr",{className:"border-b border-slate-700",children:[A.jsx("td",{className:"p-2 text-right",children:m.iter}),A.jsx("td",{className:"p-2 text-right",children:D(m.x)}),A.jsx("td",{className:"p-2 text-right",children:D(m.fx)}),A.jsx("td",{className:"p-2 text-right",children:m.error===null?"-":D(m.error)})]},m.iter))})]})})]}),A.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Iterations"}),A.jsx("canvas",{ref:V,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),A.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["จุดส้ม = ค่าที่ได้ในแต่ละ iteration, จุดส้มใหญ่ = ค่าสุดท้าย เส้นเขียว = เส้นสัมผัส f(x) ที่ x",A.jsx("sub",{children:"i"}),", Label = x0, x1, x2 …"]})]})]})]})}function sR(){const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[d,p]=M.useState([]),[g,S]=M.useState("สถานะ: ยังไม่ได้คำนวณ"),[N,P]=M.useState("-"),[V,C]=M.useState("-"),T=M.useRef(null);function R(E){if(!E||!E.trim())return null;let x=E.replace(/\^/g,"**");x=x.replace(/\bln\s*\(/gi,"log("),x=x.replace(/\bpi\b/gi,"PI"),x=x.replace(/\be\b/gi,"E");try{return new Function("x","with(Math){ return ("+x+"); }")}catch{return null}}function D(E,x,_,y,w){let z=[],Y=E(x),G=E(_);z.push({iter:0,x,fx:Y,error:null}),z.push({iter:1,x:_,fx:G,error:null});for(let J=2;J<=w;J++){if(G-Y===0)return{error:"หารด้วยศูนย์ (f1 - f0 = 0)"};let j=_-G*(_-x)/(G-Y),H=E(j),X=Math.abs(j-_)/Math.abs(j);if(z.push({iter:J,x:j,fx:H,error:X}),Math.abs(H)<y||X<y)return{root:j,iterations:z,converged:!0};x=_,Y=G,_=j,G=H}return{root:_,iterations:z,converged:!1}}function F(E){return E===null?"-":isFinite(E)?Number(E).toPrecision(6).replace(new RegExp("(?:\\.0+$)|(?:(?<=\\.[0-9]*[1-9])0+$)"),""):String(E)}function B(E,x){const _=T.current,y=_.getContext("2d"),w=_.width,z=_.height;if(y.clearRect(0,0,w,z),y.fillStyle="#061022",y.fillRect(0,0,w,z),x.length===0)return;const Y=x.map(ue=>ue.x),G=x.map(ue=>ue.fx),J=Math.min(...Y),j=Math.max(...Y),H=Math.min(...G),X=Math.max(...G),ce=(j-J)*.3||1,de=(X-H)*.3||1,nt=J-ce,Ve=j+ce,yt=H-de,je=X+de,De=ue=>(ue-nt)/(Ve-nt)*w,Vt=ue=>z-(ue-yt)/(je-yt)*z;if(y.strokeStyle="rgba(255,255,255,0.1)",yt<0&&je>0){const ue=Vt(0);y.beginPath(),y.moveTo(0,ue),y.lineTo(w,ue),y.stroke()}if(nt<0&&Ve>0){const ue=De(0);y.beginPath(),y.moveTo(ue,0),y.lineTo(ue,z),y.stroke()}y.beginPath(),y.lineWidth=2,y.strokeStyle="#8ab4ff";const hn=500;let me=!1;for(let ue=0;ue<hn;ue++){const Ce=nt+(Ve-nt)*ue/(hn-1);let Ue;try{Ue=E(Ce)}catch{Ue=NaN}if(!isFinite(Ue)){me=!1;continue}const It=De(Ce),fr=Vt(Ue);me?y.lineTo(It,fr):(y.moveTo(It,fr),me=!0)}y.stroke(),x.forEach((ue,Ce)=>{const Ue=De(ue.x),It=Vt(ue.fx);if(Ce>0){const fr=x[Ce-1];y.beginPath(),y.moveTo(De(fr.x),Vt(fr.fx)),y.lineTo(Ue,It),y.strokeStyle="#22c55e",y.setLineDash([4,4]),y.stroke(),y.setLineDash([])}y.beginPath(),y.arc(Ue,It,Ce===x.length-1?6:3,0,2*Math.PI),y.fillStyle=Ce===x.length-1?"#fb923c":"#f97316",y.fill(),y.fillStyle="#e2e8f0",y.font="12px sans-serif",y.fillText("x"+Ce,Ue-10,Vt(0)+14)})}const I=()=>{const E=R(t);if(!E){S("สถานะ: สมการไม่ถูกต้อง");return}const x=parseFloat(n),_=parseFloat(i),y=parseFloat(o),w=parseInt(u,10);if(isNaN(x)||isNaN(_)){S("สถานะ: x0/x1 ไม่ถูกต้อง");return}if(!isFinite(y)||y<=0){S("สถานะ: tol ต้องเป็นจำนวนบวก");return}if(!Number.isInteger(w)||w<=0){S("สถานะ: Max Iteration ต้องเป็นจำนวนเต็มบวก");return}const z=D(E,x,_,y,w);if(z.error){S("สถานะ: "+z.error);return}p(z.iterations),S("สถานะ: เสร็จสิ้น "+(z.converged?"(converged)":"(ไม่ converged)")),C(z.iterations.length),P(F(z.root)),B(E,z.iterations)},m=()=>{e(""),r(""),s(""),l(""),h(""),p([]),S("สถานะ: รีเซ็ตแล้ว"),C("-"),P("-"),B(()=>0,[])};return M.useEffect(()=>{B(()=>0,[])},[]),A.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[A.jsx(Io,{title:"Secant Method",subtitle:"ตาราง + กราฟ แสดงการทำงาน"}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"สมการ f(x)"}),A.jsx("input",{type:"text",value:t,onChange:E=>e(E.target.value),placeholder:"เช่น x^3 - x - 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700 mb-3"}),A.jsxs("div",{className:"flex gap-3 mb-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x0"}),A.jsx("input",{type:"number",value:n,onChange:E=>r(E.target.value),placeholder:"เช่น 1",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ค่า x1"}),A.jsx("input",{type:"number",value:i,onChange:E=>s(E.target.value),placeholder:"เช่น 2",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),A.jsxs("div",{className:"flex gap-3 mb-3",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Error"}),A.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),placeholder:"เช่น 1e-6",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Max Iteration"}),A.jsx("input",{type:"number",value:u,onChange:E=>h(E.target.value),placeholder:"เช่น 50",className:"w-full px-3 py-2 rounded bg-slate-900 border border-slate-700"})]})]}),A.jsxs("div",{className:"flex gap-3 mb-4",children:[A.jsx("button",{onClick:I,className:"flex-1 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-2 rounded",children:"คำนวณ"}),A.jsx("button",{onClick:m,className:"flex-1 border border-slate-600 text-gray-400 py-2 rounded hover:bg-slate-700",children:"รีเซ็ต"})]}),A.jsxs("div",{className:"text-sm",children:[A.jsx("div",{children:g}),A.jsxs("div",{children:["Iterations: ",V]}),A.jsxs("div",{children:["Root: ",N]})]}),d.length>0&&A.jsx("div",{className:"overflow-auto max-h-64 mt-3",children:A.jsxs("table",{className:"w-full text-sm border-collapse",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-slate-700 text-gray-400",children:[A.jsx("th",{className:"p-2 text-right",children:"iter"}),A.jsx("th",{className:"p-2 text-right",children:"x"}),A.jsx("th",{className:"p-2 text-right",children:"f(x)"}),A.jsx("th",{className:"p-2 text-right",children:"error"})]})}),A.jsx("tbody",{children:d.map(E=>A.jsxs("tr",{className:"border-b border-slate-700",children:[A.jsx("td",{className:"p-2 text-right",children:E.iter}),A.jsx("td",{className:"p-2 text-right",children:F(E.x)}),A.jsx("td",{className:"p-2 text-right",children:F(E.fx)}),A.jsx("td",{className:"p-2 text-right",children:E.error===null?"-":F(E.error)})]},E.iter))})]})})]}),A.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow",children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"กราฟฟังก์ชัน + Secant"}),A.jsx("canvas",{ref:T,width:800,height:320,className:"w-full h-72 bg-slate-900 rounded"}),A.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"เส้นเขียว = เส้น secant ระหว่างแต่ละจุด, จุดส้ม = ค่าที่ได้, จุดส้มใหญ่ = ค่าสุดท้าย Label = x0, x1, x2 …"})]})]})]})}function oR(){return A.jsx(OT,{basename:"/Numerical-web",children:A.jsxs(PT,{children:[A.jsx(Er,{path:"/",element:A.jsx(BT,{})}),A.jsx(Er,{path:"/bisection",element:A.jsx(JC,{})}),A.jsx(Er,{path:"/falsepo",element:A.jsx(nR,{})}),A.jsx(Er,{path:"/onepoint",element:A.jsx(rR,{})}),A.jsx(Er,{path:"/newtonrap",element:A.jsx(iR,{})}),A.jsx(Er,{path:"/secant",element:A.jsx(sR,{})})]})})}Sv(document.getElementById("root")).render(A.jsx(M.StrictMode,{children:A.jsx(oR,{})}));
